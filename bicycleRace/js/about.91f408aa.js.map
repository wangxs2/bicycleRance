{"version":3,"sources":["webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/mp4/index.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/playlist-selectors.js","webpack:///./src/assets/weatherIcon/小雪.png","webpack:///./node_modules/_m3u8-parser@2.1.0@m3u8-parser/es5/parser.js","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/add-text-track-data.js","webpack:///./src/assets/weatherIcon/晴.png","webpack:///./src/views/layout/index.vue?fa77","webpack:///./src/views/layout/leftBox.vue?d5be","webpack:///./src/views/layout/time.vue?ebc5","webpack:///src/views/layout/time.vue","webpack:///./src/views/layout/time.vue?2211","webpack:///./src/views/layout/time.vue","webpack:///src/views/layout/leftBox.vue","webpack:///./src/views/layout/leftBox.vue?4475","webpack:///./src/views/layout/leftBox.vue","webpack:///./src/views/layout/rightTBox.vue?d033","webpack:///src/views/layout/rightTBox.vue","webpack:///./src/views/layout/rightTBox.vue?dd22","webpack:///./src/views/layout/rightTBox.vue","webpack:///./src/views/layout/rightBBox.vue?b618","webpack:///src/views/layout/rightBBox.vue","webpack:///./src/views/layout/rightBBox.vue?2f1f","webpack:///./src/views/layout/rightBBox.vue","webpack:///./src/views/layout/linePath.js","webpack:///src/views/layout/index.vue","webpack:///./src/views/layout/index.vue?db1a","webpack:///./src/views/layout/index.vue","webpack:///./node_modules/_webwackify@0.1.6@webwackify/index.js","webpack:///./node_modules/_xtend@4.0.2@xtend/immutable.js","webpack:///./node_modules/_tsml@1.0.1@tsml/tsml.js","webpack:///./node_modules/_m3u8-parser@2.1.0@m3u8-parser/es5/index.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/playback-watcher.js","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/flash-transmuxer-worker.js","webpack:///./src/assets/image/sz.png","webpack:///./src/assets/weatherIcon/沙尘暴.png","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/playlist-loader.js","webpack:///./src/assets/weatherIcon/暴雪.png","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/utils/exp-golomb.js","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/flash-source-buffer.js","webpack:///./node_modules/_aes-decrypter@1.0.3@aes-decrypter/es5/stream.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/ad-cue-tags.js","webpack:///./src/assets/weatherIcon/雨夹雪.png","webpack:///./src/assets/weatherIcon/中雨.png","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/sync-controller.js","webpack:///./src/assets/weatherIcon/阵雨.png","webpack:///./src/assets/weatherIcon/冻雨.png","webpack:///./src/assets/weatherIcon/暴雨.png","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/m2ts/caption-stream.js","webpack:///./node_modules/_videojs-vtt.js@0.12.6@videojs-vtt.js/lib/vttregion.js","webpack:///./src/assets/weatherIcon/阵雪.png","webpack:///./src/assets/weatherIcon/霾.png","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/flash-constants.js","webpack:///./src/assets/image/qw.png","webpack:///./node_modules/_parse-headers@2.0.3@parse-headers/parse-headers.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/resolve-url.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/data/silence.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/utils/clock.js","webpack:///./src/assets/weatherIcon/雾.png","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/codecs/adts.js","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/flash-media-source.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/decrypter-worker.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/bin-utils.js","webpack:///./src/assets/weatherIcon sync ^\\.\\/.*\\.png$","webpack:///./src/views/layout/arrow2@3x.png","webpack:///./src/assets/weatherIcon/浮尘.png","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/master-playlist-controller.js","webpack:///./node_modules/_video.js@6.12.1@video.js/dist/video.cjs.js","webpack:///./node_modules/_url-toolkit@2.2.2@url-toolkit/src/url-toolkit.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/mp4/mp4-generator.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/aac/index.js","webpack:///./node_modules/_videojs-vtt.js@0.12.6@videojs-vtt.js/lib/vtt.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/m2ts/m2ts.js","webpack:///./src/views/layout/leftBox.vue?fed1","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/m2ts/stream-types.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/vtt-segment-loader.js","webpack:///./node_modules/_m3u8-parser@2.1.0@m3u8-parser/es5/stream.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/tools/ts-inspector.js","webpack:///./node_modules/_pkcs7@0.2.3@pkcs7/lib/pad.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/source-updater.js","webpack:///./node_modules/_videojs-vtt.js@0.12.6@videojs-vtt.js/lib/vttcue.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/media-segment-request.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/utils/stream.js","webpack:///./src/assets/weatherIcon/大雪.png","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/m2ts/metadata-stream.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/reload-source-on-error.js","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/transmuxer-worker.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/m2ts/timestamp-rollover-stream.js","webpack:///./node_modules/_m3u8-parser@2.1.0@m3u8-parser/es5/line-stream.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/mp4/probe.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/config.js","webpack:///./src/assets/weatherIcon/undefined.png","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/flv/coalesce-stream.js","webpack:///./src/assets/weatherIcon/阴.png","webpack:///./src/assets/weatherIcon/强沙尘暴.png","webpack:///./src/assets/weatherIcon/多云.png","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/create-text-tracks-if-necessary.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/codecs/h264.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/ranges.js","webpack:///./node_modules/_pkcs7@0.2.3@pkcs7/lib/unpad.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/flv/tag-list.js","webpack:///./src/assets/weatherIcon/大雨.png","webpack:///./node_modules/_m3u8-parser@2.1.0@m3u8-parser/es5/parse-stream.js","webpack:///./src/assets/weatherIcon/小雨.png","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/flv/flv-header.js","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/virtual-source-buffer.js","webpack:///./src/views/layout/rightTBox.vue?e1d3","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/xhr.js","webpack:///./node_modules/_aes-decrypter@1.0.3@aes-decrypter/es5/aes.js","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/html-media-source.js","webpack:///./src/assets/weatherIcon/雷阵雨.png","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/remove-cues-from-track.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/media-groups.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/flv/index.js","webpack:///./src/views/layout/rightBBox.vue?275e","webpack:///./src/assets/weatherIcon/中雪.png","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/segment-loader.js","webpack:///./node_modules/_aes-decrypter@1.0.3@aes-decrypter/es5/decrypter.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/mp4/transmuxer.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/rendition-mixin.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/flv/transmuxer.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/playlist.js","webpack:///./node_modules/_pkcs7@0.2.3@pkcs7/lib/pkcs7.js","webpack:///./src/assets/weatherIcon/特大暴雨.png","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/m2ts/probe.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/videojs-contrib-hls.js","webpack:///./src/assets/image/dx.png","webpack:///./src/views/layout/index.vue?88dd","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/videojs-contrib-media-sources.js","webpack:///./node_modules/_videojs-contrib-hls@5.15.0@videojs-contrib-hls/es5/util/codecs.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/flv/flv-tag.js","webpack:///./node_modules/_xhr@2.4.0@xhr/index.js","webpack:///./node_modules/_mux.js@4.3.2@mux.js/lib/aac/probe.js","webpack:///./node_modules/_aes-decrypter@1.0.3@aes-decrypter/es5/index.js","webpack:///./node_modules/_aes-decrypter@1.0.3@aes-decrypter/es5/async-stream.js","webpack:///./node_modules/_videojs-vtt.js@0.12.6@videojs-vtt.js/lib/browser-index.js","webpack:///./src/assets/weatherIcon/雨.png","webpack:///./node_modules/_videojs-contrib-media-sources@4.7.2@videojs-contrib-media-sources/es5/codec-utils.js","webpack:///./src/views/layout/leftBox.vue?ecaa","webpack:///./src/assets/weatherIcon/扬沙.png"],"names":["module","exports","generator","Transmuxer","AudioSegmentStream","VideoSegmentStream","_interopRequireDefault","obj","__esModule","Object","defineProperty","value","_config","_config2","_playlist","_playlist2","_utilCodecsJs","safeGetComputedStyle","el","property","result","undefined","window","getComputedStyle","stableSort","array","sortFn","newArray","slice","sort","left","right","cmp","indexOf","comparePlaylistBandwidth","leftBandwidth","rightBandwidth","attributes","BANDWIDTH","Number","MAX_VALUE","comparePlaylistResolution","leftWidth","rightWidth","RESOLUTION","width","simpleSelector","master","playerBandwidth","playerWidth","playerHeight","sortedPlaylistReps","playlists","map","playlist","height","bandwidth","filter","rep","isIncompatible","enabledPlaylistReps","isEnabled","length","isDisabled","bandwidthPlaylistReps","BANDWIDTH_VARIANCE","highestRemainingBandwidthRep","bandwidthBestRep","haveResolution","resolutionBestRepList","resolutionBestRep","resolutionPlusOneList","resolutionPlusOneSmallest","resolutionPlusOneRep","chosenRep","lastBandwidthSelector","this","systemBandwidth","parseInt","tech_","movingAverageBandwidthSelector","decay","average","Error","minRebufferMaxBandwidthSelector","settings","currentTime","duration","segmentDuration","timeUntilRebuffer","currentTimeline","syncController","compatiblePlaylists","enabledPlaylists","bandwidthPlaylists","hasAttribute","bind","rebufferingEstimates","syncPoint","getSyncPoint","numRequests","requestTimeEstimate","estimateSegmentRequestTime","rebufferingImpact","noRebufferingPlaylists","estimate","a","b","lowestBitrateCompatibleVariantSelector","playlistsWithVideo","parseCodecs","CODECS","videoCodec","_extends","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_stream","_stream2","_lineStream","_lineStream2","_parseStream","_parseStream2","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Parser","_Stream","_this","getPrototypeOf","lineStream","parseStream","pipe","uris","currentUri","currentMap","_key","noop","defaultMediaGroups","manifest","allowCache","discontinuityStarts","segments","on","entry","mediaGroup","rendition","tag","allowed","trigger","message","byterange","offset","endlist","endList","inf","mediaSequence","discontinuitySequence","METHOD","URI","method","uri","IV","iv","isFinite","number","test","playlistType","mediaGroups","media","TYPE","NAME","mediaGroupType","DEFAULT","autoselect","AUTOSELECT","LANGUAGE","language","instreamId","CHARACTERISTICS","characteristics","FORCED","forced","discontinuity","push","dateTimeString","dateTimeObject","targetduration","targetDuration","totalduration","totalDuration","cueOut","data","cueOutCont","cueIn","tagType","timeline","comment","type","chunk","_globalWindow","_globalWindow2","_videoJs","_videoJs2","deprecateOldCue","cue","frame","id","get","log","warn","privateData","durationOfVideo","dur","isNaN","Math","abs","Infinity","addTextTrackData","sourceHandler","captionArray","metadataArray","Cue","WebKitDataCue","VTTCue","forEach","caption","track","stream","inbandTextTracks_","addCue","startTime","timestampOffset","endTime","text","videoDuration","mediaSource_","metadata","time","cueTime","frames","url","metadataTrack_","cues","cuesArray","cuesGroupedByStartTime","reduce","timeSlot","sortedStartTimes","keys","idx","cueGroup","nextTime","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","staticRenderFns","_m","_l","$store","getters","itam","index","class","_v","_s","userName","name","speed","sendSync","autoStart","defaultVal","countString","isStart","globalTimer","day","hour","minute","second","millisecond","countVal","pauseTime","watch","deep","handler","vm","needSendSunc","passToParent","val","Boolean","default","mounted","countDown","computed","created","$on","startCountFn","stopCountFn","components","methods","leftTime","that","remainD","floor","remainH","remainM","remainS","clearInterval","timeID","counterFn","nowDate","Date","getTime","num","counterTime","leave1","leave2","leave3","round","timer","setInterval","$emit","component","timexs","mySwiper","timeObj","console","newVal","immediate","testTimer","timeFunction","seconds","minutes","hours","myHours","myMinutes","mySeconds","weatherobj","temperature","windPower","humidity","staticStyle","myPlayer","videoUrl","beforeDestroy","$video","videoDom","dispose","linePath","leftbox","righttbox","rightbbox","MyMip","passedPolyline","allpoint","carGroup","AMap","OverlayGroup","heatmap","heatmapData","query","page","pageSize","imei","websock","timerSocket","timerHeatMap","curMarkerList","curMarkerAllData","linePathList","curDataList","curInfoWindow","hhh","getImeis","setMap","item","count","p1","items","lng","lat","p2","getExtData","distance","heatMap","cloneObj","setDataSet","initmap","sessionStorage","getItem","close","setItem","separateArr","mypath","destroyed","$fetchGet","then","res","content","curMarkerObj","curMarkerData","rankNumber","countTime","initWebSocket","WebSocket","wsuri","onopen","event","onmessage","objme","oldLng","oldLat","z","curInfo","GeometryUtil","distanceOfLine","arr","onerror","e","onclose","currentTarget","readyState","timerFun","clearTimeout","plugin","radius","opacity","Map","resizeEnable","zoom","center","mapStyle","isSupportCanvas","alert","icon","position","Pixel","markerq","markerz","path","wdata","strokeColor","strokeWeight","strokeOpacity","outlineColor","borderWeight","lineJoin","weather","Weather","getLive","elem","document","createElement","getContext","setMarker","row","extData","marker","setPolyline","createComprisonFunction","value1","propertyName","value2","temp","bundleFn","sources","cache","stringify","JSON","webpack","webpackBootstrapFn","modules","installedModules","__webpack_require__","moduleId","l","m","c","d","getter","o","n","object","p","s","entryModule","bundleWithBrowserify","fn","fnModuleKey","cacheKeys","cacheKey","cacheExports","pow","random","toString","fnModuleCache","entryKey","entryCache","join","bundleWithWebpack","fnModuleId","sourceStrings","devMode","sKey","modulesString","fnModuleExports","fnSourceString","substring","mappedSourceStrings","replace","src","blob","Blob","URL","webkitURL","mozURL","msURL","workerUrl","createObjectURL","worker","Worker","objectURL","extend","clean","sa","_parser","_parser2","LineStream","ParseStream","_ranges","_ranges2","timerCancelEvents","PlaybackWatcher","options","tech","seekable","consecutiveUpdates","lastRecordedTime","timer_","checkCurrentTimeTimeout_","debug","logger_","canPlayHandler","monitorCurrentTime_","waitingHandler","techWaiting_","cancelTimerHandler","cancelTimer_","fixesBadSeeksHandler","fixesBadSeeks_","off","checkCurrentTime_","setTimeout","seeking","paused","buffered","SAFE_TIME_DELTA","end","waiting_","seekTo","afterSeekableWindow_","seekableEnd","beforeSeekableWindow_","seekableStart","start","printableRange","setCurrentTime","currentRange","findRange","livePoint","nextRange","findNextRange","videoUnderflow_","difference","skipTheGap_","gap","gapFromVideoUnderflow_","scheduledCurrentTime","TIME_FUDGE_FACTOR","gaps","findGaps","_muxJsLibFlv","_muxJsLibFlv2","wireTransmuxerEvents","transmuxer","segment","postMessage","action","MessageHandlers","init","Uint8Array","byteOffset","byteLength","flush","resetCaptions","FlashTransmuxerWorker","messageHandlers","_get","_x","_x2","_x3","_again","receiver","Function","desc","getOwnPropertyDescriptor","parent","_resolveUrl","_resolveUrl2","_m3u8Parser","_m3u8Parser2","updateSegments","original","update","min","mergeOptions","resolveSegmentUris","baseUri","resolvedUri","updateMaster","mergedPlaylist","setupMediaPlaylists","resolveMediaGroupUris","mediaType","groupKey","labelKey","mediaProperties","refreshDelay","lastSegment","delay","PlaylistLoader","_EventTarget","srcUrl","hls","hls_","withCredentials","handleManifestRedirects","state","request","xhr","error","req","playlistRequestError","haveMetadata","startingState","status","responseText","code","_this2","parser","media_","mediaUpdateTimeout","stopRequest","oldRequest","onreadystatechange","abort","_this3","mediaChange","resolveManifestRedirect","responseURL","started","isFinalRendition","_this4","load","_this5","location","href","EventTarget","ExpGolomb","workingData","workingBytesAvailable","workingWord","workingBitsAvailable","bitsAvailable","loadWord","workingBytes","availableBytes","set","subarray","DataView","buffer","getUint32","skipBits","skipBytes","readBits","size","bits","valu","skipLeadingZeros","leadingZeroCount","skipUnsignedExpGolomb","skipExpGolomb","readUnsignedExpGolomb","clz","readExpGolomb","readBoolean","readUnsignedByte","_removeCuesFromTrack","_removeCuesFromTrack2","_createTextTracksIfNecessary","_createTextTracksIfNecessary2","_addTextTrackData","_flashTransmuxerWorker","_flashTransmuxerWorker2","_webwackify","_webwackify2","_flashConstants","_flashConstants2","resolveFlashTransmuxWorker","scheduleTick","func","TIME_BETWEEN_CHUNKS","generateRandomString","toDecimalPlaces","places","scale","FlashSourceBuffer","_videojs$EventTarget","mediaSource","encodedHeader","chunkSize_","BYTES_PER_CHUNK","buffer_","bufferSize_","basePtsOffset_","NaN","audioBufferEnd_","videoBufferEnd_","updating","timestampOffset_","btoa","String","fromCharCode","apply","Array","getFlvHeader","safePlayerId","player_","flashEncodedHeaderName_","flashEncodedDataName_","swfObj","vjs_appendChunkReady","transmuxer_","receiveBuffer_","one","vjs_discontinuity","createTimeRange","vjs_getProperty","createTimeRanges","onHlsReset","onHlsReset_","terminate","bytes","vjs_abort","captions","flvBytes","convertTagsToData_","processBuffer_","chunkSize","shift","binary","b64str","segmentData","segmentByteLength","videoTargetPts","videoTags","tags","audioTags","firstVideoTag","pts","firstAudioTag","max","currentIndex","currentTag","keyFrame","metaDataTag","nextTag","filteredVideoTags","audioTargetPts","filteredAudioTags","getOrderedTags_","fudgeFactor","diff","adjustedTime","vjs_adjustCurrentTime","j","dts","Stream","listeners","listener","splice","callbacks","args","destination","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_i","Symbol","iterator","next","done","err","isArray","findAdCue","mediaTime","adStartTime","adEndTime","updateAdCues","parseFloat","adOffset","adTotal","_segment$cueOutCont$split$map","split","_segment$cueOutCont$split$map2","_x4","_muxJsLibMp4Probe","_muxJsLibMp4Probe2","_muxJsLibToolsTsInspectorJs","syncPointStrategies","run","segmentIndex","datetimeToDisplayTime","playlistTime","playlistStart","lastDistance","discontinuitySync","discontinuities","syncInfo","SyncController","inspectCache_","timelines","syncPoints","runStrategies_","selectSyncPoint_","sumDurations","strategy","bestSyncPoint","bestDistance","bestStrategy","newDistance","oldPlaylist","newPlaylist","mediaSequenceDiff","lastRemovedSegment","playlistTimestamp","segmentInfo","timingInfo","probeMp4Segment_","probeTsSegment_","calculateSegmentTimeMapping_","saveDiscontinuitySyncInfo_","mediaIndex","timescales","timescale","timeInfo","inspect","segmentStartTime","segmentEndTime","video","dtsTime","audio","containsVideo","containsAudio","mapping","mappingObj","startOfSegment","accuracy","mediaIndexDiff","USER_DATA_REGISTERED_ITU_T_T35","RBSP_TRAILING_BITS","parseSei","payloadType","payloadSize","payload","parseUserData","sei","parseCaptionPackets","userData","results","ccData","CaptionStream","captionPackets_","ccStreams_","Cea608Stream","reset","cc","nalUnitType","escapedRBSP","latestDts_","ignoreNextEqualDts_","concat","presortIndex","packet","dispatchCea608Packet","activeCea608Channel_","ccStream","setsChannel1Active","setsChannel2Active","CHARACTER_TRANSLATION","getCharFromCode","BOTTOM_ROW","ROWS","createDisplayBuffer","field","dataChannel","field_","dataChannel_","name_","setConstants","swap","char0","char1","lastControlCode_","PADDING_","RESUME_CAPTION_LOADING_","mode_","END_OF_CAPTION_","clearFormatting","flushDisplayed","displayed_","nonDisplayed_","startPts_","ROLL_UP_2_ROWS_","topRow_","ROLL_UP_3_ROWS_","ROLL_UP_4_ROWS_","CARRIAGE_RETURN_","shiftRowsUp_","BACKSPACE_","ERASE_DISPLAYED_MEMORY_","ERASE_NON_DISPLAYED_MEMORY_","RESUME_DIRECT_CAPTIONING_","isSpecialCharacter","column_","isExtCharacter","row_","isMidRowCode","addFormatting","isOffsetControlCode","isPAC","formatting_","isColorPAC","isNormalChar","trim","startPts","endPts","BASE_","EXT_","CONTROL_","OFFSET_","char","format","reverse","popOn","baseRow","rollUp","paintOn","scrollSetting","findScrollSetting","scroll","toLowerCase","isValidPercentValue","VTTRegion","_width","_lines","_regionAnchorX","_regionAnchorY","_viewportAnchorX","_viewportAnchorY","_scroll","setting","SyntaxError","flashConstants","string","arg","headers","headersArr","_urlToolkit","_urlToolkit2","resolveUrl","baseURL","relativeURL","buildAbsoluteURL","highPrefix","lowPrefix","zeroFill","makeTable","metaTable","part","coneOfSilence","96000","88200","64000","48000","44100","32000","24000","16000","12000","11025","8000","secondsToVideoTs","secondsToAudioTs","videoTsToSeconds","audioTsToSeconds","audioTsToVideoTs","videoTsToAudioTs","ONE_SECOND_IN_TS","sampleRate","timestamp","AdtsStream","ADTS_SAMPLING_FREQUENCIES","frameLength","protectionSkipBytes","frameEnd","oldBuffer","sampleCount","adtsFrameDuration","frameNum","audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize","_globalDocument","_globalDocument2","_flashSourceBuffer","_flashSourceBuffer2","_codecUtils","FlashMediaSource","sourceBuffers","getElementById","swfId","parentNode","vjs_load","parsedType","parseContentType","sourceBuffer","vjs_endOfStream","oldDuration","vjs_setProperty","remove","_aesDecrypter","_binUtils","DecrypterWorker","encrypted","Uint32Array","Decrypter","createTransferableMessage","decrypted","textRange","range","formatHexString","formatAsciiString","transferable","ArrayBuffer","isView","initSegmentId","initSegment","utils","hexDump","step","hex","ascii","tagDump","textRanges","ranges","webpackContext","webpackContextResolve","resolve","_playlistLoader","_playlistLoader2","_playlistJs","_segmentLoader","_segmentLoader2","_vttSegmentLoader","_vttSegmentLoader2","_adCueTags","_adCueTags2","_syncController","_syncController2","_videojsContribMediaSourcesEs5CodecUtils","_decrypterWorker","_decrypterWorker2","_mediaGroups","ABORT_EARLY_BLACKLIST_SECONDS","Hls","defaultCodecs","videoObjectTypeIndicator","audioProfile","loaderStats","sumLoaderStat","stat","audioSegmentLoader_","mainSegmentLoader_","resolveDecrypterWorker","mapLegacyAvcCodecs_","codecString","match","translateLegacyCodecs","makeMimeTypeString","container","codecs","getContainerType","getCodecs","mediaAttributes","mimeTypesForPlaylist_","containerType","codecInfo","isMuxed","isMaat","AUDIO","audioGroup","groupId","codecStrings","justAudio","justVideo","bothVideoAudio","MasterPlaylistController","mode","externHls","useCueTags","blacklistDuration","enableLowInitialPlaylist","useCueTags_","cueTagsTrack_","addTextTrack","inBandMetadataTrackDispatchType","requestOptions_","timeout","mediaTypes_","createMediaTypes","MediaSource","addEventListener","handleSourceOpen_","seekable_","hasPlayed_","syncController_","segmentMetadataTrack_","addRemoteTextTrack","kind","label","decrypter_","segmentLoaderSettings","hasPlayed","goalBufferLength","decrypter","masterPlaylistLoader_","setupMasterPlaylistLoaderListeners_","segmentMetadataTrack","loaderType","subtitleSegmentLoader_","setupSegmentLoaderListeners_","requestTimeout","isLowestEnabledRendition","preload","setupMediaGroups","segmentLoaders","SUBTITLES","main","requestOptions","masterPlaylistLoader","mediaTypes","blacklistCurrentPlaylist","triggerPresenceUsage_","setupSourceBuffers_","endOfStream","setupFirstPlay","updatedPlaylist","selectedMedia","selectInitialPlaylist","selectPlaylist","initialMedia_","updateAdCues_","updateDuration","addSeekableRange","addSeekableRange_","onDurationchange","pause","bubbles","playlistOutdated","stuckAtPlaylistEnd_","defaultDemuxed","audioGroupKeys","properties","Playlist","isAes","isFmp4","nextPlaylist","currentPlaylist","forwardBuffer","bufferLowWaterLine","MAX_BUFFER_LOW_WATER_LINE","onSyncInfoUpdate_","onEndOfStream","mediaSecondsLoaded","activePlaylistLoader","resetLoader","ended","_ret3","browser","IE_VERSION","v","autoplay","playPromise","play","isEndOfStream","ended_","expired","getExpiredTime","absolutePlaylistEnd","playlistEnd","bufferedEnd","excludeUntil","now","resetEverything","mainSeekable","audioSeekable","newDuration","setDuration","removeEventListener","_this6","groups","group","playlistLoader","mimeTypes","mimeType","excludeIncompatibleVariants_","codecCount","variant","variantCodecs","isTypeSupported","initial","GOAL_BUFFER_LENGTH","rate","GOAL_BUFFER_LENGTH_RATE","MAX_GOAL_BUFFER_LENGTH","BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","_interopDefault","ex","tsml","safeParseTuple","vtt","version","USER_AGENT","navigator","userAgent","webkitVersionMap","exec","appleWebkitVersion","pop","IS_IPAD","IS_IPHONE","IS_IPOD","IS_IOS","IOS_VERSION","IS_ANDROID","ANDROID_VERSION","major","minor","IS_OLD_ANDROID","IS_NATIVE_ANDROID","IS_FIREFOX","IS_EDGE","IS_CHROME","CHROME_VERSION","IS_IE8","IS_SAFARI","IS_ANY_SAFARI","TOUCH_ENABLED","isReal","maxTouchPoints","DocumentTouch","BACKGROUND_SIZE_SUPPORTED","style","freeze","_typeof","classCallCheck","inherits","possibleConstructorReturn","taggedTemplateLiteralLoose","strings","raw","isObject","each","accum","_len","isPlain","level","history","logByType","lvl","levels","lvlRegExp","RegExp","unshift","toUpperCase","info","x","all","clear","disable","enable","_len2","_key2","_len3","_key3","_len4","_key4","log$1","computedStyle","prop","cs","currentStyle","_templateObject","isNonBlankString","str","throwIfWhitespace","classRegExp","className","isEl","nodeType","isInFrame","createQuerier","selector","context","querySelector","ctx","createEl","tagName","getOwnPropertyNames","propName","setAttribute","textContent","attrName","appendContent","innerText","prependTo","child","firstChild","insertBefore","appendChild","hasClass","element","classToCheck","classList","contains","addClass","classToAdd","add","removeClass","classToRemove","toggleClass","classToToggle","predicate","has","setAttributes","attrValue","removeAttribute","getAttributes","knownBooleans","attrVal","getAttribute","attribute","blockTextSelection","body","focus","onselectstart","unblockTextSelection","getBoundingClientRect","rect","k","findPosition","box","top","docEl","documentElement","clientLeft","scrollLeft","pageXOffset","clientTop","scrollTop","pageYOffset","getPointerPosition","boxW","offsetWidth","boxH","offsetHeight","boxY","boxX","pageY","pageX","changedTouches","y","isTextNode","emptyEl","removeChild","normalizeContent","createTextNode","node","insertContent","isSingleLeftClick","button","buttons","$","$$","Dom","_guid","newGUID","elData","elIdAttr","getData","hasData","removeData","_cleanUpEvents","handlers","dispatcher","detachEvent","disabled","_handleMultipleEvents","types","callback","fixEvent","returnTrue","returnFalse","isPropagationStopped","old","preventDefault","srcElement","relatedTarget","fromElement","toElement","returnValue","defaultPrevented","stopPropagation","cancelBubble","stopImmediatePropagation","isImmediatePropagationStopped","clientX","doc","clientY","which","charCode","keyCode","_supportsPassive","opts","passiveEvents","guid","hash","handlersCopy","passive","attachEvent","removeType","t","elemData","ownerDocument","targetData","Events","_windowLoaded","videojs$2","autoSetup","vids","getElementsByTagName","audios","divs","mediaEls","_i2","_e2","_i3","_e3","mediaEl","autoSetupTimeout","player","wait","vjs","createStyleElement","setTextContent","styleSheet","cssText","uid","bound","throttle","last","throttled","debounce","_later","allowedEvents_","ael","dispatchEvent","isEvented","eventBusEl_","every","isValidEventType","validateTarget","nodeName","validateEventType","validateListener","normalizeListenArgs","isTargetingSelf","listen","EventedMixin","_normalizeListenArgs","removeListenerOnDispose","removeRemoverOnTargetDispose","_normalizeListenArgs2","wrapper","largs","targetOrType","typeOrListener","evented","eventBusKey","StatefulMixin","setState","stateUpdates","changes","from","to","stateful","defaultState","handleStateChanged","toTitleCase","charAt","titleCaseEquals","str1","str2","Component","ready","options_","id_","el_","children_","childIndex_","childNameIndex_","initChildren","reportTouchActivity","enableTouchActivity","localize","tokens","defaultValue","languages","primaryCode","primaryLang","localizedString","ret","contentEl","contentEl_","children","getChildById","getChild","addChild","componentName","componentClassName","componentClass","ComponentClass","getComponent","childNodes","refNode","childFound","compEl","parentOptions","handleAdd","playerOptions","newChild","workingChildren","Tech","some","wchild","isTech","buildCSSClass","sync","isReady_","readyQueue_","triggerReady","readyQueue","show","hide","lockShowing","unlockShowing","skipListeners","dimension","dimensions","widthOrHeight","pxIndex","currentDimension","computedWidthOrHeight","getPropertyValue","rule","currentDimensions","currentWidth","currentHeight","blur","emitTapEvents","touchStart","firstTouch","tapMovementThreshold","touchTimeThreshold","couldBeTap","touches","xdiff","ydiff","touchDistance","sqrt","noTap","touchTime","reportUserActivity","report","touchHolding","touchEnd","timeoutId","disposeFn","interval","intervalId","requestAnimationFrame","supportsRaf_","cancelAnimationFrame","registerComponent","ComponentToRegister","isComp","isPrototypeOf","reason","components_","Player","players","playerNames","pname","rangeCheck","fnName","maxIndex","getRange","valueIndex","rangeIndex","createTimeRangesObj","bufferedPercent","bufferedDuration","FullscreenApi","apiMap","specApi","browserApi","MediaError","defaultMessages","errorTypes","1","2","3","4","5","errNum","isPromise","silencePromise","trackToJson_","acc","textTracksToJson","trackEls","trackObjs","tracks","trackEl","json","textTracks","jsonToTextTracks","addedTrack","textTrackConverter","MODAL_CLASS_NAME","ESC","ModalDialog","_Component","opened_","hasBeenOpened_","hasBeenFilled_","closeable","uncloseable","role","descEl_","description","tabIndex","previouslyActiveEl_","handleKeyPress","open","fillAlways","fill","wasPlaying_","pauseOnOpen","hadControls_","controls","conditionalFocus_","opened","conditionalBlur_","temporary","closeable_","controlText","fillWith","parentEl","nextSiblingEl","nextSibling","empty","closeButton","content_","activeEl","activeElement","playerEl","handleKeyDown","focusableEls","focusableEls_","focusIndex","shiftKey","allChildren","querySelectorAll","HTMLAnchorElement","HTMLAreaElement","HTMLInputElement","HTMLSelectElement","HTMLTextAreaElement","HTMLButtonElement","HTMLIFrameElement","HTMLObjectElement","HTMLEmbedElement","TrackList","_ret","list","tracks_","addTrack","removeTrack","rtrack","getTrackById","change","addtrack","removetrack","disableOthers","enabled","AudioTrackList","_TrackList","_prop","changing_","disableOthers$1","selected","VideoTrackList","TextTrackList","nonLanguageTextTrackKind","HtmlTrackElementList","trackElements","trackElements_","addTrackElement_","trackElement","getTrackElementByTrack_","trackElement_","removeTrackElement_","TextTrackCueList","setCues_","length_","oldLength","cues_","defineProp","getCueById","VideoTrackKind","alternative","sign","subtitles","commentary","AudioTrackKind","TextTrackKind","descriptions","chapters","TextTrackMode","hidden","showing","Track","trackProps","_loop","parseUrl","addToBody","host","protocol","div","innerHTML","details","getAbsoluteURL","getFileExtension","splitPathRe","pathParts","isCrossOrigin","winLoc","urlInfo","srcProtocol","crossOrigin","Url","parseCues","srcContent","WebVTT","vttjs","StringDecoder","errors","oncue","onparsingerror","onflush","parse","groupCollapsed","groupEnd","loadTrack","cors","response","responseBody","loaded_","loadHandler","TextTrack","_Track","srclang","default_","tt","activeCues_","activeCues","changed","timeupdateHandler","newMode","ct","active","originalCue","originalCue_","removeCue","_removeCue","cuechange","AudioTrack","newEnabled","VideoTrack","newSelected","NONE","LOADING","LOADED","ERROR","HTMLTrackElement","NORMAL","ListClass","TrackClass","capitalName","getterName","privateName","REMOTE","remoteText","remoteTextEl","ALL","createTrackHelper","names","hasStarted_","featuresProgressEvents","manualProgressOn","featuresTimeupdateEvents","manualTimeUpdatesOn","nativeCaptions","nativeTextTracks","featuresNativeTextTracks","emulateTextTracks","autoRemoteTextTracks_","initTrackListeners","nativeControlsForTouch","triggerSourceset","onDurationChange","manualProgress","trackProgress","manualProgressOff","stopTrackingProgress","progressInterval","numBufferedPercent","bufferedPercent_","duration_","manualTimeUpdates","trackCurrentTime","stopTrackingCurrentTime","manualTimeUpdatesOff","currentTimeInterval","manuallyTriggered","clearTracks","removeRemoteTextTrack","cleanupAutoTextTracks","error_","played","trackListChanges","addWebVttScript_","script","onload","remoteTracks","remoteTextTracks","handleAddTrack","handleRemoveTrack","updateDisplay","textTracksChanges","createRemoteTextTrack","_this7","manualCleanup","htmlTrackElement","remoteTextTrackEls","getVideoPlaybackQuality","setPoster","playsinline","setPlaysinline","canPlayType","canPlaySource","srcObj","registerTech","techs_","defaultTechOrder_","getTech","videojs","featuresVolumeControl","featuresMuteControl","featuresFullscreenResize","featuresPlaybackRate","featuresSourceset","withSourceHandlers","_Tech","registerSourceHandler","sourceHandlers","can","selectSourceHandler","canHandleSource","sh","deferrable","originalFn","sourceHandler_","setSource","nativeSourceHandler","disposeSourceHandler","currentSource_","handleSource","middlewares","middlewareInstances","TERMINATOR","use","middleware","setSourceHelper","setTech","mw","get$1","reduceRight","middlewareIterator","set$1","mediate","callMethod","middlewareValue","terminated","executeRight","allowedGetters","allowedSetters","allowedMediators","mws","clearCacheForPlayer","getOrCreateFactory","mwFactory","_mws$i","mwf","mwi","lastRun","mwrest","_src","MimetypesKind","opus","ogv","mp4","mov","m4v","mkv","mp3","aac","oga","m3u8","getMimetype","ext","mimetype","findMimetype","cache_","matchingSources","filterSource","newsrc","srcobj","fixSource","MediaLoader","techOrder","techName","isSupported","loadTech_","ClickableComponent","tabIndex_","createControlTextEl","controlTextEl_","controlText_","localizedText","nonIconControl","enabled_","handleClick","handleFocus","handleBlur","PosterImage","_ClickableComponent","fallbackImg_","poster","setSrc","backgroundImage","darkGray","lightGray","fontMap","monospace","sansSerif","serif","monospaceSansSerif","monospaceSerif","proportionalSansSerif","proportionalSerif","casual","smallcaps","constructColor","color","tryUpdateStyle","TextTrackDisplay","toggleDisplay","preselectTrack","modes","trackList","userPref","selectedLanguage","firstDesc","firstCaptions","preferredTrack","clearDisplay","processCues","descriptionsTrack","captionsSubtitlesTrack","updateForTrack","textTrackSettings","overrides","getValues","cueDiv","displayState","textOpacity","backgroundColor","backgroundOpacity","windowColor","windowOpacity","edgeStyle","textShadow","fontPercent","fontSize","bottom","fontFamily","fontVariant","LoadingSpinner","isAudio","playerType","dir","Button","BigPlayButton","_Button","mouseused_","handleMouseDown","cb","playToggle","playFocus","CloseButton","PlayToggle","handlePlay","handlePause","handleEnded","handleSeeked","defaultImplementation","guide","h","gm","gh","implementation","setFormatTime","customImplementation","resetFormatTime","formatTime","TimeDisplay","throttledUpdateContent","updateContent","plainName","labelText_","updateTextNode_","textNode_","formattedTime_","formatTime_","updateFormattedTime_","formattedTime","CurrentTimeDisplay","_TimeDisplay","scrubbing","getCache","DurationDisplay","TimeDivider","RemainingTimeDisplay","remainingTimeDisplay","remainingTime","LiveDisplay","updateShowing","Slider","bar","barName","vertical","playerEvent","handleMouseMove","handleMouseUp","progress","getPercent","percentage","toFixed","calculateDistance","stepBack","stepForward","bool","vertical_","LoadProgressBar","partEls_","percentify","percent","TimeTooltip","seekBarRect","seekBarPoint","tooltipRect","playerRect","seekBarPointPx","spaceLeftOfPoint","spaceRightOfPoint","pullTooltipBy","PlayProgressBar","rafId_","timeTooltip","MouseTimeDisplay","STEP_SECONDS","UPDATE_REFRESH_INTERVAL","SeekBar","_Slider","setEventHandlers_","updateInterval","update_","getCurrentTime_","videoWasPlaying","newTime","mouseTimeDisplay","handleAction","ProgressControl","throttledHandleMouseSeek","handleMouseSeek","seekBar","seekBarEl","FullscreenToggle","handleFullscreenChange","fullscreenEnabled","isFullscreen","exitFullscreen","requestFullscreen","checkVolumeSupport","VolumeLevel","VolumeBar","updateLastVolume_","updateARIAAttributes","checkMuted","volume","muted","ariaValue","volumeAsPercentage_","volumeBeforeDrag","lastVolume_","VolumeControl","volumeBar","throttledHandleMouseMove","orientationClass","checkMuteSupport","MuteToggle","vol","lastVolume","volumeToSet","updateIcon_","updateControlText_","soundOff","VolumePanel","inline","volumeControl","volumePanelState_","sliderActive_","sliderInactive_","muteToggle","Menu","menuButton_","menuButton","focusedChild_","addItem","unpressButton","contentElType","append","stepChild","haveTitle","MenuButton","buttonClass","handleSubmenuKeyPress","menu","createMenu","buttonPressed_","hideThreshold_","title","createItems","buildWrapperCSSClass","menuButtonClass","pressButton","TrackButton","_MenuButton","updateHandler","MenuItem","selectable","isSelected_","multiSelectable","_selected","TextTrackMenuItem","_MenuItem","changeHandler","handleTracksChange","selectedLanguageChangeHandler","handleSelectedLanguageChange","onchange","Event","createEvent","initEvent","kinds","shouldBeSelected","OffTextTrackMenuItem","_TextTrackMenuItem","allHidden","TextTrackButton","_TrackButton","TrackMenuItem","label_","kinds_","kind_","ChaptersTrackMenuItem","ChaptersButton","_TextTrackButton","track_","setTrack","findChaptersTrack","updateHandler_","remoteTextTrackEl","_remoteTextTrackEl","getMenuCaption","mi","DescriptionsButton","SubtitlesButton","CaptionSettingsMenuItem","CaptionsButton","SubsCapsMenuItem","SubsCapsButton","language_","AudioTrackMenuItem","audioTracks","AudioTrackButton","PlaybackRateMenuItem","playbackRate","PlaybackRateMenuButton","updateVisibility","updateLabel","labelEl_","rates","playbackRates","currentRate","newRate","playbackRateSupported","Spacer","CustomControlSpacer","_Spacer","ControlBar","ErrorDisplay","_ModalDialog","LOCAL_STORAGE_KEY","COLOR_BLACK","COLOR_BLUE","COLOR_CYAN","COLOR_GREEN","COLOR_MAGENTA","COLOR_RED","COLOR_WHITE","COLOR_YELLOW","OPACITY_OPAQUE","OPACITY_SEMI","OPACITY_TRANS","selectConfigs","parseOptionValue","getSelectedOptionValue","selectedIndex","setSelectedOption","TextTrackSettings","endDialog","setDefaults","persistTextTrackSettings","saveSettings","config","restoreSettings","createElSelect_","legendId","selectLabelledbyIds","optionId","createElFgColor_","createElBgColor_","createElWinColor_","createElColors_","createElFont_","createElControls_","defaultsDescription","setValues","values","localStorage","removeItem","ttDisplay","controlBar","subsCapsBtn","subsCapsButton","ccBtn","captionsButton","ResizeManager","RESIZE_OBSERVER_AVAILABLE","ResizeObserver","loadListener_","resizeObserver_","debouncedHandler_","resizeHandler","observe","contentWindow","unobserve","disconnect","resizeObserver","sourcesetLoad","srcUrls","innerHTMLDescriptorPolyfill","cloneNode","dummy","docFrag","createDocumentFragment","Element","getDescriptor","priority","getInnerHTMLDescriptor","HTMLMediaElement","firstSourceWatch","resetSourceWatch_","innerDescriptor","appendWrapper","appendFn","retval","srcDescriptorPolyfill","getSrcDescriptor","setupSourceset","resetSourceset_","srcDescriptor","oldSetAttribute","oldLoad","currentSrc","_templateObject$2","Html5","crossoriginTracks","initNetworkState_","handleLateInit_","enableSourceset","setupSourcesetHandling_","hasChildNodes","nodes","nodesLength","removeNodes","proxyNativeTracks_","restoreMetadataTracksInIOSNativePlayer_","setControls","proxyWebkitFullscreen_","disposeMediaElement","metadataTracksPreFullscreenState","takeMetadataTrackSnapshot","storedMode","restoreTrackMode","storedTrack","elTracks","techTracks","removeOldTracks","removeTracks","found","eventName","playerElIngest","movingMediaElementInDOM","clone","tagAttributes","techId","playerId","settingsAttrs","attr","networkState","loadstartFired","setLoadstartFired","triggerLoadstart","eventsToTrigger","checkProgress","endFn","beginFn","webkitPresentationMode","supportsFullScreen","webkitEnterFullScreen","enterFullScreen","HAVE_METADATA","exitFullScreen","webkitExitFullScreen","resetMediaElement","videoPlaybackQuality","webkitDroppedFrameCount","webkitDecodedFrameCount","droppedVideoFrames","totalVideoFrames","performance","creationTime","timing","navigationStart","TEST_VID","canControlVolume","canMuteVolume","canControlPlaybackRate","canOverrideAttributes","supportsNativeTextTracks","supportsNativeVideoTracks","videoTracks","supportsNativeAudioTracks","featuresNativeVideoTracks","featuresNativeAudioTracks","mpegurlRE","mp4RE","patchCanPlayType","unpatchCanPlayType","r","_templateObject$1","TECH_EVENTS_RETRIGGER","TECH_EVENTS_QUEUE","canplay","canplaythrough","playing","seeked","getTagSettings","closest","isPosterFromTech_","queuedCallbacks_","userActive_","languagesToLower","name$$1","languages_","poster_","controls_","scrubbing_","lastPlaybackRate","defaultPlaybackRate","playerOptionsCopy","plugins","middleware_","flexNotSupported_","majorVersion","userActive","listenForUserActivity_","handleFullscreenChange_","handleStageClick_","changingSrc_","playWaitingForReady_","playOnLoadstart_","styleEl_","playerElIngest_","divEmbed","VIDEOJS_NO_DYNAMIC_STYLE","defaultsStyleEl","head","fluid","aspectRatio","links","linkEl","_dimension","privDimension","updateStyleEl_","parsedVal","fluid_","ratio","aspectRatio_","idClass","videoWidth","videoHeight","ratioParts","ratioMultiplier","width_","height_","_height","techEl","unloadTech_","titleTechName","camelTechName","techName_","techOptions","loop","techCanOverridePoster","TechClass","handleTechReady_","textTracksJson_","eventObj","handleTechLoadStart_","handleTechSourceset_","handleTechWaiting_","handleTechEnded_","handleTechSeeking_","handleTechPlay_","handleTechFirstPlay_","handleTechPause_","handleTechDurationChange_","handleTechFullscreenChange_","handleTechError_","handleTechPosterChange_","handleTechTextData_","handleTechRateChange_","usingNativeControls","techGet_","addTechControlsListeners_","safety","removeTechControlsListeners_","handleTechClick_","handleTechTouchStart_","handleTechTouchMove_","handleTechTouchEnd_","handleTechTap_","techCall_","hasStarted","manualAutoplay_","previouslyMuted","promise","updateSourceCaches_","sourceElSources","sourceEls","matchingSourceEls","sourceObj","updateCache","queued","handleTechCanPlay_","handleTechCanPlayThrough_","handleTechPlaying_","handleTechSeeked_","starttime","userWasActive","PromiseClass","Promise","play_","_this8","isScrubbing","percentAsDecimal","_muted","defaultMuted","_defaultMuted","isFS","isFullscreen_","fsApi","fullscreenchange","documentFullscreenChange","fullscreenElement","enterFullWindow","exitFullWindow","isFullWindow","docOrigOverflow","overflow","fullWindowOnEscKey","selectSource","_this9","techs","_ref","findFirstPassingTechSourcePair","outerArray","innerArray","tester","outerChoice","innerChoice","foundSourceAndTech","flip","finder","_ref2","sourceOrder","_this10","middlewareSource","src_","notSupportedMessage","_this11","sourceTech","currentSources","currentSource","currentType","techAutoplay","newPoster","usingNativeControls_","errorDisplay","userActivity_","mouseInProgress","lastMoveX","lastMoveY","handleActivity","screenX","screenY","inactivityTimeout","isAudio_","_ref3","_ref3$track","toJSON","createModal","_this12","modal","baseOptions","tagOptions","dataSetup","_safeParseTuple","childName","html5","flash","userLanguage","BASE_PLUGIN_NAME","PLUGIN_CACHE_KEY","pluginStorage","pluginExists","getPlugin","markPluginAsActive","triggerSetupEvent","before","createBasicPlugin","basicPluginWrapper","createPluginFactory","PluginSubClass","getEventHash","Plugin","VERSION","isBasic","registerPlugin","deregisterPlugin","getPlugins","getPluginVersion","usingPlugin","hasPlugin","super_","extendFn","subClassMethods","HTMLVideoElement","normalizeId","getPlayer","hooks","hookFunction","PlayerComponent","hooks_","hook","hookOnce","removeHook","getPlayers","nId","_tag","_player","getAllPlayers","comp","writeable","addLanguage","_mergeOptions","dom","root","URL_REGEX","FIRST_SEGMENT_REGEX","SLASH_DOT_REGEX","SLASH_DOT_DOT_REGEX","URLToolkit","alwaysNormalize","basePartsForNormalise","parseURL","normalizePath","buildURLFromParts","relativeParts","scheme","baseParts","netLoc","builtParts","params","fragment","baseURLPath","newPath","lastIndexOf","parts","dinf","esds","ftyp","mdat","mfhd","minf","moof","moov","mvex","mvhd","trak","tkhd","mdia","mdhd","hdlr","sdtp","stbl","stsd","traf","trex","trun","MAJOR_BRAND","MINOR_VERSION","AVC1_BRAND","VIDEO_HDLR","AUDIO_HDLR","HDLR_TYPES","VMHD","SMHD","DREF","STCO","STSC","STSZ","STTS","UINT32_MAX","avc1","avcC","btrt","dref","mp4a","smhd","stco","stsc","stsz","stts","styp","tfdt","tfhd","vmhd","charCodeAt","view","setUint32","sequenceNumber","trackFragments","boxes","flags","samples","dependsOn","isDependedOn","videoSample","audioSample","sps","pps","sequenceParameterSets","pictureParameterSets","profileIdc","profileCompatibility","levelIdc","trackFragmentHeader","trackFragmentDecodeTime","trackFragmentRun","sampleDependencyTable","dataOffset","upperWordBaseMediaDecodeTime","lowerWordBaseMediaDecodeTime","baseMediaDecodeTime","audioTrun","videoTrun","trunHeader","durationPresent","sizePresent","flagsPresent","compositionTimeOffset","sample","isLeading","hasRedundancy","paddingValue","isNonSyncSample","degradationPriority","fileType","movie","AacStream","everything","timeStamp","setTimestamp","parseId3TagSize","header","byteIndex","returnSize","footerPresent","parseAdtsSize","lowThree","middle","highTwo","bytesLeft","tempLength","frameSize","_objCreate","F","ParsingError","errorData","parseTimeStamp","input","computeSeconds","f","Settings","parseOptions","keyValueDelim","groupDelim","kv","parseCue","regionList","oInput","consumeTimeStamp","ts","Errors","BadTimeStamp","consumeCueSettings","region","alt","vals","vals0","integer","line","lineAlign","snapToLines","align","positionAlign","skipWhitespace","substr","BadSignature","dflt","defaultKey","ESCAPE","TAG_NAME","u","ruby","rt","lang","TAG_ANNOTATION","NEEDS_PARENT","parseContent","nextToken","consume","unescape1","unescape","shouldAdd","current","localName","annotation","rootDiv","tagStack","createProcessingInstruction","strongRTLRanges","isStrongRTLChar","determineBidi","nodeStack","pushNodes","nextTextNode","computeLinePos","textTrackList","mediaElement","StyleBox","CueStyleBox","styleOptions","isIE8","styles","display","writingMode","unicodeBidi","applyStyles","textAlign","font","whiteSpace","direction","stylesunicodeBidi","textPos","formatStyle","move","BoxPosition","lh","offsetTop","rects","getClientRects","lineHeight","moveBoxToLinePosition","styleBox","containerBox","boxPositions","findBestPosition","axis","bestPosition","specifiedPosition","overlapsOppositeAxis","within","overlapsAny","intersectPercentage","boxPosition","linePos","maxPosition","initialAxis","ceil","calculatedPercentage","toCSSCompatValues","unit","toMove","overlaps","b2","intersectArea","reference","getSimpleBoxPosition","decode","decodeURIComponent","encodeURIComponent","convertCueToDOMTree","cuetext","FONT_SIZE_PERCENT","FONT_STYLE","CUE_BACKGROUND_PADDING","overlay","paddedOverlay","shouldCompute","hasBeenReset","margin","decoder","TextDecoder","reportOrThrowError","collectNextLine","pos","parseRegion","xy","anchor","lines","regionAnchorX","regionAnchorY","viewportAnchorX","viewportAnchorY","onregion","parseTimestampMap","ontimestampmap","parseHeader","alreadyCollectedLine","hasSubstring","TransportPacketStream","TransportParseStream","ElementaryStream","StreamTypes","TimestampRolloverStream","m2tsStreamTypes","MP2T_PACKET_LENGTH","SYNC_BYTE","bytesInBuffer","startIndex","endIndex","parsePsi","parsePat","parsePmt","packetsWaitingForPmt","programMapTable","psi","payloadUnitStartIndicator","pat","section_number","last_section_number","pmtPid","pmt","sectionLength","tableEnd","programInfoLength","streamType","pid","H264_STREAM_TYPE","ADTS_STREAM_TYPE","METADATA_STREAM_TYPE","processPes_","STREAM_TYPES","h264","adts","timedMetadata","parsePes","pes","ptsDtsFlags","packetLength","dataAlignmentIndicator","flushStream","forceFlush","packetData","packetFlushable","trackId","timelineStartInfo","codec","m2ts","PAT_PID","MetadataStream","_x5","_videojsContribMediaSourcesEs5RemoveCuesFromTrackJs","_videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2","VTT_LINE_TERMINATORS","uintToString","uintArray","VTTSegmentLoader","_SegmentLoader","subtitlesTrack_","storedMap","initSegments_","combinedByteLength","combinedSegment","playlist_","monitorBuffer_","_track","couldBeginLoading_","init_","syncPoint_","currentTimeline_","currentTime_","checkBuffer_","buffered_","skipEmptySegments_","timestampOffsetForTimeline","checkTimestampOffset","loadSegment_","generateSegmentInfo_","isSyncRequest","pendingSegment_","handleSegment_","requested","parseVTTCues_","updateTimeMapping_","handleUpdateEnd_","decodeBytesToString","timestampmap","MPEGTS","LOCAL","mapData","firstStart","lastStart","handleRollover","probe","PES_TIMESCALE","isLikelyAacData","parsePsi_","parseType","table","parseAudioPes_","pesType","pusi","parsed","endLoop","parsePesType","parsePayloadUnitStartIndicator","parsePesTime","parseVideoPes_","currentFrame","firstKeyFrame","videoPacketContainsKeyFrame","adjustTimestamp_","baseTimestamp","audioBaseTimestamp","ptsTime","videoBaseTimestamp","inspectAac_","audioCount","parseAacTimestamp","parseSampleRate","audioTimescale","inspectTs_","isAacData","PADDING","plaintext","padding","SourceUpdater","createSourceBuffer","sourceBuffer_","addSourceBuffer","onUpdateendCallback_","pendingCallback","pendingCallback_","runCallback_","callbacks_","processedAppend_","queueCallback_","appendBuffer","autoKeyword","directionSetting","alignSetting","findDirectionSetting","findAlignSetting","cobj","baseObj","_id","_pauseOnExit","_startTime","_endTime","_text","_region","_vertical","_snapToLines","_line","_lineAlign","_position","_positionAlign","_size","_align","getCueAsHTML","REQUEST_ERRORS","FAILURE","TIMEOUT","ABORTED","byterangeStr","byterangeStart","byterangeEnd","segmentXhrHeaders","Range","abortAll","activeXhrs","getRequestStats","bytesReceived","roundTripTime","getProgressStats","progressEvent","requestTime","stats","loaded","handleErrors","timedout","aborted","handleKeyResponse","finishProcessingFn","errorObj","handleInitSegmentResponse","handleSegmentResponse","encryptedBytes","decryptSegment","doneFn","decryptionHandler","requestId","getMostImportantError","prev","waitForCompletion","endOfAllRequests","worstError","handleProgress","progressFn","firstBytesReceivedAt","mediaSegmentRequest","xhrOptions","decryptionWorker","keyRequestOptions","responseType","keyRequestCallback","keyXhr","initSegmentOptions","initSegmentRequestCallback","initSegmentXhr","segmentRequestOptions","segmentRequestCallback","segmentXhr","flushSource","percentEncode","parseUtf8","parseIso88591","parseSyncSafeInteger","tagParsers","TXXX","WXXX","PRIV","owner","tagSize","bufferSize","dispatchType","frameStart","frameHeader","defaultOptions","errorInterval","getSource","IWillNotUseThisInPlugins","initPlugin","lastCalled","localOptions","loadedMetadataHandler","errorHandler","cleanupEvents","reinitPlugin","newOptions","reloadSourceOnError","_muxJsLibMp4","_muxJsLibMp42","initArray","typedArray","captionStream","gopInfo","setBaseMediaDecodeTime","setAudioAppendStart","appendStart","alignGopsWith","gopsToAlignWith","TransmuxerWorker","MAX_TS","RO_THRESH","lastDTS","referenceDTS","type_","nextNewline","findBox","subresults","traks","trafs","baseTimes","baseTime","CoalesceStream","numberOfTracks","metadataStream","videoTrack","audioTrack","pendingCaptions","pendingMetadata","pendingTracks","processedTracks","output","id3","timelineStartPts","captionStreams","createTextTracksIfNecessary","H264Stream","NalByteStream","PROFILES_WITH_OPTIONAL_SPS_DATA","swapBuffer","100","110","122","244","44","83","86","118","128","138","139","134","currentPts","currentDts","discardEmulationPreventionBytes","readSequenceParameterSet","skipScalingList","nalByteStream","expGolombDecoder","deltaScale","lastScale","nextScale","newLength","newData","emulationPreventionBytesPositions","sourceIndex","chromaFormatIdc","picOrderCntType","numRefFramesInPicOrderCntCycle","picWidthInMbsMinus1","picHeightInMapUnitsMinus1","frameMbsOnlyFlag","scalingListCount","sarRatio","aspectRatioIdc","frameCropLeftOffset","frameCropRightOffset","frameCropTopOffset","frameCropBottomOffset","sarScale","clamp","filterRanges","timeRanges","findSoleUncommonTimeRangesEnd","edges","overlapsCurrentEnd","span","bufferIntersection","bufferA","bufferB","arity","extents","calculateBufferedPercent","adjustedRange","referenceRange","referenceDuration","adjustedDuration","bufferMissingFromAdjusted","adjustedIntersection","referenceIntersection","adjustedOverlap","referenceOverlap","getSegmentBufferedPercent","endOfSegment","originalSegmentRange","adjustedSegmentRange","strArr","padded","TagList","attributeSeparator","keyvalue","parseAttributes","BYTERANGE","_attributes$BYTERANGE","_attributes$BYTERANGE2","resolution","FlvTag","metadataLength","headBytes","setUint8","METADATA_TAG","writeMetaDataDouble","finalize","_transmuxerWorker","_transmuxerWorker2","resolveTransmuxWorker","makeWrappedSourceBuffer","realBuffer_","gopsSafeToAlignWith","currentTimePts","updateGopBuffer","gops","removeGopBuffer","updatedBuffer","VirtualSourceBuffer","pendingBuffers_","bufferUpdating_","codecs_","audioCodec_","videoCodec_","audioDisabled_","appendAudioInitSegment_","gopBuffer_","timeMapping_","safeAppend_","remux","alignGopsAtEnd","isAudioCodec","isVideoCodec","data_","done_","appendGopInfo_","videoBuffer_","audioBuffer_","appendWindowStart","videoBuffered","audioBuffered","processPendingSegments_","codecProperty","nativeMediaSource_","shouldTrigger","sortedSegments","segmentObj","createRealSourceBuffers_","triggerUpdateend","concatAndAppendSegments_","destinationBuffer","tempBuffer","originalError","xhrFactory","XhrFunction","beforeRequest","reqResponse","responseTime","statusCode","originalAbort","precompute","tables","encTable","decTable","sbox","sboxInv","xInv","th","x2","x4","x8","tEnc","tDec","aesTables","AES","_tables","tmp","encKey","decKey","keyLen","rcon","encrypted0","encrypted1","encrypted2","encrypted3","out","a2","c2","nInnerRounds","kIndex","table0","table1","table2","table3","_virtualSourceBuffer","_virtualSourceBuffer2","HtmlMediaSource","activeSourceBuffers_","updateActiveSourceBuffers_","disableCombined","disableAudioOnly","onPlayerMediachange_","onHlsSegmentTimeMapping_","url_","sourcebuffer","parameters","removeCuesFromTrack","audioTrackKind_","stopLoaders","segmentLoader","startLoaders","onGroupChanged","_settings$segmentLoaders","mainSegmentLoader","activeTrack","activeGroup","previousActiveLoader","resyncLoader","onTrackChanged","_settings$segmentLoaders2","onError","defaultTrack","setupListeners","initialize","_settings$mediaTypes$type","variantLabel","_settings$mediaTypes$type2","_settings$mediaTypes$type3","variants","onAudioTrackChanged","_x6","_sourceUpdater","_sourceUpdater2","_mediaSegmentRequest","_playlistSelectors","CHECK_BUFFER_DELAY","detectEndOfStream","appendedLastSegment","finite","illegalMediaSwitch","startingMedia","newSegmentMedia","safeBackBufferTrimTime","removeToTime","SegmentLoader","throughput","roundTrip","resetStats_","seeking_","loaderType_","startingMedia_","goalBufferLength_","checkBufferTimeout_","mimeType_","sourceUpdater_","xhrOptions_","activeInitSegmentId_","fetchAtBuffer_","mediaBytesTransferred","mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","abort_","abortRequests","_error","setDateTimeMapping","saveExpiredSegmentInfo","_mimeType","monitorBufferTick_","fillBuffer_","lastBufferedEnd","bufferedTime","getSyncSegmentCandidate_","mediaSourceInfo","getMediaInfoForTime","segmentIndexArray","measuredBandwidth","requestTimeRemaining","switchCandidate","timeSavedBySwitching","minimumTimeSaving","simpleSegment","abortRequestEarly_","trimBackBuffer_","createSimplifiedSegmentObj_","handleProgress_","segmentRequestFinished_","processSegmentResponse_","probeSegmentInfo","illegalMediaSwitchError","timelineMapping","mappingForTimeline","initId","isWalkingForward","recordThroughput_","addSegmentMetadataCue_","segmentProcessingTime","segmentProcessingThroughput","_aes","_aes2","_asyncStream","_asyncStream2","_pkcs7","ntoh","word","decrypt","initVector","encrypted32","Int32Array","decipher","decrypted32","init0","init1","init2","init3","wordIx","STEP","asyncStream_","decryptChunk_","unpad","createDefaultSample","collectDtsInfo","clearDtsInfo","calculateTrackBaseMediaDecodeTime","arrayEquals","sumFrameByteLengths","clock","AUDIO_PROPERTIES","VIDEO_PROPERTIES","currentObj","sum","adtsFrames","earliestAllowedDts","audioAppendStartTs","videoBaseMediaDecodeTime","setEarliestDts","earliestDts","setVideoBaseMediaDecodeTime","trimAdtsFramesByEarliestDts_","prefixWithSilence_","generateSampleTable_","concatenateFrameData_","baseMediaDecodeTimeTs","silentFrame","frameDuration","audioGapDuration","audioFillFrameCount","audioFillDuration","minSegmentDts","minSegmentPts","nalUnits","minPTS","gopCache_","nalUnit","gopForFusion","resetStream_","groupNalsIntoFrames_","groupFramesIntoGops_","getGopForFusion_","nalCount","extendFirstKeyFrame_","alignedGops","alignGopsAtEnd_","alignGopsAtStart_","gop","concatenateNalData_","dtsDistance","nearestGopObj","currentGop","currentGopObj","halfSecond","allowableOverlap","nearestDistance","currentNal","baseDataOffset","nalsByteLength","numberOfNals","totalByteLength","alignIndex","gopIndex","alignEndIndex","matchFound","trimIndex","total","newGopsToAlignWith","maxSegmentPts","maxSegmentDts","timeSinceStartOfTimeline","remuxTracks","pendingBoxes","pendingBytes","emittedTracks","hasFlushed","transmuxPipeline_","setupAacPipeline","pipeline","aacStream","audioTimestampRolloverStream","timedMetadataTimestampRolloverStream","adtsStream","coalesceStream","headOfPipeline","audioSegmentStream","setupTsPipeline","packetStream","elementaryStream","videoTimestampRolloverStream","h264Stream","videoSegmentStream","isAac","enableFunction","loader","playlistUri","changePlaylistFn","incompatible","currentlyEnabled","Representation","hlsHandler","fastChangeFunction","masterPlaylistController_","fastQualityChange_","renditionSelectionMixin","representations","collectTimelineInfo","extraDataTag","VIDEO_TAG","writeByte","writeShort","writeBytes","oldExtraData","videoKeyFrames","extraData","adtsFrame","lastMetaPts","writeMetaDataTags","AUDIO_TAG","writeMetaDataBoolean","setUint16","onVideoKeyFrame","h264Frame","finishFrame","newMetadata","metaTag","extraTag","endNalUnit","startNalUnit","backwardDuration","endSequence","precise","forwardDuration","intervalDuration","backward","forward","durations","safeLiveIndex","distanceFromEnd","safeDistance","useSafeLiveEnd","isWholeNumber","roundSignificantDigit","increment","numDecimalDigits","ceilLeastSignificantDigit","floorLeastSignificantDigit","numSegments","isBlacklisted","blacklisted","currentBandwidth","pad","parsePid","parseAdaptionField","payloadOffset","parseNalUnitType","nalType","frameBuffer","frameI","frameSyncPoint","foundKeyFrame","_xhr","_xhr2","_binUtils2","_videojsContribMediaSources","_masterPlaylistController","_renditionMixin","_renditionMixin2","_playbackWatcher","_playbackWatcher2","_reloadSourceOnError","_reloadSourceOnError2","_playlistSelectorsJs","AsyncStream","STANDARD_PLAYLIST_SELECTOR","INITIAL_PLAYLIST_SELECTOR","INITIAL_BANDWIDTH","handleHlsMediaChange","qualityLevels","selectedIndex_","handleHlsLoadedMetadata","addQualityLevel","supportsNativeHls","canPlay","canItPlay","HlsHandler","source_","ignoreNextSeekingEvent_","setOptions_","overrideNative","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","pauseLoading","option","playbackWatcher_","invBandwidth","invThroughput","systemBitrate","mediaRequests_","mediaRequestsAborted_","mediaRequestsTimedout_","mediaRequestsErrored_","mediaTransferDuration_","mediaBytesTransferred_","mediaSecondsLoaded_","setupQualityLevels_","qualityLevels_","HlsSourceHandler","flashTech","supportsNativeMediaSources","_flashMediaSource","_flashMediaSource2","_htmlMediaSource","_htmlMediaSource2","urlCount","defaults","mediaSources","msObjectURL","objectUrlPrefix","adHoc","bufferStartSize","prepareWrite","flv","minLength","widthBytes","heightBytes","videocodecidBytes","byte","short","negIndex","nalUnitSize","nalContainer","nalStart","nalLength","setFloat64","dtsDelta","len","frameTime","isAudioFrame","isVideoFrame","isMetaData","isKeyFrame","isFunction","parseHeaders","xtend","forEachArray","isEmpty","initParams","createXHR","_createXHR","called","readystatechange","loadFunc","getBody","getXml","isJson","errorFunc","evt","timeoutTimer","failureResponse","useXDR","rawRequest","getAllResponseHeaders","XDomainRequest","XMLHttpRequest","onprogress","onabort","ontimeout","username","password","setRequestHeader","beforeSend","send","responseXML","firefoxBugTakenEffect","_decrypter","jobs","timeout_","processJob_","job","cueShim","regionShim","nativeVTTCue","nativeVTTRegion","shim","restore","parameter","pair","_name","orig","profile","avcLevel","profileHex","avcLevelHex"],"mappings":"4FAAAA,EAAOC,QAAU,CACfC,UAAW,EAAQ,QACnBC,WAAY,EAAQ,QAAgBA,WACpCC,mBAAoB,EAAQ,QAAgBA,mBAC5CC,mBAAoB,EAAQ,QAAgBA,qB,oCCE9C,SAASC,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIC,EAAU,EAAQ,QAElBC,EAAWP,EAAuBM,GAElCE,EAAY,EAAQ,QAEpBC,EAAaT,EAAuBQ,GAEpCE,EAAgB,EAAQ,QAcxBC,EAAuB,SAA8BC,EAAIC,GAC3D,IAAIC,OAASC,EAEb,OAAKH,GAILE,EAASE,OAAOC,iBAAiBL,GAC5BE,EAIEA,EAAOD,GAHL,IALA,IAkBPK,EAAa,SAAoBC,EAAOC,GAC1C,IAAIC,EAAWF,EAAMG,QAErBH,EAAMI,MAAK,SAAUC,EAAMC,GACzB,IAAIC,EAAMN,EAAOI,EAAMC,GAEvB,OAAY,IAARC,EACKL,EAASM,QAAQH,GAAQH,EAASM,QAAQF,GAE5CC,MAcPE,EAA2B,SAAkCJ,EAAMC,GACrE,IAAII,OAAgBd,EAChBe,OAAiBf,EAWrB,OATIS,EAAKO,WAAWC,YAClBH,EAAgBL,EAAKO,WAAWC,WAElCH,EAAgBA,GAAiBb,OAAOiB,OAAOC,UAC3CT,EAAMM,WAAWC,YACnBF,EAAiBL,EAAMM,WAAWC,WAEpCF,EAAiBA,GAAkBd,OAAOiB,OAAOC,UAE1CL,EAAgBC,GAGzBnC,EAAQiC,yBAA2BA,EAUnC,IAAIO,EAA4B,SAAmCX,EAAMC,GACvE,IAAIW,OAAYrB,EACZsB,OAAatB,EAgBjB,OAdIS,EAAKO,WAAWO,YAAcd,EAAKO,WAAWO,WAAWC,QAC3DH,EAAYZ,EAAKO,WAAWO,WAAWC,OAGzCH,EAAYA,GAAapB,OAAOiB,OAAOC,UAEnCT,EAAMM,WAAWO,YAAcb,EAAMM,WAAWO,WAAWC,QAC7DF,EAAaZ,EAAMM,WAAWO,WAAWC,OAG3CF,EAAaA,GAAcrB,OAAOiB,OAAOC,UAIrCE,IAAcC,GAAcb,EAAKO,WAAWC,WAAaP,EAAMM,WAAWC,UACrER,EAAKO,WAAWC,UAAYP,EAAMM,WAAWC,UAE/CI,EAAYC,GAGrB1C,EAAQwC,0BAA4BA,EAgBpC,IAAIK,EAAiB,SAAwBC,EAAQC,EAAiBC,EAAaC,GAEjF,IAAIC,EAAqBJ,EAAOK,UAAUC,KAAI,SAAUC,GACtD,IAAIT,OAAQxB,EACRkC,OAASlC,EACTmC,OAAYnC,EAQhB,OANAwB,EAAQS,EAASjB,WAAWO,YAAcU,EAASjB,WAAWO,WAAWC,MACzEU,EAASD,EAASjB,WAAWO,YAAcU,EAASjB,WAAWO,WAAWW,OAC1EC,EAAYF,EAASjB,WAAWC,UAEhCkB,EAAYA,GAAalC,OAAOiB,OAAOC,UAEhC,CACLgB,UAAWA,EACXX,MAAOA,EACPU,OAAQA,EACRD,SAAUA,MAId9B,EAAW2B,GAAoB,SAAUrB,EAAMC,GAC7C,OAAOD,EAAK0B,UAAYzB,EAAMyB,aAKhCL,EAAqBA,EAAmBM,QAAO,SAAUC,GACvD,OAAQ3C,EAAW,WAAW4C,eAAeD,EAAIJ,aAKnD,IAAIM,EAAsBT,EAAmBM,QAAO,SAAUC,GAC5D,OAAO3C,EAAW,WAAW8C,UAAUH,EAAIJ,aAGxCM,EAAoBE,SAIvBF,EAAsBT,EAAmBM,QAAO,SAAUC,GACxD,OAAQ3C,EAAW,WAAWgD,WAAWL,EAAIJ,cAMjD,IAAIU,EAAwBJ,EAAoBH,QAAO,SAAUC,GAC/D,OAAOA,EAAIF,UAAY3C,EAAS,WAAWoD,mBAAqBjB,KAG9DkB,EAA+BF,EAAsBA,EAAsBF,OAAS,GAIpFK,EAAmBH,EAAsBP,QAAO,SAAUC,GAC5D,OAAOA,EAAIF,YAAcU,EAA6BV,aACrD,GAGCY,EAAiBJ,EAAsBP,QAAO,SAAUC,GAC1D,OAAOA,EAAIb,OAASa,EAAIH,UAI1B/B,EAAW4C,GAAgB,SAAUtC,EAAMC,GACzC,OAAOD,EAAKe,MAAQd,EAAMc,SAI5B,IAAIwB,EAAwBD,EAAeX,QAAO,SAAUC,GAC1D,OAAOA,EAAIb,QAAUI,GAAeS,EAAIH,SAAWL,KAGrDgB,EAA+BG,EAAsBA,EAAsBP,OAAS,GAEpF,IAAIQ,EAAoBD,EAAsBZ,QAAO,SAAUC,GAC7D,OAAOA,EAAIF,YAAcU,EAA6BV,aACrD,GAECe,OAAwBlD,EACxBmD,OAA4BnD,EAC5BoD,OAAuBpD,EAItBiD,IACHC,EAAwBH,EAAeX,QAAO,SAAUC,GACtD,OAAOA,EAAIb,MAAQI,GAAeS,EAAIH,OAASL,KAIjDsB,EAA4BD,EAAsBd,QAAO,SAAUC,GACjE,OAAOA,EAAIb,QAAU0B,EAAsB,GAAG1B,OAASa,EAAIH,SAAWgB,EAAsB,GAAGhB,UAKjGW,EAA+BM,EAA0BA,EAA0BV,OAAS,GAC5FW,EAAuBD,EAA0Bf,QAAO,SAAUC,GAChE,OAAOA,EAAIF,YAAcU,EAA6BV,aACrD,IAIL,IAAIkB,EAAYD,GAAwBH,GAAqBH,GAAoBP,EAAoB,IAAMT,EAAmB,GAE9H,OAAOuB,EAAYA,EAAUpB,SAAW,MAG1CrD,EAAQ6C,eAAiBA,EAazB,IAAI6B,EAAwB,WAC1B,OAAO7B,EAAe8B,KAAKxB,UAAUL,OAAQ6B,KAAKC,gBAAiBC,SAAS7D,EAAqB2D,KAAKG,MAAM7D,KAAM,SAAU,IAAK4D,SAAS7D,EAAqB2D,KAAKG,MAAM7D,KAAM,UAAW,MAG7LjB,EAAQ0E,sBAAwBA,EAehC,IAAIK,EAAiC,SAAwCC,GAC3E,IAAIC,GAAW,EAEf,GAAID,EAAQ,GAAKA,EAAQ,EACvB,MAAM,IAAIE,MAAM,2DAGlB,OAAO,WAML,OALID,EAAU,IACZA,EAAUN,KAAKC,iBAGjBK,EAAUD,EAAQL,KAAKC,iBAAmB,EAAII,GAASC,EAChDpC,EAAe8B,KAAKxB,UAAUL,OAAQmC,EAASJ,SAAS7D,EAAqB2D,KAAKG,MAAM7D,KAAM,SAAU,IAAK4D,SAAS7D,EAAqB2D,KAAKG,MAAM7D,KAAM,UAAW,OAIlLjB,EAAQ+E,+BAAiCA,EA6BzC,IAAII,EAAkC,SAAyCC,GAC7E,IAAItC,EAASsC,EAAStC,OAClBuC,EAAcD,EAASC,YACvB9B,EAAY6B,EAAS7B,UACrB+B,EAAWF,EAASE,SACpBC,EAAkBH,EAASG,gBAC3BC,EAAoBJ,EAASI,kBAC7BC,EAAkBL,EAASK,gBAC3BC,EAAiBN,EAASM,eAI1BC,EAAsB7C,EAAOK,UAAUK,QAAO,SAAUH,GAC1D,OAAQvC,EAAW,WAAW4C,eAAeL,MAK3CuC,EAAmBD,EAAoBnC,OAAO1C,EAAW,WAAW8C,WAEnEgC,EAAiB/B,SAIpB+B,EAAmBD,EAAoBnC,QAAO,SAAUH,GACtD,OAAQvC,EAAW,WAAWgD,WAAWT,OAI7C,IAAIwC,EAAqBD,EAAiBpC,OAAO1C,EAAW,WAAWgF,aAAaC,KAAK,KAAM,cAE3FC,EAAuBH,EAAmBzC,KAAI,SAAUC,GAC1D,IAAI4C,EAAYP,EAAeQ,aAAa7C,EAAUiC,EAAUG,EAAiBJ,GAG7Ec,EAAcF,EAAY,EAAI,EAC9BG,EAAsBtF,EAAW,WAAWuF,2BAA2Bd,EAAiBhC,EAAWF,GACnGiD,EAAoBF,EAAsBD,EAAcX,EAE5D,MAAO,CACLnC,SAAUA,EACViD,kBAAmBA,MAInBC,EAAyBP,EAAqBxC,QAAO,SAAUgD,GACjE,OAAOA,EAASF,mBAAqB,KAQvC,OAJA/E,EAAWgF,GAAwB,SAAUE,EAAGC,GAC9C,OAAOzE,EAAyByE,EAAErD,SAAUoD,EAAEpD,aAG5CkD,EAAuB1C,OAClB0C,EAAuB,IAGhChF,EAAWyE,GAAsB,SAAUS,EAAGC,GAC5C,OAAOD,EAAEH,kBAAoBI,EAAEJ,qBAG1BN,EAAqB,IAAM,OAGpChG,EAAQmF,gCAAkCA,EAY1C,IAAIwB,EAAyC,WAG3C,IAAIxD,EAAYwB,KAAKxB,UAAUL,OAAOK,UAAUK,OAAO1C,EAAW,WAAW8C,WAG7ErC,EAAW4B,GAAW,SAAUsD,EAAGC,GACjC,OAAOzE,EAAyBwE,EAAGC,MAQrC,IAAIE,EAAqBzD,EAAUK,QAAO,SAAUH,GAClD,OAAO,EAAItC,EAAc8F,aAAaxD,EAASjB,WAAW0E,QAAQC,cAGpE,OAAOH,EAAmB,IAAM,MAElC5G,EAAQ2G,uCAAyCA,G,qBC5ajD5G,EAAOC,QAAU,0iG,oCCEjBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIsG,EAAWxG,OAAOyG,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUvD,OAAQsD,IAAK,CAAE,IAAIE,EAASD,UAAUD,GAAI,IAAK,IAAIG,KAAOD,EAAc7G,OAAO+G,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQJ,EAAOI,GAAOD,EAAOC,IAAY,OAAOJ,GAEnPQ,EAAe,WAAc,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA7gB,GAEfG,EAAU,EAAQ,QAElBC,EAAWhI,EAAuB+H,GAElCE,EAAc,EAAQ,QAEtBC,EAAelI,EAAuBiI,GAEtCE,EAAe,EAAQ,QAEvBC,EAAgBpI,EAAuBmI,GAE3C,SAASnI,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASC,EAA2BC,EAAMrB,GAAQ,IAAKqB,EAAQ,MAAM,IAAIC,eAAe,6DAAgE,OAAOtB,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BqB,EAAPrB,EAElO,SAASuB,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GA0Bje,IAAIK,EAAS,SAAUC,GAGrB,SAASD,IACPb,EAAgB/D,KAAM4E,GAEtB,IAAIE,EAAQZ,EAA2BlE,MAAO4E,EAAOD,WAAa9I,OAAOkJ,eAAeH,IAAS9B,KAAK9C,OAEtG8E,EAAME,WAAa,IAAIpB,EAAa,WACpCkB,EAAMG,YAAc,IAAInB,EAAc,WACtCgB,EAAME,WAAWE,KAAKJ,EAAMG,aAE5B,IAAId,EAAOW,EAEPK,EAAO,GACPC,EAAa,GAEbC,OAAa,EAEbC,OAAO,EACPC,EAAO,aACPC,EAAqB,CACvB,MAAS,GACT,MAAS,GACT,kBAAmB,GACnB,UAAa,IAGX1E,EAAkB,EAkRtB,OA/QAgE,EAAMW,SAAW,CACfC,YAAY,EACZC,oBAAqB,GACrBC,SAAU,IAIZd,EAAMG,YAAYY,GAAG,QAAQ,SAAUC,GACrC,IAAIC,OAAa,EACbC,OAAY,GAEhB,CACEC,IAAK,YAEF,CACC,cAAe,WACbjG,KAAKyF,SAASC,WAAaI,EAAMI,QAC3B,YAAaJ,IACjB9F,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,iCAEXpG,KAAKyF,SAASC,YAAa,IAG/BW,UAAW,WACT,IAAIA,EAAY,GAEZ,WAAYP,IACdV,EAAWiB,UAAYA,EACvBA,EAAUnH,OAAS4G,EAAM5G,OAEnB,WAAY4G,IAChB9F,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,8BAEXN,EAAMQ,OAAS,IAGf,WAAYR,IACdV,EAAWiB,UAAYA,EACvBA,EAAUC,OAASR,EAAMQ,SAG7BC,QAAS,WACPvG,KAAKyF,SAASe,SAAU,GAE1BC,IAAK,WACG,kBAAmBzG,KAAKyF,WAC5BzF,KAAKyF,SAASiB,cAAgB,EAC9B1G,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,uCAGP,0BAA2BpG,KAAKyF,WACpCzF,KAAKyF,SAASkB,sBAAwB,EACtC3G,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,+CAGTN,EAAMnF,SAAW,IACnByE,EAAWzE,SAAWmF,EAAMnF,UAGP,IAAnBmF,EAAMnF,WACRyE,EAAWzE,SAAW,IACtBX,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,qDAIbpG,KAAKyF,SAASG,SAAWT,GAE3BxC,IAAK,WACEmD,EAAMrI,WAOqB,SAA5BqI,EAAMrI,WAAWmJ,OAIhBd,EAAMrI,WAAWoJ,KAMjBf,EAAMrI,WAAWmJ,QACpB5G,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,qCAKbd,EAAO,CACLwB,OAAQhB,EAAMrI,WAAWmJ,QAAU,UACnCG,IAAKjB,EAAMrI,WAAWoJ,KAGW,qBAAxBf,EAAMrI,WAAWuJ,KAC1B1B,EAAK2B,GAAKnB,EAAMrI,WAAWuJ,KAlB3BhH,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,yCALXd,EAAO,KAPPtF,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,qDA+Bf,iBAAkB,WACXc,SAASpB,EAAMqB,QAMpBnH,KAAKyF,SAASiB,cAAgBZ,EAAMqB,OALlCnH,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,oCAAsCN,EAAMqB,UAM3D,yBAA0B,WACnBD,SAASpB,EAAMqB,SAMpBnH,KAAKyF,SAASkB,sBAAwBb,EAAMqB,OAC5CrG,EAAkBgF,EAAMqB,QANtBnH,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,4CAA8CN,EAAMqB,UAOnE,gBAAiB,WACV,YAAYC,KAAKtB,EAAMuB,cAM5BrH,KAAKyF,SAAS4B,aAAevB,EAAMuB,aALjCrH,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,mCAAqCN,EAAMpH,YAM1DD,IAAK,WACH4G,EAAa,GACTS,EAAMiB,MACR1B,EAAW0B,IAAMjB,EAAMiB,KAErBjB,EAAMO,YACRhB,EAAWgB,UAAYP,EAAMO,YAGjC,aAAc,WACZrG,KAAKyF,SAASjH,UAAY2G,EAC1BnF,KAAKyF,SAAS6B,YAActH,KAAKyF,SAAS6B,aAAe9B,EAEpDM,EAAMrI,YAON2H,EAAW3H,aACd2H,EAAW3H,WAAa,IAE1B4E,EAAS+C,EAAW3H,WAAYqI,EAAMrI,aATpCuC,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,0CAUfmB,MAAO,WAGL,GAFAvH,KAAKyF,SAAS6B,YAActH,KAAKyF,SAAS6B,aAAe9B,EAEnDM,EAAMrI,YAAcqI,EAAMrI,WAAW+J,MAAQ1B,EAAMrI,WAAW,aAAeqI,EAAMrI,WAAWgK,KAApG,CAQA,IAAIC,EAAiB1H,KAAKyF,SAAS6B,YAAYxB,EAAMrI,WAAW+J,MAEhEE,EAAe5B,EAAMrI,WAAW,aAAeiK,EAAe5B,EAAMrI,WAAW,cAAgB,GAC/FsI,EAAa2B,EAAe5B,EAAMrI,WAAW,aAG7CuI,EAAY,CACV,QAAW,OAAOoB,KAAKtB,EAAMrI,WAAWkK,UAEtC3B,EAAU,WACZA,EAAU4B,YAAa,EAEvB5B,EAAU4B,WAAa,OAAOR,KAAKtB,EAAMrI,WAAWoK,YAElD/B,EAAMrI,WAAWqK,WACnB9B,EAAU+B,SAAWjC,EAAMrI,WAAWqK,UAEpChC,EAAMrI,WAAWoJ,MACnBb,EAAUe,IAAMjB,EAAMrI,WAAWoJ,KAE/Bf,EAAMrI,WAAW,iBACnBuI,EAAUgC,WAAalC,EAAMrI,WAAW,gBAEtCqI,EAAMrI,WAAWwK,kBACnBjC,EAAUkC,gBAAkBpC,EAAMrI,WAAWwK,iBAE3CnC,EAAMrI,WAAW0K,SACnBnC,EAAUoC,OAAS,OAAOhB,KAAKtB,EAAMrI,WAAW0K,SAIlDpC,EAAWD,EAAMrI,WAAWgK,MAAQzB,OAtClChG,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,gDAuCfiC,cAAe,WACbvH,GAAmB,EACnBsE,EAAWiD,eAAgB,EAC3BrI,KAAKyF,SAASE,oBAAoB2C,KAAKnD,EAAKjG,SAE9C,oBAAqB,WACnBc,KAAKyF,SAAS8C,eAAiBzC,EAAMyC,eACrCvI,KAAKyF,SAAS+C,eAAiB1C,EAAM0C,gBAEvCC,eAAgB,YACTvB,SAASpB,EAAMnF,WAAamF,EAAMnF,SAAW,EAChDX,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,qCAAuCN,EAAMnF,WAI1DX,KAAKyF,SAASiD,eAAiB5C,EAAMnF,UAEvCgI,cAAe,YACRzB,SAASpB,EAAMnF,WAAamF,EAAMnF,SAAW,EAChDX,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,oCAAsCN,EAAMnF,WAIzDX,KAAKyF,SAASmD,cAAgB9C,EAAMnF,UAEtC,UAAW,WACTyE,EAAWyD,OAAS/C,EAAMgD,MAE5B,eAAgB,WACd1D,EAAW2D,WAAajD,EAAMgD,MAEhC,SAAU,WACR1D,EAAW4D,MAAQlD,EAAMgD,OAE1BhD,EAAMmD,UAAY1D,GAAMzC,KAAKqB,IAElC4C,IAAK,WACH3B,EAAW2B,IAAMjB,EAAMiB,IACvB5B,EAAKmD,KAAKlD,GAGNpF,KAAKyF,SAASiD,kBAAoB,aAActD,KAClDpF,KAAKmG,QAAQ,OAAQ,CACnBC,QAAS,uDAEXhB,EAAWzE,SAAWX,KAAKyF,SAASiD,gBAGlCpD,IACFF,EAAWzC,IAAM2C,GAEnBF,EAAW8D,SAAWpI,EAElBuE,IACFD,EAAW3G,IAAM4G,GAInBD,EAAa,IAEf+D,QAAS,eAGRrD,EAAMsD,MAAMtG,KAAKqB,MAGfW,EA8BT,OA3UAT,EAAUO,EAAQC,GAuTlB9B,EAAa6B,EAAQ,CAAC,CACpBjC,IAAK,OACL5G,MAAO,SAAcsN,GACnBrJ,KAAKgF,WAAWsD,KAAKe,KAStB,CACD1G,IAAK,MACL5G,MAAO,WAELiE,KAAKgF,WAAWsD,KAAK,UAIlB1D,EA5UI,CA6UXlB,EAAS,YAEXrI,EAAQ,WAAauJ,G,kCC5XrB,SAASlJ,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIuN,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCE,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAUnCE,EAAkB,SAAyBC,GAC7C9N,OAAOmH,iBAAiB2G,EAAIC,MAAO,CACjCC,GAAI,CACFC,IAAK,WAEH,OADAL,EAAU,WAAWM,IAAIC,KAAK,0DACvBL,EAAI5N,MAAM4G,MAGrB5G,MAAO,CACL+N,IAAK,WAEH,OADAL,EAAU,WAAWM,IAAIC,KAAK,8DACvBL,EAAI5N,MAAM+M,OAGrBmB,YAAa,CACXH,IAAK,WAEH,OADAL,EAAU,WAAWM,IAAIC,KAAK,oEACvBL,EAAI5N,MAAM+M,UAMrBoB,EAAkB,SAAyBvJ,GAC7C,IAAIwJ,OAAM1N,EAOV,OAJE0N,EADEC,MAAMzJ,IAAa0J,KAAKC,IAAI3J,KAAc4J,IACtC5M,OAAOC,UAEP+C,EAEDwJ,GAWLK,EAAmB,SAA0BC,EAAeC,EAAcC,GAC5E,IAAIC,EAAMrB,EAAe,WAAWsB,eAAiBtB,EAAe,WAAWuB,OAE3EJ,GACFA,EAAaK,SAAQ,SAAUC,GAC7B,IAAIC,EAAQD,EAAQE,OAEpBlL,KAAKmL,kBAAkBF,GAAOG,OAAO,IAAIR,EAAII,EAAQK,UAAYrL,KAAKsL,gBAAiBN,EAAQO,QAAUvL,KAAKsL,gBAAiBN,EAAQQ,SACtIf,GAGDE,GACF,WACE,IAAIc,EAAgBvB,EAAgBO,EAAciB,aAAa/K,UAE/DgK,EAAcI,SAAQ,SAAUY,GAC9B,IAAIC,EAAOD,EAASE,QAAU7L,KAAKsL,gBAEnCK,EAASG,OAAOf,SAAQ,SAAUnB,GAChC,IAAID,EAAM,IAAIiB,EAAIgB,EAAMA,EAAMhC,EAAM7N,OAAS6N,EAAMmC,KAAOnC,EAAMd,MAAQ,IAExEa,EAAIC,MAAQA,EACZD,EAAI5N,MAAQ6N,EACZF,EAAgBC,GAEhB3J,KAAKgM,eAAeZ,OAAOzB,KAC1B3J,QACFyK,GAKCA,EAAcuB,gBAAkBvB,EAAcuB,eAAeC,MAAQxB,EAAcuB,eAAeC,KAAK/M,QACzG,WAME,IALA,IAAI+M,EAAOxB,EAAcuB,eAAeC,KACpCC,EAAY,GAIP1J,EAAI,EAAGA,EAAIyJ,EAAK/M,OAAQsD,IAC3ByJ,EAAKzJ,IACP0J,EAAU5D,KAAK2D,EAAKzJ,IAKxB,IAAI2J,EAAyBD,EAAUE,QAAO,SAAUzQ,EAAKgO,GAC3D,IAAI0C,EAAW1Q,EAAIgO,EAAI0B,YAAc,GAKrC,OAHAgB,EAAS/D,KAAKqB,GACdhO,EAAIgO,EAAI0B,WAAagB,EAEd1Q,IACN,IAGC2Q,EAAmBzQ,OAAO0Q,KAAKJ,GAAwBlP,MAAK,SAAU6E,EAAGC,GAC3E,OAAOpE,OAAOmE,GAAKnE,OAAOoE,MAI5BuK,EAAiBvB,SAAQ,SAAUM,EAAWmB,GAC5C,IAAIC,EAAWN,EAAuBd,GAClCqB,EAAW/O,OAAO2O,EAAiBE,EAAM,KAAOf,EAGpDgB,EAAS1B,SAAQ,SAAUpB,GACzBA,EAAI4B,QAAUmB,QAlCpB,GArBJ,IAgEJrR,EAAQ,WAAa,CACnBmP,iBAAkBA,EAClBN,gBAAiBA,GAEnB9O,EAAOC,QAAUA,EAAQ,Y,mBCrJzBD,EAAOC,QAAU,s1I,2CCAjB,IAAIsR,EAAS,WAAa,IAAIC,EAAI5M,KAAS6M,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,UAAUC,MAAM,CAAC,GAAK,cAAc,CAACH,EAAG,MAAM,CAACE,YAAY,eAAeF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,YAAY,GAAGA,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,cAAc,GAAGA,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,cAAc,MAClWI,EAAkB,G,YCDlB,G,oBAAS,WAAa,IAAIP,EAAI5M,KAAS6M,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAM,EAAQ,QAA6B,IAAM,GAAG,OAAS,MAAMH,EAAG,SAAS,CAACG,MAAM,CAAC,UAAW,EAAK,WAAY,EAAK,WAAa,MAAM,GAAGH,EAAG,MAAM,CAACE,YAAY,UAAU,CAACL,EAAIQ,GAAG,GAAGR,EAAIQ,GAAG,GAAGL,EAAG,MAAM,CAACE,YAAY,UAAUL,EAAIS,GAAIT,EAAIU,OAAOC,QAAmB,aAAE,SAASC,EAAKC,GAAO,OAAOV,EAAG,MAAM,CAACpK,IAAI8K,GAAO,CAACV,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACW,MAAMD,EAAQ,GAAK,EACzkB,aACAA,EAAQ,GAAK,EACb,aACAA,EAAQ,GAAK,EACb,aACA,IAAI,CAACb,EAAIe,GAAG,IAAIf,EAAIgB,GAAGH,EAAQ,GAAK,GAASA,EAAQ,GAAK,GAASA,EAAQ,GAAK,EAAxC,GAAiDA,EAAQ,GAAG,OAAOV,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACL,EAAIe,GAAGf,EAAIgB,GAAGJ,EAAKK,eAAed,EAAG,MAAM,CAACE,YAAY,YAAY,CAACL,EAAIe,GAAGf,EAAIgB,GAAGJ,EAAKM,SAASf,EAAG,MAAM,CAACE,YAAY,YAAY,CAACL,EAAIe,GAAGf,EAAIgB,GAAGJ,EAAKO,OAAO,iBAAgB,SAC5U,EAAkB,CAAC,WAAa,IAAInB,EAAI5M,KAAS6M,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACL,EAAIe,GAAG,UAAUZ,EAAG,MAAM,CAACE,YAAY,cAAc,WAAa,IAAIL,EAAI5M,KAAS6M,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACL,EAAIe,GAAG,QAAQZ,EAAG,MAAM,CAACE,YAAY,YAAY,CAACL,EAAIe,GAAG,SAASZ,EAAG,MAAM,CAACE,YAAY,YAAY,CAACL,EAAIe,GAAG,MAAMZ,EAAG,MAAMH,EAAIe,GAAG,cCPlf,EAAS,WAAa,IAAIf,EAAI5M,KAAS6M,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,OAAO,CAACG,MAAM,CAAC,SAAWN,EAAIoB,SAAS,UAAYpB,EAAIqB,UAAU,WAAarB,EAAIsB,aAAa,CAACtB,EAAIe,GAAGf,EAAIgB,GAAGhB,EAAIuB,mBAC3N,EAAkB,GC6JtB,G,oBAAA,CACErF,KADF,WAEI,MAAO,CACLsF,SAAS,EACTC,YAAa,KACbF,YAAa,GACbG,IAAK,EACLC,KAAM,EACNC,OAAQ,EACRC,OAAQ,EACRC,YAAa,EACbC,SAAU3O,KAAKkO,WACfU,UAAW,IAGfC,MAAO,CACLV,YAAa,CACXW,MAAM,EACNC,QAAS,SAAf,KACQ,IAAIC,EAAKhP,KACLgP,EAAGC,cACLD,EAAGE,aAAaC,KAItBF,aAAc,CACZH,MAAM,EACNC,QAAS,SAAf,GACQ,IAAIC,EAAKhP,KACLmP,GACFH,EAAGE,aAAaF,EAAGb,gBAK3BlL,MAAO,CACL+K,SAAU,CACR5E,KAAMgG,QACNC,SAAS,GAEXpB,UAAW,CACT7E,KAAMgG,QACNC,SAAS,GAEXnB,WAAY,CACV9E,KAAMzL,OACN0R,QAAS,IAGbC,QAjDF,WAmDItP,KAAKuP,aAGPC,SAAU,CACRP,aAAc,WACZ,OAAOjP,KAAKgO,WAGhByB,QAAS,WACPzP,KAAK0P,IAAI,cAAc,WACrB1P,KAAK2P,kBAEP3P,KAAK0P,IAAI,aAAa,WACpB1P,KAAK4P,kBAGTC,WAAY,GACZC,QAAS,CAEPP,UAFJ,WAGM,IAAN,OAEA,wBAEA,wBACA,0BAEQ,IAAR,WACA,cAEA,MACYQ,GAAY,GACdC,EAAKC,QAAU5F,KAAK6F,MAAMH,EAAW,IAAO,GAAK,GAAK,IACtDC,EAAKG,QAAU9F,KAAK6F,MAAMH,EAAW,IAAO,GAAK,GAAK,IAAqB,GAAfC,EAAKC,QACjED,EAAKI,QAAU/F,KAAK6F,MAAMH,EAAW,IAAO,GAAK,IAAM,GAAK,IAAM1F,KAAK6F,MAAMH,EAAW,IAAO,GAAK,IAAM1F,KAAK6F,MAAMH,EAAW,IAAO,GAAK,IAC5IC,EAAKK,QAAUhG,KAAK6F,MAAMH,EAAW,IAAO,IAAM,GAAK,IAAM1F,KAAK6F,MAAMH,EAAW,IAAO,IAAM1F,KAAK6F,MAAMH,EAAW,IAAO,IAC7HC,EAAK7B,YAAc,GAA7B,2FAEc6B,EAAK/B,WACP+B,EAAKL,eAEPW,cAAcC,MAExB,MAGIC,UAAW,SAAf,GACM,IAAIxB,EAAKhP,KACLyQ,GAAU,IAAIC,MAAOC,UACzB,GAAoB,GAAhB3B,EAAGJ,UACL,IAAIgC,EAAMH,EAAUI,MAC5B,CACQ7B,EAAGJ,UAAYI,EAAGJ,UAAY,GAC1BgC,EAAM5B,EAAGJ,UAAYiC,EAE3B,IAAIC,EAASF,EAAM,MACfG,EAASD,EAAS,KAClBE,EAASD,EAAS,IACtB/B,EAAGV,IAAMjE,KAAK6F,MAAMU,EAAM,OAC1B5B,EAAGT,KAAOlE,KAAK6F,MAAMY,EAAS,MAAiB,GAAK,IAAMzG,KAAK6F,MAAMY,EAAS,MAAiBzG,KAAK6F,MAAMY,EAAS,MACnH9B,EAAGR,OAASnE,KAAK6F,MAAMa,EAAS,KAAe,GAAK,IAAM1G,KAAK6F,MAAMa,EAAS,KAAe1G,KAAK6F,MAAMa,EAAS,KACjH/B,EAAGP,OAASpE,KAAK4G,MAAMD,EAAS,KAAQ,GAAK,IAAM3G,KAAK4G,MAAMD,EAAS,KAAQ3G,KAAK4G,MAAMD,EAAS,KACnGhC,EAAGb,YAAc,GAAvB,0DAEIwB,aAAc,WACZ,IAAIX,EAAKhP,KACT,IAAKgP,EAAGZ,QAAS,CACfY,EAAGL,SAAWK,EAAGL,SAAWK,EAAGL,UAAW,IAAI+B,MAAOC,UACrD,IAAIO,EAAQC,aAAY,WACtBnC,EAAGwB,UAAUxB,EAAGL,YAC1B,IACQK,EAAGX,YAAc6C,EACjBlC,EAAGZ,SAAU,IAGjBwB,YAAa,WACX,IAAIZ,EAAKhP,KACLgP,EAAGZ,UACL1R,OAAO4T,cAActB,EAAGX,aACxBW,EAAGX,YAAc,KACjBW,EAAGZ,SAAU,EACbY,EAAGJ,WAAY,IAAI8B,MAAOC,YAG9BzB,aAAc,SAAlB,GAEMlP,KAAKoR,MAAM,mBAAoBtI,OCvS4Z,I,YCO7buI,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QCuDf,GACExB,WAAY,CACVyB,OAAJ,GAEExI,KAJF,WAKI,MAAO,CACLyI,SAAU,KACV7Q,YAAa,EACb8Q,QAAS,OAIb3C,MAAO,CACL,6BAA8B,CAC5BE,QAAS,SAAf,KAEQ0C,QAAQ1H,IAAI2H,IAId5C,MAAM,EACN6C,WAAW,IAGflC,QAxBF,aA2BEH,QA3BF,aA0CEQ,QAAS,CACP8B,UADJ,WACA,WACM5R,KAAK6R,eACLV,aAAY,WACV,EAAR,iBACA,MAEIU,aAPJ,WASM7R,KAAKwR,QAAU,CAEbM,QAASzH,KAAK6F,MAAMlQ,KAAKU,YAAc,IACvCqR,QAAS1H,KAAK6F,MAAMlQ,KAAKU,YAAc,IAAM,GAC7CsR,MAAO3H,KAAK6F,MAAMlQ,KAAKU,YAAc,GAAK,IAAM,IAGlDV,KAAKiS,QACX,gEACMjS,KAAKkS,UACX,wBACA,yBACA,qBACMlS,KAAKmS,UACX,wBACA,yBACA,qBACMnS,KAAKU,iBC7Iyb,ICShc,G,oBAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCpBX,EAAS,WAAa,IAAIkM,EAAI5M,KAAS6M,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACH,EAAIe,GAAGf,EAAIgB,GAAGhB,EAAIU,OAAOC,QAAQ6E,WAAWC,aAAa,OAAOtF,EAAG,MAAM,CAACG,MAAM,CAAC,IAAM,UAAS,KAA+BN,EAAIU,OAAOC,QAAQ6E,WAAkB,QAAI,aAAcxF,EAAIQ,GAAG,KAAKL,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,MAAM,CAACH,EAAIe,GAAG,MAAMf,EAAIgB,GAAGhB,EAAIU,OAAOC,QAAQ6E,WAAWE,cAAcvF,EAAG,MAAM,CAACH,EAAIe,GAAG,MAAMf,EAAIgB,GAAGhB,EAAIU,OAAOC,QAAQ6E,WAAWG,aAAaxF,EAAG,MAAM,CAACH,EAAIe,GAAG,kBACjnB,EAAkB,CAAC,WAAa,IAAIf,EAAI5M,KAAS6M,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACH,EAAIe,GAAG,SAASZ,EAAG,MAAM,CAACyF,YAAY,CAAC,cAAc,QAAQ,eAAe,UAAU,CAAC5F,EAAIe,GAAG,QAAQZ,EAAG,MAAM,CAACH,EAAIe,GAAG,WCmC9Q,G,oBAAA,CACEkC,WAAY,GACZ/G,KAFF,WAGI,MAAO,IAGT2G,QANF,aAOEH,QAPF,eCpCsc,ICQlc,G,UAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCnBX,EAAS,WAAa,IAAI1C,EAAI5M,KAAS6M,EAAGD,EAAIE,eAAsBF,EAAII,MAAMD,GAAO,OAAOH,EAAIQ,GAAG,IACnG,EAAkB,CAAC,WAAa,IAAIR,EAAI5M,KAAS6M,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,SAAS,CAACyF,YAAY,CAAC,MAAQ,MAAM,OAAS,OAAOtF,MAAM,CAAC,IAAM,kDC6B5P,GACE2C,WAAY,GACZ/G,KAFF,WAGI,MAAO,CACL2J,SAAU,GACVC,SAAU,mEAGdjD,QARF,aASEH,QATF,aAoCEqD,cAAe,WAEb,IAAJ,sBACI3S,KAAK4S,OAAOC,GAAUC,WAExBhD,QAAS,ICvE2b,ICQlc,G,WAAY,eACd,EACA,EACA,GACA,EACA,KACA,WACA,OAIa,I,QCnBTiD,EACH,CACA,WAAY,SACZ,WAAW,UACX,UAAU,UACV,WAAY,UAEZ,WAAY,SACZ,WAAW,UACX,WAAW,SAGX,WAAY,SACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,UAAW,UAEX,UAAU,UACV,WAAW,UACX,WAAY,UAIZ,WAAY,UACZ,WAAW,UACX,WAAY,UACZ,WAAW,UACX,WAAY,UACZ,WAAY,UACZ,WAAW,UACX,WAAW,UACX,WAAW,UACX,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,SACZ,WAAW,SACX,WAAW,UACX,WAAW,UACX,WAAW,SACX,WAAY,UACZ,WAAW,UACX,WAAY,UACZ,UAAU,UACV,WAAY,UACZ,UAAU,UACX,WAAW,UACV,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,UAAW,UACX,WAAY,UACZ,WAAY,SACZ,WAAY,UACZ,WAAY,UACZ,SAAU,UACX,WAAW,UACX,WAAW,UACX,WAAW,UACX,WAAW,UACV,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAW,UACX,WAAY,UACZ,WAAY,SACZ,UAAW,UACX,UAAW,UACX,WAAW,UACX,WAAW,UACX,WAAW,UACX,WAAW,UACX,WAAW,UACX,UAAW,UACX,WAAW,UACX,WAAW,UACX,UAAU,UACV,WAAW,UACX,WAAW,UACX,WAAW,UACX,WAAW,UACX,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAW,UACX,WAAY,UACZ,UAAU,UACV,WAAW,UACX,WAAW,UACX,WAAW,UACX,WAAW,SACX,WAAW,UACX,WAAW,UACX,WAAY,UACZ,UAAW,SACX,WAAY,UACZ,WAAY,UACZ,WAAW,UACX,SAAU,UACV,WAAW,UACX,WAAY,UACZ,WAAW,UACX,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,SACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UAEZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,UAAU,UACV,WAAY,UACZ,WAAa,UACb,WAAW,SACX,WAAY,SACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAW,UACX,WAAY,SACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAY,UACZ,WAAW,UACX,WAAW,UACX,WAAW,UACX,WAAY,UACZ,WAAY,WAEA,GACbA,YC7HF,GACElD,WAAY,CACVmD,QAAJ,EACIC,UAAJ,EACIC,UAAJ,GAEEpK,KANF,WAOI,MAAO,CACLqK,MAAO,KACPC,eAAgB,KAChBlC,MAAO,KACPmC,SAAU,GACVC,SAAU,IAAIC,KAAKC,aACnBC,QAAS,KACTC,YAAa,GACbC,MAAO,CACLC,KAAM,EACNC,SAAU,GACVC,KAAM,IAERC,QAAS,KACTC,YAAa,KACbC,aAAc,KAEdC,cAAe,GACfC,iBAAN,GACMC,aAAc,GACdC,YAAa,GACbC,cAAe,GACfC,IAAN,IAIE9E,QAjCF,WAkCIzP,KAAKwU,WACL,IAAJ,OACIxU,KAAKiU,aAAe9C,aAAY,WAC1BnB,EAAKyD,SACPzD,EAAKyD,QAAQgB,OAAO,MAEtBzE,EAAKqE,YAAYtJ,SAAQ,SAA/B,GACQ2J,EAAKC,MAAQ,KAEf3E,EAAKqD,SAAStI,SAAQ,SAA5B,KACQiF,EAAKqE,YAAYtJ,SAAQ,SAAjC,KACU,IAAI6J,EAAK,CAACC,EAAMC,IAAKD,EAAME,KACvBC,EAAK,CAACN,EAAKO,aAAaH,IAAKJ,EAAKO,aAAaF,KAC7D,kCACuC,GAAzBL,EAAKO,aAAaH,KAAmC,GAAvBJ,EAAKO,WAAWF,KAAYG,GAAY,MACxEL,EAAMF,MAAQE,EAAMF,MAAQ,SAIlC3E,EAAKmF,UACLnF,EAAK0D,YAAc1D,EAAKoF,SAASpF,EAAKqE,aACtCrE,EAAKyD,QAAQ4B,WAAW,CAA9B,qCACA,MAEE/F,QA1DF,WA0DA,WACItP,KAAKsV,UACDC,eAAeC,QAAQ,aACzB/D,QAAQ1H,IAAI,SACZuG,cAActQ,KAAKgU,aACfhU,KAAK+T,SACP/T,KAAK+T,QAAQ0B,UAGfhE,QAAQ1H,IAAI,SACZwL,eAAeG,QAAQ,YAAY,IAGrC,IAAJ,aACI1V,KAAKoU,aAAepU,KAAK2V,YAAYC,EAAQ,GAC7C5V,KAAKqU,YAAc,GACnBrU,KAAKoU,aAAarJ,SAAQ,SAA9B,GACM,IAAN,GACQ+J,IAAKJ,EAAK,GACVK,IAAKL,EAAK,GACVC,MAAO,GAET,EAAN,wBAIEkB,UApFF,WAqFI7V,KAAK+T,QAAQ0B,QACbnF,cAActQ,KAAKiU,eAErBnE,QAAS,CACP0E,SADJ,WACA,WAEMxU,KAAK8V,UAAU,0BAA0BC,MAAK,SAApD,GACQC,EAAIC,QAAQlL,SAAQ,SAA5B,KACU8J,EAAMqB,aAAerB,EACrBA,EAAMqB,aAAaC,cAAgB,GACnCtB,EAAMqB,aAAaC,cAAc7N,KAAK,CAACuM,EAAMC,IAAKD,EAAME,MACxDF,EAAMF,MAAQ,EACdE,EAAMuB,WAAa,EACnB,EAAV,8BAGU,EAAV,mCACY,IAAIxB,EAAK,CAACF,EAAKI,IAAKJ,EAAKK,KACrBC,EAAK,CAACH,EAAMC,IAAKD,EAAME,KACvC,kCACgBG,GAAY,MACdR,EAAKC,MAAQD,EAAKC,MAAQ,SAIhC,EAAR,sCACQ,EAAR,uDACQ,IAAR,wBACQ,EAAR,4BACQ,EAAR,oBAGI0B,UA7BJ,aA8BIC,cA9BJ,WA8BA,WAEA,sDAKMtW,KAAK+T,QAAU,IAAIwC,UAAUC,GAC7BxW,KAAK+T,QAAQ0C,OAAS,SAA5B,GACQhF,QAAQ1H,IAAI,SAAU2M,GACtB,EAAR,YAGM1W,KAAK+T,QAAQ4C,UAAY,SAA/B,GACQlF,QAAQ1H,IAAI,QAKZ,IAAR,gCAEY6M,IACZ,mCACU,EAAV,gCAGY,GAFAlC,EAAKO,aAAa4B,OAASnC,EAAKO,aAAaH,IAC7CJ,EAAKO,aAAa6B,OAASpC,EAAKO,aAAaF,IAC3B,IAAd6B,EAAM9B,KAA2B,IAAd8B,EAAM7B,KAAzC,6BACkBL,EAAKO,aAAaiB,cACpB,EAAhB,mDAEczE,QAAQ1H,IAAI,EAA1B,qCACc,EAAd,mBACc,EAAd,uCACc,IAAd,8BACc,IAAK,IAAnB,OACgB,IAAK,IAArB,OACsBvH,GAAKuU,IACPC,EAAQxU,GAAKoU,EAAMG,IAIrBC,GACFA,EAAQb,cAAc7N,KAAK,CAACsO,EAAM9B,IAAK8B,EAAM7B,MAE/CiC,EAAQZ,WAAa7C,KAAK0D,aAAaC,eAAeF,EAAQb,eAE9DzB,EAAKO,aAAaH,IAAM8B,EAAM9B,IAC9BJ,EAAKO,aAAaF,IAAM6B,EAAM7B,IAC9B,QAAd,qBACc,EAAd,iCACc,IAAd,uBACA,yCAEctD,QAAQ1H,IAAIoN,EAA1B,OACc,EAAd,6CACA,kDACc,EAAd,mBAEczC,EAAKO,aAAaH,IAAM8B,EAAM9B,IAC9BJ,EAAKO,aAAaF,IAAM6B,EAAM7B,UAOtC/U,KAAK+T,QAAQqD,QAAU,SAA7B,GACQ3F,QAAQ1H,IAAI,OAAQsN,IAEtBrX,KAAK+T,QAAQuD,QAAU,SAA7B,GAGQhH,cAAc,EAAtB,aACQmB,QAAQ1H,IAAI,OAAQsN,GACpB,EAAR,gBAC2C,IAA/BA,EAAEE,cAAcC,YAClB,EAAV,kBAIIC,SA9GJ,WA8GA,WAEMzX,KAAKqT,SAAStI,SAAQ,SAA5B,GACQ,EAAR,gDAEM,IAAImG,EAAV,uBACQ,EAAR,WACQwG,aAAaxG,KACrB,MAGIiE,QAzHJ,WAyHA,WACMnV,KAAKmT,MAAMwE,OAAO,CAAC,iBAAiB,WAElC,EAAR,kCACUC,OAAQ,GACRC,QAAS,CAAC,EAAG,UAInBvC,QAlIJ,WAkIA,aACMtV,KAAKmT,MAAQ,IAAII,KAAKuE,IAAI,YAAa,CACrCC,cAAc,EAGdC,KAAM,KACNC,OAAQ,CAAC,WAAY,WAErBC,SAAU,mDAEPlY,KAAKmY,mBACRC,MAAM,mDAGR,IAAN,aACA,mBACQC,KAAM,EAAd,QACQC,SAAU,CAAC,WAAY,UACvBhS,OAAQ,IAAIiN,KAAKgF,OAAO,IAAK,MAE/BC,EAAQ/D,OAAOzU,KAAKmT,OACpB,IAAN,mBACQkF,KAAM,EAAd,QACQC,SAAU,CAAC,WAAY,WACvBhS,OAAQ,IAAIiN,KAAKgF,OAAO,IAAK,MAE/BE,EAAQhE,OAAOzU,KAAKmT,OACpB,IAAN,wBAGA,sBACQuF,KAAMC,EACNla,IAAKuB,KAAKmT,MACVyF,YAAa,MACbC,aAAc,EACdC,cAAe,GACfC,aAAc,SACdC,aAAc,EACdC,SAAU,SARlB,gCASA,aATA,8BAUA,GAVA,IAYM1F,KAAKoE,OAAO,gBAAgB,WAC1B,IAAIuB,EAAU,IAAI3F,KAAK4F,QACvBD,EAAQE,QAAQ,OAAO,SAA/B,KACU,EAAV,oCAIMpZ,KAAKmV,WAEPgD,gBArLJ,WAsLM,IAAIkB,EAAOC,SAASC,cAAc,UAClC,SAAUF,EAAKG,aAAcH,EAAKG,WAAW,QAE/CC,UAzLJ,SAyLA,cACA,mBACQhb,IAAKuB,KAAKmT,MACVmF,SAAU,CAACoB,EAAI5E,IAAK4E,EAAI3E,KACxBsD,KAAM,EAAd,QACQ/R,OAAQ,IAAIiN,KAAKgF,OAAO,IAAK,IAC7BoB,QAASD,IAKX,OAHAE,EAAO/T,GAAG,SAAS,SAAzB,GACQ,EAAR,uCAEa+T,GAETC,YAtMJ,WAuMM,IAAN,qBACQpb,IAAKuB,KAAKmT,MACVyF,YAAa,OACbC,aAAc,KAEhB,OAAOzF,GAGT0G,wBA/MJ,SA+MA,GACM,OAAO,SAAUhY,EAAGC,GAClB,IAAIgY,EAASjY,EAAEkY,GACXC,EAASlY,EAAEiY,GAKf,OAAOC,EAASF,IAKpBpE,YA5NJ,SA4NA,KAKM,IAHA,IAAN,WACA,gCACA,KACA,aAEQ,IAAR,qBACQK,EAAI1N,KAAK4R,GAGX,OAAOlE,KCxVqb,ICQ9b,G,UAAY,eACd,EACArJ,EACAQ,GACA,EACA,KACA,WACA,OAIa,e,gCCjBf,IAAIgN,EAAW1X,UAAU,GACrB2X,EAAU3X,UAAU,GACpB4X,EAAQ5X,UAAU,GAClB6X,EAAYC,KAAKD,UACjBE,GAAU,EAGVC,EAAqB,SAASC,GAEhC,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG3B,GAAGF,EAAiBE,GAClB,OAAOF,EAAiBE,GAAUxf,QAGpC,IAAID,EAASuf,EAAiBE,GAAY,CACxCrY,EAAGqY,EACHC,GAAG,EACHzf,QAAS,IAUX,OANAqf,EAAQG,GAAU/X,KAAK1H,EAAOC,QAASD,EAAQA,EAAOC,QAASuf,GAG/Dxf,EAAO0f,GAAI,EAGJ1f,EAAOC,QAsChB,OAjCAuf,EAAoBG,EAAIL,EAGxBE,EAAoBI,EAAIL,EAGxBC,EAAoBK,EAAI,SAAS5f,EAASyS,EAAMoN,GAC1CN,EAAoBO,EAAE9f,EAASyS,IACjCjS,OAAOC,eAAeT,EAASyS,EAAM,CACnC1K,cAAc,EACdD,YAAY,EACZ2G,IAAKoR,KAMXN,EAAoBQ,EAAI,SAAShgB,GAC/B,IAAI8f,EAAS9f,GAAUA,EAAOQ,WAC5B,WAAwB,OAAOR,EAAO,YACtC,WAA8B,OAAOA,GAGvC,OADAwf,EAAoBK,EAAEC,EAAQ,IAAKA,GAC5BA,GAITN,EAAoBO,EAAI,SAASE,EAAQ9e,GAAY,OAAOV,OAAO+G,UAAUC,eAAeC,KAAKuY,EAAQ9e,IAGzGqe,EAAoBU,EAAI,GAGjBV,EAAoBA,EAAoBW,EAAIC,cAG7B,qBAAbrB,IAETK,GAAU,EACVL,EAAWM,EACXL,EAAU,KAGZ,IAAIqB,EAAuB,SAASC,GAKlC,IAHA,IACIC,EADAC,EAAY/f,OAAO0Q,KAAK8N,GAGnB7X,EAAI,EAAGA,EAAIoZ,EAAU1c,OAAQsD,IAAK,CACzC,IAAIqZ,EAAWD,EAAUpZ,GACrBsZ,EAAezB,EAAMwB,GAAUxgB,QAMnC,GAAIygB,IAAiBJ,GAAMI,GAAgBA,EAAazM,UAAYqM,EAAI,CACpEC,EAAcE,EACd,OAKN,IAAKF,EAAa,CAChBA,EAActR,KAAK6F,MAAM7F,KAAK0R,IAAI,GAAI,GAAK1R,KAAK2R,UAAUC,SAAS,IAEnE,IAAIC,EAAgB,GAEpB,IAAS1Z,EAAI,EAAGA,EAAIoZ,EAAU1c,OAAQsD,IAAK,CACrCqZ,EAAWD,EAAUpZ,GAEzB0Z,EAAcL,GAAYA,EAG5BzB,EAAQuB,GAAe,CACrB,oCAAsCD,EAAK,YAC3CQ,GAIJ,IAAIC,EAAW9R,KAAK6F,MAAM7F,KAAK0R,IAAI,GAAI,GAAK1R,KAAK2R,UAAUC,SAAS,IAChEG,EAAa,GAYjB,OAVAA,EAAWT,GAAeA,EAC1BvB,EAAQ+B,GAAY,CAClB,oDAEuB7B,EAAUqB,GAFjC,wCAKAS,GAGK,IAAMjC,EAAW,MAChBte,OAAO0Q,KAAK6N,GAAS3b,KAAI,SAASkE,GAChC,OAAO2X,EAAU3X,GAAO,KAClByX,EAAQzX,GAAK,GAAK,IAClB2X,EAAUF,EAAQzX,GAAK,IAAM,OACpC0Z,KAAK,KACN,SAAW/B,EAAU6B,GAAY,MAGvCG,EAAoB,SAASZ,EAAIa,GACnC,IACIC,EADAC,EAAgC,kBAAfF,EAInBC,EADEC,EACc,GAEA,GAGlB5gB,OAAO0Q,KAAK6N,GAASrP,SAAQ,SAAS2R,GAC/BtC,EAAQsC,KAGbF,EAAcE,GAAQtC,EAAQsC,GAAMT,eAGtC,IAaIU,EAbAC,EAAkBhC,EAAoB2B,GAM1C,IAAMK,GAAoBA,IAAoBlB,GAAMkB,EAAgBvN,UAAYqM,EAAM,CACpF,IAAImB,EAAiBL,EAAcD,GAEnCC,EAAcD,GAAcM,EAAeC,UAAU,EAAGD,EAAe3d,OAAS,GACpD,KAAOwc,EAAG5N,KAAO,SAK/C,GAAI2O,EAAS,CAEXF,EAAajC,EAAUiC,GAEvB,IAAIQ,EAAsBlhB,OAAO0Q,KAAKiQ,GAAe/d,KAAI,SAASie,GAChE,OAAOpC,EAAUoC,GAAQ,IAAMF,EAAcE,MAG/CC,EAAgB,IAAMI,EAAoBV,KAAK,KAAO,SAEtDM,EAAgB,IAAMH,EAAcH,KAAK,KAAO,IAGlD,MAAO,aAAelC,EAAS8B,WAAWe,QAAQ,cAAeT,GAAc,KACvEI,EADD,+CAQTvhB,EAAOC,QAAU,SAAoBqgB,EAAIa,GACvC,IAAIU,EAGFA,EADEzC,EACI8B,EAAkBZ,EAAIa,GAEtBd,EAAqBC,GAG7B,IAAIwB,EAAO,IAAIC,KAAK,CAACF,GAAM,CAAE7T,KAAM,oBAC/BgU,EAAM1gB,OAAO0gB,KAAO1gB,OAAO2gB,WAAa3gB,OAAO4gB,QAAU5gB,OAAO6gB,MAChEC,EAAYJ,EAAIK,gBAAgBP,GAChCQ,EAAS,IAAIC,OAAOH,GAExB,OADAE,EAAOE,UAAYJ,EACZE,I,qBChNTtiB,EAAOC,QAAUwiB,EAEjB,IAAIhb,EAAiBhH,OAAO+G,UAAUC,eAEtC,SAASgb,IAGL,IAFA,IAAItb,EAAS,GAEJC,EAAI,EAAGA,EAAIC,UAAUvD,OAAQsD,IAAK,CACvC,IAAIE,EAASD,UAAUD,GAEvB,IAAK,IAAIG,KAAOD,EACRG,EAAeC,KAAKJ,EAAQC,KAC5BJ,EAAOI,GAAOD,EAAOC,IAKjC,OAAOJ,I,qBCjBX,SAASub,EAAOvC,GACd,OAAOA,EAAEyB,QAAQ,YAAa,IAIhC5hB,EAAOC,QAAU,SAAe0iB,GAI9B,IAHA,IAAIxC,EAAI,GACJ/Y,EAAI,EAEDA,EAAIC,UAAUvD,OAAQsD,IAC3B+Y,GAAKuC,EAAMC,EAAGvb,KAAOC,UAAUD,EAAI,IAAM,IAE3C,OAAO+Y,I,oCCVT,IAAI5X,EAAc,EAAQ,QAEtBC,EAAelI,EAAuBiI,GAEtCE,EAAe,EAAQ,QAEvBC,EAAgBpI,EAAuBmI,GAEvCma,EAAU,EAAQ,QAElBC,EAAWviB,EAAuBsiB,GAEtC,SAAStiB,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzFP,EAAOC,QAAU,CACf6iB,WAAYta,EAAa,WACzBua,YAAara,EAAc,WAC3Bc,OAAQqZ,EAAS,a,oCCPnBpiB,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEnB,SAAS5H,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,IAAIqF,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExC8U,EAAU,EAAQ,QAElBC,EAAW3iB,EAAuB0iB,GAElC5U,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAGnC8U,EAAoB,CAAC,UAAW,SAAU,QAAS,UAAW,SAM9DC,EAAkB,WAOpB,SAASA,EAAgBC,GACvB,IAAI1Z,EAAQ9E,KAEZ+D,EAAgB/D,KAAMue,GAEtBve,KAAKG,MAAQqe,EAAQC,KACrBze,KAAK0e,SAAWF,EAAQE,SAExB1e,KAAK2e,mBAAqB,EAC1B3e,KAAK4e,iBAAmB,KACxB5e,KAAK6e,OAAS,KACd7e,KAAK8e,yBAA2B,KAE5BN,EAAQO,QACV/e,KAAKgf,QAAUvV,EAAU,WAAWM,IAAI3I,KAAKqI,EAAU,WAAY,wBAErEzJ,KAAKgf,QAAQ,cAEb,IAAIC,EAAiB,WACnB,OAAOna,EAAMoa,uBAEXC,EAAiB,WACnB,OAAOra,EAAMsa,gBAEXC,EAAqB,WACvB,OAAOva,EAAMwa,gBAEXC,EAAuB,WACzB,OAAOza,EAAM0a,kBAGfxf,KAAKG,MAAM0F,GAAG,kBAAmB0Z,GACjCvf,KAAKG,MAAM0F,GAAG,UAAWsZ,GACzBnf,KAAKG,MAAM0F,GAAGyY,EAAmBe,GACjCrf,KAAKG,MAAM0F,GAAG,UAAWoZ,GAGzBjf,KAAK8S,QAAU,WACbhO,EAAMka,QAAQ,WACdla,EAAM3E,MAAMsf,IAAI,kBAAmBF,GACnCza,EAAM3E,MAAMsf,IAAI,UAAWN,GAC3Bra,EAAM3E,MAAMsf,IAAInB,EAAmBe,GACnCva,EAAM3E,MAAMsf,IAAI,UAAWR,GACvBna,EAAMga,0BACRvV,EAAe,WAAWmO,aAAa5S,EAAMga,0BAE/Cha,EAAMwa,gBA+VV,OArVAvc,EAAawb,EAAiB,CAAC,CAC7B5b,IAAK,sBACL5G,MAAO,WACLiE,KAAK0f,oBAED1f,KAAK8e,0BACPvV,EAAe,WAAWmO,aAAa1X,KAAK8e,0BAI9C9e,KAAK8e,yBAA2BvV,EAAe,WAAWoW,WAAW3f,KAAKkf,oBAAoB9d,KAAKpB,MAAO,OAU3G,CACD2C,IAAK,oBACL5G,MAAO,WACL,GAAIiE,KAAKG,MAAMyf,WAAa5f,KAAKwf,iBAG/B,OAFAxf,KAAK2e,mBAAqB,OAC1B3e,KAAK4e,iBAAmB5e,KAAKG,MAAMO,eAIrC,IAAIV,KAAKG,MAAM0f,WAAY7f,KAAKG,MAAMyf,UAAtC,CAIA,IAAIlf,EAAcV,KAAKG,MAAMO,cACzBof,EAAW9f,KAAKG,MAAM2f,WAE1B,GAAI9f,KAAK4e,mBAAqBle,KAAiBof,EAAS5gB,QAAUwB,EAAc2d,EAAS,WAAW0B,iBAAmBD,EAASE,IAAIF,EAAS5gB,OAAS,IAQpJ,OAAOc,KAAKof,eAGVpf,KAAK2e,oBAAsB,GAAKje,IAAgBV,KAAK4e,kBACvD5e,KAAK2e,qBACL3e,KAAKigB,YACIvf,IAAgBV,KAAK4e,iBAC9B5e,KAAK2e,sBAEL3e,KAAK2e,mBAAqB,EAC1B3e,KAAK4e,iBAAmBle,MAU3B,CACDiC,IAAK,eACL5G,MAAO,WACLiE,KAAK2e,mBAAqB,EAEtB3e,KAAK6e,SACP7e,KAAKgf,QAAQ,gBACbtH,aAAa1X,KAAK6e,SAGpB7e,KAAK6e,OAAS,OASf,CACDlc,IAAK,iBACL5G,MAAO,WACL,IAAI6jB,EAAU5f,KAAKG,MAAMyf,UACrBlB,EAAW1e,KAAK0e,WAChBhe,EAAcV,KAAKG,MAAMO,cACzBwf,OAASzjB,EAEb,GAAImjB,GAAW5f,KAAKmgB,qBAAqBzB,EAAUhe,GAAc,CAC/D,IAAI0f,EAAc1B,EAASsB,IAAItB,EAASxf,OAAS,GAGjDghB,EAASE,EAGX,GAAIR,GAAW5f,KAAKqgB,sBAAsB3B,EAAUhe,GAAc,CAChE,IAAI4f,EAAgB5B,EAAS6B,MAAM,GAInCL,EAASI,EAAgBjC,EAAS,WAAW0B,gBAG/C,MAAsB,qBAAXG,IACTlgB,KAAKgf,QAAQ,8CAAgDte,EAAhD,wBAA8F2d,EAAS,WAAWmC,eAAe9B,GAAY,gBAAoBwB,EAAS,KAEvLlgB,KAAKG,MAAMsgB,eAAeP,IACnB,KAWV,CACDvd,IAAK,WACL5G,MAAO,WACL,IAAIiE,KAAKof,eAAT,CAKA,IAAI1e,EAAcV,KAAKG,MAAMO,cACzBof,EAAW9f,KAAKG,MAAM2f,WACtBY,EAAerC,EAAS,WAAWsC,UAAUb,EAAUpf,GAU3D,OAAIggB,EAAaxhB,QAAUwB,EAAc,GAAKggB,EAAaV,IAAI,IAC7DhgB,KAAKsf,eACLtf,KAAKG,MAAMsgB,eAAe/f,GAE1BV,KAAKgf,QAAQ,cAAgBte,EAAhB,oCAA0EggB,EAAaH,MAAM,GAAK,OAASG,EAAaV,IAAI,GAA5H,yEAGbhgB,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,8BAP5C,KAoBD,CACDnL,IAAK,eACL5G,MAAO,WACL,IAAI2iB,EAAW1e,KAAK0e,WAChBhe,EAAcV,KAAKG,MAAMO,cAE7B,GAAIV,KAAKG,MAAMyf,WAAa5f,KAAKwf,iBAE/B,OAAO,EAGT,GAAIxf,KAAKG,MAAMyf,WAA6B,OAAhB5f,KAAK6e,OAE/B,OAAO,EAGT,GAAI7e,KAAKqgB,sBAAsB3B,EAAUhe,GAAc,CACrD,IAAIkgB,EAAYlC,EAASsB,IAAItB,EAASxf,OAAS,GAQ/C,OANAc,KAAKgf,QAAQ,mCAAqCte,EAArC,0CAAqGkgB,GAClH5gB,KAAKsf,eACLtf,KAAKG,MAAMsgB,eAAeG,GAG1B5gB,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,qBACnC,EAGT,IAAIgS,EAAW9f,KAAKG,MAAM2f,WACtBe,EAAYxC,EAAS,WAAWyC,cAAchB,EAAUpf,GAE5D,GAAIV,KAAK+gB,gBAAgBF,EAAWf,EAAUpf,GAU5C,OALAV,KAAKsf,eACLtf,KAAKG,MAAMsgB,eAAe/f,GAG1BV,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,yBACnC,EAIT,GAAI+S,EAAU3hB,OAAS,EAAG,CACxB,IAAI8hB,EAAaH,EAAUN,MAAM,GAAK7f,EAKtC,OAHAV,KAAKgf,QAAQ,cAAgBte,EAAc,uBAAyBsgB,EAAvD,gBAA4FH,EAAUN,MAAM,IAEzHvgB,KAAK6e,OAASc,WAAW3f,KAAKihB,YAAY7f,KAAKpB,MAAoB,IAAbghB,EAAmBtgB,IAClE,EAIT,OAAO,IAER,CACDiC,IAAK,uBACL5G,MAAO,SAA8B2iB,EAAUhe,GAC7C,QAAKge,EAASxf,QAKVwB,EAAcge,EAASsB,IAAItB,EAASxf,OAAS,GAAKmf,EAAS,WAAW0B,kBAM3E,CACDpd,IAAK,wBACL5G,MAAO,SAA+B2iB,EAAUhe,GAC9C,SAAIge,EAASxf,QAEbwf,EAAS6B,MAAM,GAAK,GAAK7f,EAAcge,EAAS6B,MAAM,GAAKlC,EAAS,WAAW0B,mBAMhF,CACDpd,IAAK,kBACL5G,MAAO,SAAyB8kB,EAAWf,EAAUpf,GACnD,GAAyB,IAArBmgB,EAAU3hB,OAAc,CAG1B,IAAIgiB,EAAMlhB,KAAKmhB,uBAAuBrB,EAAUpf,GAEhD,GAAIwgB,EAGF,OAFAlhB,KAAKgf,QAAQ,mCAAqCkC,EAAIX,MAAQ,OAASW,EAAIlB,IAA9D,6BAAyGtf,IAE/G,EAIX,OAAO,IASR,CACDiC,IAAK,cACL5G,MAAO,SAAqBqlB,GAC1B,IAAItB,EAAW9f,KAAKG,MAAM2f,WACtBpf,EAAcV,KAAKG,MAAMO,cACzBmgB,EAAYxC,EAAS,WAAWyC,cAAchB,EAAUpf,GAE5DV,KAAKsf,eAEoB,IAArBuB,EAAU3hB,QAAgBwB,IAAgB0gB,IAI9CphB,KAAKgf,QAAQ,eAAgB,eAAgBte,EAAa,yBAA0B0gB,EAAsB,mBAAoBP,EAAUN,MAAM,IAG9IvgB,KAAKG,MAAMsgB,eAAeI,EAAUN,MAAM,GAAKlC,EAAS,WAAWgD,mBAEnErhB,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,oBAE3C,CACDnL,IAAK,yBACL5G,MAAO,SAAgC+jB,EAAUpf,GAyB/C,IAFA,IAAI4gB,EAAOjD,EAAS,WAAWkD,SAASzB,GAE/Btd,EAAI,EAAGA,EAAI8e,EAAKpiB,OAAQsD,IAAK,CACpC,IAAI+d,EAAQe,EAAKf,MAAM/d,GACnBwd,EAAMsB,EAAKtB,IAAIxd,GAGnB,GAAI9B,EAAc6f,EAAQ,GAAK7f,EAAc6f,EAAQ,EACnD,MAAO,CACLA,MAAOA,EACPP,IAAKA,GAKX,OAAO,OASR,CACDrd,IAAK,UACL5G,MAAO,gBAGFwiB,EApZa,GAuZtBljB,EAAQ,WAAakjB,EACrBnjB,EAAOC,QAAUA,EAAQ,Y,kCC5bzBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEnB,SAAS5H,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,IAAIqF,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCkY,EAAe,EAAQ,QAEvBC,EAAgB/lB,EAAuB8lB,GASvCE,EAAuB,SAA8BC,GACvDA,EAAW9b,GAAG,QAAQ,SAAU+b,GAC9BrY,EAAe,WAAWsY,YAAY,CACpCC,OAAQ,OACRF,QAASA,OAIbD,EAAW9b,GAAG,QAAQ,SAAUiD,GAC9BS,EAAe,WAAWsY,YAAY,CAAEC,OAAQ,aAYhDC,EAAkB,WACpB,SAASA,EAAgBvD,GACvBza,EAAgB/D,KAAM+hB,GAEtB/hB,KAAKwe,QAAUA,GAAW,GAC1Bxe,KAAKgiB,OAkEP,OAnDAjf,EAAagf,EAAiB,CAAC,CAC7Bpf,IAAK,OACL5G,MAAO,WACDiE,KAAK2hB,YACP3hB,KAAK2hB,WAAW7O,UAElB9S,KAAK2hB,WAAa,IAAIF,EAAc,WAAWlmB,WAAWyE,KAAKwe,SAC/DkD,EAAqB1hB,KAAK2hB,cAS3B,CACDhf,IAAK,OACL5G,MAAO,SAAc+M,GAEnB,IAAI8Y,EAAU,IAAIK,WAAWnZ,EAAKA,KAAMA,EAAKoZ,WAAYpZ,EAAKqZ,YAE9DniB,KAAK2hB,WAAWrZ,KAAKsZ,KAOtB,CACDjf,IAAK,QACL5G,MAAO,WACLiE,KAAKgiB,SAON,CACDrf,IAAK,QACL5G,MAAO,WACLiE,KAAK2hB,WAAWS,UAEjB,CACDzf,IAAK,gBACL5G,MAAO,WACLiE,KAAK2hB,WAAWU,oBAIbN,EAvEa,GA0ElBO,EAAwB,SAA+Bne,GACzDA,EAAKwS,UAAY,SAAUD,GACC,SAAtBA,EAAM5N,KAAKgZ,QAAqBpL,EAAM5N,KAAK0V,QAC7Cxe,KAAKuiB,gBAAkB,IAAIR,EAAgBrL,EAAM5N,KAAK0V,UAInDxe,KAAKuiB,kBACRviB,KAAKuiB,gBAAkB,IAAIR,GAGzBrL,EAAM5N,MAAQ4N,EAAM5N,KAAKgZ,QAAgC,SAAtBpL,EAAM5N,KAAKgZ,QAC5C9hB,KAAKuiB,gBAAgB7L,EAAM5N,KAAKgZ,SAClC9hB,KAAKuiB,gBAAgB7L,EAAM5N,KAAKgZ,QAAQpL,EAAM5N,SAMtDzN,EAAQ,WAAa,SAAU8I,GAC7B,OAAO,IAAIme,EAAsBne,IAGnC/I,EAAOC,QAAUA,EAAQ,Y,qBCpJzBD,EAAOC,QAAU,k4G,qBCAjBD,EAAOC,QAAU,krI,oCCQjBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAaC,EAAIC,EAAKC,GAAO,IAAIC,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASoH,EAAIlmB,EAAWmmB,EAAKG,EAAWF,EAAKC,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA4O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAA/V,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BR,EAAKQ,EAAQP,EAAMnmB,EAAUomB,EAAME,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE5c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAI2e,EAAc,EAAQ,QAEtBC,EAAeznB,EAAuBwnB,GAEtC1Z,EAAW,EAAQ,QAEnB4Z,EAAc,EAAQ,QAEtBC,EAAe3nB,EAAuB0nB,GAEtC9Z,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAiBxCga,EAAiB,SAAwBC,EAAUC,EAAQld,GAC7D,IAAI9J,EAASgnB,EAAOxmB,QAEpBsJ,EAASA,GAAU,EAGnB,IAFA,IAAIpH,EAASmL,KAAKoZ,IAAIF,EAASrkB,OAAQskB,EAAOtkB,OAASoH,GAE9C9D,EAAI8D,EAAQ9D,EAAItD,EAAQsD,IAC/BhG,EAAOgG,EAAI8D,IAAU,EAAIkD,EAASka,cAAcH,EAAS/gB,GAAIhG,EAAOgG,EAAI8D,IAE1E,OAAO9J,GAGTnB,EAAQioB,eAAiBA,EACzB,IAAIK,EAAqB,SAA4B/B,EAASgC,GACvDhC,EAAQiC,cACXjC,EAAQiC,aAAc,EAAIV,EAAa,YAAYS,EAAShC,EAAQ7a,MAElE6a,EAAQjf,MAAQif,EAAQjf,IAAIkhB,cAC9BjC,EAAQjf,IAAIkhB,aAAc,EAAIV,EAAa,YAAYS,EAAShC,EAAQjf,IAAIoE,MAE1E6a,EAAQnjB,MAAQmjB,EAAQnjB,IAAIolB,cAC9BjC,EAAQnjB,IAAIolB,aAAc,EAAIV,EAAa,YAAYS,EAAShC,EAAQnjB,IAAIsI,OAIhF1L,EAAQsoB,mBAAqBA,EAa7B,IAAIG,EAAe,SAAsB3lB,EAAQoJ,GAC/C,IAAI/K,GAAS,EAAIgN,EAASka,cAAcvlB,EAAQ,IAC5CO,EAAWlC,EAAOgC,UAAUK,QAAO,SAAUyc,GAC/C,OAAOA,EAAEvU,MAAQQ,EAAMR,OACtB,GAEH,IAAKrI,EACH,OAAO,KAKT,GAAIA,EAASkH,UAAY2B,EAAM3B,UAAYlH,EAASkH,SAAS1G,SAAWqI,EAAM3B,SAAS1G,QAAUR,EAASgI,gBAAkBa,EAAMb,cAChI,OAAO,KAGT,IAAIqd,GAAiB,EAAIva,EAASka,cAAchlB,EAAU6I,GAGtD7I,EAASkH,WACXme,EAAene,SAAW0d,EAAe5kB,EAASkH,SAAU2B,EAAM3B,SAAU2B,EAAMb,cAAgBhI,EAASgI,gBAI7Gqd,EAAene,SAASmF,SAAQ,SAAU6W,GACxC+B,EAAmB/B,EAASmC,EAAeF,gBAM7C,IAAK,IAAIrhB,EAAI,EAAGA,EAAIhG,EAAOgC,UAAUU,OAAQsD,IACvChG,EAAOgC,UAAUgE,GAAGuE,MAAQQ,EAAMR,MACpCvK,EAAOgC,UAAUgE,GAAKuhB,GAK1B,OAFAvnB,EAAOgC,UAAU+I,EAAMR,KAAOgd,EAEvBvnB,GAGTnB,EAAQyoB,aAAeA,EACvB,IAAIE,EAAsB,SAA6B7lB,GAErD,IAAIqE,EAAIrE,EAAOK,UAAUU,OAEzB,MAAOsD,IAAK,CACV,IAAI9D,EAAWP,EAAOK,UAAUgE,GAEhCrE,EAAOK,UAAUE,EAASqI,KAAOrI,EACjCA,EAASmlB,aAAc,EAAIV,EAAa,YAAYhlB,EAAO4I,IAAKrI,EAASqI,KAEpErI,EAASjB,aAMZiB,EAASjB,WAAa,GAEtB+L,EAASO,IAAIC,KAAK,yEAKxB3O,EAAQ2oB,oBAAsBA,EAC9B,IAAIC,EAAwB,SAA+B9lB,GACzD,CAAC,QAAS,aAAa4M,SAAQ,SAAUmZ,GACvC,IAAK,IAAIC,KAAYhmB,EAAOmJ,YAAY4c,GACtC,IAAK,IAAIE,KAAYjmB,EAAOmJ,YAAY4c,GAAWC,GAAW,CAC5D,IAAIE,EAAkBlmB,EAAOmJ,YAAY4c,GAAWC,GAAUC,GAE1DC,EAAgBtd,MAClBsd,EAAgBR,aAAc,EAAIV,EAAa,YAAYhlB,EAAO4I,IAAKsd,EAAgBtd,WAOjG1L,EAAQ4oB,sBAAwBA,EAWhC,IAAIK,EAAe,SAAsB/c,EAAOic,GAC9C,IAAIe,EAAchd,EAAM3B,SAAS2B,EAAM3B,SAAS1G,OAAS,GACrDslB,OAAQ/nB,EASZ,OANE+nB,EADEhB,GAAUe,GAAeA,EAAY5jB,SACR,IAAvB4jB,EAAY5jB,SAImB,KAA9B4G,EAAMmB,gBAAkB,IAE5B8b,GAGTnpB,EAAQipB,aAAeA,EAcvB,IAAIG,EAAiB,SAAWC,GAG9B,SAASD,EAAeE,EAAQC,EAAKpG,GACnC,IAAI1Z,EAAQ9E,KAaZ,GAXA+D,EAAgB/D,KAAMykB,GAEtBjC,EAAK3mB,OAAOkJ,eAAe0f,EAAe7hB,WAAY,cAAe5C,MAAM8C,KAAK9C,MAEhFwe,EAAUA,GAAW,GAErBxe,KAAK2kB,OAASA,EACd3kB,KAAK6kB,KAAOD,EACZ5kB,KAAK8kB,kBAAoBtG,EAAQsG,gBACjC9kB,KAAK+kB,0BAA4BvG,EAAQuG,yBAEpC/kB,KAAK2kB,OACR,MAAM,IAAIpkB,MAAM,wCAIlBP,KAAKglB,MAAQ,eAGbhlB,KAAK6F,GAAG,sBAAsB,WACR,kBAAhBf,EAAMkgB,QAKVlgB,EAAMkgB,MAAQ,wBAEdlgB,EAAMmgB,QAAUngB,EAAM+f,KAAKK,IAAI,CAC7Bne,KAAK,EAAIoc,EAAa,YAAYre,EAAM3G,OAAO4I,IAAKjC,EAAMyC,QAAQR,KAClE+d,gBAAiBhgB,EAAMggB,kBACtB,SAAUK,EAAOC,GAElB,GAAKtgB,EAAMmgB,QAIX,OAAIE,EACKrgB,EAAMugB,qBAAqBvgB,EAAMmgB,QAASngB,EAAMyC,QAAQR,IAAK,sBAGtEjC,EAAMwgB,aAAaxgB,EAAMmgB,QAASngB,EAAMyC,QAAQR,YAkXtD,OA/ZA1C,EAAUogB,EAAgBC,GAkD1B3hB,EAAa0hB,EAAgB,CAAC,CAC5B9hB,IAAK,uBACL5G,MAAO,SAA8BmpB,EAAKnZ,EAAKwZ,GAE7CvlB,KAAKilB,QAAU,KAEXM,IACFvlB,KAAKglB,MAAQO,GAGfvlB,KAAKmlB,MAAQ,CACXzmB,SAAUsB,KAAK7B,OAAOK,UAAUuN,GAChCyZ,OAAQN,EAAIM,OACZpf,QAAS,sCAAwC2F,EACjD0Z,aAAcP,EAAIO,aAClBC,KAAMR,EAAIM,QAAU,IAAM,EAAI,GAGhCxlB,KAAKmG,QAAQ,WAKd,CACDxD,IAAK,eACL5G,MAAO,SAAsBmpB,EAAKnZ,GAChC,IAAI4Z,EAAS3lB,KAGbA,KAAKilB,QAAU,KACfjlB,KAAKglB,MAAQ,gBAEb,IAAIY,EAAS,IAAIvC,EAAa,WAAWze,OAEzCghB,EAAOtd,KAAK4c,EAAIO,cAChBG,EAAO5F,MACP4F,EAAOngB,SAASsB,IAAMgF,EAGtB6Z,EAAOngB,SAAShI,WAAamoB,EAAOngB,SAAShI,YAAc,GAG3D,IAAI+lB,EAASM,EAAa9jB,KAAK7B,OAAQynB,EAAOngB,UAE9CzF,KAAK0I,eAAiBkd,EAAOngB,SAASiD,eAElC8a,GACFxjB,KAAK7B,OAASqlB,EACdxjB,KAAK6lB,OAAS7lB,KAAK7B,OAAOK,UAAUonB,EAAOngB,SAASsB,MAEpD/G,KAAKmG,QAAQ,qBAIVnG,KAAKuH,QAAQf,UAChB+C,EAAe,WAAWmO,aAAa1X,KAAK8lB,oBAC5C9lB,KAAK8lB,mBAAqBvc,EAAe,WAAWoW,YAAW,WAC7DgG,EAAOxf,QAAQ,wBACdme,EAAatkB,KAAKuH,UAAWic,KAGlCxjB,KAAKmG,QAAQ,oBAMd,CACDxD,IAAK,UACL5G,MAAO,WACLiE,KAAK+lB,cACLxc,EAAe,WAAWmO,aAAa1X,KAAK8lB,sBAE7C,CACDnjB,IAAK,cACL5G,MAAO,WACL,GAAIiE,KAAKilB,QAAS,CAChB,IAAIe,EAAahmB,KAAKilB,QAEtBjlB,KAAKilB,QAAU,KACfe,EAAWC,mBAAqB,KAChCD,EAAWE,WAgBd,CACDvjB,IAAK,QACL5G,MAAO,SAAe2C,GACpB,IAAIynB,EAASnmB,KAGb,IAAKtB,EACH,OAAOsB,KAAK6lB,OAId,GAAmB,iBAAf7lB,KAAKglB,MACP,MAAM,IAAIzkB,MAAM,qCAAuCP,KAAKglB,OAG9D,IAAIO,EAAgBvlB,KAAKglB,MAIzB,GAAwB,kBAAbtmB,EAAuB,CAChC,IAAKsB,KAAK7B,OAAOK,UAAUE,GACzB,MAAM,IAAI6B,MAAM,yBAA2B7B,GAE7CA,EAAWsB,KAAK7B,OAAOK,UAAUE,GAGnC,IAAI0nB,GAAepmB,KAAK6lB,QAAUnnB,EAASqI,MAAQ/G,KAAK6lB,OAAO9e,IAG/D,GAAI/G,KAAK7B,OAAOK,UAAUE,EAASqI,KAAKP,QAetC,OAbIxG,KAAKilB,UACPjlB,KAAKilB,QAAQgB,mBAAqB,KAClCjmB,KAAKilB,QAAQiB,QACblmB,KAAKilB,QAAU,MAEjBjlB,KAAKglB,MAAQ,gBACbhlB,KAAK6lB,OAASnnB,OAGV0nB,IACFpmB,KAAKmG,QAAQ,iBACbnG,KAAKmG,QAAQ,iBAMjB,GAAKigB,EAAL,CAOA,GAHApmB,KAAKglB,MAAQ,kBAGThlB,KAAKilB,QAAS,CAChB,GAAIvmB,EAASmlB,cAAgB7jB,KAAKilB,QAAQlZ,IAGxC,OAEF/L,KAAKilB,QAAQgB,mBAAqB,KAClCjmB,KAAKilB,QAAQiB,QACblmB,KAAKilB,QAAU,KAIbjlB,KAAK6lB,QACP7lB,KAAKmG,QAAQ,iBAGfnG,KAAKilB,QAAUjlB,KAAK6kB,KAAKK,IAAI,CAC3Bne,IAAKrI,EAASmlB,YACdiB,gBAAiB9kB,KAAK8kB,kBACrB,SAAUK,EAAOC,GAElB,GAAKe,EAAOlB,QAAZ,CAMA,GAFAvmB,EAASmlB,YAAcsC,EAAOE,wBAAwB3nB,EAASmlB,YAAauB,GAExED,EACF,OAAOgB,EAAOd,qBAAqBc,EAAOlB,QAASvmB,EAASqI,IAAKwe,GAGnEY,EAAOb,aAAaF,EAAK1mB,EAASqI,KAGZ,gBAAlBwe,EACFY,EAAOhgB,QAAQ,kBAEfggB,EAAOhgB,QAAQ,sBAgBpB,CACDxD,IAAK,0BACL5G,MAAO,SAAiCgQ,EAAKqZ,GAC3C,OAAIplB,KAAK+kB,yBAA2BK,EAAIkB,aAAeva,IAAQqZ,EAAIkB,YAC1DlB,EAAIkB,YAGNva,IAMR,CACDpJ,IAAK,QACL5G,MAAO,WACLiE,KAAK+lB,cACLxc,EAAe,WAAWmO,aAAa1X,KAAK8lB,oBACzB,iBAAf9lB,KAAKglB,QAGPhlB,KAAKumB,SAAU,GAGE,oBAAfvmB,KAAKglB,MAIHhlB,KAAK6lB,OACP7lB,KAAKglB,MAAQ,gBAEbhlB,KAAKglB,MAAQ,cAES,0BAAfhlB,KAAKglB,QACdhlB,KAAKglB,MAAQ,mBAOhB,CACDriB,IAAK,OACL5G,MAAO,SAAcyqB,GACnB,IAAIC,EAASzmB,KAEbuJ,EAAe,WAAWmO,aAAa1X,KAAK8lB,oBAE5C,IAAIve,EAAQvH,KAAKuH,QAEjB,GAAIif,EAAJ,CACE,IAAIhC,EAAQjd,EAAQA,EAAMmB,eAAiB,EAAI,IAAO,IAEtD1I,KAAK8lB,mBAAqBvc,EAAe,WAAWoW,YAAW,WAC7D,OAAO8G,EAAOC,SACblC,QAIAxkB,KAAKumB,QAKNhf,IAAUA,EAAMf,QAClBxG,KAAKmG,QAAQ,sBAEbnG,KAAKmG,QAAQ,kBAPbnG,KAAKugB,UAcR,CACD5d,IAAK,QACL5G,MAAO,WACL,IAAI4qB,EAAS3mB,KAEbA,KAAKumB,SAAU,EAGfvmB,KAAKilB,QAAUjlB,KAAK6kB,KAAKK,IAAI,CAC3Bne,IAAK/G,KAAK2kB,OACVG,gBAAiB9kB,KAAK8kB,kBACrB,SAAUK,EAAOC,GAElB,GAAKuB,EAAO1B,QAAZ,CAOA,GAFA0B,EAAO1B,QAAU,KAEbE,EAWF,OAVAwB,EAAOxB,MAAQ,CACbK,OAAQJ,EAAII,OACZpf,QAAS,sCAAwCugB,EAAOhC,OACxDc,aAAcL,EAAIK,aAElBC,KAAM,GAEa,iBAAjBiB,EAAO3B,QACT2B,EAAOJ,SAAU,GAEZI,EAAOxgB,QAAQ,SAGxB,IAAIyf,EAAS,IAAIvC,EAAa,WAAWze,OAYzC,OAVAghB,EAAOtd,KAAK8c,EAAIK,cAChBG,EAAO5F,MAEP2G,EAAO3B,MAAQ,cAEf2B,EAAOhC,OAASgC,EAAON,wBAAwBM,EAAOhC,OAAQS,GAE9DQ,EAAOngB,SAASsB,IAAM4f,EAAOhC,OAGzBiB,EAAOngB,SAASjH,WAClBmoB,EAAOxoB,OAASynB,EAAOngB,SAEvBue,EAAoB2C,EAAOxoB,QAC3B8lB,EAAsB0C,EAAOxoB,QAE7BwoB,EAAOxgB,QAAQ,uBACVwgB,EAAO1B,SAGV0B,EAAOpf,MAAMqe,EAAOngB,SAASjH,UAAU,OAO3CmoB,EAAOxoB,OAAS,CACdmJ,YAAa,CACX,MAAS,GACT,MAAS,GACT,kBAAmB,GACnB,UAAa,IAEfP,IAAKwC,EAAe,WAAWqd,SAASC,KACxCroB,UAAW,CAAC,CACVuI,IAAK4f,EAAOhC,OACZd,YAAa8C,EAAOhC,OAGpBlnB,WAAY,MAGhBkpB,EAAOxoB,OAAOK,UAAUmoB,EAAOhC,QAAUgC,EAAOxoB,OAAOK,UAAU,GACjEmoB,EAAOrB,aAAaF,EAAKuB,EAAOhC,QACzBgC,EAAOxgB,QAAQ,2BAKrBse,EAhaY,CAialBjb,EAASsd,aAEZzrB,EAAQ,WAAaopB,G,qBCnnBrBrpB,EAAOC,QAAU,0zH,oCCEjB,IAAI0rB,EAMJA,EAAY,SAASC,GACnB,IAEEC,EAAwBD,EAAY7E,WAGpC+E,EAAc,EAGdC,EAAuB,EAGzBnnB,KAAKd,OAAS,WACZ,OAAQ,EAAI+nB,GAIdjnB,KAAKonB,cAAgB,WACnB,OAAQ,EAAIH,EAAyBE,GAIvCnnB,KAAKqnB,SAAW,WACd,IACE/O,EAAW0O,EAAY7E,WAAa8E,EACpCK,EAAe,IAAIrF,WAAW,GAC9BsF,EAAiBld,KAAKoZ,IAAI,EAAGwD,GAE/B,GAAuB,IAAnBM,EACF,MAAM,IAAIhnB,MAAM,sBAGlB+mB,EAAaE,IAAIR,EAAYS,SAASnP,EACAA,EAAWiP,IACjDL,EAAc,IAAIQ,SAASJ,EAAaK,QAAQC,UAAU,GAG1DT,EAAwC,EAAjBI,EACvBN,GAAyBM,GAI3BvnB,KAAK6nB,SAAW,SAASlT,GACvB,IAAImT,EACAX,EAAuBxS,GACzBuS,IAAyBvS,EACzBwS,GAAwBxS,IAExBA,GAASwS,EACTW,EAAYzd,KAAK6F,MAAMyE,EAAQ,GAE/BA,GAAsB,EAAZmT,EACVb,GAAyBa,EAEzB9nB,KAAKqnB,WAELH,IAAgBvS,EAChBwS,GAAwBxS,IAK5B3U,KAAK+nB,SAAW,SAASC,GACvB,IACEC,EAAO5d,KAAKoZ,IAAI0D,EAAsBa,GACtCE,EAAOhB,IAAiB,GAAKe,EAU/B,OARAd,GAAwBc,EACpBd,EAAuB,EACzBD,IAAgBe,EACPhB,EAAwB,GACjCjnB,KAAKqnB,WAGPY,EAAOD,EAAOC,EACVA,EAAO,EACFC,GAAQD,EAAOjoB,KAAK+nB,SAASE,GAE/BC,GAITloB,KAAKmoB,iBAAmB,WACtB,IAAIC,EACJ,IAAKA,EAAmB,EAAGA,EAAmBjB,IAAwBiB,EACpE,GAA0D,KAArDlB,EAAe,aAAekB,GAIjC,OAFAlB,IAAgBkB,EAChBjB,GAAwBiB,EACjBA,EAMX,OADApoB,KAAKqnB,WACEe,EAAmBpoB,KAAKmoB,oBAIjCnoB,KAAKqoB,sBAAwB,WAC3BroB,KAAK6nB,SAAS,EAAI7nB,KAAKmoB,qBAIzBnoB,KAAKsoB,cAAgB,WACnBtoB,KAAK6nB,SAAS,EAAI7nB,KAAKmoB,qBAIzBnoB,KAAKuoB,sBAAwB,WAC3B,IAAIC,EAAMxoB,KAAKmoB,mBACf,OAAOnoB,KAAK+nB,SAASS,EAAM,GAAK,GAIlCxoB,KAAKyoB,cAAgB,WACnB,IAAIP,EAAOloB,KAAKuoB,wBAChB,OAAI,EAAOL,EAED,EAAIA,IAAU,GAEhB,GAAKA,IAAS,IAKxBloB,KAAK0oB,YAAc,WACjB,OAA4B,IAArB1oB,KAAK+nB,SAAS,IAIvB/nB,KAAK2oB,iBAAmB,WACtB,OAAO3oB,KAAK+nB,SAAS,IAGvB/nB,KAAKqnB,YAGPjsB,EAAOC,QAAU0rB,G,oCC7IjBlrB,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAaC,EAAIC,EAAKC,GAAO,IAAIC,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASoH,EAAIlmB,EAAWmmB,EAAKG,EAAWF,EAAKC,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA4O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAA/V,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BR,EAAKQ,EAAQP,EAAMnmB,EAAUomB,EAAME,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE5c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAI+E,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCE,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCgY,EAAe,EAAQ,QAEvBC,EAAgB/lB,EAAuB8lB,GAEvCoH,EAAuB,EAAQ,QAE/BC,EAAwBntB,EAAuBktB,GAE/CE,EAA+B,EAAQ,QAEvCC,EAAgCrtB,EAAuBotB,GAEvDE,EAAoB,EAAQ,QAE5BC,EAAyB,EAAQ,QAEjCC,EAA0BxtB,EAAuButB,GAEjDE,EAAc,EAAQ,QAEtBC,EAAe1tB,EAAuBytB,GAEtCE,EAAkB,EAAQ,QAE1BC,EAAmB5tB,EAAuB2tB,GAE1CE,EAA6B,WAC/B,IAAI/sB,OAASC,EAEb,IACED,EAAwB,OACxB,MAAO6a,IAIT,OAAO7a,GAULgtB,EAAe,SAAsBC,GAGvClgB,EAAe,WAAWoW,WAAW8J,EAAMH,EAAiB,WAAWI,sBAUrEC,EAAuB,WACzB,OAAOtf,KAAK2R,SAASC,SAAS,IAAIjf,MAAM,EAAG,IAYzC4sB,EAAkB,SAAyBhZ,EAAKiZ,IAC5B,kBAAXA,GAAuBA,EAAS,KACzCA,EAAS,GAGX,IAAIC,EAAQzf,KAAK0R,IAAI,GAAI8N,GAEzB,OAAOxf,KAAK4G,MAAML,EAAMkZ,GAASA,GAY/BC,EAAoB,SAAWC,GAGjC,SAASD,EAAkBE,GACzB,IAAInlB,EAAQ9E,KAEZ+D,EAAgB/D,KAAM+pB,GAEtBvH,EAAK3mB,OAAOkJ,eAAeglB,EAAkBnnB,WAAY,cAAe5C,MAAM8C,KAAK9C,MACnF,IAAIkqB,OAAgBztB,EAIpBuD,KAAKmqB,WAAab,EAAiB,WAAWc,gBAG9CpqB,KAAKqqB,QAAU,GAGfrqB,KAAKsqB,YAAc,EAKnBtqB,KAAKuqB,eAAiBC,IAEtBxqB,KAAK0L,aAAeue,EAEpBjqB,KAAKyqB,gBAAkBD,IACvBxqB,KAAK0qB,gBAAkBF,IAKvBxqB,KAAK2qB,UAAW,EAChB3qB,KAAK4qB,iBAAmB,EAExBV,EAAgB3gB,EAAe,WAAWshB,KAAKC,OAAOC,aAAaC,MAAM,KAAMC,MAAMroB,UAAU5F,MAAM8F,KAAK2e,EAAc,WAAWyJ,kBASnI,IAAIC,EAAenrB,KAAK0L,aAAa0f,QAAQvhB,KAAKmT,QAAQ,gBAAiB,KAE3Ehd,KAAKqrB,wBAA0B,0BAA4BF,EAAexB,IAC1E3pB,KAAKsrB,sBAAwB,wBAA0BH,EAAexB,IAEtEpgB,EAAe,WAAWvJ,KAAKqrB,yBAA2B,WAExD,cADO9hB,EAAe,WAAWzE,EAAMumB,yBAChCnB,GAGTlqB,KAAK0L,aAAa6f,OAAOC,qBAAqBxrB,KAAKqrB,yBAEnDrrB,KAAKyrB,aAAc,EAAIrC,EAAa,YAAYF,EAAwB,WAAYK,KACpFvpB,KAAKyrB,YAAY5J,YAAY,CAAEC,OAAQ,OAAQtD,QAAS,KACxDxe,KAAKyrB,YAAY9U,UAAY,SAAUD,GACX,SAAtBA,EAAM5N,KAAKgZ,QACbhd,EAAM4mB,eAAehV,EAAM5N,KAAK8Y,UAIpC5hB,KAAK2rB,IAAI,aAAa,WACpB7mB,EAAM4G,aAAavL,MAAMgG,QAAQ,qBAGnCtK,OAAOC,eAAekE,KAAM,kBAAmB,CAC7C8J,IAAK,WACH,OAAO9J,KAAK4qB,kBAEdpD,IAAK,SAAarY,GACG,kBAARA,GAAoBA,GAAO,IACpCnP,KAAK4qB,iBAAmBzb,EAExBnP,KAAK0L,aAAa6f,OAAOK,oBAGzB5rB,KAAKuqB,eAAiBC,IACtBxqB,KAAKyqB,gBAAkBD,IACvBxqB,KAAK0qB,gBAAkBF,IAEvBxqB,KAAKyrB,YAAY5J,YAAY,CAAEC,OAAQ,cAK7CjmB,OAAOC,eAAekE,KAAM,WAAY,CACtC8J,IAAK,WACH,IAAK9J,KAAK0L,eAAiB1L,KAAK0L,aAAa6f,UAAY,oBAAqBvrB,KAAK0L,aAAa6f,QAC9F,OAAO9hB,EAAU,WAAWoiB,kBAG9B,IAAI/L,EAAW9f,KAAK0L,aAAa6f,OAAOO,gBAAgB,YAMxD,OAJIhM,GAAYA,EAAS5gB,SACvB4gB,EAAS,GAAG,GAAK8J,EAAgB9J,EAAS,GAAG,GAAI,GACjDA,EAAS,GAAG,GAAK8J,EAAgB9J,EAAS,GAAG,GAAI,IAE5CrW,EAAU,WAAWsiB,iBAAiBjM,MAMjD9f,KAAK0L,aAAa0f,QAAQvlB,GAAG,UAAU,WAErC,IADA,EAAIgjB,EAAsB,YAAY,EAAGte,IAAUzF,EAAMkH,gBACrDlH,EAAMqG,kBACR,IAAK,IAAIF,KAASnG,EAAMqG,mBACtB,EAAI0d,EAAsB,YAAY,EAAGte,IAAUzF,EAAMqG,kBAAkBF,OAKjF,IAAI+gB,EAAahsB,KAAKisB,YAAY7qB,KAAKpB,MAIvCA,KAAK0L,aAAa0f,QAAQjrB,MAAM0F,GAAG,YAAammB,GAEhDhsB,KAAK0L,aAAa0f,QAAQjrB,MAAMykB,IAAI/e,GAAG,WAAW,WAChDf,EAAM2mB,YAAYS,YAClBpnB,EAAM4G,aAAa0f,QAAQjrB,MAAMsf,IAAI,YAAauM,MAgYtD,OA5fA3nB,EAAU0lB,EAAmBC,GAwI7BjnB,EAAagnB,EAAmB,CAAC,CAC/BpnB,IAAK,eACL5G,MAAO,SAAsBowB,GAC3B,IAAIhH,OAAQ1oB,EAEZ,GAAIuD,KAAK2qB,SAIP,MAHAxF,EAAQ,IAAI5kB,MAAM,yEAClB4kB,EAAMrX,KAAO,oBACbqX,EAAMO,KAAO,GACPP,EAERnlB,KAAK2qB,UAAW,EAChB3qB,KAAK0L,aAAa8L,WAAa,OAC/BxX,KAAKmG,QAAQ,CAAEiD,KAAM,WAErBpJ,KAAKyrB,YAAY5J,YAAY,CAC3BC,OAAQ,OACRhZ,KAAMqjB,EAAMxE,OACZzF,WAAYiK,EAAMjK,WAClBC,WAAYgK,EAAMhK,YACjB,CAACgK,EAAMxE,SACV3nB,KAAKyrB,YAAY5J,YAAY,CAAEC,OAAQ,YAQxC,CACDnf,IAAK,QACL5G,MAAO,WACLiE,KAAKqqB,QAAU,GACfrqB,KAAKsqB,YAAc,EACnBtqB,KAAK0L,aAAa6f,OAAOa,YAGrBpsB,KAAK2qB,WACP3qB,KAAK2qB,UAAW,EAChB3qB,KAAKmG,QAAQ,CAAEiD,KAAM,iBAaxB,CACDzG,IAAK,SACL5G,MAAO,SAAgBwkB,EAAOP,GAE5B,IADA,EAAI6I,EAAsB,YAAYtI,EAAOP,EAAKhgB,KAAKgM,gBACnDhM,KAAKmL,kBACP,IAAK,IAAIF,KAASjL,KAAKmL,mBACrB,EAAI0d,EAAsB,YAAYtI,EAAOP,EAAKhgB,KAAKmL,kBAAkBF,IAG7EjL,KAAKmG,QAAQ,CAAEiD,KAAM,WACrBpJ,KAAKmG,QAAQ,CAAEiD,KAAM,gBAStB,CACDzG,IAAK,iBACL5G,MAAO,SAAwB6lB,GAC7B,IAAI+D,EAAS3lB,MAGb,EAAI+oB,EAA8B,YAAY/oB,KAAMA,KAAK0L,aAAckW,IACvE,EAAIoH,EAAkBxe,kBAAkBxK,KAAM4hB,EAAQyK,SAAUzK,EAAQjW,UAGxE6d,GAAa,WACX,IAAI8C,EAAW3G,EAAO4G,mBAAmB3K,GAEX,IAA1B+D,EAAO0E,QAAQnrB,QACjBsqB,EAAa7D,EAAO6G,eAAeprB,KAAKukB,IAGtC2G,IACF3G,EAAO0E,QAAQ/hB,KAAKgkB,GACpB3G,EAAO2E,aAAegC,EAASnK,iBAUpC,CACDxf,IAAK,iBACL5G,MAAO,WACL,IAAIoqB,EAASnmB,KAETysB,EAAYnD,EAAiB,WAAWc,gBAE5C,GAAKpqB,KAAKqqB,QAAQnrB,OAAlB,CAUA,IAAImK,EAAQrJ,KAAKqqB,QAAQ,GAAG5C,SAAS,EAAGgF,GAGpCpjB,EAAM8Y,WAAasK,GAAazsB,KAAKqqB,QAAQ,GAAGlI,aAAesK,EACjEzsB,KAAKqqB,QAAQqC,QAEb1sB,KAAKqqB,QAAQ,GAAKrqB,KAAKqqB,QAAQ,GAAG5C,SAASgF,GAG7CzsB,KAAKsqB,aAAejhB,EAAM8Y,WAM1B,IAHA,IAAIwK,EAAS,GACTztB,EAASmK,EAAM8Y,WAEV3f,EAAI,EAAGA,EAAItD,EAAQsD,IAC1BmqB,EAAOrkB,KAAKwiB,OAAOC,aAAa1hB,EAAM7G,KAExC,IAAIoqB,EAASrjB,EAAe,WAAWshB,KAAK8B,EAAOtQ,KAAK,KAExD9S,EAAe,WAAWvJ,KAAKsrB,uBAAyB,WAKtD,OAFA9B,EAAarD,EAAOqG,eAAeprB,KAAK+kB,WACjC5c,EAAe,WAAW4c,EAAOmF,uBACjCsB,GAIT5sB,KAAK0L,aAAa6f,OAAOC,qBAAqBxrB,KAAKsrB,4BAtC3B,IAAlBtrB,KAAK2qB,WACP3qB,KAAK2qB,UAAW,EAChB3qB,KAAKmG,QAAQ,CAAEiD,KAAM,iBAgD1B,CACDzG,IAAK,qBACL5G,MAAO,SAA4B8wB,GACjC,IAAIC,EAAoB,EACpBrO,EAAOze,KAAK0L,aAAavL,MACzB4sB,EAAiB,EACjBnL,OAAUnlB,EACVuwB,EAAYH,EAAYI,KAAKD,UAC7BE,EAAYL,EAAYI,KAAKC,UAIjC,GAAI9iB,MAAMpK,KAAKuqB,kBAAoByC,EAAU9tB,QAAUguB,EAAUhuB,QAAS,CAIxE,IAAIiuB,EAAgBH,EAAU,IAAM,CAAEI,IAAK7iB,KACvC8iB,EAAgBH,EAAU,IAAM,CAAEE,IAAK7iB,KAE3CvK,KAAKuqB,eAAiBlgB,KAAKoZ,IAAI4J,EAAcD,IAAKD,EAAcC,KAG9D3O,EAAKmB,YAGP5f,KAAK0qB,gBAAkBF,IACvBxqB,KAAKyqB,gBAAkBD,KAGrBpgB,MAAMpK,KAAK0qB,kBACTjM,EAAKqB,WAAW5gB,SAClB6tB,EAAiBtO,EAAKqB,WAAWE,IAAI,GAAKhgB,KAAKsL,iBAI7CmT,EAAKmB,YACPmN,EAAiB1iB,KAAKijB,IAAIP,EAAgBtO,EAAK/d,cAAgBV,KAAKsL,kBAItEyhB,GAAkB,IAClBA,GAAkB/sB,KAAKuqB,gBAOvBwC,EAAiB/sB,KAAK0qB,gBAAkB,GAI1C,IAAI6C,EAAeP,EAAU9tB,OAI7B,GAAIquB,GAAgBP,EAAUO,EAAe,GAAGH,KAAOL,EAAgB,CAGrE,QAASQ,EAAc,CACrB,IAAIC,EAAaR,EAAUO,GAE3B,KAAIC,EAAWJ,IAAML,KAMjBS,EAAWC,UAAYD,EAAWE,aACpC,MASJ,MAAOH,EAAc,CACnB,IAAII,EAAUX,EAAUO,EAAe,GAEvC,IAAKI,EAAQD,YACX,MAGFH,KAIJ,IAAIK,EAAoBZ,EAAUhwB,MAAMuwB,GAEpCM,OAAiBpxB,EAGnBoxB,EADEzjB,MAAMpK,KAAKyqB,iBACIsC,EAOA/sB,KAAKyqB,gBAAkB,GAGtCmD,EAAkB1uB,SAIpB2uB,EAAiBxjB,KAAKoZ,IAAIoK,EAAgBD,EAAkB,GAAGR,MAIjEG,EAAe,EAEf,MAAOA,EAAeL,EAAUhuB,OAAQ,CACtC,GAAIguB,EAAUK,GAAcH,KAAOS,EACjC,MAGFN,IAGF,IAAIO,EAAoBZ,EAAUlwB,MAAMuwB,GAGpCO,EAAkB5uB,SACpBc,KAAKyqB,gBAAkBqD,EAAkBA,EAAkB5uB,OAAS,GAAGkuB,KAErEQ,EAAkB1uB,SACpBc,KAAK0qB,gBAAkBkD,EAAkBA,EAAkB1uB,OAAS,GAAGkuB,KAGzE,IAAIH,EAAOjtB,KAAK+tB,gBAAgBH,EAAmBE,GAEnD,GAAoB,IAAhBb,EAAK/tB,OAAT,CAOA,GAAI+tB,EAAK,GAAGG,IAAML,GAAkBtO,EAAKmB,UAAW,CAClD,IAAIoO,EAAc,EAAI,GAClBttB,EAAc+d,EAAK/d,cACnButB,GAAQlB,EAAiBE,EAAK,GAAGG,KAAO,IACxCc,EAAextB,EAAcutB,EAE7BC,EAAeF,IACjBE,EAAe,GAGjB,IACEluB,KAAK0L,aAAa6f,OAAO4C,sBAAsBD,GAC/C,MAAO7W,KASX,IAAK,IAAI7U,EAAI,EAAGA,EAAIyqB,EAAK/tB,OAAQsD,IAC/BsqB,GAAqBG,EAAKzqB,GAAG2pB,MAAMhK,WAErCP,EAAU,IAAIK,WAAW6K,GAChBtqB,EAAI,EAAb,IAAK,IAAW4rB,EAAI,EAAG5rB,EAAIyqB,EAAK/tB,OAAQsD,IACtCof,EAAQ4F,IAAIyF,EAAKzqB,GAAG2pB,MAAOiC,GAC3BA,GAAKnB,EAAKzqB,GAAG2pB,MAAMhK,WAGrB,OAAOP,KAUR,CACDjf,IAAK,kBACL5G,MAAO,SAAyBixB,EAAWE,GACzC,IAAIjnB,OAAMxJ,EACNwwB,EAAO,GAEX,MAAOD,EAAU9tB,QAAUguB,EAAUhuB,OASjC+G,EARG+mB,EAAU9tB,OAGHguB,EAAUhuB,QAGXguB,EAAU,GAAGmB,IAAMrB,EAAU,GAAGqB,IAEnCnB,EAAUR,QAHVM,EAAUN,QAHVQ,EAAUR,QAYlBO,EAAK3kB,KAAKrC,GAGZ,OAAOgnB,IAER,CACDtqB,IAAK,cACL5G,MAAO,WACLiE,KAAKyrB,YAAY5J,YAAY,CAAEC,OAAQ,sBAIpCiI,EA7fe,CA8frBtgB,EAAU,WAAWqd,aAExBzrB,EAAQ,WAAa0uB,EACrB3uB,EAAOC,QAAUA,EAAQ,Y,kCC5mBzBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEnB,SAASS,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,IAAIqqB,EAAS,WACX,SAASA,IACPvqB,EAAgB/D,KAAMsuB,GAEtBtuB,KAAKuuB,UAAY,GAuGnB,OA5FAxrB,EAAaurB,EAAQ,CAAC,CACpB3rB,IAAK,KACL5G,MAAO,SAAYqN,EAAMolB,GAClBxuB,KAAKuuB,UAAUnlB,KAClBpJ,KAAKuuB,UAAUnlB,GAAQ,IAEzBpJ,KAAKuuB,UAAUnlB,GAAMd,KAAKkmB,KAW3B,CACD7rB,IAAK,MACL5G,MAAO,SAAaqN,EAAMolB,GACxB,IAAI/gB,OAAQhR,EAEZ,QAAKuD,KAAKuuB,UAAUnlB,KAGpBqE,EAAQzN,KAAKuuB,UAAUnlB,GAAM/L,QAAQmxB,GACrCxuB,KAAKuuB,UAAUnlB,GAAMqlB,OAAOhhB,EAAO,GAC5BA,GAAS,KASjB,CACD9K,IAAK,UACL5G,MAAO,SAAiBqN,GACtB,IAAIslB,OAAYjyB,EACZ+F,OAAI/F,EACJyC,OAASzC,EACTkyB,OAAOlyB,EAGX,GADAiyB,EAAY1uB,KAAKuuB,UAAUnlB,GACtBslB,EAOL,GAAyB,IAArBjsB,UAAUvD,OAEZ,IADAA,EAASwvB,EAAUxvB,OACdsD,EAAI,EAAGA,EAAItD,IAAUsD,EACxBksB,EAAUlsB,GAAGM,KAAK9C,KAAMyC,UAAU,SAKpC,IAFAksB,EAAO1D,MAAMroB,UAAU5F,MAAM8F,KAAKL,UAAW,GAC7CvD,EAASwvB,EAAUxvB,OACdsD,EAAI,EAAGA,EAAItD,IAAUsD,EACxBksB,EAAUlsB,GAAGwoB,MAAMhrB,KAAM2uB,KAQ9B,CACDhsB,IAAK,UACL5G,MAAO,WACLiE,KAAKuuB,UAAY,KAWlB,CACD5rB,IAAK,OACL5G,MAAO,SAAc6yB,GACnB5uB,KAAK6F,GAAG,QAAQ,SAAUiD,GACxB8lB,EAAYtmB,KAAKQ,UAKhBwlB,EA3GI,GA8GbjzB,EAAQ,WAAaizB,EACrBlzB,EAAOC,QAAUA,EAAQ,Y,kCC5HzBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAI8yB,EAAiB,WAAe,SAASC,EAAc3X,EAAK3U,GAAK,IAAIusB,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAWC,OAAKzyB,EAAW,IAAM,IAAK,IAAiCmR,EAA7BuhB,EAAKhY,EAAIiY,OAAOC,cAAmBL,GAAMphB,EAAKuhB,EAAGG,QAAQC,MAAOP,GAAK,EAA6B,GAArBD,EAAKzmB,KAAKsF,EAAG7R,OAAYyG,GAAKusB,EAAK7vB,SAAWsD,EAAG,MAAW,MAAOgtB,GAAOP,GAAK,EAAMC,EAAKM,EAAO,QAAU,KAAWR,GAAMG,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIF,EAAI,MAAMC,GAAQ,OAAOH,EAAQ,OAAO,SAAU5X,EAAK3U,GAAK,GAAIyoB,MAAMwE,QAAQtY,GAAQ,OAAOA,EAAY,GAAIiY,OAAOC,YAAYxzB,OAAOsb,GAAQ,OAAO2X,EAAc3X,EAAK3U,GAAa,MAAM,IAAIyB,UAAU,yDAAlkB,GAErB,SAASvI,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,IAAI2N,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAKxComB,EAAY,SAAmBzkB,EAAO0kB,GAGxC,IAFA,IAAI1jB,EAAOhB,EAAMgB,KAERzJ,EAAI,EAAGA,EAAIyJ,EAAK/M,OAAQsD,IAAK,CACpC,IAAImH,EAAMsC,EAAKzJ,GAEf,GAAImtB,GAAahmB,EAAIimB,aAAeD,GAAahmB,EAAIkmB,UACnD,OAAOlmB,EAGX,OAAO,MAGLmmB,EAAe,SAAsBvoB,EAAO0D,GAC9C,IAAI3E,EAAS7D,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,EAAIA,UAAU,GAEjF,GAAK8E,EAAM3B,SAOX,IAHA,IAAI+pB,EAAYrpB,EACZqD,OAAMlN,EAED+F,EAAI,EAAGA,EAAI+E,EAAM3B,SAAS1G,OAAQsD,IAAK,CAC9C,IAAIof,EAAUra,EAAM3B,SAASpD,GAU7B,GARKmH,IAKHA,EAAM+lB,EAAUzkB,EAAO0kB,EAAY/N,EAAQjhB,SAAW,IAGpDgJ,EAAK,CACP,GAAI,UAAWiY,EAAS,CAEtBjY,EAAI4B,QAAUokB,EACdhmB,EAAIkmB,UAAYF,EAChBA,GAAa/N,EAAQjhB,SACrBgJ,EAAM,KACN,SAGF,GAAIgmB,EAAYhmB,EAAI4B,QAAS,CAE3BokB,GAAa/N,EAAQjhB,SACrB,SAIFgJ,EAAI4B,SAAWqW,EAAQjhB,cAWvB,GATI,WAAYihB,IACdjY,EAAM,IAAIJ,EAAe,WAAWuB,OAAO6kB,EAAWA,EAAY/N,EAAQjhB,SAAUihB,EAAQ/Y,QAC5Fc,EAAIimB,YAAcD,EAGlBhmB,EAAIkmB,UAAYF,EAAYI,WAAWnO,EAAQ/Y,QAC/CoC,EAAMG,OAAOzB,IAGX,eAAgBiY,EAAS,CAE3B,IAAIoO,OAAWvzB,EACXwzB,OAAUxzB,EAKVyzB,EAAgCtO,EAAQ7Y,WAAWonB,MAAM,KAAK1xB,IAAIsxB,YAElEK,EAAiCvB,EAAeqB,EAA+B,GAEnFF,EAAWI,EAA+B,GAC1CH,EAAUG,EAA+B,GAEzCzmB,EAAM,IAAIJ,EAAe,WAAWuB,OAAO6kB,EAAWA,EAAY/N,EAAQjhB,SAAU,IACpFgJ,EAAIimB,YAAcD,EAAYK,EAC9BrmB,EAAIkmB,UAAYlmB,EAAIimB,YAAcK,EAClChlB,EAAMG,OAAOzB,GAGjBgmB,GAAa/N,EAAQjhB,WAIzBtF,EAAQ,WAAa,CACnBy0B,aAAcA,EACdJ,UAAWA,GAEbt0B,EAAOC,QAAUA,EAAQ,Y,qBC/GzBD,EAAOC,QAAU,8gH,qBCAjBD,EAAOC,QAAU,8sG,oCCMjBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAaE,EAAKC,EAAK0N,GAAO,IAAIzN,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASqH,EAAKnmB,EAAWomB,EAAKE,EAAWwN,EAAKzN,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA6O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAAhW,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BP,EAAMO,EAAQN,EAAMpmB,EAAU8zB,EAAMxN,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE/c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAI+rB,EAAoB,EAAQ,QAE5BC,EAAqB70B,EAAuB40B,GAE5CE,EAA8B,EAAQ,QAEtCt0B,EAAY,EAAQ,QAEpBsN,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCinB,EAAsB,CAG1B,CACE3iB,KAAM,MACN4iB,IAAK,SAAa3vB,EAAgBrC,EAAUiC,EAAUG,EAAiBJ,GACrE,GAAIC,IAAa4J,IAAU,CACzB,IAAIjJ,EAAY,CACdsK,KAAM,EACN+kB,aAAc,GAGhB,OAAOrvB,EAET,OAAO,OAIX,CACEwM,KAAM,kBACN4iB,IAAK,SAAa3vB,EAAgBrC,EAAUiC,EAAUG,EAAiBJ,GACrE,GAAIK,EAAe6vB,uBAAyBlyB,EAAS8J,eAAgB,CACnE,IAAIqoB,EAAenyB,EAAS8J,eAAemI,UAAY,IACnDmgB,EAAgBD,EAAe9vB,EAAe6vB,sBAC9CtvB,EAAY,CACdsK,KAAMklB,EACNH,aAAc,GAGhB,OAAOrvB,EAET,OAAO,OAKX,CACEwM,KAAM,UACN4iB,IAAK,SAAa3vB,EAAgBrC,EAAUiC,EAAUG,EAAiBJ,GACrE,IAAIkF,EAAWlH,EAASkH,UAAY,GAChCtE,EAAY,KACZyvB,EAAe,KAEnBrwB,EAAcA,GAAe,EAE7B,IAAK,IAAI8B,EAAI,EAAGA,EAAIoD,EAAS1G,OAAQsD,IAAK,CACxC,IAAIof,EAAUhc,EAASpD,GAEvB,GAAIof,EAAQ1Y,WAAapI,GAA4C,qBAAlB8gB,EAAQrB,MAAuB,CAChF,IAAIrL,EAAW7K,KAAKC,IAAI5J,EAAckhB,EAAQrB,OAI9C,GAAqB,OAAjBwQ,GAAyBA,EAAe7b,EAC1C,QAGG5T,GAA8B,OAAjByvB,GAAyBA,GAAgB7b,KACzD6b,EAAe7b,EACf5T,EAAY,CACVsK,KAAMgW,EAAQrB,MACdoQ,aAAcnuB,KAKtB,OAAOlB,IAKX,CACEwM,KAAM,gBACN4iB,IAAK,SAAa3vB,EAAgBrC,EAAUiC,EAAUG,EAAiBJ,GACrE,IAAIY,EAAY,KAIhB,GAFAZ,EAAcA,GAAe,EAEzBhC,EAASiH,qBAAuBjH,EAASiH,oBAAoBzG,OAG/D,IAFA,IAAI6xB,EAAe,KAEVvuB,EAAI,EAAGA,EAAI9D,EAASiH,oBAAoBzG,OAAQsD,IAAK,CAC5D,IAAImuB,EAAejyB,EAASiH,oBAAoBnD,GAC5C6F,EAAgB3J,EAASiI,sBAAwBnE,EAAI,EACrDwuB,EAAoBjwB,EAAekwB,gBAAgB5oB,GAEvD,GAAI2oB,EAAmB,CACrB,IAAI9b,EAAW7K,KAAKC,IAAI5J,EAAcswB,EAAkBplB,MAIxD,GAAqB,OAAjBmlB,GAAyBA,EAAe7b,EAC1C,QAGG5T,GAA8B,OAAjByvB,GAAyBA,GAAgB7b,KACzD6b,EAAe7b,EACf5T,EAAY,CACVsK,KAAMolB,EAAkBplB,KACxB+kB,aAAcA,KAMxB,OAAOrvB,IAKX,CACEwM,KAAM,WACN4iB,IAAK,SAAa3vB,EAAgBrC,EAAUiC,EAAUG,EAAiBJ,GACrE,GAAIhC,EAASwyB,SAAU,CACrB,IAAI5vB,EAAY,CACdsK,KAAMlN,EAASwyB,SAAStlB,KACxB+kB,aAAcjyB,EAASwyB,SAASxqB,cAAgBhI,EAASgI,eAG3D,OAAOpF,EAET,OAAO,QAIXjG,EAAQo1B,oBAAsBA,EAE9B,IAAIU,EAAiB,SAAWnH,GAG9B,SAASmH,IACP,IAAI3S,EAAU/b,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,GAAKA,UAAU,GAEnFsB,EAAgB/D,KAAMmxB,GAEtB3O,EAAK3mB,OAAOkJ,eAAeosB,EAAevuB,WAAY,cAAe5C,MAAM8C,KAAK9C,MAGhFA,KAAKoxB,mBAAgB30B,EAGrBuD,KAAKqxB,UAAY,GACjBrxB,KAAKixB,gBAAkB,GACvBjxB,KAAK4wB,sBAAwB,KAEzBpS,EAAQO,QACV/e,KAAKgf,QAAUvV,EAAU,WAAWM,IAAI3I,KAAKqI,EAAU,WAAY,uBAuavE,OAzbApF,EAAU8sB,EAAgBnH,GAsC1BjnB,EAAaouB,EAAgB,CAAC,CAC5BxuB,IAAK,eACL5G,MAAO,SAAsB2C,EAAUiC,EAAUG,EAAiBJ,GAChE,IAAI4wB,EAAatxB,KAAKuxB,eAAe7yB,EAAUiC,EAAUG,EAAiBJ,GAE1E,OAAK4wB,EAAWpyB,OAUTc,KAAKwxB,iBAAiBF,EAAY,CAAE3uB,IAAK,OAAQ5G,MAAO2E,IANtD,OAoBV,CACDiC,IAAK,iBACL5G,MAAO,SAAwB2C,EAAUiC,GACvC,IAAKjC,IAAaA,EAASkH,SACzB,OAAO,KAGT,IAAI0rB,EAAatxB,KAAKuxB,eAAe7yB,EAAUiC,EAAUjC,EAASiI,sBAAuB,GAGzF,IAAK2qB,EAAWpyB,OACd,OAAO,KAGT,IAAIoC,EAAYtB,KAAKwxB,iBAAiBF,EAAY,CAChD3uB,IAAK,eACL5G,MAAO,IAST,OAJIuF,EAAUqvB,aAAe,IAC3BrvB,EAAUsK,OAAS,GAGdvB,KAAKC,IAAIhJ,EAAUsK,MAAO,EAAI1P,EAAUu1B,cAAc/yB,EAAU4C,EAAUqvB,aAAc,MAiBhG,CACDhuB,IAAK,iBACL5G,MAAO,SAAwB2C,EAAUiC,EAAUG,EAAiBJ,GAIlE,IAHA,IAAI4wB,EAAa,GAGR9uB,EAAI,EAAGA,EAAIiuB,EAAoBvxB,OAAQsD,IAAK,CACnD,IAAIkvB,EAAWjB,EAAoBjuB,GAC/BlB,EAAYowB,EAAShB,IAAI1wB,KAAMtB,EAAUiC,EAAUG,EAAiBJ,GAEpEY,IACFA,EAAUowB,SAAWA,EAAS5jB,KAC9BwjB,EAAWhpB,KAAK,CACdopB,SAAUA,EAAS5jB,KACnBxM,UAAWA,IAEbtB,KAAKgf,QAAQ,wBAA0B0S,EAAS5jB,KAAO,KAAMxM,IAIjE,OAAOgwB,IAkBR,CACD3uB,IAAK,mBACL5G,MAAO,SAA0Bu1B,EAAY/uB,GAK3C,IAJA,IAAIovB,EAAgBL,EAAW,GAAGhwB,UAC9BswB,EAAevnB,KAAKC,IAAIgnB,EAAW,GAAGhwB,UAAUiB,EAAOI,KAAOJ,EAAOxG,OACrE81B,EAAeP,EAAW,GAAGI,SAExBlvB,EAAI,EAAGA,EAAI8uB,EAAWpyB,OAAQsD,IAAK,CAC1C,IAAIsvB,EAAcznB,KAAKC,IAAIgnB,EAAW9uB,GAAGlB,UAAUiB,EAAOI,KAAOJ,EAAOxG,OAEpE+1B,EAAcF,IAChBA,EAAeE,EACfH,EAAgBL,EAAW9uB,GAAGlB,UAC9BuwB,EAAeP,EAAW9uB,GAAGkvB,UAKjC,OADA1xB,KAAKgf,QAAQ,4BAA8B6S,EAAe,aAAcF,GACjEA,IAWR,CACDhvB,IAAK,yBACL5G,MAAO,SAAgCg2B,EAAaC,GAKlD,IAJA,IAAIC,EAAoBD,EAAYtrB,cAAgBqrB,EAAYrrB,cAIvDlE,EAAIyvB,EAAoB,EAAGzvB,GAAK,EAAGA,IAAK,CAC/C,IAAI0vB,EAAqBH,EAAYnsB,SAASpD,GAE9C,GAAI0vB,GAA0D,qBAA7BA,EAAmB3R,MAAuB,CACzEyR,EAAYd,SAAW,CACrBxqB,cAAeqrB,EAAYrrB,cAAgBlE,EAC3CoJ,KAAMsmB,EAAmB3R,OAE3BvgB,KAAKgf,QAAQ,iBAAkBgT,EAAYd,UAC3ClxB,KAAKmG,QAAQ,kBACb,UAWL,CACDxD,IAAK,qBACL5G,MAAO,SAA4B2C,GACjC,IAAKsB,KAAK4wB,uBAAyBlyB,EAAS8J,eAAgB,CAC1D,IAAI2pB,EAAoBzzB,EAAS8J,eAAemI,UAAY,IAE5D3Q,KAAK4wB,uBAAyBuB,KAQjC,CACDxvB,IAAK,QACL5G,MAAO,WACLiE,KAAKoxB,mBAAgB30B,IAWtB,CACDkG,IAAK,mBACL5G,MAAO,SAA0Bq2B,GAC/B,IAAIxQ,EAAUwQ,EAAYxQ,QACtBljB,EAAW0zB,EAAY1zB,SACvB2zB,OAAa51B,EAuBjB,OApBE41B,EADEzQ,EAAQnjB,IACGuB,KAAKsyB,iBAAiBF,GAEtBpyB,KAAKuyB,gBAAgBH,GAGhCC,GACEryB,KAAKwyB,6BAA6BJ,EAAaC,KACjDryB,KAAKyyB,2BAA2BL,GAI3B1zB,EAASwyB,WACZxyB,EAASwyB,SAAW,CAClBxqB,cAAehI,EAASgI,cAAgB0rB,EAAYM,WACpD9mB,KAAMgW,EAAQrB,SAMf8R,IAWR,CACD1vB,IAAK,mBACL5G,MAAO,SAA0Bq2B,GAC/B,IAAIxQ,EAAUwQ,EAAYxQ,QACtB+Q,EAAapC,EAAmB,WAAWqC,UAAUhR,EAAQnjB,IAAI0tB,OACjE9gB,EAAYklB,EAAmB,WAAWllB,UAAUsnB,EAAYP,EAAYjG,OAMhF,OAJoC,OAAhCiG,EAAY9mB,kBACd8mB,EAAY9mB,iBAAmBD,GAG1B,CACLkV,MAAOlV,EACP2U,IAAK3U,EAAYuW,EAAQjhB,YAY5B,CACDgC,IAAK,kBACL5G,MAAO,SAAyBq2B,GAC9B,IAAIS,GAAW,EAAIrC,EAA4BsC,SAASV,EAAYjG,MAAOnsB,KAAKoxB,eAC5E2B,OAAmBt2B,EACnBu2B,OAAiBv2B,EAErB,OAAKo2B,GAIDA,EAASI,OAAmC,IAA1BJ,EAASI,MAAM/zB,QACnCc,KAAKoxB,cAAgByB,EAASI,MAAM,GAAG5E,IACvC0E,EAAmBF,EAASI,MAAM,GAAGC,QACrCF,EAAiBH,EAASI,MAAM,GAAGC,SAC1BL,EAASM,OAAmC,IAA1BN,EAASM,MAAMj0B,SAC1Cc,KAAKoxB,cAAgByB,EAASM,MAAM,GAAG9E,IACvC0E,EAAmBF,EAASM,MAAM,GAAGD,QACrCF,EAAiBH,EAASM,MAAM,GAAGD,SAG9B,CACL3S,MAAOwS,EACP/S,IAAKgT,EACLI,cAAeP,EAASI,OAAmC,IAA1BJ,EAASI,MAAM/zB,OAChDm0B,cAAeR,EAASM,OAAmC,IAA1BN,EAASM,MAAMj0B,SAjBzC,OAoBV,CACDyD,IAAK,6BACL5G,MAAO,SAAoCmN,GACzC,MAAwC,qBAA7BlJ,KAAKqxB,UAAUnoB,GACjB,KAEFlJ,KAAKqxB,UAAUnoB,GAAU0C,OAEjC,CACDjJ,IAAK,qBACL5G,MAAO,SAA4BmN,GACjC,MAAwC,qBAA7BlJ,KAAKqxB,UAAUnoB,GACjB,KAEFlJ,KAAKqxB,UAAUnoB,GAAUoqB,UAejC,CACD3wB,IAAK,+BACL5G,MAAO,SAAsCq2B,EAAaC,GACxD,IAAIzQ,EAAUwQ,EAAYxQ,QACtB2R,EAAavzB,KAAKqxB,UAAUe,EAAYlpB,UAE5C,GAAoC,OAAhCkpB,EAAY9mB,gBACdtL,KAAKgf,QAAQ,OAAQoT,EAAY9mB,iBAEjCioB,EAAa,CACX3nB,KAAMwmB,EAAYoB,eAClBF,QAASlB,EAAYoB,eAAiBnB,EAAW9R,OAEnDvgB,KAAKqxB,UAAUe,EAAYlpB,UAAYqqB,EACvCvzB,KAAKmG,QAAQ,mBAEbyb,EAAQrB,MAAQ6R,EAAYoB,eAC5B5R,EAAQ5B,IAAMqS,EAAWrS,IAAMuT,EAAWD,YACrC,KAAIC,EAIT,OAAO,EAHP3R,EAAQrB,MAAQ8R,EAAW9R,MAAQgT,EAAWD,QAC9C1R,EAAQ5B,IAAMqS,EAAWrS,IAAMuT,EAAWD,QAK5C,OAAO,IAWR,CACD3wB,IAAK,6BACL5G,MAAO,SAAoCq2B,GACzC,IAAI1zB,EAAW0zB,EAAY1zB,SACvBkjB,EAAUwQ,EAAYxQ,QAK1B,GAAIA,EAAQvZ,cACVrI,KAAKixB,gBAAgBrP,EAAQ1Y,UAAY,CACvC0C,KAAMgW,EAAQrB,MACdkT,SAAU,QAEP,GAAI/0B,EAASiH,oBAAoBzG,OAGtC,IAAK,IAAIsD,EAAI,EAAGA,EAAI9D,EAASiH,oBAAoBzG,OAAQsD,IAAK,CAC5D,IAAImuB,EAAejyB,EAASiH,oBAAoBnD,GAC5C6F,EAAgB3J,EAASiI,sBAAwBnE,EAAI,EACrDkxB,EAAiB/C,EAAeyB,EAAYM,WAC5Ce,EAAWppB,KAAKC,IAAIopB,GAExB,IAAK1zB,KAAKixB,gBAAgB5oB,IAAkBrI,KAAKixB,gBAAgB5oB,GAAeorB,SAAWA,EAAU,CACnG,IAAI7nB,OAAOnP,EAGTmP,EADE8nB,EAAiB,EACZ9R,EAAQrB,OAAQ,EAAIrkB,EAAUu1B,cAAc/yB,EAAU0zB,EAAYM,WAAY/B,GAE9E/O,EAAQ5B,KAAM,EAAI9jB,EAAUu1B,cAAc/yB,EAAU0zB,EAAYM,WAAa,EAAG/B,GAGzF3wB,KAAKixB,gBAAgB5oB,GAAiB,CACpCuD,KAAMA,EACN6nB,SAAUA,OAanB,CACD9wB,IAAK,UACL5G,MAAO,gBAGFo1B,EA1bY,CA2blB1nB,EAAU,WAAWqd,aAExBzrB,EAAQ,WAAa81B,G,qBC5lBrB/1B,EAAOC,QAAU,8tH,qBCAjBD,EAAOC,QAAU,03G,qBCAjBD,EAAOC,QAAU,suH,oCCuBjB,IAAIs4B,EAAiC,EACjCC,EAAqB,IACrBtF,EAAS,EAAQ,QAUjBuF,EAAW,SAAS1H,GACtB,IACE3pB,EAAI,EACJhG,EAAS,CACPs3B,aAAc,EACdC,YAAa,GAEfD,EAAc,EACdC,EAAc,EAGhB,MAAOvxB,EAAI2pB,EAAMhK,WAAY,CAE3B,GAAIgK,EAAM3pB,KAAOoxB,EACf,MAIF,MAAoB,MAAbzH,EAAM3pB,GACXsxB,GAAe,IACftxB,IAEFsxB,GAAe3H,EAAM3pB,KAGrB,MAAoB,MAAb2pB,EAAM3pB,GACXuxB,GAAe,IACfvxB,IAMF,GAJAuxB,GAAe5H,EAAM3pB,MAIhBhG,EAAOw3B,SAAWF,IAAgBH,EAAgC,CACrEn3B,EAAOs3B,YAAcA,EACrBt3B,EAAOu3B,YAAcA,EACrBv3B,EAAOw3B,QAAU7H,EAAM1E,SAASjlB,EAAGA,EAAIuxB,GACvC,MAIFvxB,GAAKuxB,EACLD,EAAc,EACdC,EAAc,EAGhB,OAAOv3B,GAILy3B,EAAgB,SAASC,GAG3B,OAAuB,MAAnBA,EAAIF,QAAQ,IAKiC,MAA3CE,EAAIF,QAAQ,IAAM,EAAKE,EAAIF,QAAQ,KAQG,SAHxClJ,OAAOC,aAAamJ,EAAIF,QAAQ,GACZE,EAAIF,QAAQ,GACZE,EAAIF,QAAQ,GACZE,EAAIF,QAAQ,KAKb,IAAnBE,EAAIF,QAAQ,GAjBP,KAuBFE,EAAIF,QAAQvM,SAAS,EAAGyM,EAAIF,QAAQ90B,OAAS,IAIlDi1B,EAAsB,SAAS/G,EAAKgH,GACtC,IAAkB5xB,EAAGmS,EAAOrO,EAAQwC,EAAhCurB,EAAU,GAGd,KAAoB,GAAdD,EAAS,IACb,OAAOC,EAKT,IADA1f,EAAsB,GAAdyf,EAAS,GACZ5xB,EAAI,EAAGA,EAAImS,EAAOnS,IACrB8D,EAAa,EAAJ9D,EACTsG,EAAO,CACLM,KAA6B,EAAvBgrB,EAAS9tB,EAAS,GACxB8mB,IAAKA,GAIoB,EAAvBgH,EAAS9tB,EAAS,KACpBwC,EAAKwrB,OAAUF,EAAS9tB,EAAS,IAAM,EAAK8tB,EAAS9tB,EAAS,GAC9D+tB,EAAQ/rB,KAAKQ,IAGjB,OAAOurB,GAGLE,EAAgB,WAElBA,EAAc3xB,UAAUof,KAAKlf,KAAK9C,MAElCA,KAAKw0B,gBAAkB,GAEvBx0B,KAAKy0B,WAAa,CAChB,IAAIC,EAAa,EAAG,GACpB,IAAIA,EAAa,EAAG,GACpB,IAAIA,EAAa,EAAG,GACpB,IAAIA,EAAa,EAAG,IAGtB10B,KAAK20B,QAGL30B,KAAKy0B,WAAW1pB,SAAQ,SAAS6pB,GAC/BA,EAAG/uB,GAAG,OAAQ7F,KAAKmG,QAAQ/E,KAAKpB,KAAM,SACtC40B,EAAG/uB,GAAG,OAAQ7F,KAAKmG,QAAQ/E,KAAKpB,KAAM,WACrCA,OAILu0B,EAAc3xB,UAAY,IAAI0rB,EAC9BiG,EAAc3xB,UAAU0F,KAAO,SAASoO,GACtC,IAAIwd,EAAKE,EAGiB,aAAtB1d,EAAMme,cAKVX,EAAML,EAASnd,EAAMoe,aAGjBZ,EAAIJ,cAAgBH,IAKxBS,EAAWH,EAAcC,GAGpBE,IAWD1d,EAAM2X,IAAMruB,KAAK+0B,WAEnB/0B,KAAKg1B,qBAAsB,EAEjBte,EAAM2X,MAAQruB,KAAK+0B,YAAgB/0B,KAAwB,oBAErEA,KAAKg1B,qBAAsB,GAK7Bh1B,KAAKw0B,gBAAkBx0B,KAAKw0B,gBAAgBS,OAAOd,EAAoBzd,EAAM0W,IAAKgH,IAClFp0B,KAAK+0B,WAAare,EAAM2X,SAG1BkG,EAAc3xB,UAAUwf,MAAQ,WAEzBpiB,KAAKw0B,gBAAgBt1B,QAS1Bc,KAAKw0B,gBAAgBzpB,SAAQ,SAASsO,EAAM7M,GAC1C6M,EAAK6b,aAAe1oB,KAItBxM,KAAKw0B,gBAAgBv3B,MAAK,SAAS6E,EAAGC,GACpC,OAAID,EAAEsrB,MAAQrrB,EAAEqrB,IACPtrB,EAAEozB,aAAenzB,EAAEmzB,aAErBpzB,EAAEsrB,IAAMrrB,EAAEqrB,OAGnBptB,KAAKw0B,gBAAgBzpB,SAAQ,SAASoqB,GAChCA,EAAO/rB,KAAO,GAEhBpJ,KAAKo1B,qBAAqBD,KAI3Bn1B,MAEHA,KAAKw0B,gBAAgBt1B,OAAS,EAC9Bc,KAAKy0B,WAAW1pB,SAAQ,SAAS6pB,GAC/BA,EAAGxS,UACFpiB,OAhCDA,KAAKy0B,WAAW1pB,SAAQ,SAAS6pB,GAC/BA,EAAGxS,UACFpiB,OAkCPu0B,EAAc3xB,UAAU+xB,MAAQ,WAC9B30B,KAAK+0B,WAAa,KAClB/0B,KAAKg1B,qBAAsB,EAC3Bh1B,KAAKq1B,qBAAuB,CAAC,KAAM,MACnCr1B,KAAKy0B,WAAW1pB,SAAQ,SAASuqB,GAC/BA,EAASX,YAIbJ,EAAc3xB,UAAUwyB,qBAAuB,SAASD,GAElDn1B,KAAKu1B,mBAAmBJ,GAC1Bn1B,KAAKq1B,qBAAqBF,EAAO/rB,MAAQ,EAChCpJ,KAAKw1B,mBAAmBL,KACjCn1B,KAAKq1B,qBAAqBF,EAAO/rB,MAAQ,GAEI,OAA3CpJ,KAAKq1B,qBAAqBF,EAAO/rB,OAKrCpJ,KAAKy0B,YAAYU,EAAO/rB,MAAQ,GAAKpJ,KAAKq1B,qBAAqBF,EAAO/rB,OAAOd,KAAK6sB,IAGpFZ,EAAc3xB,UAAU2yB,mBAAqB,SAASJ,GACpD,OAAqC,QAAZ,MAAhBA,EAAOb,SAElBC,EAAc3xB,UAAU4yB,mBAAqB,SAASL,GACpD,OAAqC,QAAZ,MAAhBA,EAAOb,SAOlB,IAAImB,EAAwB,CAC1B,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,GAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,IACN,IAAM,KACN,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,KACR,IAAQ,IACR,IAAQ,IACR,IAAQ,KACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,KACR,IAAQ,IACR,IAAQ,GACR,IAAQ,GACR,IAAQ,KACR,IAAQ,IACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,GACR,IAAQ,GACR,IAAQ,GACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,KACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,IACR,IAAQ,KACR,IAAQ,KACR,IAAQ,KACR,IAAQ,MAGNC,EAAkB,SAAShQ,GAC7B,OAAa,OAATA,EACK,IAETA,EAAO+P,EAAsB/P,IAASA,EAC/BoF,OAAOC,aAAarF,KAIzBiQ,EAAa,GAIbC,EAAO,CAAC,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KACxD,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,KAAQ,MAIxDC,EAAsB,WACxB,IAAIr5B,EAAS,GAAIgG,EAAImzB,EAAa,EAClC,MAAOnzB,IACLhG,EAAO8L,KAAK,IAEd,OAAO9L,GAGLk4B,EAAe,SAASoB,EAAOC,GACjCrB,EAAa9xB,UAAUof,KAAKlf,KAAK9C,MAEjCA,KAAKg2B,OAASF,GAAS,EACvB91B,KAAKi2B,aAAeF,GAAe,EAEnC/1B,KAAKk2B,MAAQ,MAAmD,GAAzCl2B,KAAKg2B,QAAU,EAAKh2B,KAAKi2B,eAEhDj2B,KAAKm2B,eACLn2B,KAAK20B,QAEL30B,KAAKsI,KAAO,SAAS6sB,GACnB,IAAIrsB,EAAMstB,EAAMC,EAAOC,EAAO9qB,EAK9B,GAHA1C,EAAuB,MAAhBqsB,EAAOb,OAGVxrB,IAAS9I,KAAKu2B,kBAelB,GATwB,QAAZ,MAAPztB,GACH9I,KAAKu2B,iBAAmBztB,EACfA,IAAS9I,KAAKw2B,WACvBx2B,KAAKu2B,iBAAmB,MAG1BF,EAAQvtB,IAAS,EACjBwtB,EAAe,IAAPxtB,EAEJA,IAAS9I,KAAKw2B,SAGX,GAAI1tB,IAAS9I,KAAKy2B,wBACvBz2B,KAAK02B,MAAQ,aAER,GAAI5tB,IAAS9I,KAAK22B,gBACvB32B,KAAK42B,gBAAgBzB,EAAO/H,KAE5BptB,KAAK62B,eAAe1B,EAAO/H,KAG3BgJ,EAAOp2B,KAAK82B,WACZ92B,KAAK82B,WAAa92B,KAAK+2B,cACvB/2B,KAAK+2B,cAAgBX,EAGrBp2B,KAAKg3B,UAAY7B,EAAO/H,SAEnB,GAAItkB,IAAS9I,KAAKi3B,gBACvBj3B,KAAKk3B,QAAUvB,EAAa,EAC5B31B,KAAK02B,MAAQ,cACR,GAAI5tB,IAAS9I,KAAKm3B,gBACvBn3B,KAAKk3B,QAAUvB,EAAa,EAC5B31B,KAAK02B,MAAQ,cACR,GAAI5tB,IAAS9I,KAAKo3B,gBACvBp3B,KAAKk3B,QAAUvB,EAAa,EAC5B31B,KAAK02B,MAAQ,cACR,GAAI5tB,IAAS9I,KAAKq3B,iBACvBr3B,KAAK42B,gBAAgBzB,EAAO/H,KAC5BptB,KAAK62B,eAAe1B,EAAO/H,KAC3BptB,KAAKs3B,eACLt3B,KAAKg3B,UAAY7B,EAAO/H,SAEnB,GAAItkB,IAAS9I,KAAKu3B,WACJ,UAAfv3B,KAAK02B,MACP12B,KAAK+2B,cAAcpB,GAAc31B,KAAK+2B,cAAcpB,GAAY34B,MAAM,GAAI,GAE1EgD,KAAK82B,WAAWnB,GAAc31B,KAAK82B,WAAWnB,GAAY34B,MAAM,GAAI,QAEjE,GAAI8L,IAAS9I,KAAKw3B,wBACvBx3B,KAAK62B,eAAe1B,EAAO/H,KAC3BptB,KAAK82B,WAAajB,SACb,GAAI/sB,IAAS9I,KAAKy3B,4BACvBz3B,KAAK+2B,cAAgBlB,SAEhB,GAAI/sB,IAAS9I,KAAK03B,0BACvB13B,KAAK02B,MAAQ,eAGR,GAAI12B,KAAK23B,mBAAmBtB,EAAOC,GAKxCD,GAAiB,EAARA,IAAiB,EAC1B7qB,EAAOkqB,EAAgBW,EAAQC,GAC/Bt2B,KAAKA,KAAK02B,OAAOvB,EAAO/H,IAAK5hB,GAC7BxL,KAAK43B,eAGA,GAAI53B,KAAK63B,eAAexB,EAAOC,GAOjB,UAAft2B,KAAK02B,MACP12B,KAAK+2B,cAAc/2B,KAAK83B,MAAQ93B,KAAK+2B,cAAc/2B,KAAK83B,MAAM96B,MAAM,GAAI,GAExEgD,KAAK82B,WAAWnB,GAAc31B,KAAK82B,WAAWnB,GAAY34B,MAAM,GAAI,GAOtEq5B,GAAiB,EAARA,IAAiB,EAC1B7qB,EAAOkqB,EAAgBW,EAAQC,GAC/Bt2B,KAAKA,KAAK02B,OAAOvB,EAAO/H,IAAK5hB,GAC7BxL,KAAK43B,eAGA,GAAI53B,KAAK+3B,aAAa1B,EAAOC,GAElCt2B,KAAK42B,gBAAgBzB,EAAO/H,KAI5BptB,KAAKA,KAAK02B,OAAOvB,EAAO/H,IAAK,KAC7BptB,KAAK43B,UAEiB,MAAT,GAARtB,IACHt2B,KAAKg4B,cAAc7C,EAAO/H,IAAK,CAAC,MAGZ,KAAT,EAARkJ,IACHt2B,KAAKg4B,cAAc7C,EAAO/H,IAAK,CAAC,WAI7B,GAAIptB,KAAKi4B,oBAAoB5B,EAAOC,GAKzCt2B,KAAK43B,SAAoB,EAARtB,OAGZ,GAAIt2B,KAAKk4B,MAAM7B,EAAOC,GAAQ,CAInC,IAAI5c,EAAMkc,EAAKv4B,QAAe,KAAPyL,GAEnB4Q,IAAQ1Z,KAAK83B,OAEf93B,KAAK42B,gBAAgBzB,EAAO/H,KAC5BptB,KAAK83B,KAAOpe,GAID,EAAR4c,IAAoD,IAAnCt2B,KAAKm4B,YAAY96B,QAAQ,MAC3C2C,KAAKg4B,cAAc7C,EAAO/H,IAAK,CAAC,MAGd,MAAV,GAAPtkB,KAKH9I,KAAK43B,QAAgC,IAAb,GAAP9uB,IAAe,IAG9B9I,KAAKo4B,WAAW9B,IAKI,MAAT,GAARA,IACHt2B,KAAKg4B,cAAc7C,EAAO/H,IAAK,CAAC,WAK3BptB,KAAKq4B,aAAahC,KACb,IAAVC,IACFA,EAAQ,MAEV9qB,EAAOkqB,EAAgBW,GACvB7qB,GAAQkqB,EAAgBY,GACxBt2B,KAAKA,KAAK02B,OAAOvB,EAAO/H,IAAK5hB,GAC7BxL,KAAK43B,SAAWpsB,EAAKtM,aAvKrBc,KAAKu2B,iBAAmB,OA6K9B7B,EAAa9xB,UAAY,IAAI0rB,EAG7BoG,EAAa9xB,UAAUi0B,eAAiB,SAASzJ,GAC/C,IAAInX,EAAUjW,KAAK82B,WAEhBr4B,KAAI,SAASib,GACZ,OAAOA,EAAI4e,UAGZjc,KAAK,MAELW,QAAQ,aAAc,IAErB/G,EAAQ/W,QACVc,KAAKmG,QAAQ,OAAQ,CACnBoyB,SAAUv4B,KAAKg3B,UACfwB,OAAQpL,EACR5hB,KAAMyK,EACN/K,OAAQlL,KAAKk2B,SAQnBxB,EAAa9xB,UAAU+xB,MAAQ,WAC7B30B,KAAK02B,MAAQ,QAKb12B,KAAKk3B,QAAU,EACfl3B,KAAKg3B,UAAY,EACjBh3B,KAAK82B,WAAajB,IAClB71B,KAAK+2B,cAAgBlB,IACrB71B,KAAKu2B,iBAAmB,KAGxBv2B,KAAK43B,QAAU,EACf53B,KAAK83B,KAAOnC,EAGZ31B,KAAKm4B,YAAc,IAMrBzD,EAAa9xB,UAAUuzB,aAAe,WAaV,IAAtBn2B,KAAKi2B,cACPj2B,KAAKy4B,MAAY,GACjBz4B,KAAK04B,KAAY,GACjB14B,KAAK24B,UAAa,GAAO34B,KAAKg2B,SAAW,EACzCh2B,KAAK44B,QAAY,IACc,IAAtB54B,KAAKi2B,eACdj2B,KAAKy4B,MAAY,GACjBz4B,KAAK04B,KAAY,GACjB14B,KAAK24B,UAAa,GAAO34B,KAAKg2B,SAAW,EACzCh2B,KAAK44B,QAAY,IAOnB54B,KAAKw2B,SAA8B,EAEnCx2B,KAAKy2B,wBAA8C,GAAhBz2B,KAAK24B,SACxC34B,KAAK22B,gBAA8C,GAAhB32B,KAAK24B,SAExC34B,KAAKi3B,gBAA8C,GAAhBj3B,KAAK24B,SACxC34B,KAAKm3B,gBAA8C,GAAhBn3B,KAAK24B,SACxC34B,KAAKo3B,gBAA8C,GAAhBp3B,KAAK24B,SACxC34B,KAAKq3B,iBAA8C,GAAhBr3B,KAAK24B,SAExC34B,KAAK03B,0BAA8C,GAAhB13B,KAAK24B,SAExC34B,KAAKu3B,WAA8C,GAAhBv3B,KAAK24B,SACxC34B,KAAKw3B,wBAA8C,GAAhBx3B,KAAK24B,SACxC34B,KAAKy3B,4BAA8C,GAAhBz3B,KAAK24B,UAc1CjE,EAAa9xB,UAAU+0B,mBAAqB,SAAStB,EAAOC,GAC1D,OAAQD,IAAUr2B,KAAK04B,MAAQpC,GAAS,IAAQA,GAAS,IAc3D5B,EAAa9xB,UAAUi1B,eAAiB,SAASxB,EAAOC,GACtD,OAASD,IAAWr2B,KAAK04B,KAAO,GAAMrC,IAAWr2B,KAAK04B,KAAO,IAC1DpC,GAAS,IAAQA,GAAS,IAc/B5B,EAAa9xB,UAAUm1B,aAAe,SAAS1B,EAAOC,GACpD,OAAQD,IAAUr2B,KAAK04B,MAASpC,GAAS,IAAQA,GAAS,IAc5D5B,EAAa9xB,UAAUq1B,oBAAsB,SAAS5B,EAAOC,GAC3D,OAAQD,IAAUr2B,KAAK44B,SAAYtC,GAAS,IAAQA,GAAS,IAc/D5B,EAAa9xB,UAAUs1B,MAAQ,SAAS7B,EAAOC,GAC7C,OAAQD,GAASr2B,KAAKy4B,OAASpC,EAASr2B,KAAKy4B,MAAQ,GAClDnC,GAAS,IAAQA,GAAS,KAY/B5B,EAAa9xB,UAAUw1B,WAAa,SAAS9B,GAC3C,OAASA,GAAS,IAAQA,GAAS,IAAUA,GAAS,IAAQA,GAAS,KAWzE5B,EAAa9xB,UAAUy1B,aAAe,SAASQ,GAC7C,OAAQA,GAAQ,IAAQA,GAAQ,KAKlCnE,EAAa9xB,UAAUo1B,cAAgB,SAAS5K,EAAK0L,GACnD94B,KAAKm4B,YAAcn4B,KAAKm4B,YAAYlD,OAAO6D,GAC3C,IAAIttB,EAAOstB,EAAO1sB,QAAO,SAASZ,EAAMstB,GACtC,OAAOttB,EAAO,IAAMstB,EAAS,MAC5B,IACH94B,KAAKA,KAAK02B,OAAOtJ,EAAK5hB,IAKxBkpB,EAAa9xB,UAAUg0B,gBAAkB,SAASxJ,GAChD,GAAKptB,KAAKm4B,YAAYj5B,OAAtB,CAGA,IAAIsM,EAAOxL,KAAKm4B,YAAYY,UAAU3sB,QAAO,SAASZ,EAAMstB,GAC1D,OAAOttB,EAAO,KAAOstB,EAAS,MAC7B,IACH94B,KAAKm4B,YAAc,GACnBn4B,KAAKA,KAAK02B,OAAOtJ,EAAK5hB,KAIxBkpB,EAAa9xB,UAAUo2B,MAAQ,SAAS5L,EAAK5hB,GAC3C,IAAIytB,EAAUj5B,KAAK+2B,cAAc/2B,KAAK83B,MAGtCmB,GAAWztB,EACXxL,KAAK+2B,cAAc/2B,KAAK83B,MAAQmB,GAGlCvE,EAAa9xB,UAAUs2B,OAAS,SAAS9L,EAAK5hB,GAC5C,IAAIytB,EAAUj5B,KAAK82B,WAAWnB,GAE9BsD,GAAWztB,EACXxL,KAAK82B,WAAWnB,GAAcsD,GAIhCvE,EAAa9xB,UAAU00B,aAAe,WACpC,IAAI90B,EAEJ,IAAKA,EAAI,EAAGA,EAAIxC,KAAKk3B,QAAS10B,IAC5BxC,KAAK82B,WAAWt0B,GAAK,GAGvB,IAAKA,EAAIxC,KAAKk3B,QAAS10B,EAAImzB,EAAYnzB,IACrCxC,KAAK82B,WAAWt0B,GAAKxC,KAAK82B,WAAWt0B,EAAI,GAG3CxC,KAAK82B,WAAWnB,GAAc,IAIhCjB,EAAa9xB,UAAUu2B,QAAU,aAGjC/9B,EAAOC,QAAU,CACfk5B,cAAeA,EACfG,aAAcA,I,mBCt0BhB,IAAI0E,EAAgB,CAClB,IAAI,EACJ,IAAM,GAGR,SAASC,EAAkBt9B,GACzB,GAAqB,kBAAVA,EACT,OAAO,EAET,IAAIu9B,EAASF,EAAcr9B,EAAMw9B,eACjC,QAAOD,GAASv9B,EAAMw9B,cAGxB,SAASC,EAAoBz9B,GAC3B,MAAwB,kBAAVA,GAAuBA,GAAS,GAAKA,GAAS,IAI9D,SAAS09B,IACP,IAAIC,EAAS,IACTC,EAAS,EACTC,EAAiB,EACjBC,EAAiB,IACjBC,EAAmB,EACnBC,EAAmB,IACnBC,EAAU,GAEdn+B,OAAOmH,iBAAiBhD,KAAM,CAC5B,MAAS,CACPmD,YAAY,EACZ2G,IAAK,WACH,OAAO4vB,GAETlS,IAAK,SAASzrB,GACZ,IAAKy9B,EAAoBz9B,GACvB,MAAM,IAAIwE,MAAM,oCAElBm5B,EAAS39B,IAGb,MAAS,CACPoH,YAAY,EACZ2G,IAAK,WACH,OAAO6vB,GAETnS,IAAK,SAASzrB,GACZ,GAAqB,kBAAVA,EACT,MAAM,IAAIkI,UAAU,kCAEtB01B,EAAS59B,IAGb,cAAiB,CACfoH,YAAY,EACZ2G,IAAK,WACH,OAAO+vB,GAETrS,IAAK,SAASzrB,GACZ,IAAKy9B,EAAoBz9B,GACvB,MAAM,IAAIwE,MAAM,4CAElBs5B,EAAiB99B,IAGrB,cAAiB,CACfoH,YAAY,EACZ2G,IAAK,WACH,OAAO8vB,GAETpS,IAAK,SAASzrB,GACZ,IAAIy9B,EAAoBz9B,GACtB,MAAM,IAAIwE,MAAM,4CAElBq5B,EAAiB79B,IAGrB,gBAAmB,CACjBoH,YAAY,EACZ2G,IAAK,WACH,OAAOiwB,GAETvS,IAAK,SAASzrB,GACZ,IAAKy9B,EAAoBz9B,GACvB,MAAM,IAAIwE,MAAM,8CAElBw5B,EAAmBh+B,IAGvB,gBAAmB,CACjBoH,YAAY,EACZ2G,IAAK,WACH,OAAOgwB,GAETtS,IAAK,SAASzrB,GACZ,IAAKy9B,EAAoBz9B,GACvB,MAAM,IAAIwE,MAAM,8CAElBu5B,EAAmB/9B,IAGvB,OAAU,CACRoH,YAAY,EACZ2G,IAAK,WACH,OAAOkwB,GAETxS,IAAK,SAASzrB,GACZ,IAAIk+B,EAAUZ,EAAkBt9B,GAEhC,IAAgB,IAAZk+B,EACF,MAAM,IAAIC,YAAY,+CAExBF,EAAUC,MAMlB7+B,EAAOC,QAAUo+B,G,qBCrIjBr+B,EAAOC,QAAU,slI,qBCAjBD,EAAOC,QAAU,80F,oCCejBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAET,IAAIo+B,EAAiB,CAEnBzQ,oBAAqB,EACrBU,gBAAiB,OAGnB/uB,EAAQ,WAAa8+B,EACrB/+B,EAAOC,QAAUA,EAAQ,Y,qBCzBzBD,EAAOC,QAAU,0wH,8CCAjB,IAAIi9B,EAAO,SAAS8B,GAClB,OAAOA,EAAOpd,QAAQ,aAAc,KAElCyS,EAAU,SAAS4K,GACjB,MAA+C,mBAAxCx+B,OAAO+G,UAAUqZ,SAASnZ,KAAKu3B,IAG5Cj/B,EAAOC,QAAU,SAAUi/B,GACzB,IAAKA,EACH,MAAO,GAMT,IAJA,IAAI99B,EAAS,GAET+9B,EAAajC,EAAKgC,GAASnK,MAAM,MAE5B3tB,EAAI,EAAGA,EAAI+3B,EAAWr7B,OAAQsD,IAAK,CAC1C,IAAIkX,EAAM6gB,EAAW/3B,GACjBiL,EAAQiM,EAAIrc,QAAQ,KACtBsF,EAAM21B,EAAK5e,EAAI1c,MAAM,EAAGyQ,IAAQ8rB,cAChCx9B,EAAQu8B,EAAK5e,EAAI1c,MAAMyQ,EAAQ,IAEL,qBAAjBjR,EAAOmG,GAChBnG,EAAOmG,GAAO5G,EACL0zB,EAAQjzB,EAAOmG,IACxBnG,EAAOmG,GAAK2F,KAAKvM,GAEjBS,EAAOmG,GAAO,CAAEnG,EAAOmG,GAAM5G,GAIjC,OAAOS,I,6DCpBT,SAASd,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIy+B,EAAc,EAAQ,QAEtBC,EAAe/+B,EAAuB8+B,GAEtClxB,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCoxB,EAAa,SAAoBC,EAASC,GAE5C,MAAI,YAAYxzB,KAAKwzB,GACZA,GAIJ,QAAQxzB,KAAKuzB,KAChBA,EAAUF,EAAa,WAAWI,iBAAiBtxB,EAAe,WAAWqd,SAASC,KAAM8T,IAGvFF,EAAa,WAAWI,iBAAiBF,EAASC,KAG3Dv/B,EAAQ,WAAaq/B,EACrBt/B,EAAOC,QAAUA,EAAQ,Y,qBCnCzB,IAAIy/B,EAAa,CAAC,GAAI,GAAI,EAAG,GAAI,IAAK,IAClCC,EAAY,CAAC,GAAI,GAAI,IAAK,GAAI,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,EAAG,GAAI,IAAK,KACjEC,EAAW,SAASrmB,GACtB,IAAI7S,EAAI,GACR,MAAO6S,IACL7S,EAAEwG,KAAK,GAET,OAAOxG,GAGLm5B,EAAY,SAASC,GACvB,OAAOr/B,OAAO0Q,KAAK2uB,GAAW9uB,QAAO,SAASzQ,EAAKgH,GAIjD,OAHAhH,EAAIgH,GAAO,IAAIsf,WAAWiZ,EAAUv4B,GAAKyJ,QAAO,SAAS+K,EAAKgkB,GAC5D,OAAOhkB,EAAI8d,OAAOkG,KACjB,KACIx/B,IACN,KAIDy/B,EAAgB,CAClBC,KAAO,CAACP,EAAY,CAAC,IAAK,IAAKE,EAAS,KAAM,CAAC,KAC/CM,MAAO,CAACR,EAAY,CAAC,KAAME,EAAS,KAAM,CAAC,KAC3CO,KAAO,CAACT,EAAY,CAAC,IAAK,KAAME,EAAS,KAAM,CAAC,KAChDQ,KAAO,CAACV,EAAY,CAAC,IAAK,KAAME,EAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,EAAS,IAAK,CAAC,MAC9ES,MAAO,CAACX,EAAY,CAAC,IAAK,KAAME,EAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,EAAS,IAAK,CAAC,MAC9EU,KAAO,CAACZ,EAAY,CAAC,IAAK,KAAME,EAAS,KAAM,CAAC,GAAI,KAAMA,EAAS,KAAM,CAAC,MAC1EW,KAAO,CAACb,EAAY,CAAC,IAAK,KAAME,EAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,EAAS,KAAM,CAAC,IAAK,KAAMA,EAAS,KAAM,CAAC,MAC1GY,KAAO,CAACd,EAAY,CAAC,IAAK,KAAME,EAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,EAAS,KAAM,CAAC,IAAK,KAAMA,EAAS,KAAM,CAAC,IAAK,KAAMA,EAAS,KAAM,CAAC,EAAG,MACxIa,KAAO,CAACd,EAAWC,EAAS,KAAM,CAAC,EAAG,IAAK,KAAMA,EAAS,KAAM,CAAC,EAAG,IAAK,KAAMA,EAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,EAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,EAAS,KAAM,CAAC,KAC7Jc,MAAO,CAACf,EAAWC,EAAS,KAAM,CAAC,EAAG,IAAK,KAAMA,EAAS,KAAM,CAAC,EAAG,IAAK,KAAMA,EAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,EAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,EAAS,KAAM,CAAC,GAAI,IAAK,KAAMA,EAAS,KAAM,CAAC,MAC5Le,IAAM,CAAChB,EAAWC,EAAS,KAAM,CAAC,EAAG,IAAK,IAAKA,EAAS,IAAK,CAAC,KAGhE5/B,EAAOC,QAAU4/B,EAAUG,I,qBClC3B,IAEEY,EACAC,EACAC,EACAC,EACAC,EACAC,EANAC,EAAmB,IAQrBN,EAAmB,SAASlqB,GAC1B,OAAOA,EAAUwqB,GAGnBL,EAAmB,SAASnqB,EAASyqB,GACnC,OAAOzqB,EAAUyqB,GAGnBL,EAAmB,SAASM,GAC1B,OAAOA,EAAYF,GAGrBH,EAAmB,SAASK,EAAWD,GACrC,OAAOC,EAAYD,GAGrBH,EAAmB,SAASI,EAAWD,GACrC,OAAOP,EAAiBG,EAAiBK,EAAWD,KAGtDF,EAAmB,SAASG,EAAWD,GACrC,OAAON,EAAiBC,EAAiBM,GAAYD,IAGvDnhC,EAAOC,QAAU,CACf2gC,iBAAkBA,EAClBC,iBAAkBA,EAClBC,iBAAkBA,EAClBC,iBAAkBA,EAClBC,iBAAkBA,EAClBC,iBAAkBA,I,qBCvCpBjhC,EAAOC,QAAU,80F,oCCEjB,IAEIohC,EAFAnO,EAAS,EAAQ,QAKnBoO,EAA4B,CAC1B,KACA,MACA,KACA,KACA,MACA,KACA,KACA,MACA,KACA,KACA,MACA,IACA,MAWJD,EAAa,WACX,IAAI9U,EAEJ8U,EAAW75B,UAAUof,KAAKlf,KAAK9C,MAE/BA,KAAKsI,KAAO,SAAS6sB,GACnB,IAGEwH,EACAC,EACAC,EACAC,EACAC,EACAC,EAPAx6B,EAAI,EACJy6B,EAAW,EAQb,GAAoB,UAAhB9H,EAAO/rB,KAAX,CAOIue,GACFmV,EAAYnV,EACZA,EAAS,IAAI1F,WAAW6a,EAAU3a,WAAagT,EAAOrsB,KAAKqZ,YAC3DwF,EAAOH,IAAIsV,GACXnV,EAAOH,IAAI2N,EAAOrsB,KAAMg0B,EAAU3a,aAElCwF,EAASwN,EAAOrsB,KAKlB,MAAOtG,EAAI,EAAImlB,EAAOzoB,OAGpB,GAAkB,MAAdyoB,EAAOnlB,IAA0C,OAAV,IAAhBmlB,EAAOnlB,EAAI,IAAtC,CAyBA,GAhBAo6B,EAAgD,GAAR,GAAhBjV,EAAOnlB,EAAI,IAInCm6B,GAAgC,EAAhBhV,EAAOnlB,EAAI,KAAc,GACtCmlB,EAAOnlB,EAAI,IAAM,GACA,IAAhBmlB,EAAOnlB,EAAI,KAAc,EAE7Bu6B,EAA6C,MAAL,GAAR,EAAhBpV,EAAOnlB,EAAI,KAC3Bw6B,EAAmC,IAAdD,EACnBL,GAA2C,GAAhB/U,EAAOnlB,EAAI,MAAe,GAEvDq6B,EAAWr6B,EAAIm6B,EAIXhV,EAAOxF,WAAa0a,EACtB,OAmBF,GAfA78B,KAAKmG,QAAQ,OAAQ,CACnBinB,IAAK+H,EAAO/H,IAAO6P,EAAWD,EAC9B3O,IAAK8G,EAAO9G,IAAO4O,EAAWD,EAC9BD,YAAaA,EACbG,gBAAkD,GAA/BvV,EAAOnlB,EAAI,KAAO,EAAK,GAC1C26B,cAAgC,EAAhBxV,EAAOnlB,EAAI,KAAW,GAClB,IAAhBmlB,EAAOnlB,EAAI,MAAe,EAC9B46B,WAAYV,GAA2C,GAAhB/U,EAAOnlB,EAAI,MAAe,GACjE66B,wBAAyC,GAAhB1V,EAAOnlB,EAAI,MAAe,EAEnD86B,WAAY,GACZx0B,KAAM6e,EAAOF,SAASjlB,EAAI,EAAIo6B,EAAqBC,KAIjDlV,EAAOxF,aAAe0a,EAExB,YADAlV,OAASlrB,GAIXwgC,IAGAtV,EAASA,EAAOF,SAASoV,QAlDvBr6B,MAqDNxC,KAAKoiB,MAAQ,WACXpiB,KAAKmG,QAAQ,UAIjBs2B,EAAW75B,UAAY,IAAI0rB,EAE3BlzB,EAAOC,QAAUohC,G,oCC9HjB5gC,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAaC,EAAIC,EAAKC,GAAO,IAAIC,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASoH,EAAIlmB,EAAWmmB,EAAKG,EAAWF,EAAKC,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA4O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAA/V,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BR,EAAKQ,EAAQP,EAAMnmB,EAAUomB,EAAME,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE5c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAIg5B,EAAkB,EAAQ,QAE1BC,EAAmB9hC,EAAuB6hC,GAE1C/zB,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCi0B,EAAqB,EAAQ,QAE7BC,EAAsBhiC,EAAuB+hC,GAE7CpU,EAAkB,EAAQ,QAE1BC,EAAmB5tB,EAAuB2tB,GAE1CsU,EAAc,EAAQ,QAWtBC,EAAmB,SAAW5T,GAGhC,SAAS4T,IACP,IAAI94B,EAAQ9E,KAEZ+D,EAAgB/D,KAAM49B,GAEtBpb,EAAK3mB,OAAOkJ,eAAe64B,EAAiBh7B,WAAY,cAAe5C,MAAM8C,KAAK9C,MAClFA,KAAK69B,cAAgB,GACrB79B,KAAKwX,WAAa,SAElBxX,KAAK6F,GAAG,CAAC,aAAc,qBAAqB,SAAU6Q,GAEpD5R,EAAMymB,OAASiS,EAAiB,WAAWM,eAAepnB,EAAMqnB,OAChEj5B,EAAMsmB,SAAU,EAAI3hB,EAAU,YAAY3E,EAAMymB,OAAOyS,YACvDl5B,EAAM3E,MAAQ2E,EAAMymB,OAAO9M,KAC3B3Z,EAAM0S,WAAa,OAEnB1S,EAAM3E,MAAM0F,GAAG,WAAW,WACxB,IAAIrD,EAAIsC,EAAM+4B,cAAc3+B,OAE5B,MAAOsD,IACLsC,EAAM+4B,cAAcr7B,GAAG0jB,WAKvBphB,EAAMymB,QACRzmB,EAAMymB,OAAO0S,cA4EnB,OAxGA55B,EAAUu5B,EAAkB5T,GAgD5BjnB,EAAa66B,EAAkB,CAAC,CAC9Bj7B,IAAK,oBACL5G,MAAO,cAWN,CACD4G,IAAK,kBACL5G,MAAO,SAAyBqN,GAC9B,IAAI80B,GAAa,EAAIP,EAAYQ,kBAAkB/0B,GAC/Cg1B,OAAe3hC,EAGnB,GAAwB,eAApByhC,EAAW90B,MAA6C,eAApB80B,EAAW90B,KAIjD,MAAM,IAAI7I,MAAM,gCAIlB,OANE69B,EAAe,IAAIV,EAAoB,WAAW19B,MAKpDA,KAAK69B,cAAcv1B,KAAK81B,GACjBA,IAWR,CACDz7B,IAAK,cACL5G,MAAO,SAAqBopB,GACZ,YAAVA,EAEFnlB,KAAKG,MAAMglB,MAAM,GACE,WAAVA,GAETnlB,KAAKG,MAAMglB,MAAM,GAEK,UAApBnlB,KAAKwX,aACPxX,KAAKwX,WAAa,QAClBxX,KAAKurB,OAAO8S,uBAKXT,EAzGc,CA0GpBn0B,EAAU,WAAWqd,aAExBzrB,EAAQ,WAAauiC,EACrB,IACE/hC,OAAOC,eAAe8hC,EAAiBh7B,UAAW,WAAY,CAO5DkH,IAAK,WACH,OAAK9J,KAAKurB,OAIHvrB,KAAKurB,OAAOO,gBAAgB,YAH1BtB,KAYXhD,IAAK,SAAazrB,GAChB,IAAIyG,OAAI/F,EACJ6hC,EAAct+B,KAAKurB,OAAOO,gBAAgB,YAI9C,GAFA9rB,KAAKurB,OAAOgT,gBAAgB,WAAYxiC,GAEpCA,EAAQuiC,EAGV,IAAK97B,EAAI,EAAGA,EAAIxC,KAAK69B,cAAc3+B,OAAQsD,IACzCxC,KAAK69B,cAAcr7B,GAAGg8B,OAAOziC,EAAOuiC,GAIxC,OAAOviC,KAGX,MAAOsb,GAIPumB,EAAiBh7B,UAAUjC,SAAW6pB,IAGxC,IAAK,IAAIjuB,KAAY+sB,EAAiB,WACpCsU,EAAiBrhC,GAAY+sB,EAAiB,WAAW/sB,GAE3DnB,EAAOC,QAAUA,EAAQ,Y,oCCtMzB,SAASK,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIuN,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCm1B,EAAgB,EAAQ,QAExBC,EAAY,EAAQ,QAUpBC,EAAkB,SAAyBx6B,GAC7CA,EAAKwS,UAAY,SAAUD,GACzB,IAAI5N,EAAO4N,EAAM5N,KACb81B,EAAY,IAAI3c,WAAWnZ,EAAK81B,UAAUzS,MAAOrjB,EAAK81B,UAAU1c,WAAYpZ,EAAK81B,UAAUzc,YAC3Fxf,EAAM,IAAIk8B,YAAY/1B,EAAKnG,IAAIwpB,MAAOrjB,EAAKnG,IAAIuf,WAAYpZ,EAAKnG,IAAIwf,WAAa,GACjFlb,EAAK,IAAI43B,YAAY/1B,EAAK7B,GAAGklB,MAAOrjB,EAAK7B,GAAGib,WAAYpZ,EAAK7B,GAAGkb,WAAa,GAGjF,IAAIsc,EAAcK,UAAUF,EAAWj8B,EAAKsE,GAAI,SAAUuoB,EAAKrD,GAC7D5iB,EAAe,WAAWsY,aAAY,EAAI6c,EAAUK,2BAA2B,CAC7Er8B,OAAQoG,EAAKpG,OACbs8B,UAAW7S,IACT,CAACA,EAAMxE,cAMjBtsB,EAAQ,WAAa,SAAU8I,GAC7B,OAAO,IAAIw6B,EAAgBx6B,IAG7B/I,EAAOC,QAAUA,EAAQ,Y,oCClCzBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAET,IAAIkjC,EAAY,SAAmBC,EAAO18B,GACxC,OAAO08B,EAAM3e,MAAM/d,GAAK,IAAM08B,EAAMlf,IAAIxd,IAStC28B,EAAkB,SAAyB9nB,EAAG7U,GAChD,IAAIzG,EAAQsb,EAAE4E,SAAS,IAEvB,MAAO,KAAKa,UAAU,EAAG,EAAI/gB,EAAMmD,QAAUnD,GAASyG,EAAI,EAAI,IAAM,KAElE48B,EAAoB,SAA2B/nB,GACjD,OAAIA,GAAK,IAAQA,EAAI,IACZyT,OAAOC,aAAa1T,GAEtB,KAaL0nB,EAA4B,SAAmC34B,GACjE,IAAIi5B,EAAe,GAgBnB,OAdAxjC,OAAO0Q,KAAKnG,GAAS2E,SAAQ,SAAUpI,GACrC,IAAI5G,EAAQqK,EAAQzD,GAEhB28B,YAAYC,OAAOxjC,GACrBsjC,EAAa18B,GAAO,CAClBwpB,MAAOpwB,EAAM4rB,OACbzF,WAAYnmB,EAAMmmB,WAClBC,WAAYpmB,EAAMomB,YAGpBkd,EAAa18B,GAAO5G,KAIjBsjC,GAOLG,EAAgB,SAAuBC,GACzC,IAAIp5B,EAAYo5B,EAAYp5B,WAAa,CACvCnH,OAAQqL,IACRjE,OAAQ,GAGV,MAAO,CAACD,EAAUnH,OAAQmH,EAAUC,OAAQm5B,EAAY5b,aAAaxH,KAAK,MAMxEqjB,EAAQ,CACVC,QAAS,SAAiB72B,GAOxB,IANA,IAAIqjB,EAAQlB,MAAMroB,UAAU5F,MAAM8F,KAAKgG,GACnC82B,EAAO,GACPpjC,EAAS,GACTqjC,OAAMpjC,EACNqjC,OAAQrjC,EAEH2xB,EAAI,EAAGA,EAAIjC,EAAMjtB,OAAS0gC,EAAMxR,IACvCyR,EAAM1T,EAAMnvB,MAAMoxB,EAAIwR,EAAMxR,EAAIwR,EAAOA,GAAMnhC,IAAI0gC,GAAiB9iB,KAAK,IACvEyjB,EAAQ3T,EAAMnvB,MAAMoxB,EAAIwR,EAAMxR,EAAIwR,EAAOA,GAAMnhC,IAAI2gC,GAAmB/iB,KAAK,IAC3E7f,GAAUqjC,EAAM,IAAMC,EAAQ,KAEhC,OAAOtjC,GAETujC,QAAS,SAAiB95B,GACxB,OAAOy5B,EAAMC,QAAQ15B,EAAIkmB,QAE3B6T,WAAY,SAAoBC,GAC9B,IAAIzjC,EAAS,GACTgG,OAAI/F,EAER,IAAK+F,EAAI,EAAGA,EAAIy9B,EAAO/gC,OAAQsD,IAC7BhG,GAAUyiC,EAAUgB,EAAQz9B,GAAK,IAEnC,OAAOhG,GAETuiC,0BAA2BA,EAC3BS,cAAeA,GAGjBnkC,EAAQ,WAAaqkC,EACrBtkC,EAAOC,QAAUA,EAAQ,Y,uBCnHzB,IAAIoD,EAAM,CACT,kBAAmB,OACnB,WAAY,OACZ,WAAY,OACZ,WAAY,OACZ,WAAY,OACZ,WAAY,OACZ,WAAY,OACZ,WAAY,OACZ,WAAY,OACZ,aAAc,OACd,WAAY,OACZ,UAAW,OACX,WAAY,OACZ,WAAY,OACZ,YAAa,OACb,WAAY,OACZ,aAAc,OACd,UAAW,OACX,WAAY,OACZ,WAAY,OACZ,UAAW,OACX,YAAa,OACb,YAAa,OACb,UAAW,OACX,UAAW,QAIZ,SAASyhC,EAAe9a,GACvB,IAAIvb,EAAKs2B,EAAsB/a,GAC/B,OAAOxK,EAAoB/Q,GAE5B,SAASs2B,EAAsB/a,GAC9B,IAAIxK,EAAoBO,EAAE1c,EAAK2mB,GAAM,CACpC,IAAI/N,EAAI,IAAI9W,MAAM,uBAAyB6kB,EAAM,KAEjD,MADA/N,EAAEqO,KAAO,mBACHrO,EAEP,OAAO5Y,EAAI2mB,GAEZ8a,EAAe3zB,KAAO,WACrB,OAAO1Q,OAAO0Q,KAAK9N,IAEpByhC,EAAeE,QAAUD,EACzB/kC,EAAOC,QAAU6kC,EACjBA,EAAer2B,GAAK,Q,qBC9CpBzO,EAAOC,QAAU,srG,qBCAjBD,EAAOC,QAAU,0gF,kCCKjBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAaC,EAAIC,EAAKC,GAAO,IAAIC,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASoH,EAAIlmB,EAAWmmB,EAAKG,EAAWF,EAAKC,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA4O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAA/V,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BR,EAAKQ,EAAQP,EAAMnmB,EAAUomB,EAAME,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE5c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAI87B,EAAkB,EAAQ,QAE1BC,EAAmB5kC,EAAuB2kC,GAE1CE,EAAc,EAAQ,QAEtBC,EAAiB,EAAQ,QAEzBC,EAAkB/kC,EAAuB8kC,GAEzCE,EAAoB,EAAQ,QAE5BC,EAAqBjlC,EAAuBglC,GAE5CtiB,EAAU,EAAQ,QAElBC,EAAW3iB,EAAuB0iB,GAElC5U,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCo3B,EAAa,EAAQ,QAErBC,EAAcnlC,EAAuBklC,GAErCE,EAAkB,EAAQ,QAE1BC,EAAmBrlC,EAAuBolC,GAE1CE,EAA2C,EAAQ,QAEnD7X,EAAc,EAAQ,QAEtBC,EAAe1tB,EAAuBytB,GAEtC8X,EAAmB,EAAQ,QAE3BC,EAAoBxlC,EAAuBulC,GAE3CjlC,EAAU,EAAQ,QAElBC,EAAWP,EAAuBM,GAElCI,EAAgB,EAAQ,QAExB+kC,EAAe,EAAQ,QAEvBC,EAAgC,IAEhCC,OAAM5kC,EAGN6kC,EAAgB,CAClBl/B,WAAY,OACZm/B,yBAA0B,UAE1BC,aAAc,KAKZC,EAAc,CAAC,gBAAiB,uBAAwB,wBAAyB,uBAAwB,wBAAyB,yBAClIC,EAAgB,SAAuBC,GACzC,OAAO3hC,KAAK4hC,oBAAoBD,GAAQ3hC,KAAK6hC,mBAAmBF,IAG9DG,EAAyB,WAC3B,IAAItlC,OAASC,EAEb,IACED,EAAwB,OACxB,MAAO6a,IAIT,OAAO7a,GAYLulC,EAAsB,SAA6BC,GACrD,OAAOA,EAAYhlB,QAAQ,uBAAuB,SAAUilB,GAC1D,OAAO,EAAIjB,EAAyCkB,uBAAuB,CAACD,IAAQ,OAIxF5mC,EAAQ0mC,oBAAsBA,EAQ9B,IAAII,EAAqB,SAA4B/4B,EAAMg5B,EAAWC,GAIpE,OAAOj5B,EAAO,IAAMg5B,EAAY,aAAeC,EAAOxjC,QAAO,SAAUmc,GACrE,QAASA,KACRqB,KAAK,MAAQ,KAQdimB,EAAmB,SAA0B/6B,GAK/C,OAAIA,EAAM3B,UAAY2B,EAAM3B,SAAS1G,QAAUqI,EAAM3B,SAAS,GAAGnH,IACxD,MAEF,QASL8jC,EAAY,SAAmBh7B,GAGjC,IAAIi7B,EAAkBj7B,EAAM9J,YAAc,GAE1C,OAAI+kC,EAAgBrgC,QACX,EAAI/F,EAAc8F,aAAasgC,EAAgBrgC,QAEjDm/B,GAiBLmB,EAAwB,SAA+BtkC,EAAQoJ,GACjE,IAAIm7B,EAAgBJ,EAAiB/6B,GACjCo7B,EAAYJ,EAAUh7B,GACtBi7B,EAAkBj7B,EAAM9J,YAAc,GAEtCmlC,GAAU,EACVC,GAAS,EAEb,IAAKt7B,EAEH,MAAO,GAGT,GAAIpJ,EAAOmJ,YAAYw7B,OAASN,EAAgBM,MAAO,CACrD,IAAIC,EAAa5kC,EAAOmJ,YAAYw7B,MAAMN,EAAgBM,OAG1D,GAAIC,EAKF,IAAK,IAAIC,KAJTH,GAAS,EAETD,GAAU,EAEUG,EAClB,IAAKA,EAAWC,GAASj8B,IAAK,CAC5B67B,GAAU,EACV,OAQJC,IAAWF,EAAUnB,eACvB/3B,EAAU,WAAWM,IAAIC,KAAK,+HAC9B24B,EAAUnB,aAAeF,EAAcE,cAIzC,IAAIyB,EAAe,GAEfN,EAAUvgC,aACZ6gC,EAAahQ,MAAQ,GAAK0P,EAAUvgC,WAAaugC,EAAUpB,0BAGzDoB,EAAUnB,eACZyB,EAAa9P,MAAQ,WAAawP,EAAUnB,cAK9C,IAAI0B,EAAYf,EAAmB,QAASO,EAAe,CAACO,EAAa9P,QACrEgQ,EAAYhB,EAAmB,QAASO,EAAe,CAACO,EAAahQ,QACrEmQ,EAAiBjB,EAAmB,QAASO,EAAe,CAACO,EAAahQ,MAAOgQ,EAAa9P,QAElG,OAAI0P,GACGD,GAAWK,EAAahQ,MACpB,CAACkQ,EAAWD,GAKd,CAACE,EAAgBF,GAKrBD,EAAahQ,MAMX,CAACmQ,GALC,CAACF,IAQZ7nC,EAAQonC,sBAAwBA,EAWhC,IAAIY,EAA2B,SAAWrZ,GAGxC,SAASqZ,EAAyB7kB,GAChC,IAAI1Z,EAAQ9E,KAEZ+D,EAAgB/D,KAAMqjC,GAEtB7gB,EAAK3mB,OAAOkJ,eAAes+B,EAAyBzgC,WAAY,cAAe5C,MAAM8C,KAAK9C,MAE1F,IAAI+L,EAAMyS,EAAQzS,IACdgZ,EAA0BvG,EAAQuG,wBAClCD,EAAkBtG,EAAQsG,gBAC1Bwe,EAAO9kB,EAAQ8kB,KACf7kB,EAAOD,EAAQC,KACf7f,EAAY4f,EAAQ5f,UACpB2kC,EAAY/kB,EAAQ+kB,UACpBC,EAAahlB,EAAQglB,WACrBC,EAAoBjlB,EAAQilB,kBAC5BC,EAA2BllB,EAAQklB,yBAEvC,IAAK33B,EACH,MAAM,IAAIxL,MAAM,wCAGlB8gC,EAAMkC,EAENvjC,KAAKG,MAAQse,EACbze,KAAK6kB,KAAOpG,EAAKmG,IACjB5kB,KAAK02B,MAAQ4M,EACbtjC,KAAK2jC,YAAcH,EACnBxjC,KAAKyjC,kBAAoBA,EACzBzjC,KAAK0jC,yBAA2BA,EAE5B1jC,KAAK2jC,cACP3jC,KAAK4jC,cAAgB5jC,KAAKG,MAAM0jC,aAAa,WAAY,WACzD7jC,KAAK4jC,cAAcE,gCAAkC,IAGvD9jC,KAAK+jC,gBAAkB,CACrBjf,gBAAiBA,EACjBC,wBAAyBA,EACzBif,QAAS,MAGXhkC,KAAKikC,aAAc,EAAI9C,EAAa+C,oBAEpClkC,KAAKiqB,YAAc,IAAIxgB,EAAU,WAAW06B,YAAY,CAAEb,KAAMA,IAGhEtjC,KAAKiqB,YAAYma,iBAAiB,aAAcpkC,KAAKqkC,kBAAkBjjC,KAAKpB,OAE5EA,KAAKskC,UAAY76B,EAAU,WAAWsiB,mBACtC/rB,KAAKukC,WAAa,WAChB,OAAO,GAGTvkC,KAAKwkC,gBAAkB,IAAIzD,EAAiB,WAAWviB,GACvDxe,KAAKykC,sBAAwBhmB,EAAKimB,mBAAmB,CACnDC,KAAM,WACNC,MAAO,qBACN,GAAO35B,MAEVjL,KAAK6kC,YAAa,EAAIzb,EAAa,YAAY8X,EAAkB,WAAYY,KAE7E,IAAIgD,EAAwB,CAC1BlgB,IAAK5kB,KAAK6kB,KACVoF,YAAajqB,KAAKiqB,YAClBvpB,YAAaV,KAAKG,MAAMO,YAAYU,KAAKpB,KAAKG,OAC9Cue,SAAU,WACR,OAAO5Z,EAAM4Z,YAEfkB,QAAS,WACP,OAAO9a,EAAM3E,MAAMyf,WAErBjf,SAAU,WACR,OAAOmE,EAAMmlB,YAAYtpB,UAE3BokC,UAAW,WACT,OAAOjgC,EAAMy/B,cAEfS,iBAAkB,WAChB,OAAOlgC,EAAMkgC,oBAEfpmC,UAAWA,EACXmC,eAAgBf,KAAKwkC,gBACrBS,UAAWjlC,KAAK6kC,YAIlB7kC,KAAKklC,sBAAwB,IAAI5E,EAAiB,WAAWv0B,EAAK/L,KAAK6kB,KAAM7kB,KAAK+jC,iBAClF/jC,KAAKmlC,sCAILnlC,KAAK6hC,mBAAqB,IAAIpB,EAAgB,WAAWh3B,EAAU,WAAWia,aAAaohB,EAAuB,CAChHM,qBAAsBplC,KAAKykC,sBAC3BY,WAAY,SACV7mB,GAGJxe,KAAK4hC,oBAAsB,IAAInB,EAAgB,WAAWh3B,EAAU,WAAWia,aAAaohB,EAAuB,CACjHO,WAAY,UACV7mB,GAEJxe,KAAKslC,uBAAyB,IAAI3E,EAAmB,WAAWl3B,EAAU,WAAWia,aAAaohB,EAAuB,CACvHO,WAAY,QACV7mB,GAEJxe,KAAKulC,+BAGL9D,EAAY12B,SAAQ,SAAU42B,GAC5B78B,EAAM68B,EAAO,KAAOD,EAActgC,KAAK0D,EAAO68B,MAGhD3hC,KAAKklC,sBAAsBxe,OAm9B7B,OAtkCAriB,EAAUg/B,EAA0BrZ,GA6HpCjnB,EAAasgC,EAA0B,CAAC,CACtC1gC,IAAK,sCACL5G,MAAO,WACL,IAAI4pB,EAAS3lB,KAEbA,KAAKklC,sBAAsBr/B,GAAG,kBAAkB,WAC9C,IAAI0B,EAAQoe,EAAOuf,sBAAsB39B,QACrCi+B,EAA+D,IAA9C7f,EAAOuf,sBAAsBx8B,eAAuB,KAIrE,EAAI63B,EAAYkF,0BAA0B9f,EAAOuf,sBAAsB/mC,OAAQwnB,EAAOuf,sBAAsB39B,SAC9Goe,EAAOoe,gBAAgBC,QAAU,EAEjCre,EAAOoe,gBAAgBC,QAAUwB,EAK/Bj+B,EAAMf,SAAsC,SAA3Bmf,EAAOxlB,MAAMulC,YAChC/f,EAAOkc,mBAAmBnjC,SAAS6I,EAAOoe,EAAOoe,iBACjDpe,EAAOkc,mBAAmBnb,SAG5B,EAAIya,EAAawE,kBAAkB,CACjCC,eAAgB,CACd9C,MAAOnd,EAAOic,oBACdiE,UAAWlgB,EAAO2f,uBAClBQ,KAAMngB,EAAOkc,oBAEfpjB,KAAMkH,EAAOxlB,MACb4lC,eAAgBpgB,EAAOoe,gBACvBiC,qBAAsBrgB,EAAOuf,sBAC7B5B,KAAM3d,EAAO+Q,MACb9R,IAAKe,EAAOd,KACZ1mB,OAAQwnB,EAAOxnB,SACf8nC,WAAYtgB,EAAOse,YACnBiC,yBAA0BvgB,EAAOugB,yBAAyB9kC,KAAKukB,KAGjEA,EAAOwgB,sBAAsBxgB,EAAOxnB,SAAUoJ,GAE9C,IACEoe,EAAOygB,sBACP,MAAO/uB,GAEP,OADA5N,EAAU,WAAWM,IAAIC,KAAK,iCAAkCqN,GACzDsO,EAAOsE,YAAYoc,YAAY,UAExC1gB,EAAO2gB,iBAEP3gB,EAAOxf,QAAQ,2BAGjBnG,KAAKklC,sBAAsBr/B,GAAG,kBAAkB,WAC9C,IAAI0gC,EAAkB5gB,EAAOuf,sBAAsB39B,QAEnD,IAAKg/B,EAAiB,CACpB,IAAIC,OAAgB/pC,EAYpB,OAVIkpB,EAAO+d,2BACT8C,EAAgB7gB,EAAO8gB,yBAGpBD,IACHA,EAAgB7gB,EAAO+gB,kBAGzB/gB,EAAOghB,cAAgBH,OACvB7gB,EAAOuf,sBAAsB39B,MAAMoe,EAAOghB,eAIxChhB,EAAOge,aACThe,EAAOihB,cAAcL,GAOvB5gB,EAAOkc,mBAAmBnjC,SAAS6nC,EAAiB5gB,EAAOoe,iBAC3Dpe,EAAOkhB,iBAKFlhB,EAAOxlB,MAAM0f,UAChB8F,EAAOkc,mBAAmBnb,OAGvB6f,EAAgB//B,SACnB,WACE,IAAIsgC,EAAmB,WACrB,IAAIpoB,EAAWiH,EAAOjH,WAEE,IAApBA,EAASxf,QACXymB,EAAOsE,YAAY8c,kBAAkBroB,EAAS6B,MAAM,GAAI7B,EAASsB,IAAI,KAIrE2F,EAAOhlB,aAAe4J,IACxB,WACE,IAAIy8B,EAAmB,SAASA,IAC1BrhB,EAAOhlB,aAAe4J,IACxBu8B,IAEAnhB,EAAOxlB,MAAMwrB,IAAI,iBAAkBqb,IAIvCrhB,EAAOxlB,MAAMwrB,IAAI,iBAAkBqb,GATrC,GAYAF,IAtBJ,MA4BJ9mC,KAAKklC,sBAAsBr/B,GAAG,SAAS,WACrC8f,EAAOugB,yBAAyBvgB,EAAOuf,sBAAsB/f,UAG/DnlB,KAAKklC,sBAAsBr/B,GAAG,iBAAiB,WAC7C8f,EAAOkc,mBAAmB3b,QAC1BP,EAAOkc,mBAAmBoF,WAG5BjnC,KAAKklC,sBAAsBr/B,GAAG,eAAe,WAC3C,IAAI0B,EAAQoe,EAAOuf,sBAAsB39B,QACrCi+B,EAA+D,IAA9C7f,EAAOuf,sBAAsBx8B,eAAuB,KAIrE,EAAI63B,EAAYkF,0BAA0B9f,EAAOuf,sBAAsB/mC,OAAQwnB,EAAOuf,sBAAsB39B,SAC9Goe,EAAOoe,gBAAgBC,QAAU,EAEjCre,EAAOoe,gBAAgBC,QAAUwB,EAOnC7f,EAAOkc,mBAAmBnjC,SAAS6I,EAAOoe,EAAOoe,iBACjDpe,EAAOkc,mBAAmBnb,OAE1Bf,EAAOxlB,MAAMgG,QAAQ,CACnBiD,KAAM,cACN89B,SAAS,OAIblnC,KAAKklC,sBAAsBr/B,GAAG,qBAAqB,WACjD,IAAI0gC,EAAkB5gB,EAAOuf,sBAAsB39B,QAC/C4/B,EAAmBxhB,EAAOyhB,oBAAoBb,GAE9CY,IAKFxhB,EAAOugB,yBAAyB,CAC9B9/B,QAAS,iCAGXuf,EAAOxlB,MAAMgG,QAAQ,qBAIzBnG,KAAKklC,sBAAsBr/B,GAAG,qBAAqB,WACjD8f,EAAOxlB,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,8BAE9C9N,KAAKklC,sBAAsBr/B,GAAG,oBAAoB,WAChD8f,EAAOxlB,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,+BAS/C,CACDnL,IAAK,wBACL5G,MAAO,SAA+BoC,EAAQoJ,GAC5C,IAAID,EAAcnJ,EAAOmJ,aAAe,GACpC+/B,GAAiB,EACjBC,EAAiBzrC,OAAO0Q,KAAKjF,EAAYw7B,OAE7C,IAAK,IAAI/8B,KAAcuB,EAAYw7B,MACjC,IAAK,IAAI8B,KAASt9B,EAAYw7B,MAAM/8B,GAAa,CAC/C,IAAIwhC,EAAajgC,EAAYw7B,MAAM/8B,GAAY6+B,GAE1C2C,EAAWxgC,MACdsgC,GAAiB,GAKnBA,GACFrnC,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,gBAGxCjS,OAAO0Q,KAAKjF,EAAYu+B,WAAW3mC,QACrCc,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,eAGxCuzB,EAAImG,SAASC,MAAMlgC,IACrBvH,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,YAGxCuzB,EAAImG,SAASE,OAAOngC,IACtBvH,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,aAGxCw5B,EAAepoC,QAAUrD,OAAO0Q,KAAKjF,EAAYw7B,MAAMwE,EAAe,KAAKpoC,OAAS,GACtFc,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,wBAGxC9N,KAAK2jC,aACP3jC,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,4BAU7C,CACDnL,IAAK,+BACL5G,MAAO,WACL,IAAIoqB,EAASnmB,KAEbA,KAAK6hC,mBAAmBh8B,GAAG,mBAAmB,WAC5C,IAAI8hC,EAAexhB,EAAOugB,iBACtBkB,EAAkBzhB,EAAO+e,sBAAsB39B,QAC/CuY,EAAWqG,EAAOhmB,MAAM2f,WACxB+nB,EAAgB/nB,EAAS5gB,OAAS4gB,EAASE,IAAIF,EAAS5gB,OAAS,GAAKinB,EAAOhmB,MAAMO,cAAgB,EAEnGonC,EAAqB3hB,EAAO2hB,uBAM3BF,EAAgBphC,SAGrB2f,EAAOxlB,WAAa1E,EAAS,WAAW8rC,2BAExCJ,EAAalqC,WAAWC,UAAYkqC,EAAgBnqC,WAAWC,WAG/DmqC,GAAiBC,IACf3hB,EAAO+e,sBAAsB39B,MAAMogC,GAGrCxhB,EAAOhmB,MAAMgG,QAAQ,sBAEvBnG,KAAK6hC,mBAAmBh8B,GAAG,YAAY,WACrCsgB,EAAOhgB,QAAQ,eAGjBnG,KAAK6hC,mBAAmBh8B,GAAG,SAAS,WAClCsgB,EAAO+f,yBAAyB/f,EAAO0b,mBAAmB1c,YAG5DnlB,KAAK6hC,mBAAmBh8B,GAAG,kBAAkB,WAC3CsgB,EAAO6hB,uBAGThoC,KAAK6hC,mBAAmBh8B,GAAG,mBAAmB,WAC5CsgB,EAAOhmB,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,4BAE9C9N,KAAK4hC,oBAAoB/7B,GAAG,kBAAkB,WAC5CsgB,EAAO6hB,uBAGThoC,KAAK6hC,mBAAmBh8B,GAAG,SAAS,WAClCsgB,EAAO8hB,mBAGTjoC,KAAK6hC,mBAAmBh8B,GAAG,cAAc,WACvCsgB,EAAO+f,yBAAyB,CAC9B9/B,QAAS,mGACRg7B,MAGLphC,KAAK6hC,mBAAmBh8B,GAAG,mBAAmB,WAG5CsgB,EAAOhmB,MAAMgG,QAAQ,gBAGvBnG,KAAK6hC,mBAAmBh8B,GAAG,sBAAsB,SAAU6Q,GAGzDyP,EAAOhmB,MAAMgG,QAAQ,CACnBiD,KAAM,2BACNkqB,QAAS5c,EAAM4c,aAInBtzB,KAAK4hC,oBAAoB/7B,GAAG,SAAS,WACnCsgB,EAAO8hB,qBAGV,CACDtlC,IAAK,sBACL5G,MAAO,WACL,OAAOsO,KAAKijB,IAAIttB,KAAK4hC,oBAAoBsG,mBAAqBloC,KAAK6hC,mBAAmBqG,sBAMvF,CACDvlC,IAAK,OACL5G,MAAO,WACLiE,KAAK6hC,mBAAmBnb,OACpB1mB,KAAKikC,YAAYnB,MAAMqF,sBACzBnoC,KAAK4hC,oBAAoBlb,OAEvB1mB,KAAKikC,YAAY4B,UAAUsC,sBAC7BnoC,KAAKslC,uBAAuB5e,SAY/B,CACD/jB,IAAK,qBACL5G,MAAO,WACL,IAAIwL,EAAQvH,KAAK0mC,iBAEbn/B,IAAUvH,KAAKklC,sBAAsB39B,UACvCvH,KAAKklC,sBAAsB39B,MAAMA,GAEjCvH,KAAK6hC,mBAAmBuG,iBAQ3B,CACDzlC,IAAK,OACL5G,MAAO,WACL,IAAIiE,KAAKsmC,iBAAT,CAIItmC,KAAKG,MAAMkoC,SACbroC,KAAKG,MAAMsgB,eAAe,GAGxBzgB,KAAKukC,cACPvkC,KAAK0mB,OAGP,IAAIhI,EAAW1e,KAAKG,MAAMue,WAI1B,OAAI1e,KAAKG,MAAMQ,aAAe4J,KACxBvK,KAAKG,MAAMO,cAAgBge,EAAS6B,MAAM,GACrCvgB,KAAKG,MAAMsgB,eAAe/B,EAASsB,IAAItB,EAASxf,OAAS,SAFpE,KAWD,CACDyD,IAAK,iBACL5G,MAAO,WACL,IAAI0qB,EAASzmB,KAETuH,EAAQvH,KAAKklC,sBAAsB39B,QAOvC,IAAKA,GAASvH,KAAKG,MAAM0f,UAAY7f,KAAKukC,aACxC,OAAO,EAIT,IAAKh9B,EAAMf,QAAS,CAClB,IAAI8hC,EAAQ,WACV,IAAI5pB,EAAW+H,EAAO/H,WAEtB,OAAKA,EAASxf,OAQVuK,EAAU,WAAW8+B,QAAQC,YAA+B,UAAjB/hB,EAAOiQ,OAAmD,IAA9BjQ,EAAOtmB,MAAMqX,cAGtFiP,EAAOtmB,MAAMwrB,IAAI,kBAAkB,WACjClF,EAAOtgB,QAAQ,aACfsgB,EAAOtmB,MAAMsgB,eAAe/B,EAASsB,IAAI,IACzCyG,EAAO8d,WAAa,WAClB,OAAO,MAIJ,CACLkE,GAAG,KAKPhiB,EAAOtgB,QAAQ,kBAEfsgB,EAAOtmB,MAAMsgB,eAAe/B,EAASsB,IAAI,KAxBhC,CACLyoB,GAAG,GAPG,GAiCZ,GAAqB,kBAAVH,EAAoB,OAAOA,EAAMG,EAQ9C,OALAzoC,KAAKukC,WAAa,WAChB,OAAO,GAGTvkC,KAAK0mB,QACE,IAQR,CACD/jB,IAAK,oBACL5G,MAAO,WAIL,IACEiE,KAAKomC,sBACL,MAAO/uB,GAEP,OADA5N,EAAU,WAAWM,IAAIC,KAAK,kCAAmCqN,GAC1DrX,KAAKiqB,YAAYoc,YAAY,UAMtC,GAAIrmC,KAAKG,MAAMuoC,WAAY,CACzB,IAAIC,EAAc3oC,KAAKG,MAAMyoC,OAIF,qBAAhBD,GAA2D,oBAArBA,EAAY5yB,MAC3D4yB,EAAY5yB,KAAK,MAAM,SAAUsB,OAIrCrX,KAAKmG,QAAQ,gBAWd,CACDxD,IAAK,gBACL5G,MAAO,WACL,IAAI8sC,EAAgB7oC,KAAK6hC,mBAAmBiH,OAExC9oC,KAAKikC,YAAYnB,MAAMqF,uBAGzBU,EAAgBA,GAAiB7oC,KAAK4hC,oBAAoBkH,QAGxDD,GACF7oC,KAAKiqB,YAAYoc,gBASpB,CACD1jC,IAAK,sBACL5G,MAAO,SAA6B2C,GAClC,IAAIggB,EAAW1e,KAAK0e,WAEpB,IAAKA,EAASxf,OAEZ,OAAO,EAGT,IAAI6pC,EAAU/oC,KAAKwkC,gBAAgBwE,eAAetqC,EAAUsB,KAAKiqB,YAAYtpB,UAE7E,GAAgB,OAAZooC,EACF,OAAO,EAKT,IAAIE,EAAsB5H,EAAImG,SAAS0B,YAAYxqC,EAAUqqC,GACzDroC,EAAcV,KAAKG,MAAMO,cACzBof,EAAW9f,KAAKG,MAAM2f,WAE1B,IAAKA,EAAS5gB,OAEZ,OAAO+pC,EAAsBvoC,GAAe2d,EAAS,WAAW0B,gBAElE,IAAIopB,EAAcrpB,EAASE,IAAIF,EAAS5gB,OAAS,GAIjD,OAAOiqC,EAAczoC,GAAe2d,EAAS,WAAW0B,iBAAmBkpB,EAAsBE,GAAe9qB,EAAS,WAAW0B,kBAarI,CACDpd,IAAK,2BACL5G,MAAO,SAAkCopB,EAAOse,QAChChnC,IAAV0oB,IAAqBA,EAAQ,IAEjC,IAAIyiB,OAAkBnrC,EAClBkrC,OAAelrC,EAYnB,GANAmrC,EAAkBziB,EAAMzmB,UAAYsB,KAAKklC,sBAAsB39B,QAE/Dk8B,EAAoBA,GAAqBte,EAAMse,mBAAqBzjC,KAAKyjC,mBAIpEmE,EAAiB,CACpB5nC,KAAKmlB,MAAQA,EAEb,IACE,OAAOnlB,KAAKiqB,YAAYoc,YAAY,WACpC,MAAOhvB,GACP,OAAOrX,KAAKmG,QAAQ,UAIxB,IAAIqgB,EAAwG,IAArFxmB,KAAKklC,sBAAsB/mC,OAAOK,UAAUK,OAAO0hC,EAAYthC,WAAWC,OAEjG,OAAIsnB,GAEF/c,EAAU,WAAWM,IAAIC,KAAK,mGAE9BhK,KAAKG,MAAMgG,QAAQ,iBACZnG,KAAKklC,sBAAsBxe,KAAKF,KAGzCohB,EAAgBwB,aAAe14B,KAAK24B,MAA4B,IAApB5F,EAC5CzjC,KAAKG,MAAMgG,QAAQ,qBACnBnG,KAAKG,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,8BAG1C65B,EAAe3nC,KAAK0mC,iBACpBj9B,EAAU,WAAWM,IAAIC,KAAK,sDAAwDmb,EAAM/e,QAAU,IAAM+e,EAAM/e,QAAU,IAAM,mCAE3HpG,KAAKklC,sBAAsB39B,MAAMogC,MAMzC,CACDhlC,IAAK,eACL5G,MAAO,WACLiE,KAAK6hC,mBAAmBoF,QACpBjnC,KAAKikC,YAAYnB,MAAMqF,sBACzBnoC,KAAK4hC,oBAAoBqF,QAEvBjnC,KAAKikC,YAAY4B,UAAUsC,sBAC7BnoC,KAAKslC,uBAAuB2B,UAU/B,CACDtkC,IAAK,iBACL5G,MAAO,SAAwB2E,GAC7B,IAAIof,EAAWzB,EAAS,WAAWsC,UAAU3gB,KAAKG,MAAM2f,WAAYpf,GAEpE,OAAMV,KAAKklC,uBAAyBllC,KAAKklC,sBAAsB39B,SAO1DvH,KAAKklC,sBAAsB39B,QAAQ3B,SAOpCka,GAAYA,EAAS5gB,QAAyB,UAAfc,KAAK02B,MAC/Bh2B,GAKTV,KAAK6hC,mBAAmByH,kBACxBtpC,KAAK6hC,mBAAmB3b,QACpBlmB,KAAKikC,YAAYnB,MAAMqF,uBACzBnoC,KAAK4hC,oBAAoB0H,kBACzBtpC,KAAK4hC,oBAAoB1b,SAEvBlmB,KAAKikC,YAAY4B,UAAUsC,uBAC7BnoC,KAAKslC,uBAAuBgE,kBAC5BtpC,KAAKslC,uBAAuBpf,cAI9BlmB,KAAK0mB,QA9BI,IAsCV,CACD/jB,IAAK,WACL5G,MAAO,WACL,OAAKiE,KAAKklC,sBAINllC,KAAKiqB,YACAjqB,KAAKiqB,YAAYtpB,SAGnB0gC,EAAImG,SAAS7mC,SAASX,KAAKklC,sBAAsB39B,SAP/C,IAeV,CACD5E,IAAK,WACL5G,MAAO,WACL,OAAOiE,KAAKskC,YAEb,CACD3hC,IAAK,oBACL5G,MAAO,WACL,IAAIwtC,OAAe9sC,EACf+sC,OAAgB/sC,EAEpB,GAAKuD,KAAKklC,sBAAV,CAIA,IAAI39B,EAAQvH,KAAKklC,sBAAsB39B,QAEvC,GAAKA,EAAL,CAIA,IAAIwhC,EAAU/oC,KAAKwkC,gBAAgBwE,eAAezhC,EAAOvH,KAAKiqB,YAAYtpB,UAE1E,GAAgB,OAAZooC,IAKJQ,EAAelI,EAAImG,SAAS9oB,SAASnX,EAAOwhC,GAEhB,IAAxBQ,EAAarqC,QAAjB,CAIA,GAAIc,KAAKikC,YAAYnB,MAAMqF,qBAAsB,CAI/C,GAHA5gC,EAAQvH,KAAKikC,YAAYnB,MAAMqF,qBAAqB5gC,QACpDwhC,EAAU/oC,KAAKwkC,gBAAgBwE,eAAezhC,EAAOvH,KAAKiqB,YAAYtpB,UAEtD,OAAZooC,EACF,OAKF,GAFAS,EAAgBnI,EAAImG,SAAS9oB,SAASnX,EAAOwhC,GAEhB,IAAzBS,EAActqC,OAChB,OAICsqC,EAIMA,EAAcjpB,MAAM,GAAKgpB,EAAavpB,IAAI,IAAMupB,EAAahpB,MAAM,GAAKipB,EAAcxpB,IAAI,GAEnGhgB,KAAKskC,UAAYiF,EAEjBvpC,KAAKskC,UAAY76B,EAAU,WAAWsiB,iBAAiB,CAAC,CAACyd,EAAcjpB,MAAM,GAAKgpB,EAAahpB,MAAM,GAAKipB,EAAcjpB,MAAM,GAAKgpB,EAAahpB,MAAM,GAAIipB,EAAcxpB,IAAI,GAAKupB,EAAavpB,IAAI,GAAKwpB,EAAcxpB,IAAI,GAAKupB,EAAavpB,IAAI,MAL/OhgB,KAAKskC,UAAYiF,EAQnBvpC,KAAKG,MAAMgG,QAAQ,wBAMpB,CACDxD,IAAK,iBACL5G,MAAO,WACL,IAAI4qB,EAAS3mB,KAETs+B,EAAct+B,KAAKiqB,YAAYtpB,SAC/B8oC,EAAcpI,EAAImG,SAAS7mC,SAASX,KAAKklC,sBAAsB39B,SAC/DuY,EAAW9f,KAAKG,MAAM2f,WACtB4pB,EAAc,SAASA,IACzB/iB,EAAOsD,YAAYtpB,SAAW8oC,EAC9B9iB,EAAOxmB,MAAMgG,QAAQ,kBAErBwgB,EAAOsD,YAAY0f,oBAAoB,aAAcD,IAGnD5pB,EAAS5gB,OAAS,IACpBuqC,EAAcp/B,KAAKijB,IAAImc,EAAa3pB,EAASE,IAAIF,EAAS5gB,OAAS,KAIjEo/B,IAAgBmL,IAEkB,SAAhCzpC,KAAKiqB,YAAYzS,WACnBxX,KAAKiqB,YAAYma,iBAAiB,aAAcsF,GAEhDA,OASL,CACD/mC,IAAK,UACL5G,MAAO,WACL,IAAI6tC,EAAS5pC,KAEbA,KAAK6kC,WAAW3Y,YAChBlsB,KAAKklC,sBAAsBpyB,UAC3B9S,KAAK6hC,mBAAmB/uB,UAExB,CAAC,QAAS,aAAa/H,SAAQ,SAAU3B,GACvC,IAAIygC,EAASD,EAAO3F,YAAY76B,GAAMygC,OAEtC,IAAK,IAAIhgC,KAAMggC,EACbA,EAAOhgC,GAAIkB,SAAQ,SAAU++B,GACvBA,EAAMC,gBACRD,EAAMC,eAAej3B,gBAM7B9S,KAAK4hC,oBAAoB9uB,UACzB9S,KAAKslC,uBAAuBxyB,YAQ7B,CACDnQ,IAAK,SACL5G,MAAO,WACL,OAAOiE,KAAKklC,sBAAsB/mC,SAQnC,CACDwE,IAAK,QACL5G,MAAO,WAEL,OAAOiE,KAAKklC,sBAAsB39B,SAAWvH,KAAK2mC,gBAQnD,CACDhkC,IAAK,sBACL5G,MAAO,WACL,IAAIwL,EAAQvH,KAAKklC,sBAAsB39B,QACnCyiC,OAAYvtC,EAIhB,GAAK8K,GAAyC,SAAhCvH,KAAKiqB,YAAYzS,WAA/B,CAKA,GADAwyB,EAAYvH,EAAsBziC,KAAKklC,sBAAsB/mC,OAAQoJ,GACjEyiC,EAAU9qC,OAAS,EAErB,OADAc,KAAKmlB,MAAQ,mEAAqE5d,EAAMsc,YACjF7jB,KAAKiqB,YAAYoc,YAAY,UAEtCrmC,KAAK6hC,mBAAmBoI,SAASD,EAAU,IACvCA,EAAU,IACZhqC,KAAK4hC,oBAAoBqI,SAASD,EAAU,IAK9ChqC,KAAKkqC,6BAA6B3iC,MAiBnC,CACD5E,IAAK,+BACL5G,MAAO,SAAsCwL,GAC3C,IAAIpJ,EAAS6B,KAAKklC,sBAAsB/mC,OACpCgsC,EAAa,EACb/nC,EAAa,KACbigC,OAAS5lC,EAET8K,EAAM9J,WAAW0E,SACnBkgC,GAAS,EAAIjmC,EAAc8F,aAAaqF,EAAM9J,WAAW0E,QACzDC,EAAaigC,EAAOjgC,WACpB+nC,EAAa9H,EAAO8H,YAEtBhsC,EAAOK,UAAUuM,SAAQ,SAAUq/B,GACjC,IAAIC,EAAgB,CAClBF,WAAY,EACZ/nC,WAAY,MAGd,GAAIgoC,EAAQ3sC,WAAW0E,OAAQ,CAC7B,IAAI6/B,EAAcoI,EAAQ3sC,WAAW0E,OAErCkoC,GAAgB,EAAIjuC,EAAc8F,aAAa8/B,GAE3CtlC,OAAOynC,aAAeznC,OAAOynC,YAAYmG,kBAAoB5tC,OAAOynC,YAAYmG,gBAAgB,sBAAwBvI,EAAoBC,GAAe,OAC7JoI,EAAQhB,aAAe7+B,KAMvB8/B,EAAcF,aAAeA,IAC/BC,EAAQhB,aAAe7+B,KAKrB8/B,EAAcjoC,aAAeA,IAC/BgoC,EAAQhB,aAAe7+B,UAI5B,CACD5H,IAAK,gBACL5G,MAAO,SAAuBwL,GAC5B,IAAIjB,EAAS,EACToY,EAAW1e,KAAK0e,WAEhBA,EAASxf,SACXoH,EAASoY,EAAS6B,MAAM,IAG1BsgB,EAAY,WAAW/Q,aAAavoB,EAAOvH,KAAK4jC,cAAet9B,KAQhE,CACD3D,IAAK,mBACL5G,MAAO,WACL,IAAI2E,EAAcV,KAAKG,MAAMO,cACzB6pC,EAAUtuC,EAAS,WAAWuuC,mBAC9BC,EAAOxuC,EAAS,WAAWyuC,wBAC3Bpd,EAAMjjB,KAAKijB,IAAIid,EAAStuC,EAAS,WAAW0uC,wBAEhD,OAAOtgC,KAAKoZ,IAAI8mB,EAAU7pC,EAAc+pC,EAAMnd,KAQ/C,CACD3qB,IAAK,qBACL5G,MAAO,WACL,IAAI2E,EAAcV,KAAKG,MAAMO,cACzB6pC,EAAUtuC,EAAS,WAAW2uC,sBAC9BH,EAAOxuC,EAAS,WAAW4uC,2BAC3Bvd,EAAMjjB,KAAKijB,IAAIid,EAAStuC,EAAS,WAAW8rC,2BAEhD,OAAO19B,KAAKoZ,IAAI8mB,EAAU7pC,EAAc+pC,EAAMnd,OAI3C+V,EAvkCsB,CAwkC5B55B,EAAU,WAAWqd,aAExBzrB,EAAQgoC,yBAA2BA,G;;;;;;;;;;;;ACt0CnC,SAASyH,EAAiBC,GAAM,OAAQA,GAAqB,kBAAPA,GAAoB,YAAaA,EAAMA,EAAG,WAAaA,EAE7G,IAAIruC,EAASouC,EAAgB,EAAQ,SACjCxxB,EAAWwxB,EAAgB,EAAQ,SACnCE,EAAOF,EAAgB,EAAQ,SAC/BG,EAAiBH,EAAgB,EAAQ,SACzC5lB,EAAM4lB,EAAgB,EAAQ,SAC9BI,EAAMJ,EAAgB,EAAQ,SAE9BK,EAAU,SAMVC,EAAa1uC,EAAO2uC,WAAa3uC,EAAO2uC,UAAUC,WAAa,GAC/DC,EAAmB,yBAAyBC,KAAKJ,GACjDK,EAAqBF,EAAmBxb,WAAWwb,EAAiBG,OAAS,KAS7EC,EAAU,QAAQvkC,KAAKgkC,GAKvBQ,EAAY,UAAUxkC,KAAKgkC,KAAgBO,EAC3CE,EAAU,QAAQzkC,KAAKgkC,GACvBU,EAASF,GAAaD,GAAWE,EAEjCE,EAAc,WAChB,IAAI9J,EAAQmJ,EAAWnJ,MAAM,cAE7B,OAAIA,GAASA,EAAM,GACVA,EAAM,GAER,KANS,GASd+J,EAAa,WAAW5kC,KAAKgkC,GAC7Ba,EAAkB,WAGpB,IAAIhK,EAAQmJ,EAAWnJ,MAAM,0CAE7B,IAAKA,EACH,OAAO,KAGT,IAAIiK,EAAQjK,EAAM,IAAMlS,WAAWkS,EAAM,IACrCkK,EAAQlK,EAAM,IAAMlS,WAAWkS,EAAM,IAEzC,OAAIiK,GAASC,EACJpc,WAAWkS,EAAM,GAAK,IAAMA,EAAM,IAChCiK,GAGJ,KAjBa,GAqBlBE,EAAiBJ,GAAc,UAAU5kC,KAAKgkC,IAAea,EAAkB,IAC/EI,EAAoBL,GAAcC,EAAkB,GAAKR,EAAqB,IAE9Ea,EAAa,WAAWllC,KAAKgkC,GAC7BmB,EAAU,QAAQnlC,KAAKgkC,GACvBoB,GAAaD,IAAY,UAAUnlC,KAAKgkC,IAAe,SAAShkC,KAAKgkC,IACrEqB,EAAiB,WACnB,IAAIxK,EAAQmJ,EAAWnJ,MAAM,yBAE7B,OAAIA,GAASA,EAAM,GACVlS,WAAWkS,EAAM,IAEnB,KANY,GAQjByK,EAAS,aAAatlC,KAAKgkC,GAC3B5C,EAAa,WACf,IAAIhsC,EAAS,kBAAkBgvC,KAAKJ,GAChCD,EAAU3uC,GAAUuzB,WAAWvzB,EAAO,IAO1C,OALK2uC,GAAW,gBAAgB/jC,KAAKgkC,IAAe,UAAUhkC,KAAKgkC,KAEjED,EAAU,IAGLA,EATQ,GAYbwB,EAAY,UAAUvlC,KAAKgkC,KAAgBoB,IAAcR,IAAeO,EACxEK,GAAiBD,GAAab,KAAYU,EAE1CK,EAAgBC,OAAa,iBAAkBpwC,GAAUA,EAAO2uC,UAAU0B,gBAAkBrwC,EAAOswC,eAAiBtwC,EAAO4c,oBAAoB5c,EAAOswC,eAEtJC,EAA4BH,MAAY,mBAAoBpwC,EAAO4c,SAASC,cAAc,SAAS2zB,MAEnG3E,GAAW1sC,OAAOsxC,QAAUtxC,QAAQ,CACvC8vC,QAASA,EACTC,UAAWA,EACXC,QAASA,EACTC,OAAQA,EACRC,YAAaA,EACbC,WAAYA,EACZC,gBAAiBA,EACjBG,eAAgBA,EAChBC,kBAAmBA,EACnBC,WAAYA,EACZC,QAASA,EACTC,UAAWA,EACXC,eAAgBA,EAChBC,OAAQA,EACRlE,WAAYA,EACZmE,UAAWA,EACXC,cAAeA,EACfC,cAAeA,EACfI,0BAA2BA,IAGxBG,EAA4B,oBAAXhe,QAAoD,kBAApBA,OAAOC,SAAwB,SAAU1zB,GAC5F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAyB,oBAAXyzB,QAAyBzzB,EAAI8I,cAAgB2qB,QAAUzzB,IAAQyzB,OAAOxsB,UAAY,gBAAkBjH,GAavH0xC,EAAiB,SAAUrpC,EAAUV,GACvC,KAAMU,aAAoBV,GACxB,MAAM,IAAIW,UAAU,sCAcpBqpC,EAAW,SAAUhpC,EAAUC,GACjC,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIN,UAAU,kEAAoEM,GAG1FD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CACrE6B,YAAa,CACX1I,MAAOuI,EACPnB,YAAY,EACZE,UAAU,EACVD,cAAc,KAGdmB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,IAazGgpC,EAA4B,SAAUppC,EAAMrB,GAC9C,IAAKqB,EACH,MAAM,IAAIC,eAAe,6DAG3B,OAAOtB,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BqB,EAAPrB,GAaxE0qC,EAA6B,SAAUC,EAASC,GAElD,OADAD,EAAQC,IAAMA,EACPD,GAiCLxxB,EAAWpgB,OAAO+G,UAAUqZ,SAc5B1P,EAAO,SAAc8O,GACvB,OAAOsyB,EAAStyB,GAAUxf,OAAO0Q,KAAK8O,GAAU,IAYlD,SAASuyB,EAAKvyB,EAAQK,GACpBnP,EAAK8O,GAAQtQ,SAAQ,SAAUpI,GAC7B,OAAO+Y,EAAGL,EAAO1Y,GAAMA,MAqB3B,SAASyJ,EAAOiP,EAAQK,GACtB,IAAI6uB,EAAU9nC,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,EAElF,OAAO8J,EAAK8O,GAAQjP,QAAO,SAAUyhC,EAAOlrC,GAC1C,OAAO+Y,EAAGmyB,EAAOxyB,EAAO1Y,GAAMA,KAC7B4nC,GAUL,SAASjoC,EAAOC,GACd,IAAK,IAAIurC,EAAOrrC,UAAUvD,OAAQkb,EAAU6Q,MAAM6iB,EAAO,EAAIA,EAAO,EAAI,GAAIxoC,EAAO,EAAGA,EAAOwoC,EAAMxoC,IACjG8U,EAAQ9U,EAAO,GAAK7C,UAAU6C,GAGhC,OAAIzJ,OAAOyG,OACFzG,OAAOyG,OAAO0oB,MAAMnvB,OAAQ,CAAC0G,GAAQ0yB,OAAO7a,KAGrDA,EAAQrP,SAAQ,SAAUrI,GACnBA,GAILkrC,EAAKlrC,GAAQ,SAAU3G,EAAO4G,GAC5BJ,EAAOI,GAAO5G,QAIXwG,GAaT,SAASorC,EAAS5xC,GAChB,QAASA,GAA2E,YAAhD,qBAAVA,EAAwB,YAAcqxC,EAAQrxC,IAU1E,SAASgyC,EAAQhyC,GACf,OAAO4xC,EAAS5xC,IAAmC,oBAAzBkgB,EAASnZ,KAAK/G,IAAgCA,EAAM0I,cAAgB5I,OAOhG,IAAIkO,OAAM,EAGNikC,EAAQ,OAGRC,EAAU,GAgBVC,EAAY,SAAmB9kC,EAAMulB,GACvC,IAAIrU,EAAY7X,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,KAAO+lC,GAAcA,EAAa,GAE7G2F,EAAMpkC,EAAIqkC,OAAOJ,GACjBK,EAAY,IAAIC,OAAO,KAAOH,EAAM,MAkBxC,GAhBa,QAAT/kC,GAGFulB,EAAK4f,QAAQnlC,EAAKolC,cAAgB,KAIhCP,GACFA,EAAQ3lC,KAAK,GAAG2sB,OAAOtG,IAIzBA,EAAK4f,QAAQ,YAIR7xC,EAAO+U,QAAZ,CAOA,IAAIiK,EAAKhf,EAAO+U,QAAQrI,GAEnBsS,GAAe,UAATtS,IAGTsS,EAAKhf,EAAO+U,QAAQg9B,MAAQ/xC,EAAO+U,QAAQ1H,KAKxC2R,GAAOyyB,GAAQE,EAAUjnC,KAAKgC,KAM/BkR,IACFqU,EAAOA,EAAKlwB,KAAI,SAAUqD,GACxB,GAAI6rC,EAAS7rC,IAAMmpB,MAAMwE,QAAQ3tB,GAC/B,IACE,OAAOyY,KAAKD,UAAUxY,GACtB,MAAO4sC,GACP,OAAO5jB,OAAOhpB,GAMlB,OAAOgpB,OAAOhpB,MACbua,KAAK,MAKLX,EAAGsP,MAGNtP,EAAGuP,MAAMwE,QAAQd,GAAQ,QAAU,QAAQjyB,EAAO+U,QAASkd,GAF3DjT,EAAGiT,MAaP5kB,EAAM,WACJ,IAAK,IAAI+jC,EAAOrrC,UAAUvD,OAAQyvB,EAAO1D,MAAM6iB,GAAOxoC,EAAO,EAAGA,EAAOwoC,EAAMxoC,IAC3EqpB,EAAKrpB,GAAQ7C,UAAU6C,GAGzB4oC,EAAU,MAAOvf,IAsBnB5kB,EAAIqkC,OAAS,CACXO,IAAK,uBACLlvB,IAAK,GACLV,MAAO,uBACP0vB,KAAM,iBACNzkC,KAAM,aACNmb,MAAO,QACPxd,QAASqmC,GAcXjkC,EAAIikC,MAAQ,SAAUG,GACpB,GAAmB,kBAARA,EAAkB,CAC3B,IAAKpkC,EAAIqkC,OAAOvrC,eAAesrC,GAC7B,MAAM,IAAI5tC,MAAM,IAAM4tC,EAAM,8BAE9BH,EAAQG,EAEV,OAAOH,GAYTjkC,EAAIkkC,QAAU,WACZ,OAAOA,EAAU,GAAGhZ,OAAOgZ,GAAW,IAOxClkC,EAAIkkC,QAAQW,MAAQ,WACdX,IACFA,EAAQ/uC,OAAS,IAOrB6K,EAAIkkC,QAAQY,QAAU,WACJ,OAAZZ,IACFA,EAAQ/uC,OAAS,EACjB+uC,EAAU,OAOdlkC,EAAIkkC,QAAQa,OAAS,WACH,OAAZb,IACFA,EAAU,KAUdlkC,EAAIob,MAAQ,WACV,IAAK,IAAI4pB,EAAQtsC,UAAUvD,OAAQyvB,EAAO1D,MAAM8jB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAChFrgB,EAAKqgB,GAASvsC,UAAUusC,GAG1B,OAAOd,EAAU,QAASvf,IAS5B5kB,EAAIC,KAAO,WACT,IAAK,IAAIilC,EAAQxsC,UAAUvD,OAAQyvB,EAAO1D,MAAMgkB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAChFvgB,EAAKugB,GAASzsC,UAAUysC,GAG1B,OAAOhB,EAAU,OAAQvf,IAU3B5kB,EAAIgV,MAAQ,WACV,IAAK,IAAIowB,EAAQ1sC,UAAUvD,OAAQyvB,EAAO1D,MAAMkkB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAChFzgB,EAAKygB,GAAS3sC,UAAU2sC,GAG1B,OAAOlB,EAAU,QAASvf,IAG5B,IAAI0gB,EAAQtlC,EAwBZ,SAASulC,EAAchzC,EAAIizC,GACzB,IAAKjzC,IAAOizC,EACV,MAAO,GAGT,GAAuC,oBAA5B7yC,EAAOC,iBAAiC,CACjD,IAAI6yC,EAAK9yC,EAAOC,iBAAiBL,GAEjC,OAAOkzC,EAAKA,EAAGD,GAAQ,GAGzB,OAAOjzC,EAAGmzC,aAAaF,IAAS,GAGlC,IAAIG,EAAkBlC,EAA2B,CAAC,4MAA6M,OAAQ,KAAM,CAAC,4MAA6M,OAAQ,MAiBne,SAASmC,EAAiBC,GACxB,MAAsB,kBAARA,GAAoB,KAAKxoC,KAAKwoC,GAc9C,SAASC,GAAkBD,GACzB,GAAI,KAAKxoC,KAAKwoC,GACZ,MAAM,IAAIrvC,MAAM,2CAcpB,SAASuvC,GAAYC,GACnB,OAAO,IAAIzB,OAAO,UAAYyB,EAAY,WAQ5C,SAASjD,KACP,OAGExzB,IAAa5c,EAAO4c,UAIc,qBAA3BA,EAASC,cAcpB,SAASy2B,GAAKj0C,GACZ,OAAO4xC,EAAS5xC,IAA6B,IAAnBA,EAAMk0C,SASlC,SAASC,KAIP,IACE,OAAOxzC,EAAOumB,SAAWvmB,EAAOyH,KAChC,MAAOuqC,GACP,OAAO,GAaX,SAASyB,GAAcrpC,GACrB,OAAO,SAAUspC,EAAUC,GACzB,IAAKV,EAAiBS,GACpB,OAAO92B,EAASxS,GAAQ,MAEtB6oC,EAAiBU,KACnBA,EAAU/2B,EAASg3B,cAAcD,IAGnC,IAAIE,EAAMP,GAAKK,GAAWA,EAAU/2B,EAEpC,OAAOi3B,EAAIzpC,IAAWypC,EAAIzpC,GAAQspC,IAsBtC,SAASI,KACP,IAAIC,EAAUhuC,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,MAC9E8kC,EAAa9kC,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GACjFhF,EAAagF,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GACjFwT,EAAUxT,UAAU,GAEpBnG,EAAKgd,EAASC,cAAck3B,GA6BhC,OA3BA50C,OAAO60C,oBAAoBnJ,GAAYx8B,SAAQ,SAAU4lC,GACvD,IAAIxhC,EAAMo4B,EAAWoJ,IAKc,IAA/BA,EAAStzC,QAAQ,UAAgC,SAAbszC,GAAoC,SAAbA,GAC7DtB,EAAMrlC,KAAKghC,EAAK0E,EAAiBiB,EAAUxhC,IAC3C7S,EAAGs0C,aAAaD,EAAUxhC,IAIJ,gBAAbwhC,EACTE,GAAYv0C,EAAI6S,GAEhB7S,EAAGq0C,GAAYxhC,KAInBtT,OAAO60C,oBAAoBjzC,GAAYsN,SAAQ,SAAU+lC,GACvDx0C,EAAGs0C,aAAaE,EAAUrzC,EAAWqzC,OAGnC76B,GACF86B,GAAcz0C,EAAI2Z,GAGb3Z,EAeT,SAASu0C,GAAYv0C,EAAIkP,GAMvB,MAL8B,qBAAnBlP,EAAGu0C,YACZv0C,EAAG00C,UAAYxlC,EAEflP,EAAGu0C,YAAcrlC,EAEZlP,EAYT,SAAS20C,GAAUC,EAAOjuB,GACpBA,EAAOkuB,WACTluB,EAAOmuB,aAAaF,EAAOjuB,EAAOkuB,YAElCluB,EAAOouB,YAAYH,GAoBvB,SAASI,GAASC,EAASC,GAEzB,OADA3B,GAAkB2B,GACdD,EAAQE,UACHF,EAAQE,UAAUC,SAASF,GAE7B1B,GAAY0B,GAAcpqC,KAAKmqC,EAAQxB,WAehD,SAAS4B,GAASJ,EAASK,GAUzB,OATIL,EAAQE,UACVF,EAAQE,UAAUI,IAAID,GAIZN,GAASC,EAASK,KAC5BL,EAAQxB,WAAawB,EAAQxB,UAAY,IAAM6B,GAAYtZ,QAGtDiZ,EAeT,SAASO,GAAYP,EAASQ,GAU5B,OATIR,EAAQE,UACVF,EAAQE,UAAUjT,OAAOuT,IAEzBlC,GAAkBkC,GAClBR,EAAQxB,UAAYwB,EAAQxB,UAAU5f,MAAM,OAAOtxB,QAAO,SAAUmc,GAClE,OAAOA,IAAM+2B,KACZ11B,KAAK,MAGHk1B,EAmCT,SAASS,GAAYT,EAASU,EAAeC,GAK3C,IAAIC,EAAMb,GAASC,EAASU,GAY5B,GAVyB,oBAAdC,IACTA,EAAYA,EAAUX,EAASU,IAGR,mBAAdC,IACTA,GAAaC,GAKXD,IAAcC,EAUlB,OANID,EACFP,GAASJ,EAASU,GAElBH,GAAYP,EAASU,GAGhBV,EAYT,SAASa,GAAc91C,EAAImB,GACzB5B,OAAO60C,oBAAoBjzC,GAAYsN,SAAQ,SAAU+lC,GACvD,IAAIuB,EAAY50C,EAAWqzC,GAET,OAAduB,GAA2C,qBAAdA,IAA2C,IAAdA,EAC5D/1C,EAAGg2C,gBAAgBxB,GAEnBx0C,EAAGs0C,aAAaE,GAAwB,IAAduB,EAAqB,GAAKA,MAiB1D,SAASE,GAActsC,GACrB,IAAItK,EAAM,GAKN62C,EAAgB,kEAEpB,GAAIvsC,GAAOA,EAAIxI,YAAcwI,EAAIxI,WAAWyB,OAAS,EAGnD,IAFA,IAAIgO,EAAQjH,EAAIxI,WAEP+E,EAAI0K,EAAMhO,OAAS,EAAGsD,GAAK,EAAGA,IAAK,CAC1C,IAAIsuC,EAAW5jC,EAAM1K,GAAGsL,KACpB2kC,EAAUvlC,EAAM1K,GAAGzG,MAIM,mBAAlBkK,EAAI6qC,KAA4E,IAAjD0B,EAAcn1C,QAAQ,IAAMyzC,EAAW,OAI/E2B,EAAsB,OAAZA,GAGZ92C,EAAIm1C,GAAY2B,EAIpB,OAAO92C,EAeT,SAAS+2C,GAAap2C,EAAIq2C,GACxB,OAAOr2C,EAAGo2C,aAAaC,GAezB,SAAS/B,GAAat0C,EAAIq2C,EAAW52C,GACnCO,EAAGs0C,aAAa+B,EAAW52C,GAY7B,SAASu2C,GAAgBh2C,EAAIq2C,GAC3Br2C,EAAGg2C,gBAAgBK,GAMrB,SAASC,KACPt5B,EAASu5B,KAAKC,QACdx5B,EAASy5B,cAAgB,WACvB,OAAO,GAOX,SAASC,KACP15B,EAASy5B,cAAgB,WACvB,OAAO,GAuBX,SAASE,GAAsB32C,GAC7B,GAAIA,GAAMA,EAAG22C,uBAAyB32C,EAAG0hC,WAAY,CACnD,IAAIkV,EAAO52C,EAAG22C,wBACVz2C,EAAS,GAgBb,MAdA,CAAC,SAAU,SAAU,OAAQ,QAAS,MAAO,SAASuO,SAAQ,SAAUooC,QACtD12C,IAAZy2C,EAAKC,KACP32C,EAAO22C,GAAKD,EAAKC,OAIhB32C,EAAOmC,SACVnC,EAAOmC,OAASoxB,WAAWuf,EAAchzC,EAAI,YAG1CE,EAAOyB,QACVzB,EAAOyB,MAAQ8xB,WAAWuf,EAAchzC,EAAI,WAGvCE,GA6BX,SAAS42C,GAAa92C,GACpB,IAAI+2C,OAAM,EAMV,GAJI/2C,EAAG22C,uBAAyB32C,EAAG0hC,aACjCqV,EAAM/2C,EAAG22C,0BAGNI,EACH,MAAO,CACLn2C,KAAM,EACNo2C,IAAK,GAIT,IAAIC,EAAQj6B,EAASk6B,gBACjBX,EAAOv5B,EAASu5B,KAEhBY,EAAaF,EAAME,YAAcZ,EAAKY,YAAc,EACpDC,EAAah3C,EAAOi3C,aAAed,EAAKa,WACxCx2C,EAAOm2C,EAAIn2C,KAAOw2C,EAAaD,EAE/BG,EAAYL,EAAMK,WAAaf,EAAKe,WAAa,EACjDC,EAAYn3C,EAAOo3C,aAAejB,EAAKgB,UACvCP,EAAMD,EAAIC,IAAMO,EAAYD,EAGhC,MAAO,CACL12C,KAAMmN,KAAK4G,MAAM/T,GACjBo2C,IAAKjpC,KAAK4G,MAAMqiC,IA+BpB,SAASS,GAAmBz3C,EAAIoa,GAC9B,IAAI4B,EAAW,GACX+6B,EAAMD,GAAa92C,GACnB03C,EAAO13C,EAAG23C,YACVC,EAAO53C,EAAG63C,aAEVC,EAAOf,EAAIC,IACXe,EAAOhB,EAAIn2C,KACXo3C,EAAQ59B,EAAM49B,MACdC,EAAQ79B,EAAM69B,MAUlB,OARI79B,EAAM89B,iBACRD,EAAQ79B,EAAM89B,eAAe,GAAGD,MAChCD,EAAQ59B,EAAM89B,eAAe,GAAGF,OAGlCh8B,EAASm8B,EAAIpqC,KAAKijB,IAAI,EAAGjjB,KAAKoZ,IAAI,GAAI2wB,EAAOE,EAAQJ,GAAQA,IAC7D57B,EAASo2B,EAAIrkC,KAAKijB,IAAI,EAAGjjB,KAAKoZ,IAAI,GAAI8wB,EAAQF,GAAQL,IAE/C17B,EAaT,SAASo8B,GAAW34C,GAClB,OAAO4xC,EAAS5xC,IAA6B,IAAnBA,EAAMk0C,SAYlC,SAAS0E,GAAQr4C,GACf,MAAOA,EAAG60C,WACR70C,EAAGs4C,YAAYt4C,EAAG60C,YAEpB,OAAO70C,EAwBT,SAASu4C,GAAiB5+B,GAUxB,MANuB,oBAAZA,IACTA,EAAUA,MAKJgV,MAAMwE,QAAQxZ,GAAWA,EAAU,CAACA,IAAUxX,KAAI,SAAU1C,GAQlE,MAJqB,oBAAVA,IACTA,EAAQA,KAGNi0C,GAAKj0C,IAAU24C,GAAW34C,GACrBA,EAGY,kBAAVA,GAAsB,KAAKqL,KAAKrL,GAClCud,EAASw7B,eAAe/4C,QADjC,KAGC8C,QAAO,SAAU9C,GAClB,OAAOA,KAiBX,SAASg1C,GAAcz0C,EAAI2Z,GAIzB,OAHA4+B,GAAiB5+B,GAASlL,SAAQ,SAAUgqC,GAC1C,OAAOz4C,EAAG+0C,YAAY0D,MAEjBz4C,EAiBT,SAAS04C,GAAc14C,EAAI2Z,GACzB,OAAO86B,GAAc4D,GAAQr4C,GAAK2Z,GAapC,SAASg/B,GAAkBv+B,GAKzB,YAAqBja,IAAjBia,EAAMw+B,aAA0Cz4C,IAAlBia,EAAMy+B,UAgBnB,IAAjBz+B,EAAMw+B,aAAkCz4C,IAAlBia,EAAMy+B,UAOb,IAAf3M,GAMiB,IAAjB9xB,EAAMw+B,QAAkC,IAAlBx+B,EAAMy+B,UA4BlC,IAAIC,GAAIjF,GAAc,iBAmBlBkF,GAAKlF,GAAc,oBAInBmF,IAAOz5C,OAAOsxC,QAAUtxC,QAAQ,CACnCixC,OAAQA,GACRkD,KAAMA,GACNE,UAAWA,GACXM,SAAUA,GACVK,YAAaA,GACbI,UAAWA,GACXK,SAAUA,GACVK,SAAUA,GACVG,YAAaA,GACbE,YAAaA,GACbI,cAAeA,GACfG,cAAeA,GACfG,aAAcA,GACd9B,aAAcA,GACd0B,gBAAiBA,GACjBM,mBAAoBA,GACpBI,qBAAsBA,GACtBC,sBAAuBA,GACvBG,aAAcA,GACdW,mBAAoBA,GACpBW,WAAYA,GACZC,QAASA,GACTE,iBAAkBA,GAClB9D,cAAeA,GACfiE,cAAeA,GACfC,kBAAmBA,GACnBG,EAAGA,GACHC,GAAIA,KAYDE,GAAQ,EAQZ,SAASC,KACP,OAAOD,KAiBT,IAAIE,GAAS,GASTC,GAAW,SAAU,IAAIhlC,MAAOC,UAWpC,SAASglC,GAAQr5C,GACf,IAAIuN,EAAKvN,EAAGo5C,IAUZ,OARK7rC,IACHA,EAAKvN,EAAGo5C,IAAYF,MAGjBC,GAAO5rC,KACV4rC,GAAO5rC,GAAM,IAGR4rC,GAAO5rC,GAahB,SAAS+rC,GAAQt5C,GACf,IAAIuN,EAAKvN,EAAGo5C,IAEZ,QAAK7rC,KAIIhO,OAAO60C,oBAAoB+E,GAAO5rC,IAAK3K,OASlD,SAAS22C,GAAWv5C,GAClB,IAAIuN,EAAKvN,EAAGo5C,IAEZ,GAAK7rC,EAAL,QAKO4rC,GAAO5rC,GAGd,WACSvN,EAAGo5C,IACV,MAAOr+B,GACH/a,EAAGg2C,gBACLh2C,EAAGg2C,gBAAgBoD,IAGnBp5C,EAAGo5C,IAAY,OAuBrB,SAASI,GAAez8B,EAAMjQ,GAC5B,IAAIN,EAAO6sC,GAAQt8B,GAGgB,IAA/BvQ,EAAKitC,SAAS3sC,GAAMlK,gBACf4J,EAAKitC,SAAS3sC,GAKjBiQ,EAAKswB,oBACPtwB,EAAKswB,oBAAoBvgC,EAAMN,EAAKktC,YAAY,GACvC38B,EAAK48B,aACd58B,EAAK48B,YAAY,KAAO7sC,EAAMN,EAAKktC,aAKnCn6C,OAAO60C,oBAAoB5nC,EAAKitC,UAAU72C,QAAU,WAC/C4J,EAAKitC,gBACLjtC,EAAKktC,kBACLltC,EAAKotC,UAIkC,IAA5Cr6C,OAAO60C,oBAAoB5nC,GAAM5J,QACnC22C,GAAWx8B,GAmBf,SAAS88B,GAAsBz6B,EAAIrC,EAAM+8B,EAAOC,GAC9CD,EAAMrrC,SAAQ,SAAU3B,GAEtBsS,EAAGrC,EAAMjQ,EAAMitC,MAanB,SAASC,GAAS5/B,GAEhB,SAAS6/B,IACP,OAAO,EAGT,SAASC,IACP,OAAO,EAQT,IAAK9/B,IAAUA,EAAM+/B,qBAAsB,CACzC,IAAIC,EAAMhgC,GAASha,EAAOga,MAQ1B,IAAK,IAAI/T,KANT+T,EAAQ,GAMQggC,EAIF,WAAR/zC,GAA4B,WAARA,GAA4B,gBAARA,GAAiC,oBAARA,GAAqC,oBAARA,IAGlF,gBAARA,GAAyB+zC,EAAIC,iBACjCjgC,EAAM/T,GAAO+zC,EAAI/zC,KAmDvB,GA7CK+T,EAAMnU,SACTmU,EAAMnU,OAASmU,EAAMkgC,YAAct9B,GAIhC5C,EAAMmgC,gBACTngC,EAAMmgC,cAAgBngC,EAAMogC,cAAgBpgC,EAAMnU,OAASmU,EAAMqgC,UAAYrgC,EAAMogC,aAIrFpgC,EAAMigC,eAAiB,WACjBD,EAAIC,gBACND,EAAIC,iBAENjgC,EAAMsgC,aAAc,EACpBN,EAAIM,aAAc,EAClBtgC,EAAMugC,kBAAmB,GAG3BvgC,EAAMugC,kBAAmB,EAGzBvgC,EAAMwgC,gBAAkB,WAClBR,EAAIQ,iBACNR,EAAIQ,kBAENxgC,EAAMygC,cAAe,EACrBT,EAAIS,cAAe,EACnBzgC,EAAM+/B,qBAAuBF,GAG/B7/B,EAAM+/B,qBAAuBD,EAG7B9/B,EAAM0gC,yBAA2B,WAC3BV,EAAIU,0BACNV,EAAIU,2BAEN1gC,EAAM2gC,8BAAgCd,EACtC7/B,EAAMwgC,mBAGRxgC,EAAM2gC,8BAAgCb,EAGhB,OAAlB9/B,EAAM4gC,cAAsC76C,IAAlBia,EAAM4gC,QAAuB,CACzD,IAAIC,EAAMj+B,EAASk6B,gBACfX,EAAOv5B,EAASu5B,KAEpBn8B,EAAM69B,MAAQ79B,EAAM4gC,SAAWC,GAAOA,EAAI7D,YAAcb,GAAQA,EAAKa,YAAc,IAAM6D,GAAOA,EAAI9D,YAAcZ,GAAQA,EAAKY,YAAc,GAC7I/8B,EAAM49B,MAAQ59B,EAAM8gC,SAAWD,GAAOA,EAAI1D,WAAahB,GAAQA,EAAKgB,WAAa,IAAM0D,GAAOA,EAAI3D,WAAaf,GAAQA,EAAKe,WAAa,GAI3Il9B,EAAM+gC,MAAQ/gC,EAAMghC,UAAYhhC,EAAMihC,QAIjB,OAAjBjhC,EAAMw+B,aAAoCz4C,IAAjBia,EAAMw+B,SAKjCx+B,EAAMw+B,OAAwB,EAAfx+B,EAAMw+B,OAAa,EAAmB,EAAfx+B,EAAMw+B,OAAa,EAAmB,EAAfx+B,EAAMw+B,OAAa,EAAI,GAMxF,OAAOx+B,EAMT,IAAIkhC,IAAmB,GAEvB,WACE,IACE,IAAIC,EAAOh8C,OAAOC,eAAe,GAAI,UAAW,CAC9CgO,IAAK,WACH8tC,IAAmB,KAIvBl7C,EAAO0nC,iBAAiB,OAAQ,KAAMyT,GACtCn7C,EAAOitC,oBAAoB,OAAQ,KAAMkO,GACzC,MAAOxgC,MAVX,GAkBA,IAAIygC,GAAgB,CAAC,aAAc,aAiBnC,SAASjyC,GAAGwT,EAAMjQ,EAAMsS,GACtB,GAAIuP,MAAMwE,QAAQrmB,GAChB,OAAO+sC,GAAsBtwC,GAAIwT,EAAMjQ,EAAMsS,GAG/C,IAAI5S,EAAO6sC,GAAQt8B,GAiDnB,GA9CKvQ,EAAKitC,WACRjtC,EAAKitC,SAAW,IAGbjtC,EAAKitC,SAAS3sC,KACjBN,EAAKitC,SAAS3sC,GAAQ,IAGnBsS,EAAGq8B,OACNr8B,EAAGq8B,KAAOvC,MAGZ1sC,EAAKitC,SAAS3sC,GAAMd,KAAKoT,GAEpB5S,EAAKktC,aACRltC,EAAKotC,UAAW,EAEhBptC,EAAKktC,WAAa,SAAUt/B,EAAOshC,GAEjC,IAAIlvC,EAAKotC,SAAT,CAIAx/B,EAAQ4/B,GAAS5/B,GAEjB,IAAIq/B,EAAWjtC,EAAKitC,SAASr/B,EAAMtN,MAEnC,GAAI2sC,EAIF,IAFA,IAAIkC,EAAelC,EAAS/4C,MAAM,GAEzB+d,EAAI,EAAGK,EAAI68B,EAAa/4C,OAAQ6b,EAAIK,EAAGL,IAAK,CACnD,GAAIrE,EAAM2gC,gCACR,MAEA,IACEY,EAAal9B,GAAGjY,KAAKuW,EAAM3C,EAAOshC,GAClC,MAAO3gC,GACPg4B,EAAMlqB,MAAM9N,QAQW,IAA/BvO,EAAKitC,SAAS3sC,GAAMlK,OACtB,GAAIma,EAAK+qB,iBAAkB,CACzB,IAAI5lB,GAAU,EAEVo5B,IAAoBE,GAAcz6C,QAAQ+L,IAAS,IACrDoV,EAAU,CAAE05B,SAAS,IAEvB7+B,EAAK+qB,iBAAiBh7B,EAAMN,EAAKktC,WAAYx3B,QACpCnF,EAAK8+B,aACd9+B,EAAK8+B,YAAY,KAAO/uC,EAAMN,EAAKktC,YAkBzC,SAASv2B,GAAIpG,EAAMjQ,EAAMsS,GAEvB,GAAKk6B,GAAQv8B,GAAb,CAIA,IAAIvQ,EAAO6sC,GAAQt8B,GAGnB,GAAKvQ,EAAKitC,SAAV,CAIA,GAAI9qB,MAAMwE,QAAQrmB,GAChB,OAAO+sC,GAAsB12B,GAAKpG,EAAMjQ,EAAMsS,GAIhD,IAAI08B,EAAa,SAAoB97C,EAAI+7C,GACvCvvC,EAAKitC,SAASsC,GAAK,GACnBvC,GAAex5C,EAAI+7C,IAIrB,QAAa57C,IAAT2M,EAAJ,CASA,IAAI2sC,EAAWjtC,EAAKitC,SAAS3sC,GAG7B,GAAK2sC,EAKL,GAAKr6B,EAAL,CAMA,GAAIA,EAAGq8B,KACL,IAAK,IAAI38B,EAAI,EAAGA,EAAI26B,EAAS72C,OAAQkc,IAC/B26B,EAAS36B,GAAG28B,OAASr8B,EAAGq8B,MAC1BhC,EAAStnB,OAAOrT,IAAK,GAK3B06B,GAAez8B,EAAMjQ,QAbnBgvC,EAAW/+B,EAAMjQ,QAjBjB,IAAK,IAAIivC,KAAKvvC,EAAKitC,SACbl6C,OAAO+G,UAAUC,eAAeC,KAAKgG,EAAKitC,UAAY,GAAIsC,IAC5DD,EAAW/+B,EAAMg/B,KA+CzB,SAASlyC,GAAQkT,EAAM3C,EAAOshC,GAI5B,IAAIM,EAAW1C,GAAQv8B,GAAQs8B,GAAQt8B,GAAQ,GAC3C4J,EAAS5J,EAAK2kB,YAAc3kB,EAAKk/B,cAqBrC,GAhBqB,kBAAV7hC,EACTA,EAAQ,CAAEtN,KAAMsN,EAAOnU,OAAQ8W,GACrB3C,EAAMnU,SAChBmU,EAAMnU,OAAS8W,GAIjB3C,EAAQ4/B,GAAS5/B,GAGb4hC,EAAStC,YACXsC,EAAStC,WAAWlzC,KAAKuW,EAAM3C,EAAOshC,GAKpC/0B,IAAWvM,EAAM+/B,yBAA4C,IAAlB//B,EAAMwwB,QACnD/gC,GAAQrD,KAAK,KAAMmgB,EAAQvM,EAAOshC,QAG7B,IAAK/0B,IAAWvM,EAAMugC,iBAAkB,CAC7C,IAAIuB,EAAa7C,GAAQj/B,EAAMnU,QAG3BmU,EAAMnU,OAAOmU,EAAMtN,QAErBovC,EAAWtC,UAAW,EAEkB,oBAA7Bx/B,EAAMnU,OAAOmU,EAAMtN,OAC5BsN,EAAMnU,OAAOmU,EAAMtN,QAGrBovC,EAAWtC,UAAW,GAK1B,OAAQx/B,EAAMugC,iBAehB,SAAStrB,GAAItS,EAAMjQ,EAAMsS,GACvB,GAAIuP,MAAMwE,QAAQrmB,GAChB,OAAO+sC,GAAsBxqB,GAAKtS,EAAMjQ,EAAMsS,GAEhD,IAAI+N,EAAO,SAASA,IAClBhK,GAAIpG,EAAMjQ,EAAMqgB,GAChB/N,EAAGsP,MAAMhrB,KAAMyC,YAIjBgnB,EAAKsuB,KAAOr8B,EAAGq8B,KAAOr8B,EAAGq8B,MAAQvC,KACjC3vC,GAAGwT,EAAMjQ,EAAMqgB,GAGjB,IAAIgvB,IAAU58C,OAAOsxC,QAAUtxC,QAAQ,CACtCy6C,SAAUA,GACVzwC,GAAIA,GACJ4Z,IAAKA,GACLtZ,QAASA,GACTwlB,IAAKA,KASF+sB,IAAgB,EAChBC,QAAY,EAKZC,GAAY,WAGd,GAAK9L,OAA4C,IAAhC6L,GAAUn6B,QAAQo6B,UAAnC,CAWA,IAAIC,EAAOv/B,EAASw/B,qBAAqB,SACrCC,EAASz/B,EAASw/B,qBAAqB,SACvCE,EAAO1/B,EAASw/B,qBAAqB,YACrCG,EAAW,GAEf,GAAIJ,GAAQA,EAAK35C,OAAS,EACxB,IAAK,IAAIsD,EAAI,EAAG6U,EAAIwhC,EAAK35C,OAAQsD,EAAI6U,EAAG7U,IACtCy2C,EAAS3wC,KAAKuwC,EAAKr2C,IAIvB,GAAIu2C,GAAUA,EAAO75C,OAAS,EAC5B,IAAK,IAAIiwB,EAAK,EAAGD,EAAK6pB,EAAO75C,OAAQiwB,EAAKD,EAAIC,IAC5C8pB,EAAS3wC,KAAKywC,EAAO5pB,IAIzB,GAAI6pB,GAAQA,EAAK95C,OAAS,EACxB,IAAK,IAAIg6C,EAAM,EAAGC,EAAMH,EAAK95C,OAAQg6C,EAAMC,EAAKD,IAC9CD,EAAS3wC,KAAK0wC,EAAKE,IAKvB,GAAID,GAAYA,EAAS/5C,OAAS,EAEhC,IAAK,IAAIk6C,EAAM,EAAGC,EAAMJ,EAAS/5C,OAAQk6C,EAAMC,EAAKD,IAAO,CACzD,IAAIE,EAAUL,EAASG,GAKvB,IAAIE,IAAWA,EAAQ5G,aAehB,CACL6G,GAAiB,GACjB,MAdA,QAAuB98C,IAAnB68C,EAAQE,OAAsB,CAChC,IAAIh7B,EAAU86B,EAAQ5G,aAAa,cAInB,OAAZl0B,GAEFm6B,GAAUW,SAYRZ,IACVa,GAAiB,KAcrB,SAASA,GAAiBE,EAAMC,GAC1BA,IACFf,GAAYe,GAGdh9C,EAAOijB,WAAWi5B,GAAWa,GAG3B3M,MAAoC,aAAxBxzB,EAAS9B,WACvBkhC,IAAgB,EAOhB/sB,GAAIjvB,EAAQ,QAAQ,WAClBg8C,IAAgB,KAiBpB,IAAIiB,GAAqB,SAA4B5J,GACnD,IAAI7C,EAAQ5zB,EAASC,cAAc,SAInC,OAFA2zB,EAAM6C,UAAYA,EAEX7C,GAYL0M,GAAiB,SAAwBt9C,EAAI2Z,GAC3C3Z,EAAGu9C,WACLv9C,EAAGu9C,WAAWC,QAAU7jC,EAExB3Z,EAAGu0C,YAAc56B,GAwBjB7U,GAAO,SAAcivC,EAAS30B,EAAIq+B,GAE/Br+B,EAAGq8B,OACNr8B,EAAGq8B,KAAOvC,MAIZ,IAAIwE,EAAQ,WACV,OAAOt+B,EAAGsP,MAAMqlB,EAAS5tC,YAW3B,OAFAu3C,EAAMjC,KAAOgC,EAAMA,EAAM,IAAMr+B,EAAGq8B,KAAOr8B,EAAGq8B,KAErCiC,GAeLC,GAAW,SAAkBv+B,EAAI+9B,GACnC,IAAIS,EAAOxpC,KAAK24B,MAEZ8Q,EAAY,WACd,IAAI9Q,EAAM34B,KAAK24B,MAEXA,EAAM6Q,GAAQT,IAChB/9B,EAAGsP,WAAMvuB,EAAWgG,WACpBy3C,EAAO7Q,IAIX,OAAO8Q,GA4BLC,GAAW,SAAkB3wB,EAAMgwB,EAAM9nC,GAC3C,IAAI0+B,EAAU5tC,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK/F,EAE9EsnC,OAAU,EAGd,OAAO,WACL,IAAI7/B,EAAOnE,KACP2uB,EAAOlsB,UAEP43C,EAAS,WACXrW,EAAU,KACVqW,EAAS,KACJ1oC,GACH8X,EAAKuB,MAAM7mB,EAAMwqB,KAIhBqV,GAAWryB,GACd8X,EAAKuB,MAAM7mB,EAAMwqB,GAGnB0hB,EAAQ34B,aAAassB,GACrBA,EAAUqM,EAAQ1wB,WAAW06B,EAAQZ,KAgBrC3yB,GAAc,aA+BlBA,GAAYlkB,UAAU03C,eAAiB,GAYvCxzB,GAAYlkB,UAAUiD,GAAK,SAAUuD,EAAMsS,GAGzC,IAAI6+B,EAAMv6C,KAAKokC,iBAEfpkC,KAAKokC,iBAAmB,aACxBv+B,GAAG7F,KAAMoJ,EAAMsS,GACf1b,KAAKokC,iBAAmBmW,GAU1BzzB,GAAYlkB,UAAUwhC,iBAAmBtd,GAAYlkB,UAAUiD,GAa/DihB,GAAYlkB,UAAU6c,IAAM,SAAUrW,EAAMsS,GAC1C+D,GAAIzf,KAAMoJ,EAAMsS,IAUlBoL,GAAYlkB,UAAU+mC,oBAAsB7iB,GAAYlkB,UAAU6c,IAalEqH,GAAYlkB,UAAU+oB,IAAM,SAAUviB,EAAMsS,GAG1C,IAAI6+B,EAAMv6C,KAAKokC,iBAEfpkC,KAAKokC,iBAAmB,aACxBzY,GAAI3rB,KAAMoJ,EAAMsS,GAChB1b,KAAKokC,iBAAmBmW,GAmB1BzzB,GAAYlkB,UAAUuD,QAAU,SAAUuQ,GACxC,IAAItN,EAAOsN,EAAMtN,MAAQsN,EAEJ,kBAAVA,IACTA,EAAQ,CAAEtN,KAAMA,IAElBsN,EAAQ4/B,GAAS5/B,GAEb1W,KAAKs6C,eAAelxC,IAASpJ,KAAK,KAAOoJ,IAC3CpJ,KAAK,KAAOoJ,GAAMsN,GAGpBvQ,GAAQnG,KAAM0W,IAUhBoQ,GAAYlkB,UAAU43C,cAAgB1zB,GAAYlkB,UAAUuD,QAe5D,IAAIs0C,GAAY,SAAmBp/B,GACjC,OAAOA,aAAkByL,MAAiBzL,EAAOq/B,aAAe,CAAC,KAAM,MAAO,MAAO,WAAWC,OAAM,SAAUxH,GAC9G,MAA4B,oBAAd93B,EAAO83B,OAcrByH,GAAmB,SAA0BxxC,GAC/C,MAGkB,kBAATA,GAAqB,KAAKhC,KAAKgC,IAAS6hB,MAAMwE,QAAQrmB,MAAWA,EAAKlK,QAc7E27C,GAAiB,SAAwBt4C,GAC3C,IAAKA,EAAOu4C,WAAaL,GAAUl4C,GACjC,MAAM,IAAIhC,MAAM,0DAchBw6C,GAAoB,SAA2B3xC,GACjD,IAAKwxC,GAAiBxxC,GACpB,MAAM,IAAI7I,MAAM,6DAchBy6C,GAAmB,SAA0BxsB,GAC/C,GAAwB,oBAAbA,EACT,MAAM,IAAIjuB,MAAM,0CAmBhB06C,GAAsB,SAA6B92C,EAAMwqB,GAI3D,IAAIusB,EAAkBvsB,EAAKzvB,OAAS,GAAKyvB,EAAK,KAAOxqB,GAAQwqB,EAAK,KAAOxqB,EAAKu2C,YAC1En4C,OAAS,EACT6G,OAAO,EACPolB,OAAW,EAyBf,OAvBI0sB,GACF34C,EAAS4B,EAAKu2C,YAIV/rB,EAAKzvB,QAAU,GACjByvB,EAAKjC,QAGPtjB,EAAOulB,EAAK,GACZH,EAAWG,EAAK,KAEhBpsB,EAASosB,EAAK,GACdvlB,EAAOulB,EAAK,GACZH,EAAWG,EAAK,IAGlBksB,GAAet4C,GACfw4C,GAAkB3xC,GAClB4xC,GAAiBxsB,GAEjBA,EAAWptB,GAAK+C,EAAMqqB,GAEf,CAAE0sB,gBAAiBA,EAAiB34C,OAAQA,EAAQ6G,KAAMA,EAAMolB,SAAUA,IAoB/E2sB,GAAS,SAAgB54C,EAAQuE,EAAQsC,EAAMolB,GACjDqsB,GAAet4C,GAEXA,EAAOu4C,SACTrC,GAAO3xC,GAAQvE,EAAQ6G,EAAMolB,GAE7BjsB,EAAOuE,GAAQsC,EAAMolB,IAUrB4sB,GAAe,CAyBjBv1C,GAAI,WAGF,IAFA,IAAIf,EAAQ9E,KAEH8tC,EAAOrrC,UAAUvD,OAAQyvB,EAAO1D,MAAM6iB,GAAOxoC,EAAO,EAAGA,EAAOwoC,EAAMxoC,IAC3EqpB,EAAKrpB,GAAQ7C,UAAU6C,GAGzB,IAAI+1C,EAAuBJ,GAAoBj7C,KAAM2uB,GACjDusB,EAAkBG,EAAqBH,gBACvC34C,EAAS84C,EAAqB94C,OAC9B6G,EAAOiyC,EAAqBjyC,KAC5BolB,EAAW6sB,EAAqB7sB,SAKpC,GAHA2sB,GAAO54C,EAAQ,KAAM6G,EAAMolB,IAGtB0sB,EAAiB,CAGpB,IAAII,EAA0B,WAC5B,OAAOx2C,EAAM2a,IAAIld,EAAQ6G,EAAMolB,IAKjC8sB,EAAwBvD,KAAOvpB,EAASupB,KAKxC,IAAIwD,EAA+B,WACjC,OAAOz2C,EAAM2a,IAAI,UAAW67B,IAK9BC,EAA6BxD,KAAOvpB,EAASupB,KAE7CoD,GAAOn7C,KAAM,KAAM,UAAWs7C,GAC9BH,GAAO54C,EAAQ,KAAM,UAAWg5C,KA4BpC5vB,IAAK,WAGH,IAFA,IAAIhG,EAAS3lB,KAEJ+uC,EAAQtsC,UAAUvD,OAAQyvB,EAAO1D,MAAM8jB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAChFrgB,EAAKqgB,GAASvsC,UAAUusC,GAG1B,IAAIwM,EAAwBP,GAAoBj7C,KAAM2uB,GAClDusB,EAAkBM,EAAsBN,gBACxC34C,EAASi5C,EAAsBj5C,OAC/B6G,EAAOoyC,EAAsBpyC,KAC7BolB,EAAWgtB,EAAsBhtB,SAKrC,GAAI0sB,EACFC,GAAO54C,EAAQ,MAAO6G,EAAMolB,OAGvB,CACL,IAAIitB,EAAU,SAASA,IACrB,IAAK,IAAIxM,EAAQxsC,UAAUvD,OAAQw8C,EAAQzwB,MAAMgkB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IACjFwM,EAAMxM,GAASzsC,UAAUysC,GAG3BvpB,EAAOlG,IAAIld,EAAQ6G,EAAMqyC,GACzBjtB,EAASxD,MAAM,KAAM0wB,IAKvBD,EAAQ1D,KAAOvpB,EAASupB,KACxBoD,GAAO54C,EAAQ,MAAO6G,EAAMqyC,KAwBhCh8B,IAAK,SAAgBk8B,EAAcC,EAAgBptB,GAGjD,IAAKmtB,GAAgBf,GAAiBe,GACpCl8B,GAAIzf,KAAK06C,YAAaiB,EAAcC,OAG/B,CACL,IAAIr5C,EAASo5C,EACTvyC,EAAOwyC,EAGXf,GAAet4C,GACfw4C,GAAkB3xC,GAClB4xC,GAAiBxsB,GAGjBA,EAAWptB,GAAKpB,KAAMwuB,GAItBxuB,KAAKyf,IAAI,UAAW+O,GAEhBjsB,EAAOu4C,UACTr7B,GAAIld,EAAQ6G,EAAMolB,GAClB/O,GAAIld,EAAQ,UAAWisB,IACdisB,GAAUl4C,KACnBA,EAAOkd,IAAIrW,EAAMolB,GACjBjsB,EAAOkd,IAAI,UAAW+O,MAkB5BroB,QAAS,SAAoBuQ,EAAOshC,GAClC,OAAO7xC,GAAQnG,KAAK06C,YAAahkC,EAAOshC,KAqB5C,SAAS6D,GAAQt5C,GACf,IAAIic,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC9Eq5C,EAAct9B,EAAQs9B,YAI1B,GAAIA,EAAa,CACf,IAAKv5C,EAAOu5C,GAAahB,SACvB,MAAM,IAAIv6C,MAAM,oBAAsBu7C,EAAc,mCAEtDv5C,EAAOm4C,YAAcn4C,EAAOu5C,QAE5Bv5C,EAAOm4C,YAAclK,GAAS,OAAQ,CAAET,UAAW,kBAarD,OAVAztC,EAAOC,EAAQ64C,IAGf74C,EAAOsD,GAAG,WAAW,WACnBtD,EAAOkd,MACP/iB,EAAOijB,YAAW,WAChBpd,EAAOm4C,YAAc,OACpB,MAGEn4C,EAaT,IAAIw5C,GAAgB,CAQlB/2B,MAAO,GAePg3B,SAAU,SAAkBC,GAC1B,IAAIn3C,EAAQ9E,KAGgB,oBAAjBi8C,IACTA,EAAeA,KAGjB,IAAIC,OAAU,EAuCd,OArCAtO,EAAKqO,GAAc,SAAUlgD,EAAO4G,GAI9BmC,EAAMkgB,MAAMriB,KAAS5G,IACvBmgD,EAAUA,GAAW,GACrBA,EAAQv5C,GAAO,CACbw5C,KAAMr3C,EAAMkgB,MAAMriB,GAClBy5C,GAAIrgD,IAIR+I,EAAMkgB,MAAMriB,GAAO5G,KAMjBmgD,GAAWzB,GAAUz6C,OAavBA,KAAKmG,QAAQ,CACX+1C,QAASA,EACT9yC,KAAM,iBAIH8yC,IAsBX,SAASG,GAAS95C,EAAQ+5C,GAYxB,OAXAh6C,EAAOC,EAAQw5C,IAIfx5C,EAAOyiB,MAAQ1iB,EAAO,GAAIC,EAAOyiB,MAAOs3B,GAGC,oBAA9B/5C,EAAOg6C,oBAAqC9B,GAAUl4C,IAC/DA,EAAOsD,GAAG,eAAgBtD,EAAOg6C,oBAG5Bh6C,EAiBT,SAASi6C,GAAYpiB,GACnB,MAAsB,kBAAXA,EACFA,EAGFA,EAAOqiB,OAAO,GAAGjO,cAAgBpU,EAAOp9B,MAAM,GAevD,SAAS0/C,GAAgBC,EAAMC,GAC7B,OAAOJ,GAAYG,KAAUH,GAAYI,GAiB3C,SAASl5B,KAGP,IAFA,IAAIlnB,EAAS,GAEJsxC,EAAOrrC,UAAUvD,OAAQkb,EAAU6Q,MAAM6iB,GAAOxoC,EAAO,EAAGA,EAAOwoC,EAAMxoC,IAC9E8U,EAAQ9U,GAAQ7C,UAAU6C,GAsB5B,OAnBA8U,EAAQrP,SAAQ,SAAUrI,GACnBA,GAILkrC,EAAKlrC,GAAQ,SAAU3G,EAAO4G,GACvBorC,EAAQhyC,IAKRgyC,EAAQvxC,EAAOmG,MAClBnG,EAAOmG,GAAO,IAGhBnG,EAAOmG,GAAO+gB,GAAalnB,EAAOmG,GAAM5G,IARtCS,EAAOmG,GAAO5G,QAYbS,EAiBT,IAAIqgD,GAAY,WA2Bd,SAASA,EAAUrD,EAAQh7B,EAASs+B,GAqBlC,GApBAzP,EAAertC,KAAM68C,IAIhBrD,GAAUx5C,KAAK4oC,KAClB5oC,KAAKorB,QAAUouB,EAASx5C,KAExBA,KAAKorB,QAAUouB,EAIjBx5C,KAAK+8C,SAAWr5B,GAAa,GAAI1jB,KAAK+8C,UAGtCv+B,EAAUxe,KAAK+8C,SAAWr5B,GAAa1jB,KAAK+8C,SAAUv+B,GAGtDxe,KAAKg9C,IAAMx+B,EAAQ3U,IAAM2U,EAAQliB,IAAMkiB,EAAQliB,GAAGuN,IAG7C7J,KAAKg9C,IAAK,CAEb,IAAInzC,EAAK2vC,GAAUA,EAAO3vC,IAAM2vC,EAAO3vC,MAAQ,YAE/C7J,KAAKg9C,IAAMnzC,EAAK,cAAgB2rC,KAGlCx1C,KAAKk2B,MAAQ1X,EAAQ1Q,MAAQ,KAGzB0Q,EAAQliB,GACV0D,KAAKi9C,IAAMz+B,EAAQliB,IACW,IAArBkiB,EAAQgyB,WACjBxwC,KAAKi9C,IAAMj9C,KAAKwwC,aAIM,IAApBhyB,EAAQq9B,SAEVA,GAAQ77C,KAAM,CAAE87C,YAAa97C,KAAKi9C,IAAM,MAAQ,OAElDZ,GAASr8C,KAAMA,KAAKyE,YAAY63C,cAEhCt8C,KAAKk9C,UAAY,GACjBl9C,KAAKm9C,YAAc,GACnBn9C,KAAKo9C,gBAAkB,IAGM,IAAzB5+B,EAAQ6+B,cACVr9C,KAAKq9C,eAGPr9C,KAAK88C,MAAMA,IAIyB,IAAhCt+B,EAAQ8+B,qBACVt9C,KAAKu9C,sBAwgDT,OA7/CAV,EAAUj6C,UAAUkQ,QAAU,WAe5B,GAHA9S,KAAKmG,QAAQ,CAAEiD,KAAM,UAAW89B,SAAS,IAGrClnC,KAAKk9C,UACP,IAAK,IAAI16C,EAAIxC,KAAKk9C,UAAUh+C,OAAS,EAAGsD,GAAK,EAAGA,IAC1CxC,KAAKk9C,UAAU16C,GAAGsQ,SACpB9S,KAAKk9C,UAAU16C,GAAGsQ,UAMxB9S,KAAKk9C,UAAY,KACjBl9C,KAAKm9C,YAAc,KACnBn9C,KAAKo9C,gBAAkB,KAEnBp9C,KAAKi9C,MAEHj9C,KAAKi9C,IAAIjf,YACXh+B,KAAKi9C,IAAIjf,WAAW4W,YAAY50C,KAAKi9C,KAGvCpH,GAAW71C,KAAKi9C,KAChBj9C,KAAKi9C,IAAM,MAIbj9C,KAAKorB,QAAU,MAWjByxB,EAAUj6C,UAAU42C,OAAS,WAC3B,OAAOx5C,KAAKorB,SAkBdyxB,EAAUj6C,UAAU4b,QAAU,SAAiB7iB,GAG7C,OAFA0zC,EAAMrlC,KAAK,kFAENrO,GAILqE,KAAK+8C,SAAWr5B,GAAa1jB,KAAK+8C,SAAUphD,GACrCqE,KAAK+8C,UAJH/8C,KAAK+8C,UAehBF,EAAUj6C,UAAUtG,GAAK,WACvB,OAAO0D,KAAKi9C,KAoBdJ,EAAUj6C,UAAU4tC,SAAW,SAAqBC,EAASlJ,EAAY9pC,GACvE,OAAO+yC,GAASC,EAASlJ,EAAY9pC,IA2CvCo/C,EAAUj6C,UAAU46C,SAAW,SAAkBpjB,EAAQqjB,GACvD,IAAIC,EAAej7C,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK23B,EAEnF1U,EAAO1lB,KAAKorB,QAAQrjB,UAAY/H,KAAKorB,QAAQrjB,WAC7C41C,EAAY39C,KAAKorB,QAAQuyB,WAAa39C,KAAKorB,QAAQuyB,YACnD51C,EAAW41C,GAAaA,EAAUj4B,GAClCk4B,EAAcl4B,GAAQA,EAAKyK,MAAM,KAAK,GACtC0tB,EAAcF,GAAaA,EAAUC,GAErCE,EAAkBJ,EAqBtB,OAnBI31C,GAAYA,EAASqyB,GACvB0jB,EAAkB/1C,EAASqyB,GAClByjB,GAAeA,EAAYzjB,KACpC0jB,EAAkBD,EAAYzjB,IAG5BqjB,IACFK,EAAkBA,EAAgB9gC,QAAQ,cAAc,SAAUilB,EAAOx0B,GACvE,IAAI1R,EAAQ0hD,EAAOhwC,EAAQ,GACvBswC,EAAMhiD,EAMV,MAJqB,qBAAVA,IACTgiD,EAAM9b,GAGD8b,MAIJD,GAYTjB,EAAUj6C,UAAUo7C,UAAY,WAC9B,OAAOh+C,KAAKi+C,YAAcj+C,KAAKi9C,KAWjCJ,EAAUj6C,UAAUiH,GAAK,WACvB,OAAO7J,KAAKg9C,KAYdH,EAAUj6C,UAAUkL,KAAO,WACzB,OAAO9N,KAAKk2B,OAWd2mB,EAAUj6C,UAAUs7C,SAAW,WAC7B,OAAOl+C,KAAKk9C,WAcdL,EAAUj6C,UAAUu7C,aAAe,SAAsBt0C,GACvD,OAAO7J,KAAKm9C,YAAYtzC,IAc1BgzC,EAAUj6C,UAAUw7C,SAAW,SAAkBtwC,GAC/C,GAAKA,EAML,OAFAA,EAAO0uC,GAAY1uC,GAEZ9N,KAAKo9C,gBAAgBtvC,IAuB9B+uC,EAAUj6C,UAAUy7C,SAAW,SAAkBnN,GAC/C,IAAI1yB,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC9EgL,EAAQhL,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAKzC,KAAKk9C,UAAUh+C,OAE3FmS,OAAY,EACZitC,OAAgB,EAGpB,GAAqB,kBAAVpN,EAAoB,CAC7BoN,EAAgB9B,GAAYtL,GAE5B,IAAIqN,EAAqB//B,EAAQggC,gBAAkBF,EAGnD9/B,EAAQ1Q,KAAOwwC,EAIf,IAAIG,EAAiB5B,EAAU6B,aAAaH,GAE5C,IAAKE,EACH,MAAM,IAAIl+C,MAAM,aAAeg+C,EAAqB,mBAOtD,GAA8B,oBAAnBE,EACT,OAAO,KAGTptC,EAAY,IAAIotC,EAAez+C,KAAKorB,SAAWprB,KAAMwe,QAIrDnN,EAAY6/B,EAmBd,GAhBAlxC,KAAKk9C,UAAUzuB,OAAOhhB,EAAO,EAAG4D,GAEJ,oBAAjBA,EAAUxH,KACnB7J,KAAKm9C,YAAY9rC,EAAUxH,MAAQwH,GAKrCitC,EAAgBA,GAAiBjtC,EAAUvD,MAAQ0uC,GAAYnrC,EAAUvD,QAErEwwC,IACFt+C,KAAKo9C,gBAAgBkB,GAAiBjtC,GAKZ,oBAAjBA,EAAU/U,IAAqB+U,EAAU/U,KAAM,CACxD,IAAIqiD,EAAa3+C,KAAKg+C,YAAYE,SAC9BU,EAAUD,EAAWlxC,IAAU,KAEnCzN,KAAKg+C,YAAY5M,aAAa//B,EAAU/U,KAAMsiD,GAIhD,OAAOvtC,GAYTwrC,EAAUj6C,UAAUgyC,YAAc,SAAqBvjC,GAKrD,GAJyB,kBAAdA,IACTA,EAAYrR,KAAKo+C,SAAS/sC,IAGvBA,GAAcrR,KAAKk9C,UAAxB,CAMA,IAFA,IAAI2B,GAAa,EAERr8C,EAAIxC,KAAKk9C,UAAUh+C,OAAS,EAAGsD,GAAK,EAAGA,IAC9C,GAAIxC,KAAKk9C,UAAU16C,KAAO6O,EAAW,CACnCwtC,GAAa,EACb7+C,KAAKk9C,UAAUzuB,OAAOjsB,EAAG,GACzB,MAIJ,GAAKq8C,EAAL,CAIA7+C,KAAKm9C,YAAY9rC,EAAUxH,MAAQ,KACnC7J,KAAKo9C,gBAAgB/rC,EAAUvD,QAAU,KAEzC,IAAIgxC,EAASztC,EAAU/U,KAEnBwiD,GAAUA,EAAO9gB,aAAeh+B,KAAKg+C,aACvCh+C,KAAKg+C,YAAYpJ,YAAYvjC,EAAU/U,SAS3CugD,EAAUj6C,UAAUy6C,aAAe,WACjC,IAAIv4C,EAAQ9E,KAERk+C,EAAWl+C,KAAK+8C,SAASmB,SAE7B,GAAIA,EAAU,CAEZ,IAAIa,EAAgB/+C,KAAK+8C,SAErBiC,EAAY,SAAmB9N,GACjC,IAAIpjC,EAAOojC,EAAMpjC,KACb+pC,EAAO3G,EAAM2G,KAWjB,QAN4Bp7C,IAAxBsiD,EAAcjxC,KAChB+pC,EAAOkH,EAAcjxC,KAKV,IAAT+pC,EAAJ,EAMa,IAATA,IACFA,EAAO,IAMTA,EAAKoH,cAAgBn6C,EAAMi4C,SAASkC,cAMpC,IAAIC,EAAWp6C,EAAMu5C,SAASvwC,EAAM+pC,GAEhCqH,IACFp6C,EAAMgJ,GAAQoxC,KAKdC,OAAkB,EAClBC,EAAOvC,EAAU6B,aAAa,QAGhCS,EADEl0B,MAAMwE,QAAQyuB,GACEA,EAEAriD,OAAO0Q,KAAK2xC,GAGhCiB,EAGClqB,OAAOp5B,OAAO0Q,KAAKvM,KAAK+8C,UAAUl+C,QAAO,SAAUqyC,GAClD,OAAQiO,EAAgBE,MAAK,SAAUC,GACrC,MAAsB,kBAAXA,EACFpO,IAAUoO,EAEZpO,IAAUoO,EAAOxxC,YAExBrP,KAAI,SAAUyyC,GAChB,IAAIpjC,OAAO,EACP+pC,OAAO,EAUX,MARqB,kBAAV3G,GACTpjC,EAAOojC,EACP2G,EAAOqG,EAASpwC,IAAShJ,EAAMi4C,SAASjvC,IAAS,KAEjDA,EAAOojC,EAAMpjC,KACb+pC,EAAO3G,GAGF,CAAEpjC,KAAMA,EAAM+pC,KAAMA,MAC1Bh5C,QAAO,SAAUqyC,GAIlB,IAAIl2B,EAAI6hC,EAAU6B,aAAaxN,EAAM2G,KAAK2G,gBAAkBhC,GAAYtL,EAAMpjC,OAE9E,OAAOkN,IAAMokC,EAAKG,OAAOvkC,MACxBjQ,QAAQi0C,KAcfnC,EAAUj6C,UAAU48C,cAAgB,WAGlC,MAAO,IAaT3C,EAAUj6C,UAAUk6C,MAAQ,SAAephC,GACzC,IAAI+jC,EAAOh9C,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,IAAmBA,UAAU,GAE1E,GAAKiZ,EAIL,OAAK1b,KAAK0/C,cAMND,EACF/jC,EAAG5Y,KAAK9C,MAGRA,KAAK2f,WAAWjE,EAAI,KATpB1b,KAAK2/C,YAAc3/C,KAAK2/C,aAAe,QACvC3/C,KAAK2/C,YAAYr3C,KAAKoT,KAmB1BmhC,EAAUj6C,UAAUg9C,aAAe,WACjC5/C,KAAK0/C,UAAW,EAGhB1/C,KAAK2f,YAAW,WACd,IAAIkgC,EAAa7/C,KAAK2/C,YAGtB3/C,KAAK2/C,YAAc,GAEfE,GAAcA,EAAW3gD,OAAS,GACpC2gD,EAAW90C,SAAQ,SAAU2Q,GAC3BA,EAAG5Y,KAAK9C,QACPA,MAULA,KAAKmG,QAAQ,WACZ,IAuBL02C,EAAUj6C,UAAUwyC,EAAI,SAAchF,EAAUC,GAC9C,OAAO+E,GAAEhF,EAAUC,GAAWrwC,KAAKg+C,cAuBrCnB,EAAUj6C,UAAUyyC,GAAK,SAAejF,EAAUC,GAChD,OAAOgF,GAAGjF,EAAUC,GAAWrwC,KAAKg+C,cAetCnB,EAAUj6C,UAAU0uC,SAAW,SAAqBE,GAClD,OAAOF,GAAStxC,KAAKi9C,IAAKzL,IAW5BqL,EAAUj6C,UAAU+uC,SAAW,SAAqBC,GAClDD,GAAS3xC,KAAKi9C,IAAKrL,IAWrBiL,EAAUj6C,UAAUkvC,YAAc,SAAwBC,GACxDD,GAAY9xC,KAAKi9C,IAAKlL,IAgBxB8K,EAAUj6C,UAAUovC,YAAc,SAAwBC,EAAeC,GACvEF,GAAYhyC,KAAKi9C,IAAKhL,EAAeC,IASvC2K,EAAUj6C,UAAUk9C,KAAO,WACzB9/C,KAAK8xC,YAAY,eASnB+K,EAAUj6C,UAAUm9C,KAAO,WACzB//C,KAAK2xC,SAAS,eAWhBkL,EAAUj6C,UAAUo9C,YAAc,WAChChgD,KAAK2xC,SAAS,qBAWhBkL,EAAUj6C,UAAUq9C,cAAgB,WAClCjgD,KAAK8xC,YAAY,qBAoBnB+K,EAAUj6C,UAAU8vC,aAAe,SAAyBC,GAC1D,OAAOD,GAAa1yC,KAAKi9C,IAAKtK,IAgBhCkK,EAAUj6C,UAAUguC,aAAe,SAAyB+B,EAAW52C,GACrE60C,GAAa5wC,KAAKi9C,IAAKtK,EAAW52C,IAapC8gD,EAAUj6C,UAAU0vC,gBAAkB,SAA4BK,GAChEL,GAAgBtyC,KAAKi9C,IAAKtK,IAmB5BkK,EAAUj6C,UAAU3E,MAAQ,SAAe2S,EAAKsvC,GAC9C,OAAOlgD,KAAKmgD,UAAU,QAASvvC,EAAKsvC,IAmBtCrD,EAAUj6C,UAAUjE,OAAS,SAAgBiS,EAAKsvC,GAChD,OAAOlgD,KAAKmgD,UAAU,SAAUvvC,EAAKsvC,IAcvCrD,EAAUj6C,UAAUw9C,WAAa,SAAoBniD,EAAOU,GAE1DqB,KAAK/B,MAAMA,GAAO,GAClB+B,KAAKrB,OAAOA,IAiCdk+C,EAAUj6C,UAAUu9C,UAAY,SAAmBE,EAAezvC,EAAKsvC,GACrE,QAAYzjD,IAARmU,EA0BF,OAxBY,OAARA,GAAgBA,IAAQA,IAC1BA,EAAM,IAIyB,KAA5B,GAAKA,GAAKvT,QAAQ,OAA6C,KAA7B,GAAKuT,GAAKvT,QAAQ,MACvD2C,KAAKi9C,IAAI/P,MAAMmT,GAAiBzvC,EAEhC5Q,KAAKi9C,IAAI/P,MAAMmT,GADE,SAARzvC,EACuB,GAEAA,EAAM,UAInCsvC,GAOHlgD,KAAKmG,QAAQ,oBAQjB,IAAKnG,KAAKi9C,IACR,OAAO,EAIT,IAAI9tC,EAAMnP,KAAKi9C,IAAI/P,MAAMmT,GACrBC,EAAUnxC,EAAI9R,QAAQ,MAE1B,OAAiB,IAAbijD,EAEKpgD,SAASiP,EAAInS,MAAM,EAAGsjD,GAAU,IAMlCpgD,SAASF,KAAKi9C,IAAI,SAAWT,GAAY6D,IAAiB,KAgBnExD,EAAUj6C,UAAU29C,iBAAmB,SAA0BF,GAC/D,IAAIG,EAAwB,EAE5B,GAAsB,UAAlBH,GAA+C,WAAlBA,EAC/B,MAAM,IAAI9/C,MAAM,uDAGlB,GAAuC,oBAA5B7D,EAAOC,iBAAiC,CACjD,IAAI2yC,EAAgB5yC,EAAOC,iBAAiBqD,KAAKi9C,KAEjDuD,EAAwBlR,EAAcmR,iBAAiBJ,IAAkB/Q,EAAc+Q,GASzF,GALAG,EAAwBzwB,WAAWywB,GAKL,IAA1BA,EAA6B,CAC/B,IAAIE,EAAO,SAAWlE,GAAY6D,GAElCG,EAAwBxgD,KAAKi9C,IAAIyD,GAGnC,OAAOF,GAyBT3D,EAAUj6C,UAAU+9C,kBAAoB,WACtC,MAAO,CACL1iD,MAAO+B,KAAKugD,iBAAiB,SAC7B5hD,OAAQqB,KAAKugD,iBAAiB,YAYlC1D,EAAUj6C,UAAUg+C,aAAe,WACjC,OAAO5gD,KAAKugD,iBAAiB,UAW/B1D,EAAUj6C,UAAUi+C,cAAgB,WAClC,OAAO7gD,KAAKugD,iBAAiB,WAQ/B1D,EAAUj6C,UAAUkwC,MAAQ,WAC1B9yC,KAAKi9C,IAAInK,SAQX+J,EAAUj6C,UAAUk+C,KAAO,WACzB9gD,KAAKi9C,IAAI6D,QAkBXjE,EAAUj6C,UAAUm+C,cAAgB,WAElC,IAAIC,EAAa,EACbC,EAAa,KAKbC,EAAuB,GAGvBC,EAAqB,IAErBC,OAAa,EAEjBphD,KAAK6F,GAAG,cAAc,SAAU6Q,GAED,IAAzBA,EAAM2qC,QAAQniD,SAEhB+hD,EAAa,CACX1M,MAAO79B,EAAM2qC,QAAQ,GAAG9M,MACxBD,MAAO59B,EAAM2qC,QAAQ,GAAG/M,OAG1B0M,GAAa,IAAItwC,MAAOC,UAExBywC,GAAa,MAIjBphD,KAAK6F,GAAG,aAAa,SAAU6Q,GAE7B,GAAIA,EAAM2qC,QAAQniD,OAAS,EACzBkiD,GAAa,OACR,GAAIH,EAAY,CAGrB,IAAIK,EAAQ5qC,EAAM2qC,QAAQ,GAAG9M,MAAQ0M,EAAW1M,MAC5CgN,EAAQ7qC,EAAM2qC,QAAQ,GAAG/M,MAAQ2M,EAAW3M,MAC5CkN,EAAgBn3C,KAAKo3C,KAAKH,EAAQA,EAAQC,EAAQA,GAElDC,EAAgBN,IAClBE,GAAa,OAKnB,IAAIM,EAAQ,WACVN,GAAa,GAIfphD,KAAK6F,GAAG,aAAc67C,GACtB1hD,KAAK6F,GAAG,cAAe67C,GAIvB1hD,KAAK6F,GAAG,YAAY,SAAU6Q,GAG5B,GAFAuqC,EAAa,MAEM,IAAfG,EAAqB,CAEvB,IAAIO,GAAY,IAAIjxC,MAAOC,UAAYqwC,EAGnCW,EAAYR,IAEdzqC,EAAMigC,iBAON32C,KAAKmG,QAAQ,aAkCrB02C,EAAUj6C,UAAU26C,oBAAsB,WAExC,GAAKv9C,KAAKw5C,UAAax5C,KAAKw5C,SAASoI,mBAArC,CAKA,IAAIC,EAASzgD,GAAKpB,KAAKw5C,SAAUx5C,KAAKw5C,SAASoI,oBAE3CE,OAAe,EAEnB9hD,KAAK6F,GAAG,cAAc,WACpBg8C,IAIA7hD,KAAKsQ,cAAcwxC,GAEnBA,EAAe9hD,KAAKmR,YAAY0wC,EAAQ,QAG1C,IAAIE,EAAW,SAAkBrrC,GAC/BmrC,IAEA7hD,KAAKsQ,cAAcwxC,IAGrB9hD,KAAK6F,GAAG,YAAag8C,GACrB7hD,KAAK6F,GAAG,WAAYk8C,GACpB/hD,KAAK6F,GAAG,cAAek8C,KAsCzBlF,EAAUj6C,UAAU+c,WAAa,SAAoBjE,EAAIsoB,GACvD,IAIIge,EAAWC,EAJXt8B,EAAS3lB,KAqBb,OAfA0b,EAAKta,GAAKpB,KAAM0b,GAEhBsmC,EAAYtlD,EAAOijB,YAAW,WAC5BgG,EAAOlG,IAAI,UAAWwiC,GACtBvmC,MACCsoB,GAEHie,EAAY,WACV,OAAOt8B,EAAOjO,aAAasqC,IAG7BC,EAAUlK,KAAO,eAAiBiK,EAElChiD,KAAK6F,GAAG,UAAWo8C,GAEZD,GAoBTnF,EAAUj6C,UAAU8U,aAAe,SAAsBsqC,GACvDtlD,EAAOgb,aAAasqC,GAEpB,IAAIC,EAAY,aAMhB,OAJAA,EAAUlK,KAAO,eAAiBiK,EAElChiD,KAAKyf,IAAI,UAAWwiC,GAEbD,GAyBTnF,EAAUj6C,UAAUuO,YAAc,SAAqBuK,EAAIwmC,GACzD,IAAI/7B,EAASnmB,KAEb0b,EAAKta,GAAKpB,KAAM0b,GAEhB,IAAIymC,EAAazlD,EAAOyU,YAAYuK,EAAIwmC,GAEpCD,EAAY,WACd,OAAO97B,EAAO7V,cAAc6xC,IAO9B,OAJAF,EAAUlK,KAAO,gBAAkBoK,EAEnCniD,KAAK6F,GAAG,UAAWo8C,GAEZE,GAoBTtF,EAAUj6C,UAAU0N,cAAgB,SAAuB6xC,GACzDzlD,EAAO4T,cAAc6xC,GAErB,IAAIF,EAAY,aAMhB,OAJAA,EAAUlK,KAAO,gBAAkBoK,EAEnCniD,KAAKyf,IAAI,UAAWwiC,GAEbE,GA8BTtF,EAAUj6C,UAAUw/C,sBAAwB,SAA+B1mC,GACzE,IAII7R,EAAIo4C,EAJJx7B,EAASzmB,KAMb,OAAIA,KAAKqiD,cACP3mC,EAAKta,GAAKpB,KAAM0b,GAEhB7R,EAAKnN,EAAO0lD,uBAAsB,WAChC37B,EAAOhH,IAAI,UAAWwiC,GACtBvmC,OAGFumC,EAAY,WACV,OAAOx7B,EAAO67B,qBAAqBz4C,IAGrCo4C,EAAUlK,KAAO,WAAaluC,EAC9B7J,KAAK6F,GAAG,UAAWo8C,GAEZp4C,GAIF7J,KAAK2f,WAAWjE,EAAI,IAAO,KAqBpCmhC,EAAUj6C,UAAU0/C,qBAAuB,SAA8Bz4C,GACvE,GAAI7J,KAAKqiD,aAAc,CACrB3lD,EAAO4lD,qBAAqBz4C,GAE5B,IAAIo4C,EAAY,aAMhB,OAJAA,EAAUlK,KAAO,WAAaluC,EAE9B7J,KAAKyf,IAAI,UAAWwiC,GAEbp4C,EAIT,OAAO7J,KAAK0X,aAAa7N,IAwB3BgzC,EAAU0F,kBAAoB,SAA2Bz0C,EAAM00C,GAC7D,GAAoB,kBAAT10C,IAAsBA,EAC/B,MAAM,IAAIvN,MAAM,4BAA8BuN,EAAO,kCAGvD,IAAIsxC,EAAOvC,EAAU6B,aAAa,QAG9Ba,EAASH,GAAQA,EAAKG,OAAOiD,GAC7BC,EAAS5F,IAAc2F,GAAuB3F,EAAUj6C,UAAU8/C,cAAcF,EAAoB5/C,WAExG,GAAI28C,IAAWkD,EAAQ,CACrB,IAAIE,OAAS,EAQb,MALEA,EADEpD,EACO,qDAEA,+BAGL,IAAIh/C,MAAM,uBAAyBuN,EAAO,MAAQ60C,EAAS,KAGnE70C,EAAO0uC,GAAY1uC,GAEd+uC,EAAU+F,cACb/F,EAAU+F,YAAc,IAG1B,IAAIC,EAAShG,EAAU6B,aAAa,UAEpC,GAAa,WAAT5wC,GAAqB+0C,GAAUA,EAAOC,QAAS,CACjD,IAAIA,EAAUD,EAAOC,QACjBC,EAAclnD,OAAO0Q,KAAKu2C,GAM9B,GAAIA,GAAWC,EAAY7jD,OAAS,GAAK6jD,EAAYtkD,KAAI,SAAUukD,GACjE,OAAOF,EAAQE,MACdrI,MAAMvrC,SACP,MAAM,IAAI7O,MAAM,oEAMpB,OAFAs8C,EAAU+F,YAAY90C,GAAQ00C,EAEvBA,GAmBT3F,EAAU6B,aAAe,SAAsB5wC,GAC7C,GAAKA,EAML,OAFAA,EAAO0uC,GAAY1uC,GAEf+uC,EAAU+F,aAAe/F,EAAU+F,YAAY90C,GAC1C+uC,EAAU+F,YAAY90C,QAD/B,GAKK+uC,EA7lDO,GAiqDhB,SAASoG,GAAWC,EAAQz1C,EAAO01C,GACjC,GAAqB,kBAAV11C,GAAsBA,EAAQ,GAAKA,EAAQ01C,EACpD,MAAM,IAAI5iD,MAAM,sBAAyB2iD,EAAS,0CAA+Cz1C,EAAQ,wCAA0C01C,EAAW,MA2BlK,SAASC,GAASF,EAAQG,EAAYpjB,EAAQqjB,GAE5C,OADAL,GAAWC,EAAQI,EAAYrjB,EAAO/gC,OAAS,GACxC+gC,EAAOqjB,GAAYD,GAS5B,SAASE,GAAoBtjB,GAC3B,YAAexjC,IAAXwjC,GAA0C,IAAlBA,EAAO/gC,OAC1B,CACLA,OAAQ,EACRqhB,MAAO,WACL,MAAM,IAAIhgB,MAAM,oCAElByf,IAAK,WACH,MAAM,IAAIzf,MAAM,qCAIf,CACLrB,OAAQ+gC,EAAO/gC,OACfqhB,MAAO6iC,GAAShiD,KAAK,KAAM,QAAS,EAAG6+B,GACvCjgB,IAAKojC,GAAShiD,KAAK,KAAM,MAAO,EAAG6+B,IAevC,SAASlU,GAAiBxL,EAAOP,GAC/B,OAAIiL,MAAMwE,QAAQlP,GACTgjC,GAAoBhjC,QACR9jB,IAAV8jB,QAA+B9jB,IAARujB,EACzBujC,KAEFA,GAAoB,CAAC,CAAChjC,EAAOP,KAmBtC,SAASwjC,GAAgB1jC,EAAUnf,GACjC,IAAI8iD,EAAmB,EACnBljC,OAAQ,EACRP,OAAM,EAEV,IAAKrf,EACH,OAAO,EAGJmf,GAAaA,EAAS5gB,SACzB4gB,EAAWiM,GAAiB,EAAG,IAGjC,IAAK,IAAIvpB,EAAI,EAAGA,EAAIsd,EAAS5gB,OAAQsD,IACnC+d,EAAQT,EAASS,MAAM/d,GACvBwd,EAAMF,EAASE,IAAIxd,GAGfwd,EAAMrf,IACRqf,EAAMrf,GAGR8iD,GAAoBzjC,EAAMO,EAG5B,OAAOkjC,EAAmB9iD,EA/K5Bk8C,GAAUj6C,UAAUy/C,aAAuD,oBAAjC3lD,EAAO0lD,uBAA+E,oBAAhC1lD,EAAO4lD,qBAEvGzF,GAAU0F,kBAAkB,YAAa1F,IA6MzC,IAjBA,IAAI6G,GAAgB,GAGhBC,GAAS,CAAC,CAAC,oBAAqB,iBAAkB,oBAAqB,oBAAqB,mBAAoB,mBAEpH,CAAC,0BAA2B,uBAAwB,0BAA2B,0BAA2B,yBAA0B,yBAEpI,CAAC,0BAA2B,yBAA0B,iCAAkC,yBAA0B,yBAA0B,yBAE5I,CAAC,uBAAwB,sBAAuB,uBAAwB,uBAAwB,sBAAuB,sBAEvH,CAAC,sBAAuB,mBAAoB,sBAAuB,sBAAuB,qBAAsB,sBAE5GC,GAAUD,GAAO,GACjBE,QAAa,EAGRrhD,GAAI,EAAGA,GAAImhD,GAAOzkD,OAAQsD,KAEjC,GAAImhD,GAAOnhD,IAAG,KAAM8W,EAAU,CAC5BuqC,GAAaF,GAAOnhD,IACpB,MAKJ,GAAIqhD,GACF,IAAK,IAAI10B,GAAK,EAAGA,GAAK00B,GAAW3kD,OAAQiwB,KACvCu0B,GAAcE,GAAQz0B,KAAO00B,GAAW10B,IAwB5C,SAAS20B,GAAW/nD,GAIlB,GAAIA,aAAiB+nD,GACnB,OAAO/nD,EAGY,kBAAVA,EACTiE,KAAK0lB,KAAO3pB,EACc,kBAAVA,EAEhBiE,KAAKoG,QAAUrK,EACN4xC,EAAS5xC,KAIQ,kBAAfA,EAAM2pB,OACf1lB,KAAK0lB,KAAO3pB,EAAM2pB,MAGpBpjB,EAAOtC,KAAMjE,IAGViE,KAAKoG,UACRpG,KAAKoG,QAAU09C,GAAWC,gBAAgB/jD,KAAK0lB,OAAS,IAS5Do+B,GAAWlhD,UAAU8iB,KAAO,EAQ5Bo+B,GAAWlhD,UAAUwD,QAAU,GAW/B09C,GAAWlhD,UAAU4iB,OAAS,KAe9Bs+B,GAAWE,WAAa,CAAC,mBAAoB,oBAAqB,oBAAqB,mBAAoB,8BAA+B,uBAQ1IF,GAAWC,gBAAkB,CAC3BE,EAAG,iCACHC,EAAG,8DACHC,EAAG,8HACHC,EAAG,qHACHC,EAAG,qEAKL,IAAK,IAAIC,GAAS,EAAGA,GAASR,GAAWE,WAAW9kD,OAAQolD,KAC1DR,GAAWA,GAAWE,WAAWM,KAAWA,GAE5CR,GAAWlhD,UAAUkhD,GAAWE,WAAWM,KAAWA,GAYxD,SAASC,GAAUxoD,GACjB,YAAiBU,IAAVV,GAAiC,OAAVA,GAAwC,oBAAfA,EAAMga,KAY/D,SAASyuC,GAAezoD,GAClBwoD,GAAUxoD,IACZA,EAAMga,KAAK,MAAM,SAAUsB,OAsB/B,IAAIotC,GAAe,SAAsBx5C,GACvC,IAAI8yC,EAAM,CAAC,OAAQ,QAAS,WAAY,KAAM,kCAAmC,OAAQ,OAAO3xC,QAAO,SAAUs4C,EAAKnV,EAAM/sC,GAM1H,OAJIyI,EAAMskC,KACRmV,EAAInV,GAAQtkC,EAAMskC,IAGbmV,IACN,CACDz4C,KAAMhB,EAAMgB,MAAQgf,MAAMroB,UAAUnE,IAAIqE,KAAKmI,EAAMgB,MAAM,SAAUtC,GACjE,MAAO,CACL0B,UAAW1B,EAAI0B,UACfE,QAAS5B,EAAI4B,QACbC,KAAM7B,EAAI6B,KACV3B,GAAIF,EAAIE,SAKd,OAAOk0C,GAeL4G,GAAmB,SAA0BlmC,GAE/C,IAAImmC,EAAWnmC,EAAK42B,GAAG,SAEnBwP,EAAY55B,MAAMroB,UAAUnE,IAAIqE,KAAK8hD,GAAU,SAAUvM,GAC3D,OAAOA,EAAEptC,SAEP65C,EAAS75B,MAAMroB,UAAUnE,IAAIqE,KAAK8hD,GAAU,SAAUG,GACxD,IAAIC,EAAOP,GAAaM,EAAQ95C,OAKhC,OAHI85C,EAAQ9nC,MACV+nC,EAAK/nC,IAAM8nC,EAAQ9nC,KAEd+nC,KAGT,OAAOF,EAAO7vB,OAAOhK,MAAMroB,UAAU/D,OAAOiE,KAAK2b,EAAKwmC,cAAc,SAAUh6C,GAC5E,OAAqC,IAA9B45C,EAAUxnD,QAAQ4N,MACxBxM,IAAIgmD,MAcLS,GAAmB,SAA0BF,EAAMvmC,GAWrD,OAVAumC,EAAKj6C,SAAQ,SAAUE,GACrB,IAAIk6C,EAAa1mC,EAAKimB,mBAAmBz5B,GAAOA,OAE3CA,EAAMgS,KAAOhS,EAAMgB,MACtBhB,EAAMgB,KAAKlB,SAAQ,SAAUpB,GAC3B,OAAOw7C,EAAW/5C,OAAOzB,SAKxB8U,EAAKwmC,cAGVG,GAAqB,CAAET,iBAAkBA,GAAkBO,iBAAkBA,GAAkBT,aAAcA,IAK7GY,GAAmB,mBACnBC,GAAM,GAYNC,GAAc,SAAUC,GAmC1B,SAASD,EAAY/L,EAAQh7B,GAC3B6uB,EAAertC,KAAMulD,GAErB,IAAIzgD,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAwB1E,OAtBA1Z,EAAM2gD,QAAU3gD,EAAM4gD,eAAiB5gD,EAAM6gD,gBAAiB,EAE9D7gD,EAAM8gD,WAAW9gD,EAAMi4C,SAAS8I,aAChC/gD,EAAMmR,QAAQnR,EAAMi4C,SAAS9mC,SAK7BnR,EAAMm5C,WAAazN,GAAS,MAAO,CACjCT,UAAWsV,GAAmB,YAC7B,CACDS,KAAM,aAGRhhD,EAAMihD,QAAUvV,GAAS,IAAK,CAC5BT,UAAWsV,GAAmB,gCAC9Bx7C,GAAI/E,EAAMxI,KAAKo2C,aAAa,sBAG9B7B,GAAY/rC,EAAMihD,QAASjhD,EAAMkhD,eACjClhD,EAAMm4C,IAAI5L,YAAYvsC,EAAMihD,SAC5BjhD,EAAMm4C,IAAI5L,YAAYvsC,EAAMm5C,YACrBn5C,EAidT,OA9gBAwoC,EAASiY,EAAaC,GAwEtBD,EAAY3iD,UAAU4tC,SAAW,WAC/B,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW/vC,KAAKw/C,gBAChByG,UAAW,GACV,CACD,mBAAoBjmD,KAAK6J,KAAO,eAChC,cAAe,OACf,aAAc7J,KAAK4kC,QACnB,KAAQ,YAIZ2gB,EAAY3iD,UAAUkQ,QAAU,WAC9B9S,KAAKi+C,WAAa,KAClBj+C,KAAK+lD,QAAU,KACf/lD,KAAKkmD,oBAAsB,KAE3BV,EAAW5iD,UAAUkQ,QAAQhQ,KAAK9C,OAWpCulD,EAAY3iD,UAAU48C,cAAgB,WACpC,OAAO6F,GAAmB,eAAiBG,EAAW5iD,UAAU48C,cAAc18C,KAAK9C,OAcrFulD,EAAY3iD,UAAUujD,eAAiB,SAAwB9uC,GACzDA,EAAEogC,QAAU6N,IAAOtlD,KAAK4lD,aAC1B5lD,KAAKyV,SAYT8vC,EAAY3iD,UAAUgiC,MAAQ,WAC5B,OAAO5kC,KAAKw9C,SAASx9C,KAAK+8C,SAASnY,OAAS,iBAY9C2gB,EAAY3iD,UAAUojD,YAAc,WAClC,IAAIjjC,EAAO/iB,KAAK+8C,SAASiJ,aAAehmD,KAAKw9C,SAAS,2BAOtD,OAJIx9C,KAAK4lD,cACP7iC,GAAQ,IAAM/iB,KAAKw9C,SAAS,wFAGvBz6B,GAWTwiC,EAAY3iD,UAAUwjD,KAAO,WAC3B,IAAKpmD,KAAKylD,QAAS,CACjB,IAAIjM,EAASx5C,KAAKw5C,SAQlBx5C,KAAKmG,QAAQ,mBACbnG,KAAKylD,SAAU,GAIXzlD,KAAK+8C,SAASsJ,aAAermD,KAAK0lD,iBAAmB1lD,KAAK2lD,iBAC5D3lD,KAAKsmD,OAKPtmD,KAAKumD,aAAe/M,EAAO35B,SAEvB7f,KAAK+8C,SAASyJ,aAAexmD,KAAKumD,aACpC/M,EAAOvS,QAGLjnC,KAAK4lD,aACP5lD,KAAK6F,GAAG7F,KAAKi9C,IAAI1E,cAAe,UAAWn3C,GAAKpB,KAAMA,KAAKmmD,iBAI7DnmD,KAAKymD,aAAejN,EAAOkN,WAC3BlN,EAAOkN,UAAS,GAEhB1mD,KAAK8/C,OACL9/C,KAAK2mD,oBACL3mD,KAAK1D,KAAKs0C,aAAa,cAAe,SAQtC5wC,KAAKmG,QAAQ,aACbnG,KAAK0lD,gBAAiB,IAe1BH,EAAY3iD,UAAUgkD,OAAS,SAAgB7qD,GAI7C,MAHqB,mBAAVA,GACTiE,KAAKjE,EAAQ,OAAS,WAEjBiE,KAAKylD,SAYdF,EAAY3iD,UAAU6S,MAAQ,WAC5B,GAAKzV,KAAKylD,QAAV,CAGA,IAAIjM,EAASx5C,KAAKw5C,SAQlBx5C,KAAKmG,QAAQ,oBACbnG,KAAKylD,SAAU,EAEXzlD,KAAKumD,aAAevmD,KAAK+8C,SAASyJ,aACpChN,EAAO5Q,OAGL5oC,KAAK4lD,aACP5lD,KAAKyf,IAAIzf,KAAKi9C,IAAI1E,cAAe,UAAWn3C,GAAKpB,KAAMA,KAAKmmD,iBAG1DnmD,KAAKymD,cACPjN,EAAOkN,UAAS,GAGlB1mD,KAAK+/C,OACL//C,KAAK1D,KAAKs0C,aAAa,cAAe,QAQtC5wC,KAAKmG,QAAQ,cACbnG,KAAK6mD,mBAED7mD,KAAK+8C,SAAS+J,WAChB9mD,KAAK8S,YAeTyyC,EAAY3iD,UAAUgjD,UAAY,SAAmB7pD,GACnD,GAAqB,mBAAVA,EAAqB,CAC9B,IAAI6pD,EAAY5lD,KAAK+mD,aAAehrD,EAChC0Z,EAAQzV,KAAKo+C,SAAS,eAG1B,GAAIwH,IAAcnwC,EAAO,CAIvB,IAAIyE,EAAOla,KAAKi+C,WAEhBj+C,KAAKi+C,WAAaj+C,KAAKi9C,IACvBxnC,EAAQzV,KAAKq+C,SAAS,cAAe,CAAE2I,YAAa,uBACpDhnD,KAAKi+C,WAAa/jC,EAClBla,KAAK6F,GAAG4P,EAAO,QAASzV,KAAKyV,QAI1BmwC,GAAanwC,IAChBzV,KAAKyf,IAAIhK,EAAO,QAASzV,KAAKyV,OAC9BzV,KAAK40C,YAAYn/B,GACjBA,EAAM3C,WAGV,OAAO9S,KAAK+mD,YASdxB,EAAY3iD,UAAU0jD,KAAO,WAC3BtmD,KAAKinD,SAASjnD,KAAKiW,YAerBsvC,EAAY3iD,UAAUqkD,SAAW,SAAkBhxC,GACjD,IAAI+nC,EAAYh+C,KAAKg+C,YACjBkJ,EAAWlJ,EAAUhgB,WACrBmpB,EAAgBnJ,EAAUoJ,YAQ9BpnD,KAAKmG,QAAQ,mBACbnG,KAAK2lD,gBAAiB,EAItBuB,EAAStS,YAAYoJ,GACrBh+C,KAAKqnD,QACLrS,GAAcgJ,EAAW/nC,GAOzBjW,KAAKmG,QAAQ,aAGTghD,EACFD,EAAS9V,aAAa4M,EAAWmJ,GAEjCD,EAAS7V,YAAY2M,GAIvB,IAAIsJ,EAActnD,KAAKo+C,SAAS,eAE5BkJ,GACFJ,EAAS7V,YAAYiW,EAAYrK,MAYrCsI,EAAY3iD,UAAUykD,MAAQ,WAO5BrnD,KAAKmG,QAAQ,oBACbwuC,GAAQ30C,KAAKg+C,aAQbh+C,KAAKmG,QAAQ,eAoBfo/C,EAAY3iD,UAAUqT,QAAU,SAAiBla,GAI/C,MAHqB,qBAAVA,IACTiE,KAAKunD,SAAWxrD,GAEXiE,KAAKunD,UAUdhC,EAAY3iD,UAAU+jD,kBAAoB,WACxC,IAAIa,EAAWluC,EAASmuC,cACpBC,EAAW1nD,KAAKorB,QAAQ6xB,IAE5Bj9C,KAAKkmD,oBAAsB,MAEvBwB,EAAShW,SAAS8V,IAAaE,IAAaF,KAC9CxnD,KAAKkmD,oBAAsBsB,EAE3BxnD,KAAK8yC,QAEL9yC,KAAK6F,GAAGyT,EAAU,UAAWtZ,KAAK2nD,iBAWtCpC,EAAY3iD,UAAUikD,iBAAmB,WACnC7mD,KAAKkmD,sBACPlmD,KAAKkmD,oBAAoBpT,QACzB9yC,KAAKkmD,oBAAsB,MAG7BlmD,KAAKyf,IAAInG,EAAU,UAAWtZ,KAAK2nD,gBAUrCpC,EAAY3iD,UAAU+kD,cAAgB,SAAuBjxC,GAE3D,GAAoB,IAAhBA,EAAM+gC,MAAV,CAQA,IAJA,IAAImQ,EAAe5nD,KAAK6nD,gBACpBL,EAAWxnD,KAAKi9C,IAAI3M,cAAc,UAClCwX,OAAa,EAERtlD,EAAI,EAAGA,EAAIolD,EAAa1oD,OAAQsD,IACvC,GAAIglD,IAAaI,EAAaplD,GAAI,CAChCslD,EAAatlD,EACb,MAIA8W,EAASmuC,gBAAkBznD,KAAKi9C,MAClC6K,EAAa,GAGXpxC,EAAMqxC,UAA2B,IAAfD,GACpBF,EAAaA,EAAa1oD,OAAS,GAAG4zC,QACtCp8B,EAAMigC,kBACIjgC,EAAMqxC,UAAYD,IAAeF,EAAa1oD,OAAS,IACjE0oD,EAAa,GAAG9U,QAChBp8B,EAAMigC,oBAWV4O,EAAY3iD,UAAUilD,cAAgB,WACpC,IAAIG,EAAchoD,KAAKi9C,IAAIgL,iBAAiB,KAE5C,OAAOh9B,MAAMroB,UAAU/D,OAAOiE,KAAKklD,GAAa,SAAU9W,GACxD,OAAQA,aAAiBx0C,EAAOwrD,mBAAqBhX,aAAiBx0C,EAAOyrD,kBAAoBjX,EAAM/vC,aAAa,UAAY+vC,aAAiBx0C,EAAO0rD,kBAAoBlX,aAAiBx0C,EAAO2rD,mBAAqBnX,aAAiBx0C,EAAO4rD,qBAAuBpX,aAAiBx0C,EAAO6rD,qBAAuBrX,EAAM/vC,aAAa,aAAe+vC,aAAiBx0C,EAAO8rD,mBAAqBtX,aAAiBx0C,EAAO+rD,mBAAqBvX,aAAiBx0C,EAAOgsD,kBAAoBxX,EAAM/vC,aAAa,cAAmD,IAApC+vC,EAAMwB,aAAa,aAAsBxB,EAAM/vC,aAAa,uBAI1jBokD,EA/gBS,CAghBhB1I,IAUF0I,GAAY3iD,UAAUm6C,SAAW,CAC/ByJ,aAAa,EACbM,WAAW,GAGbjK,GAAU0F,kBAAkB,cAAegD,IAY3C,IAAIoD,GAAY,SAAUjkC,GAcxB,SAASikC,IACP,IAEIC,EAFA9D,EAASriD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAI7EomD,EAAOpmD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,KAC/E4qC,EAAertC,KAAM2oD,GAErB,IAAI7jD,EAAQyoC,EAA0BvtC,KAAM0kB,EAAa5hB,KAAK9C,OAE9D,IAAK6oD,IACHA,EAAO/jD,EACH4nC,GAEF,IAAK,IAAI6C,KADTsZ,EAAOvvC,EAASC,cAAc,UACbovC,EAAU/lD,UACZ,gBAAT2sC,IACFsZ,EAAKtZ,GAAQoZ,EAAU/lD,UAAU2sC,IAMzCsZ,EAAKC,QAAU,GAQfjtD,OAAOC,eAAe+sD,EAAM,SAAU,CACpC/+C,IAAK,WACH,OAAO9J,KAAK8oD,QAAQ5pD,UAIxB,IAAK,IAAIsD,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IACjCqmD,EAAKE,SAASjE,EAAOtiD,IAKvB,OAAOomD,EAAOC,EAAMtb,EAA0BzoC,EAAO8jD,GA+GvD,OAtKAtb,EAASqb,EAAWjkC,GAoEpBikC,EAAU/lD,UAAUmmD,SAAW,SAAkB99C,GAC/C,IAAIwC,EAAQzN,KAAK8oD,QAAQ5pD,OAEnB,GAAKuO,KAASzN,MAClBnE,OAAOC,eAAekE,KAAMyN,EAAO,CACjC3D,IAAK,WACH,OAAO9J,KAAK8oD,QAAQr7C,OAMW,IAAjCzN,KAAK8oD,QAAQzrD,QAAQ4N,KACvBjL,KAAK8oD,QAAQxgD,KAAK2C,GASlBjL,KAAKmG,QAAQ,CACX8E,MAAOA,EACP7B,KAAM,eAeZu/C,EAAU/lD,UAAUomD,YAAc,SAAqBC,GAGrD,IAFA,IAAIh+C,OAAQ,EAEHzI,EAAI,EAAGsY,EAAI9a,KAAKd,OAAQsD,EAAIsY,EAAGtY,IACtC,GAAIxC,KAAKwC,KAAOymD,EAAQ,CACtBh+C,EAAQjL,KAAKwC,GACTyI,EAAMwU,KACRxU,EAAMwU,MAGRzf,KAAK8oD,QAAQr6B,OAAOjsB,EAAG,GAEvB,MAICyI,GAYLjL,KAAKmG,QAAQ,CACX8E,MAAOA,EACP7B,KAAM,iBAcVu/C,EAAU/lD,UAAUsmD,aAAe,SAAsBr/C,GAGvD,IAFA,IAAIrN,EAAS,KAEJgG,EAAI,EAAGsY,EAAI9a,KAAKd,OAAQsD,EAAIsY,EAAGtY,IAAK,CAC3C,IAAIyI,EAAQjL,KAAKwC,GAEjB,GAAIyI,EAAMpB,KAAOA,EAAI,CACnBrN,EAASyO,EACT,OAIJ,OAAOzO,GAGFmsD,EAvKO,CAwKd7hC,IAwBF,IAAK,IAAIpQ,MAPTiyC,GAAU/lD,UAAU03C,eAAiB,CACnC6O,OAAQ,SACRC,SAAU,WACVC,YAAa,eAIGV,GAAU/lD,UAAU03C,eACpCqO,GAAU/lD,UAAU,KAAO8T,IAAS,KAkBtC,IAAI4yC,GAAgB,SAAuBT,EAAM59C,GAC/C,IAAK,IAAIzI,EAAI,EAAGA,EAAIqmD,EAAK3pD,OAAQsD,IAC1B3G,OAAO0Q,KAAKs8C,EAAKrmD,IAAItD,QAAU+L,EAAMpB,KAAOg/C,EAAKrmD,GAAGqH,KAIzDg/C,EAAKrmD,GAAG+mD,SAAU,IAWlBC,GAAiB,SAAUC,GAS7B,SAASD,IACP,IAAI1kD,EAAO8jD,EAEP9D,EAASriD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GACjF4qC,EAAertC,KAAMwpD,GAMrB,IAJA,IAAIX,OAAO,EAIFrmD,EAAIsiD,EAAO5lD,OAAS,EAAGsD,GAAK,EAAGA,IACtC,GAAIsiD,EAAOtiD,GAAG+mD,QAAS,CACrBD,GAAcxE,EAAQA,EAAOtiD,IAC7B,MAMJ,GAAIkqC,EAAQ,CAEV,IAAK,IAAI6C,KADTsZ,EAAOvvC,EAASC,cAAc,UACbovC,GAAU/lD,UACZ,gBAAT2sC,IACFsZ,EAAKtZ,GAAQoZ,GAAU/lD,UAAU2sC,IAGrC,IAAK,IAAIma,KAASF,EAAe5mD,UACjB,gBAAV8mD,IACFb,EAAKa,GAASF,EAAe5mD,UAAU8mD,IAQ7C,OAHQ5kD,EAAQyoC,EAA0BvtC,KAAMypD,EAAW3mD,KAAK9C,KAAM8kD,EAAQ+D,IAA9EA,EAAsF/jD,EACtF+jD,EAAKc,WAAY,EAEVf,EAAOC,EAAMtb,EAA0BzoC,EAAO8jD,GA4CvD,OAxFAtb,EAASkc,EAAgBC,GAyDzBD,EAAe5mD,UAAUmmD,SAAW,SAAkB99C,GACpD,IAAI0a,EAAS3lB,KAETiL,EAAMs+C,SACRD,GAActpD,KAAMiL,GAGtBw+C,EAAW7mD,UAAUmmD,SAASjmD,KAAK9C,KAAMiL,GAEpCA,EAAMm5B,kBAQXn5B,EAAMm5B,iBAAiB,iBAAiB,WAIlCze,EAAOgkC,YAGXhkC,EAAOgkC,WAAY,EACnBL,GAAc3jC,EAAQ1a,GACtB0a,EAAOgkC,WAAY,EACnBhkC,EAAOxf,QAAQ,eAIZqjD,EAzFY,CA0FnBb,IAgBEiB,GAAkB,SAAuBf,EAAM59C,GACjD,IAAK,IAAIzI,EAAI,EAAGA,EAAIqmD,EAAK3pD,OAAQsD,IAC1B3G,OAAO0Q,KAAKs8C,EAAKrmD,IAAItD,QAAU+L,EAAMpB,KAAOg/C,EAAKrmD,GAAGqH,KAIzDg/C,EAAKrmD,GAAGqnD,UAAW,IAWnBC,GAAiB,SAAUL,GAS7B,SAASK,IACP,IAAIhlD,EAAO8jD,EAEP9D,EAASriD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GACjF4qC,EAAertC,KAAM8pD,GAMrB,IAJA,IAAIjB,OAAO,EAIFrmD,EAAIsiD,EAAO5lD,OAAS,EAAGsD,GAAK,EAAGA,IACtC,GAAIsiD,EAAOtiD,GAAGqnD,SAAU,CACtBD,GAAgB9E,EAAQA,EAAOtiD,IAC/B,MAMJ,GAAIkqC,EAAQ,CAEV,IAAK,IAAI6C,KADTsZ,EAAOvvC,EAASC,cAAc,UACbovC,GAAU/lD,UACZ,gBAAT2sC,IACFsZ,EAAKtZ,GAAQoZ,GAAU/lD,UAAU2sC,IAGrC,IAAK,IAAIma,KAASI,EAAelnD,UACjB,gBAAV8mD,IACFb,EAAKa,GAASI,EAAelnD,UAAU8mD,IAwB7C,OAnBQ5kD,EAAQyoC,EAA0BvtC,KAAMypD,EAAW3mD,KAAK9C,KAAM8kD,EAAQ+D,IAA9EA,EAAsF/jD,EACtF+jD,EAAKc,WAAY,EAMjB9tD,OAAOC,eAAe+sD,EAAM,gBAAiB,CAC3C/+C,IAAK,WACH,IAAK,IAAIqlB,EAAK,EAAGA,EAAKnvB,KAAKd,OAAQiwB,IACjC,GAAInvB,KAAKmvB,GAAI06B,SACX,OAAO16B,EAGX,OAAQ,GAEV3H,IAAK,eAGAohC,EAAOC,EAAMtb,EAA0BzoC,EAAO8jD,GAyCvD,OArGAtb,EAASwc,EAAgBL,GAyEzBK,EAAelnD,UAAUmmD,SAAW,SAAkB99C,GACpD,IAAI0a,EAAS3lB,KAETiL,EAAM4+C,UACRD,GAAgB5pD,KAAMiL,GAGxBw+C,EAAW7mD,UAAUmmD,SAASjmD,KAAK9C,KAAMiL,GAEpCA,EAAMm5B,kBAQXn5B,EAAMm5B,iBAAiB,kBAAkB,WACnCze,EAAOgkC,YAGXhkC,EAAOgkC,WAAY,EACnBC,GAAgBjkC,EAAQ1a,GACxB0a,EAAOgkC,WAAY,EACnBhkC,EAAOxf,QAAQ,eAIZ2jD,EAtGY,CAuGnBnB,IAYEoB,GAAgB,SAAUN,GAS5B,SAASM,IACP,IAAIjlD,EAAO8jD,EAEP9D,EAASriD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GACjF4qC,EAAertC,KAAM+pD,GAErB,IAAIlB,OAAO,EAIX,GAAInc,EAAQ,CAEV,IAAK,IAAI6C,KADTsZ,EAAOvvC,EAASC,cAAc,UACbovC,GAAU/lD,UACZ,gBAAT2sC,IACFsZ,EAAKtZ,GAAQoZ,GAAU/lD,UAAU2sC,IAGrC,IAAK,IAAIma,KAASK,EAAcnnD,UAChB,gBAAV8mD,IACFb,EAAKa,GAASK,EAAcnnD,UAAU8mD,IAM5C,OADQ5kD,EAAQyoC,EAA0BvtC,KAAMypD,EAAW3mD,KAAK9C,KAAM8kD,EAAQ+D,IAA9EA,EAAsF/jD,EAC/E8jD,EAAOC,EAAMtb,EAA0BzoC,EAAO8jD,GAiCvD,OAlEAtb,EAASyc,EAAeN,GA8CxBM,EAAcnnD,UAAUmmD,SAAW,SAAkB99C,GACnDw+C,EAAW7mD,UAAUmmD,SAASjmD,KAAK9C,KAAMiL,GAMzCA,EAAMm5B,iBAAiB,aAAchjC,GAAKpB,MAAM,WAC9CA,KAAKmG,QAAQ,cAGf,IAAI6jD,EAA2B,CAAC,WAAY,aAEU,IAAlDA,EAAyB3sD,QAAQ4N,EAAM05B,OACzC15B,EAAMm5B,iBAAiB,aAAchjC,GAAKpB,MAAM,WAC9CA,KAAKmG,QAAQ,+BAKZ4jD,EAnEW,CAoElBpB,IAUEsB,GAAuB,WAQzB,SAASA,IACP,IAAIC,EAAgBznD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GACxF4qC,EAAertC,KAAMiqD,GAErB,IAAIpB,EAAO7oD,KAEX,GAAI0sC,EAGF,IAAK,IAAI6C,KAFTsZ,EAAOvvC,EAASC,cAAc,UAEb0wC,EAAqBrnD,UACvB,gBAAT2sC,IACFsZ,EAAKtZ,GAAQ0a,EAAqBrnD,UAAU2sC,IAKlDsZ,EAAKsB,eAAiB,GAQtBtuD,OAAOC,eAAe+sD,EAAM,SAAU,CACpC/+C,IAAK,WACH,OAAO9J,KAAKmqD,eAAejrD,UAI/B,IAAK,IAAIsD,EAAI,EAAGtD,EAASgrD,EAAchrD,OAAQsD,EAAItD,EAAQsD,IACzDqmD,EAAKuB,iBAAiBF,EAAc1nD,IAGtC,GAAIkqC,EACF,OAAOmc,EA+EX,OAjEAoB,EAAqBrnD,UAAUwnD,iBAAmB,SAA0BC,GAC1E,IAAI58C,EAAQzN,KAAKmqD,eAAejrD,OAE1B,GAAKuO,KAASzN,MAClBnE,OAAOC,eAAekE,KAAMyN,EAAO,CACjC3D,IAAK,WACH,OAAO9J,KAAKmqD,eAAe18C,OAMkB,IAA/CzN,KAAKmqD,eAAe9sD,QAAQgtD,IAC9BrqD,KAAKmqD,eAAe7hD,KAAK+hD,IAkB7BJ,EAAqBrnD,UAAU0nD,wBAA0B,SAAiCr/C,GAGxF,IAFA,IAAIs/C,OAAgB,EAEX/nD,EAAI,EAAGtD,EAASc,KAAKmqD,eAAejrD,OAAQsD,EAAItD,EAAQsD,IAC/D,GAAIyI,IAAUjL,KAAKmqD,eAAe3nD,GAAGyI,MAAO,CAC1Cs/C,EAAgBvqD,KAAKmqD,eAAe3nD,GAEpC,MAIJ,OAAO+nD,GAaTN,EAAqBrnD,UAAU4nD,oBAAsB,SAA6BH,GAChF,IAAK,IAAI7nD,EAAI,EAAGtD,EAASc,KAAKmqD,eAAejrD,OAAQsD,EAAItD,EAAQsD,IAC/D,GAAI6nD,IAAiBrqD,KAAKmqD,eAAe3nD,GAAI,CAC3CxC,KAAKmqD,eAAe17B,OAAOjsB,EAAG,GAE9B,QAKCynD,EA1HkB,GAwJvBQ,GAAmB,WAQrB,SAASA,EAAiBx+C,GACxBohC,EAAertC,KAAMyqD,GAErB,IAAI5B,EAAO7oD,KAEX,GAAI0sC,EAGF,IAAK,IAAI6C,KAFTsZ,EAAOvvC,EAASC,cAAc,UAEbkxC,EAAiB7nD,UACnB,gBAAT2sC,IACFsZ,EAAKtZ,GAAQkb,EAAiB7nD,UAAU2sC,IAmB9C,GAdAkb,EAAiB7nD,UAAU8nD,SAAS5nD,KAAK+lD,EAAM58C,GAQ/CpQ,OAAOC,eAAe+sD,EAAM,SAAU,CACpC/+C,IAAK,WACH,OAAO9J,KAAK2qD,WAIZje,EACF,OAAOmc,EAoEX,OArDA4B,EAAiB7nD,UAAU8nD,SAAW,SAAkBz+C,GACtD,IAAI2+C,EAAY5qD,KAAKd,QAAU,EAC3BsD,EAAI,EACJsY,EAAI7O,EAAK/M,OAEbc,KAAK6qD,MAAQ5+C,EACbjM,KAAK2qD,QAAU1+C,EAAK/M,OAEpB,IAAI4rD,EAAa,SAAoBr9C,GAC7B,GAAKA,KAASzN,MAClBnE,OAAOC,eAAekE,KAAM,GAAKyN,EAAO,CACtC3D,IAAK,WACH,OAAO9J,KAAK6qD,MAAMp9C,OAM1B,GAAIm9C,EAAY9vC,EAGd,IAFAtY,EAAIooD,EAEGpoD,EAAIsY,EAAGtY,IACZsoD,EAAWhoD,KAAK9C,KAAMwC,IAgB5BioD,EAAiB7nD,UAAUmoD,WAAa,SAAoBlhD,GAG1D,IAFA,IAAIrN,EAAS,KAEJgG,EAAI,EAAGsY,EAAI9a,KAAKd,OAAQsD,EAAIsY,EAAGtY,IAAK,CAC3C,IAAImH,EAAM3J,KAAKwC,GAEf,GAAImH,EAAIE,KAAOA,EAAI,CACjBrN,EAASmN,EACT,OAIJ,OAAOnN,GAGFiuD,EA1Gc,GAwHnBO,GAAiB,CACnBC,YAAa,cACb5+B,SAAU,WACVyZ,KAAM,OACNolB,KAAM,OACNC,UAAW,YACXC,WAAY,cAUVC,GAAiB,CACnB,YAAe,cACf,aAAgB,eAChB,KAAQ,OACR,YAAa,YACb,YAAe,cACf,WAAc,cAUZC,GAAgB,CAClBH,UAAW,YACX9+B,SAAU,WACVk/B,aAAc,eACdC,SAAU,WACV7/C,SAAU,YAUR8/C,GAAgB,CAClBvV,SAAU,WACVwV,OAAQ,SACRC,QAAS,WAiBPC,GAAQ,SAAUlnC,GAuBpB,SAASknC,IACP,IAAIhD,EAEApqC,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAClF4qC,EAAertC,KAAM4rD,GAErB,IAAI9mD,EAAQyoC,EAA0BvtC,KAAM0kB,EAAa5hB,KAAK9C,OAE1DiL,EAAQnG,EAEZ,GAAI4nC,EAEF,IAAK,IAAI6C,KADTtkC,EAAQqO,EAASC,cAAc,UACdqyC,EAAMhpD,UACR,gBAAT2sC,IACFtkC,EAAMskC,GAAQqc,EAAMhpD,UAAU2sC,IAKpC,IAAIsc,EAAa,CACfhiD,GAAI2U,EAAQ3U,IAAM,aAAe2rC,KACjC7Q,KAAMnmB,EAAQmmB,MAAQ,GACtBC,MAAOpmB,EAAQomB,OAAS,GACxB78B,SAAUyW,EAAQzW,UAAY,IAwC5B+jD,EAAQ,SAAenpD,GACzB9G,OAAOC,eAAemP,EAAOtI,EAAK,CAChCmH,IAAK,WACH,OAAO+hD,EAAWlpD,IAEpB6kB,IAAK,gBAIT,IAAK,IAAI7kB,KAAOkpD,EACdC,EAAMnpD,GAGR,OAAOimD,EAAO39C,EAAOsiC,EAA0BzoC,EAAO8jD,GAGxD,OArGAtb,EAASse,EAAOlnC,GAqGTknC,EAtGG,CAuGV9kC,IAwCEilC,GAAW,SAAkBhgD,GAC/B,IAAI9I,EAAQ,CAAC,WAAY,WAAY,OAAQ,WAAY,SAAU,OAAQ,QAGvEnB,EAAIwX,EAASC,cAAc,KAE/BzX,EAAE+kB,KAAO9a,EAKT,IAAIigD,EAAuB,KAAXlqD,EAAEmqD,MAA8B,UAAfnqD,EAAEoqD,SAC/BC,OAAM,EAENH,IACFG,EAAM7yC,EAASC,cAAc,OAC7B4yC,EAAIC,UAAY,YAAcrgD,EAAM,SACpCjK,EAAIqqD,EAAIhb,WAERgb,EAAIvb,aAAa,QAAS,oCAC1Bt3B,EAASu5B,KAAKxB,YAAY8a,IAQ5B,IAFA,IAAIE,EAAU,GAEL7pD,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAChC6pD,EAAQppD,EAAMT,IAAMV,EAAEmB,EAAMT,IAqB9B,MAhByB,UAArB6pD,EAAQH,WACVG,EAAQJ,KAAOI,EAAQJ,KAAKjvC,QAAQ,OAAQ,KAGrB,WAArBqvC,EAAQH,WACVG,EAAQJ,KAAOI,EAAQJ,KAAKjvC,QAAQ,QAAS,KAG1CqvC,EAAQH,WACXG,EAAQH,SAAWxvD,EAAOkqB,SAASslC,UAGjCF,GACF1yC,EAASu5B,KAAK+B,YAAYuX,GAGrBE,GAeLC,GAAiB,SAAwBvgD,GAE3C,IAAKA,EAAIk2B,MAAM,gBAAiB,CAE9B,IAAIkqB,EAAM7yC,EAASC,cAAc,OAEjC4yC,EAAIC,UAAY,YAAcrgD,EAAM,UACpCA,EAAMogD,EAAIhb,WAAWtqB,KAGvB,OAAO9a,GAcLwgD,GAAmB,SAA0B7zC,GAC/C,GAAoB,kBAATA,EAAmB,CAC5B,IAAI8zC,EAAc,0EACdC,EAAYD,EAAYhhB,KAAK9yB,GAEjC,GAAI+zC,EACF,OAAOA,EAAU/gB,MAAMnS,cAI3B,MAAO,IAYLmzB,GAAgB,SAAuB3gD,GACzC,IAAI4gD,EAASjwD,EAAOkqB,SAChBgmC,EAAUb,GAAShgD,GAGnB8gD,EAAmC,MAArBD,EAAQV,SAAmBS,EAAOT,SAAWU,EAAQV,SAInEY,EAAcD,EAAcD,EAAQX,OAASU,EAAOT,SAAWS,EAAOV,KAE1E,OAAOa,GAGLC,IAAOlxD,OAAOsxC,QAAUtxC,QAAQ,CACnCkwD,SAAUA,GACVO,eAAgBA,GAChBC,iBAAkBA,GAClBG,cAAeA,KAiBZM,GAAY,SAAmBC,EAAYhiD,GAC7C,IAAI2a,EAAS,IAAIlpB,EAAOwwD,OAAOtoD,OAAOlI,EAAQA,EAAOywD,MAAOzwD,EAAOwwD,OAAOE,iBACtEC,EAAS,GAEbznC,EAAO0nC,MAAQ,SAAU3jD,GACvBsB,EAAMG,OAAOzB,IAGfic,EAAO2nC,eAAiB,SAAUpoC,GAChCkoC,EAAO/kD,KAAK6c,IAGdS,EAAO4nC,QAAU,WACfviD,EAAM9E,QAAQ,CACZiD,KAAM,aACN7G,OAAQ0I,KAIZ2a,EAAO6nC,MAAMR,GACTI,EAAOnuD,OAAS,IACdxC,EAAO+U,SAAW/U,EAAO+U,QAAQi8C,gBACnChxD,EAAO+U,QAAQi8C,eAAe,iCAAmCziD,EAAMgS,KAEzEowC,EAAOtiD,SAAQ,SAAUoa,GACvB,OAAOkqB,EAAMlqB,MAAMA,MAEjBzoB,EAAO+U,SAAW/U,EAAO+U,QAAQk8C,UACnCjxD,EAAO+U,QAAQk8C,YAInB/nC,EAAOxD,SAcLwrC,GAAY,SAAmB3wC,EAAKhS,GACtC,IAAI4sC,EAAO,CACT9wC,IAAKkW,GAEH6vC,EAAcJ,GAAczvC,GAE5B6vC,IACFjV,EAAKgW,KAAOf,GAGd5nC,EAAI2yB,EAAMz2C,GAAKpB,MAAM,SAAUwvB,EAAKs+B,EAAUC,GAC5C,GAAIv+B,EACF,OAAO6f,EAAMlqB,MAAMqK,EAAKs+B,GAO1B,GAJA7iD,EAAM+iD,SAAU,EAIa,oBAAlBtxD,EAAOwwD,QAChB,GAAIjiD,EAAM9K,MAAO,CACf,IAAI8tD,EAAc,WAChB,OAAOjB,GAAUe,EAAc9iD,IAGjCA,EAAM9K,MAAM0F,GAAG,cAAeooD,GAC9BhjD,EAAM9K,MAAM0F,GAAG,cAAc,WAC3BwpC,EAAMlqB,MAAM,oDAAsDla,EAAMgS,KACxEhS,EAAM9K,MAAMsf,IAAI,cAAewuC,YAInCjB,GAAUe,EAAc9iD,QAY1BijD,GAAY,SAAUC,GAqCxB,SAASD,IACP,IAAIppD,EAAO8jD,EAEPpqC,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAGlF,GAFA4qC,EAAertC,KAAMkuD,IAEhB1vC,EAAQC,KACX,MAAM,IAAIle,MAAM,4BAGlB,IAAIE,EAAWijB,GAAalF,EAAS,CACnCmmB,KAAM2mB,GAAc9sC,EAAQmmB,OAAS,YACrC58B,SAAUyW,EAAQzW,UAAYyW,EAAQ4vC,SAAW,KAE/C9qB,EAAOmoB,GAAchrD,EAAS6iC,OAAS,WACvC+qB,EAAW5tD,EAAS,WAEF,aAAlBA,EAASkkC,MAAyC,aAAlBlkC,EAASkkC,OAC3CrB,EAAO,UAIT,IAAIgrB,GAAMxpD,EAAQyoC,EAA0BvtC,KAAMmuD,EAAOrrD,KAAK9C,KAAMS,IAAYqE,GAIhF,GAFAwpD,EAAGnuD,MAAQM,EAASge,KAEhBiuB,EACF,IAAK,IAAI6C,KAAQ2e,EAAUtrD,UACZ,gBAAT2sC,IACF+e,EAAG/e,GAAQ2e,EAAUtrD,UAAU2sC,IAKrC+e,EAAGzD,MAAQ,GACXyD,EAAGC,YAAc,GAEjB,IAAItiD,EAAO,IAAIw+C,GAAiB6D,EAAGzD,OAC/B2D,EAAa,IAAI/D,GAAiB6D,EAAGC,aACrCE,GAAU,EACVC,EAAoBttD,GAAKktD,GAAI,WAM/BtuD,KAAKwuD,WAAaxuD,KAAKwuD,WACnBC,IACFzuD,KAAKmG,QAAQ,aACbsoD,GAAU,MA8Id,MA1Ia,aAATnrB,GACFgrB,EAAGnuD,MAAM28C,OAAM,WACbwR,EAAGnuD,MAAM0F,GAAG,aAAc6oD,MACzB,GAYL7yD,OAAOC,eAAewyD,EAAI,UAAW,CACnCxkD,IAAK,WACH,OAAOukD,GAET7mC,IAAK,eAYP3rB,OAAOC,eAAewyD,EAAI,OAAQ,CAChCxkD,IAAK,WACH,OAAOw5B,GAET9b,IAAK,SAAgBmnC,GACnB,IAAIhpC,EAAS3lB,KAERyrD,GAAckD,KAGnBrrB,EAAOqrB,EACM,YAATrrB,GAEFtjC,KAAKG,MAAM28C,OAAM,WACfn3B,EAAOxlB,MAAM0F,GAAG,aAAc6oD,MAC7B,GAWL1uD,KAAKmG,QAAQ,kBAUjBtK,OAAOC,eAAewyD,EAAI,OAAQ,CAChCxkD,IAAK,WACH,OAAK9J,KAAKguD,QAIH/hD,EAHE,MAKXub,IAAK,eASP3rB,OAAOC,eAAewyD,EAAI,aAAc,CACtCxkD,IAAK,WACH,IAAK9J,KAAKguD,QACR,OAAO,KAIT,GAAyB,IAArBhuD,KAAKiM,KAAK/M,OACZ,OAAOsvD,EAMT,IAHA,IAAII,EAAK5uD,KAAKG,MAAMO,cAChBmuD,EAAS,GAEJrsD,EAAI,EAAGsY,EAAI9a,KAAKiM,KAAK/M,OAAQsD,EAAIsY,EAAGtY,IAAK,CAChD,IAAImH,EAAM3J,KAAKiM,KAAKzJ,IAEhBmH,EAAI0B,WAAaujD,GAAMjlD,EAAI4B,SAAWqjD,GAE/BjlD,EAAI0B,YAAc1B,EAAI4B,SAAW5B,EAAI0B,WAAaujD,GAAMjlD,EAAI0B,UAAY,IAAOujD,IADxFC,EAAOvmD,KAAKqB,GAQhB,GAFA8kD,GAAU,EAENI,EAAO3vD,SAAWc,KAAKuuD,YAAYrvD,OACrCuvD,GAAU,OAEV,IAAK,IAAIt/B,EAAK,EAAGA,EAAK0/B,EAAO3vD,OAAQiwB,KACW,IAA1CnvB,KAAKuuD,YAAYlxD,QAAQwxD,EAAO1/B,MAClCs/B,GAAU,GAQhB,OAHAzuD,KAAKuuD,YAAcM,EACnBL,EAAW9D,SAAS1qD,KAAKuuD,aAElBC,GAKThnC,IAAK,eAGH/mB,EAASwc,KACXqxC,EAAGrxC,IAAMxc,EAASwc,IAClB2wC,GAAUntD,EAASwc,IAAKqxC,IAExBA,EAAGN,SAAU,EAGRpF,EAAO0F,EAAI/gB,EAA0BzoC,EAAO8jD,GA8DrD,OAjSAtb,EAAS4gB,EAAWC,GA8OpBD,EAAUtrD,UAAUwI,OAAS,SAAgB0jD,GAC3C,IAAInlD,EAAMmlD,EAEV,GAAIpyD,EAAOywD,SAAW2B,aAAuBpyD,EAAOywD,MAAMriD,QAAS,CAGjE,IAAK,IAAIykC,KAFT5lC,EAAM,IAAIjN,EAAOywD,MAAMriD,OAAOgkD,EAAYzjD,UAAWyjD,EAAYvjD,QAASujD,EAAYtjD,MAErEsjD,EACTvf,KAAQ5lC,IACZA,EAAI4lC,GAAQuf,EAAYvf,IAK5B5lC,EAAIE,GAAKilD,EAAYjlD,GACrBF,EAAIolD,aAAeD,EAKrB,IAFA,IAAIhK,EAAS9kD,KAAKG,MAAM8kD,aAEfziD,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IAC7BsiD,EAAOtiD,KAAOxC,MAChB8kD,EAAOtiD,GAAGwsD,UAAUrlD,GAIxB3J,KAAK6qD,MAAMviD,KAAKqB,GAChB3J,KAAKiM,KAAKy+C,SAAS1qD,KAAK6qD,QAW1BqD,EAAUtrD,UAAUosD,UAAY,SAAmBC,GACjD,IAAIzsD,EAAIxC,KAAK6qD,MAAM3rD,OAEnB,MAAOsD,IAAK,CACV,IAAImH,EAAM3J,KAAK6qD,MAAMroD,GAErB,GAAImH,IAAQslD,GAActlD,EAAIolD,cAAgBplD,EAAIolD,eAAiBE,EAAY,CAC7EjvD,KAAK6qD,MAAMp8B,OAAOjsB,EAAG,GACrBxC,KAAKiM,KAAKy+C,SAAS1qD,KAAK6qD,OACxB,SAKCqD,EAlSO,CAmSdtC,IAOFsC,GAAUtrD,UAAU03C,eAAiB,CACnC4U,UAAW,aAWb,IAAIC,GAAa,SAAUhB,GAyBzB,SAASgB,IACP,IAAIrqD,EAAO8jD,EAEPpqC,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAClF4qC,EAAertC,KAAMmvD,GAErB,IAAI1uD,EAAWijB,GAAalF,EAAS,CACnCmmB,KAAM0mB,GAAe7sC,EAAQmmB,OAAS,KAIpC15B,GAASnG,EAAQyoC,EAA0BvtC,KAAMmuD,EAAOrrD,KAAK9C,KAAMS,IAAYqE,GAC/EykD,GAAU,EAEd,GAAI7c,EACF,IAAK,IAAI6C,KAAQ4f,EAAWvsD,UACb,gBAAT2sC,IACFtkC,EAAMskC,GAAQ4f,EAAWvsD,UAAU2sC,IA8CzC,OAjCA1zC,OAAOC,eAAemP,EAAO,UAAW,CACtCnB,IAAK,WACH,OAAOy/C,GAET/hC,IAAK,SAAgB4nC,GAEO,mBAAfA,GAA4BA,IAAe7F,IAGtDA,EAAU6F,EAYVpvD,KAAKmG,QAAQ,qBAOb1F,EAAS8oD,UACXt+C,EAAMs+C,QAAU9oD,EAAS8oD,SAE3Bt+C,EAAM+iD,SAAU,EAETpF,EAAO39C,EAAOsiC,EAA0BzoC,EAAO8jD,GAGxD,OA1FAtb,EAAS6hB,EAAYhB,GA0FdgB,EA3FQ,CA4FfvD,IASEyD,GAAa,SAAUlB,GAwBzB,SAASkB,IACP,IAAIvqD,EAAO8jD,EAEPpqC,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAClF4qC,EAAertC,KAAMqvD,GAErB,IAAI5uD,EAAWijB,GAAalF,EAAS,CACnCmmB,KAAMqmB,GAAexsC,EAAQmmB,OAAS,KAKpC15B,GAASnG,EAAQyoC,EAA0BvtC,KAAMmuD,EAAOrrD,KAAK9C,KAAMS,IAAYqE,GAC/E+kD,GAAW,EAEf,GAAInd,EACF,IAAK,IAAI6C,KAAQ8f,EAAWzsD,UACb,gBAAT2sC,IACFtkC,EAAMskC,GAAQ8f,EAAWzsD,UAAU2sC,IA8CzC,OAhCA1zC,OAAOC,eAAemP,EAAO,WAAY,CACvCnB,IAAK,WACH,OAAO+/C,GAETriC,IAAK,SAAgB8nC,GAEQ,mBAAhBA,GAA6BA,IAAgBzF,IAGxDA,EAAWyF,EAYXtvD,KAAKmG,QAAQ,sBAOb1F,EAASopD,WACX5+C,EAAM4+C,SAAWppD,EAASopD,UAGrBjB,EAAO39C,EAAOsiC,EAA0BzoC,EAAO8jD,GAGxD,OA1FAtb,EAAS+hB,EAAYlB,GA0FdkB,EA3FQ,CA4FfzD,IAWE2D,GAAO,EACPC,GAAU,EACVC,GAAS,EACTC,GAAQ,EASRC,GAAmB,SAAUjrC,GAqC/B,SAASirC,IACP,IAAInxC,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAClF4qC,EAAertC,KAAM2vD,GAErB,IAAI7qD,EAAQyoC,EAA0BvtC,KAAM0kB,EAAa5hB,KAAK9C,OAE1DwX,OAAa,EACb6yC,EAAevlD,EAEnB,GAAI4nC,EAGF,IAAK,IAAI6C,KAFT8a,EAAe/wC,EAASC,cAAc,UAErBo2C,EAAiB/sD,UACnB,gBAAT2sC,IACF8a,EAAa9a,GAAQogB,EAAiB/sD,UAAU2sC,IAKtD,IAiDMqZ,EAjDF39C,EAAQ,IAAIijD,GAAU1vC,GAgD1B,OA9CA6rC,EAAa1lB,KAAO15B,EAAM05B,KAC1B0lB,EAAaptC,IAAMhS,EAAMgS,IACzBotC,EAAa+D,QAAUnjD,EAAMlD,SAC7BsiD,EAAazlB,MAAQ35B,EAAM25B,MAC3BylB,EAAa,WAAap/C,EAAM,WAQhCpP,OAAOC,eAAeuuD,EAAc,aAAc,CAChDvgD,IAAK,WACH,OAAO0N,KAWX3b,OAAOC,eAAeuuD,EAAc,QAAS,CAC3CvgD,IAAK,WACH,OAAOmB,KAIXuM,EAAa+3C,GAMbtkD,EAAMm5B,iBAAiB,cAAc,WACnC5sB,EAAai4C,GAEbpF,EAAalkD,QAAQ,CACnBiD,KAAM,OACN7G,OAAQ8nD,OAIR3d,GAGKkc,EAAOyB,EAAc9c,EAA0BzoC,EAAO8jD,IAExD9jD,EAGT,OA/GAwoC,EAASqiB,EAAkBjrC,GA+GpBirC,EAhHc,CAiHrB7oC,IAEF6oC,GAAiB/sD,UAAU03C,eAAiB,CAC1C5zB,KAAM,QAGRipC,GAAiBJ,KAAOA,GACxBI,GAAiBH,QAAUA,GAC3BG,GAAiBF,OAASA,GAC1BE,GAAiBD,MAAQA,GAOzB,IAAIE,GAAS,CACXz8B,MAAO,CACL08B,UAAWrG,GACXsG,WAAYX,GACZY,YAAa,SAEf98B,MAAO,CACL48B,UAAW/F,GACXgG,WAAYT,GACZU,YAAa,SAEfvkD,KAAM,CACJqkD,UAAW9F,GACX+F,WAAY5B,GACZ6B,YAAa,SAIjBl0D,OAAO0Q,KAAKqjD,IAAQ7kD,SAAQ,SAAU3B,GACpCwmD,GAAOxmD,GAAM4mD,WAAa5mD,EAAO,SACjCwmD,GAAOxmD,GAAM6mD,YAAc7mD,EAAO,aAGpC,IAAI8mD,GAAS,CACXC,WAAY,CACVN,UAAW9F,GACX+F,WAAY5B,GACZ6B,YAAa,aACbC,WAAY,mBACZC,YAAa,qBAEfG,aAAc,CACZP,UAAW5F,GACX6F,WAAYH,GACZI,YAAa,qBACbC,WAAY,qBACZC,YAAa,wBAIbI,GAAM3sC,GAAaksC,GAAQM,IAgD/B,SAASI,GAAkBnsD,EAAMwgC,EAAMC,EAAO78B,GAC5C,IAAIyW,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAE9EqiD,EAAS3gD,EAAK8gD,aAElBzmC,EAAQmmB,KAAOA,EAEXC,IACFpmB,EAAQomB,MAAQA,GAEd78B,IACFyW,EAAQzW,SAAWA,GAErByW,EAAQC,KAAOta,EAEf,IAAI8G,EAAQ,IAAIolD,GAAI7kD,KAAKskD,WAAWtxC,GAIpC,OAFAsmC,EAAOiE,SAAS99C,GAETA,EAjETilD,GAAOK,MAAQ10D,OAAO0Q,KAAK2jD,IAC3BN,GAAOW,MAAQ10D,OAAO0Q,KAAKqjD,IAC3BS,GAAIE,MAAQ,GAAGt7B,OAAOi7B,GAAOK,OAAOt7B,OAAO26B,GAAOW,OAyElD,IAAInR,GAAO,SAAUoG,GAYnB,SAASpG,IACP,IAAI5gC,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC9Eq6C,EAAQr6C,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,aAChF4qC,EAAertC,KAAMo/C,GAIrB5gC,EAAQ8+B,qBAAsB,EAI9B,IAAIx4C,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAM,KAAMwe,EAASs+B,IAwDjF,OAtDAh4C,EAAM0rD,aAAc,EACpB1rD,EAAMe,GAAG,WAAW,WAClB7F,KAAKwwD,aAAc,KAErB1rD,EAAMe,GAAG,aAAa,WACpB7F,KAAKwwD,aAAc,KAGrBH,GAAIE,MAAMxlD,SAAQ,SAAU+C,GAC1B,IAAI7K,EAAQotD,GAAIviD,GAEZ0Q,GAAWA,EAAQvb,EAAM+sD,cAC3BlrD,EAAM7B,EAAMgtD,aAAezxC,EAAQvb,EAAM+sD,gBAKxClrD,EAAM2rD,wBACT3rD,EAAM4rD,mBAIH5rD,EAAM6rD,0BACT7rD,EAAM8rD,sBAGR,CAAC,OAAQ,QAAS,SAAS7lD,SAAQ,SAAUE,IACE,IAAzCuT,EAAQ,SAAWvT,EAAQ,YAC7BnG,EAAM,iBAAmBmG,EAAQ,WAAY,OAIlB,IAA3BuT,EAAQqyC,iBAAyD,IAA7BryC,EAAQsyC,iBAC9ChsD,EAAMisD,0BAA2B,GACG,IAA3BvyC,EAAQqyC,iBAAwD,IAA7BryC,EAAQsyC,mBACpDhsD,EAAMisD,0BAA2B,GAG9BjsD,EAAMisD,0BACTjsD,EAAMksD,oBAGRlsD,EAAMmsD,sBAAwB,IAAIZ,GAAI7kD,KAAKqkD,UAE3C/qD,EAAMosD,qBAGD1yC,EAAQ2yC,wBACXrsD,EAAMi8C,gBAGJj8C,EAAML,cACRK,EAAMoxB,MAAQpxB,EAAML,YAAYqJ,MAAQ,gBAEnChJ,EAs1BT,OAp6BAwoC,EAAS8R,EAAMoG,GA0FfpG,EAAKx8C,UAAUwuD,iBAAmB,SAA0Bn0C,GAC1D,IAAI0I,EAAS3lB,KAERA,KAAK0/C,UAGR1/C,KAAK2rB,IAAI,SAAS,WAChB,OAAOhG,EAAOhG,YAAW,WACvB,OAAOgG,EAAOyrC,iBAAiBn0C,KAC9B,MAYPjd,KAAKmG,QAAQ,CACX8W,IAAKA,EACL7T,KAAM,eAcVg2C,EAAKx8C,UAAU8tD,iBAAmB,WAChC1wD,KAAK6F,GAAG,iBAAkB7F,KAAKqxD,kBAE/BrxD,KAAKsxD,gBAAiB,EAGtBtxD,KAAK2rB,IAAI,QAAS3rB,KAAKuxD,gBASzBnS,EAAKx8C,UAAU4uD,kBAAoB,WACjCxxD,KAAKsxD,gBAAiB,EACtBtxD,KAAKyxD,uBAELzxD,KAAKyf,IAAI,iBAAkBzf,KAAKqxD,mBAkBlCjS,EAAKx8C,UAAU2uD,cAAgB,SAAuB76C,GACpD1W,KAAKyxD,uBACLzxD,KAAK0xD,iBAAmB1xD,KAAKmR,YAAY/P,GAAKpB,MAAM,WAGlD,IAAI2xD,EAAqB3xD,KAAKwjD,kBAE1BxjD,KAAK4xD,mBAAqBD,GAO5B3xD,KAAKmG,QAAQ,YAGfnG,KAAK4xD,iBAAmBD,EAEG,IAAvBA,GACF3xD,KAAKyxD,0BAEL,MAcNrS,EAAKx8C,UAAUyuD,iBAAmB,SAA0B36C,GAC1D1W,KAAK6xD,UAAY7xD,KAAKW,YAWxBy+C,EAAKx8C,UAAUkd,SAAW,WACxB,OAAOiM,GAAiB,EAAG,IAa7BqzB,EAAKx8C,UAAU4gD,gBAAkB,WAC/B,OAAOA,GAAgBxjD,KAAK8f,WAAY9f,KAAK6xD,YAW/CzS,EAAKx8C,UAAU6uD,qBAAuB,WACpCzxD,KAAKsQ,cAActQ,KAAK0xD,mBAU1BtS,EAAKx8C,UAAUguD,oBAAsB,WACnC5wD,KAAK8xD,mBAAoB,EAEzB9xD,KAAK6F,GAAG,OAAQ7F,KAAK+xD,kBACrB/xD,KAAK6F,GAAG,QAAS7F,KAAKgyD,0BASxB5S,EAAKx8C,UAAUqvD,qBAAuB,WACpCjyD,KAAK8xD,mBAAoB,EACzB9xD,KAAKgyD,0BACLhyD,KAAKyf,IAAI,OAAQzf,KAAK+xD,kBACtB/xD,KAAKyf,IAAI,QAASzf,KAAKgyD,0BAYzB5S,EAAKx8C,UAAUmvD,iBAAmB,WAC5B/xD,KAAKkyD,qBACPlyD,KAAKgyD,0BAEPhyD,KAAKkyD,oBAAsBlyD,KAAKmR,aAAY,WAO1CnR,KAAKmG,QAAQ,CAAEiD,KAAM,aAAc7G,OAAQvC,KAAMmyD,mBAAmB,MAGnE,MAWL/S,EAAKx8C,UAAUovD,wBAA0B,WACvChyD,KAAKsQ,cAActQ,KAAKkyD,qBAIxBlyD,KAAKmG,QAAQ,CAAEiD,KAAM,aAAc7G,OAAQvC,KAAMmyD,mBAAmB,KAWtE/S,EAAKx8C,UAAUkQ,QAAU,WAGvB9S,KAAKoyD,YAAYxC,GAAOW,OAGpBvwD,KAAKsxD,gBACPtxD,KAAKwxD,oBAGHxxD,KAAK8xD,mBACP9xD,KAAKiyD,uBAGPzM,EAAW5iD,UAAUkQ,QAAQhQ,KAAK9C,OAepCo/C,EAAKx8C,UAAUwvD,YAAc,SAAqBhc,GAChD,IAAIjwB,EAASnmB,KAEbo2C,EAAQ,GAAGnhB,OAAOmhB,GAElBA,EAAMrrC,SAAQ,SAAU3B,GACtB,IAAIy/C,EAAO1iC,EAAO/c,EAAO,aAAe,GACpC5G,EAAIqmD,EAAK3pD,OAEb,MAAOsD,IAAK,CACV,IAAIyI,EAAQ49C,EAAKrmD,GAEJ,SAAT4G,GACF+c,EAAOksC,sBAAsBpnD,GAE/B49C,EAAKG,YAAY/9C,QAWvBm0C,EAAKx8C,UAAU0vD,sBAAwB,WACrC,IAAIzJ,EAAO7oD,KAAKixD,uBAAyB,GACrCzuD,EAAIqmD,EAAK3pD,OAEb,MAAOsD,IAAK,CACV,IAAIyI,EAAQ49C,EAAKrmD,GAEjBxC,KAAKqyD,sBAAsBpnD,KAW/Bm0C,EAAKx8C,UAAU+xB,MAAQ,aAavByqB,EAAKx8C,UAAUuiB,MAAQ,SAAeqK,GAKpC,YAJY/yB,IAAR+yB,IACFxvB,KAAKuyD,OAAS,IAAIzO,GAAWt0B,GAC7BxvB,KAAKmG,QAAQ,UAERnG,KAAKuyD,QAednT,EAAKx8C,UAAU4vD,OAAS,WACtB,OAAIxyD,KAAKwwD,YACAzkC,GAAiB,EAAG,GAEtBA,MAWTqzB,EAAKx8C,UAAU6d,eAAiB,WAE1BzgB,KAAK8xD,mBAOP9xD,KAAKmG,QAAQ,CAAEiD,KAAM,aAAc7G,OAAQvC,KAAMmyD,mBAAmB,KAgBxE/S,EAAKx8C,UAAUsuD,mBAAqB,WAClC,IAAIzqC,EAASzmB,KAsBb4vD,GAAOW,MAAMxlD,SAAQ,SAAU+C,GAC7B,IAAI7K,EAAQ2sD,GAAO9hD,GACf2kD,EAAmB,WACrBhsC,EAAOtgB,QAAQ2H,EAAO,gBAGpBg3C,EAASr+B,EAAOxjB,EAAM+sD,cAE1BlL,EAAO1gB,iBAAiB,cAAequB,GACvC3N,EAAO1gB,iBAAiB,WAAYquB,GAEpChsC,EAAO5gB,GAAG,WAAW,WACnBi/C,EAAOnb,oBAAoB,cAAe8oB,GAC1C3N,EAAOnb,oBAAoB,WAAY8oB,UAa7CrT,EAAKx8C,UAAU8vD,iBAAmB,WAChC,IAAI/rC,EAAS3mB,KAEb,IAAItD,EAAOwwD,OAOX,GAAI5zC,EAASu5B,KAAKnB,SAAS1xC,KAAK1D,MAAO,CAKrC,IAAK0D,KAAK+8C,SAAS,WAAahP,EAAQ7C,IAAQrvC,OAAO0Q,KAAK2+B,GAAKhsC,OAAS,EAExE,YADAc,KAAKmG,QAAQ,eAMf,IAAIwsD,EAASr5C,EAASC,cAAc,UAEpCo5C,EAAO11C,IAAMjd,KAAK+8C,SAAS,WAAa,iDACxC4V,EAAOC,OAAS,WAOdjsC,EAAOxgB,QAAQ,gBAEjBwsD,EAAOv7C,QAAU,WAOfuP,EAAOxgB,QAAQ,eAEjBnG,KAAK6F,GAAG,WAAW,WACjB8sD,EAAOC,OAAS,KAChBD,EAAOv7C,QAAU,QAInB1a,EAAOwwD,QAAS,EAChBltD,KAAK1D,KAAK0hC,WAAWqT,YAAYshB,QAEjC3yD,KAAK88C,MAAM98C,KAAK0yD,mBAUpBtT,EAAKx8C,UAAUouD,kBAAoB,WACjC,IAAIpnB,EAAS5pC,KAET8kD,EAAS9kD,KAAKilD,aACd4N,EAAe7yD,KAAK8yD,mBACpBC,EAAiB,SAAwB17C,GAC3C,OAAOytC,EAAOiE,SAAS1xC,EAAEpM,QAEvB+nD,EAAoB,SAA2B37C,GACjD,OAAOytC,EAAOkE,YAAY3xC,EAAEpM,QAG9B4nD,EAAahtD,GAAG,WAAYktD,GAC5BF,EAAahtD,GAAG,cAAemtD,GAE/BhzD,KAAK0yD,mBAEL,IAAIO,EAAgB,WAClB,OAAOrpB,EAAOzjC,QAAQ,oBAGpB+sD,EAAoB,WACtBD,IAEA,IAAK,IAAIzwD,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IAAK,CACtC,IAAIyI,EAAQ65C,EAAOtiD,GAEnByI,EAAM0+B,oBAAoB,YAAaspB,GACpB,YAAfhoD,EAAMq4B,MACRr4B,EAAMm5B,iBAAiB,YAAa6uB,KAK1CC,IACApO,EAAO1gB,iBAAiB,SAAU8uB,GAClCpO,EAAO1gB,iBAAiB,WAAY8uB,GACpCpO,EAAO1gB,iBAAiB,cAAe8uB,GAEvClzD,KAAK6F,GAAG,WAAW,WACjBgtD,EAAapzC,IAAI,WAAYszC,GAC7BF,EAAapzC,IAAI,cAAeuzC,GAChClO,EAAOnb,oBAAoB,SAAUupB,GACrCpO,EAAOnb,oBAAoB,WAAYupB,GACvCpO,EAAOnb,oBAAoB,cAAeupB,GAE1C,IAAK,IAAI1wD,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IAAK,CACtC,IAAIyI,EAAQ65C,EAAOtiD,GAEnByI,EAAM0+B,oBAAoB,YAAaspB,QAsB7C7T,EAAKx8C,UAAUihC,aAAe,SAAsBc,EAAMC,EAAO78B,GAC/D,IAAK48B,EACH,MAAM,IAAIpkC,MAAM,mDAGlB,OAAO+vD,GAAkBtwD,KAAM2kC,EAAMC,EAAO78B,IA0B9Cq3C,EAAKx8C,UAAUuwD,sBAAwB,SAA+B30C,GACpE,IAAIvT,EAAQyY,GAAalF,EAAS,CAChCC,KAAMze,OAGR,OAAO,IAAIkwD,GAAOE,aAAaN,WAAW7kD,IAyB5Cm0C,EAAKx8C,UAAU8hC,mBAAqB,WAClC,IAAI0uB,EAASpzD,KAETwe,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC9E4wD,EAAgB5wD,UAAU,GAE1B6wD,EAAmBtzD,KAAKmzD,sBAAsB30C,GAmBlD,OAjBsB,IAAlB60C,IAA4C,IAAlBA,IAE5BhkB,EAAMrlC,KAAK,oKACXqpD,GAAgB,GAIlBrzD,KAAKuzD,qBAAqBnJ,iBAAiBkJ,GAC3CtzD,KAAK8yD,mBAAmB/J,SAASuK,EAAiBroD,QAE5B,IAAlBooD,GAEFrzD,KAAK88C,OAAM,WACT,OAAOsW,EAAOnC,sBAAsBlI,SAASuK,EAAiBroD,UAI3DqoD,GAWTlU,EAAKx8C,UAAUyvD,sBAAwB,SAA+BpnD,GACpE,IAAIo/C,EAAerqD,KAAKuzD,qBAAqBjJ,wBAAwBr/C,GAGrEjL,KAAKuzD,qBAAqB/I,oBAAoBH,GAC9CrqD,KAAK8yD,mBAAmB9J,YAAY/9C,GACpCjL,KAAKixD,sBAAsBjI,YAAY/9C,IAgBzCm0C,EAAKx8C,UAAU4wD,wBAA0B,WACvC,MAAO,IAUTpU,EAAKx8C,UAAU6wD,UAAY,aAS3BrU,EAAKx8C,UAAU8wD,YAAc,aAS7BtU,EAAKx8C,UAAU+wD,eAAiB,aAoBhCvU,EAAKx8C,UAAUgxD,YAAc,WAC3B,MAAO,IAeTxU,EAAKwU,YAAc,WACjB,MAAO,IAaTxU,EAAKyU,cAAgB,SAAuBC,EAAQt1C,GAClD,OAAO4gC,EAAKwU,YAAYE,EAAO1qD,OAiBjCg2C,EAAKG,OAAS,SAAgBluC,GAC5B,OAAOA,EAAUzO,qBAAqBw8C,GAAQ/tC,aAAqB+tC,GAAQ/tC,IAAc+tC,GAc3FA,EAAK2U,aAAe,SAAsBjmD,EAAM2Q,GAK9C,GAJK2gC,EAAK4U,SACR5U,EAAK4U,OAAS,KAGX5U,EAAKG,OAAO9gC,GACf,MAAM,IAAIle,MAAM,QAAUuN,EAAO,mBAGnC,IAAKsxC,EAAKwU,YACR,MAAM,IAAIrzD,MAAM,uDAElB,IAAK6+C,EAAKyU,cACR,MAAM,IAAItzD,MAAM,yDAUlB,OAPAuN,EAAO0uC,GAAY1uC,GAEnBsxC,EAAK4U,OAAOlmD,GAAQ2Q,EACP,SAAT3Q,GAEFsxC,EAAK6U,kBAAkB3rD,KAAKwF,GAEvB2Q,GAcT2gC,EAAK8U,QAAU,SAAiBpmD,GAC9B,GAAKA,EAML,OAFAA,EAAO0uC,GAAY1uC,GAEfsxC,EAAK4U,QAAU5U,EAAK4U,OAAOlmD,GACtBsxC,EAAK4U,OAAOlmD,GAGjBpR,GAAUA,EAAOy3D,SAAWz3D,EAAOy3D,QAAQrmD,IAC7CuhC,EAAMrlC,KAAK,OAAS8D,EAAO,6GACpBpR,EAAOy3D,QAAQrmD,SAFxB,GAMKsxC,EAr6BE,CAs6BTvC,IAqCFwT,GAAIE,MAAMxlD,SAAQ,SAAU+C,GAC1B,IAAI7K,EAAQotD,GAAIviD,GAEhBsxC,GAAKx8C,UAAUK,EAAM+sD,YAAc,WAEjC,OADAhwD,KAAKiD,EAAMgtD,aAAejwD,KAAKiD,EAAMgtD,cAAgB,IAAIhtD,EAAM4sD,UACxD7vD,KAAKiD,EAAMgtD,iBAkCtB7Q,GAAKx8C,UAAUwxD,uBAAwB,EAQvChV,GAAKx8C,UAAUyxD,qBAAsB,EASrCjV,GAAKx8C,UAAU0xD,0BAA2B,EAW1ClV,GAAKx8C,UAAU2xD,sBAAuB,EAUtCnV,GAAKx8C,UAAU6tD,wBAAyB,EAYxCrR,GAAKx8C,UAAU4xD,mBAAoB,EAUnCpV,GAAKx8C,UAAU+tD,0BAA2B,EAS1CvR,GAAKx8C,UAAUmuD,0BAA2B,EAc1C3R,GAAKqV,mBAAqB,SAAUC,GAWlCA,EAAMC,sBAAwB,SAAU5lD,EAAStB,GAC/C,IAAIsoC,EAAW2e,EAAME,eAEhB7e,IACHA,EAAW2e,EAAME,eAAiB,SAGtBn4D,IAAVgR,IAEFA,EAAQsoC,EAAS72C,QAGnB62C,EAAStnB,OAAOhhB,EAAO,EAAGsB,IAa5B2lD,EAAMd,YAAc,SAAUxqD,GAI5B,IAHA,IAAI2sC,EAAW2e,EAAME,gBAAkB,GACnCC,OAAM,EAEDryD,EAAI,EAAGA,EAAIuzC,EAAS72C,OAAQsD,IAGnC,GAFAqyD,EAAM9e,EAASvzC,GAAGoxD,YAAYxqD,GAE1ByrD,EACF,OAAOA,EAIX,MAAO,IAkBTH,EAAMI,oBAAsB,SAAUpyD,EAAQ8b,GAI5C,IAHA,IAAIu3B,EAAW2e,EAAME,gBAAkB,GACnCC,OAAM,EAEDryD,EAAI,EAAGA,EAAIuzC,EAAS72C,OAAQsD,IAGnC,GAFAqyD,EAAM9e,EAASvzC,GAAGuyD,gBAAgBryD,EAAQ8b,GAEtCq2C,EACF,OAAO9e,EAASvzC,GAIpB,OAAO,MAeTkyD,EAAMb,cAAgB,SAAUC,EAAQt1C,GACtC,IAAIw2C,EAAKN,EAAMI,oBAAoBhB,EAAQt1C,GAE3C,OAAIw2C,EACKA,EAAGD,gBAAgBjB,EAAQt1C,GAG7B,IAOT,IAAIy2C,EAAa,CAAC,WAAY,UAAW,YAgBzCA,EAAWlqD,SAAQ,SAAUm4C,GAC3B,IAAIgS,EAAal1D,KAAKkjD,GAEI,oBAAfgS,IAIXl1D,KAAKkjD,GAAU,WACb,OAAIljD,KAAKm1D,gBAAkBn1D,KAAKm1D,eAAejS,GACtCljD,KAAKm1D,eAAejS,GAAQl4B,MAAMhrB,KAAKm1D,eAAgB1yD,WAEzDyyD,EAAWlqC,MAAMhrB,KAAMyC,eAE/BiyD,EAAM9xD,WAUT8xD,EAAM9xD,UAAUwyD,UAAY,SAAU1yD,GACpC,IAAIsyD,EAAKN,EAAMI,oBAAoBpyD,EAAQ1C,KAAK+8C,UAE3CiY,IAGCN,EAAMW,oBACRL,EAAKN,EAAMW,oBAEXhmB,EAAMlqB,MAAM,mDAKhBnlB,KAAKs1D,uBACLt1D,KAAKyf,IAAI,UAAWzf,KAAKs1D,sBAErBN,IAAON,EAAMW,sBACfr1D,KAAKu1D,eAAiB7yD,GAGxB1C,KAAKm1D,eAAiBH,EAAGQ,aAAa9yD,EAAQ1C,KAAMA,KAAK+8C,UACzD/8C,KAAK6F,GAAG,UAAW7F,KAAKs1D,uBAQ1BZ,EAAM9xD,UAAU0yD,qBAAuB,WAIjCt1D,KAAKu1D,iBACPv1D,KAAKoyD,YAAY,CAAC,QAAS,UAC3BpyD,KAAKu1D,eAAiB,MAIxBv1D,KAAKsyD,wBAEDtyD,KAAKm1D,iBAEHn1D,KAAKm1D,eAAeriD,SACtB9S,KAAKm1D,eAAeriD,UAGtB9S,KAAKm1D,eAAiB,QAO5BtY,GAAU0F,kBAAkB,OAAQnD,IACpCA,GAAK2U,aAAa,OAAQ3U,IAO1BA,GAAK6U,kBAAoB,GAEzB,IAAIwB,GAAc,GACdC,GAAsB,GAEtBC,GAAa,GAEjB,SAASC,GAAIxsD,EAAMysD,GACjBJ,GAAYrsD,GAAQqsD,GAAYrsD,IAAS,GACzCqsD,GAAYrsD,GAAMd,KAAKutD,GAKzB,SAAST,GAAU5b,EAAQv8B,EAAKqS,GAC9BkqB,EAAO75B,YAAW,WAChB,OAAOm2C,GAAgB74C,EAAKw4C,GAAYx4C,EAAI7T,MAAOkmB,EAAMkqB,KACxD,GAGL,SAASuc,GAAQF,EAAYp3C,GAC3Bo3C,EAAW9qD,SAAQ,SAAUirD,GAC3B,OAAOA,EAAGD,SAAWC,EAAGD,QAAQt3C,MAQpC,SAASw3C,GAAMJ,EAAYp3C,EAAM3X,GAC/B,OAAO+uD,EAAWK,YAAYC,GAAmBrvD,GAAS2X,EAAK3X,MAOjE,SAASsvD,GAAMP,EAAYp3C,EAAM3X,EAAQuzB,GACvC,OAAO5b,EAAK3X,GAAQ+uD,EAAWzpD,OAAO+pD,GAAmBrvD,GAASuzB,IASpE,SAASg8B,GAAQR,EAAYp3C,EAAM3X,GACjC,IAAIuzB,EAAM53B,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,KAE1E6zD,EAAa,OAAS9Z,GAAY11C,GAClCyvD,EAAkBV,EAAWzpD,OAAO+pD,GAAmBG,GAAaj8B,GACpEm8B,EAAaD,IAAoBZ,GACjC3e,EAAcwf,EAAa,KAAO/3C,EAAK3X,GAAQyvD,GAInD,OAFAE,GAAaZ,EAAY/uD,EAAQkwC,EAAawf,GAEvCxf,EAGT,IAAI0f,GAAiB,CACnB52C,SAAU,EACVpf,YAAa,EACbC,SAAU,EACV+d,SAAU,EACV8zC,OAAQ,EACR3yC,OAAQ,GAGN82C,GAAiB,CACnBl2C,eAAgB,GAGdm2C,GAAmB,CACrBhuB,KAAM,EACN3B,MAAO,GAGT,SAASkvB,GAAmBrvD,GAC1B,OAAO,SAAU/K,EAAOi6D,GAEtB,OAAIj6D,IAAU45D,GACLA,GAGLK,EAAGlvD,GACEkvD,EAAGlvD,GAAQ/K,GAGbA,GAIX,SAAS06D,GAAaI,EAAK/vD,EAAQ/K,EAAOy6D,GACxC,IAAK,IAAIh0D,EAAIq0D,EAAI33D,OAAS,EAAGsD,GAAK,EAAGA,IAAK,CACxC,IAAIwzD,EAAKa,EAAIr0D,GAETwzD,EAAGlvD,IACLkvD,EAAGlvD,GAAQ0vD,EAAYz6D,IAK7B,SAAS+6D,GAAoBtd,GAC3Bkc,GAAoBlc,EAAO3vC,MAAQ,KAQrC,SAASktD,GAAmBvd,EAAQwd,GAClC,IAAIH,EAAMnB,GAAoBlc,EAAO3vC,MACjCmsD,EAAK,KAET,QAAYv5D,IAARo6D,GAA6B,OAARA,EAGvB,OAFAb,EAAKgB,EAAUxd,GACfkc,GAAoBlc,EAAO3vC,MAAQ,CAAC,CAACmtD,EAAWhB,IACzCA,EAGT,IAAK,IAAIxzD,EAAI,EAAGA,EAAIq0D,EAAI33D,OAAQsD,IAAK,CACnC,IAAIy0D,EAASJ,EAAIr0D,GACb00D,EAAMD,EAAO,GACbE,EAAMF,EAAO,GAGbC,IAAQF,IAIZhB,EAAKmB,GAQP,OALW,OAAPnB,IACFA,EAAKgB,EAAUxd,GACfqd,EAAIvuD,KAAK,CAAC0uD,EAAWhB,KAGhBA,EAGT,SAASF,KACP,IAAI74C,EAAMxa,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC1EozD,EAAapzD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GACjF6sB,EAAO7sB,UAAU,GACjB+2C,EAAS/2C,UAAU,GACnBiiD,EAAMjiD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC1E20D,EAAU30D,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,IAAmBA,UAAU,GACzEu0D,EAAYnB,EAAW,GACvBwB,EAASxB,EAAW74D,MAAM,GAI9B,GAAyB,kBAAdg6D,EACTlB,GAAgB74C,EAAKw4C,GAAYuB,GAAY1nC,EAAMkqB,EAAQkL,EAAK0S,QAI3D,GAAIJ,EAAW,CACpB,IAAIhB,EAAKe,GAAmBvd,EAAQwd,GAGpC,IAAKhB,EAAGZ,UAEN,OADA1Q,EAAIp8C,KAAK0tD,GACFF,GAAgB74C,EAAKo6C,EAAQ/nC,EAAMkqB,EAAQkL,EAAK0S,GAGzDpB,EAAGZ,UAAU9yD,EAAO,GAAI2a,IAAM,SAAUuS,EAAK8nC,GAI3C,GAAI9nC,EACF,OAAOsmC,GAAgB74C,EAAKo6C,EAAQ/nC,EAAMkqB,EAAQkL,EAAK0S,GAIzD1S,EAAIp8C,KAAK0tD,GAITF,GAAgBwB,EAAMr6C,EAAI7T,OAASkuD,EAAKluD,KAAOiuD,EAAS5B,GAAY6B,EAAKluD,MAAOkmB,EAAMkqB,EAAQkL,EAAK0S,WAE5FC,EAAOn4D,OAChB42D,GAAgB74C,EAAKo6C,EAAQ/nC,EAAMkqB,EAAQkL,EAAK0S,GACvCA,EACT9nC,EAAKrS,EAAKynC,GAEVoR,GAAgB74C,EAAKw4C,GAAY,KAAMnmC,EAAMkqB,EAAQkL,GAAK,GAW9D,IAAI6S,GAAgB,CAClBC,KAAM,YACNC,IAAK,YACLC,IAAK,YACLC,IAAK,YACLC,IAAK,YACLC,IAAK,mBACLC,IAAK,aACLC,IAAK,YACLC,IAAK,YACLC,KAAM,yBAYJC,GAAc,WAChB,IAAIj7C,EAAMxa,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAE1E01D,EAAM5L,GAAiBtvC,GACvBm7C,EAAWb,GAAcY,EAAI5+B,eAEjC,OAAO6+B,GAAY,IAgBjBC,GAAe,SAAsB7e,EAAQv8B,GAC/C,IAAKA,EACH,MAAO,GAIT,GAAIu8B,EAAO8e,OAAO51D,OAAOua,MAAQA,GAAOu8B,EAAO8e,OAAO51D,OAAO0G,KAC3D,OAAOowC,EAAO8e,OAAO51D,OAAO0G,KAI9B,IAAImvD,EAAkB/e,EAAO8e,OAAOl+C,QAAQvb,QAAO,SAAU0c,GAC3D,OAAOA,EAAE0B,MAAQA,KAGnB,GAAIs7C,EAAgBr5D,OAClB,OAAOq5D,EAAgB,GAAGnvD,KAM5B,IAFA,IAAIgR,EAAUo/B,EAAOnE,GAAG,UAEf7yC,EAAI,EAAGA,EAAI4X,EAAQlb,OAAQsD,IAAK,CACvC,IAAI+Y,EAAInB,EAAQ5X,GAEhB,GAAI+Y,EAAEnS,MAAQmS,EAAE0B,KAAO1B,EAAE0B,MAAQA,EAC/B,OAAO1B,EAAEnS,KAKb,OAAO8uD,GAAYj7C,IAmBjBu7C,GAAe,SAASA,EAAav7C,GAEvC,GAAIgO,MAAMwE,QAAQxS,GAAM,CACtB,IAAIw7C,EAAS,GAEbx7C,EAAIlS,SAAQ,SAAU2tD,GACpBA,EAASF,EAAaE,GAElBztC,MAAMwE,QAAQipC,GAChBD,EAASA,EAAOxjC,OAAOyjC,GACd/qB,EAAS+qB,IAClBD,EAAOnwD,KAAKowD,MAIhBz7C,EAAMw7C,OAGNx7C,EAFwB,kBAARA,GAAoBA,EAAIqb,OAElC,CAACqgC,GAAU,CAAE17C,IAAKA,KACf0wB,EAAS1wB,IAA2B,kBAAZA,EAAIA,KAAoBA,EAAIA,KAAOA,EAAIA,IAAIqb,OAEtE,CAACqgC,GAAU17C,IAGX,GAGR,OAAOA,GAWT,SAAS07C,GAAU17C,GACjB,IAAIm7C,EAAWF,GAAYj7C,EAAIA,KAM/B,OAJKA,EAAI7T,MAAQgvD,IACfn7C,EAAI7T,KAAOgvD,GAGNn7C,EAaT,IAAI27C,GAAc,SAAUpT,GAe1B,SAASoT,EAAYpf,EAAQh7B,EAASs+B,GACpCzP,EAAertC,KAAM44D,GAGrB,IAAI7b,EAAWr5B,GAAa,CAAE8sB,UAAU,GAAShyB,GAK7C1Z,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQuD,EAAUD,IAEpF,GAAKt+B,EAAQygC,cAAc7kC,SAAoD,IAAzCoE,EAAQygC,cAAc7kC,QAAQlb,OAsBlEs6C,EAAOv8B,IAAIuB,EAAQygC,cAAc7kC,cArBjC,IAAK,IAAI5X,EAAI,EAAG4rB,EAAI5P,EAAQygC,cAAc4Z,UAAWr2D,EAAI4rB,EAAElvB,OAAQsD,IAAK,CACtE,IAAIs2D,EAAWtc,GAAYpuB,EAAE5rB,IACzBic,EAAO2gC,GAAK8U,QAAQ4E,GASxB,GALKA,IACHr6C,EAAOo+B,GAAU6B,aAAaoa,IAI5Br6C,GAAQA,EAAKs6C,cAAe,CAC9Bvf,EAAOwf,UAAUF,GACjB,OAUN,OAAOh0D,EAGT,OApDAwoC,EAASsrB,EAAapT,GAoDfoT,EArDS,CAsDhB/b,IAEFA,GAAU0F,kBAAkB,cAAeqW,IAY3C,IAAIK,GAAqB,SAAUzT,GAYjC,SAASyT,EAAmBzf,EAAQh7B,GAClC6uB,EAAertC,KAAMi5D,GAErB,IAAIn0D,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAK1E,OAHA1Z,EAAMi8C,gBAENj8C,EAAMgqC,SACChqC,EAoPT,OAvQAwoC,EAAS2rB,EAAoBzT,GAuC7ByT,EAAmBr2D,UAAU4tC,SAAW,WACtC,IAAIvqC,EAAMxD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,MAC1EQ,EAAQR,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC5EhF,EAAagF,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAErFQ,EAAQX,EAAO,CACb8pD,UAAW,gEACXrc,UAAW/vC,KAAKw/C,gBAChByG,SAAU,GACThjD,GAES,WAARgD,GACFopC,EAAMlqB,MAAM,yDAA2Dlf,EAAM,4CAI/ExI,EAAa6E,EAAO,CAClBwjD,KAAM,UACLroD,GAEHuC,KAAKk5D,UAAYj2D,EAAMgjD,SAEvB,IAAI3pD,EAAKkpD,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAMiG,EAAKhD,EAAOxF,GAI9D,OAFAuC,KAAKm5D,oBAAoB78D,GAElBA,GAGT28D,EAAmBr2D,UAAUkQ,QAAU,WAErC9S,KAAKo5D,eAAiB,KAEtB5T,EAAW5iD,UAAUkQ,QAAQhQ,KAAK9C,OAcpCi5D,EAAmBr2D,UAAUu2D,oBAAsB,SAA6B78D,GAc9E,OAbA0D,KAAKo5D,eAAiB5oB,GAAS,OAAQ,CACrCT,UAAW,oBACV,CAED,YAAa,WAGXzzC,GACFA,EAAG+0C,YAAYrxC,KAAKo5D,gBAGtBp5D,KAAKgnD,YAAYhnD,KAAKq5D,aAAc/8D,GAE7B0D,KAAKo5D,gBAiBdH,EAAmBr2D,UAAUokD,YAAc,SAAqBx7C,GAC9D,IAAIlP,EAAKmG,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAKzC,KAAK1D,KAElF,QAAaG,IAAT+O,EACF,OAAOxL,KAAKq5D,cAAgB,YAG9B,IAAIC,EAAgBt5D,KAAKw9C,SAAShyC,GAElCxL,KAAKq5D,aAAe7tD,EACpBqlC,GAAY7wC,KAAKo5D,eAAgBE,GAC5Bt5D,KAAKu5D,gBAERj9D,EAAGs0C,aAAa,QAAS0oB,IAY7BL,EAAmBr2D,UAAU48C,cAAgB,WAC3C,MAAO,0BAA4BgG,EAAW5iD,UAAU48C,cAAc18C,KAAK9C,OAQ7Ei5D,EAAmBr2D,UAAUksC,OAAS,WAC/B9uC,KAAKw5D,WACRx5D,KAAKw5D,UAAW,EAChBx5D,KAAK8xC,YAAY,gBACjB9xC,KAAKi9C,IAAIrM,aAAa,gBAAiB,SACT,qBAAnB5wC,KAAKk5D,WACdl5D,KAAKi9C,IAAIrM,aAAa,WAAY5wC,KAAKk5D,WAEzCl5D,KAAK6F,GAAG,CAAC,MAAO,SAAU7F,KAAKy5D,aAC/Bz5D,KAAK6F,GAAG,QAAS7F,KAAK05D,aACtB15D,KAAK6F,GAAG,OAAQ7F,KAAK25D,cASzBV,EAAmBr2D,UAAUisC,QAAU,WACrC7uC,KAAKw5D,UAAW,EAChBx5D,KAAK2xC,SAAS,gBACd3xC,KAAKi9C,IAAIrM,aAAa,gBAAiB,QACT,qBAAnB5wC,KAAKk5D,WACdl5D,KAAKi9C,IAAI3K,gBAAgB,YAE3BtyC,KAAKyf,IAAI,CAAC,MAAO,SAAUzf,KAAKy5D,aAChCz5D,KAAKyf,IAAI,QAASzf,KAAK05D,aACvB15D,KAAKyf,IAAI,OAAQzf,KAAK25D,aA2BxBV,EAAmBr2D,UAAU62D,YAAc,SAAqB/iD,KAchEuiD,EAAmBr2D,UAAU82D,YAAc,SAAqBhjD,GAC9D7Q,GAAGyT,EAAU,UAAWlY,GAAKpB,KAAMA,KAAKmmD,kBAc1C8S,EAAmBr2D,UAAUujD,eAAiB,SAAwBzvC,GAGhD,KAAhBA,EAAM+gC,OAAgC,KAAhB/gC,EAAM+gC,OAC9B/gC,EAAMigC,iBACN32C,KAAKmG,QAAQ,UACJq/C,EAAW5iD,UAAUujD,gBAG9BX,EAAW5iD,UAAUujD,eAAerjD,KAAK9C,KAAM0W,IAenDuiD,EAAmBr2D,UAAU+2D,WAAa,SAAoBjjD,GAC5D+I,GAAInG,EAAU,UAAWlY,GAAKpB,KAAMA,KAAKmmD,kBAGpC8S,EAxQgB,CAyQvBpc,IAEFA,GAAU0F,kBAAkB,qBAAsB0W,IAWlD,IAAIW,GAAc,SAAUC,GAY1B,SAASD,EAAYpgB,EAAQh7B,GAC3B6uB,EAAertC,KAAM45D,GAErB,IAAI90D,EAAQyoC,EAA0BvtC,KAAM65D,EAAoB/2D,KAAK9C,KAAMw5C,EAAQh7B,IAInF,OAFA1Z,EAAM0e,SACNg2B,EAAO3zC,GAAG,eAAgBzE,GAAK0D,EAAOA,EAAM0e,SACrC1e,EAmHT,OArIAwoC,EAASssB,EAAaC,GA0BtBD,EAAYh3D,UAAUkQ,QAAU,WAC9B9S,KAAKw5C,SAAS/5B,IAAI,eAAgBzf,KAAKwjB,QACvCq2C,EAAoBj3D,UAAUkQ,QAAQhQ,KAAK9C,OAW7C45D,EAAYh3D,UAAU4tC,SAAW,WAC/B,IAAIl0C,EAAKk0C,GAAS,MAAO,CACvBT,UAAW,aAGXkW,UAAW,IAYb,OALKhZ,IACHjtC,KAAK85D,aAAetpB,GAAS,OAC7Bl0C,EAAG+0C,YAAYrxC,KAAK85D,eAGfx9D,GAaTs9D,EAAYh3D,UAAU4gB,OAAS,SAAgB9M,GAC7C,IAAI3K,EAAM/L,KAAKw5C,SAASugB,SAExB/5D,KAAKg6D,OAAOjuD,GAIRA,EACF/L,KAAK8/C,OAEL9/C,KAAK+/C,QAYT6Z,EAAYh3D,UAAUo3D,OAAS,SAAgBjuD,GAC7C,GAAI/L,KAAK85D,aACP95D,KAAK85D,aAAa78C,IAAMlR,MACnB,CACL,IAAIkuD,EAAkB,GAIlBluD,IACFkuD,EAAkB,QAAUluD,EAAM,MAGpC/L,KAAKi9C,IAAI/P,MAAM+sB,gBAAkBA,IAiBrCL,EAAYh3D,UAAU62D,YAAc,SAAqB/iD,GAElD1W,KAAKorB,QAAQs7B,aAId1mD,KAAKorB,QAAQvL,SACf2kC,GAAexkD,KAAKorB,QAAQwd,QAE5B5oC,KAAKorB,QAAQ6b,UAIV2yB,EAtIS,CAuIhBX,IAEFpc,GAAU0F,kBAAkB,cAAeqX,IAK3C,IAAIM,GAAW,OACXC,GAAY,OACZC,GAAU,CACZC,UAAW,YACXC,UAAW,aACXC,MAAO,QACPC,mBAAoB,6CACpBC,eAAgB,2BAChBC,sBAAuB,aACvBC,kBAAmB,QACnBC,OAAQ,mCACRjI,OAAQ,8BACRkI,UAAW,0DAeb,SAASC,GAAeC,EAAOljD,GAC7B,IAAIgoB,OAAM,EAEV,GAAqB,IAAjBk7B,EAAM77D,OAER2gC,EAAMk7B,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKA,EAAM,GAAKA,EAAM,OAC9D,IAAqB,IAAjBA,EAAM77D,OAIf,MAAM,IAAIqB,MAAM,gCAAkCw6D,EAAQ,gDAF1Dl7B,EAAMk7B,EAAM/9D,MAAM,GAIpB,MAAO,QAAUkD,SAAS2/B,EAAI7iC,MAAM,EAAG,GAAI,IAAM,IAAMkD,SAAS2/B,EAAI7iC,MAAM,EAAG,GAAI,IAAM,IAAMkD,SAAS2/B,EAAI7iC,MAAM,EAAG,GAAI,IAAM,IAAM6a,EAAU,IAkB/I,SAASmjD,GAAe1+D,EAAI4wC,EAAOwT,GACjC,IACEpkD,EAAG4wC,MAAMA,GAASwT,EAClB,MAAOrpC,GAGP,QAUJ,IAAI4jD,GAAmB,SAAUzV,GAe/B,SAASyV,EAAiBzhB,EAAQh7B,EAASs+B,GACzCzP,EAAertC,KAAMi7D,GAErB,IAAIn2D,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,EAASs+B,IA0BnF,OAxBAtD,EAAO3zC,GAAG,YAAazE,GAAK0D,EAAOA,EAAMo2D,gBACzC1hB,EAAO3zC,GAAG,kBAAmBzE,GAAK0D,EAAOA,EAAMmuD,gBAC/CzZ,EAAO3zC,GAAG,YAAazE,GAAK0D,EAAOA,EAAMq2D,iBAMzC3hB,EAAOsD,MAAM17C,GAAK0D,GAAO,WACvB,GAAI00C,EAAOr5C,OAASq5C,EAAOr5C,MAAM4wD,yBAC/B/wD,KAAK+/C,WADP,CAKAvG,EAAO3zC,GAAG,mBAAoBzE,GAAKpB,KAAMA,KAAKizD,gBAI9C,IAFA,IAAInO,EAAS9kD,KAAK+8C,SAASkC,cAAc6F,QAAU,GAE1CtiD,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IACjCxC,KAAKorB,QAAQsZ,mBAAmBogB,EAAOtiD,IAAI,GAG7CxC,KAAKm7D,sBAEAr2D,EAgPT,OA3RAwoC,EAAS2tB,EAAkBzV,GAyD3ByV,EAAiBr4D,UAAUu4D,eAAiB,WAQ1C,IAPA,IAAIC,EAAQ,CAAE/uC,SAAU,EAAG8+B,UAAW,GAClCkQ,EAAYr7D,KAAKorB,QAAQ65B,aACzBqW,EAAWt7D,KAAKorB,QAAQktC,OAAOiD,iBAC/BC,OAAY,EACZC,OAAgB,EAChBC,OAAiB,EAEZl5D,EAAI,EAAGA,EAAI64D,EAAUn8D,OAAQsD,IAAK,CACzC,IAAIyI,EAAQowD,EAAU74D,GAElB84D,GAAYA,EAAS/R,SAAW+R,EAASvzD,WAAakD,EAAMlD,SAE1DkD,EAAM05B,OAAS22B,EAAS32B,KAC1B+2B,EAAiBzwD,EAEPywD,IACVA,EAAiBzwD,GAIVqwD,IAAaA,EAAS/R,SAC/BmS,EAAiB,KACjBF,EAAY,KACZC,EAAgB,MACPxwD,EAAM,aACI,iBAAfA,EAAM05B,MAA4B62B,EAE3BvwD,EAAM05B,QAAQy2B,IAAUK,IACjCA,EAAgBxwD,GAFhBuwD,EAAYvwD,GAWdywD,EACFA,EAAep4B,KAAO,UACbm4B,EACTA,EAAcn4B,KAAO,UACZk4B,IACTA,EAAUl4B,KAAO,YAcrB23B,EAAiBr4D,UAAUs4D,cAAgB,WACrCl7D,KAAKorB,QAAQjrB,OAASH,KAAKorB,QAAQjrB,MAAM4wD,yBAC3C/wD,KAAK+/C,OAEL//C,KAAK8/C,QAYTmb,EAAiBr4D,UAAU4tC,SAAW,WACpC,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,0BACV,CACD,YAAa,MACb,cAAe,UASnBkrB,EAAiBr4D,UAAU+4D,aAAe,WACX,oBAAlBj/D,EAAOwwD,QAChBxwD,EAAOwwD,OAAO0O,YAAYl/D,EAAQ,GAAIsD,KAAKi9C,MAa/Cge,EAAiBr4D,UAAUqwD,cAAgB,WACzC,IAAInO,EAAS9kD,KAAKorB,QAAQ65B,aAE1BjlD,KAAK27D,eAML,IAAIE,EAAoB,KACpBC,EAAyB,KACzBt5D,EAAIsiD,EAAO5lD,OAEf,MAAOsD,IAAK,CACV,IAAIyI,EAAQ65C,EAAOtiD,GAEA,YAAfyI,EAAMq4B,OACW,iBAAfr4B,EAAM05B,KACRk3B,EAAoB5wD,EAEpB6wD,EAAyB7wD,GAK3B6wD,GACqC,QAAnC97D,KAAK0yC,aAAa,cACpB1yC,KAAK4wC,aAAa,YAAa,OAEjC5wC,KAAK+7D,eAAeD,IACXD,IAC8B,cAAnC77D,KAAK0yC,aAAa,cACpB1yC,KAAK4wC,aAAa,YAAa,aAEjC5wC,KAAK+7D,eAAeF,KAYxBZ,EAAiBr4D,UAAUm5D,eAAiB,SAAwB9wD,GAClE,GAA6B,oBAAlBvO,EAAOwwD,QAA0BjiD,EAAMujD,WAAlD,CAMA,IAFA,IAAIviD,EAAO,GAEFkjB,EAAK,EAAGA,EAAKlkB,EAAMujD,WAAWtvD,OAAQiwB,IAC7CljB,EAAK3D,KAAK2C,EAAMujD,WAAWr/B,IAK7B,GAFAzyB,EAAOwwD,OAAO0O,YAAYl/D,EAAQuP,EAAMjM,KAAKi9C,KAExCj9C,KAAKorB,QAAQ4wC,kBAAlB,CAIA,IAAIC,EAAYj8D,KAAKorB,QAAQ4wC,kBAAkBE,YAE3C15D,EAAIyJ,EAAK/M,OAEb,MAAOsD,IAAK,CACV,IAAImH,EAAMsC,EAAKzJ,GAEf,GAAKmH,EAAL,CAIA,IAAIwyD,EAASxyD,EAAIyyD,aAgCjB,GA9BIH,EAAUlB,QACZoB,EAAOhrB,WAAWjE,MAAM6tB,MAAQkB,EAAUlB,OAExCkB,EAAUI,aACZrB,GAAemB,EAAOhrB,WAAY,QAAS2pB,GAAemB,EAAUlB,OAAS,OAAQkB,EAAUI,cAE7FJ,EAAUK,kBACZH,EAAOhrB,WAAWjE,MAAMovB,gBAAkBL,EAAUK,iBAElDL,EAAUM,mBACZvB,GAAemB,EAAOhrB,WAAY,kBAAmB2pB,GAAemB,EAAUK,iBAAmB,OAAQL,EAAUM,oBAEjHN,EAAUO,cACRP,EAAUQ,cACZzB,GAAemB,EAAQ,kBAAmBrB,GAAemB,EAAUO,YAAaP,EAAUQ,gBAE1FN,EAAOjvB,MAAMovB,gBAAkBL,EAAUO,aAGzCP,EAAUS,YACgB,eAAxBT,EAAUS,UACZP,EAAOhrB,WAAWjE,MAAMyvB,WAAa,eAAiBzC,GAAW,iBAAmBA,GAAW,iBAAmBA,GACjF,WAAxB+B,EAAUS,UACnBP,EAAOhrB,WAAWjE,MAAMyvB,WAAa,WAAazC,GAAW,aAAeA,GAAW,aAAeA,GACrE,cAAxB+B,EAAUS,UACnBP,EAAOhrB,WAAWjE,MAAMyvB,WAAa,WAAaxC,GAAY,WAAaA,GAAY,eAAiBD,GAAW,YAAcA,GAChG,YAAxB+B,EAAUS,YACnBP,EAAOhrB,WAAWjE,MAAMyvB,WAAa,WAAazC,GAAW,aAAeA,GAAW,aAAeA,GAAW,aAAeA,KAGhI+B,EAAUW,aAAyC,IAA1BX,EAAUW,YAAmB,CACxD,IAAIC,EAAWngE,EAAOqzB,WAAWosC,EAAOjvB,MAAM2vB,UAE9CV,EAAOjvB,MAAM2vB,SAAWA,EAAWZ,EAAUW,YAAc,KAC3DT,EAAOjvB,MAAMvuC,OAAS,OACtBw9D,EAAOjvB,MAAMoG,IAAM,OACnB6oB,EAAOjvB,MAAM4vB,OAAS,MAEpBb,EAAUc,YAAuC,YAAzBd,EAAUc,aACP,eAAzBd,EAAUc,WACZZ,EAAOhrB,WAAWjE,MAAM8vB,YAAc,aAEtCb,EAAOhrB,WAAWjE,MAAM6vB,WAAa3C,GAAQ6B,EAAUc,kBAMxD9B,EA5Rc,CA6RrBpe,IAEFA,GAAU0F,kBAAkB,mBAAoB0Y,IAWhD,IAAIgC,GAAiB,SAAUzX,GAG7B,SAASyX,IAEP,OADA5vB,EAAertC,KAAMi9D,GACd1vB,EAA0BvtC,KAAMwlD,EAAWx6B,MAAMhrB,KAAMyC,YA2BhE,OA/BA6qC,EAAS2vB,EAAgBzX,GAazByX,EAAer6D,UAAU4tC,SAAW,WAClC,IAAI0sB,EAAUl9D,KAAKorB,QAAQ8xC,UACvBC,EAAan9D,KAAKw9C,SAAS0f,EAAU,eAAiB,gBACtDlW,EAAcxW,GAAS,OAAQ,CACjCT,UAAW,mBACXqc,UAAWpsD,KAAKw9C,SAAS,kBAAmB,CAAC2f,MAG3C7gE,EAAKkpD,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACvD+vC,UAAW,sBACXqtB,IAAK,QAKP,OAFA9gE,EAAG+0C,YAAY2V,GAER1qD,GAGF2gE,EAhCY,CAiCnBpgB,IAEFA,GAAU0F,kBAAkB,iBAAkB0a,IAW9C,IAAII,GAAS,SAAUxD,GAGrB,SAASwD,IAEP,OADAhwB,EAAertC,KAAMq9D,GACd9vB,EAA0BvtC,KAAM65D,EAAoB7uC,MAAMhrB,KAAMyC,YAqHzE,OAzHA6qC,EAAS+vB,EAAQxD,GAuBjBwD,EAAOz6D,UAAU4tC,SAAW,SAAkBvqC,GAC5C,IAAIhD,EAAQR,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC5EhF,EAAagF,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAErFwD,EAAM,SAENhD,EAAQX,EAAO,CACb8pD,UAAW,gEACXrc,UAAW/vC,KAAKw/C,iBACfv8C,GAGHxF,EAAa6E,EAAO,CAGlB8G,KAAM,UACL3L,GAEH,IAAInB,EAAKugD,GAAUj6C,UAAU4tC,SAAS1tC,KAAK9C,KAAMiG,EAAKhD,EAAOxF,GAI7D,OAFAuC,KAAKm5D,oBAAoB78D,GAElBA,GAqBT+gE,EAAOz6D,UAAUy7C,SAAW,SAAkBnN,GAC5C,IAAI1yB,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAE9EstC,EAAY/vC,KAAKyE,YAAYqJ,KAKjC,OAHAuhC,EAAMrlC,KAAK,+DAAiE+lC,EAAY,yDAGjF8M,GAAUj6C,UAAUy7C,SAASv7C,KAAK9C,KAAMkxC,EAAO1yB,IASxD6+C,EAAOz6D,UAAUksC,OAAS,WACxB+qB,EAAoBj3D,UAAUksC,OAAOhsC,KAAK9C,MAC1CA,KAAKi9C,IAAI3K,gBAAgB,aAS3B+qB,EAAOz6D,UAAUisC,QAAU,WACzBgrB,EAAoBj3D,UAAUisC,QAAQ/rC,KAAK9C,MAC3CA,KAAKi9C,IAAIrM,aAAa,WAAY,aAcpCysB,EAAOz6D,UAAUujD,eAAiB,SAAwBzvC,GAGpC,KAAhBA,EAAM+gC,OAAgC,KAAhB/gC,EAAM+gC,OAKhCoiB,EAAoBj3D,UAAUujD,eAAerjD,KAAK9C,KAAM0W,IAGnD2mD,EA1HI,CA2HXpE,IAEFpc,GAAU0F,kBAAkB,SAAU8a,IAYtC,IAAIC,GAAgB,SAAUC,GAG5B,SAASD,EAAc9jB,EAAQh7B,GAC7B6uB,EAAertC,KAAMs9D,GAErB,IAAIx4D,EAAQyoC,EAA0BvtC,KAAMu9D,EAAQz6D,KAAK9C,KAAMw5C,EAAQh7B,IAKvE,OAHA1Z,EAAM04D,YAAa,EAEnB14D,EAAMe,GAAG,YAAaf,EAAM24D,iBACrB34D,EAkET,OA5EAwoC,EAASgwB,EAAeC,GAqBxBD,EAAc16D,UAAU48C,cAAgB,WACtC,MAAO,uBAgBT8d,EAAc16D,UAAU62D,YAAc,SAAqB/iD,GACzD,IAAIiyB,EAAc3oC,KAAKorB,QAAQwd,OAG/B,GAAI5oC,KAAKw9D,YAAc9mD,EAAM4gC,SAAW5gC,EAAM8gC,QAC5CgN,GAAe7b,OADjB,CAKA,IAAI+0B,EAAK19D,KAAKorB,QAAQgzB,SAAS,cAC3Buf,EAAaD,GAAMA,EAAGtf,SAAS,cAEnC,GAAKuf,EAAL,CAKA,IAAIC,EAAY,WACd,OAAOD,EAAW7qB,SAGhByR,GAAU5b,GACZA,EAAY5yB,KAAK6nD,GAAW,eAE5B59D,KAAK2f,WAAWi+C,EAAW,QAX3B59D,KAAKorB,QAAQ0nB,UAejBwqB,EAAc16D,UAAUujD,eAAiB,SAAwBzvC,GAC/D1W,KAAKw9D,YAAa,EAElBD,EAAQ36D,UAAUujD,eAAerjD,KAAK9C,KAAM0W,IAG9C4mD,EAAc16D,UAAU66D,gBAAkB,SAAyB/mD,GACjE1W,KAAKw9D,YAAa,GAGbF,EA7EW,CA8ElBD,IAUFC,GAAc16D,UAAUy2D,aAAe,aAEvCxc,GAAU0F,kBAAkB,gBAAiB+a,IAY7C,IAAIO,GAAc,SAAUN,GAY1B,SAASM,EAAYrkB,EAAQh7B,GAC3B6uB,EAAertC,KAAM69D,GAErB,IAAI/4D,EAAQyoC,EAA0BvtC,KAAMu9D,EAAQz6D,KAAK9C,KAAMw5C,EAAQh7B,IAGvE,OADA1Z,EAAMkiD,YAAYxoC,GAAWA,EAAQwoC,aAAeliD,EAAM04C,SAAS,UAC5D14C,EA6CT,OA9DAwoC,EAASuwB,EAAaN,GA4BtBM,EAAYj7D,UAAU48C,cAAgB,WACpC,MAAO,oBAAsB+d,EAAQ36D,UAAU48C,cAAc18C,KAAK9C,OAkBpE69D,EAAYj7D,UAAU62D,YAAc,SAAqB/iD,GAYvD1W,KAAKmG,QAAQ,CAAEiD,KAAM,QAAS89B,SAAS,KAGlC22B,EA/DS,CAgEhBR,IAEFxgB,GAAU0F,kBAAkB,cAAesb,IAW3C,IAAIC,GAAa,SAAUP,GAYzB,SAASO,EAAWtkB,EAAQh7B,GAC1B6uB,EAAertC,KAAM89D,GAErB,IAAIh5D,EAAQyoC,EAA0BvtC,KAAMu9D,EAAQz6D,KAAK9C,KAAMw5C,EAAQh7B,IAKvE,OAHA1Z,EAAMe,GAAG2zC,EAAQ,OAAQ10C,EAAMi5D,YAC/Bj5D,EAAMe,GAAG2zC,EAAQ,QAAS10C,EAAMk5D,aAChCl5D,EAAMe,GAAG2zC,EAAQ,QAAS10C,EAAMm5D,aACzBn5D,EAgHT,OAnIAwoC,EAASwwB,EAAYP,GA8BrBO,EAAWl7D,UAAU48C,cAAgB,WACnC,MAAO,oBAAsB+d,EAAQ36D,UAAU48C,cAAc18C,KAAK9C,OAgBpE89D,EAAWl7D,UAAU62D,YAAc,SAAqB/iD,GAClD1W,KAAKorB,QAAQvL,SACf7f,KAAKorB,QAAQwd,OAEb5oC,KAAKorB,QAAQ6b,SAejB62B,EAAWl7D,UAAUs7D,aAAe,SAAsBxnD,GACxD1W,KAAK8xC,YAAY,aAEb9xC,KAAKorB,QAAQvL,SACf7f,KAAKg+D,YAAYtnD,GAEjB1W,KAAK+9D,WAAWrnD,IAcpBonD,EAAWl7D,UAAUm7D,WAAa,SAAoBrnD,GACpD1W,KAAK8xC,YAAY,aACjB9xC,KAAK8xC,YAAY,cACjB9xC,KAAK2xC,SAAS,eAEd3xC,KAAKgnD,YAAY,UAanB8W,EAAWl7D,UAAUo7D,YAAc,SAAqBtnD,GACtD1W,KAAK8xC,YAAY,eACjB9xC,KAAK2xC,SAAS,cAEd3xC,KAAKgnD,YAAY,SAanB8W,EAAWl7D,UAAUq7D,YAAc,SAAqBvnD,GACtD1W,KAAK8xC,YAAY,eACjB9xC,KAAK2xC,SAAS,aAEd3xC,KAAKgnD,YAAY,UAGjBhnD,KAAK2rB,IAAI3rB,KAAKorB,QAAS,SAAUprB,KAAKk+D,eAGjCJ,EApIQ,CAqIfT,IAUFS,GAAWl7D,UAAUy2D,aAAe,OAEpCxc,GAAU0F,kBAAkB,aAAcub,IAoB1C,IAAIK,GAAwB,SAA+BrsD,EAASssD,GAClEtsD,EAAUA,EAAU,EAAI,EAAIA,EAC5B,IAAIyJ,EAAIlR,KAAK6F,MAAM4B,EAAU,IACzBiJ,EAAI1Q,KAAK6F,MAAM4B,EAAU,GAAK,IAC9BusD,EAAIh0D,KAAK6F,MAAM4B,EAAU,MACzBwsD,EAAKj0D,KAAK6F,MAAMkuD,EAAQ,GAAK,IAC7BG,EAAKl0D,KAAK6F,MAAMkuD,EAAQ,MAmB5B,OAhBIh0D,MAAM0H,IAAYA,IAAYvH,OAGhC8zD,EAAItjD,EAAIQ,EAAI,KAId8iD,EAAIA,EAAI,GAAKE,EAAK,EAAIF,EAAI,IAAM,GAIhCtjD,IAAMsjD,GAAKC,GAAM,KAAOvjD,EAAI,GAAK,IAAMA,EAAIA,GAAK,IAGhDQ,EAAIA,EAAI,GAAK,IAAMA,EAAIA,EAEhB8iD,EAAItjD,EAAIQ,GAGbijD,GAAiBL,GASrB,SAASM,GAAcC,GACrBF,GAAiBE,EAMnB,SAASC,KACPH,GAAiBL,GAGnB,IAAIS,GAAa,SAAU9sD,GACzB,IAAIssD,EAAQ37D,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAKqP,EAEhF,OAAO0sD,GAAe1sD,EAASssD,IAY7BS,GAAc,SAAUrZ,GAY1B,SAASqZ,EAAYrlB,EAAQh7B,GAC3B6uB,EAAertC,KAAM6+D,GAErB,IAAI/5D,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAI1E,OAFA1Z,EAAMg6D,uBAAyB7kB,GAAS74C,GAAK0D,EAAOA,EAAMi6D,eAAgB,IAC1Ej6D,EAAMe,GAAG2zC,EAAQ,aAAc10C,EAAMg6D,wBAC9Bh6D,EA8GT,OAhIAwoC,EAASuxB,EAAarZ,GA6BtBqZ,EAAYj8D,UAAU4tC,SAAW,SAAqBwuB,GACpD,IAAIjvB,EAAY/vC,KAAKw/C,gBACjBljD,EAAKkpD,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACvD+vC,UAAWA,EAAY,gCACvBqc,UAAW,kCAAoCpsD,KAAKw9C,SAASx9C,KAAKi/D,YAAc,aAYlF,OATAj/D,KAAKi+C,WAAazN,GAAS,OAAQ,CACjCT,UAAWA,EAAY,YACtB,CAED,YAAa,QAGf/vC,KAAKk/D,kBACL5iE,EAAG+0C,YAAYrxC,KAAKi+C,YACb3hD,GAGTuiE,EAAYj8D,UAAUkQ,QAAU,WAC9B9S,KAAKi+C,WAAa,KAClBj+C,KAAKm/D,UAAY,KAEjB3Z,EAAW5iD,UAAUkQ,QAAQhQ,KAAK9C,OAWpC6+D,EAAYj8D,UAAUs8D,gBAAkB,WACtC,GAAKl/D,KAAKi+C,WAAV,CAIA,MAAOj+C,KAAKi+C,WAAW9M,WACrBnxC,KAAKi+C,WAAWrJ,YAAY50C,KAAKi+C,WAAW9M,YAG9CnxC,KAAKm/D,UAAY7lD,EAASw7B,eAAe90C,KAAKo/D,gBAAkBp/D,KAAKq/D,YAAY,IACjFr/D,KAAKi+C,WAAW5M,YAAYrxC,KAAKm/D,aAgBnCN,EAAYj8D,UAAUy8D,YAAc,SAAqBzzD,GACvD,OAAOgzD,GAAWhzD,IAcpBizD,EAAYj8D,UAAU08D,qBAAuB,SAA8B1zD,GACzE,IAAI2zD,EAAgBv/D,KAAKq/D,YAAYzzD,GAEjC2zD,IAAkBv/D,KAAKo/D,iBAI3Bp/D,KAAKo/D,eAAiBG,EACtBv/D,KAAKoiD,sBAAsBpiD,KAAKk/D,mBAclCL,EAAYj8D,UAAUm8D,cAAgB,SAAuBroD,KAEtDmoD,EAjIS,CAkIhBhiB,IAUFgiB,GAAYj8D,UAAUq8D,WAAa,OAUnCJ,GAAYj8D,UAAUy2D,aAAe,OAErCxc,GAAU0F,kBAAkB,cAAesc,IAW3C,IAAIW,GAAqB,SAAUC,GAYjC,SAASD,EAAmBhmB,EAAQh7B,GAClC6uB,EAAertC,KAAMw/D,GAErB,IAAI16D,EAAQyoC,EAA0BvtC,KAAMy/D,EAAa38D,KAAK9C,KAAMw5C,EAAQh7B,IAG5E,OADA1Z,EAAMe,GAAG2zC,EAAQ,QAAS10C,EAAMm5D,aACzBn5D,EAmDT,OApEAwoC,EAASkyB,EAAoBC,GA4B7BD,EAAmB58D,UAAU48C,cAAgB,WAC3C,MAAO,oBAaTggB,EAAmB58D,UAAUm8D,cAAgB,SAAuBroD,GAElE,IAAI9K,EAAO5L,KAAKorB,QAAQs0C,YAAc1/D,KAAKorB,QAAQu0C,WAAWj/D,YAAcV,KAAKorB,QAAQ1qB,cAEzFV,KAAKs/D,qBAAqB1zD,IAe5B4zD,EAAmB58D,UAAUq7D,YAAc,SAAqBvnD,GACzD1W,KAAKorB,QAAQzqB,YAGlBX,KAAKs/D,qBAAqBt/D,KAAKorB,QAAQzqB,aAGlC6+D,EArEgB,CAsEvBX,IAUFW,GAAmB58D,UAAUq8D,WAAa,eAU1CO,GAAmB58D,UAAUy2D,aAAe,eAE5Cxc,GAAU0F,kBAAkB,qBAAsBid,IAWlD,IAAII,GAAkB,SAAUH,GAY9B,SAASG,EAAgBpmB,EAAQh7B,GAC/B6uB,EAAertC,KAAM4/D,GAKrB,IAAI96D,EAAQyoC,EAA0BvtC,KAAMy/D,EAAa38D,KAAK9C,KAAMw5C,EAAQh7B,IAQ5E,OANA1Z,EAAMe,GAAG2zC,EAAQ,iBAAkB10C,EAAMi6D,eAKzCj6D,EAAMe,GAAG2zC,EAAQ,iBAAkB10C,EAAMg6D,wBAClCh6D,EAqCT,OA9DAwoC,EAASsyB,EAAiBH,GAoC1BG,EAAgBh9D,UAAU48C,cAAgB,WACxC,MAAO,gBAgBTogB,EAAgBh9D,UAAUm8D,cAAgB,SAAuBroD,GAC/D,IAAI/V,EAAWX,KAAKorB,QAAQzqB,WAExBA,GAAYX,KAAK6xD,YAAclxD,IACjCX,KAAK6xD,UAAYlxD,EACjBX,KAAKs/D,qBAAqB3+D,KAIvBi/D,EA/Da,CAgEpBf,IAUFe,GAAgBh9D,UAAUq8D,WAAa,WAUvCW,GAAgBh9D,UAAUy2D,aAAe,WAEzCxc,GAAU0F,kBAAkB,kBAAmBqd,IAY/C,IAAIC,GAAc,SAAUra,GAG1B,SAASqa,IAEP,OADAxyB,EAAertC,KAAM6/D,GACdtyB,EAA0BvtC,KAAMwlD,EAAWx6B,MAAMhrB,KAAMyC,YAgBhE,OApBA6qC,EAASuyB,EAAara,GAatBqa,EAAYj9D,UAAU4tC,SAAW,WAC/B,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,oCACXqc,UAAW,+BAIRyT,EArBS,CAsBhBhjB,IAEFA,GAAU0F,kBAAkB,cAAesd,IAW3C,IAAIC,GAAuB,SAAUL,GAYnC,SAASK,EAAqBtmB,EAAQh7B,GACpC6uB,EAAertC,KAAM8/D,GAErB,IAAIh7D,EAAQyoC,EAA0BvtC,KAAMy/D,EAAa38D,KAAK9C,KAAMw5C,EAAQh7B,IAI5E,OAFA1Z,EAAMe,GAAG2zC,EAAQ,iBAAkB10C,EAAMg6D,wBACzCh6D,EAAMe,GAAG2zC,EAAQ,QAAS10C,EAAMm5D,aACzBn5D,EA6ET,OA/FAwoC,EAASwyB,EAAsBL,GA6B/BK,EAAqBl9D,UAAU48C,cAAgB,WAC7C,MAAO,sBAgBTsgB,EAAqBl9D,UAAUy8D,YAAc,SAAqBzzD,GAEhE,MAAO,IAAM6zD,EAAa78D,UAAUy8D,YAAYv8D,KAAK9C,KAAM4L,IAc7Dk0D,EAAqBl9D,UAAUm8D,cAAgB,SAAuBroD,GAC/D1W,KAAKorB,QAAQzqB,aAMdX,KAAKorB,QAAQ20C,qBACf//D,KAAKs/D,qBAAqBt/D,KAAKorB,QAAQ20C,wBAEvC//D,KAAKs/D,qBAAqBt/D,KAAKorB,QAAQ40C,mBAgB3CF,EAAqBl9D,UAAUq7D,YAAc,SAAqBvnD,GAC3D1W,KAAKorB,QAAQzqB,YAGlBX,KAAKs/D,qBAAqB,IAGrBQ,EAhGkB,CAiGzBjB,IAUFiB,GAAqBl9D,UAAUq8D,WAAa,iBAU5Ca,GAAqBl9D,UAAUy2D,aAAe,iBAE9Cxc,GAAU0F,kBAAkB,uBAAwBud,IAapD,IAAIG,GAAc,SAAUza,GAY1B,SAASya,EAAYzmB,EAAQh7B,GAC3B6uB,EAAertC,KAAMigE,GAErB,IAAIn7D,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAI1E,OAFA1Z,EAAMo7D,gBACNp7D,EAAMe,GAAGf,EAAM00C,SAAU,iBAAkB10C,EAAMo7D,eAC1Cp7D,EAoDT,OAtEAwoC,EAAS2yB,EAAaza,GA6BtBya,EAAYr9D,UAAU4tC,SAAW,WAC/B,IAAIl0C,EAAKkpD,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACvD+vC,UAAW,iCAWb,OARA/vC,KAAKi+C,WAAazN,GAAS,MAAO,CAChCT,UAAW,mBACXqc,UAAW,kCAAoCpsD,KAAKw9C,SAAS,eAAiB,WAAgBx9C,KAAKw9C,SAAS,SAC3G,CACD,YAAa,QAGflhD,EAAG+0C,YAAYrxC,KAAKi+C,YACb3hD,GAGT2jE,EAAYr9D,UAAUkQ,QAAU,WAC9B9S,KAAKi+C,WAAa,KAElBuH,EAAW5iD,UAAUkQ,QAAQhQ,KAAK9C,OAcpCigE,EAAYr9D,UAAUs9D,cAAgB,SAAuBxpD,GACvD1W,KAAKw5C,SAAS74C,aAAe4J,IAC/BvK,KAAK8/C,OAEL9/C,KAAK+/C,QAIFkgB,EAvES,CAwEhBpjB,IAEFA,GAAU0F,kBAAkB,cAAe0d,IAY3C,IAAIE,GAAS,SAAU3a,GAYrB,SAAS2a,EAAO3mB,EAAQh7B,GACtB6uB,EAAertC,KAAMmgE,GAGrB,IAAIr7D,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAQ1E,OANA1Z,EAAMs7D,IAAMt7D,EAAMs5C,SAASt5C,EAAMi4C,SAASsjB,SAG1Cv7D,EAAMw7D,WAAWx7D,EAAMi4C,SAASujB,UAEhCx7D,EAAMgqC,SACChqC,EAmXT,OA1YAwoC,EAAS6yB,EAAQ3a,GAkCjB2a,EAAOv9D,UAAU2mD,QAAU,WACzB,OAAOvpD,KAAKw5D,UAQd2G,EAAOv9D,UAAUksC,OAAS,WACpB9uC,KAAKupD,YAITvpD,KAAK6F,GAAG,YAAa7F,KAAKy9D,iBAC1Bz9D,KAAK6F,GAAG,aAAc7F,KAAKy9D,iBAC3Bz9D,KAAK6F,GAAG,QAAS7F,KAAK05D,aACtB15D,KAAK6F,GAAG,OAAQ7F,KAAK25D,YACrB35D,KAAK6F,GAAG,QAAS7F,KAAKy5D,aAEtBz5D,KAAK6F,GAAG7F,KAAKorB,QAAS,kBAAmBprB,KAAKwjB,QAE1CxjB,KAAKugE,aACPvgE,KAAK6F,GAAG7F,KAAKorB,QAASprB,KAAKugE,YAAavgE,KAAKwjB,QAG/CxjB,KAAK8xC,YAAY,YACjB9xC,KAAK4wC,aAAa,WAAY,GAE9B5wC,KAAKw5D,UAAW,IAQlB2G,EAAOv9D,UAAUisC,QAAU,WACzB,GAAK7uC,KAAKupD,UAAV,CAGA,IAAIhS,EAAMv3C,KAAKogE,IAAInjB,IAAI1E,cAEvBv4C,KAAKyf,IAAI,YAAazf,KAAKy9D,iBAC3Bz9D,KAAKyf,IAAI,aAAczf,KAAKy9D,iBAC5Bz9D,KAAKyf,IAAI,QAASzf,KAAK05D,aACvB15D,KAAKyf,IAAI,OAAQzf,KAAK25D,YACtB35D,KAAKyf,IAAI,QAASzf,KAAKy5D,aACvBz5D,KAAKyf,IAAIzf,KAAKorB,QAAS,kBAAmBprB,KAAKwjB,QAC/CxjB,KAAKyf,IAAI83B,EAAK,YAAav3C,KAAKwgE,iBAChCxgE,KAAKyf,IAAI83B,EAAK,UAAWv3C,KAAKygE,eAC9BzgE,KAAKyf,IAAI83B,EAAK,YAAav3C,KAAKwgE,iBAChCxgE,KAAKyf,IAAI83B,EAAK,WAAYv3C,KAAKygE,eAC/BzgE,KAAKsyC,gBAAgB,YAErBtyC,KAAK2xC,SAAS,YAEV3xC,KAAKugE,aACPvgE,KAAKyf,IAAIzf,KAAKorB,QAASprB,KAAKugE,YAAavgE,KAAKwjB,QAEhDxjB,KAAKw5D,UAAW,IAoBlB2G,EAAOv9D,UAAU4tC,SAAW,SAAqBpnC,GAC/C,IAAInG,EAAQR,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC5EhF,EAAagF,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAgBrF,OAbAQ,EAAM8sC,UAAY9sC,EAAM8sC,UAAY,cACpC9sC,EAAQX,EAAO,CACb2jD,SAAU,GACThjD,GAEHxF,EAAa6E,EAAO,CAClB,KAAQ,SACR,gBAAiB,EACjB,gBAAiB,EACjB,gBAAiB,IACjB,SAAY,GACX7E,GAEI+nD,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAMoJ,EAAMnG,EAAOxF,IAe/D0iE,EAAOv9D,UAAU66D,gBAAkB,SAAyB/mD,GAC1D,IAAI6gC,EAAMv3C,KAAKogE,IAAInjB,IAAI1E,cAEJ,cAAf7hC,EAAMtN,MACRsN,EAAMigC,iBAMW,eAAfjgC,EAAMtN,MAA0BojC,GAClC91B,EAAMigC,iBAER/D,KAEA5yC,KAAK2xC,SAAS,eAOd3xC,KAAKmG,QAAQ,gBAEbnG,KAAK6F,GAAG0xC,EAAK,YAAav3C,KAAKwgE,iBAC/BxgE,KAAK6F,GAAG0xC,EAAK,UAAWv3C,KAAKygE,eAC7BzgE,KAAK6F,GAAG0xC,EAAK,YAAav3C,KAAKwgE,iBAC/BxgE,KAAK6F,GAAG0xC,EAAK,WAAYv3C,KAAKygE,eAE9BzgE,KAAKwgE,gBAAgB9pD,IAkBvBypD,EAAOv9D,UAAU49D,gBAAkB,SAAyB9pD,KAc5DypD,EAAOv9D,UAAU69D,cAAgB,WAC/B,IAAIlpB,EAAMv3C,KAAKogE,IAAInjB,IAAI1E,cAEvBvF,KAEAhzC,KAAK8xC,YAAY,eAOjB9xC,KAAKmG,QAAQ,kBAEbnG,KAAKyf,IAAI83B,EAAK,YAAav3C,KAAKwgE,iBAChCxgE,KAAKyf,IAAI83B,EAAK,UAAWv3C,KAAKygE,eAC9BzgE,KAAKyf,IAAI83B,EAAK,YAAav3C,KAAKwgE,iBAChCxgE,KAAKyf,IAAI83B,EAAK,WAAYv3C,KAAKygE,eAE/BzgE,KAAKwjB,UAYP28C,EAAOv9D,UAAU4gB,OAAS,WAKxB,GAAKxjB,KAAKi9C,IAAV,CAQA,IAAIyjB,EAAW1gE,KAAK2gE,aAChBP,EAAMpgE,KAAKogE,IAGf,GAAKA,EAAL,EAKwB,kBAAbM,GAAyBA,IAAaA,GAAYA,EAAW,GAAKA,IAAan2D,OACxFm2D,EAAW,GAIb,IAAIE,GAAyB,IAAXF,GAAgBG,QAAQ,GAAK,IAC3C3zB,EAAQkzB,EAAI9jE,KAAK4wC,MASrB,OANIltC,KAAKsgE,WACPpzB,EAAMvuC,OAASiiE,EAEf1zB,EAAMjvC,MAAQ2iE,EAGTF,KAgBTP,EAAOv9D,UAAUk+D,kBAAoB,SAA2BpqD,GAC9D,IAAI4B,EAAWy7B,GAAmB/zC,KAAKi9C,IAAKvmC,GAE5C,OAAI1W,KAAKsgE,WACAhoD,EAASm8B,EAEXn8B,EAASo2B,GAalByxB,EAAOv9D,UAAU82D,YAAc,WAC7B15D,KAAK6F,GAAG7F,KAAKogE,IAAInjB,IAAI1E,cAAe,UAAWv4C,KAAKmmD,iBAetDga,EAAOv9D,UAAUujD,eAAiB,SAAwBzvC,GAEpC,KAAhBA,EAAM+gC,OAAgC,KAAhB/gC,EAAM+gC,OAC9B/gC,EAAMigC,iBACN32C,KAAK+gE,YAGoB,KAAhBrqD,EAAM+gC,OAAgC,KAAhB/gC,EAAM+gC,QACrC/gC,EAAMigC,iBACN32C,KAAKghE,gBAaTb,EAAOv9D,UAAU+2D,WAAa,WAC5B35D,KAAKyf,IAAIzf,KAAKogE,IAAInjB,IAAI1E,cAAe,UAAWv4C,KAAKmmD,iBAYvDga,EAAOv9D,UAAU62D,YAAc,SAAqB/iD,GAClDA,EAAM0gC,2BACN1gC,EAAMigC,kBAgBRwpB,EAAOv9D,UAAU09D,SAAW,SAAkBW,GAC5C,QAAaxkE,IAATwkE,EACF,OAAOjhE,KAAKkhE,YAAa,EAG3BlhE,KAAKkhE,YAAcD,EAEfjhE,KAAKkhE,UACPlhE,KAAK2xC,SAAS,uBAEd3xC,KAAK2xC,SAAS,0BAIXwuB,EA3YI,CA4YXtjB,IAEFA,GAAU0F,kBAAkB,SAAU4d,IAWtC,IAAIgB,GAAkB,SAAU3b,GAY9B,SAAS2b,EAAgB3nB,EAAQh7B,GAC/B6uB,EAAertC,KAAMmhE,GAErB,IAAIr8D,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAI1E,OAFA1Z,EAAMs8D,SAAW,GACjBt8D,EAAMe,GAAG2zC,EAAQ,WAAY10C,EAAM0e,QAC5B1e,EA0ET,OA5FAwoC,EAAS6zB,EAAiB3b,GA6B1B2b,EAAgBv+D,UAAU4tC,SAAW,WACnC,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,oBACXqc,UAAW,wCAA0CpsD,KAAKw9C,SAAS,UAAY,wBAInF2jB,EAAgBv+D,UAAUkQ,QAAU,WAClC9S,KAAKohE,SAAW,KAEhB5b,EAAW5iD,UAAUkQ,QAAQhQ,KAAK9C,OAapCmhE,EAAgBv+D,UAAU4gB,OAAS,SAAgB9M,GACjD,IAAIoJ,EAAW9f,KAAKorB,QAAQtL,WACxBnf,EAAWX,KAAKorB,QAAQzqB,WACxBwoC,EAAcnpC,KAAKorB,QAAQ+d,cAC3B+U,EAAWl+C,KAAKohE,SAGhBC,EAAa,SAAoBz1D,EAAMoU,GAEzC,IAAIshD,EAAU11D,EAAOoU,GAAO,EAE5B,OAAsC,KAA9BshD,GAAW,EAAI,EAAIA,GAAiB,KAI9CthE,KAAKi9C,IAAI/P,MAAMjvC,MAAQojE,EAAWl4B,EAAaxoC,GAG/C,IAAK,IAAI6B,EAAI,EAAGA,EAAIsd,EAAS5gB,OAAQsD,IAAK,CACxC,IAAI+d,EAAQT,EAASS,MAAM/d,GACvBwd,EAAMF,EAASE,IAAIxd,GACnB24B,EAAO+iB,EAAS17C,GAEf24B,IACHA,EAAOn7B,KAAKi9C,IAAI5L,YAAYb,MAC5B0N,EAAS17C,GAAK24B,GAIhBA,EAAK+R,MAAMhwC,KAAOmkE,EAAW9gD,EAAO4oB,GACpChO,EAAK+R,MAAMjvC,MAAQojE,EAAWrhD,EAAMO,EAAO4oB,GAI7C,IAAK,IAAIha,EAAK+uB,EAASh/C,OAAQiwB,EAAKrP,EAAS5gB,OAAQiwB,IACnDnvB,KAAKi9C,IAAIrI,YAAYsJ,EAAS/uB,EAAK,IAErC+uB,EAASh/C,OAAS4gB,EAAS5gB,QAGtBiiE,EA7Fa,CA8FpBtkB,IAEFA,GAAU0F,kBAAkB,kBAAmB4e,IAW/C,IAAII,GAAc,SAAU/b,GAG1B,SAAS+b,IAEP,OADAl0B,EAAertC,KAAMuhE,GACdh0B,EAA0BvtC,KAAMwlD,EAAWx6B,MAAMhrB,KAAMyC,YA2EhE,OA/EA6qC,EAASi0B,EAAa/b,GAatB+b,EAAY3+D,UAAU4tC,SAAW,WAC/B,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,sBAgBfwxB,EAAY3+D,UAAU4gB,OAAS,SAAgBg+C,EAAaC,EAAcxrD,GACxE,IAAIyrD,EAAczuB,GAAsBjzC,KAAKi9C,KACzC0kB,EAAa1uB,GAAsBjzC,KAAKorB,QAAQ9uB,MAChDslE,EAAiBJ,EAAYvjE,MAAQwjE,EAIzC,GAAKE,GAAeD,EAApB,CAQA,IAAIG,EAAmBL,EAAYtkE,KAAOykE,EAAWzkE,KAAO0kE,EAMxDE,EAAoBN,EAAYvjE,MAAQ2jE,GAAkBD,EAAWxkE,MAAQqkE,EAAYrkE,OAIzF4kE,EAAgBL,EAAYzjE,MAAQ,EAIpC4jE,EAAmBE,EACrBA,GAAiBA,EAAgBF,EACxBC,EAAoBC,IAC7BA,EAAgBD,GAMdC,EAAgB,EAClBA,EAAgB,EACPA,EAAgBL,EAAYzjE,QACrC8jE,EAAgBL,EAAYzjE,OAG9B+B,KAAKi9C,IAAI/P,MAAM/vC,MAAQ,IAAM4kE,EAAgB,KAC7ClxB,GAAY7wC,KAAKi9C,IAAKhnC,KAGjBsrD,EAhFS,CAiFhB1kB,IAEFA,GAAU0F,kBAAkB,cAAegf,IAY3C,IAAIS,GAAkB,SAAUxc,GAG9B,SAASwc,IAEP,OADA30B,EAAertC,KAAMgiE,GACdz0B,EAA0BvtC,KAAMwlD,EAAWx6B,MAAMhrB,KAAMyC,YAiDhE,OArDA6qC,EAAS00B,EAAiBxc,GAa1Bwc,EAAgBp/D,UAAU4tC,SAAW,WACnC,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,mCACXqc,UAAW,wCAA0CpsD,KAAKw9C,SAAS,YAAc,wBAiBrFwkB,EAAgBp/D,UAAU4gB,OAAS,SAAgBg+C,EAAaC,GAC9D,IAAI97C,EAAS3lB,KAGTA,KAAKiiE,QACPjiE,KAAKsiD,qBAAqBtiD,KAAKiiE,QAGjCjiE,KAAKiiE,OAASjiE,KAAKoiD,uBAAsB,WACvC,IAAIx2C,EAAO+Z,EAAOyF,QAAQs0C,YAAc/5C,EAAOyF,QAAQu0C,WAAWj/D,YAAcilB,EAAOyF,QAAQ1qB,cAE3FuV,EAAU2oD,GAAWhzD,EAAM+Z,EAAOyF,QAAQzqB,YAC1CuhE,EAAcv8C,EAAOy4B,SAAS,eAE9B8jB,GACFA,EAAY1+C,OAAOg+C,EAAaC,EAAcxrD,OAK7C+rD,EAtDa,CAuDpBnlB,IAUFmlB,GAAgBp/D,UAAUm6C,SAAW,CACnCmB,SAAU,IAIN1V,KAAcA,EAAa,IAAOsD,GAAWE,GACjDg2B,GAAgBp/D,UAAUm6C,SAASmB,SAAS51C,KAAK,eAGnDu0C,GAAU0F,kBAAkB,kBAAmByf,IAc/C,IAAIG,GAAmB,SAAU3c,GAY/B,SAAS2c,EAAiB3oB,EAAQh7B,GAChC6uB,EAAertC,KAAMmiE,GAErB,IAAIr9D,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAG1E,OADA1Z,EAAM0e,OAASy2B,GAAS74C,GAAK0D,EAAOA,EAAM0e,QAAS,IAC5C1e,EA+CT,OAhEAwoC,EAAS60B,EAAkB3c,GA4B3B2c,EAAiBv/D,UAAU4tC,SAAW,WACpC,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,uBAiBfoyB,EAAiBv/D,UAAU4gB,OAAS,SAAgBg+C,EAAaC,GAC/D,IAAI97C,EAAS3lB,KAGTA,KAAKiiE,QACPjiE,KAAKsiD,qBAAqBtiD,KAAKiiE,QAGjCjiE,KAAKiiE,OAASjiE,KAAKoiD,uBAAsB,WACvC,IAAIzhD,EAAWglB,EAAOyF,QAAQzqB,WAC1BsV,EAAU2oD,GAAW6C,EAAe9gE,EAAUA,GAElDglB,EAAOs3B,IAAI/P,MAAMhwC,KAAOskE,EAAYvjE,MAAQwjE,EAAe,KAC3D97C,EAAOy4B,SAAS,eAAe56B,OAAOg+C,EAAaC,EAAcxrD,OAI9DksD,EAjEc,CAkErBtlB,IAUFslB,GAAiBv/D,UAAUm6C,SAAW,CACpCmB,SAAU,CAAC,gBAGbrB,GAAU0F,kBAAkB,mBAAoB4f,IAMhD,IAAIC,GAAe,EAGfC,GAA0B,GAS1BC,GAAU,SAAUC,GAYtB,SAASD,EAAQ9oB,EAAQh7B,GACvB6uB,EAAertC,KAAMsiE,GAErB,IAAIx9D,EAAQyoC,EAA0BvtC,KAAMuiE,EAAQz/D,KAAK9C,KAAMw5C,EAAQh7B,IAGvE,OADA1Z,EAAM09D,oBACC19D,EAuTT,OAxUAwoC,EAASg1B,EAASC,GA2BlBD,EAAQ1/D,UAAU4/D,kBAAoB,WACpC,IAAI78C,EAAS3lB,KAEbA,KAAKwjB,OAASy2B,GAAS74C,GAAKpB,KAAMA,KAAKwjB,QAAS6+C,IAEhDriE,KAAK6F,GAAG7F,KAAKorB,QAAS,aAAcprB,KAAKwjB,QACzCxjB,KAAK6F,GAAG7F,KAAKorB,QAAS,QAASprB,KAAKi+D,aAIpCj+D,KAAKyiE,eAAiB,KAEtBziE,KAAK6F,GAAG7F,KAAKorB,QAAS,CAAC,YAAY,WACjCzF,EAAOrV,cAAcqV,EAAO88C,gBAE5B98C,EAAO88C,eAAiB98C,EAAOxU,aAAY,WACzCwU,EAAOy8B,uBAAsB,WAC3Bz8B,EAAOnC,cAER6+C,OAGLriE,KAAK6F,GAAG7F,KAAKorB,QAAS,CAAC,QAAS,QAAS,YAAY,WACnDzF,EAAOrV,cAAcqV,EAAO88C,mBAG9BziE,KAAK6F,GAAG7F,KAAKorB,QAAS,CAAC,aAAc,SAAUprB,KAAKwjB,SAWtD8+C,EAAQ1/D,UAAU4tC,SAAW,WAC3B,OAAO+xB,EAAQ3/D,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CAClD+vC,UAAW,uBACV,CACD,aAAc/vC,KAAKw9C,SAAS,mBAkBhC8kB,EAAQ1/D,UAAU8/D,QAAU,SAAiBhiE,EAAa4gE,GACxD,IAAI3gE,EAAWX,KAAKorB,QAAQzqB,WAG5BX,KAAKi9C,IAAIrM,aAAa,iBAA4B,IAAV0wB,GAAeT,QAAQ,IAG/D7gE,KAAKi9C,IAAIrM,aAAa,iBAAkB5wC,KAAKw9C,SAAS,oDAAqD,CAACohB,GAAWl+D,EAAaC,GAAWi+D,GAAWj+D,EAAUA,IAAY,eAGhLX,KAAKogE,IAAI58C,OAAOyvB,GAAsBjzC,KAAKi9C,KAAMqkB,IAgBnDgB,EAAQ1/D,UAAU4gB,OAAS,SAAgB9M,GACzC,IAAI4qD,EAAUiB,EAAQ3/D,UAAU4gB,OAAO1gB,KAAK9C,MAG5C,OADAA,KAAK0iE,QAAQ1iE,KAAK2iE,kBAAmBrB,GAC9BA,GAcTgB,EAAQ1/D,UAAU+/D,gBAAkB,WAClC,OAAO3iE,KAAKorB,QAAQs0C,YAAc1/D,KAAKorB,QAAQu0C,WAAWj/D,YAAcV,KAAKorB,QAAQ1qB,eAcvF4hE,EAAQ1/D,UAAUq7D,YAAc,SAAqBvnD,GACnD1W,KAAK0iE,QAAQ1iE,KAAKorB,QAAQzqB,WAAY,IAWxC2hE,EAAQ1/D,UAAU+9D,WAAa,WAC7B,IAAIW,EAAUthE,KAAK2iE,kBAAoB3iE,KAAKorB,QAAQzqB,WAEpD,OAAO2gE,GAAW,EAAI,EAAIA,GAa5BgB,EAAQ1/D,UAAU66D,gBAAkB,SAAyB/mD,GACtDu+B,GAAkBv+B,KAKvBA,EAAMwgC,kBACNl3C,KAAKorB,QAAQs0C,WAAU,GAEvB1/D,KAAK4iE,iBAAmB5iE,KAAKorB,QAAQvL,SACrC7f,KAAKorB,QAAQ6b,QAEbs7B,EAAQ3/D,UAAU66D,gBAAgB36D,KAAK9C,KAAM0W,KAa/C4rD,EAAQ1/D,UAAU49D,gBAAkB,SAAyB9pD,GAC3D,GAAKu+B,GAAkBv+B,GAAvB,CAIA,IAAImsD,EAAU7iE,KAAK8gE,kBAAkBpqD,GAAS1W,KAAKorB,QAAQzqB,WAGvDkiE,IAAY7iE,KAAKorB,QAAQzqB,aAC3BkiE,GAAoB,IAItB7iE,KAAKorB,QAAQ1qB,YAAYmiE,KAG3BP,EAAQ1/D,UAAUksC,OAAS,WACzByzB,EAAQ3/D,UAAUksC,OAAOhsC,KAAK9C,MAC9B,IAAI8iE,EAAmB9iE,KAAKo+C,SAAS,oBAEhC0kB,GAILA,EAAiBhjB,QAGnBwiB,EAAQ1/D,UAAUisC,QAAU,WAC1B0zB,EAAQ3/D,UAAUisC,QAAQ/rC,KAAK9C,MAC/B,IAAI8iE,EAAmB9iE,KAAKo+C,SAAS,oBAEhC0kB,GAILA,EAAiB/iB,QAanBuiB,EAAQ1/D,UAAU69D,cAAgB,SAAuB/pD,GACvD6rD,EAAQ3/D,UAAU69D,cAAc39D,KAAK9C,KAAM0W,GAGvCA,GACFA,EAAMwgC,kBAERl3C,KAAKorB,QAAQs0C,WAAU,GASvB1/D,KAAKorB,QAAQjlB,QAAQ,CAAEiD,KAAM,aAAc7G,OAAQvC,KAAMmyD,mBAAmB,IACxEnyD,KAAK4iE,iBACPpe,GAAexkD,KAAKorB,QAAQwd,SAShC05B,EAAQ1/D,UAAUo+D,YAAc,WAC9BhhE,KAAKorB,QAAQ1qB,YAAYV,KAAKorB,QAAQ1qB,cAAgB0hE,KAQxDE,EAAQ1/D,UAAUm+D,SAAW,WAC3B/gE,KAAKorB,QAAQ1qB,YAAYV,KAAKorB,QAAQ1qB,cAAgB0hE,KAaxDE,EAAQ1/D,UAAUmgE,aAAe,SAAsBrsD,GACjD1W,KAAKorB,QAAQvL,SACf7f,KAAKorB,QAAQwd,OAEb5oC,KAAKorB,QAAQ6b,SAejBq7B,EAAQ1/D,UAAUujD,eAAiB,SAAwBzvC,GAGrC,KAAhBA,EAAM+gC,OAAgC,KAAhB/gC,EAAM+gC,OAC9B/gC,EAAMigC,iBACN32C,KAAK+iE,aAAarsD,IACT6rD,EAAQ3/D,UAAUujD,gBAG3Boc,EAAQ3/D,UAAUujD,eAAerjD,KAAK9C,KAAM0W,IAIzC4rD,EAzUK,CA0UZnC,IAUFmC,GAAQ1/D,UAAUm6C,SAAW,CAC3BmB,SAAU,CAAC,kBAAmB,mBAC9BmiB,QAAS,mBAIL73B,KAAcA,EAAa,IAAOsD,GAAWE,GACjDs2B,GAAQ1/D,UAAUm6C,SAASmB,SAASzvB,OAAO,EAAG,EAAG,oBAQnD6zC,GAAQ1/D,UAAU29D,YAAc,aAEhC1jB,GAAU0F,kBAAkB,UAAW+f,IAYvC,IAAIU,GAAkB,SAAUxd,GAY9B,SAASwd,EAAgBxpB,EAAQh7B,GAC/B6uB,EAAertC,KAAMgjE,GAErB,IAAIl+D,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAM1E,OAJA1Z,EAAM07D,gBAAkBvmB,GAAS74C,GAAK0D,EAAOA,EAAM07D,iBAAkB,IACrE17D,EAAMm+D,yBAA2BhpB,GAAS74C,GAAK0D,EAAOA,EAAMo+D,iBAAkB,IAE9Ep+D,EAAMgqC,SACChqC,EA4LT,OAhNAwoC,EAAS01B,EAAiBxd,GA+B1Bwd,EAAgBpgE,UAAU4tC,SAAW,WACnC,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,sCAefizB,EAAgBpgE,UAAU49D,gBAAkB,SAAyB9pD,GACnE,IAAIysD,EAAUnjE,KAAKo+C,SAAS,WAE5B,GAAI+kB,EAAS,CACX,IAAIL,EAAmBK,EAAQ/kB,SAAS,oBACpCglB,EAAYD,EAAQ7mE,KACpBklE,EAAcvuB,GAAsBmwB,GACpC3B,EAAe1tB,GAAmBqvB,EAAW1sD,GAAOg4B,EAKpD+yB,EAAe,EACjBA,EAAe,EACNA,EAAe,IACxBA,EAAe,GAGbqB,GACFA,EAAiBt/C,OAAOg+C,EAAaC,KA2B3CuB,EAAgBpgE,UAAUsgE,gBAAkB,SAAyBxsD,GACnE,IAAIysD,EAAUnjE,KAAKo+C,SAAS,WAExB+kB,GACFA,EAAQ3C,gBAAgB9pD,IAY5BssD,EAAgBpgE,UAAU2mD,QAAU,WAClC,OAAOvpD,KAAKw5D,UAQdwJ,EAAgBpgE,UAAUisC,QAAU,WAClC7uC,KAAKk+C,WAAWnzC,SAAQ,SAAUmmC,GAChC,OAAOA,EAAMrC,SAAWqC,EAAMrC,aAG3B7uC,KAAKupD,YAIVvpD,KAAKyf,IAAI,CAAC,YAAa,cAAezf,KAAKy9D,iBAC3Cz9D,KAAKyf,IAAIzf,KAAKi9C,IAAK,YAAaj9C,KAAKwgE,iBACrCxgE,KAAKygE,gBAELzgE,KAAK2xC,SAAS,YAEd3xC,KAAKw5D,UAAW,IAQlBwJ,EAAgBpgE,UAAUksC,OAAS,WACjC9uC,KAAKk+C,WAAWnzC,SAAQ,SAAUmmC,GAChC,OAAOA,EAAMpC,QAAUoC,EAAMpC,YAG3B9uC,KAAKupD,YAITvpD,KAAK6F,GAAG,CAAC,YAAa,cAAe7F,KAAKy9D,iBAC1Cz9D,KAAK6F,GAAG7F,KAAKi9C,IAAK,YAAaj9C,KAAKwgE,iBACpCxgE,KAAK8xC,YAAY,YAEjB9xC,KAAKw5D,UAAW,IAclBwJ,EAAgBpgE,UAAU66D,gBAAkB,SAAyB/mD,GACnE,IAAI6gC,EAAMv3C,KAAKi9C,IAAI1E,cACf4qB,EAAUnjE,KAAKo+C,SAAS,WAExB+kB,GACFA,EAAQ1F,gBAAgB/mD,GAG1B1W,KAAK6F,GAAG0xC,EAAK,YAAav3C,KAAKijE,0BAC/BjjE,KAAK6F,GAAG0xC,EAAK,YAAav3C,KAAKijE,0BAC/BjjE,KAAK6F,GAAG0xC,EAAK,UAAWv3C,KAAKygE,eAC7BzgE,KAAK6F,GAAG0xC,EAAK,WAAYv3C,KAAKygE,gBAchCuC,EAAgBpgE,UAAU69D,cAAgB,SAAuB/pD,GAC/D,IAAI6gC,EAAMv3C,KAAKi9C,IAAI1E,cACf4qB,EAAUnjE,KAAKo+C,SAAS,WAExB+kB,GACFA,EAAQ1C,cAAc/pD,GAGxB1W,KAAKyf,IAAI83B,EAAK,YAAav3C,KAAKijE,0BAChCjjE,KAAKyf,IAAI83B,EAAK,YAAav3C,KAAKijE,0BAChCjjE,KAAKyf,IAAI83B,EAAK,UAAWv3C,KAAKygE,eAC9BzgE,KAAKyf,IAAI83B,EAAK,WAAYv3C,KAAKygE,gBAG1BuC,EAjNa,CAkNpBnmB,IAUFmmB,GAAgBpgE,UAAUm6C,SAAW,CACnCmB,SAAU,CAAC,YAGbrB,GAAU0F,kBAAkB,kBAAmBygB,IAW/C,IAAIK,GAAmB,SAAU9F,GAY/B,SAAS8F,EAAiB7pB,EAAQh7B,GAChC6uB,EAAertC,KAAMqjE,GAErB,IAAIv+D,EAAQyoC,EAA0BvtC,KAAMu9D,EAAQz6D,KAAK9C,KAAMw5C,EAAQh7B,IAOvE,OALA1Z,EAAMe,GAAG2zC,EAAQ,mBAAoB10C,EAAMw+D,yBAEO,IAA9ChqD,EAASoqC,GAAc6f,oBACzBz+D,EAAM+pC,UAED/pC,EAuDT,OA5EAwoC,EAAS+1B,EAAkB9F,GAgC3B8F,EAAiBzgE,UAAU48C,cAAgB,WACzC,MAAO,0BAA4B+d,EAAQ36D,UAAU48C,cAAc18C,KAAK9C,OAc1EqjE,EAAiBzgE,UAAU0gE,uBAAyB,SAAgC5sD,GAC9E1W,KAAKorB,QAAQo4C,eACfxjE,KAAKgnD,YAAY,kBAEjBhnD,KAAKgnD,YAAY,eAiBrBqc,EAAiBzgE,UAAU62D,YAAc,SAAqB/iD,GACvD1W,KAAKorB,QAAQo4C,eAGhBxjE,KAAKorB,QAAQq4C,iBAFbzjE,KAAKorB,QAAQs4C,qBAMVL,EA7Ec,CA8ErBhG,IAUFgG,GAAiBzgE,UAAUy2D,aAAe,aAE1Cxc,GAAU0F,kBAAkB,mBAAoB8gB,IAchD,IAAIM,GAAqB,SAA4Bx/D,EAAMq1C,GAErDA,EAAOr5C,QAAUq5C,EAAOr5C,MAAMi0D,uBAChCjwD,EAAKwtC,SAAS,cAGhBxtC,EAAK0B,GAAG2zC,EAAQ,aAAa,WACtBA,EAAOr5C,MAAMi0D,sBAGhBjwD,EAAK2tC,YAAY,cAFjB3tC,EAAKwtC,SAAS,kBAgBhBiyB,GAAc,SAAUpe,GAG1B,SAASoe,IAEP,OADAv2B,EAAertC,KAAM4jE,GACdr2B,EAA0BvtC,KAAMwlD,EAAWx6B,MAAMhrB,KAAMyC,YAgBhE,OApBA6qC,EAASs2B,EAAape,GAatBoe,EAAYhhE,UAAU4tC,SAAW,WAC/B,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,mBACXqc,UAAW,4CAIRwX,EArBS,CAsBhB/mB,IAEFA,GAAU0F,kBAAkB,cAAeqhB,IAY3C,IAAIC,GAAY,SAAUtB,GAYxB,SAASsB,EAAUrqB,EAAQh7B,GACzB6uB,EAAertC,KAAM6jE,GAErB,IAAI/+D,EAAQyoC,EAA0BvtC,KAAMuiE,EAAQz/D,KAAK9C,KAAMw5C,EAAQh7B,IAOvE,OALA1Z,EAAMe,GAAG,eAAgBf,EAAMg/D,mBAC/Bh/D,EAAMe,GAAG2zC,EAAQ,eAAgB10C,EAAMi/D,sBACvCvqB,EAAOsD,OAAM,WACX,OAAOh4C,EAAMi/D,0BAERj/D,EAyJT,OA9KAwoC,EAASu2B,EAAWtB,GAgCpBsB,EAAUjhE,UAAU4tC,SAAW,WAC7B,OAAO+xB,EAAQ3/D,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CAClD+vC,UAAW,iCACV,CACD,aAAc/vC,KAAKw9C,SAAS,gBAC5B,YAAa,YAcjBqmB,EAAUjhE,UAAU66D,gBAAkB,SAAyB/mD,GACxDu+B,GAAkBv+B,IAIvB6rD,EAAQ3/D,UAAU66D,gBAAgB36D,KAAK9C,KAAM0W,IAa/CmtD,EAAUjhE,UAAU49D,gBAAkB,SAAyB9pD,GACxDu+B,GAAkBv+B,KAIvB1W,KAAKgkE,aACLhkE,KAAKorB,QAAQ64C,OAAOjkE,KAAK8gE,kBAAkBpqD,MAQ7CmtD,EAAUjhE,UAAUohE,WAAa,WAC3BhkE,KAAKorB,QAAQ84C,SACflkE,KAAKorB,QAAQ84C,OAAM,IAYvBL,EAAUjhE,UAAU+9D,WAAa,WAC/B,OAAI3gE,KAAKorB,QAAQ84C,QACR,EAEFlkE,KAAKorB,QAAQ64C,UAQtBJ,EAAUjhE,UAAUo+D,YAAc,WAChChhE,KAAKgkE,aACLhkE,KAAKorB,QAAQ64C,OAAOjkE,KAAKorB,QAAQ64C,SAAW,KAQ9CJ,EAAUjhE,UAAUm+D,SAAW,WAC7B/gE,KAAKgkE,aACLhkE,KAAKorB,QAAQ64C,OAAOjkE,KAAKorB,QAAQ64C,SAAW,KAa9CJ,EAAUjhE,UAAUmhE,qBAAuB,SAA8BrtD,GACvE,IAAIytD,EAAYnkE,KAAKorB,QAAQ84C,QAAU,EAAIlkE,KAAKokE,sBAEhDpkE,KAAKi9C,IAAIrM,aAAa,gBAAiBuzB,GACvCnkE,KAAKi9C,IAAIrM,aAAa,iBAAkBuzB,EAAY,MAUtDN,EAAUjhE,UAAUwhE,oBAAsB,WACxC,OAAO/5D,KAAK4G,MAA8B,IAAxBjR,KAAKorB,QAAQ64C,WAajCJ,EAAUjhE,UAAUkhE,kBAAoB,WACtC,IAAIn+C,EAAS3lB,KAETqkE,EAAmBrkE,KAAKorB,QAAQ64C,SAEpCjkE,KAAK2rB,IAAI,kBAAkB,WACO,IAA5BhG,EAAOyF,QAAQ64C,UACjBt+C,EAAOyF,QAAQk5C,YAAYD,OAK1BR,EA/KO,CAgLd1D,IAUF0D,GAAUjhE,UAAUm6C,SAAW,CAC7BmB,SAAU,CAAC,eACXmiB,QAAS,eAQXwD,GAAUjhE,UAAU29D,YAAc,eAElC1jB,GAAU0F,kBAAkB,YAAashB,IAYzC,IAAIU,GAAgB,SAAU/e,GAY5B,SAAS+e,EAAc/qB,GACrB,IAAIh7B,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAClF4qC,EAAertC,KAAMukE,GAErB/lD,EAAQ8hD,SAAW9hD,EAAQ8hD,WAAY,GAIN,qBAAtB9hD,EAAQgmD,WAA6Bz2B,EAAQvvB,EAAQgmD,cAC9DhmD,EAAQgmD,UAAYhmD,EAAQgmD,WAAa,GACzChmD,EAAQgmD,UAAUlE,SAAW9hD,EAAQ8hD,UAIvC,IAAIx7D,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAsB1E,OApBAmlD,GAAmB7+D,EAAO00C,GAE1B10C,EAAM2/D,yBAA2BxqB,GAAS74C,GAAK0D,EAAOA,EAAM07D,iBAAkB,IAE9E17D,EAAMe,GAAG,YAAaf,EAAM24D,iBAC5B34D,EAAMe,GAAG,aAAcf,EAAM24D,iBAI7B34D,EAAMe,GAAGf,EAAM0/D,UAAW,CAAC,QAAS,iBAAiB,WACnD1/D,EAAM0/D,UAAU7yB,SAAS,qBACzB7sC,EAAM6sC,SAAS,qBACf7sC,EAAMqB,QAAQ,mBAGhBrB,EAAMe,GAAGf,EAAM0/D,UAAW,CAAC,OAAQ,mBAAmB,WACpD1/D,EAAM0/D,UAAU1yB,YAAY,qBAC5BhtC,EAAMgtC,YAAY,qBAClBhtC,EAAMqB,QAAQ,qBAETrB,EA8ET,OA7HAwoC,EAASi3B,EAAe/e,GA0DxB+e,EAAc3hE,UAAU4tC,SAAW,WACjC,IAAIk0B,EAAmB,wBAMvB,OAJI1kE,KAAK+8C,SAASujB,WAChBoE,EAAmB,uBAGdlf,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,kCAAoC20B,KAenDH,EAAc3hE,UAAU66D,gBAAkB,SAAyB/mD,GACjE,IAAI6gC,EAAMv3C,KAAKi9C,IAAI1E,cAEnBv4C,KAAK6F,GAAG0xC,EAAK,YAAav3C,KAAKykE,0BAC/BzkE,KAAK6F,GAAG0xC,EAAK,YAAav3C,KAAKykE,0BAC/BzkE,KAAK6F,GAAG0xC,EAAK,UAAWv3C,KAAKygE,eAC7BzgE,KAAK6F,GAAG0xC,EAAK,WAAYv3C,KAAKygE,gBAchC8D,EAAc3hE,UAAU69D,cAAgB,SAAuB/pD,GAC7D,IAAI6gC,EAAMv3C,KAAKi9C,IAAI1E,cAEnBv4C,KAAKyf,IAAI83B,EAAK,YAAav3C,KAAKykE,0BAChCzkE,KAAKyf,IAAI83B,EAAK,YAAav3C,KAAKykE,0BAChCzkE,KAAKyf,IAAI83B,EAAK,UAAWv3C,KAAKygE,eAC9BzgE,KAAKyf,IAAI83B,EAAK,WAAYv3C,KAAKygE,gBAcjC8D,EAAc3hE,UAAU49D,gBAAkB,SAAyB9pD,GACjE1W,KAAKwkE,UAAUhE,gBAAgB9pD,IAG1B6tD,EA9HW,CA+HlB1nB,IAUF0nB,GAAc3hE,UAAUm6C,SAAW,CACjCmB,SAAU,CAAC,cAGbrB,GAAU0F,kBAAkB,gBAAiBgiB,IAc7C,IAAII,GAAmB,SAA0BxgE,EAAMq1C,GAEjDA,EAAOr5C,QAAUq5C,EAAOr5C,MAAMk0D,qBAChClwD,EAAKwtC,SAAS,cAGhBxtC,EAAK0B,GAAG2zC,EAAQ,aAAa,WACtBA,EAAOr5C,MAAMk0D,oBAGhBlwD,EAAK2tC,YAAY,cAFjB3tC,EAAKwtC,SAAS,kBAgBhBizB,GAAa,SAAUrH,GAYzB,SAASqH,EAAWprB,EAAQh7B,GAC1B6uB,EAAertC,KAAM4kE,GAGrB,IAAI9/D,EAAQyoC,EAA0BvtC,KAAMu9D,EAAQz6D,KAAK9C,KAAMw5C,EAAQh7B,IAKvE,OAHAmmD,GAAiB7/D,EAAO00C,GAExB10C,EAAMe,GAAG2zC,EAAQ,CAAC,YAAa,gBAAiB10C,EAAM0e,QAC/C1e,EAqHT,OAzIAwoC,EAASs3B,EAAYrH,GA+BrBqH,EAAWhiE,UAAU48C,cAAgB,WACnC,MAAO,oBAAsB+d,EAAQ36D,UAAU48C,cAAc18C,KAAK9C,OAgBpE4kE,EAAWhiE,UAAU62D,YAAc,SAAqB/iD,GACtD,IAAImuD,EAAM7kE,KAAKorB,QAAQ64C,SACnBa,EAAa9kE,KAAKorB,QAAQk5C,cAE9B,GAAY,IAARO,EAAW,CACb,IAAIE,EAAcD,EAAa,GAAM,GAAMA,EAE3C9kE,KAAKorB,QAAQ64C,OAAOc,GACpB/kE,KAAKorB,QAAQ84C,OAAM,QAEnBlkE,KAAKorB,QAAQ84C,OAAMlkE,KAAKorB,QAAQ84C,UAiBpCU,EAAWhiE,UAAU4gB,OAAS,SAAgB9M,GAC5C1W,KAAKglE,cACLhlE,KAAKilE,sBAgBPL,EAAWhiE,UAAUoiE,YAAc,WACjC,IAAIH,EAAM7kE,KAAKorB,QAAQ64C,SACnBj2B,EAAQ,EAKRlC,GACF9rC,KAAKorB,QAAQ84C,MAAMlkE,KAAKorB,QAAQjrB,MAAM88C,IAAIinB,OAGhC,IAARW,GAAa7kE,KAAKorB,QAAQ84C,QAC5Bl2B,EAAQ,EACC62B,EAAM,IACf72B,EAAQ,EACC62B,EAAM,MACf72B,EAAQ,GAIV,IAAK,IAAIxrC,EAAI,EAAGA,EAAI,EAAGA,IACrBsvC,GAAY9xC,KAAKi9C,IAAK,WAAaz6C,GAErCmvC,GAAS3xC,KAAKi9C,IAAK,WAAajP,IAYlC42B,EAAWhiE,UAAUqiE,mBAAqB,WACxC,IAAIC,EAAWllE,KAAKorB,QAAQ84C,SAAqC,IAA1BlkE,KAAKorB,QAAQ64C,SAChDz4D,EAAO05D,EAAW,SAAW,OAE7BllE,KAAKgnD,gBAAkBx7C,GACzBxL,KAAKgnD,YAAYx7C,IAIdo5D,EA1IQ,CA2IfvH,IAUFuH,GAAWhiE,UAAUy2D,aAAe,OAEpCxc,GAAU0F,kBAAkB,aAAcqiB,IAa1C,IAAIO,GAAc,SAAU3f,GAY1B,SAAS2f,EAAY3rB,GACnB,IAAIh7B,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAClF4qC,EAAertC,KAAMmlE,GAES,qBAAnB3mD,EAAQ4mD,OACjB5mD,EAAQ4mD,OAAS5mD,EAAQ4mD,OAEzB5mD,EAAQ4mD,QAAS,GAKkB,qBAA1B5mD,EAAQ6mD,eAAiCt3B,EAAQvvB,EAAQ6mD,kBAClE7mD,EAAQ6mD,cAAgB7mD,EAAQ6mD,eAAiB,GACjD7mD,EAAQ6mD,cAAc/E,UAAY9hD,EAAQ4mD,QAG5C,IAAItgE,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAS1E,OAPA1Z,EAAMe,GAAG2zC,EAAQ,CAAC,aAAc10C,EAAMwgE,mBAItCxgE,EAAMe,GAAGf,EAAMugE,cAAe,CAAC,gBAAiBvgE,EAAMygE,eAEtDzgE,EAAMe,GAAGf,EAAMugE,cAAe,CAAC,kBAAmBvgE,EAAM0gE,iBACjD1gE,EAsET,OA3GAwoC,EAAS63B,EAAa3f,GAgDtB2f,EAAYviE,UAAU2iE,cAAgB,WACpCvlE,KAAK2xC,SAAS,sBAWhBwzB,EAAYviE,UAAU4iE,gBAAkB,WACtCxlE,KAAK8xC,YAAY,sBAYnBqzB,EAAYviE,UAAU0iE,kBAAoB,WAGpCtlE,KAAKqlE,cAAc/zB,SAAS,eAAiBtxC,KAAKylE,WAAWn0B,SAAS,eACxEtxC,KAAK2xC,SAAS,cAKZ3xC,KAAKqlE,cAAc/zB,SAAS,gBAAkBtxC,KAAKylE,WAAWn0B,SAAS,eACzEtxC,KAAK2xC,SAAS,yBAYlBwzB,EAAYviE,UAAU4tC,SAAW,WAC/B,IAAIk0B,EAAmB,8BAMvB,OAJK1kE,KAAK+8C,SAASqoB,SACjBV,EAAmB,6BAGdlf,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,gCAAkC20B,KAI1CS,EA5GS,CA6GhBtoB,IAUFsoB,GAAYviE,UAAUm6C,SAAW,CAC/BmB,SAAU,CAAC,aAAc,kBAG3BrB,GAAU0F,kBAAkB,cAAe4iB,IAY3C,IAAIO,GAAO,SAAUlgB,GAanB,SAASkgB,EAAKlsB,EAAQh7B,GACpB6uB,EAAertC,KAAM0lE,GAErB,IAAI5gE,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAS1E,OAPIA,IACF1Z,EAAM6gE,YAAcnnD,EAAQonD,YAG9B9gE,EAAM+gE,eAAiB,EAEvB/gE,EAAMe,GAAG,UAAWf,EAAMqhD,gBACnBrhD,EAsJT,OA9KAwoC,EAASo4B,EAAMlgB,GAoCfkgB,EAAK9iE,UAAUkjE,QAAU,SAAiBz0D,GACxCrR,KAAKq+C,SAAShtC,GACdA,EAAUxL,GAAG,QAASzE,GAAKpB,MAAM,SAAU0W,GAErC1W,KAAK2lE,cACP3lE,KAAK2lE,YAAYI,gBAIQ,4BAArB10D,EAAUvD,QACZ9N,KAAK2lE,YAAY7yB,cAczB4yB,EAAK9iE,UAAU4tC,SAAW,WACxB,IAAIw1B,EAAgBhmE,KAAK+8C,SAASipB,eAAiB,KAEnDhmE,KAAKi+C,WAAazN,GAASw1B,EAAe,CACxCj2B,UAAW,qBAGb/vC,KAAKi+C,WAAWrN,aAAa,OAAQ,QAErC,IAAIt0C,EAAKkpD,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACvDimE,OAAQjmE,KAAKi+C,WACblO,UAAW,aAYb,OATAzzC,EAAG+0C,YAAYrxC,KAAKi+C,YAIpBp4C,GAAGvJ,EAAI,SAAS,SAAUoa,GACxBA,EAAMigC,iBACNjgC,EAAM0gC,8BAGD96C,GAGTopE,EAAK9iE,UAAUkQ,QAAU,WACvB9S,KAAKi+C,WAAa,KAElBuH,EAAW5iD,UAAUkQ,QAAQhQ,KAAK9C,OAapC0lE,EAAK9iE,UAAUujD,eAAiB,SAAwBzvC,GAElC,KAAhBA,EAAM+gC,OAAgC,KAAhB/gC,EAAM+gC,OAC9B/gC,EAAMigC,iBACN32C,KAAKghE,eAGoB,KAAhBtqD,EAAM+gC,OAAgC,KAAhB/gC,EAAM+gC,QACrC/gC,EAAMigC,iBACN32C,KAAK+gE,aAST2E,EAAK9iE,UAAUo+D,YAAc,WAC3B,IAAIkF,EAAY,OAEWzpE,IAAvBuD,KAAK6lE,gBACPK,EAAYlmE,KAAK6lE,cAAgB,GAEnC7lE,KAAK8yC,MAAMozB,IAQbR,EAAK9iE,UAAUm+D,SAAW,WACxB,IAAImF,EAAY,OAEWzpE,IAAvBuD,KAAK6lE,gBACPK,EAAYlmE,KAAK6lE,cAAgB,GAEnC7lE,KAAK8yC,MAAMozB,IAWbR,EAAK9iE,UAAUkwC,MAAQ,WACrB,IAAIp+B,EAAOjS,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,EAE3Ey7C,EAAWl+C,KAAKk+C,WAAWlhD,QAC3BmpE,EAAYjoB,EAASh/C,QAAUg/C,EAAS,GAAGnO,WAAa,iBAAiB3oC,KAAK82C,EAAS,GAAGnO,WAE1Fo2B,GACFjoB,EAASxxB,QAGPwxB,EAASh/C,OAAS,IAChBwV,EAAO,EACTA,EAAO,EACEA,GAAQwpC,EAASh/C,SAC1BwV,EAAOwpC,EAASh/C,OAAS,GAG3Bc,KAAK6lE,cAAgBnxD,EAErBwpC,EAASxpC,GAAMuoC,IAAInK,UAIhB4yB,EA/KE,CAgLT7oB,IAEFA,GAAU0F,kBAAkB,OAAQmjB,IAWpC,IAAIU,GAAa,SAAU5gB,GAYzB,SAAS4gB,EAAW5sB,GAClB,IAAIh7B,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAClF4qC,EAAertC,KAAMomE,GAErB,IAAIthE,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQh7B,IAE1E1Z,EAAM6gE,YAAc,IAAItI,GAAO7jB,EAAQh7B,GAEvC1Z,EAAM6gE,YAAY3e,YAAYliD,EAAMu0D,cACpCv0D,EAAM6gE,YAAY1oB,IAAIrM,aAAa,gBAAiB,QAGpD,IAAIy1B,EAAchJ,GAAOz6D,UAAU48C,gBAiBnC,OAfA16C,EAAM6gE,YAAY1oB,IAAIlN,UAAYjrC,EAAM06C,gBAAkB,IAAM6mB,EAChEvhE,EAAM6gE,YAAY7zB,YAAY,eAE9BhtC,EAAMu5C,SAASv5C,EAAM6gE,aAErB7gE,EAAM0e,SAEN1e,EAAM00D,UAAW,EAEjB10D,EAAMe,GAAGf,EAAM6gE,YAAa,MAAO7gE,EAAM20D,aACzC30D,EAAMe,GAAGf,EAAM6gE,YAAa,QAAS7gE,EAAM20D,aAC3C30D,EAAMe,GAAGf,EAAM6gE,YAAa,QAAS7gE,EAAM40D,aAC3C50D,EAAMe,GAAGf,EAAM6gE,YAAa,OAAQ7gE,EAAM60D,YAE1C70D,EAAMe,GAAG,UAAWf,EAAMwhE,uBACnBxhE,EAmXT,OA3ZAwoC,EAAS84B,EAAY5gB,GAgDrB4gB,EAAWxjE,UAAU4gB,OAAS,WAC5B,IAAI+iD,EAAOvmE,KAAKwmE,aAEZxmE,KAAKumE,OACPvmE,KAAKumE,KAAKzzD,UACV9S,KAAK40C,YAAY50C,KAAKumE,OAGxBvmE,KAAKumE,KAAOA,EACZvmE,KAAKq+C,SAASkoB,GAQdvmE,KAAKymE,gBAAiB,EACtBzmE,KAAK2lE,YAAY1oB,IAAIrM,aAAa,gBAAiB,SAE/C5wC,KAAK6U,OAAS7U,KAAK6U,MAAM3V,QAAUc,KAAK0mE,eAC1C1mE,KAAK+/C,OAEL//C,KAAK8/C,QAYTsmB,EAAWxjE,UAAU4jE,WAAa,WAChC,IAAID,EAAO,IAAIb,GAAK1lE,KAAKorB,QAAS,CAAEw6C,WAAY5lE,OAahD,GAHAA,KAAK0mE,eAAiB,EAGlB1mE,KAAK+8C,SAAS4pB,MAAO,CACvB,IAAIA,EAAQn2B,GAAS,KAAM,CACzBT,UAAW,iBACXqc,UAAW5P,GAAYx8C,KAAK+8C,SAAS4pB,OACrC1gB,UAAW,IAGbjmD,KAAK0mE,gBAAkB,EAEvBH,EAAKrpB,UAAU3O,QAAQo4B,GACvB11B,GAAU01B,EAAOJ,EAAKvoB,aAKxB,GAFAh+C,KAAK6U,MAAQ7U,KAAK4mE,cAEd5mE,KAAK6U,MAEP,IAAK,IAAIrS,EAAI,EAAGA,EAAIxC,KAAK6U,MAAM3V,OAAQsD,IACrC+jE,EAAKT,QAAQ9lE,KAAK6U,MAAMrS,IAI5B,OAAO+jE,GAUTH,EAAWxjE,UAAUgkE,YAAc,aAUnCR,EAAWxjE,UAAU4tC,SAAW,WAC9B,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW/vC,KAAK6mE,wBACf,KAWLT,EAAWxjE,UAAUikE,qBAAuB,WAC1C,IAAIC,EAAkB,mBAGO,IAAzB9mE,KAAK+8C,SAASqoB,OAChB0B,GAAmB,UAEnBA,GAAmB,SAIrB,IAAIT,EAAchJ,GAAOz6D,UAAU48C,gBAEnC,MAAO,mBAAqBsnB,EAAkB,IAAMT,EAAc,IAAM7gB,EAAW5iD,UAAU48C,cAAc18C,KAAK9C,OAWlHomE,EAAWxjE,UAAU48C,cAAgB,WACnC,IAAIsnB,EAAkB,kBAStB,OAN6B,IAAzB9mE,KAAK+8C,SAASqoB,OAChB0B,GAAmB,UAEnBA,GAAmB,SAGd,mBAAqBA,EAAkB,IAAMthB,EAAW5iD,UAAU48C,cAAc18C,KAAK9C,OAmB9FomE,EAAWxjE,UAAUokD,YAAc,SAAqBx7C,GACtD,IAAIlP,EAAKmG,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAKzC,KAAK2lE,YAAYrpE,KAE9F,OAAO0D,KAAK2lE,YAAY3e,YAAYx7C,EAAMlP,IAgB5C8pE,EAAWxjE,UAAU62D,YAAc,SAAqB/iD,GAKtD1W,KAAK2rB,IAAI3rB,KAAKumE,KAAKvoB,YAAa,aAAc58C,GAAKpB,MAAM,SAAUqX,GACjErX,KAAK+lE,gBACL/lE,KAAKi9C,IAAI6D,WAEP9gD,KAAKymE,eACPzmE,KAAK+lE,gBAEL/lE,KAAK+mE,eASTX,EAAWxjE,UAAUkwC,MAAQ,WAC3B9yC,KAAK2lE,YAAY7yB,SAQnBszB,EAAWxjE,UAAUk+C,KAAO,WAC1B9gD,KAAK2lE,YAAY7kB,QAenBslB,EAAWxjE,UAAU82D,YAAc,WACjC7zD,GAAGyT,EAAU,UAAWlY,GAAKpB,KAAMA,KAAKmmD,kBAc1CigB,EAAWxjE,UAAU+2D,WAAa,WAChCl6C,GAAInG,EAAU,UAAWlY,GAAKpB,KAAMA,KAAKmmD,kBAc3CigB,EAAWxjE,UAAUujD,eAAiB,SAAwBzvC,GAGxC,KAAhBA,EAAM+gC,OAAgC,IAAhB/gC,EAAM+gC,OAC1Bz3C,KAAKymE,gBACPzmE,KAAK+lE,gBAGa,IAAhBrvD,EAAM+gC,QACR/gC,EAAMigC,iBAEN32C,KAAK2lE,YAAY1oB,IAAInK,UAGE,KAAhBp8B,EAAM+gC,OAAgC,KAAhB/gC,EAAM+gC,OAChCz3C,KAAKymE,iBACRzmE,KAAK+mE,cACLrwD,EAAMigC,mBAgBZyvB,EAAWxjE,UAAU0jE,sBAAwB,SAA+B5vD,GAGtD,KAAhBA,EAAM+gC,OAAgC,IAAhB/gC,EAAM+gC,QAC1Bz3C,KAAKymE,gBACPzmE,KAAK+lE,gBAGa,IAAhBrvD,EAAM+gC,QACR/gC,EAAMigC,iBAEN32C,KAAK2lE,YAAY1oB,IAAInK,WAU3BszB,EAAWxjE,UAAUmkE,YAAc,WACjC,GAAI/mE,KAAKw5D,SAAU,CAOjB,GANAx5D,KAAKymE,gBAAiB,EACtBzmE,KAAKumE,KAAKvmB,cACVhgD,KAAK2lE,YAAY1oB,IAAIrM,aAAa,gBAAiB,QAI/C9E,GAAUoE,KAEZ,OAGFlwC,KAAKumE,KAAKzzB,UASdszB,EAAWxjE,UAAUmjE,cAAgB,WAC/B/lE,KAAKw5D,WACPx5D,KAAKymE,gBAAiB,EACtBzmE,KAAKumE,KAAKtmB,gBACVjgD,KAAK2lE,YAAY1oB,IAAIrM,aAAa,gBAAiB,WASvDw1B,EAAWxjE,UAAUisC,QAAU,WAC7B7uC,KAAK+lE,gBAEL/lE,KAAKw5D,UAAW,EAChBx5D,KAAK2xC,SAAS,gBAEd3xC,KAAK2lE,YAAY92B,WAQnBu3B,EAAWxjE,UAAUksC,OAAS,WAC5B9uC,KAAKw5D,UAAW,EAChBx5D,KAAK8xC,YAAY,gBAEjB9xC,KAAK2lE,YAAY72B,UAGZs3B,EA5ZQ,CA6ZfvpB,IAEFA,GAAU0F,kBAAkB,aAAc6jB,IAW1C,IAAIY,GAAc,SAAUC,GAY1B,SAASD,EAAYxtB,EAAQh7B,GAC3B6uB,EAAertC,KAAMgnE,GAErB,IAAIliB,EAAStmC,EAAQsmC,OAEjBhgD,EAAQyoC,EAA0BvtC,KAAMinE,EAAYnkE,KAAK9C,KAAMw5C,EAAQh7B,IAM3E,GAJI1Z,EAAM+P,MAAM3V,QAAU,GACxB4F,EAAMi7C,QAGH+E,EACH,OAAOvX,EAA0BzoC,GAGnC,IAAIoiE,EAAgB9lE,GAAK0D,EAAOA,EAAM0e,QAUtC,OARAshC,EAAO1gB,iBAAiB,cAAe8iC,GACvCpiB,EAAO1gB,iBAAiB,WAAY8iC,GACpCpiE,EAAMsmB,QAAQvlB,GAAG,QAASqhE,GAE1BpiE,EAAMsmB,QAAQvlB,GAAG,WAAW,WAC1Bi/C,EAAOnb,oBAAoB,cAAeu9B,GAC1CpiB,EAAOnb,oBAAoB,WAAYu9B,MAElCpiE,EAGT,OAvCAwoC,EAAS05B,EAAaC,GAuCfD,EAxCS,CAyChBZ,IAEFvpB,GAAU0F,kBAAkB,cAAeykB,IAW3C,IAAIG,GAAW,SAAUtN,GAavB,SAASsN,EAAS3tB,EAAQh7B,GACxB6uB,EAAertC,KAAMmnE,GAErB,IAAIriE,EAAQyoC,EAA0BvtC,KAAM65D,EAAoB/2D,KAAK9C,KAAMw5C,EAAQh7B,IAiBnF,OAfA1Z,EAAMsiE,WAAa5oD,EAAQ4oD,WAC3BtiE,EAAMuiE,YAAc7oD,EAAQqrC,WAAY,EACxC/kD,EAAMwiE,gBAAkB9oD,EAAQ8oD,gBAEhCxiE,EAAM+kD,SAAS/kD,EAAMuiE,aAEjBviE,EAAMsiE,WACJtiE,EAAMwiE,gBACRxiE,EAAMm4C,IAAIrM,aAAa,OAAQ,oBAE/B9rC,EAAMm4C,IAAIrM,aAAa,OAAQ,iBAGjC9rC,EAAMm4C,IAAIrM,aAAa,OAAQ,YAE1B9rC,EA2ET,OA3GAwoC,EAAS65B,EAAUtN,GAoDnBsN,EAASvkE,UAAU4tC,SAAW,SAAkBpnC,EAAMnG,EAAOiK,GAI3D,OAFAlN,KAAKu5D,gBAAiB,EAEfM,EAAoBj3D,UAAU4tC,SAAS1tC,KAAK9C,KAAM,KAAMsC,EAAO,CACpEytC,UAAW,gBACXqc,UAAW,oCAAsCpsD,KAAKw9C,SAASx9C,KAAK+8C,SAASnY,OAAS,UACtFqhB,UAAW,GACVhjD,GAAQiK,IAgBbi6D,EAASvkE,UAAU62D,YAAc,SAAqB/iD,GACpD1W,KAAK6pD,UAAS,IAWhBsd,EAASvkE,UAAUinD,SAAW,SAAkB0d,GAC1CvnE,KAAKonE,aACHG,GACFvnE,KAAK2xC,SAAS,gBACd3xC,KAAKi9C,IAAIrM,aAAa,eAAgB,QAGtC5wC,KAAKgnD,YAAY,cACjBhnD,KAAKqnE,aAAc,IAEnBrnE,KAAK8xC,YAAY,gBACjB9xC,KAAKi9C,IAAIrM,aAAa,eAAgB,SAEtC5wC,KAAKgnD,YAAY,IACjBhnD,KAAKqnE,aAAc,KAKlBF,EA5GM,CA6GblO,IAEFpc,GAAU0F,kBAAkB,WAAY4kB,IAWxC,IAAIK,GAAoB,SAAUC,GAYhC,SAASD,EAAkBhuB,EAAQh7B,GACjC6uB,EAAertC,KAAMwnE,GAErB,IAAIv8D,EAAQuT,EAAQvT,MAChB65C,EAAStL,EAAOyL,aAGpBzmC,EAAQomB,MAAQ35B,EAAM25B,OAAS35B,EAAMlD,UAAY,UACjDyW,EAAQqrC,SAA0B,YAAf5+C,EAAMq4B,KAEzB,IAAIx+B,EAAQyoC,EAA0BvtC,KAAMynE,EAAU3kE,KAAK9C,KAAMw5C,EAAQh7B,IAEzE1Z,EAAMmG,MAAQA,EACd,IAAIy8D,EAAgB,WAClB,IAAK,IAAI55B,EAAOrrC,UAAUvD,OAAQyvB,EAAO1D,MAAM6iB,GAAOxoC,EAAO,EAAGA,EAAOwoC,EAAMxoC,IAC3EqpB,EAAKrpB,GAAQ7C,UAAU6C,GAGzBR,EAAM6iE,mBAAmB38C,MAAMlmB,EAAO6pB,IAEpCi5C,EAAgC,WAClC,IAAK,IAAI74B,EAAQtsC,UAAUvD,OAAQyvB,EAAO1D,MAAM8jB,GAAQC,EAAQ,EAAGA,EAAQD,EAAOC,IAChFrgB,EAAKqgB,GAASvsC,UAAUusC,GAG1BlqC,EAAM+iE,6BAA6B78C,MAAMlmB,EAAO6pB,IAkBlD,GAfA6qB,EAAO3zC,GAAG,CAAC,YAAa,mBAAoB6hE,GAC5C5iB,EAAO1gB,iBAAiB,SAAUsjC,GAClC5iB,EAAO1gB,iBAAiB,yBAA0BwjC,GAClD9iE,EAAMe,GAAG,WAAW,WAClB2zC,EAAO/5B,IAAI,CAAC,YAAa,mBAAoBioD,GAC7C5iB,EAAOnb,oBAAoB,SAAU+9B,GACrC5iB,EAAOnb,oBAAoB,yBAA0Bi+B,WAS/BnrE,IAApBqoD,EAAOgjB,SAAwB,CACjC,IAAIpxD,OAAQ,EAEZ5R,EAAMe,GAAG,CAAC,MAAO,UAAU,WACzB,GAA8B,WAA1BunC,EAAQ1wC,EAAOqrE,OAEjB,IACErxD,EAAQ,IAAIha,EAAOqrE,MAAM,UACzB,MAAOv4C,IAKN9Y,IACHA,EAAQ4C,EAAS0uD,YAAY,SAC7BtxD,EAAMuxD,UAAU,UAAU,GAAM,IAGlCnjB,EAAOtK,cAAc9jC,MAMzB,OADA5R,EAAM6iE,qBACC7iE,EAwFT,OAtKAwoC,EAASk6B,EAAmBC,GA8F5BD,EAAkB5kE,UAAU62D,YAAc,SAAqB/iD,GAC7D,IAAIiuB,EAAO3kC,KAAKiL,MAAM05B,KAClBujC,EAAQloE,KAAKiL,MAAMi9D,MACnBpjB,EAAS9kD,KAAKorB,QAAQ65B,aAQ1B,GANKijB,IACHA,EAAQ,CAACvjC,IAGX8iC,EAAU7kE,UAAU62D,YAAY32D,KAAK9C,KAAM0W,GAEtCouC,EAIL,IAAK,IAAItiD,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IAAK,CACtC,IAAIyI,EAAQ65C,EAAOtiD,GAEfyI,IAAUjL,KAAKiL,OAASi9D,EAAM7qE,QAAQ4N,EAAM05B,OAAS,EACpC,YAAf15B,EAAMq4B,OACRr4B,EAAMq4B,KAAO,WAES,aAAfr4B,EAAMq4B,OACfr4B,EAAMq4B,KAAO,cAenBkkC,EAAkB5kE,UAAU+kE,mBAAqB,SAA4BjxD,GAC3E,IAAIyxD,EAAuC,YAApBnoE,KAAKiL,MAAMq4B,KAI9B6kC,IAAqBnoE,KAAKqnE,aAC5BrnE,KAAK6pD,SAASse,IAIlBX,EAAkB5kE,UAAUilE,6BAA+B,SAAsCnxD,GAC/F,GAAwB,YAApB1W,KAAKiL,MAAMq4B,KAAoB,CACjC,IAAIi4B,EAAmBv7D,KAAKorB,QAAQktC,OAAOiD,iBAG3C,GAAIA,GAAoBA,EAAiBhS,SAAWgS,EAAiBxzD,WAAa/H,KAAKiL,MAAMlD,UAAYwzD,EAAiB52B,OAAS3kC,KAAKiL,MAAM05B,KAC5I,OAGF3kC,KAAKorB,QAAQktC,OAAOiD,iBAAmB,CACrChS,SAAS,EACTxhD,SAAU/H,KAAKiL,MAAMlD,SACrB48B,KAAM3kC,KAAKiL,MAAM05B,QAKvB6iC,EAAkB5kE,UAAUkQ,QAAU,WAEpC9S,KAAKiL,MAAQ,KAEbw8D,EAAU7kE,UAAUkQ,QAAQhQ,KAAK9C,OAG5BwnE,EAvKe,CAwKtBL,IAEFtqB,GAAU0F,kBAAkB,oBAAqBilB,IAWjD,IAAIY,GAAuB,SAAUC,GAYnC,SAASD,EAAqB5uB,EAAQh7B,GA4BpC,OA3BA6uB,EAAertC,KAAMooE,GAIrB5pD,EAAQvT,MAAQ,CACduuC,OAAQA,EACR7U,KAAMnmB,EAAQmmB,KACdujC,MAAO1pD,EAAQ0pD,MACf,SAAW,EACX5kC,KAAM,YAGH9kB,EAAQ0pD,QACX1pD,EAAQ0pD,MAAQ,CAAC1pD,EAAQmmB,OAGvBnmB,EAAQomB,MACVpmB,EAAQvT,MAAM25B,MAAQpmB,EAAQomB,MAE9BpmB,EAAQvT,MAAM25B,MAAQpmB,EAAQ0pD,MAAM7rD,KAAK,SAAW,OAItDmC,EAAQ4oD,YAAa,EAErB5oD,EAAQ8oD,iBAAkB,EAEnB/5B,EAA0BvtC,KAAMqoE,EAAmBvlE,KAAK9C,KAAMw5C,EAAQh7B,IAmD/E,OA1FA8uB,EAAS86B,EAAsBC,GAkD/BD,EAAqBxlE,UAAU+kE,mBAAqB,SAA4BjxD,GAI9E,IAHA,IAAIouC,EAAS9kD,KAAKw5C,SAASyL,aACvBkjB,GAAmB,EAEd3lE,EAAI,EAAGsY,EAAIgqC,EAAO5lD,OAAQsD,EAAIsY,EAAGtY,IAAK,CAC7C,IAAIyI,EAAQ65C,EAAOtiD,GAEnB,GAAIxC,KAAK+8C,SAASmrB,MAAM7qE,QAAQ4N,EAAM05B,OAAS,GAAoB,YAAf15B,EAAMq4B,KAAoB,CAC5E6kC,GAAmB,EACnB,OAMAA,IAAqBnoE,KAAKqnE,aAC5BrnE,KAAK6pD,SAASse,IAIlBC,EAAqBxlE,UAAUilE,6BAA+B,SAAsCnxD,GAIlG,IAHA,IAAIouC,EAAS9kD,KAAKw5C,SAASyL,aACvBqjB,GAAY,EAEP9lE,EAAI,EAAGsY,EAAIgqC,EAAO5lD,OAAQsD,EAAIsY,EAAGtY,IAAK,CAC7C,IAAIyI,EAAQ65C,EAAOtiD,GAEnB,GAAI,CAAC,WAAY,eAAgB,aAAanF,QAAQ4N,EAAM05B,OAAS,GAAoB,YAAf15B,EAAMq4B,KAAoB,CAClGglC,GAAY,EACZ,OAIAA,IACFtoE,KAAKorB,QAAQktC,OAAOiD,iBAAmB,CACrChS,SAAS,KAKR6e,EA3FkB,CA4FzBZ,IAEF3qB,GAAU0F,kBAAkB,uBAAwB6lB,IAWpD,IAAIG,GAAkB,SAAUC,GAY9B,SAASD,EAAgB/uB,GACvB,IAAIh7B,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAKlF,OAJA4qC,EAAertC,KAAMuoE,GAErB/pD,EAAQsmC,OAAStL,EAAOyL,aAEjB1X,EAA0BvtC,KAAMwoE,EAAa1lE,KAAK9C,KAAMw5C,EAAQh7B,IA+DzE,OAhFA8uB,EAASi7B,EAAiBC,GA+B1BD,EAAgB3lE,UAAUgkE,YAAc,WACtC,IAAI/xD,EAAQpS,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC5EgmE,EAAgBhmE,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK+kE,GAKpF5iC,OAAQ,EAER5kC,KAAK0oE,SACP9jC,EAAQ5kC,KAAK0oE,OAAS,QAGxB7zD,EAAMvM,KAAK,IAAI8/D,GAAqBpoE,KAAKorB,QAAS,CAChD88C,MAAOloE,KAAK2oE,OACZhkC,KAAM3kC,KAAK4oE,MACXhkC,MAAOA,KAGT5kC,KAAK0mE,gBAAkB,EAEvB,IAAI5hB,EAAS9kD,KAAKorB,QAAQ65B,aAErBh6B,MAAMwE,QAAQzvB,KAAK2oE,UACtB3oE,KAAK2oE,OAAS,CAAC3oE,KAAK4oE,QAGtB,IAAK,IAAIpmE,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IAAK,CACtC,IAAIyI,EAAQ65C,EAAOtiD,GAGnB,GAAIxC,KAAK2oE,OAAOtrE,QAAQ4N,EAAM05B,OAAS,EAAG,CAExC,IAAIjwB,EAAO,IAAI+zD,EAAczoE,KAAKorB,QAAS,CACzCngB,MAAOA,EAEPm8D,YAAY,EAEZE,iBAAiB,IAGnB5yD,EAAKi9B,SAAS,OAAS1mC,EAAM05B,KAAO,cACpC9vB,EAAMvM,KAAKoM,IAIf,OAAOG,GAGF0zD,EAjFa,CAkFpBvB,IAEFnqB,GAAU0F,kBAAkB,kBAAmBgmB,IAW/C,IAAIM,GAAwB,SAAUpB,GAYpC,SAASoB,EAAsBrvB,EAAQh7B,GACrC6uB,EAAertC,KAAM6oE,GAErB,IAAI59D,EAAQuT,EAAQvT,MAChBtB,EAAM6U,EAAQ7U,IACdjJ,EAAc84C,EAAO94C,cAGzB8d,EAAQ4oD,YAAa,EACrB5oD,EAAQ8oD,iBAAkB,EAC1B9oD,EAAQomB,MAAQj7B,EAAI6B,KACpBgT,EAAQqrC,SAAWlgD,EAAI0B,WAAa3K,GAAeA,EAAciJ,EAAI4B,QAErE,IAAIzG,EAAQyoC,EAA0BvtC,KAAMynE,EAAU3kE,KAAK9C,KAAMw5C,EAAQh7B,IAKzE,OAHA1Z,EAAMmG,MAAQA,EACdnG,EAAM6E,IAAMA,EACZsB,EAAMm5B,iBAAiB,YAAahjC,GAAK0D,EAAOA,EAAM0e,SAC/C1e,EAwCT,OArEAwoC,EAASu7B,EAAuBpB,GA6ChCoB,EAAsBjmE,UAAU62D,YAAc,SAAqB/iD,GACjE+wD,EAAU7kE,UAAU62D,YAAY32D,KAAK9C,MACrCA,KAAKorB,QAAQ1qB,YAAYV,KAAK2J,IAAI0B,WAClCrL,KAAKwjB,OAAOxjB,KAAK2J,IAAI0B,YAavBw9D,EAAsBjmE,UAAU4gB,OAAS,SAAgB9M,GACvD,IAAI/M,EAAM3J,KAAK2J,IACXjJ,EAAcV,KAAKorB,QAAQ1qB,cAG/BV,KAAK6pD,SAASlgD,EAAI0B,WAAa3K,GAAeA,EAAciJ,EAAI4B,UAG3Ds9D,EAtEmB,CAuE1B1B,IAEFtqB,GAAU0F,kBAAkB,wBAAyBsmB,IAarD,IAAIC,GAAiB,SAAUC,GAe7B,SAASD,EAAetvB,EAAQh7B,EAASs+B,GAEvC,OADAzP,EAAertC,KAAM8oE,GACdv7B,EAA0BvtC,KAAM+oE,EAAiBjmE,KAAK9C,KAAMw5C,EAAQh7B,EAASs+B,IAkKtF,OAlLAxP,EAASw7B,EAAgBC,GA2BzBD,EAAelmE,UAAU48C,cAAgB,WACvC,MAAO,uBAAyBupB,EAAiBnmE,UAAU48C,cAAc18C,KAAK9C,OAGhF8oE,EAAelmE,UAAUikE,qBAAuB,WAC9C,MAAO,uBAAyBkC,EAAiBnmE,UAAUikE,qBAAqB/jE,KAAK9C,OAevF8oE,EAAelmE,UAAU4gB,OAAS,SAAgB9M,GAC3C1W,KAAKgpE,UAAUtyD,GAAyB,aAAfA,EAAMtN,MAAsC,gBAAfsN,EAAMtN,OAC/DpJ,KAAKipE,SAASjpE,KAAKkpE,qBAErBH,EAAiBnmE,UAAU4gB,OAAO1gB,KAAK9C,OAYzC8oE,EAAelmE,UAAUqmE,SAAW,SAAkBh+D,GACpD,GAAIjL,KAAKgpE,SAAW/9D,EAApB,CASA,GALKjL,KAAKmpE,iBACRnpE,KAAKmpE,eAAiBnpE,KAAKwjB,OAAOpiB,KAAKpB,OAIrCA,KAAKgpE,OAAQ,CACf,IAAII,EAAoBppE,KAAKorB,QAAQmoC,qBAAqBjJ,wBAAwBtqD,KAAKgpE,QAEnFI,GACFA,EAAkBz/B,oBAAoB,OAAQ3pC,KAAKmpE,gBAGrDnpE,KAAKgpE,OAAS,KAMhB,GAHAhpE,KAAKgpE,OAAS/9D,EAGVjL,KAAKgpE,OAAQ,CACfhpE,KAAKgpE,OAAO1lC,KAAO,SAEnB,IAAI+lC,EAAqBrpE,KAAKorB,QAAQmoC,qBAAqBjJ,wBAAwBtqD,KAAKgpE,QAEpFK,GACFA,EAAmBjlC,iBAAiB,OAAQpkC,KAAKmpE,mBAavDL,EAAelmE,UAAUsmE,kBAAoB,WAG3C,IAFA,IAAIpkB,EAAS9kD,KAAKorB,QAAQ65B,cAAgB,GAEjCziD,EAAIsiD,EAAO5lD,OAAS,EAAGsD,GAAK,EAAGA,IAAK,CAE3C,IAAIyI,EAAQ65C,EAAOtiD,GAEnB,GAAIyI,EAAM05B,OAAS3kC,KAAK4oE,MACtB,OAAO39D,IAcb69D,EAAelmE,UAAU0mE,eAAiB,WACxC,OAAItpE,KAAKgpE,QAAUhpE,KAAKgpE,OAAOpkC,MACtB5kC,KAAKgpE,OAAOpkC,MAEd5kC,KAAKw9C,SAAShB,GAAYx8C,KAAK4oE,SAWxCE,EAAelmE,UAAU4jE,WAAa,WAEpC,OADAxmE,KAAK+8C,SAAS4pB,MAAQ3mE,KAAKspE,iBACpBP,EAAiBnmE,UAAU4jE,WAAW1jE,KAAK9C,OAWpD8oE,EAAelmE,UAAUgkE,YAAc,WACrC,IAAI/xD,EAAQ,GAEZ,IAAK7U,KAAKgpE,OACR,OAAOn0D,EAGT,IAAI5I,EAAOjM,KAAKgpE,OAAO/8D,KAEvB,IAAKA,EACH,OAAO4I,EAGT,IAAK,IAAIrS,EAAI,EAAGsY,EAAI7O,EAAK/M,OAAQsD,EAAIsY,EAAGtY,IAAK,CAC3C,IAAImH,EAAMsC,EAAKzJ,GACX+mE,EAAK,IAAIV,GAAsB7oE,KAAKorB,QAAS,CAAEngB,MAAOjL,KAAKgpE,OAAQr/D,IAAKA,IAE5EkL,EAAMvM,KAAKihE,GAGb,OAAO10D,GAGFi0D,EAnLY,CAoLnBP,IAUFO,GAAelmE,UAAUgmE,MAAQ,WAQjCE,GAAelmE,UAAUy2D,aAAe,WAExCxc,GAAU0F,kBAAkB,iBAAkBumB,IAW9C,IAAIU,GAAqB,SAAUT,GAejC,SAASS,EAAmBhwB,EAAQh7B,EAASs+B,GAC3CzP,EAAertC,KAAMwpE,GAErB,IAAI1kE,EAAQyoC,EAA0BvtC,KAAM+oE,EAAiBjmE,KAAK9C,KAAMw5C,EAAQh7B,EAASs+B,IAErFgI,EAAStL,EAAOyL,aAChByiB,EAAgBtmE,GAAK0D,EAAOA,EAAM6iE,oBAMtC,OAJA7iB,EAAO1gB,iBAAiB,SAAUsjC,GAClC5iE,EAAMe,GAAG,WAAW,WAClBi/C,EAAOnb,oBAAoB,SAAU+9B,MAEhC5iE,EAmDT,OA7EAwoC,EAASk8B,EAAoBT,GAuC7BS,EAAmB5mE,UAAU+kE,mBAAqB,SAA4BjxD,GAK5E,IAJA,IAAIouC,EAAS9kD,KAAKw5C,SAASyL,aACvB/O,GAAW,EAGN1zC,EAAI,EAAGsY,EAAIgqC,EAAO5lD,OAAQsD,EAAIsY,EAAGtY,IAAK,CAC7C,IAAIyI,EAAQ65C,EAAOtiD,GAEnB,GAAIyI,EAAM05B,OAAS3kC,KAAK4oE,OAAwB,YAAf39D,EAAMq4B,KAAoB,CACzD4S,GAAW,EACX,OAKAA,EACFl2C,KAAK6uC,UAEL7uC,KAAK8uC,UAYT06B,EAAmB5mE,UAAU48C,cAAgB,WAC3C,MAAO,2BAA6BupB,EAAiBnmE,UAAU48C,cAAc18C,KAAK9C,OAGpFwpE,EAAmB5mE,UAAUikE,qBAAuB,WAClD,MAAO,2BAA6BkC,EAAiBnmE,UAAUikE,qBAAqB/jE,KAAK9C,OAGpFwpE,EA9EgB,CA+EvBjB,IAUFiB,GAAmB5mE,UAAUgmE,MAAQ,eAQrCY,GAAmB5mE,UAAUy2D,aAAe,eAE5Cxc,GAAU0F,kBAAkB,qBAAsBinB,IAWlD,IAAIC,GAAkB,SAAUV,GAe9B,SAASU,EAAgBjwB,EAAQh7B,EAASs+B,GAExC,OADAzP,EAAertC,KAAMypE,GACdl8B,EAA0BvtC,KAAM+oE,EAAiBjmE,KAAK9C,KAAMw5C,EAAQh7B,EAASs+B,IAmBtF,OAnCAxP,EAASm8B,EAAiBV,GA2B1BU,EAAgB7mE,UAAU48C,cAAgB,WACxC,MAAO,wBAA0BupB,EAAiBnmE,UAAU48C,cAAc18C,KAAK9C,OAGjFypE,EAAgB7mE,UAAUikE,qBAAuB,WAC/C,MAAO,wBAA0BkC,EAAiBnmE,UAAUikE,qBAAqB/jE,KAAK9C,OAGjFypE,EApCa,CAqCpBlB,IAUFkB,GAAgB7mE,UAAUgmE,MAAQ,YAQlCa,GAAgB7mE,UAAUy2D,aAAe,YAEzCxc,GAAU0F,kBAAkB,kBAAmBknB,IAW/C,IAAIC,GAA0B,SAAUrB,GAYtC,SAASqB,EAAwBlwB,EAAQh7B,GACvC6uB,EAAertC,KAAM0pE,GAErBlrD,EAAQvT,MAAQ,CACduuC,OAAQA,EACR7U,KAAMnmB,EAAQmmB,KACdC,MAAOpmB,EAAQmmB,KAAO,YACtByiC,YAAY,EACZ,SAAW,EACX9jC,KAAM,YAIR9kB,EAAQ4oD,YAAa,EAErB5oD,EAAQ1Q,KAAO,0BAEf,IAAIhJ,EAAQyoC,EAA0BvtC,KAAMqoE,EAAmBvlE,KAAK9C,KAAMw5C,EAAQh7B,IAIlF,OAFA1Z,EAAM6sC,SAAS,0BACf7sC,EAAMkiD,YAAY,WAAaxoC,EAAQmmB,KAAO,oBACvC7/B,EAoBT,OApDAwoC,EAASo8B,EAAyBrB,GAgDlCqB,EAAwB9mE,UAAU62D,YAAc,SAAqB/iD,GACnE1W,KAAKw5C,SAAS4E,SAAS,qBAAqBgI,QAGvCsjB,EArDqB,CAsD5BlC,IAEF3qB,GAAU0F,kBAAkB,0BAA2BmnB,IAWvD,IAAIC,GAAiB,SAAUZ,GAe7B,SAASY,EAAenwB,EAAQh7B,EAASs+B,GAEvC,OADAzP,EAAertC,KAAM2pE,GACdp8B,EAA0BvtC,KAAM+oE,EAAiBjmE,KAAK9C,KAAMw5C,EAAQh7B,EAASs+B,IAuCtF,OAvDAxP,EAASq8B,EAAgBZ,GA2BzBY,EAAe/mE,UAAU48C,cAAgB,WACvC,MAAO,uBAAyBupB,EAAiBnmE,UAAU48C,cAAc18C,KAAK9C,OAGhF2pE,EAAe/mE,UAAUikE,qBAAuB,WAC9C,MAAO,uBAAyBkC,EAAiBnmE,UAAUikE,qBAAqB/jE,KAAK9C,OAWvF2pE,EAAe/mE,UAAUgkE,YAAc,WACrC,IAAI/xD,EAAQ,GAQZ,OANM7U,KAAKw5C,SAASr5C,OAASH,KAAKw5C,SAASr5C,MAAM4wD,2BAA6B/wD,KAAKw5C,SAAS4E,SAAS,uBACnGvpC,EAAMvM,KAAK,IAAIohE,GAAwB1pE,KAAKorB,QAAS,CAAEuZ,KAAM3kC,KAAK4oE,SAElE5oE,KAAK0mE,gBAAkB,GAGlBqC,EAAiBnmE,UAAUgkE,YAAY9jE,KAAK9C,KAAM6U,IAGpD80D,EAxDY,CAyDnBpB,IAUFoB,GAAe/mE,UAAUgmE,MAAQ,WAQjCe,GAAe/mE,UAAUy2D,aAAe,WAExCxc,GAAU0F,kBAAkB,iBAAkBonB,IAY9C,IAAIC,GAAmB,SAAUvB,GAG/B,SAASuB,IAEP,OADAv8B,EAAertC,KAAM4pE,GACdr8B,EAA0BvtC,KAAMqoE,EAAmBr9C,MAAMhrB,KAAMyC,YAmBxE,OAvBA6qC,EAASs8B,EAAkBvB,GAO3BuB,EAAiBhnE,UAAU4tC,SAAW,SAAkBpnC,EAAMnG,EAAOiK,GACnE,IAAIk/C,EAAY,oCAAsCpsD,KAAKw9C,SAASx9C,KAAK+8C,SAASnY,OAEjD,aAA7B5kC,KAAK+8C,SAAS9xC,MAAM05B,OACtBynB,GAAa,oHAAsHpsD,KAAKw9C,SAAS,YAAc,mBAGjK4O,GAAa,UAEb,IAAI9vD,EAAK+rE,EAAmBzlE,UAAU4tC,SAAS1tC,KAAK9C,KAAMoJ,EAAM9G,EAAO,CACrE8pD,UAAWA,GACVnpD,GAAQiK,GAEX,OAAO5Q,GAGFstE,EAxBc,CAyBrBpC,IAEF3qB,GAAU0F,kBAAkB,mBAAoBqnB,IAWhD,IAAIC,GAAiB,SAAUd,GAG7B,SAASc,EAAerwB,GACtB,IAAIh7B,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAClF4qC,EAAertC,KAAM6pE,GAIrB,IAAI/kE,EAAQyoC,EAA0BvtC,KAAM+oE,EAAiBjmE,KAAK9C,KAAMw5C,EAAQh7B,IAOhF,OALA1Z,EAAM4jE,OAAS,YACX,CAAC,KAAM,QAAS,QAAS,SAASrrE,QAAQyH,EAAMsmB,QAAQ0+C,YAAc,IACxEhlE,EAAM4jE,OAAS,YAEjB5jE,EAAM6gE,YAAY3e,YAAYxK,GAAY13C,EAAM4jE,SACzC5jE,EAwCT,OAvDAwoC,EAASu8B,EAAgBd,GA0BzBc,EAAejnE,UAAU48C,cAAgB,WACvC,MAAO,wBAA0BupB,EAAiBnmE,UAAU48C,cAAc18C,KAAK9C,OAGjF6pE,EAAejnE,UAAUikE,qBAAuB,WAC9C,MAAO,wBAA0BkC,EAAiBnmE,UAAUikE,qBAAqB/jE,KAAK9C,OAWxF6pE,EAAejnE,UAAUgkE,YAAc,WACrC,IAAI/xD,EAAQ,GASZ,OAPM7U,KAAKw5C,SAASr5C,OAASH,KAAKw5C,SAASr5C,MAAM4wD,2BAA6B/wD,KAAKw5C,SAAS4E,SAAS,uBACnGvpC,EAAMvM,KAAK,IAAIohE,GAAwB1pE,KAAKorB,QAAS,CAAEuZ,KAAM3kC,KAAK0oE,UAElE1oE,KAAK0mE,gBAAkB,GAGzB7xD,EAAQk0D,EAAiBnmE,UAAUgkE,YAAY9jE,KAAK9C,KAAM6U,EAAO+0D,IAC1D/0D,GAGFg1D,EAxDY,CAyDnBtB,IAUFsB,GAAejnE,UAAU+lE,OAAS,CAAC,WAAY,aAS/CkB,GAAejnE,UAAUy2D,aAAe,YAExCxc,GAAU0F,kBAAkB,iBAAkBsnB,IAW9C,IAAIE,GAAqB,SAAUtC,GAYjC,SAASsC,EAAmBvwB,EAAQh7B,GAClC6uB,EAAertC,KAAM+pE,GAErB,IAAI9+D,EAAQuT,EAAQvT,MAChB65C,EAAStL,EAAOwwB,cAGpBxrD,EAAQomB,MAAQ35B,EAAM25B,OAAS35B,EAAMlD,UAAY,UACjDyW,EAAQqrC,SAAW5+C,EAAMs+C,QAEzB,IAAIzkD,EAAQyoC,EAA0BvtC,KAAMynE,EAAU3kE,KAAK9C,KAAMw5C,EAAQh7B,IAEzE1Z,EAAMmG,MAAQA,EAEdnG,EAAM6sC,SAAS,OAAS1mC,EAAM05B,KAAO,cAErC,IAAI+iC,EAAgB,WAClB,IAAK,IAAI55B,EAAOrrC,UAAUvD,OAAQyvB,EAAO1D,MAAM6iB,GAAOxoC,EAAO,EAAGA,EAAOwoC,EAAMxoC,IAC3EqpB,EAAKrpB,GAAQ7C,UAAU6C,GAGzBR,EAAM6iE,mBAAmB38C,MAAMlmB,EAAO6pB,IAOxC,OAJAm2B,EAAO1gB,iBAAiB,SAAUsjC,GAClC5iE,EAAMe,GAAG,WAAW,WAClBi/C,EAAOnb,oBAAoB,SAAU+9B,MAEhC5iE,EA0DT,OAjGAwoC,EAASy8B,EAAoBtC,GA0C7BsC,EAAmBnnE,UAAU4tC,SAAW,SAAkBpnC,EAAMnG,EAAOiK,GACrE,IAAIk/C,EAAY,oCAAsCpsD,KAAKw9C,SAASx9C,KAAK+8C,SAASnY,OAEjD,cAA7B5kC,KAAK+8C,SAAS9xC,MAAM05B,OACtBynB,GAAa,oHAAsHpsD,KAAKw9C,SAAS,gBAAkB,mBAGrK4O,GAAa,UAEb,IAAI9vD,EAAKmrE,EAAU7kE,UAAU4tC,SAAS1tC,KAAK9C,KAAMoJ,EAAM9G,EAAO,CAC5D8pD,UAAWA,GACVnpD,GAAQiK,GAEX,OAAO5Q,GAgBTytE,EAAmBnnE,UAAU62D,YAAc,SAAqB/iD,GAC9D,IAAIouC,EAAS9kD,KAAKorB,QAAQ4+C,cAE1BvC,EAAU7kE,UAAU62D,YAAY32D,KAAK9C,KAAM0W,GAE3C,IAAK,IAAIlU,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IAAK,CACtC,IAAIyI,EAAQ65C,EAAOtiD,GAEnByI,EAAMs+C,QAAUt+C,IAAUjL,KAAKiL,QAcnC8+D,EAAmBnnE,UAAU+kE,mBAAqB,SAA4BjxD,GAC5E1W,KAAK6pD,SAAS7pD,KAAKiL,MAAMs+C,UAGpBwgB,EAlGgB,CAmGvB5C,IAEFtqB,GAAU0F,kBAAkB,qBAAsBwnB,IAWlD,IAAIE,GAAmB,SAAUzB,GAY/B,SAASyB,EAAiBzwB,GACxB,IAAIh7B,EAAU/b,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAKlF,OAJA4qC,EAAertC,KAAMiqE,GAErBzrD,EAAQsmC,OAAStL,EAAOwwB,cAEjBz8B,EAA0BvtC,KAAMwoE,EAAa1lE,KAAK9C,KAAMw5C,EAAQh7B,IAqDzE,OAtEA8uB,EAAS28B,EAAkBzB,GA4B3ByB,EAAiBrnE,UAAU48C,cAAgB,WACzC,MAAO,oBAAsBgpB,EAAa5lE,UAAU48C,cAAc18C,KAAK9C,OAGzEiqE,EAAiBrnE,UAAUikE,qBAAuB,WAChD,MAAO,oBAAsB2B,EAAa5lE,UAAUikE,qBAAqB/jE,KAAK9C,OAchFiqE,EAAiBrnE,UAAUgkE,YAAc,WACvC,IAAI/xD,EAAQpS,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAGhFzC,KAAK0mE,eAAiB,EAItB,IAFA,IAAI5hB,EAAS9kD,KAAKorB,QAAQ4+C,cAEjBxnE,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IAAK,CACtC,IAAIyI,EAAQ65C,EAAOtiD,GAEnBqS,EAAMvM,KAAK,IAAIyhE,GAAmB/pE,KAAKorB,QAAS,CAC9CngB,MAAOA,EAEPm8D,YAAY,EAEZE,iBAAiB,KAIrB,OAAOzyD,GAGFo1D,EAvEc,CAwErBjD,IAUFiD,GAAiBrnE,UAAUy2D,aAAe,cAC1Cxc,GAAU0F,kBAAkB,mBAAoB0nB,IAWhD,IAAIC,GAAuB,SAAUzC,GAYnC,SAASyC,EAAqB1wB,EAAQh7B,GACpC6uB,EAAertC,KAAMkqE,GAErB,IAAItlC,EAAQpmB,EAAQisB,KAChBA,EAAO1a,WAAW6U,EAAO,IAG7BpmB,EAAQomB,MAAQA,EAChBpmB,EAAQqrC,SAAoB,IAATpf,EACnBjsB,EAAQ4oD,YAAa,EACrB5oD,EAAQ8oD,iBAAkB,EAE1B,IAAIxiE,EAAQyoC,EAA0BvtC,KAAMynE,EAAU3kE,KAAK9C,KAAMw5C,EAAQh7B,IAMzE,OAJA1Z,EAAM8/B,MAAQA,EACd9/B,EAAM2lC,KAAOA,EAEb3lC,EAAMe,GAAG2zC,EAAQ,aAAc10C,EAAM0e,QAC9B1e,EAmCT,OAhEAwoC,EAAS48B,EAAsBzC,GA6C/ByC,EAAqBtnE,UAAU62D,YAAc,SAAqB/iD,GAChE+wD,EAAU7kE,UAAU62D,YAAY32D,KAAK9C,MACrCA,KAAKw5C,SAAS2wB,aAAanqE,KAAKyqC,OAalCy/B,EAAqBtnE,UAAU4gB,OAAS,SAAgB9M,GACtD1W,KAAK6pD,SAAS7pD,KAAKw5C,SAAS2wB,iBAAmBnqE,KAAKyqC,OAG/Cy/B,EAjEkB,CAkEzB/C,IAUF+C,GAAqBtnE,UAAUojE,cAAgB,SAE/CnpB,GAAU0F,kBAAkB,uBAAwB2nB,IAWpD,IAAIE,GAAyB,SAAUnD,GAYrC,SAASmD,EAAuB5wB,EAAQh7B,GACtC6uB,EAAertC,KAAMoqE,GAErB,IAAItlE,EAAQyoC,EAA0BvtC,KAAMinE,EAAYnkE,KAAK9C,KAAMw5C,EAAQh7B,IAO3E,OALA1Z,EAAMulE,mBACNvlE,EAAMwlE,cAENxlE,EAAMe,GAAG2zC,EAAQ,YAAa10C,EAAMulE,kBACpCvlE,EAAMe,GAAG2zC,EAAQ,aAAc10C,EAAMwlE,aAC9BxlE,EAsKT,OA3LAwoC,EAAS88B,EAAwBnD,GAgCjCmD,EAAuBxnE,UAAU4tC,SAAW,WAC1C,IAAIl0C,EAAK2qE,EAAYrkE,UAAU4tC,SAAS1tC,KAAK9C,MAS7C,OAPAA,KAAKuqE,SAAW/5B,GAAS,MAAO,CAC9BT,UAAW,0BACXqc,UAAW,OAGb9vD,EAAG+0C,YAAYrxC,KAAKuqE,UAEbjuE,GAGT8tE,EAAuBxnE,UAAUkQ,QAAU,WACzC9S,KAAKuqE,SAAW,KAEhBtD,EAAYrkE,UAAUkQ,QAAQhQ,KAAK9C,OAWrCoqE,EAAuBxnE,UAAU48C,cAAgB,WAC/C,MAAO,qBAAuBynB,EAAYrkE,UAAU48C,cAAc18C,KAAK9C,OAGzEoqE,EAAuBxnE,UAAUikE,qBAAuB,WACtD,MAAO,qBAAuBI,EAAYrkE,UAAUikE,qBAAqB/jE,KAAK9C,OAWhFoqE,EAAuBxnE,UAAU4jE,WAAa,WAC5C,IAAID,EAAO,IAAIb,GAAK1lE,KAAKw5C,UACrBgxB,EAAQxqE,KAAKyqE,gBAEjB,GAAID,EACF,IAAK,IAAIhoE,EAAIgoE,EAAMtrE,OAAS,EAAGsD,GAAK,EAAGA,IACrC+jE,EAAKloB,SAAS,IAAI6rB,GAAqBlqE,KAAKw5C,SAAU,CAAE/O,KAAM+/B,EAAMhoE,GAAK,OAI7E,OAAO+jE,GAQT6D,EAAuBxnE,UAAUmhE,qBAAuB,WAEtD/jE,KAAK1D,KAAKs0C,aAAa,gBAAiB5wC,KAAKw5C,SAAS2wB,iBAgBxDC,EAAuBxnE,UAAU62D,YAAc,SAAqB/iD,GAQlE,IANA,IAAIg0D,EAAc1qE,KAAKw5C,SAAS2wB,eAC5BK,EAAQxqE,KAAKyqE,gBAGbE,EAAUH,EAAM,GAEXhoE,EAAI,EAAGA,EAAIgoE,EAAMtrE,OAAQsD,IAChC,GAAIgoE,EAAMhoE,GAAKkoE,EAAa,CAC1BC,EAAUH,EAAMhoE,GAChB,MAGJxC,KAAKw5C,SAAS2wB,aAAaQ,IAW7BP,EAAuBxnE,UAAU6nE,cAAgB,WAC/C,OAAOzqE,KAAK+8C,SAAS0tB,eAAiBzqE,KAAK+8C,SAASkC,eAAiBj/C,KAAK+8C,SAASkC,cAAcwrB,eAYnGL,EAAuBxnE,UAAUgoE,sBAAwB,WACvD,OAAO5qE,KAAKw5C,SAASr5C,OAASH,KAAKw5C,SAASr5C,MAAMo0D,sBAAwBv0D,KAAKyqE,iBAAmBzqE,KAAKyqE,gBAAgBvrE,OAAS,GAalIkrE,EAAuBxnE,UAAUynE,iBAAmB,SAA0B3zD,GACxE1W,KAAK4qE,wBACP5qE,KAAK8xC,YAAY,cAEjB9xC,KAAK2xC,SAAS,eAclBy4B,EAAuBxnE,UAAU0nE,YAAc,SAAqB5zD,GAC9D1W,KAAK4qE,0BACP5qE,KAAKuqE,SAASne,UAAYpsD,KAAKw5C,SAAS2wB,eAAiB,MAItDC,EA5LoB,CA6L3BhE,IAUFgE,GAAuBxnE,UAAUy2D,aAAe,gBAEhDxc,GAAU0F,kBAAkB,yBAA0B6nB,IAYtD,IAAIS,GAAS,SAAUrlB,GAGrB,SAASqlB,IAEP,OADAx9B,EAAertC,KAAM6qE,GACdt9B,EAA0BvtC,KAAMwlD,EAAWx6B,MAAMhrB,KAAMyC,YA2BhE,OA/BA6qC,EAASu9B,EAAQrlB,GAajBqlB,EAAOjoE,UAAU48C,cAAgB,WAC/B,MAAO,cAAgBgG,EAAW5iD,UAAU48C,cAAc18C,KAAK9C,OAWjE6qE,EAAOjoE,UAAU4tC,SAAW,WAC1B,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW/vC,KAAKw/C,mBAIbqrB,EAhCI,CAiCXhuB,IAEFA,GAAU0F,kBAAkB,SAAUsoB,IAWtC,IAAIC,GAAsB,SAAUC,GAGlC,SAASD,IAEP,OADAz9B,EAAertC,KAAM8qE,GACdv9B,EAA0BvtC,KAAM+qE,EAAQ//C,MAAMhrB,KAAMyC,YAgC7D,OApCA6qC,EAASw9B,EAAqBC,GAa9BD,EAAoBloE,UAAU48C,cAAgB,WAC5C,MAAO,6BAA+BurB,EAAQnoE,UAAU48C,cAAc18C,KAAK9C,OAW7E8qE,EAAoBloE,UAAU4tC,SAAW,WACvC,IAAIl0C,EAAKyuE,EAAQnoE,UAAU4tC,SAAS1tC,KAAK9C,KAAM,CAC7C+vC,UAAW/vC,KAAKw/C,kBAMlB,OADAljD,EAAG8vD,UAAY,IACR9vD,GAGFwuE,EArCiB,CAsCxBD,IAEFhuB,GAAU0F,kBAAkB,sBAAuBuoB,IAYnD,IAAIE,GAAa,SAAUxlB,GAGzB,SAASwlB,IAEP,OADA39B,EAAertC,KAAMgrE,GACdz9B,EAA0BvtC,KAAMwlD,EAAWx6B,MAAMhrB,KAAMyC,YAgBhE,OApBA6qC,EAAS09B,EAAYxlB,GAarBwlB,EAAWpoE,UAAU4tC,SAAW,WAC9B,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,MAAO,CACrD+vC,UAAW,kBACXqtB,IAAK,SAIF4N,EArBQ,CAsBfnuB,IAUFmuB,GAAWpoE,UAAUm6C,SAAW,CAC9BmB,SAAU,CAAC,aAAc,cAAe,qBAAsB,cAAe,kBAAmB,kBAAmB,cAAe,uBAAwB,sBAAuB,yBAA0B,iBAAkB,qBAAsB,iBAAkB,mBAAoB,qBAG3RrB,GAAU0F,kBAAkB,aAAcyoB,IAY1C,IAAIC,GAAe,SAAUC,GAY3B,SAASD,EAAazxB,EAAQh7B,GAC5B6uB,EAAertC,KAAMirE,GAErB,IAAInmE,EAAQyoC,EAA0BvtC,KAAMkrE,EAAapoE,KAAK9C,KAAMw5C,EAAQh7B,IAG5E,OADA1Z,EAAMe,GAAG2zC,EAAQ,QAAS10C,EAAMshD,MACzBthD,EA+BT,OAhDAwoC,EAAS29B,EAAcC,GA8BvBD,EAAaroE,UAAU48C,cAAgB,WACrC,MAAO,qBAAuB0rB,EAAatoE,UAAU48C,cAAc18C,KAAK9C,OAW1EirE,EAAaroE,UAAUqT,QAAU,WAC/B,IAAIkP,EAAQnlB,KAAKw5C,SAASr0B,QAE1B,OAAOA,EAAQnlB,KAAKw9C,SAASr4B,EAAM/e,SAAW,IAGzC6kE,EAjDU,CAkDjB1lB,IASF0lB,GAAaroE,UAAUm6C,SAAWr5B,GAAa6hC,GAAY3iD,UAAUm6C,SAAU,CAC7EyJ,aAAa,EACbH,YAAY,EACZS,WAAW,EACXjB,aAAa,IAGfhJ,GAAU0F,kBAAkB,eAAgB0oB,IAK5C,IAAIE,GAAoB,0BAEpBC,GAAc,CAAC,OAAQ,SACvBC,GAAa,CAAC,OAAQ,QACtBC,GAAa,CAAC,OAAQ,QACtBC,GAAc,CAAC,OAAQ,SACvBC,GAAgB,CAAC,OAAQ,WACzBC,GAAY,CAAC,OAAQ,OACrBC,GAAc,CAAC,OAAQ,SACvBC,GAAe,CAAC,OAAQ,UAExBC,GAAiB,CAAC,IAAK,UACvBC,GAAe,CAAC,MAAO,oBACvBC,GAAgB,CAAC,IAAK,eAatBC,GAAgB,CAClBzP,gBAAiB,CACflsB,SAAU,yBACVvmC,GAAI,+BACJ+6B,MAAO,QACPpmB,QAAS,CAAC4sD,GAAaM,GAAaD,GAAWF,GAAaF,GAAYM,GAAcH,GAAeF,KAGvG/O,kBAAmB,CACjBnsB,SAAU,2BACVvmC,GAAI,iCACJ+6B,MAAO,eACPpmB,QAAS,CAACotD,GAAgBC,GAAcC,KAG1C/Q,MAAO,CACL3qB,SAAU,yBACVvmC,GAAI,+BACJ+6B,MAAO,QACPpmB,QAAS,CAACktD,GAAaN,GAAaK,GAAWF,GAAaF,GAAYM,GAAcH,GAAeF,KAGvG5O,UAAW,CACTtsB,SAAU,2BACVvmC,GAAI,KACJ+6B,MAAO,kBACPpmB,QAAS,CAAC,CAAC,OAAQ,QAAS,CAAC,SAAU,UAAW,CAAC,YAAa,aAAc,CAAC,UAAW,WAAY,CAAC,aAAc,gBAGvHu+C,WAAY,CACV3sB,SAAU,4BACVvmC,GAAI,0BACJ+6B,MAAO,cACPpmB,QAAS,CAAC,CAAC,wBAAyB,2BAA4B,CAAC,qBAAsB,wBAAyB,CAAC,oBAAqB,sBAAuB,CAAC,iBAAkB,mBAAoB,CAAC,SAAU,UAAW,CAAC,SAAU,UAAW,CAAC,aAAc,gBAGjQo+C,YAAa,CACXxsB,SAAU,6BACVvmC,GAAI,wBACJ+6B,MAAO,YACPpmB,QAAS,CAAC,CAAC,OAAQ,OAAQ,CAAC,OAAQ,OAAQ,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,QAAS,CAAC,OAAQ,SACjK,QAAW,EACXoH,OAAQ,SAAgB6iB,GACtB,MAAa,SAANA,EAAe,KAAO9qC,OAAO8qC,KAIxC4zB,YAAa,CACXjsB,SAAU,6BACVvmC,GAAI,iCACJ+6B,MAAO,eACPpmB,QAAS,CAACotD,GAAgBC,KAI5BrP,YAAa,CACXpsB,SAAU,6BACVvmC,GAAI,2BACJ+6B,MAAO,SAIT63B,cAAe,CACbrsB,SAAU,+BACVvmC,GAAI,6BACJ+6B,MAAO,eACPpmB,QAAS,CAACstD,GAAeD,GAAcD,MAsB3C,SAASI,GAAiBjwE,EAAO6pB,GAK/B,GAJIA,IACF7pB,EAAQ6pB,EAAO7pB,IAGbA,GAAmB,SAAVA,EACX,OAAOA,EAoBX,SAASkwE,GAAuB3vE,EAAIspB,GAClC,IAAI7pB,EAAQO,EAAGkiB,QAAQliB,EAAGkiB,QAAQ0tD,eAAenwE,MAEjD,OAAOiwE,GAAiBjwE,EAAO6pB,GAkBjC,SAASumD,GAAkB7vE,EAAIP,EAAO6pB,GACpC,GAAK7pB,EAIL,IAAK,IAAIyG,EAAI,EAAGA,EAAIlG,EAAGkiB,QAAQtf,OAAQsD,IACrC,GAAIwpE,GAAiB1vE,EAAGkiB,QAAQhc,GAAGzG,MAAO6pB,KAAY7pB,EAAO,CAC3DO,EAAG4vE,cAAgB1pE,EACnB,OAzENupE,GAAcvP,YAAYh+C,QAAUutD,GAAczP,gBAAgB99C,QAoFlE,IAAI4tD,GAAoB,SAAUlB,GAYhC,SAASkB,EAAkB5yB,EAAQh7B,GACjC6uB,EAAertC,KAAMosE,GAErB5tD,EAAQsoC,WAAY,EAEpB,IAAIhiD,EAAQyoC,EAA0BvtC,KAAMkrE,EAAapoE,KAAK9C,KAAMw5C,EAAQh7B,IAsC5E,OApCA1Z,EAAMmuD,cAAgB7xD,GAAK0D,EAAOA,EAAMmuD,eAGxCnuD,EAAMwhD,OACNxhD,EAAM4gD,eAAiB5gD,EAAM6gD,gBAAiB,EAE9C7gD,EAAMunE,UAAY77B,GAAS,IAAK,CAC9BT,UAAW,mBACXc,YAAa/rC,EAAM04C,SAAS,2BAE9B14C,EAAMxI,KAAK+0C,YAAYvsC,EAAMunE,WAE7BvnE,EAAMwnE,mBAGmC7vE,IAArC+hB,EAAQ+tD,2BACVznE,EAAMi4C,SAASwvB,yBAA2BznE,EAAMi4C,SAASkC,cAAcstB,0BAGzEznE,EAAMe,GAAGf,EAAMswC,EAAE,oBAAqB,SAAS,WAC7CtwC,EAAM0nE,eACN1nE,EAAM2Q,WAGR3Q,EAAMe,GAAGf,EAAMswC,EAAE,uBAAwB,SAAS,WAChDtwC,EAAMwnE,cACNxnE,EAAMmuD,mBAGRrlB,EAAKm+B,IAAe,SAAUU,GAC5B3nE,EAAMe,GAAGf,EAAMswC,EAAEq3B,EAAOr8B,UAAW,SAAUtrC,EAAMmuD,kBAGjDnuD,EAAMi4C,SAASwvB,0BACjBznE,EAAM4nE,kBAED5nE,EA8RT,OApVAwoC,EAAS8+B,EAAmBlB,GAyD5BkB,EAAkBxpE,UAAUkQ,QAAU,WACpC9S,KAAKqsE,UAAY,KAEjBnB,EAAatoE,UAAUkQ,QAAQhQ,KAAK9C,OAgBtCosE,EAAkBxpE,UAAU+pE,gBAAkB,SAAyBhqE,GACrE,IAAIgjB,EAAS3lB,KAET4sE,EAAWnqE,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC/E2G,EAAO3G,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,QAE3EgqE,EAASV,GAAcppE,GACvBkH,EAAK4iE,EAAO5iE,GAAGmT,QAAQ,KAAMhd,KAAKg9C,KAClC6vB,EAAsB,CAACD,EAAU/iE,GAAIwS,KAAK,KAAKic,OAEnD,MAAO,CAAC,IAAMlvB,EAAO,QAAUS,EAAK,aAAwB,UAATT,EAAmB,YAAc,IAAM,KAAMpJ,KAAKw9C,SAASivB,EAAO7nC,OAAQ,KAAOx7B,EAAO,IAAK,4BAA8ByjE,EAAsB,MAAM53C,OAAOw3C,EAAOjuD,QAAQ/f,KAAI,SAAU0c,GAC5O,IAAI2xD,EAAWjjE,EAAK,IAAMsR,EAAE,GAAG6B,QAAQ,OAAQ,IAE/C,MAAO,CAAC,eAAiB8vD,EAAW,YAAc3xD,EAAE,GAAK,KAAM,oBAAsB0xD,EAAsB,IAAMC,EAAW,KAAMnnD,EAAO63B,SAASriC,EAAE,IAAK,aAAakB,KAAK,QACzK4Y,OAAO,aAAa5Y,KAAK,KAa/B+vD,EAAkBxpE,UAAUmqE,iBAAmB,WAC7C,IAAIH,EAAW,wBAA0B5sE,KAAKg9C,IAE9C,MAAO,CAAC,oDAAqD,eAAiB4vB,EAAW,KAAM5sE,KAAKw9C,SAAS,QAAS,YAAax9C,KAAK2sE,gBAAgB,QAASC,GAAW,8CAA+C5sE,KAAK2sE,gBAAgB,cAAeC,GAAW,UAAW,eAAevwD,KAAK,KAa3S+vD,EAAkBxpE,UAAUoqE,iBAAmB,WAC7C,IAAIJ,EAAW,uBAAyB5sE,KAAKg9C,IAE7C,MAAO,CAAC,oDAAqD,eAAiB4vB,EAAW,KAAM5sE,KAAKw9C,SAAS,cAAe,YAAax9C,KAAK2sE,gBAAgB,kBAAmBC,GAAW,4CAA6C5sE,KAAK2sE,gBAAgB,oBAAqBC,GAAW,UAAW,eAAevwD,KAAK,KAa/T+vD,EAAkBxpE,UAAUqqE,kBAAoB,WAC9C,IAAIL,EAAW,mBAAqB5sE,KAAKg9C,IAEzC,MAAO,CAAC,wDAAyD,eAAiB4vB,EAAW,KAAM5sE,KAAKw9C,SAAS,UAAW,YAAax9C,KAAK2sE,gBAAgB,cAAeC,GAAW,gDAAiD5sE,KAAK2sE,gBAAgB,gBAAiBC,GAAW,UAAW,eAAevwD,KAAK,KAa3T+vD,EAAkBxpE,UAAUsqE,gBAAkB,WAC5C,OAAO18B,GAAS,MAAO,CACrBT,UAAW,4BACXqc,UAAW,CAACpsD,KAAK+sE,mBAAoB/sE,KAAKgtE,mBAAoBhtE,KAAKitE,qBAAqB5wD,KAAK,OAcjG+vD,EAAkBxpE,UAAUuqE,cAAgB,WAC1C,OAAO38B,GAAS,MAAO,CACrBT,UAAW,0BACXqc,UAAW,CAAC,wDAAyDpsD,KAAK2sE,gBAAgB,cAAe,GAAI,UAAW,cAAe,sDAAuD3sE,KAAK2sE,gBAAgB,YAAa,GAAI,UAAW,cAAe,uDAAwD3sE,KAAK2sE,gBAAgB,aAAc,GAAI,UAAW,eAAetwD,KAAK,OAchY+vD,EAAkBxpE,UAAUwqE,kBAAoB,WAC9C,IAAIC,EAAsBrtE,KAAKw9C,SAAS,8CAExC,OAAOhN,GAAS,MAAO,CACrBT,UAAW,8BACXqc,UAAW,CAAC,6CAA+CihB,EAAsB,KAAMrtE,KAAKw9C,SAAS,SAAU,mCAAqC6vB,EAAsB,UAAW,YAAa,mCAAqCrtE,KAAKw9C,SAAS,QAAU,aAAanhC,KAAK,OAIrR+vD,EAAkBxpE,UAAUqT,QAAU,WACpC,MAAO,CAACjW,KAAKktE,kBAAmBltE,KAAKmtE,gBAAiBntE,KAAKotE,sBAG7DhB,EAAkBxpE,UAAUgiC,MAAQ,WAClC,OAAO5kC,KAAKw9C,SAAS,4BAGvB4uB,EAAkBxpE,UAAUojD,YAAc,WACxC,OAAOhmD,KAAKw9C,SAAS,yEAGvB4uB,EAAkBxpE,UAAU48C,cAAgB,WAC1C,OAAO0rB,EAAatoE,UAAU48C,cAAc18C,KAAK9C,MAAQ,4BAW3DosE,EAAkBxpE,UAAUs5D,UAAY,WACtC,IAAI/1C,EAASnmB,KAEb,OAAOoM,EAAO2/D,IAAe,SAAUl+B,EAAO4+B,EAAQ9pE,GACpD,IAAI5G,EAAQkwE,GAAuB9lD,EAAOivB,EAAEq3B,EAAOr8B,UAAWq8B,EAAO7mD,QAMrE,YAJcnpB,IAAVV,IACF8xC,EAAMlrC,GAAO5G,GAGR8xC,IACN,KAWLu+B,EAAkBxpE,UAAU0qE,UAAY,SAAmBC,GACzD,IAAI9mD,EAASzmB,KAEb4tC,EAAKm+B,IAAe,SAAUU,EAAQ9pE,GACpCwpE,GAAkB1lD,EAAO2uB,EAAEq3B,EAAOr8B,UAAWm9B,EAAO5qE,GAAM8pE,EAAO7mD,YASrEwmD,EAAkBxpE,UAAU0pE,YAAc,WACxC,IAAI3lD,EAAS3mB,KAEb4tC,EAAKm+B,IAAe,SAAUU,GAC5B,IAAIh/D,EAAQg/D,EAAO5pE,eAAe,WAAa4pE,EAAO,WAAa,EAEnE9lD,EAAOyuB,EAAEq3B,EAAOr8B,UAAU87B,cAAgBz+D,MAS9C2+D,EAAkBxpE,UAAU8pE,gBAAkB,WAC5C,IAAIa,OAAS,EAEb,IACEA,EAAShzD,KAAKkzC,MAAM/wD,EAAO8wE,aAAah4D,QAAQ21D,KAChD,MAAO37C,GACP6f,EAAMrlC,KAAKwlB,GAGT+9C,GACFvtE,KAAKstE,UAAUC,IASnBnB,EAAkBxpE,UAAU4pE,aAAe,WACzC,GAAKxsE,KAAK+8C,SAASwvB,yBAAnB,CAIA,IAAIgB,EAASvtE,KAAKk8D,YAElB,IACMrgE,OAAO0Q,KAAKghE,GAAQruE,OACtBxC,EAAO8wE,aAAa93D,QAAQy1D,GAAmB5wD,KAAKD,UAAUizD,IAE9D7wE,EAAO8wE,aAAaC,WAAWtC,IAEjC,MAAO37C,GACP6f,EAAMrlC,KAAKwlB,MASf48C,EAAkBxpE,UAAUqwD,cAAgB,WAC1C,IAAIya,EAAY1tE,KAAKorB,QAAQgzB,SAAS,oBAElCsvB,GACFA,EAAUza,iBAWdmZ,EAAkBxpE,UAAUikD,iBAAmB,WAC7C7mD,KAAKkmD,oBAAsB,KAC3BlmD,KAAKyf,IAAInG,EAAU,UAAWtZ,KAAK2nD,eAEnC,IAAI+V,EAAK19D,KAAKorB,QAAQuiD,WAClBC,EAAclQ,GAAMA,EAAGmQ,eACvBC,EAAQpQ,GAAMA,EAAGqQ,eAEjBH,EACFA,EAAY96B,QACHg7B,GACTA,EAAMh7B,SAIHs5B,EArVe,CAsVtB7mB,IAEF1I,GAAU0F,kBAAkB,oBAAqB6pB,IAsBjD,IAAI4B,GAAgB,SAAUxoB,GAgB5B,SAASwoB,EAAcx0B,EAAQh7B,GAC7B6uB,EAAertC,KAAMguE,GAErB,IAAIC,EAA4BzvD,EAAQ0vD,gBAAkBxxE,EAAOwxE,eAGlC,OAA3B1vD,EAAQ0vD,iBACVD,GAA4B,GAI9B,IAAIlxB,EAAWr5B,GAAa,CAAE8sB,UAAWy9B,GAA6BzvD,GAElE1Z,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAMw5C,EAAQuD,IAsB1E,OApBAj4C,EAAMopE,eAAiB1vD,EAAQ0vD,gBAAkBxxE,EAAOwxE,eACxDppE,EAAMqpE,cAAgB,KACtBrpE,EAAMspE,gBAAkB,KACxBtpE,EAAMupE,kBAAoBj0B,IAAS,WACjCt1C,EAAMwpE,kBACL,KAAK,EAAO90B,GAEXy0B,GACFnpE,EAAMspE,gBAAkB,IAAItpE,EAAMopE,eAAeppE,EAAMupE,mBACvDvpE,EAAMspE,gBAAgBG,QAAQ/0B,EAAOl9C,QAErCwI,EAAMqpE,cAAgB,WAChBrpE,EAAMm4C,IAAIuxB,eACZ3oE,GAAGf,EAAMm4C,IAAIuxB,cAAe,SAAU1pE,EAAMupE,mBAE9CvpE,EAAM2a,IAAI,OAAQ3a,EAAMqpE,gBAG1BrpE,EAAMe,GAAG,OAAQf,EAAMqpE,gBAElBrpE,EAgDT,OAlGAwoC,EAAS0gC,EAAexoB,GAqDxBwoB,EAAcprE,UAAU4tC,SAAW,WACjC,OAAOgV,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,SAAU,CACxD+vC,UAAW,wBAWfi+B,EAAcprE,UAAU0rE,cAAgB,WAOtCtuE,KAAKorB,QAAQjlB,QAAQ,iBAGvB6nE,EAAcprE,UAAUkQ,QAAU,WAC5B9S,KAAKouE,kBACHpuE,KAAKorB,QAAQ9uB,MACf0D,KAAKouE,gBAAgBK,UAAUzuE,KAAKorB,QAAQ9uB,MAE9C0D,KAAKouE,gBAAgBM,cAGnB1uE,KAAKi9C,KAAOj9C,KAAKi9C,IAAIuxB,eACvB/uD,GAAIzf,KAAKi9C,IAAIuxB,cAAe,SAAUxuE,KAAKquE,mBAGzCruE,KAAKmuE,eACPnuE,KAAKyf,IAAI,OAAQzf,KAAKmuE,eAGxBnuE,KAAKkuE,eAAiB,KACtBluE,KAAK2uE,eAAiB,KACtB3uE,KAAKquE,kBAAoB,KACzBruE,KAAKmuE,cAAgB,MAGhBH,EAnGW,CAoGlBnxB,IAEFA,GAAU0F,kBAAkB,gBAAiByrB,IAe7C,IAAIY,GAAgB,SAAuBnwD,GACzC,IAAIniB,EAAKmiB,EAAKniB,KAGd,GAAIA,EAAG6E,aAAa,OAElB,OADAsd,EAAK2yC,iBAAiB90D,EAAG2gB,MAClB,EAeT,IAAI7C,EAAUqE,EAAK42B,GAAG,UAClBw5B,EAAU,GACV5xD,EAAM,GAGV,IAAK7C,EAAQlb,OACX,OAAO,EAIT,IAAK,IAAIsD,EAAI,EAAGA,EAAI4X,EAAQlb,OAAQsD,IAAK,CACvC,IAAIuJ,EAAMqO,EAAQ5X,GAAGya,IAEjBlR,IAAiC,IAA1B8iE,EAAQxxE,QAAQ0O,IACzB8iE,EAAQvmE,KAAKyD,GAKjB,QAAK8iE,EAAQ3vE,SAMU,IAAnB2vE,EAAQ3vE,SACV+d,EAAM4xD,EAAQ,IAGhBpwD,EAAK2yC,iBAAiBn0C,IACf,IAOL6xD,GAA8B,GAE7BpiC,IACHoiC,GAA8BjzE,OAAOC,eAAe,GAAI,YAAa,CACnEgO,IAAK,WACH,OAAO9J,KAAK+uE,WAAU,GAAM3iB,WAE9B5kC,IAAK,SAAaihB,GAEhB,IAAIumC,EAAQ11D,EAASC,cAAcvZ,KAAK86C,SAASvhB,eAGjDy1C,EAAM5iB,UAAY3jB,EAGlB,IAAIwmC,EAAU31D,EAAS41D,yBAIvB,MAAOF,EAAMrwB,WAAWz/C,OACtB+vE,EAAQ59B,YAAY29B,EAAMrwB,WAAW,IAWvC,OAPA3+C,KAAKgxC,UAAY,GAIjBt0C,EAAOyyE,QAAQvsE,UAAUyuC,YAAYvuC,KAAK9C,KAAMivE,GAGzCjvE,KAAKosD,cAQlB,IAAIgjB,GAAgB,SAAuBC,EAAU9/B,GAGnD,IAFA,IAAIrsC,EAAa,GAERV,EAAI,EAAGA,EAAI6sE,EAASnwE,OAAQsD,IAGnC,GAFAU,EAAarH,OAAOmnB,yBAAyBqsD,EAAS7sE,GAAI+sC,GAEtDrsC,GAAcA,EAAWskB,KAAOtkB,EAAW4G,IAC7C,MAOJ,OAHA5G,EAAWC,YAAa,EACxBD,EAAWE,cAAe,EAEnBF,GAGLosE,GAAyB,SAAgC7wD,GAC3D,OAAO2wD,GAAc,CAAC3wD,EAAKniB,KAAMI,EAAO6yE,iBAAiB3sE,UAAWlG,EAAOyyE,QAAQvsE,UAAWksE,IAA8B,cAqB1HU,GAAmB,SAA0B/wD,GAC/C,IAAIniB,EAAKmiB,EAAKniB,KAGd,IAAIA,EAAGmzE,kBAAP,CAIA,IAAI/4B,EAAM,GACNg5B,EAAkBJ,GAAuB7wD,GACzCkxD,EAAgB,SAAuBC,GACzC,OAAO,WACL,IAAK,IAAI9hC,EAAOrrC,UAAUvD,OAAQyvB,EAAO1D,MAAM6iB,GAAOxoC,EAAO,EAAGA,EAAOwoC,EAAMxoC,IAC3EqpB,EAAKrpB,GAAQ7C,UAAU6C,GAGzB,IAAIuqE,EAASD,EAAS5kD,MAAM1uB,EAAIqyB,GAIhC,OAFAigD,GAAcnwD,GAEPoxD,IAIX,CAAC,SAAU,cAAe,sBAAsB9kE,SAAQ,SAAUooC,GAC3D72C,EAAG62C,KAKRuD,EAAIvD,GAAK72C,EAAG62C,GAIZ72C,EAAG62C,GAAKw8B,EAAcj5B,EAAIvD,QAG5Bt3C,OAAOC,eAAeQ,EAAI,YAAaonB,GAAagsD,EAAiB,CACnEloD,IAAKmoD,EAAcD,EAAgBloD,QAGrClrB,EAAGmzE,kBAAoB,WACrBnzE,EAAGmzE,kBAAoB,KACvB5zE,OAAO0Q,KAAKmqC,GAAK3rC,SAAQ,SAAUooC,GACjC72C,EAAG62C,GAAKuD,EAAIvD,MAGdt3C,OAAOC,eAAeQ,EAAI,YAAaozE,IAIzCjxD,EAAKkN,IAAI,YAAarvB,EAAGmzE,qBAQvBK,GAAwB,GAEvBpjC,IACHojC,GAAwBj0E,OAAOC,eAAe,GAAI,MAAO,CACvDgO,IAAK,WACH,OAAI9J,KAAKmB,aAAa,OACbmrD,GAAe5vD,EAAOyyE,QAAQvsE,UAAU8vC,aAAa5vC,KAAK9C,KAAM,QAGlE,IAETwnB,IAAK,SAAaihB,GAGhB,OAFA/rC,EAAOyyE,QAAQvsE,UAAUguC,aAAa9tC,KAAK9C,KAAM,MAAOyoC,GAEjDA,MAKb,IAAIsnC,GAAmB,SAA0BtxD,GAC/C,OAAO2wD,GAAc,CAAC3wD,EAAKniB,KAAMI,EAAO6yE,iBAAiB3sE,UAAWktE,IAAwB,QAkB1FE,GAAiB,SAAwBvxD,GAC3C,GAAKA,EAAK+1C,kBAAV,CAIA,IAAIl4D,EAAKmiB,EAAKniB,KAGd,IAAIA,EAAG2zE,gBAAP,CAIA,IAAIC,EAAgBH,GAAiBtxD,GACjC0xD,EAAkB7zE,EAAGs0C,aACrBw/B,EAAU9zE,EAAGoqB,KAEjB7qB,OAAOC,eAAeQ,EAAI,MAAOonB,GAAawsD,EAAe,CAC3D1oD,IAAK,SAAaihB,GAChB,IAAIonC,EAASK,EAAc1oD,IAAI1kB,KAAKxG,EAAImsC,GAKxC,OAFAhqB,EAAK2yC,iBAAiB90D,EAAG2gB,KAElB4yD,MAIXvzE,EAAGs0C,aAAe,SAAUx1B,EAAGqtB,GAC7B,IAAIonC,EAASM,EAAgBrtE,KAAKxG,EAAI8e,EAAGqtB,GAMzC,MAJI,OAAOrhC,KAAKgU,IACdqD,EAAK2yC,iBAAiB90D,EAAG2gB,KAGpB4yD,GAGTvzE,EAAGoqB,KAAO,WACR,IAAImpD,EAASO,EAAQttE,KAAKxG,GAW1B,OALKsyE,GAAcnwD,KACjBA,EAAK2yC,iBAAiB,IACtBoe,GAAiB/wD,IAGZoxD,GAGLvzE,EAAG+zE,WACL5xD,EAAK2yC,iBAAiB90D,EAAG+zE,YACfzB,GAAcnwD,IACxB+wD,GAAiB/wD,GAGnBniB,EAAG2zE,gBAAkB,WACnB3zE,EAAG2zE,gBAAkB,KACrB3zE,EAAGoqB,KAAO0pD,EACV9zE,EAAGs0C,aAAeu/B,EAClBt0E,OAAOC,eAAeQ,EAAI,MAAO4zE,GAC7B5zE,EAAGmzE,mBACLnzE,EAAGmzE,wBAKLa,GAAoB9iC,EAA2B,CAAC,sJAAwJ,CAAC,uJAYzM+iC,GAAQ,SAAU7b,GAYpB,SAAS6b,EAAM/xD,EAASs+B,GACtBzP,EAAertC,KAAMuwE,GAErB,IAAIzrE,EAAQyoC,EAA0BvtC,KAAM00D,EAAM5xD,KAAK9C,KAAMwe,EAASs+B,IAElEp6C,EAAS8b,EAAQ9b,OACjB8tE,GAAoB,EAiBxB,GAXI9tE,IAAWoC,EAAMm4C,IAAIozB,aAAe3tE,EAAOua,KAAOuB,EAAQvY,KAAyC,IAAlCuY,EAAQvY,IAAIwqE,mBAC/E3rE,EAAMswD,UAAU1yD,GAEhBoC,EAAM4rE,gBAAgB5rE,EAAMm4C,KAI1Bz+B,EAAQmyD,iBACV7rE,EAAM8rE,0BAGJ9rE,EAAMm4C,IAAI4zB,gBAAiB,CAE7B,IAAIC,EAAQhsE,EAAMm4C,IAAI0B,WAClBoyB,EAAcD,EAAM5xE,OACpB8xE,EAAc,GAElB,MAAOD,IAAe,CACpB,IAAIh8B,EAAO+7B,EAAMC,GACbj2B,EAAW/F,EAAK+F,SAASvhB,cAEZ,UAAbuhB,IACGh2C,EAAMisD,0BAQTjsD,EAAMyuD,qBAAqBnJ,iBAAiBrV,GAC5CjwC,EAAMguD,mBAAmB/J,SAAShU,EAAK9pC,OACvCnG,EAAMmgD,aAAa8D,SAAShU,EAAK9pC,OAC5BulE,GAAsB1rE,EAAMm4C,IAAI97C,aAAa,iBAAkBurD,GAAc3X,EAAK93B,OACrFuzD,GAAoB,IAPtBQ,EAAY1oE,KAAKysC,IAavB,IAAK,IAAIvyC,EAAI,EAAGA,EAAIwuE,EAAY9xE,OAAQsD,IACtCsC,EAAMm4C,IAAIrI,YAAYo8B,EAAYxuE,IAyBtC,OArBAsC,EAAMmsE,qBACFnsE,EAAMisD,0BAA4Byf,GACpCnhC,EAAMrlC,KAAKghC,EAAKslC,KAIlBxrE,EAAMosE,2CAMDrkC,GAAiBjB,GAAaS,KAAyD,IAAnC7tB,EAAQ2yC,wBAC/DrsD,EAAMqsE,aAAY,GAKpBrsE,EAAMssE,yBAENtsE,EAAM86C,eACC96C,EAguBT,OAzzBAwoC,EAASijC,EAAO7b,GAiGhB6b,EAAM3tE,UAAUkQ,QAAU,WACpB9S,KAAKi9C,KAAOj9C,KAAKi9C,IAAIgzB,iBACvBjwE,KAAKi9C,IAAIgzB,kBAEXM,EAAMc,oBAAoBrxE,KAAKi9C,KAC/Bj9C,KAAK+8C,SAAW,KAGhB2X,EAAM9xD,UAAUkQ,QAAQhQ,KAAK9C,OAS/BuwE,EAAM3tE,UAAUguE,wBAA0B,WACxCZ,GAAehwE,OAajBuwE,EAAM3tE,UAAUsuE,wCAA0C,WACxD,IAAIjsB,EAAajlD,KAAKilD,aAClBqsB,OAAmC,EAGnCC,EAA4B,WAC9BD,EAAmC,GAEnC,IAAK,IAAI9uE,EAAI,EAAGA,EAAIyiD,EAAW/lD,OAAQsD,IAAK,CAC1C,IAAIyI,EAAQg6C,EAAWziD,GAEJ,aAAfyI,EAAM05B,MACR2sC,EAAiChpE,KAAK,CACpC2C,MAAOA,EACPumE,WAAYvmE,EAAMq4B,SAQ1BiuC,IACAtsB,EAAW7gB,iBAAiB,SAAUmtC,GAEtCvxE,KAAK6F,GAAG,WAAW,WACjB,OAAOo/C,EAAWtb,oBAAoB,SAAU4nC,MAGlD,IAAIE,EAAmB,SAASA,IAC9B,IAAK,IAAIjvE,EAAI,EAAGA,EAAI8uE,EAAiCpyE,OAAQsD,IAAK,CAChE,IAAIkvE,EAAcJ,EAAiC9uE,GAEpB,aAA3BkvE,EAAYzmE,MAAMq4B,MAAuBouC,EAAYzmE,MAAMq4B,OAASouC,EAAYF,aAClFE,EAAYzmE,MAAMq4B,KAAOouC,EAAYF,YAIzCvsB,EAAWtb,oBAAoB,SAAU8nC,IAK3CzxE,KAAK6F,GAAG,yBAAyB,WAC/Bo/C,EAAWtb,oBAAoB,SAAU4nC,GAGzCtsB,EAAWtb,oBAAoB,SAAU8nC,GACzCxsB,EAAW7gB,iBAAiB,SAAUqtC,MAIxCzxE,KAAK6F,GAAG,uBAAuB,WAE7Bo/C,EAAWtb,oBAAoB,SAAU4nC,GACzCtsB,EAAW7gB,iBAAiB,SAAUmtC,GAGtCtsB,EAAWtb,oBAAoB,SAAU8nC,OAY7ClB,EAAM3tE,UAAUquE,mBAAqB,WACnC,IAAItrD,EAAS3lB,KAEb4vD,GAAOW,MAAMxlD,SAAQ,SAAU+C,GAC7B,IAAI7K,EAAQ2sD,GAAO9hD,GACf6jE,EAAWhsD,EAAOrpB,KAAK2G,EAAM+sD,YAC7B4hB,EAAajsD,EAAO1iB,EAAM+sD,cAE9B,GAAKrqC,EAAO,iBAAmB1iB,EAAM8sD,YAAc,WAAc4hB,GAAaA,EAASvtC,iBAAvF,CAGA,IAAI7V,EAAY,CACd46B,OAAQ,SAAgB9xC,GACtBu6D,EAAWzrE,QAAQ,CACjBiD,KAAM,SACN7G,OAAQqvE,EACRr6D,cAAeq6D,EACfh7B,WAAYg7B,KAGhBxoB,SAAU,SAAkB/xC,GAC1Bu6D,EAAW7oB,SAAS1xC,EAAEpM,QAExBo+C,YAAa,SAAqBhyC,GAChCu6D,EAAW5oB,YAAY3xC,EAAEpM,SAGzB4mE,EAAkB,WAGpB,IAFA,IAAIC,EAAe,GAEVtvE,EAAI,EAAGA,EAAIovE,EAAW1yE,OAAQsD,IAAK,CAG1C,IAFA,IAAIuvE,GAAQ,EAEH3jD,EAAI,EAAGA,EAAIujD,EAASzyE,OAAQkvB,IACnC,GAAIujD,EAASvjD,KAAOwjD,EAAWpvE,GAAI,CACjCuvE,GAAQ,EACR,MAICA,GACHD,EAAaxpE,KAAKspE,EAAWpvE,IAIjC,MAAOsvE,EAAa5yE,OAClB0yE,EAAW5oB,YAAY8oB,EAAaplD,UAIxC7wB,OAAO0Q,KAAKgiB,GAAWxjB,SAAQ,SAAUinE,GACvC,IAAIxjD,EAAWD,EAAUyjD,GAEzBL,EAASvtC,iBAAiB4tC,EAAWxjD,GACrC7I,EAAO9f,GAAG,WAAW,SAAUwR,GAC7B,OAAOs6D,EAAShoC,oBAAoBqoC,EAAWxjD,SAKnD7I,EAAO9f,GAAG,YAAagsE,GACvBlsD,EAAO9f,GAAG,WAAW,SAAUwR,GAC7B,OAAOsO,EAAOlG,IAAI,YAAaoyD,WAarCtB,EAAM3tE,UAAU4tC,SAAW,WACzB,IAAIl0C,EAAK0D,KAAK+8C,SAAS92C,IAMvB,IAAK3J,IAAQ0D,KAAK+8C,SAASk1B,iBAAkBjyE,KAAKkyE,wBAA0B,CAG1E,GAAI51E,EAAI,CACN,IAAI61E,EAAQ71E,EAAGyyE,WAAU,GAErBzyE,EAAG0hC,YACL1hC,EAAG0hC,WAAWoT,aAAa+gC,EAAO71E,GAEpCi0E,EAAMc,oBAAoB/0E,GAC1BA,EAAK61E,MACA,CACL71E,EAAKgd,EAASC,cAAc,SAG5B,IAAI64D,EAAgBpyE,KAAK+8C,SAAS92C,KAAOssC,GAAcvyC,KAAK+8C,SAAS92C,KACjExI,EAAaimB,GAAa,GAAI0uD,GAE7BvlC,IAA0D,IAAzC7sC,KAAK+8C,SAASoU,+BAC3B1zD,EAAWipD,SAGpBtU,GAAc91C,EAAIgG,EAAO7E,EAAY,CACnCoM,GAAI7J,KAAK+8C,SAASs1B,OAClB,MAAS,cAIb/1E,EAAGg2E,SAAWtyE,KAAK+8C,SAASu1B,SAGO,qBAA1BtyE,KAAK+8C,SAASrX,SACvBkL,GAAat0C,EAAI,UAAW0D,KAAK+8C,SAASrX,SAQ5C,IAFA,IAAI6sC,EAAgB,CAAC,OAAQ,QAAS,cAAe,YAE5C/vE,EAAI,EAAGA,EAAI+vE,EAAcrzE,OAAQsD,IAAK,CAC7C,IAAIgwE,EAAOD,EAAc/vE,GACrBzG,EAAQiE,KAAK+8C,SAASy1B,GAEL,qBAAVz2E,IACLA,EACF60C,GAAat0C,EAAIk2E,EAAMA,GAEvBlgC,GAAgBh2C,EAAIk2E,GAEtBl2E,EAAGk2E,GAAQz2E,GAIf,OAAOO,GAkBTi0E,EAAM3tE,UAAU8tE,gBAAkB,SAAyBp0E,GACzD,GAAwB,IAApBA,EAAGm2E,cAA0C,IAApBn2E,EAAGm2E,aAAhC,CAMA,GAAsB,IAAlBn2E,EAAGkb,WAAkB,CAWvB,IAAIk7D,GAAiB,EACjBC,EAAoB,WACtBD,GAAiB,GAGnB1yE,KAAK6F,GAAG,YAAa8sE,GAErB,IAAIC,EAAmB,WAGhBF,GACH1yE,KAAKmG,QAAQ,cAgBjB,OAZAnG,KAAK6F,GAAG,iBAAkB+sE,QAE1B5yE,KAAK88C,OAAM,WACT98C,KAAKyf,IAAI,YAAakzD,GACtB3yE,KAAKyf,IAAI,iBAAkBmzD,GAEtBF,GAEH1yE,KAAKmG,QAAQ,gBAWnB,IAAI0sE,EAAkB,CAAC,aAGvBA,EAAgBvqE,KAAK,kBAGjBhM,EAAGkb,YAAc,GACnBq7D,EAAgBvqE,KAAK,cAInBhM,EAAGkb,YAAc,GACnBq7D,EAAgBvqE,KAAK,WAInBhM,EAAGkb,YAAc,GACnBq7D,EAAgBvqE,KAAK,kBAIvBtI,KAAK88C,OAAM,WACT+1B,EAAgB9nE,SAAQ,SAAU3B,GAChCpJ,KAAKmG,QAAQiD,KACZpJ,WAYPuwE,EAAM3tE,UAAU6d,eAAiB,SAAwB3O,GACvD,IACE9R,KAAKi9C,IAAIv8C,YAAcoR,EACvB,MAAOuF,GACPg4B,EAAMh4B,EAAG,oCAabk5D,EAAM3tE,UAAUjC,SAAW,WACzB,IAAIwlB,EAASnmB,KAMb,GAAIA,KAAKi9C,IAAIt8C,WAAa4J,KAAYyhC,GAAcQ,GAAsC,IAAzBxsC,KAAKi9C,IAAIv8C,YAAmB,CAG3F,IAAIoyE,EAAgB,SAASA,IACvB3sD,EAAO82B,IAAIv8C,YAAc,IAEvBylB,EAAO82B,IAAIt8C,WAAa4J,KAC1B4b,EAAOhgB,QAAQ,kBAEjBggB,EAAO1G,IAAI,aAAcqzD,KAK7B,OADA9yE,KAAK6F,GAAG,aAAcitE,GACftoD,IAET,OAAOxqB,KAAKi9C,IAAIt8C,UAAY6pB,KAW9B+lD,EAAM3tE,UAAU3E,MAAQ,WACtB,OAAO+B,KAAKi9C,IAAIhJ,aAWlBs8B,EAAM3tE,UAAUjE,OAAS,WACvB,OAAOqB,KAAKi9C,IAAI9I,cAelBo8B,EAAM3tE,UAAUwuE,uBAAyB,WACvC,IAAI3qD,EAASzmB,KAEb,GAAM,+BAAgCA,KAAKi9C,IAA3C,CAIA,IAAI81B,EAAQ,WACV/yE,KAAKmG,QAAQ,mBAAoB,CAAEq9D,cAAc,KAG/CwP,EAAU,WACR,2BAA4BhzE,KAAKi9C,KAA2C,uBAApCj9C,KAAKi9C,IAAIg2B,yBACnDjzE,KAAK2rB,IAAI,sBAAuBonD,GAEhC/yE,KAAKmG,QAAQ,mBAAoB,CAAEq9D,cAAc,MAIrDxjE,KAAK6F,GAAG,wBAAyBmtE,GACjChzE,KAAK6F,GAAG,WAAW,WACjB4gB,EAAOhH,IAAI,wBAAyBuzD,GACpCvsD,EAAOhH,IAAI,sBAAuBszD,QAatCxC,EAAM3tE,UAAUswE,mBAAqB,WACnC,GAA8C,oBAAnClzE,KAAKi9C,IAAIk2B,sBAAsC,CACxD,IAAI7nC,EAAY5uC,EAAO2uC,WAAa3uC,EAAO2uC,UAAUC,WAAa,GAGlE,GAAI,UAAUlkC,KAAKkkC,KAAe,uBAAuBlkC,KAAKkkC,GAC5D,OAAO,EAGX,OAAO,GAQTilC,EAAM3tE,UAAUwwE,gBAAkB,WAChC,IAAIngD,EAAQjzB,KAAKi9C,IAEbhqB,EAAMpT,QAAUoT,EAAMw/C,cAAgBx/C,EAAMogD,eAG9CrzE,KAAKi9C,IAAIrU,OAIT5oC,KAAK2f,YAAW,WACdsT,EAAMgU,QACNhU,EAAMkgD,0BACL,IAEHlgD,EAAMkgD,yBASV5C,EAAM3tE,UAAU0wE,eAAiB,WAC/BtzE,KAAKi9C,IAAIs2B,wBAkBXhD,EAAM3tE,UAAUqa,IAAM,SAAaq6C,GACjC,QAAa76D,IAAT66D,EACF,OAAOt3D,KAAKi9C,IAAIhgC,IAIlBjd,KAAKg6D,OAAO1C,IASdiZ,EAAM3tE,UAAU+xB,MAAQ,WACtB47C,EAAMiD,kBAAkBxzE,KAAKi9C,MAa/BszB,EAAM3tE,UAAUytE,WAAa,WAC3B,OAAIrwE,KAAKu1D,eACAv1D,KAAKu1D,eAAet4C,IAEtBjd,KAAKi9C,IAAIozB,YAWlBE,EAAM3tE,UAAUuuE,YAAc,SAAqBhiE,GACjDnP,KAAKi9C,IAAIyJ,WAAav3C,GAoBxBohE,EAAM3tE,UAAUihC,aAAe,SAAsBc,EAAMC,EAAO78B,GAChE,OAAK/H,KAAK+wD,yBAIH/wD,KAAKi9C,IAAIpZ,aAAac,EAAMC,EAAO78B,GAHjC2sD,EAAM9xD,UAAUihC,aAAa/gC,KAAK9C,KAAM2kC,EAAMC,EAAO78B,IAoChEwoE,EAAM3tE,UAAUuwD,sBAAwB,SAA+B30C,GACrE,IAAKxe,KAAK+wD,yBACR,OAAO2D,EAAM9xD,UAAUuwD,sBAAsBrwD,KAAK9C,KAAMwe,GAE1D,IAAI80C,EAAmBh6C,EAASC,cAAc,SAqB9C,OAnBIiF,EAAQmmB,OACV2uB,EAAiB3uB,KAAOnmB,EAAQmmB,MAE9BnmB,EAAQomB,QACV0uB,EAAiB1uB,MAAQpmB,EAAQomB,QAE/BpmB,EAAQzW,UAAYyW,EAAQ4vC,WAC9BkF,EAAiBlF,QAAU5vC,EAAQzW,UAAYyW,EAAQ4vC,SAErD5vC,EAAQ,aACV80C,EAAiB,WAAa90C,EAAQ,YAEpCA,EAAQ3U,KACVypD,EAAiBzpD,GAAK2U,EAAQ3U,IAE5B2U,EAAQvB,MACVq2C,EAAiBr2C,IAAMuB,EAAQvB,KAG1Bq2C,GAiBTid,EAAM3tE,UAAU8hC,mBAAqB,SAA4BlmB,EAAS60C,GACxE,IAAIC,EAAmBoB,EAAM9xD,UAAU8hC,mBAAmB5hC,KAAK9C,KAAMwe,EAAS60C,GAM9E,OAJIrzD,KAAK+wD,0BACP/wD,KAAK1D,KAAK+0C,YAAYiiB,GAGjBA,GAWTid,EAAM3tE,UAAUyvD,sBAAwB,SAA+BpnD,GAGrE,GAFAypD,EAAM9xD,UAAUyvD,sBAAsBvvD,KAAK9C,KAAMiL,GAE7CjL,KAAK+wD,yBAA0B,CACjC,IAAIjM,EAAS9kD,KAAKq1C,GAAG,SAEjB7yC,EAAIsiD,EAAO5lD,OAEf,MAAOsD,IACDyI,IAAU65C,EAAOtiD,IAAMyI,IAAU65C,EAAOtiD,GAAGyI,OAC7CjL,KAAK1D,KAAKs4C,YAAYkQ,EAAOtiD,MAiBrC+tE,EAAM3tE,UAAU4wD,wBAA0B,WACxC,GAAiD,oBAAtCxzD,KAAK1D,KAAKk3D,wBACnB,OAAOxzD,KAAK1D,KAAKk3D,0BAGnB,IAAIigB,EAAuB,GAa3B,MAXiD,qBAAtCzzE,KAAK1D,KAAKo3E,yBAAwF,qBAAtC1zE,KAAK1D,KAAKq3E,0BAC/EF,EAAqBG,mBAAqB5zE,KAAK1D,KAAKo3E,wBACpDD,EAAqBI,iBAAmB7zE,KAAK1D,KAAKq3E,yBAGhDj3E,EAAOo3E,aAAiD,oBAA3Bp3E,EAAOo3E,YAAYzqC,IAClDoqC,EAAqBM,aAAer3E,EAAOo3E,YAAYzqC,MAC9C3sC,EAAOo3E,aAAep3E,EAAOo3E,YAAYE,QAA+D,kBAA9Ct3E,EAAOo3E,YAAYE,OAAOC,kBAC7FR,EAAqBM,aAAer3E,EAAOgU,KAAK24B,MAAQ3sC,EAAOo3E,YAAYE,OAAOC,iBAG7ER,GAGFlD,EA1zBG,CA2zBVnxB,IAIF,GAAItS,KAAU,CASZyjC,GAAM2D,SAAW56D,EAASC,cAAc,SACxC,IAAItO,GAAQqO,EAASC,cAAc,SAEnCtO,GAAM05B,KAAO,WACb15B,GAAMmjD,QAAU,KAChBnjD,GAAM25B,MAAQ,UACd2rC,GAAM2D,SAAS7iC,YAAYpmC,IAU7BslE,GAAMxX,YAAc,WAElB,IACEwX,GAAM2D,SAASjQ,OAAS,GACxB,MAAO5sD,GACP,OAAO,EAGT,SAAUk5D,GAAM2D,WAAY3D,GAAM2D,SAAStgB,cAU7C2c,GAAM3c,YAAc,SAAUxqD,GAC5B,OAAOmnE,GAAM2D,SAAStgB,YAAYxqD,IAWpCmnE,GAAM1c,cAAgB,SAAUC,EAAQt1C,GACtC,OAAO+xD,GAAM3c,YAAYE,EAAO1qD,OAYlCmnE,GAAM4D,iBAAmB,WAEvB,IACE,IAAIlQ,EAASsM,GAAM2D,SAASjQ,OAG5B,OADAsM,GAAM2D,SAASjQ,OAASA,EAAS,EAAI,GAC9BA,IAAWsM,GAAM2D,SAASjQ,OACjC,MAAO5sD,GACP,OAAO,IAaXk5D,GAAM6D,cAAgB,WACpB,IACE,IAAIlQ,EAAQqM,GAAM2D,SAAShQ,MAU3B,OANAqM,GAAM2D,SAAShQ,OAASA,EACpBqM,GAAM2D,SAAShQ,MACjBtzB,GAAa2/B,GAAM2D,SAAU,QAAS,SAEtC5hC,GAAgBi+B,GAAM2D,SAAU,QAAS,SAEpChQ,IAAUqM,GAAM2D,SAAShQ,MAChC,MAAO7sD,GACP,OAAO,IAWXk5D,GAAM8D,uBAAyB,WAG7B,GAAIroC,GAAcQ,GAAaC,EAAiB,GAC9C,OAAO,EAGT,IACE,IAAI09B,EAAeoG,GAAM2D,SAAS/J,aAGlC,OADAoG,GAAM2D,SAAS/J,aAAeA,EAAe,EAAI,GAC1CA,IAAiBoG,GAAM2D,SAAS/J,aACvC,MAAO9yD,GACP,OAAO,IAYXk5D,GAAM+D,sBAAwB,WAC5B,GAAI5nC,EACF,OAAO,EAIT,IACE,IAAInnC,EAAO,aAEX1J,OAAOC,eAAewd,EAASC,cAAc,SAAU,MAAO,CAAEzP,IAAKvE,EAAMiiB,IAAKjiB,IAChF1J,OAAOC,eAAewd,EAASC,cAAc,SAAU,MAAO,CAAEzP,IAAKvE,EAAMiiB,IAAKjiB,IAChF1J,OAAOC,eAAewd,EAASC,cAAc,SAAU,YAAa,CAAEzP,IAAKvE,EAAMiiB,IAAKjiB,IACtF1J,OAAOC,eAAewd,EAASC,cAAc,SAAU,YAAa,CAAEzP,IAAKvE,EAAMiiB,IAAKjiB,IACtF,MAAO8R,GACP,OAAO,EAGT,OAAO,GAUTk5D,GAAMgE,yBAA2B,WAC/B,OAAO3nC,GAAiBd,GAAUU,GAUpC+jC,GAAMiE,0BAA4B,WAChC,SAAUjE,GAAM2D,WAAY3D,GAAM2D,SAASO,cAU7ClE,GAAMmE,0BAA4B,WAChC,SAAUnE,GAAM2D,WAAY3D,GAAM2D,SAASlK,cAS7CuG,GAAM93B,OAAS,CAAC,YAAa,UAAW,QAAS,QAAS,UAAW,UAAW,iBAAkB,aAAc,UAAW,iBAAkB,UAAW,UAAW,UAAW,SAAU,QAAS,iBAAkB,aAAc,WAAY,OAAQ,QAAS,aAAc,SAAU,gBAQtR83B,GAAM3tE,UAAUwxD,sBAAwBmc,GAAM4D,mBAQ9C5D,GAAM3tE,UAAUyxD,oBAAsBkc,GAAM6D,gBAW5C7D,GAAM3tE,UAAU2xD,qBAAuBgc,GAAM8D,yBAQ7C9D,GAAM3tE,UAAU4xD,kBAAoB+b,GAAM+D,wBAU1C/D,GAAM3tE,UAAUsvE,yBAA2BpmC,EAW3CykC,GAAM3tE,UAAU0xD,0BAA2B,EAS3Cic,GAAM3tE,UAAU6tD,wBAAyB,EAQzC8f,GAAM3tE,UAAU+tD,0BAA2B,EAQ3C4f,GAAM3tE,UAAUmuD,yBAA2Bwf,GAAMgE,2BAQjDhE,GAAM3tE,UAAU+xE,0BAA4BpE,GAAMiE,4BAQlDjE,GAAM3tE,UAAUgyE,0BAA4BrE,GAAMmE,4BAGlD,IAAI9gB,GAAc2c,GAAM2D,UAAY3D,GAAM2D,SAASzvE,YAAY7B,UAAUgxD,YACrEihB,GAAY,4CACZC,GAAQ,eAEZvE,GAAMwE,iBAAmB,WAInB9oC,GAAmB,IAAQK,IAAeE,EAC5C+jC,GAAM2D,SAASzvE,YAAY7B,UAAUgxD,YAAc,SAAUxqD,GAC3D,OAAIA,GAAQyrE,GAAUztE,KAAKgC,GAClB,QAEFwqD,GAAY9wD,KAAK9C,KAAMoJ,IAIvBgjC,IACTmkC,GAAM2D,SAASzvE,YAAY7B,UAAUgxD,YAAc,SAAUxqD,GAC3D,OAAIA,GAAQ0rE,GAAM1tE,KAAKgC,GACd,QAEFwqD,GAAY9wD,KAAK9C,KAAMoJ,MAKpCmnE,GAAMyE,mBAAqB,WACzB,IAAIC,EAAI1E,GAAM2D,SAASzvE,YAAY7B,UAAUgxD,YAG7C,OADA2c,GAAM2D,SAASzvE,YAAY7B,UAAUgxD,YAAcA,GAC5CqhB,GAIT1E,GAAMwE,mBAENxE,GAAMc,oBAAsB,SAAU/0E,GACpC,GAAKA,EAAL,CAIIA,EAAG0hC,YACL1hC,EAAG0hC,WAAW4W,YAAYt4C,GAI5B,MAAOA,EAAGu0E,gBACRv0E,EAAGs4C,YAAYt4C,EAAG60C,YAKpB70C,EAAGg2C,gBAAgB,OAII,oBAAZh2C,EAAGoqB,MAEZ,WACE,IACEpqB,EAAGoqB,OACH,MAAOrP,KAHX,KAUJk5D,GAAMiD,kBAAoB,SAAUl3E,GAClC,GAAKA,EAAL,CAIA,IAAI8d,EAAU9d,EAAG2rD,iBAAiB,UAC9BzlD,EAAI4X,EAAQlb,OAEhB,MAAOsD,IACLlG,EAAGs4C,YAAYx6B,EAAQ5X,IAKzBlG,EAAGg2C,gBAAgB,OAEI,oBAAZh2C,EAAGoqB,MAEZ,WACE,IACEpqB,EAAGoqB,OACH,MAAOrP,KAHX,KAcJ,CAaA,QAgBA,eAcA,WAcA,WAiBA,OAeA,eAAetM,SAAQ,SAAUwkC,GAC/BghC,GAAM3tE,UAAU2sC,GAAQ,WACtB,OAAOvvC,KAAKi9C,IAAI1N,IAASvvC,KAAKi9C,IAAI97C,aAAaouC,OAQnD,CAYA,QAaA,eAaA,WAgBA,OAcA,eAAexkC,SAAQ,SAAUwkC,GAC/BghC,GAAM3tE,UAAU,MAAQ45C,GAAYjN,IAAS,SAAU9G,GACrDzoC,KAAKi9C,IAAI1N,GAAQ9G,EAEbA,EACFzoC,KAAKi9C,IAAIrM,aAAarB,EAAMA,GAE5BvvC,KAAKi9C,IAAI3K,gBAAgB/C,OAU/B,CAWA,SAYA,cAaA,WAaA,SAaA,SAmBA,UAcA,QAcA,UAaA,WAcA,QAeA,eAkBA,sBAaA,SAiBA,eAmBA,aAaA,aAaA,eAAexkC,SAAQ,SAAUwkC,GAC/BghC,GAAM3tE,UAAU2sC,GAAQ,WACtB,OAAOvvC,KAAKi9C,IAAI1N,OAQpB,CAYA,SAYA,MAaA,SAmBA,UAeA,eAkBA,uBAAuBxkC,SAAQ,SAAUwkC,GACvCghC,GAAM3tE,UAAU,MAAQ45C,GAAYjN,IAAS,SAAU9G,GACrDzoC,KAAKi9C,IAAI1N,GAAQ9G,MAOrB,CAQA,QASA,OASA,QAAQ19B,SAAQ,SAAUwkC,GACxBghC,GAAM3tE,UAAU2sC,GAAQ,WACtB,OAAOvvC,KAAKi9C,IAAI1N,SAIpB6P,GAAKqV,mBAAmB8b,IAWxBA,GAAMlb,oBAAsB,GAW5Bkb,GAAMlb,oBAAoBzB,YAAc,SAAUxqD,GAGhD,IACE,OAAOmnE,GAAM2D,SAAStgB,YAAYxqD,GAClC,MAAOiO,GACP,MAAO,KAgBXk5D,GAAMlb,oBAAoBN,gBAAkB,SAAUryD,EAAQ8b,GAG5D,GAAI9b,EAAO0G,KACT,OAAOmnE,GAAMlb,oBAAoBzB,YAAYlxD,EAAO0G,MAG/C,GAAI1G,EAAOua,IAAK,CACrB,IAAIk7C,EAAM5L,GAAiB7pD,EAAOua,KAElC,OAAOszD,GAAMlb,oBAAoBzB,YAAY,SAAWuE,GAG1D,MAAO,IAeToY,GAAMlb,oBAAoBG,aAAe,SAAU9yD,EAAQ+b,EAAMD,GAC/DC,EAAKu7C,OAAOt3D,EAAOua,MAMrBszD,GAAMlb,oBAAoBviD,QAAU,aAGpCy9D,GAAM5b,sBAAsB4b,GAAMlb,qBAElCjW,GAAK2U,aAAa,QAASwc,IAE3B,IAAI2E,GAAoB1nC,EAA2B,CAAC,8KAAgL,CAAC,+KAYjO2nC,GAAwB,CAe5B,WAgBA,QAgBA,UAgBA,UAeA,UAgBA,iBAgBA,aAgBA,aAgBA,SAgBA,eAgBA,mBAKIC,GAAoB,CACtBC,QAAS,UACTC,eAAgB,iBAChBC,QAAS,UACTC,OAAQ,UAcN3yB,GAAS,SAAU2C,GAerB,SAAS3C,EAAO58C,EAAKuY,EAASs+B,GA4B5B,GA3BAzP,EAAertC,KAAM6iD,GAGrB58C,EAAI4D,GAAK5D,EAAI4D,IAAM2U,EAAQ3U,IAAM,aAAe2rC,KAOhDh3B,EAAUlc,EAAOugD,EAAO4yB,eAAexvE,GAAMuY,GAI7CA,EAAQ6+B,cAAe,EAGvB7+B,EAAQgyB,UAAW,EAGnBhyB,EAAQq9B,SAAU,EAIlBr9B,EAAQ8+B,qBAAsB,GAGzB9+B,EAAQzW,SACX,GAA2B,oBAAhB9B,EAAIyvE,QAAwB,CACrC,IAAIA,EAAUzvE,EAAIyvE,QAAQ,UAEtBA,GAAWA,EAAQhjC,eACrBl0B,EAAQzW,SAAW2tE,EAAQhjC,aAAa,aAErC,CACL,IAAInB,EAAUtrC,EAEd,MAAOsrC,GAAgC,IAArBA,EAAQtB,SAAgB,CACxC,GAAIsC,GAAchB,GAAS1uC,eAAe,QAAS,CACjD2b,EAAQzW,SAAWwpC,EAAQmB,aAAa,QACxC,MAEFnB,EAAUA,EAAQvT,YAQxB,IAAIl5B,EAAQyoC,EAA0BvtC,KAAMwlD,EAAW1iD,KAAK9C,KAAM,KAAMwe,EAASs+B,IAmBjF,GAjBAh4C,EAAM6wE,mBAAoB,EAI1B7wE,EAAM8wE,iBAAmB,GAGzB9wE,EAAM46C,UAAW,EAGjB56C,EAAM0rD,aAAc,EAGpB1rD,EAAM+wE,aAAc,GAIf/wE,EAAMi4C,WAAaj4C,EAAMi4C,SAAS8b,YAAc/zD,EAAMi4C,SAAS8b,UAAU35D,OAC5E,MAAM,IAAIqB,MAAM,2HAalB,GATAuE,EAAMmB,IAAMA,EAGZnB,EAAMstE,cAAgBnsE,GAAOssC,GAActsC,GAG3CnB,EAAMiD,SAASjD,EAAMi4C,SAASh1C,UAG1ByW,EAAQm/B,UAAW,CAErB,IAAIm4B,EAAmB,GAEvBj6E,OAAO60C,oBAAoBlyB,EAAQm/B,WAAW5yC,SAAQ,SAAUgrE,GAC9DD,EAAiBC,EAAQx8C,eAAiB/a,EAAQm/B,UAAUo4B,MAE9DjxE,EAAMkxE,WAAaF,OAEnBhxE,EAAMkxE,WAAanzB,EAAOjgD,UAAUm6C,SAASY,UAI/C74C,EAAMwzD,OAAS,GAGfxzD,EAAMmxE,QAAUz3D,EAAQu7C,QAAU,GAGlCj1D,EAAMoxE,YAAc13D,EAAQkoC,SAG5B5hD,EAAMwzD,OAAOwM,WAAa,EAK1B7+D,EAAIygD,UAAW,EACfzgD,EAAIqsC,gBAAgB,YAGhBrsC,EAAI9E,aAAa,YACnB2D,EAAMi4C,SAASrU,UAAW,EAI1B5jC,EAAM4jC,SAAS5jC,EAAMi4C,SAASrU,UAShC5jC,EAAMqxE,YAAa,EAEnBrxE,EAAMm4C,IAAMn4C,EAAM0rC,WAGlB1rC,EAAMwzD,OAAO8d,iBAAmBtxE,EAAMuxE,sBAGtCx6B,GAAQ/2C,EAAO,CAAEg3C,YAAa,QAM9B,IAAIw6B,EAAoB5yD,GAAa5e,EAAMi4C,UAG3C,GAAIv+B,EAAQ+3D,QAAS,CACnB,IAAIA,EAAU/3D,EAAQ+3D,QAEtB16E,OAAO0Q,KAAKgqE,GAASxrE,SAAQ,SAAUgrE,GACrC,GAA6B,oBAAlB/1E,KAAK+1E,GAGd,MAAM,IAAIx1E,MAAM,WAAaw1E,EAAU,oBAFvC/1E,KAAK+1E,GAASQ,EAAQR,MAIvBjxE,GAGLA,EAAMi4C,SAASkC,cAAgBq3B,EAE/BxxE,EAAM0xE,YAAc,GAEpB1xE,EAAMu4C,eAGNv4C,EAAMo4D,QAAuC,UAA/Bj3D,EAAI60C,SAASvhB,eAIvBz0B,EAAM4hD,WACR5hD,EAAM6sC,SAAS,wBAEf7sC,EAAM6sC,SAAS,yBAIjB7sC,EAAMm4C,IAAIrM,aAAa,OAAQ,UAC3B9rC,EAAMo4D,UACRp4D,EAAMm4C,IAAIrM,aAAa,aAAc9rC,EAAM04C,SAAS,iBAEpD14C,EAAMm4C,IAAIrM,aAAa,aAAc9rC,EAAM04C,SAAS,iBAGlD14C,EAAMo4D,WACRp4D,EAAM6sC,SAAS,aAGb7sC,EAAM2xE,qBACR3xE,EAAM6sC,SAAS,eAUZ7F,GACHhnC,EAAM6sC,SAAS,oBAIjBkR,EAAOC,QAAQh+C,EAAMk4C,KAAOl4C,EAG5B,IAAI4xE,EAAevrC,EAAQhb,MAAM,KAAK,GAgBtC,OAdArrB,EAAM6sC,SAAS,QAAU+kC,GAIzB5xE,EAAM6xE,YAAW,GACjB7xE,EAAM88C,qBAEN98C,EAAM6mB,IAAI,OAAQ7mB,EAAM8xE,wBACxB9xE,EAAMe,GAAG,mBAAoBf,EAAM+xE,yBACnC/xE,EAAMe,GAAG,aAAcf,EAAMgyE,mBAE7BhyE,EAAMiyE,cAAe,EACrBjyE,EAAMkyE,sBAAuB,EAC7BlyE,EAAMmyE,iBAAmB,KAClBnyE,EAw2GT,OAplHAwoC,EAASuV,EAAQ2C,GAyPjB3C,EAAOjgD,UAAUkQ,QAAU,WAOzB9S,KAAKmG,QAAQ,WAEbnG,KAAKyf,IAAI,WAELzf,KAAKk3E,UAAYl3E,KAAKk3E,SAASl5C,aACjCh+B,KAAKk3E,SAASl5C,WAAW4W,YAAY50C,KAAKk3E,UAC1Cl3E,KAAKk3E,SAAW,MAIlBr0B,EAAOC,QAAQ9iD,KAAKg9C,KAAO,KAEvBh9C,KAAKiG,KAAOjG,KAAKiG,IAAIuzC,SACvBx5C,KAAKiG,IAAIuzC,OAAS,MAGhBx5C,KAAKi9C,KAAOj9C,KAAKi9C,IAAIzD,SACvBx5C,KAAKi9C,IAAIzD,OAAS,MAGhBx5C,KAAKG,QACPH,KAAKG,MAAM2S,UACX9S,KAAK21E,mBAAoB,EACzB31E,KAAKi2E,QAAU,IAGbj2E,KAAKm3E,kBACPn3E,KAAKm3E,gBAAkB,MAGrBn3E,KAAKiG,MACPjG,KAAKiG,IAAM,MAGb6wD,GAAoB92D,MAGpBwlD,EAAW5iD,UAAUkQ,QAAQhQ,KAAK9C,OAWpC6iD,EAAOjgD,UAAU4tC,SAAW,WAC1B,IAAIvqC,EAAMjG,KAAKiG,IACX3J,OAAK,EACL21E,EAAiBjyE,KAAKm3E,gBAAkBlxE,EAAI+3B,YAAc/3B,EAAI+3B,WAAW78B,cAAgB8E,EAAI+3B,WAAW78B,aAAa,mBACrHi2E,EAA8C,aAAnCp3E,KAAKiG,IAAIwqC,QAAQlX,cAE5B04C,EACF31E,EAAK0D,KAAKi9C,IAAMh3C,EAAI+3B,WACVo5C,IACV96E,EAAK0D,KAAKi9C,IAAMuI,EAAW5iD,UAAU4tC,SAAS1tC,KAAK9C,KAAM,QAK3D,IAAIkN,EAAQqlC,GAActsC,GAE1B,GAAImxE,EAAU,CACZ96E,EAAK0D,KAAKi9C,IAAMh3C,EAChBA,EAAMjG,KAAKiG,IAAMqT,EAASC,cAAc,SACxC,MAAOjd,EAAG4hD,SAASh/C,OACjB+G,EAAIorC,YAAY/0C,EAAG60C,YAGhBG,GAASh1C,EAAI,aAChBq1C,GAASr1C,EAAI,YAGfA,EAAG+0C,YAAYprC,GAEfgsE,EAAiBjyE,KAAKm3E,gBAAkB76E,EAKxC,CAAC,WAAY,WAAY,cAAe,eAAgB,sBAAuB,OAAQ,QAAS,eAAgB,MAAO,UAAUyO,SAAQ,SAAUwkC,GACzH,qBAAbjzC,EAAGizC,KACZtpC,EAAIspC,GAAQjzC,EAAGizC,OAoDrB,GA9CAtpC,EAAI2qC,aAAa,WAAY,MAKzBpI,GACFviC,EAAI2qC,aAAa,OAAQ,eAI3B3qC,EAAIqsC,gBAAgB,SACpBrsC,EAAIqsC,gBAAgB,UAEpBz2C,OAAO60C,oBAAoBxjC,GAAOnC,SAAQ,SAAUynE,GAGrC,UAATA,GACFl2E,EAAGyzC,WAAa,IAAM7iC,EAAMslE,GAExB4E,IACFnxE,EAAI8pC,WAAa,IAAM7iC,EAAMslE,MAG/Bl2E,EAAGs0C,aAAa4hC,EAAMtlE,EAAMslE,IAExB4E,GACFnxE,EAAI2qC,aAAa4hC,EAAMtlE,EAAMslE,QAQnCvsE,EAAIqsE,SAAWrsE,EAAI4D,GACnB5D,EAAI4D,IAAM,aACV5D,EAAI8pC,UAAY,WAGhB9pC,EAAIuzC,OAASl9C,EAAGk9C,OAASx5C,KAEzBA,KAAK2xC,SAAS,eAK0B,IAApCj1C,EAAO26E,yBAAmC,CAC5Cr3E,KAAKk3E,SAAWv9B,GAAmB,yBACnC,IAAI29B,EAAkBliC,GAAE,wBACpBmiC,EAAOniC,GAAE,QAEbmiC,EAAKnmC,aAAapxC,KAAKk3E,SAAUI,EAAkBA,EAAgBlwB,YAAcmwB,EAAKpmC,YAIxFnxC,KAAK/B,MAAM+B,KAAK+8C,SAAS9+C,OACzB+B,KAAKrB,OAAOqB,KAAK+8C,SAASp+C,QAC1BqB,KAAKw3E,MAAMx3E,KAAK+8C,SAASy6B,OACzBx3E,KAAKy3E,YAAYz3E,KAAK+8C,SAAS06B,aAK/B,IAFA,IAAIC,EAAQzxE,EAAI6yC,qBAAqB,KAE5Bt2C,EAAI,EAAGA,EAAIk1E,EAAMx4E,OAAQsD,IAAK,CACrC,IAAIm1E,EAASD,EAAMhjE,KAAKlS,GAExBmvC,GAASgmC,EAAQ,cACjBA,EAAO/mC,aAAa,SAAU,UA0BhC,OArBA3qC,EAAIwqE,kBAAoBxqE,EAAIwsE,aAGxBxsE,EAAI+3B,aAAei0C,GACrBhsE,EAAI+3B,WAAWoT,aAAa90C,EAAI2J,GAQlCgrC,GAAUhrC,EAAK3J,GACf0D,KAAKk9C,UAAU3O,QAAQtoC,GAIvBjG,KAAKi9C,IAAIrM,aAAa,OAAQ5wC,KAAK8pE,WAEnC9pE,KAAKi9C,IAAM3gD,EAEJA,GAeTumD,EAAOjgD,UAAU3E,MAAQ,SAAelC,GACtC,OAAOiE,KAAKmgD,UAAU,QAASpkD,IAejC8mD,EAAOjgD,UAAUjE,OAAS,SAAgB5C,GACxC,OAAOiE,KAAKmgD,UAAU,SAAUpkD,IAmBlC8mD,EAAOjgD,UAAUu9C,UAAY,SAAmBy3B,EAAY77E,GAC1D,IAAI87E,EAAgBD,EAAa,IAEjC,QAAcn7E,IAAVV,EACF,OAAOiE,KAAK63E,IAAkB,EAGhC,GAAc,KAAV97E,EAIF,OAFAiE,KAAK63E,QAAiBp7E,OACtBuD,KAAK83E,iBAIP,IAAIC,EAAYhoD,WAAWh0B,GAEvBqO,MAAM2tE,GACR1oC,EAAMlqB,MAAM,mBAAqBppB,EAAQ,sBAAwB67E,IAInE53E,KAAK63E,GAAiBE,EACtB/3E,KAAK83E,mBAiBPj1B,EAAOjgD,UAAU40E,MAAQ,SAAevW,GACtC,QAAaxkE,IAATwkE,EACF,QAASjhE,KAAKg4E,OAGhBh4E,KAAKg4E,SAAW/W,EAEZA,EACFjhE,KAAK2xC,SAAS,aAEd3xC,KAAK8xC,YAAY,aAGnB9xC,KAAK83E,kBAyBPj1B,EAAOjgD,UAAU60E,YAAc,SAAqBQ,GAClD,QAAcx7E,IAAVw7E,EACF,OAAOj4E,KAAKk4E,aAId,IAAK,aAAa9wE,KAAK6wE,GACrB,MAAM,IAAI13E,MAAM,kGAElBP,KAAKk4E,aAAeD,EAIpBj4E,KAAKw3E,OAAM,GAEXx3E,KAAK83E,kBAWPj1B,EAAOjgD,UAAUk1E,eAAiB,WAChC,IAAwC,IAApCp7E,EAAO26E,yBAAX,CAiBA,IAAIp5E,OAAQ,EACRU,OAAS,EACT84E,OAAc,EACdU,OAAU,EAKZV,OAFwBh7E,IAAtBuD,KAAKk4E,cAAoD,SAAtBl4E,KAAKk4E,aAE5Bl4E,KAAKk4E,aACVl4E,KAAKo4E,aAAe,EAEfp4E,KAAKo4E,aAAe,IAAMp4E,KAAKq4E,cAG/B,OAIhB,IAAIC,EAAab,EAAYtnD,MAAM,KAC/BooD,EAAkBD,EAAW,GAAKA,EAAW,GAI/Cr6E,OAFkBxB,IAAhBuD,KAAKw4E,OAECx4E,KAAKw4E,YACa/7E,IAAjBuD,KAAKy4E,QAENz4E,KAAKy4E,QAAUF,EAGfv4E,KAAKo4E,cAAgB,IAK7Bz5E,OAFmBlC,IAAjBuD,KAAKy4E,QAEEz4E,KAAKy4E,QAGLx6E,EAAQs6E,EAKjBJ,EADE,aAAa/wE,KAAKpH,KAAK6J,MACf,cAAgB7J,KAAK6J,KAErB7J,KAAK6J,KAAO,cAIxB7J,KAAK2xC,SAASwmC,GAEdv+B,GAAe55C,KAAKk3E,SAAU,YAAciB,EAAU,sBAAwBl6E,EAAQ,wBAA0BU,EAAS,0BAA4Bw5E,EAAU,sCAA0D,IAAlBI,EAAwB,yBAnE/N,CACE,IAAI7+C,EAAgC,kBAAhB15B,KAAKw4E,OAAsBx4E,KAAKw4E,OAASx4E,KAAK+8C,SAAS9+C,MACvEy6E,EAAkC,kBAAjB14E,KAAKy4E,QAAuBz4E,KAAKy4E,QAAUz4E,KAAK+8C,SAASp+C,OAC1Eg6E,EAAS34E,KAAKG,OAASH,KAAKG,MAAM7D,KAElCq8E,IACEj/C,GAAU,IACZi/C,EAAO16E,MAAQy7B,GAEbg/C,GAAW,IACbC,EAAOh6E,OAAS+5E,MA0ExB71B,EAAOjgD,UAAUo2D,UAAY,SAAmBF,EAAUp2D,GACxD,IAAIijB,EAAS3lB,KAGTA,KAAKG,OACPH,KAAK44E,cAGP,IAAIC,EAAgBr8B,GAAYsc,GAC5BggB,EAAgBhgB,EAASrc,OAAO,GAAGljB,cAAgBu/B,EAAS97D,MAAM,GAGhD,UAAlB67E,GAA6B74E,KAAKiG,MACpCm5C,GAAK8U,QAAQ,SAASmd,oBAAoBrxE,KAAKiG,KAC/CjG,KAAKiG,IAAIuzC,OAAS,KAClBx5C,KAAKiG,IAAM,MAGbjG,KAAK+4E,UAAYF,EAGjB74E,KAAK0/C,UAAW,EAIhB,IAAIhX,EAAsC,kBAApB1oC,KAAK0oC,YAAkC1oC,KAAK0oC,WAG9DswC,EAAc,CAChBt2E,OAAQA,EACRgmC,SAAUA,EACV,uBAA0B1oC,KAAK+8C,SAASoU,uBACxC,SAAYnxD,KAAK6J,KACjB,OAAU7J,KAAK6J,KAAO,IAAMgvE,EAAgB,OAC5C,YAAe74E,KAAK+8C,SAAS2W,YAC7B,QAAW1zD,KAAK+8C,SAASrX,QACzB,KAAQ1lC,KAAK+8C,SAASk8B,KACtB,MAASj5E,KAAK+8C,SAASmnB,MACvB,OAAUlkE,KAAK+5D,SACf,SAAY/5D,KAAK+H,WACjB,eAAkB/H,KAAKm3E,kBAAmB,EAC1C,SAAUn3E,KAAK+8C,SAAS,UACxB,oBAAuB/8C,KAAK+8C,SAASm8B,sBACrC,gBAAmBl5E,KAAK+8C,SAAS4zB,iBAGnCtgB,GAAIE,MAAMxlD,SAAQ,SAAUgrE,GAC1B,IAAI9yE,EAAQotD,GAAI0lB,GAEhBiD,EAAY/1E,EAAM+sD,YAAcrqC,EAAO1iB,EAAMgtD,gBAG/C3tD,EAAO02E,EAAah5E,KAAK+8C,SAAS87B,IAClCv2E,EAAO02E,EAAah5E,KAAK+8C,SAAS+7B,IAClCx2E,EAAO02E,EAAah5E,KAAK+8C,SAAS+b,EAASv/B,gBAEvCv5B,KAAKiG,MACP+yE,EAAY/yE,IAAMjG,KAAKiG,KAGrBvD,GAAUA,EAAOua,MAAQjd,KAAKs4D,OAAOr7C,KAAOjd,KAAKs4D,OAAO53D,YAAc,IACxEs4E,EAAY3tE,UAAYrL,KAAKs4D,OAAO53D,aAItC,IAAIy4E,EAAY/5B,GAAK8U,QAAQ4E,GAE7B,IAAKqgB,EACH,MAAM,IAAI54E,MAAM,kBAAqBs4E,EAAgB,cAAkBA,EAAgB,wDAGzF74E,KAAKG,MAAQ,IAAIg5E,EAAUH,GAG3Bh5E,KAAKG,MAAM28C,MAAM17C,GAAKpB,KAAMA,KAAKo5E,mBAAmB,GAEpDh0B,GAAmBF,iBAAiBllD,KAAKq5E,iBAAmB,GAAIr5E,KAAKG,OAGrEg1E,GAAsBpqE,SAAQ,SAAU2L,GACtCiP,EAAO9f,GAAG8f,EAAOxlB,MAAOuW,EAAOiP,EAAO,aAAe62B,GAAY9lC,GAAS,SAG5E7a,OAAO0Q,KAAK6oE,IAAmBrqE,SAAQ,SAAU2L,GAC/CiP,EAAO9f,GAAG8f,EAAOxlB,MAAOuW,GAAO,SAAU4iE,GACH,IAAhC3zD,EAAOxlB,MAAMgqE,gBAAwBxkD,EAAOxlB,MAAMyf,UACpD+F,EAAOiwD,iBAAiBttE,KAAK,CAC3B+tC,SAAU1wB,EAAO,aAAeyvD,GAAkB1+D,GAAS,KAAKtV,KAAKukB,GACrEjP,MAAO4iE,IAIX3zD,EAAO,aAAeyvD,GAAkB1+D,GAAS,KAAK4iE,SAI1Dt5E,KAAK6F,GAAG7F,KAAKG,MAAO,YAAaH,KAAKu5E,sBACtCv5E,KAAK6F,GAAG7F,KAAKG,MAAO,YAAaH,KAAKw5E,sBACtCx5E,KAAK6F,GAAG7F,KAAKG,MAAO,UAAWH,KAAKy5E,oBACpCz5E,KAAK6F,GAAG7F,KAAKG,MAAO,QAASH,KAAK05E,kBAClC15E,KAAK6F,GAAG7F,KAAKG,MAAO,UAAWH,KAAK25E,oBACpC35E,KAAK6F,GAAG7F,KAAKG,MAAO,OAAQH,KAAK45E,iBACjC55E,KAAK6F,GAAG7F,KAAKG,MAAO,YAAaH,KAAK65E,sBACtC75E,KAAK6F,GAAG7F,KAAKG,MAAO,QAASH,KAAK85E,kBAClC95E,KAAK6F,GAAG7F,KAAKG,MAAO,iBAAkBH,KAAK+5E,2BAC3C/5E,KAAK6F,GAAG7F,KAAKG,MAAO,mBAAoBH,KAAKg6E,6BAC7Ch6E,KAAK6F,GAAG7F,KAAKG,MAAO,QAASH,KAAKi6E,kBAClCj6E,KAAK6F,GAAG7F,KAAKG,MAAO,iBAAkBH,KAAK83E,gBAC3C93E,KAAK6F,GAAG7F,KAAKG,MAAO,eAAgBH,KAAKk6E,yBACzCl6E,KAAK6F,GAAG7F,KAAKG,MAAO,WAAYH,KAAKm6E,qBACrCn6E,KAAK6F,GAAG7F,KAAKG,MAAO,aAAcH,KAAKo6E,uBAEvCp6E,KAAKq6E,oBAAoBr6E,KAAKs6E,SAAS,aAEnCt6E,KAAK0mD,aAAe1mD,KAAKq6E,uBAC3Br6E,KAAKu6E,4BAKHv6E,KAAKG,MAAM7D,KAAK0hC,aAAeh+B,KAAK1D,MAA2B,UAAlBu8E,GAA8B74E,KAAKiG,KAClFgrC,GAAUjxC,KAAKG,MAAM7D,KAAM0D,KAAK1D,MAI9B0D,KAAKiG,MACPjG,KAAKiG,IAAIuzC,OAAS,KAClBx5C,KAAKiG,IAAM,OAWf48C,EAAOjgD,UAAUg2E,YAAc,WAC7B,IAAIzyD,EAASnmB,KAGbqwD,GAAIE,MAAMxlD,SAAQ,SAAUgrE,GAC1B,IAAI9yE,EAAQotD,GAAI0lB,GAEhB5vD,EAAOljB,EAAMgtD,aAAe9pC,EAAOljB,EAAM+sD,iBAE3ChwD,KAAKq5E,gBAAkBj0B,GAAmBT,iBAAiB3kD,KAAKG,OAEhEH,KAAK0/C,UAAW,EAEhB1/C,KAAKG,MAAM2S,UAEX9S,KAAKG,OAAQ,EAETH,KAAK21E,oBACP31E,KAAKi2E,QAAU,GACfj2E,KAAKmG,QAAQ,iBAGfnG,KAAK21E,mBAAoB,GAgB3B9yB,EAAOjgD,UAAU6b,KAAO,SAAc+7D,GAKpC,YAJe/9E,IAAX+9E,GACFnrC,EAAMrlC,KAAKghC,EAAKkqC,KAGXl1E,KAAKG,OA0Bd0iD,EAAOjgD,UAAU23E,0BAA4B,WAE3Cv6E,KAAKy6E,+BAMLz6E,KAAK6F,GAAG7F,KAAKG,MAAO,YAAaH,KAAK06E,kBAKtC16E,KAAK6F,GAAG7F,KAAKG,MAAO,aAAcH,KAAK26E,uBACvC36E,KAAK6F,GAAG7F,KAAKG,MAAO,YAAaH,KAAK46E,sBACtC56E,KAAK6F,GAAG7F,KAAKG,MAAO,WAAYH,KAAK66E,qBAIrC76E,KAAK6F,GAAG7F,KAAKG,MAAO,MAAOH,KAAK86E,iBAWlCj4B,EAAOjgD,UAAU63E,6BAA+B,WAG9Cz6E,KAAKyf,IAAIzf,KAAKG,MAAO,MAAOH,KAAK86E,gBACjC96E,KAAKyf,IAAIzf,KAAKG,MAAO,aAAcH,KAAK26E,uBACxC36E,KAAKyf,IAAIzf,KAAKG,MAAO,YAAaH,KAAK46E,sBACvC56E,KAAKyf,IAAIzf,KAAKG,MAAO,WAAYH,KAAK66E,qBACtC76E,KAAKyf,IAAIzf,KAAKG,MAAO,YAAaH,KAAK06E,mBAUzC73B,EAAOjgD,UAAUw2E,iBAAmB,WAkBlC,GAjBAp5E,KAAK4/C,eAGD5/C,KAAKs4D,OAAO2L,QACdjkE,KAAK+6E,UAAU,YAAa/6E,KAAKs4D,OAAO2L,QAI1CjkE,KAAKk6E,0BAGLl6E,KAAK+5E,6BAMA/5E,KAAKid,OAASjd,KAAKqwE,eAAiBrwE,KAAKiG,KAAOjG,KAAK+8C,SAASrU,UAAY1oC,KAAK6f,SAClF,WAES7f,KAAKiG,IAAI8zD,OAChB,MAAO1iD,GACPg4B,EAAM,8CAA+Ch4B,KAiB3DwrC,EAAOjgD,UAAU22E,qBAAuB,WAGtCv5E,KAAK8xC,YAAY,aACjB9xC,KAAK8xC,YAAY,eAGjB9xC,KAAKmlB,MAAM,MAKNnlB,KAAK6f,UAWR7f,KAAKg7E,YAAW,GAChBh7E,KAAKmG,QAAQ,eALbnG,KAAKmG,QAAQ,aACbnG,KAAKmG,QAAQ,cASfnG,KAAKi7E,gBAAgBj7E,KAAK0oC,aAW5Bma,EAAOjgD,UAAUq4E,gBAAkB,SAAyB7xE,GAC1D,IAAIqd,EAASzmB,KAEb,GAAKA,KAAKG,OAAyB,kBAATiJ,EAA1B,CAIA,IAAI86D,EAAQ,WACV,IAAIgX,EAAkBz0D,EAAOy9C,QAE7Bz9C,EAAOy9C,OAAM,GAEb,IAAIv7B,EAAcliB,EAAOmiB,OAEzB,GAAKD,GAAgBA,EAAY5yB,MAAS4yB,EAAY,SAItD,OAAOA,EAAY,UAAS,SAAUtxB,GAEpCoP,EAAOy9C,MAAMgX,OAIbC,OAAU,EAgBd,GAda,QAAT/xE,GACF+xE,EAAUn7E,KAAK4oC,OAEXuyC,GAAWA,EAAQplE,MAAQolE,EAAQ,UACrCA,EAAQ,UAAS,WACf,OAAOjX,QAIXiX,EADkB,UAAT/xE,EACC86D,IAEAlkE,KAAK4oC,OAGZuyC,GAAYA,EAAQplE,MAASolE,EAAQ,SAI1C,OAAOA,EAAQplE,MAAK,WAClB0Q,EAAOtgB,QAAQ,CAAEiD,KAAM,mBAAoBs/B,SAAUt/B,OACpD,UAAS,SAAUiO,GACpBoP,EAAOtgB,QAAQ,CAAEiD,KAAM,mBAAoBs/B,SAAUt/B,SAiBzDy5C,EAAOjgD,UAAUw4E,oBAAsB,WACrC,IAAItnB,EAASrxD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAG7Ewa,EAAM62C,EACN1qD,EAAO,GAUX,GARmB,kBAAR6T,IACTA,EAAM62C,EAAO72C,IACb7T,EAAO0qD,EAAO1qD,OAMZ,SAAShC,KAAK6V,GAAlB,CAMAjd,KAAKs4D,OAAO51D,OAAS1C,KAAKs4D,OAAO51D,QAAU,GAC3C1C,KAAKs4D,OAAOl+C,QAAUpa,KAAKs4D,OAAOl+C,SAAW,GAGzC6C,IAAQ7T,IACVA,EAAOivD,GAAar4D,KAAMid,IAI5Bjd,KAAKs4D,OAAO51D,OAASghB,GAAa,GAAIowC,EAAQ,CAAE72C,IAAKA,EAAK7T,KAAMA,IAShE,IAPA,IAAImvD,EAAkBv4D,KAAKs4D,OAAOl+C,QAAQvb,QAAO,SAAU0c,GACzD,OAAOA,EAAE0B,KAAO1B,EAAE0B,MAAQA,KAExBo+D,EAAkB,GAClBC,EAAYt7E,KAAKq1C,GAAG,UACpBkmC,EAAoB,GAEf/4E,EAAI,EAAGA,EAAI84E,EAAUp8E,OAAQsD,IAAK,CACzC,IAAIg5E,EAAYjpC,GAAc+oC,EAAU94E,IAExC64E,EAAgB/yE,KAAKkzE,GAEjBA,EAAUv+D,KAAOu+D,EAAUv+D,MAAQA,GACrCs+D,EAAkBjzE,KAAKkzE,EAAUv+D,KAMjCs+D,EAAkBr8E,SAAWq5D,EAAgBr5D,OAC/Cc,KAAKs4D,OAAOl+C,QAAUihE,EAGZ9iB,EAAgBr5D,SAC1Bc,KAAKs4D,OAAOl+C,QAAU,CAACpa,KAAKs4D,OAAO51D,SAIrC1C,KAAKs4D,OAAOr7C,IAAMA,IAwCpB4lC,EAAOjgD,UAAU42E,qBAAuB,SAA8B9iE,GACpE,IAAIiQ,EAAS3mB,KAIb,IAAKA,KAAK+2E,eAGR/2E,KAAKo7E,oBAAoB1kE,EAAMuG,MAM1BvG,EAAMuG,KAAK,CACd,IAAIw+D,EAAc,SAASA,EAAYpkE,GACtB,cAAXA,EAAEjO,MACJud,EAAOy0D,oBAAoBz0D,EAAO2zD,SAAS,eAG7C3zD,EAAOxmB,MAAMsf,IAAI,CAAC,YAAa,aAAcg8D,IAG/Cz7E,KAAKG,MAAMwrB,IAAI,CAAC,YAAa,aAAc8vD,GAI/Cz7E,KAAKmG,QAAQ,CACX8W,IAAKvG,EAAMuG,IACX7T,KAAM,eAkBVy5C,EAAOjgD,UAAUo4E,WAAa,SAAoB/1D,GAChD,QAAgBxoB,IAAZwoB,EAEF,OAAOjlB,KAAKwwD,YAGVvrC,IAAYjlB,KAAKwwD,cAIrBxwD,KAAKwwD,YAAcvrC,EAEfjlB,KAAKwwD,aACPxwD,KAAK2xC,SAAS,mBACd3xC,KAAKmG,QAAQ,cAEbnG,KAAK8xC,YAAY,qBAcrB+Q,EAAOjgD,UAAUg3E,gBAAkB,WACjC55E,KAAK8xC,YAAY,aACjB9xC,KAAK8xC,YAAY,cACjB9xC,KAAK2xC,SAAS,eAGd3xC,KAAKg7E,YAAW,GAQhBh7E,KAAKmG,QAAQ,SAgBf08C,EAAOjgD,UAAUw3E,sBAAwB,WACnCp6E,KAAKG,MAAMgqE,eAAiB,GAAsC,IAAjCnqE,KAAKs4D,OAAO8d,mBAC/Cp2E,KAAK41E,iBAAiB7qE,SAAQ,SAAU2wE,GACtC,OAAOA,EAAOrlC,SAASqlC,EAAOhlE,UAEhC1W,KAAK41E,iBAAmB,IAE1B51E,KAAKs4D,OAAO8d,iBAAmBp2E,KAAKG,MAAMgqE,eAO1CnqE,KAAKmG,QAAQ,eAYf08C,EAAOjgD,UAAU62E,mBAAqB,WACpC,IAAI7vC,EAAS5pC,KAEbA,KAAK2xC,SAAS,eAOd3xC,KAAKmG,QAAQ,WACbnG,KAAK2rB,IAAI,cAAc,WACrB,OAAOie,EAAOkI,YAAY,mBAc9B+Q,EAAOjgD,UAAU+4E,mBAAqB,WACpC37E,KAAK8xC,YAAY,eAOjB9xC,KAAKmG,QAAQ,YAYf08C,EAAOjgD,UAAUg5E,0BAA4B,WAC3C57E,KAAK8xC,YAAY,eAQjB9xC,KAAKmG,QAAQ,mBAYf08C,EAAOjgD,UAAUi5E,mBAAqB,WACpC77E,KAAK8xC,YAAY,eAOjB9xC,KAAKmG,QAAQ,YAYf08C,EAAOjgD,UAAU+2E,mBAAqB,WACpC35E,KAAK2xC,SAAS,eAOd3xC,KAAKmG,QAAQ,YAYf08C,EAAOjgD,UAAUk5E,kBAAoB,WACnC97E,KAAK8xC,YAAY,eAOjB9xC,KAAKmG,QAAQ,WAcf08C,EAAOjgD,UAAUi3E,qBAAuB,WAGlC75E,KAAK+8C,SAASg/B,YAChB1sC,EAAMrlC,KAAK,0EACXhK,KAAKU,YAAYV,KAAK+8C,SAASg/B,YAGjC/7E,KAAK2xC,SAAS,mBAUd3xC,KAAKmG,QAAQ,cAYf08C,EAAOjgD,UAAUk3E,iBAAmB,WAClC95E,KAAK8xC,YAAY,eACjB9xC,KAAK2xC,SAAS,cAOd3xC,KAAKmG,QAAQ,UAYf08C,EAAOjgD,UAAU82E,iBAAmB,WAClC15E,KAAK2xC,SAAS,aACV3xC,KAAK+8C,SAASk8B,MAChBj5E,KAAKU,YAAY,GACjBV,KAAK4oC,QACK5oC,KAAK6f,UACf7f,KAAKinC,QASPjnC,KAAKmG,QAAQ,UAWf08C,EAAOjgD,UAAUm3E,0BAA4B,WAC3C/5E,KAAKW,SAASX,KAAKs6E,SAAS,cAc9Bz3B,EAAOjgD,UAAU83E,iBAAmB,SAA0BhkE,GACvDu+B,GAAkBv+B,IAMlB1W,KAAKk2E,YAINl2E,KAAK6f,SACP2kC,GAAexkD,KAAK4oC,QAEpB5oC,KAAKinC,UAaT4b,EAAOjgD,UAAUk4E,eAAiB,WAChC96E,KAAK22E,YAAY32E,KAAK22E,eAWxB9zB,EAAOjgD,UAAU+3E,sBAAwB,WACvC36E,KAAKg8E,cAAgBh8E,KAAK22E,cAW5B9zB,EAAOjgD,UAAUg4E,qBAAuB,WAClC56E,KAAKg8E,eACPh8E,KAAK4hD,sBAgBTiB,EAAOjgD,UAAUi4E,oBAAsB,SAA6BnkE,GAElEA,EAAMigC,kBAWRkM,EAAOjgD,UAAUi0E,wBAA0B,WACrC72E,KAAKwjE,eACPxjE,KAAK2xC,SAAS,kBAEd3xC,KAAK8xC,YAAY,mBAarB+Q,EAAOjgD,UAAUk0E,kBAAoB,WACnC92E,KAAK4hD,sBAkBPiB,EAAOjgD,UAAUo3E,4BAA8B,SAAqCtjE,EAAO5N,GACrFA,GACF9I,KAAKwjE,aAAa16D,EAAK06D,cAQzBxjE,KAAKmG,QAAQ,qBAWf08C,EAAOjgD,UAAUq3E,iBAAmB,WAClC,IAAI90D,EAAQnlB,KAAKG,MAAMglB,QAEvBnlB,KAAKmlB,MAAMA,IAYb09B,EAAOjgD,UAAUu3E,oBAAsB,WACrC,IAAIrxE,EAAO,KAEPrG,UAAUvD,OAAS,IACrB4J,EAAOrG,UAAU,IASnBzC,KAAKmG,QAAQ,WAAY2C,IAW3B+5C,EAAOjgD,UAAU+8D,SAAW,WAC1B,OAAO3/D,KAAKs4D,QAgBdzV,EAAOjgD,UAAUm4E,UAAY,SAAmBj0E,EAAQuzB,GAGtDr6B,KAAK88C,OAAM,WACT,GAAIh2C,KAAU6vD,GACZ,OAAOP,GAAMp2D,KAAKw2E,YAAax2E,KAAKG,MAAO2G,EAAQuzB,GAC9C,GAAIvzB,KAAU8vD,GACnB,OAAOP,GAAQr2D,KAAKw2E,YAAax2E,KAAKG,MAAO2G,EAAQuzB,GAGvD,IACMr6B,KAAKG,OACPH,KAAKG,MAAM2G,GAAQuzB,GAErB,MAAOhjB,GAEP,MADAg4B,EAAMh4B,GACAA,MAEP,IAgBLwrC,EAAOjgD,UAAU03E,SAAW,SAAkBxzE,GAC5C,GAAK9G,KAAKG,OAAUH,KAAKG,MAAMu/C,SAA/B,CAIA,GAAI54C,KAAU4vD,GACZ,OAAOT,GAAMj2D,KAAKw2E,YAAax2E,KAAKG,MAAO2G,GACtC,GAAIA,KAAU8vD,GACnB,OAAOP,GAAQr2D,KAAKw2E,YAAax2E,KAAKG,MAAO2G,GAM/C,IACE,OAAO9G,KAAKG,MAAM2G,KAClB,MAAOuQ,GAGP,QAA2B5a,IAAvBuD,KAAKG,MAAM2G,GAEb,MADAuoC,EAAM,aAAevoC,EAAS,2BAA6B9G,KAAK+4E,UAAY,wBAAyB1hE,GAC/FA,EAIR,GAAe,cAAXA,EAAEvJ,KAGJ,MAFAuhC,EAAM,aAAevoC,EAAS,mBAAqB9G,KAAK+4E,UAAY,gCAAiC1hE,GACrGrX,KAAKG,MAAMu/C,UAAW,EAChBroC,EAKR,MADAg4B,EAAMh4B,GACAA,KAgBVwrC,EAAOjgD,UAAUgmC,KAAO,WACtB,IAAIwqB,EAASpzD,KAETi8E,EAAej8E,KAAK+8C,SAASm/B,SAAWx/E,EAAOw/E,QAEnD,OAAID,EACK,IAAIA,GAAa,SAAU77C,GAChCgzB,EAAO+oB,MAAM/7C,MAIVpgC,KAAKm8E,SAcdt5B,EAAOjgD,UAAUu5E,MAAQ,WACvB,IAAIC,EAASp8E,KAETq2C,EAAW5zC,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK+hD,GAWnF,GAPIxkD,KAAKi3E,kBACPj3E,KAAKyf,IAAI,YAAazf,KAAKi3E,kBAMxBj3E,KAAK0/C,SAcH,KAAK1/C,KAAK+2E,eAAiB/2E,KAAKid,OAASjd,KAAKqwE,cAEnD,YADAh6B,EAASr2C,KAAKs6E,SAAS,SAWvBt6E,KAAKi3E,iBAAmB,WACtBmF,EAAOnF,iBAAmB,KAC1B5gC,EAAS+lC,EAAOxzC,SAGlB5oC,KAAK2rB,IAAI,YAAa3rB,KAAKi3E,sBA/BT,CAGlB,GAAIj3E,KAAKg3E,qBACP,OAGFh3E,KAAKg3E,sBAAuB,EAC5Bh3E,KAAK88C,OAAM,WACTs/B,EAAOpF,sBAAuB,EAC9B3gC,EAAS+lC,EAAOxzC,aAiCtBia,EAAOjgD,UAAUqkC,MAAQ,WACvBjnC,KAAK+6E,UAAU,UAYjBl4B,EAAOjgD,UAAUid,OAAS,WAExB,OAAmC,IAA5B7f,KAAKs6E,SAAS,WAavBz3B,EAAOjgD,UAAU4vD,OAAS,WACxB,OAAOxyD,KAAKs6E,SAAS,WAAavuD,GAAiB,EAAG,IAgBxD82B,EAAOjgD,UAAU88D,UAAY,SAAmB2c,GAC9C,GAA2B,qBAAhBA,EACT,OAAOr8E,KAAKm2E,WAEdn2E,KAAKm2E,aAAekG,EAEhBA,EACFr8E,KAAK2xC,SAAS,iBAEd3xC,KAAK8xC,YAAY,kBAerB+Q,EAAOjgD,UAAUlC,YAAc,SAAqBoR,GAClD,MAAuB,qBAAZA,GACLA,EAAU,IACZA,EAAU,QAEZ9R,KAAK+6E,UAAU,iBAAkBjpE,KAUnC9R,KAAKs4D,OAAO53D,YAAcV,KAAKs6E,SAAS,gBAAkB,EACnDt6E,KAAKs4D,OAAO53D,cAqBrBmiD,EAAOjgD,UAAUjC,SAAW,SAAkBmR,GAC5C,QAAgBrV,IAAZqV,EAEF,YAAgCrV,IAAzBuD,KAAKs4D,OAAO33D,SAAyBX,KAAKs4D,OAAO33D,SAAW6pB,IAGrE1Y,EAAUie,WAAWje,GAGjBA,EAAU,IACZA,EAAUvH,KAGRuH,IAAY9R,KAAKs4D,OAAO33D,WAE1BX,KAAKs4D,OAAO33D,SAAWmR,EAEnBA,IAAYvH,IACdvK,KAAK2xC,SAAS,YAEd3xC,KAAK8xC,YAAY,YAMnB9xC,KAAKmG,QAAQ,oBAajB08C,EAAOjgD,UAAUo9D,cAAgB,WAC/B,OAAOhgE,KAAKW,WAAaX,KAAKU,eAYhCmiD,EAAOjgD,UAAUm9D,qBAAuB,WACtC,OAAO11D,KAAK6F,MAAMlQ,KAAKW,YAAc0J,KAAK6F,MAAMlQ,KAAKU,gBAkBvDmiD,EAAOjgD,UAAUkd,SAAW,WAC1B,IAAIA,EAAW9f,KAAKs6E,SAAS,YAM7B,OAJKx6D,GAAaA,EAAS5gB,SACzB4gB,EAAWiM,GAAiB,EAAG,IAG1BjM,GAaT+iC,EAAOjgD,UAAU4gD,gBAAkB,WACjC,OAAOA,GAAgBxjD,KAAK8f,WAAY9f,KAAKW,aAY/CkiD,EAAOjgD,UAAUumC,YAAc,WAC7B,IAAIrpB,EAAW9f,KAAK8f,WAChBnf,EAAWX,KAAKW,WAChBqf,EAAMF,EAASE,IAAIF,EAAS5gB,OAAS,GAMzC,OAJI8gB,EAAMrf,IACRqf,EAAMrf,GAGDqf,GAiBT6iC,EAAOjgD,UAAUqhE,OAAS,SAAgBqY,GACxC,IAAIzX,OAAM,EAEV,YAAyBpoE,IAArB6/E,GAEFzX,EAAMx6D,KAAKijB,IAAI,EAAGjjB,KAAKoZ,IAAI,EAAGsM,WAAWusD,KACzCt8E,KAAKs4D,OAAO2L,OAASY,EACrB7kE,KAAK+6E,UAAU,YAAalW,QAExBA,EAAM,GACR7kE,KAAKskE,YAAYO,MAOrBA,EAAM90C,WAAW/vB,KAAKs6E,SAAS,WACxBlwE,MAAMy6D,GAAO,EAAIA,IAgB1BhiB,EAAOjgD,UAAUshE,MAAQ,SAAeqY,GACtC,QAAe9/E,IAAX8/E,EAIJ,OAAOv8E,KAAKs6E,SAAS,WAAY,EAH/Bt6E,KAAK+6E,UAAU,WAAYwB,IAkC/B15B,EAAOjgD,UAAU45E,aAAe,SAAsBC,GACpD,YAAsBhgF,IAAlBggF,EACKz8E,KAAK+6E,UAAU,kBAAmB0B,GAEpCz8E,KAAKs6E,SAAS,kBAAmB,GAmB1Cz3B,EAAOjgD,UAAU0hE,YAAc,SAAqBgY,GAClD,QAAyB7/E,IAArB6/E,GAAuD,IAArBA,EAItC,OAAOt8E,KAAKs4D,OAAOwM,WAHjB9kE,KAAKs4D,OAAOwM,WAAawX,GAe7Bz5B,EAAOjgD,UAAUswE,mBAAqB,WACpC,OAAOlzE,KAAKs6E,SAAS,wBAAyB,GAoBhDz3B,EAAOjgD,UAAU4gE,aAAe,SAAsBkZ,GACpD,QAAajgF,IAATigF,EAIJ,QAAS18E,KAAK28E,cAHZ38E,KAAK28E,gBAAkBD,GAmB3B75B,EAAOjgD,UAAU8gE,kBAAoB,WACnC,IAAIkZ,EAAQl5B,GAEZ1jD,KAAKwjE,cAAa,GAEdoZ,EAAMlZ,mBASR79D,GAAGyT,EAAUsjE,EAAMC,iBAAkBz7E,GAAKpB,MAAM,SAAS88E,EAAyBzlE,GAChFrX,KAAKwjE,aAAalqD,EAASsjE,EAAMG,qBAGL,IAAxB/8E,KAAKwjE,gBACP/jD,GAAInG,EAAUsjE,EAAMC,iBAAkBC,GAMxC98E,KAAKmG,QAAQ,wBAGfnG,KAAKi9C,IAAI2/B,EAAMlZ,sBACN1jE,KAAKG,MAAM+yE,qBAGpBlzE,KAAK+6E,UAAU,oBAIf/6E,KAAKg9E,kBAKLh9E,KAAKmG,QAAQ,sBAWjB08C,EAAOjgD,UAAU6gE,eAAiB,WAChC,IAAImZ,EAAQl5B,GAEZ1jD,KAAKwjE,cAAa,GAGdoZ,EAAMlZ,kBACRpqD,EAASsjE,EAAMnZ,kBACNzjE,KAAKG,MAAM+yE,qBACpBlzE,KAAK+6E,UAAU,mBAEf/6E,KAAKi9E,iBAKLj9E,KAAKmG,QAAQ,sBAYjB08C,EAAOjgD,UAAUo6E,gBAAkB,WACjCh9E,KAAKk9E,cAAe,EAGpBl9E,KAAKm9E,gBAAkB7jE,EAASk6B,gBAAgBtG,MAAMkwC,SAGtDv3E,GAAGyT,EAAU,UAAWlY,GAAKpB,KAAMA,KAAKq9E,qBAGxC/jE,EAASk6B,gBAAgBtG,MAAMkwC,SAAW,SAG1CzrC,GAASr4B,EAASu5B,KAAM,mBAMxB7yC,KAAKmG,QAAQ,oBAYf08C,EAAOjgD,UAAUy6E,mBAAqB,SAA4B3mE,GAC1C,KAAlBA,EAAMihC,WACoB,IAAxB33C,KAAKwjE,eACPxjE,KAAKyjE,iBAELzjE,KAAKi9E,mBAYXp6B,EAAOjgD,UAAUq6E,eAAiB,WAChCj9E,KAAKk9E,cAAe,EACpBz9D,GAAInG,EAAU,UAAWtZ,KAAKq9E,oBAG9B/jE,EAASk6B,gBAAgBtG,MAAMkwC,SAAWp9E,KAAKm9E,gBAG/CrrC,GAAYx4B,EAASu5B,KAAM,mBAQ3B7yC,KAAKmG,QAAQ,mBAgBf08C,EAAOjgD,UAAUgxD,YAAc,SAAqBxqD,GAIlD,IAHA,IAAIyrD,OAAM,EAGDryD,EAAI,EAAG4rB,EAAIpuB,KAAK+8C,SAAS8b,UAAWr2D,EAAI4rB,EAAElvB,OAAQsD,IAAK,CAC9D,IAAIs2D,EAAW1qC,EAAE5rB,GACbic,EAAO2gC,GAAK8U,QAAQ4E,GASxB,GALKr6C,IACHA,EAAOo+B,GAAU6B,aAAaoa,IAI3Br6C,GAML,GAAIA,EAAKs6C,gBACPlE,EAAMp2C,EAAKm1C,YAAYxqD,GAEnByrD,GACF,OAAOA,OATTxlB,EAAMlqB,MAAM,QAAU2zC,EAAW,qEAcrC,MAAO,IAgBTjW,EAAOjgD,UAAU06E,aAAe,SAAsBljE,GACpD,IAAImjE,EAASv9E,KAITw9E,EAAQx9E,KAAK+8C,SAAS8b,UAAUp6D,KAAI,SAAUq6D,GAChD,MAAO,CAACA,EAAU1Z,GAAK8U,QAAQ4E,OAC9Bj6D,QAAO,SAAU4+E,GAClB,IAAI3kB,EAAW2kB,EAAK,GAChBh/D,EAAOg/D,EAAK,GAGhB,OAAIh/D,EAEKA,EAAKs6C,eAGd1pB,EAAMlqB,MAAM,QAAU2zC,EAAW,sEAC1B,MAML4kB,EAAiC,SAAwCC,EAAYC,EAAYC,GACnG,IAAI9L,OAAQ,EAYZ,OAVA4L,EAAWt+B,MAAK,SAAUy+B,GACxB,OAAOF,EAAWv+B,MAAK,SAAU0+B,GAG/B,GAFAhM,EAAQ8L,EAAOC,EAAaC,GAExBhM,EACF,OAAO,QAKNA,GAGLiM,OAAqB,EACrBC,EAAO,SAAcviE,GACvB,OAAO,SAAU5Z,EAAGC,GAClB,OAAO2Z,EAAG3Z,EAAGD,KAGbo8E,EAAS,SAAgBC,EAAOz7E,GAClC,IAAIo2D,EAAWqlB,EAAM,GACjB1/D,EAAO0/D,EAAM,GAEjB,GAAI1/D,EAAKo1C,cAAcnxD,EAAQ66E,EAAOxgC,SAAS+b,EAASv/B,gBACtD,MAAO,CAAE72B,OAAQA,EAAQ+b,KAAMq6C,IAcnC,OANEklB,EAFEh+E,KAAK+8C,SAASqhC,YAEKV,EAA+BtjE,EAASojE,EAAOS,EAAKC,IAGpDR,EAA+BF,EAAOpjE,EAAS8jE,GAG/DF,IAAsB,GAoB/Bn7B,EAAOjgD,UAAUqa,IAAM,SAAava,GAClC,IAAI27E,EAAUr+E,KAGd,GAAsB,qBAAX0C,EACT,OAAO1C,KAAKs4D,OAAOr7C,KAAO,GAI5B,IAAI7C,EAAUo+C,GAAa91D,GAKtB0X,EAAQlb,QAQbc,KAAK+2E,cAAe,EAEpB/2E,KAAKs4D,OAAOl+C,QAAUA,EACtBpa,KAAKo7E,oBAAoBhhE,EAAQ,IAGjCg7C,GAAUp1D,KAAMoa,EAAQ,IAAI,SAAUkkE,EAAkBznB,GACtDwnB,EAAQ7H,YAAc3f,EAItBwnB,EAAQ/lB,OAAOl+C,QAAUA,EACzBikE,EAAQjD,oBAAoBkD,GAE5B,IAAI9uD,EAAM6uD,EAAQE,KAAKD,GAEvB,GAAI9uD,EACF,OAAIpV,EAAQlb,OAAS,EACZm/E,EAAQphE,IAAI7C,EAAQpd,MAAM,KAGnCqhF,EAAQtH,cAAe,EAGvBsH,EAAQ1+D,YAAW,WACjB3f,KAAKmlB,MAAM,CAAEO,KAAM,EAAGtf,QAASpG,KAAKw9C,SAASx9C,KAAK+8C,SAASyhC,yBAC1D,QAIHH,EAAQz+B,gBAKVmW,GAAQc,EAAKwnB,EAAQl+E,WA1CrBH,KAAK2f,YAAW,WACd3f,KAAKmlB,MAAM,CAAEO,KAAM,EAAGtf,QAASpG,KAAKw9C,SAASx9C,KAAK+8C,SAASyhC,yBAC1D,IA2DP37B,EAAOjgD,UAAU27E,KAAO,SAAc77E,GACpC,IAAI+7E,EAAUz+E,KAEV0+E,EAAa1+E,KAAKs9E,aAAa,CAAC56E,IAEpC,OAAKg8E,IAIAhiC,GAAgBgiC,EAAWjgE,KAAMze,KAAK+4E,YAY3C/4E,KAAK88C,OAAM,WAML98C,KAAKG,MAAMsE,YAAY7B,UAAUC,eAAe,aAClD7C,KAAK+6E,UAAU,YAAar4E,GAE5B1C,KAAK+6E,UAAU,MAAOr4E,EAAOua,KAG/Bjd,KAAK+2E,cAAe,KACnB,IAEI,IA1BL/2E,KAAK+2E,cAAe,EAEpB/2E,KAAKg5D,UAAU0lB,EAAWjgE,KAAMigE,EAAWh8E,QAC3C1C,KAAKG,MAAM28C,OAAM,WACf2hC,EAAQ1H,cAAe,MAElB,KA4BXl0B,EAAOjgD,UAAU8jB,KAAO,WACtB1mB,KAAK+6E,UAAU,SASjBl4B,EAAOjgD,UAAU+xB,MAAQ,WACnB30B,KAAKG,OACPH,KAAKG,MAAMiyD,YAAY,QAEzBpyD,KAAKg5D,UAAUh5D,KAAK+8C,SAAS8b,UAAU,GAAI,MAC3C74D,KAAK+6E,UAAU,UAWjBl4B,EAAOjgD,UAAU+7E,eAAiB,WAChC,IAAIj8E,EAAS1C,KAAK4+E,gBACdxkE,EAAU,GAOd,OAJmC,IAA/Bve,OAAO0Q,KAAK7J,GAAQxD,QACtBkb,EAAQ9R,KAAK5F,GAGR1C,KAAKs4D,OAAOl+C,SAAWA,GAWhCyoC,EAAOjgD,UAAUg8E,cAAgB,WAC/B,OAAO5+E,KAAKs4D,OAAO51D,QAAU,IAY/BmgD,EAAOjgD,UAAUytE,WAAa,WAC5B,OAAOrwE,KAAK4+E,iBAAmB5+E,KAAK4+E,gBAAgB3hE,KAAO,IAa7D4lC,EAAOjgD,UAAUi8E,YAAc,WAC7B,OAAO7+E,KAAK4+E,iBAAmB5+E,KAAK4+E,gBAAgBx1E,MAAQ,IAe9Dy5C,EAAOjgD,UAAU8iC,QAAU,SAAiB3pC,GAC1C,YAAcU,IAAVV,GACFiE,KAAK+6E,UAAU,aAAch/E,QAC7BiE,KAAK+8C,SAASrX,QAAU3pC,IAGnBiE,KAAKs6E,SAAS,YAqBvBz3B,EAAOjgD,UAAU8lC,SAAW,SAAkB3sC,GAE5C,QAAcU,IAAVV,EACF,OAAOiE,KAAK+8C,SAASrU,WAAY,EAGnC,IAAIo2C,OAAe,EAGE,kBAAV/iF,GAAsB,mBAAmBqL,KAAKrL,IACvDiE,KAAK+8C,SAASrU,SAAW3sC,EACzBiE,KAAKi7E,gBAAgBl/E,GACrB+iF,GAAe,GASf9+E,KAAK+8C,SAASrU,WALJ3sC,EAQZ+iF,EAAeA,GAAgB9+E,KAAK+8C,SAASrU,SAMzC1oC,KAAKG,OACPH,KAAK+6E,UAAU,cAAe+D,IAsBlCj8B,EAAOjgD,UAAU8wD,YAAc,SAAqB33D,GAClD,YAAcU,IAAVV,GACFiE,KAAK+6E,UAAU,iBAAkBh/E,GACjCiE,KAAK+8C,SAAS2W,YAAc33D,EACrBiE,MAEFA,KAAKs6E,SAAS,gBAevBz3B,EAAOjgD,UAAUq2E,KAAO,SAAcl9E,GACpC,YAAcU,IAAVV,GACFiE,KAAK+6E,UAAU,UAAWh/E,QAC1BiE,KAAK+8C,SAASk8B,KAAOl9E,IAGhBiE,KAAKs6E,SAAS,SAgBvBz3B,EAAOjgD,UAAUm3D,OAAS,SAAgB98C,GACxC,QAAYxgB,IAARwgB,EACF,OAAOjd,KAAKi2E,QAKTh5D,IACHA,EAAM,IAGJA,IAAQjd,KAAKi2E,UAKjBj2E,KAAKi2E,QAAUh5D,EAGfjd,KAAK+6E,UAAU,YAAa99D,GAE5Bjd,KAAK21E,mBAAoB,EASzB31E,KAAKmG,QAAQ,kBAiBf08C,EAAOjgD,UAAUs3E,wBAA0B,WACzC,KAAMl6E,KAAKi2E,SAAWj2E,KAAK+8C,SAASm8B,wBAA0Bl5E,KAAKG,OAASH,KAAKG,MAAM45D,OAAQ,CAC7F,IAAIglB,EAAY/+E,KAAKG,MAAM45D,UAAY,GAEnCglB,IAAc/+E,KAAKi2E,UACrBj2E,KAAKi2E,QAAU8I,EACf/+E,KAAK21E,mBAAoB,EAGzB31E,KAAKmG,QAAQ,mBAmBnB08C,EAAOjgD,UAAU8jD,SAAW,SAAkBua,GAC5C,QAAaxkE,IAATwkE,EACF,QAASjhE,KAAKk2E,UAGhBjV,IAASA,EAGLjhE,KAAKk2E,YAAcjV,IAIvBjhE,KAAKk2E,UAAYjV,EAEbjhE,KAAKq6E,uBACPr6E,KAAK+6E,UAAU,cAAe9Z,GAG5BjhE,KAAKk2E,WACPl2E,KAAK8xC,YAAY,yBACjB9xC,KAAK2xC,SAAS,wBAKd3xC,KAAKmG,QAAQ,mBACRnG,KAAKq6E,uBACRr6E,KAAKu6E,8BAGPv6E,KAAK8xC,YAAY,wBACjB9xC,KAAK2xC,SAAS,yBAKd3xC,KAAKmG,QAAQ,oBACRnG,KAAKq6E,uBACRr6E,KAAKy6E,kCAwBX53B,EAAOjgD,UAAUy3E,oBAAsB,SAA6BpZ,GAClE,QAAaxkE,IAATwkE,EACF,QAASjhE,KAAKg/E,qBAGhB/d,IAASA,EAGLjhE,KAAKg/E,uBAAyB/d,IAIlCjhE,KAAKg/E,qBAAuB/d,EAExBjhE,KAAKg/E,sBACPh/E,KAAK2xC,SAAS,6BAQd3xC,KAAKmG,QAAQ,yBAEbnG,KAAK8xC,YAAY,6BAQjB9xC,KAAKmG,QAAQ,0BAkBjB08C,EAAOjgD,UAAUuiB,MAAQ,SAAeqK,GACtC,YAAY/yB,IAAR+yB,EACKxvB,KAAKuyD,QAAU,KAIZ,OAAR/iC,GACFxvB,KAAKuyD,OAAS/iC,EACdxvB,KAAK8xC,YAAY,kBACb9xC,KAAKi/E,cACPj/E,KAAKi/E,aAAaxpE,WAKtBzV,KAAKuyD,OAAS,IAAIzO,GAAWt0B,GAG7BxvB,KAAK2xC,SAAS,aAIdtC,EAAMlqB,MAAM,SAAWnlB,KAAKuyD,OAAO7sC,KAAO,IAAMo+B,GAAWE,WAAWhkD,KAAKuyD,OAAO7sC,MAAQ,IAAK1lB,KAAKuyD,OAAOnsD,QAASpG,KAAKuyD,aAMzHvyD,KAAKmG,QAAQ,WAaf08C,EAAOjgD,UAAUg/C,mBAAqB,SAA4BlrC,GAChE1W,KAAKk/E,eAAgB,GAkBvBr8B,EAAOjgD,UAAU+zE,WAAa,SAAoB1V,GAChD,QAAaxkE,IAATwkE,EACF,OAAOjhE,KAAK61E,YAKd,GAFA5U,IAASA,EAELA,IAASjhE,KAAK61E,YAAlB,CAMA,GAFA71E,KAAK61E,YAAc5U,EAEfjhE,KAAK61E,YASP,OARA71E,KAAKk/E,eAAgB,EACrBl/E,KAAK8xC,YAAY,qBACjB9xC,KAAK2xC,SAAS,wBAKd3xC,KAAKmG,QAAQ,cAYXnG,KAAKG,OACPH,KAAKG,MAAMwrB,IAAI,aAAa,SAAUtU,GACpCA,EAAE6/B,kBACF7/B,EAAEs/B,oBAIN32C,KAAKk/E,eAAgB,EACrBl/E,KAAK8xC,YAAY,mBACjB9xC,KAAK2xC,SAAS,qBAKd3xC,KAAKmG,QAAQ,kBAUf08C,EAAOjgD,UAAUg0E,uBAAyB,WACxC,IAAIuI,OAAkB,EAClBC,OAAY,EACZC,OAAY,EACZC,EAAiBl+E,GAAKpB,KAAMA,KAAK4hD,oBAEjC4e,EAAkB,SAAyBnpD,GAGzCA,EAAEkoE,UAAYH,GAAa/nE,EAAEmoE,UAAYH,IAC3CD,EAAY/nE,EAAEkoE,QACdF,EAAYhoE,EAAEmoE,QACdF,MAIA7hB,EAAkB,WACpB6hB,IAIAt/E,KAAKsQ,cAAc6uE,GAInBA,EAAkBn/E,KAAKmR,YAAYmuE,EAAgB,MAGjD7e,EAAgB,SAAuB/pD,GACzC4oE,IAEAt/E,KAAKsQ,cAAc6uE,IAIrBn/E,KAAK6F,GAAG,YAAa43D,GACrBz9D,KAAK6F,GAAG,YAAa26D,GACrBxgE,KAAK6F,GAAG,UAAW46D,GAInBzgE,KAAK6F,GAAG,UAAWy5E,GACnBt/E,KAAK6F,GAAG,QAASy5E,GAOjB,IAAIG,OAAoB,EAExBz/E,KAAKmR,aAAY,WAEf,GAAKnR,KAAKk/E,cAAV,CAKAl/E,KAAKk/E,eAAgB,EAGrBl/E,KAAK22E,YAAW,GAGhB32E,KAAK0X,aAAa+nE,GAElB,IAAIz7C,EAAUhkC,KAAK+8C,SAAS0iC,kBAExBz7C,GAAW,IAMfy7C,EAAoBz/E,KAAK2f,YAAW,WAI7B3f,KAAKk/E,eACRl/E,KAAK22E,YAAW,KAEjB3yC,OACF,MAkBL6e,EAAOjgD,UAAUunE,aAAe,SAAsB1/B,GACpD,QAAahuC,IAATguC,EAOJ,OAAIzqC,KAAKG,OAASH,KAAKG,MAAMo0D,qBACpBv0D,KAAKs4D,OAAO8d,kBAAoBp2E,KAAKs6E,SAAS,gBAEhD,EAPLt6E,KAAK+6E,UAAU,kBAAmBtwC,IA2BtCoY,EAAOjgD,UAAUyzE,oBAAsB,SAA6B5rC,GAClE,YAAahuC,IAATguC,EACKzqC,KAAK+6E,UAAU,yBAA0BtwC,GAG9CzqC,KAAKG,OAASH,KAAKG,MAAMo0D,qBACpBv0D,KAAKs6E,SAAS,uBAEhB,GAeTz3B,EAAOjgD,UAAUs6D,QAAU,SAAiB+D,GAC1C,QAAaxkE,IAATwkE,EAKJ,QAASjhE,KAAK0/E,SAJZ1/E,KAAK0/E,WAAaze,GA8BtBpe,EAAOjgD,UAAUihC,aAAe,SAAsBc,EAAMC,EAAO78B,GACjE,GAAI/H,KAAKG,MACP,OAAOH,KAAKG,MAAM0jC,aAAac,EAAMC,EAAO78B,IAyBhD86C,EAAOjgD,UAAU8hC,mBAAqB,SAA4BlmB,EAAS60C,GACzE,GAAIrzD,KAAKG,MACP,OAAOH,KAAKG,MAAMukC,mBAAmBlmB,EAAS60C,IAgBlDxQ,EAAOjgD,UAAUyvD,sBAAwB,WACvC,IAAIstB,EAAQl9E,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAC5Em9E,EAAcD,EAAM10E,MACpBA,OAAwBxO,IAAhBmjF,EAA4Bn9E,UAAU,GAAKm9E,EAKvD,GAAI5/E,KAAKG,MACP,OAAOH,KAAKG,MAAMkyD,sBAAsBpnD,IAgB5C43C,EAAOjgD,UAAU4wD,wBAA0B,WACzC,OAAOxzD,KAAKs6E,SAAS,4BAWvBz3B,EAAOjgD,UAAUw1E,WAAa,WAC5B,OAAOp4E,KAAKG,OAASH,KAAKG,MAAMi4E,YAAcp4E,KAAKG,MAAMi4E,cAAgB,GAW3Ev1B,EAAOjgD,UAAUy1E,YAAc,WAC7B,OAAOr4E,KAAKG,OAASH,KAAKG,MAAMk4E,aAAer4E,KAAKG,MAAMk4E,eAAiB,GAiB7Ex1B,EAAOjgD,UAAUmF,SAAW,SAAkB2d,GAC5C,QAAajpB,IAATipB,EACF,OAAO1lB,KAAK8pE,UAGd9pE,KAAK8pE,UAAYh/C,OAAOpF,GAAM6T,eAahCspB,EAAOjgD,UAAU+6C,UAAY,WAC3B,OAAOj6B,GAAam/B,EAAOjgD,UAAUm6C,SAASY,UAAW39C,KAAKg2E,aAYhEnzB,EAAOjgD,UAAUi9E,OAAS,WACxB,IAAIrhE,EAAUkF,GAAa1jB,KAAK+8C,UAC5B+H,EAAStmC,EAAQsmC,OAErBtmC,EAAQsmC,OAAS,GAEjB,IAAK,IAAItiD,EAAI,EAAGA,EAAIsiD,EAAO5lD,OAAQsD,IAAK,CACtC,IAAIyI,EAAQ65C,EAAOtiD,GAGnByI,EAAQyY,GAAazY,GACrBA,EAAMuuC,YAAS/8C,EACf+hB,EAAQsmC,OAAOtiD,GAAKyI,EAGtB,OAAOuT,GAqBTqkC,EAAOjgD,UAAUk9E,YAAc,SAAqB7pE,EAASuI,GAC3D,IAAIuhE,EAAU//E,KAEdwe,EAAUA,GAAW,GACrBA,EAAQvI,QAAUA,GAAW,GAE7B,IAAI+pE,EAAQ,IAAIz6B,GAAYvlD,KAAMwe,GAQlC,OANAxe,KAAKq+C,SAAS2hC,GACdA,EAAMn6E,GAAG,WAAW,WAClBk6E,EAAQnrC,YAAYorC,MAGtBA,EAAM55B,OACC45B,GAeTn9B,EAAO4yB,eAAiB,SAAwBxvE,GAC9C,IAAIg6E,EAAc,CAChB7lE,QAAS,GACT0qC,OAAQ,IAGNo7B,EAAa3tC,GAActsC,GAC3Bk6E,EAAYD,EAAW,cAO3B,GALI5uC,GAASrrC,EAAK,eAChBi6E,EAAW1I,OAAQ,GAIH,OAAd2I,EAAoB,CAGtB,IAAIC,EAAkBn1C,EAAek1C,GAAa,MAC9C3wD,EAAM4wD,EAAgB,GACtBt3E,EAAOs3E,EAAgB,GAEvB5wD,GACF6f,EAAMlqB,MAAMqK,GAEdltB,EAAO49E,EAAYp3E,GAMrB,GAHAxG,EAAO29E,EAAaC,GAGhBj6E,EAAI4qE,gBAGN,IAFA,IAAI3yB,EAAWj4C,EAAI04C,WAEVn8C,EAAI,EAAG4rB,EAAI8vB,EAASh/C,OAAQsD,EAAI4rB,EAAG5rB,IAAK,CAC/C,IAAI0uC,EAAQgN,EAAS17C,GAEjB69E,EAAYnvC,EAAM4J,SAASvhB,cAEb,WAAd8mD,EACFJ,EAAY7lE,QAAQ9R,KAAKiqC,GAAcrB,IAChB,UAAdmvC,GACTJ,EAAYn7B,OAAOx8C,KAAKiqC,GAAcrB,IAK5C,OAAO+uC,GAYTp9B,EAAOjgD,UAAU6zE,kBAAoB,WACnC,IAAIp9D,EAAOC,EAASC,cAAc,KAIlC,QAAS,cAAeF,EAAK6zB,OAAS,oBAAqB7zB,EAAK6zB,OAAS,iBAAkB7zB,EAAK6zB,OAAS,gBAAiB7zB,EAAK6zB,OAE/H,gBAAiB7zB,EAAK6zB,QAGjB2V,EArlHI,CAslHXhG,IAmDFwT,GAAIE,MAAMxlD,SAAQ,SAAUgrE,GAC1B,IAAI9yE,EAAQotD,GAAI0lB,GAEhBlzB,GAAOjgD,UAAUK,EAAM+sD,YAAc,WACnC,OAAIhwD,KAAKG,MACAH,KAAKG,MAAM8C,EAAM+sD,eAK1BhwD,KAAKiD,EAAMgtD,aAAejwD,KAAKiD,EAAMgtD,cAAgB,IAAIhtD,EAAM4sD,UACxD7vD,KAAKiD,EAAMgtD,kBAStBpN,GAAOC,QAAU,GAEjB,IAAIzX,GAAY3uC,EAAO2uC,UAUvBwX,GAAOjgD,UAAUm6C,SAAW,CAE1B8b,UAAWzZ,GAAK6U,kBAEhBqsB,MAAO,GACPC,MAAO,GAGPd,kBAAmB,IAGnBhV,cAAe,GAKfvsB,SAAU,CAAC,cAAe,cAAe,mBAAoB,iBAAkB,gBAAiB,aAAc,eAAgB,qBAE9Hn2C,SAAUsjC,KAAcA,GAAUsS,WAAatS,GAAUsS,UAAU,IAAMtS,GAAUm1C,cAAgBn1C,GAAUtjC,WAAa,KAG1H41C,UAAW,GAGX6gC,oBAAqB,kDAGlB9xC,GACHmW,GAAOjgD,UAAUm6C,SAASmB,SAAS51C,KAAK,iBAG1C,CAOA,QAOA,UAQA,WAqBA,eAwBA,cAAcyC,SAAQ,SAAU2Q,GAC9BmnC,GAAOjgD,UAAU8Y,GAAM,WACrB,OAAO1b,KAAKs6E,SAAS5+D,OAIzBy5D,GAAsBpqE,SAAQ,SAAU2L,GACtCmsC,GAAOjgD,UAAU,aAAe45C,GAAY9lC,GAAS,KAAO,WAC1D,OAAO1W,KAAKmG,QAAQuQ,OA8DxBmmC,GAAU0F,kBAAkB,SAAUM,IAYtC,IAAI49B,GAAmB,SASnBC,GAAmB,iBAQnBC,GAAgB,GAYhBC,GAAe,SAAsB9yE,GACvC,OAAO6yE,GAAc99E,eAAeiL,IAalC+yE,GAAY,SAAmB/yE,GACjC,OAAO8yE,GAAa9yE,GAAQ6yE,GAAc7yE,QAAQrR,GAehDqkF,GAAqB,SAA4BtnC,EAAQ1rC,GAC3D0rC,EAAOknC,IAAoBlnC,EAAOknC,KAAqB,GACvDlnC,EAAOknC,IAAkB5yE,IAAQ,GAiB/BizE,GAAoB,SAA2BvnC,EAAQxB,EAAMgpC,GAC/D,IAAIhP,GAAagP,EAAS,SAAW,IAAM,cAE3CxnC,EAAOrzC,QAAQ6rE,EAAWh6B,GAC1BwB,EAAOrzC,QAAQ6rE,EAAY,IAAMh6B,EAAKlqC,KAAMkqC,IAiB1CipC,GAAoB,SAA2BnzE,EAAM6J,GACvD,IAAIupE,EAAqB,WAQvBH,GAAkB/gF,KAAM,CAAE8N,KAAMA,EAAM6J,OAAQA,EAAQ3T,SAAU,OAAQ,GAExE,IAAIA,EAAW2T,EAAOqT,MAAMhrB,KAAMyC,WAKlC,OAHAq+E,GAAmB9gF,KAAM8N,GACzBizE,GAAkB/gF,KAAM,CAAE8N,KAAMA,EAAM6J,OAAQA,EAAQ3T,SAAUA,IAEzDA,GAOT,OAJAnI,OAAO0Q,KAAKoL,GAAQ5M,SAAQ,SAAUwkC,GACpC2xC,EAAmB3xC,GAAQ53B,EAAO43B,MAG7B2xC,GAmBLC,GAAsB,SAA6BrzE,EAAMszE,GAM3D,OAFAA,EAAex+E,UAAUkL,KAAOA,EAEzB,WACLizE,GAAkB/gF,KAAM,CAAE8N,KAAMA,EAAM6J,OAAQypE,EAAgBp9E,SAAU,OAAQ,GAEhF,IAAK,IAAI8pC,EAAOrrC,UAAUvD,OAAQyvB,EAAO1D,MAAM6iB,GAAOxoC,EAAO,EAAGA,EAAOwoC,EAAMxoC,IAC3EqpB,EAAKrpB,GAAQ7C,UAAU6C,GAGzB,IAAItB,EAAW,IAAK8e,SAASlgB,UAAUxB,KAAK4pB,MAAMo2D,EAAgB,CAAC,MAAMnsD,OAAO,CAACj1B,MAAMi1B,OAAOtG,MAS9F,OANA3uB,KAAK8N,GAAQ,WACX,OAAO9J,GAGT+8E,GAAkB/gF,KAAMgE,EAASq9E,gBAE1Br9E,IAmBPs9E,GAAS,WAUX,SAASA,EAAO9nC,GAGd,GAFAnM,EAAertC,KAAMshF,GAEjBthF,KAAKyE,cAAgB68E,EACvB,MAAM,IAAI/gF,MAAM,0DAGlBP,KAAKw5C,OAASA,EAIdqC,GAAQ77C,aACDA,KAAKmG,QAEZk2C,GAASr8C,KAAMA,KAAKyE,YAAY63C,cAChCwkC,GAAmBtnC,EAAQx5C,KAAK8N,MAIhC9N,KAAK8S,QAAU1R,GAAKpB,KAAMA,KAAK8S,SAG/B0mC,EAAO3zC,GAAG,UAAW7F,KAAK8S,SA+O5B,OAvOAwuE,EAAO1+E,UAAUuoC,QAAU,WACzB,OAAOnrC,KAAKyE,YAAY88E,SAiB1BD,EAAO1+E,UAAUy+E,aAAe,WAC9B,IAAIrpC,EAAOv1C,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAK/E,OAHAu1C,EAAKlqC,KAAO9N,KAAK8N,KACjBkqC,EAAKrgC,OAAS3X,KAAKyE,YACnBuzC,EAAKh0C,SAAWhE,KACTg4C,GAmBTspC,EAAO1+E,UAAUuD,QAAU,SAAoBuQ,GAC7C,IAAIshC,EAAOv1C,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAE/E,OAAO0D,GAAQnG,KAAK06C,YAAahkC,EAAO1W,KAAKqhF,aAAarpC,KAiB5DspC,EAAO1+E,UAAU25C,mBAAqB,SAA4BllC,KAYlEiqE,EAAO1+E,UAAUkQ,QAAU,WACzB,IAAIhF,EAAO9N,KAAK8N,KACZ0rC,EAASx5C,KAAKw5C,OASlBx5C,KAAKmG,QAAQ,WACbnG,KAAKyf,MACL+5B,EAAO/5B,IAAI,UAAWzf,KAAK8S,SAK3B0mC,EAAOknC,IAAkB5yE,IAAQ,EACjC9N,KAAKw5C,OAASx5C,KAAKglB,MAAQ,KAI3Bw0B,EAAO1rC,GAAQqzE,GAAoBrzE,EAAM6yE,GAAc7yE,KAezDwzE,EAAOE,QAAU,SAAiB7pE,GAChC,IAAI2D,EAAsB,kBAAX3D,EAAsBkpE,GAAUlpE,GAAUA,EAEzD,MAAoB,oBAAN2D,IAAqBgmE,EAAO1+E,UAAU8/C,cAAcpnC,EAAE1Y,YAoBtE0+E,EAAOG,eAAiB,SAAwB3zE,EAAM6J,GACpD,GAAoB,kBAAT7J,EACT,MAAM,IAAIvN,MAAM,yBAA2BuN,EAAO,6BAA+C,qBAATA,EAAuB,YAAcs/B,EAAQt/B,IAAS,KAGhJ,GAAI8yE,GAAa9yE,GACfuhC,EAAMrlC,KAAK,mBAAqB8D,EAAO,wEAClC,GAAI+0C,GAAOjgD,UAAUC,eAAeiL,GACzC,MAAM,IAAIvN,MAAM,yBAA2BuN,EAAO,0DAGpD,GAAsB,oBAAX6J,EACT,MAAM,IAAIpX,MAAM,uBAAyBuN,EAAO,+BAAmD,qBAAX6J,EAAyB,YAAcy1B,EAAQz1B,IAAW,KAepJ,OAZAgpE,GAAc7yE,GAAQ6J,EAIlB7J,IAAS2yE,KACPa,EAAOE,QAAQ7pE,GACjBkrC,GAAOjgD,UAAUkL,GAAQmzE,GAAkBnzE,EAAM6J,GAEjDkrC,GAAOjgD,UAAUkL,GAAQqzE,GAAoBrzE,EAAM6J,IAIhDA,GAWT2pE,EAAOI,iBAAmB,SAA0B5zE,GAClD,GAAIA,IAAS2yE,GACX,MAAM,IAAIlgF,MAAM,mCAEdqgF,GAAa9yE,YACR6yE,GAAc7yE,UACd+0C,GAAOjgD,UAAUkL,KAiB5BwzE,EAAOK,WAAa,WAClB,IAAIpxB,EAAQ9tD,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK5G,OAAO0Q,KAAKo0E,IAExFnkF,OAAS,EAWb,OATA+zD,EAAMxlD,SAAQ,SAAU+C,GACtB,IAAI6J,EAASkpE,GAAU/yE,GAEnB6J,IACFnb,EAASA,GAAU,GACnBA,EAAOsR,GAAQ6J,MAIZnb,GAcT8kF,EAAOM,iBAAmB,SAA0B9zE,GAClD,IAAI6J,EAASkpE,GAAU/yE,GAEvB,OAAO6J,GAAUA,EAAO4pE,SAAW,IAG9BD,EA/QI,GAgSbA,GAAOT,UAAYA,GAOnBS,GAAOb,iBAAmBA,GAE1Ba,GAAOG,eAAehB,GAAkBa,IAOxCz+B,GAAOjgD,UAAUi/E,YAAc,SAAU/zE,GACvC,QAAS9N,KAAK0gF,MAAsD,IAAjC1gF,KAAK0gF,IAAkB5yE,IAQ5D+0C,GAAOjgD,UAAUk/E,UAAY,SAAUh0E,GACrC,QAAS8yE,GAAa9yE,IAkExB,IAAIzJ,GAAY,SAAmBC,EAAUC,GAC3C,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAIN,UAAU,4DAAoF,qBAAfM,EAA6B,YAAc6oC,EAAQ7oC,KAG9ID,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CACrE6B,YAAa,CACX1I,MAAOuI,EACPnB,YAAY,EACZE,UAAU,EACVD,cAAc,KAIdmB,IAEFD,EAASy9E,OAASx9E,IAoBlBy9E,GAAW,SAAkBz9E,GAC/B,IAAI09E,EAAkBx/E,UAAUvD,OAAS,QAAsBzC,IAAjBgG,UAAU,GAAmBA,UAAU,GAAK,GAEtF6B,EAAW,WACbC,EAAWymB,MAAMhrB,KAAMyC,YAGrBqN,EAAU,GAcd,IAAK,IAAIhC,IAZiF,YAA1D,qBAApBm0E,EAAkC,YAAc70C,EAAQ60C,KAC9DA,EAAgBx9E,cAAgB5I,OAAO+G,UAAU6B,cACnDH,EAAW29E,EAAgBx9E,aAE7BqL,EAAUmyE,GAC0B,oBAApBA,IAChB39E,EAAW29E,GAGb59E,GAAUC,EAAUC,GAGHuL,EACXA,EAAQjN,eAAeiL,KACzBxJ,EAAS1B,UAAUkL,GAAQgC,EAAQhC,IAIvC,OAAOxJ,GASuB,qBAArB49E,kBAAoCp1C,OAC7CxzB,EAASC,cAAc,SACvBD,EAASC,cAAc,SACvBD,EAASC,cAAc,SACvBD,EAASC,cAAc,aAYzB,IAAI4oE,GAAc,SAAqBt4E,GACrC,OAA2B,IAApBA,EAAGxM,QAAQ,KAAawM,EAAG7M,MAAM,GAAK6M,GAoB/C,SAASsqD,GAAQtqD,EAAI2U,EAASs+B,GAC5B,IAAItD,EAAS2a,GAAQiuB,UAAUv4E,GAE/B,GAAI2vC,EAOF,OANIh7B,GACF6wB,EAAMrlC,KAAK,WAAaH,EAAK,0DAE3BizC,GACFtD,EAAOsD,MAAMA,GAERtD,EAGT,IAAIl9C,EAAmB,kBAAPuN,EAAkBurC,GAAE,IAAM+sC,GAAYt4E,IAAOA,EAE7D,IAAKmmC,GAAK1zC,GACR,MAAM,IAAI2H,UAAU,sDAGjBqV,EAASu5B,KAAKnB,SAASp1C,IAC1B+yC,EAAMrlC,KAAK,mDAGbwU,EAAUA,GAAW,GAErB21C,GAAQkuB,MAAM,eAAet3E,SAAQ,SAAUu3E,GAC7C,IAAIzqC,EAAOyqC,EAAahmF,EAAIonB,GAAalF,IAEpCmvB,EAASkK,KAAS5sB,MAAMwE,QAAQooB,GAKrCr5B,EAAUkF,GAAalF,EAASq5B,GAJ9BxI,EAAMlqB,MAAM,mDAShB,IAAIo9D,EAAkB1lC,GAAU6B,aAAa,UAQ7C,OANAlF,EAAS,IAAI+oC,EAAgBjmF,EAAIkiB,EAASs+B,GAE1CqX,GAAQkuB,MAAM,SAASt3E,SAAQ,SAAUu3E,GACvC,OAAOA,EAAa9oC,MAGfA,EAyFT,GAlFA2a,GAAQquB,OAAS,GAejBruB,GAAQkuB,MAAQ,SAAUj5E,EAAMsS,GAK9B,OAJAy4C,GAAQquB,OAAOp5E,GAAQ+qD,GAAQquB,OAAOp5E,IAAS,GAC3CsS,IACFy4C,GAAQquB,OAAOp5E,GAAQ+qD,GAAQquB,OAAOp5E,GAAM6rB,OAAOvZ,IAE9Cy4C,GAAQquB,OAAOp5E,IAYxB+qD,GAAQsuB,KAAO,SAAUr5E,EAAMsS,GAC7By4C,GAAQkuB,MAAMj5E,EAAMsS,IAYtBy4C,GAAQuuB,SAAW,SAAUt5E,EAAMsS,GACjCy4C,GAAQkuB,MAAMj5E,EAAM,GAAG6rB,OAAOvZ,GAAIjd,KAAI,SAAU8kB,GAC9C,IAAIk4B,EAAU,SAASA,IAErB,OADA0Y,GAAQwuB,WAAWv5E,EAAMqyC,GAClBl4B,EAASyH,WAAMvuB,EAAWgG,YAGnC,OAAOg5C,OAgBX0Y,GAAQwuB,WAAa,SAAUv5E,EAAMsS,GACnC,IAAIjO,EAAQ0mD,GAAQkuB,MAAMj5E,GAAM/L,QAAQqe,GAExC,QAAIjO,IAAU,KAId0mD,GAAQquB,OAAOp5E,GAAQ+qD,GAAQquB,OAAOp5E,GAAMpM,QAC5Cm3D,GAAQquB,OAAOp5E,GAAMqlB,OAAOhhB,EAAO,IAE5B,KAI+B,IAApC/Q,EAAO26E,0BAAqCvqC,KAAU,CACxD,IAAII,GAAQkI,GAAE,wBAEd,IAAKlI,GAAO,CACVA,GAAQyM,GAAmB,uBAC3B,IAAI49B,GAAOniC,GAAE,QAETmiC,IACFA,GAAKnmC,aAAalE,GAAOqqC,GAAKpmC,YAEhCyI,GAAe1M,GAAO,kJAO1BqM,GAAiB,EAAG4a,IAOpBA,GAAQotB,QAAUp2C,EAQlBgpB,GAAQ31C,QAAUqkC,GAAOjgD,UAAUm6C,SAQnCoX,GAAQyuB,WAAa,WACnB,OAAO//B,GAAOC,SAiBhBqR,GAAQiuB,UAAY,SAAUv4E,GAC5B,IAAIi5C,EAAUD,GAAOC,QACjB78C,OAAM,EAEV,GAAkB,kBAAP4D,EAAiB,CAC1B,IAAIg5E,EAAMV,GAAYt4E,GAClB2vC,EAASsJ,EAAQ+/B,GAErB,GAAIrpC,EACF,OAAOA,EAGTvzC,EAAMmvC,GAAE,IAAMytC,QAEd58E,EAAM4D,EAGR,GAAImmC,GAAK/pC,GAAM,CACb,IAAI68E,EAAO78E,EACP88E,EAAUD,EAAKtpC,OACf84B,EAAWwQ,EAAKxQ,SAKpB,GAAIyQ,GAAWjgC,EAAQwvB,GACrB,OAAOyQ,GAAWjgC,EAAQwvB,KAchCne,GAAQ6uB,cAAgB,WACtB,OAIEnnF,OAAO0Q,KAAKs2C,GAAOC,SAASrkD,KAAI,SAAU00C,GACxC,OAAO0P,GAAOC,QAAQ3P,MACrBt0C,OAAOuQ,UAUd+kD,GAAQrR,QAAUD,GAAOC,QAOzBqR,GAAQzV,aAAe7B,GAAU6B,aAmBjCyV,GAAQ5R,kBAAoB,SAAUwzB,EAASkN,GACzC7jC,GAAKG,OAAO0jC,IACd5zC,EAAMrlC,KAAK,OAAS+rE,EAAU,+GAGhCl5B,GAAU0F,kBAAkBz/C,KAAK+5C,GAAWk5B,EAASkN,IAQvD9uB,GAAQD,QAAU9U,GAAK8U,QAQvBC,GAAQJ,aAAe3U,GAAK2U,aAQ5BI,GAAQyB,IAAMA,IAWTlpB,GAAU7wC,OAAOC,gBACpBD,OAAOC,eAAeq4D,GAAS,aAAc,CAC3Cp4D,MAAO,GACPmnF,WAAW,EACX//E,YAAY,IAGdtH,OAAOC,eAAeq4D,GAAQ0B,WAAY,aAAc,CACtD95D,MAAO45D,GACPutB,WAAW,EACX//E,YAAY,KAGdgxD,GAAQ0B,WAAa,CAAEF,WAAYA,IASrCxB,GAAQ5rB,QAAUA,EAUlB4rB,GAAQtnB,cAAgBA,EAQxBsnB,GAAQt2C,OAASmkE,GAUjB7tB,GAAQzwC,aAAeA,GAUvBywC,GAAQ/yD,KAAOA,GAoBf+yD,GAAQstB,eAAiBH,GAAOG,eAchCttB,GAAQutB,iBAAmBJ,GAAOI,iBAclCvtB,GAAQx8C,OAAS,SAAUo+D,EAASp+D,GAElC,OADA03B,EAAMrlC,KAAK,wEACJs3E,GAAOG,eAAe1L,EAASp+D,IAcxCw8C,GAAQwtB,WAAaL,GAAOK,WAW5BxtB,GAAQ0sB,UAAYS,GAAOT,UAW3B1sB,GAAQytB,iBAAmBN,GAAOM,iBAelCztB,GAAQgvB,YAAc,SAAUz9D,EAAM5c,GACpC,IAAIs6E,EAMJ,OAJA19D,GAAQ,GAAKA,GAAM6T,cAEnB46B,GAAQ31C,QAAQm/B,UAAYj6B,GAAaywC,GAAQ31C,QAAQm/B,WAAYylC,EAAgB,GAAIA,EAAc19D,GAAQ5c,EAAMs6E,IAE9GjvB,GAAQ31C,QAAQm/B,UAAUj4B,IAQnCyuC,GAAQpqD,IAAMslC,EAUd8kB,GAAQtoC,gBAAkBsoC,GAAQpoC,iBAAmBA,GASrDooC,GAAQyK,WAAaA,GAarBzK,GAAQsK,cAAgBA,GASxBtK,GAAQwK,gBAAkBA,GAQ1BxK,GAAQpI,SAAWA,GAOnBoI,GAAQzH,cAAgBA,GAOxByH,GAAQrtC,YAAcA,GAUtBqtC,GAAQtuD,GAAKA,GAObsuD,GAAQxoC,IAAMA,GAOdwoC,GAAQ10C,IAAMA,GAOd00C,GAAQhuD,QAAUA,GAalBguD,GAAQjvC,IAAMA,EAOdivC,GAAQjG,UAAYA,GAQpBiG,GAAQhF,WAAaA,GAQrBgF,GAAQ9E,WAAaA,GA4HrB,CAAC,OAAQ,aAAc,WAAY,WAAY,WAAY,cAAe,cAAe,gBAAiB,gBAAiB,UAAW,gBAAiB,iBAAiBtkD,SAAQ,SAAUooC,GACxLghB,GAAQhhB,GAAK,WAEX,OADA9D,EAAMrlC,KAAK,WAAampC,EAAI,qCAAuCA,EAAI,cAChEmC,GAAInC,GAAGnoB,MAAM,KAAMvoB,eAc9B0xD,GAAQ7kB,cAAgBA,EAMxB6kB,GAAQkvB,IAAM/tC,GAMd6e,GAAQpoD,IAAMghD,GAEd3xD,EAAOC,QAAU84D,I,iDCp3wBjB,SAAWmvB,GACT,IAAIC,EAAY,iGACZC,EAAsB,qBACtBC,EAAkB,oBAClBC,EAAsB,wCAEtBC,EAAa,CAOf9oD,iBAAkB,SAAUF,EAASC,EAAaid,GAKhD,GAJAA,EAAOA,GAAQ,GAEfld,EAAUA,EAAQrC,OAClBsC,EAAcA,EAAYtC,QACrBsC,EAAa,CAIhB,IAAKid,EAAK+rC,gBACR,OAAOjpD,EAET,IAAIkpD,EAAwBF,EAAWG,SAASnpD,GAChD,IAAKkpD,EACH,MAAM,IAAItjF,MAAM,mCAKlB,OAHAsjF,EAAsBnrE,KAAOirE,EAAWI,cACtCF,EAAsBnrE,MAEjBirE,EAAWK,kBAAkBH,GAEtC,IAAII,EAAgBN,EAAWG,SAASlpD,GACxC,IAAKqpD,EACH,MAAM,IAAI1jF,MAAM,uCAElB,GAAI0jF,EAAcC,OAGhB,OAAKrsC,EAAK+rC,iBAGVK,EAAcvrE,KAAOirE,EAAWI,cAAcE,EAAcvrE,MACrDirE,EAAWK,kBAAkBC,IAH3BrpD,EAKX,IAAIupD,EAAYR,EAAWG,SAASnpD,GACpC,IAAKwpD,EACH,MAAM,IAAI5jF,MAAM,mCAElB,IAAK4jF,EAAUC,QAAUD,EAAUzrE,MAA8B,MAAtByrE,EAAUzrE,KAAK,GAAY,CAGpE,IAAI+zC,EAAY+2B,EAAoBh4C,KAAK24C,EAAUzrE,MACnDyrE,EAAUC,OAAS33B,EAAU,GAC7B03B,EAAUzrE,KAAO+zC,EAAU,GAEzB03B,EAAUC,SAAWD,EAAUzrE,OACjCyrE,EAAUzrE,KAAO,KAEnB,IAAI2rE,EAAa,CAGfH,OAAQC,EAAUD,OAClBE,OAAQH,EAAcG,OACtB1rE,KAAM,KACN4rE,OAAQL,EAAcK,OACtB3wE,MAAOswE,EAActwE,MACrB4wE,SAAUN,EAAcM,UAE1B,IAAKN,EAAcG,SAIjBC,EAAWD,OAASD,EAAUC,OAGA,MAA1BH,EAAcvrE,KAAK,IACrB,GAAKurE,EAAcvrE,KAgBZ,CAKL,IAAI8rE,EAAcL,EAAUzrE,KACxB+rE,EACFD,EAAY1nE,UAAU,EAAG0nE,EAAYE,YAAY,KAAO,GACxDT,EAAcvrE,KAChB2rE,EAAW3rE,KAAOirE,EAAWI,cAAcU,QAtB3CJ,EAAW3rE,KAAOyrE,EAAUzrE,KAIvBurE,EAAcK,SACjBD,EAAWC,OAASH,EAAUG,OAIzBL,EAActwE,QACjB0wE,EAAW1wE,MAAQwwE,EAAUxwE,QAqBvC,OALwB,OAApB0wE,EAAW3rE,OACb2rE,EAAW3rE,KAAOm/B,EAAK+rC,gBACnBD,EAAWI,cAAcE,EAAcvrE,MACvCurE,EAAcvrE,MAEbirE,EAAWK,kBAAkBK,IAEtCP,SAAU,SAAU/3E,GAClB,IAAI44E,EAAQpB,EAAU/3C,KAAKz/B,GAC3B,OAAK44E,EAGE,CACLT,OAAQS,EAAM,IAAM,GACpBP,OAAQO,EAAM,IAAM,GACpBjsE,KAAMisE,EAAM,IAAM,GAClBL,OAAQK,EAAM,IAAM,GACpBhxE,MAAOgxE,EAAM,IAAM,GACnBJ,SAAUI,EAAM,IAAM,IARf,MAWXZ,cAAe,SAAUrrE,GAOvBA,EAAOA,EAAKyX,MAAM,IAAI4I,UAAU1c,KAAK,IAAIW,QAAQymE,EAAiB,IASlE,MACE/qE,EAAKxZ,UAAYwZ,EAAOA,EAAKsE,QAAQ0mE,EAAqB,KAAKxkF,QAEjE,OAAOwZ,EAAKyX,MAAM,IAAI4I,UAAU1c,KAAK,KAEvC2nE,kBAAmB,SAAUW,GAC3B,OACEA,EAAMT,OACNS,EAAMP,OACNO,EAAMjsE,KACNisE,EAAML,OACNK,EAAMhxE,MACNgxE,EAAMJ,WAMVnpF,EAAOC,QAAUsoF,GAnKrB,I,oCCSA,IAEItwC,EAAKuxC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAC3DC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EACtDC,EAAM5vC,EAAO6vC,EAAaC,EAAeC,EAAYC,EACrDC,EAAYC,EAAYC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAAMC,EAL5DC,EAAaz8E,KAAK0R,IAAI,EAAG,IAAM,GAQlC,WACC,IAAIvZ,EAyCJ,GAxCA4zC,EAAQ,CACN2wC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNrC,KAAM,GACNsC,KAAM,GACNrC,KAAM,GACNC,KAAM,GACNY,KAAM,GACNX,KAAM,GACNU,KAAM,GACND,KAAM,GACNR,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNgC,KAAM,GACN/B,KAAM,GACNC,KAAM,GACNM,KAAM,GACNyB,KAAM,GACNxB,KAAM,GACNyB,KAAM,GACNC,KAAM,GACNzB,KAAM,GACN0B,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACNC,KAAM,GACN7B,KAAM,GACNR,KAAM,GACNU,KAAM,GACND,KAAM,GACNR,KAAM,GACNqC,KAAM,IAKkB,qBAAf3lE,WAAX,CAIA,IAAKzf,KAAK4zC,EACJA,EAAMvzC,eAAeL,KACvB4zC,EAAM5zC,GAAK,CACTA,EAAEqlF,WAAW,GACbrlF,EAAEqlF,WAAW,GACbrlF,EAAEqlF,WAAW,GACbrlF,EAAEqlF,WAAW,KAKnB5B,EAAc,IAAIhkE,WAAW,CAC3B,IAAI4lE,WAAW,GACf,IAAIA,WAAW,GACf,IAAIA,WAAW,GACf,IAAIA,WAAW,KAEjB1B,EAAa,IAAIlkE,WAAW,CAC1B,IAAI4lE,WAAW,GACf,IAAIA,WAAW,GACf,IAAIA,WAAW,GACf,IAAIA,WAAW,KAEjB3B,EAAgB,IAAIjkE,WAAW,CAAC,EAAG,EAAG,EAAG,IACzCmkE,EAAa,IAAInkE,WAAW,CAC1B,EACA,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,IAAM,IAAM,IAAM,IAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,GAAM,IAAM,IAAM,IAClB,IAAM,GAAM,GAAM,IAClB,IAAM,IAAM,IAAM,IAAM,IAE1BokE,EAAa,IAAIpkE,WAAW,CAC1B,EACA,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,IAAM,IAAM,IAAM,IAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,GAAM,IAAM,IAAM,IAClB,IAAM,GAAM,GAAM,IAClB,IAAM,IAAM,IAAM,IAAM,IAE1BqkE,EAAa,CACXrzD,MAAOmzD,EACPjzD,MAAOkzD,GAETI,EAAO,IAAIxkE,WAAW,CACpB,EACA,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,GAClB,IAAM,IAAM,IAAM,GAClB,EACA,EAAM,EAAM,IAEdukE,EAAO,IAAIvkE,WAAW,CACpB,EACA,EAAM,EAAM,EACZ,EAAM,EACN,EAAM,IAERykE,EAAO,IAAIzkE,WAAW,CACpB,EACA,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,IAEpB0kE,EAAOD,EACPE,EAAO,IAAI3kE,WAAW,CACpB,EACA,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,IAEpB4kE,EAAOH,EACPH,EAAO,IAAItkE,WAAW,CACpB,EACA,EAAM,EAAM,EACZ,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,MApIV,GAwIAoxB,EAAM,SAASjqC,GACb,IAGE5G,EACAhG,EACAsrF,EAJA9zD,EAAU,GACVhM,EAAO,EAKT,IAAKxlB,EAAI,EAAGA,EAAIC,UAAUvD,OAAQsD,IAChCwxB,EAAQ1rB,KAAK7F,UAAUD,IAGzBA,EAAIwxB,EAAQ90B,OAGZ,MAAOsD,IACLwlB,GAAQgM,EAAQxxB,GAAG2f,WAQrB,IANA3lB,EAAS,IAAIylB,WAAW+F,EAAO,GAC/B8/D,EAAO,IAAIpgE,SAASlrB,EAAOmrB,OAAQnrB,EAAO0lB,WAAY1lB,EAAO2lB,YAC7D2lE,EAAKC,UAAU,EAAGvrF,EAAO2lB,YACzB3lB,EAAOgrB,IAAIpe,EAAM,GAGZ5G,EAAI,EAAGwlB,EAAO,EAAGxlB,EAAIwxB,EAAQ90B,OAAQsD,IACxChG,EAAOgrB,IAAIwM,EAAQxxB,GAAIwlB,GACvBA,GAAQgM,EAAQxxB,GAAG2f,WAErB,OAAO3lB,GAGTooF,EAAO,WACL,OAAOvxC,EAAI+C,EAAMwuC,KAAMvxC,EAAI+C,EAAM8wC,KAAMT,KAGzC5B,EAAO,SAAS55E,GACd,OAAOooC,EAAI+C,EAAMyuC,KAAM,IAAI5iE,WAAW,CACpC,EACA,EAAM,EAAM,EAGZ,EACA,GACA,EAAM,EACN,EAGA,EACA,GACA,GACA,GACA,EAAM,EAAM,EACZ,EAAM,EAAM,IAAM,IAClB,EAAM,EAAM,IAAM,IAGlB,EACA,EAGChX,EAAMiyB,iBAAmB,EAAMjyB,EAAMoyB,yBAA2B,EAChEpyB,EAAMoyB,wBAA0B,EAAMpyB,EAAMkyB,cAAgB,EAC7D,EAAM,EAAM,MAIhB2nD,EAAO,WACL,OAAOzxC,EAAI+C,EAAM0uC,KAAMmB,EAAaC,EAAeD,EAAaE,IAGlET,EAAO,SAASt8E,GACd,OAAOiqC,EAAI+C,EAAMsvC,KAAMY,EAAWl9E,KAEpC27E,EAAO,SAASj8E,GACd,OAAOuqC,EAAI+C,EAAM2uC,KAAMj8E,IAEzB28E,EAAO,SAASx6E,GACd,IAAIzO,EAAS,IAAIylB,WAAW,CAC1B,EACA,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,GAAM,IAEjBhX,EAAMtK,WAAa,GAAM,IACzBsK,EAAMtK,WAAa,GAAM,IACzBsK,EAAMtK,WAAc,EAAK,IACT,IAAjBsK,EAAMtK,SACN,GAAM,IACN,EAAM,IAaR,OAPIsK,EAAMmyB,aACR5gC,EAAO,IAAOyO,EAAMmyB,aAAe,GAAM,IACzC5gC,EAAO,IAAOyO,EAAMmyB,aAAe,GAAM,IACzC5gC,EAAO,IAAOyO,EAAMmyB,aAAgB,EAAK,IACzC5gC,EAAO,IAAkC,IAA3ByO,EAAgB,YAGzBooC,EAAI+C,EAAMqvC,KAAMjpF,IAEzBgpF,EAAO,SAASv6E,GACd,OAAOooC,EAAI+C,EAAMovC,KAAMC,EAAKx6E,GAAQy6E,EAAKz6E,EAAM7B,MAAO67E,EAAKh6E,KAE7D+5E,EAAO,SAASgD,GACd,OAAO30C,EAAI+C,EAAM4uC,KAAM,IAAI/iE,WAAW,CACpC,EACA,EAAM,EAAM,GACM,WAAjB+lE,IAAgC,IACf,SAAjBA,IAA8B,IACb,MAAjBA,IAA4B,EACZ,IAAjBA,MAGJ/C,EAAO,SAASh6E,GACd,OAAOooC,EAAI+C,EAAM6uC,KACS,UAAfh6E,EAAM7B,KAAmBiqC,EAAI+C,EAAMwxC,KAAMrB,GAAQlzC,EAAI+C,EAAMgxC,KAAMZ,GACjE5B,IACAgB,EAAK36E,KAElBi6E,EAAO,SAAS8C,EAAgBljC,GAC9B,IACEmjC,EAAiB,GACjBzlF,EAAIsiD,EAAO5lD,OAEb,MAAOsD,IACLylF,EAAezlF,GAAKsjF,EAAKhhC,EAAOtiD,IAElC,OAAO6wC,EAAIroB,MAAM,KAAM,CACrBorB,EAAM8uC,KACNF,EAAKgD,IACL/yD,OAAOgzD,KAOX9C,EAAO,SAASrgC,GACd,IACEtiD,EAAIsiD,EAAO5lD,OACXgpF,EAAQ,GAEV,MAAO1lF,IACL0lF,EAAM1lF,GAAK8iF,EAAKxgC,EAAOtiD,IAGzB,OAAO6wC,EAAIroB,MAAM,KAAM,CAACorB,EAAM+uC,KAAME,EAAK,aAAapwD,OAAOizD,GAAOjzD,OAAOmwD,EAAKtgC,MAElFsgC,EAAO,SAAStgC,GACd,IACEtiD,EAAIsiD,EAAO5lD,OACXgpF,EAAQ,GAEV,MAAO1lF,IACL0lF,EAAM1lF,GAAKujF,EAAKjhC,EAAOtiD,IAEzB,OAAO6wC,EAAIroB,MAAM,KAAM,CAACorB,EAAMgvC,MAAMnwD,OAAOizD,KAE7C7C,EAAO,SAAS1kF,GACd,IACEwrB,EAAQ,IAAIlK,WAAW,CACrB,EACA,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,GAAM,KACN,WAAXthB,IAA0B,IACf,SAAXA,IAAwB,IACb,MAAXA,IAAsB,EACZ,IAAXA,EACA,EAAM,EAAM,EAAM,EAClB,EAAM,EACN,EAAM,EACN,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,GAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,IAAM,IAAM,IAAM,MAEtB,OAAO0yC,EAAI+C,EAAMivC,KAAMl5D,IAGzBw5D,EAAO,SAAS16E,GACd,IAGEk9E,EACA3lF,EAHA4lF,EAAUn9E,EAAMm9E,SAAW,GAC3Bj8D,EAAQ,IAAIlK,WAAW,EAAImmE,EAAQlpF,QAOrC,IAAKsD,EAAI,EAAGA,EAAI4lF,EAAQlpF,OAAQsD,IAC9B2lF,EAAQC,EAAQ5lF,GAAG2lF,MAEnBh8D,EAAM3pB,EAAI,GAAM2lF,EAAME,WAAa,EAChCF,EAAMG,cAAgB,EACtBH,EAAmB,cAGxB,OAAO90C,EAAI+C,EAAMuvC,KACNx5D,IAGby5D,EAAO,SAAS36E,GACd,OAAOooC,EAAI+C,EAAMwvC,KACNC,EAAK56E,GACLooC,EAAI+C,EAAMoxC,KAAMX,GAChBxzC,EAAI+C,EAAMkxC,KAAMX,GAChBtzC,EAAI+C,EAAMmxC,KAAMX,GAChBvzC,EAAI+C,EAAMixC,KAAMX,KAG5B,WACC,IAAI6B,EAAaC,EAEjB3C,EAAO,SAAS56E,GAEd,OAAOooC,EAAI+C,EAAMyvC,KAAM,IAAI5jE,WAAW,CACpC,EACA,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,IACD,UAAfhX,EAAM7B,KAAmBm/E,EAAYt9E,GAASu9E,EAAYv9E,KAGhEs9E,EAAc,SAASt9E,GACrB,IAKEzI,EAJAimF,EAAMx9E,EAAMw9E,KAAO,GACnBC,EAAMz9E,EAAMy9E,KAAO,GACnBC,EAAwB,GACxBC,EAAuB,GAIzB,IAAKpmF,EAAI,EAAGA,EAAIimF,EAAIvpF,OAAQsD,IAC1BmmF,EAAsBrgF,MAA0B,MAApBmgF,EAAIjmF,GAAG2f,cAAyB,GAC5DwmE,EAAsBrgF,KAA0B,IAApBmgF,EAAIjmF,GAAG2f,YACnCwmE,EAAwBA,EAAsB1zD,OAAOhK,MAAMroB,UAAU5F,MAAM8F,KAAK2lF,EAAIjmF,KAItF,IAAKA,EAAI,EAAGA,EAAIkmF,EAAIxpF,OAAQsD,IAC1BomF,EAAqBtgF,MAA0B,MAApBogF,EAAIlmF,GAAG2f,cAAyB,GAC3DymE,EAAqBtgF,KAA0B,IAApBogF,EAAIlmF,GAAG2f,YAClCymE,EAAuBA,EAAqB3zD,OAAOhK,MAAMroB,UAAU5F,MAAM8F,KAAK4lF,EAAIlmF,KAGpF,OAAO6wC,EAAI+C,EAAM2wC,KAAM,IAAI9kE,WAAW,CACpC,EAAM,EAAM,EACZ,EAAM,EAAM,EACZ,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,GACH,MAAdhX,EAAMhN,QAAmB,EACZ,IAAdgN,EAAMhN,OACU,MAAfgN,EAAMtM,SAAoB,EACZ,IAAfsM,EAAMtM,OACN,EAAM,GAAM,EAAM,EAClB,EAAM,GAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EACN,GACA,IAAM,IAAM,IAAM,IAClB,IAAM,IAAM,IAAM,GAClB,GAAM,IAAM,IAAM,IAClB,IAAM,IAAM,GAAM,GAClB,IAAM,IAAM,IAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EACZ,EAAM,GACN,GAAM,KACJ00C,EAAI+C,EAAM4wC,KAAM,IAAI/kE,WAAW,CACjC,EACAhX,EAAM49E,WACN59E,EAAM69E,qBACN79E,EAAM89E,SACN,KACA9zD,OAAO,CACPwzD,EAAIvpF,SACH+1B,OAAO0zD,GAAuB1zD,OAAO,CACtCyzD,EAAIxpF,SACH+1B,OAAO2zD,KACFv1C,EAAI+C,EAAM6wC,KAAM,IAAIhlE,WAAW,CAC7B,EAAM,GAAM,IAAM,IAClB,EAAM,GAAM,IAAM,IAClB,EAAM,GAAM,IAAM,SAK9BumE,EAAc,SAASv9E,GACrB,OAAOooC,EAAI+C,EAAM+wC,KAAM,IAAIllE,WAAW,CAGpC,EAAM,EAAM,EACZ,EAAM,EAAM,EACZ,EAAM,EAGN,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,GACI,MAArBhX,EAAMkyB,eAA0B,EACX,IAArBlyB,EAAMkyB,cAEa,MAAnBlyB,EAAMqyB,aAAwB,EACX,IAAnBryB,EAAMqyB,WACP,EAAM,EACN,EAAM,GAEc,MAAnBryB,EAAMmyB,aAAwB,EACX,IAAnBnyB,EAAMmyB,WACP,EAAM,IAGJynD,EAAK55E,KAzGb,GA6GAs6E,EAAO,SAASt6E,GACd,IAAIzO,EAAS,IAAIylB,WAAW,CAC1B,EACA,EAAM,EAAM,EACZ,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,GACN,WAAXhX,EAAMpB,KAAoB,IACf,SAAXoB,EAAMpB,KAAkB,IACb,MAAXoB,EAAMpB,KAAgB,EACZ,IAAXoB,EAAMpB,GACN,EAAM,EAAM,EAAM,GACA,WAAjBoB,EAAMtK,WAA0B,IACf,SAAjBsK,EAAMtK,WAAwB,IACb,MAAjBsK,EAAMtK,WAAsB,EACZ,IAAjBsK,EAAMtK,SACN,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,EACN,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,GAAM,EAAM,EAAM,GACH,MAAdsK,EAAMhN,QAAmB,EACZ,IAAdgN,EAAMhN,MACN,EAAM,GACU,MAAfgN,EAAMtM,SAAoB,EACZ,IAAfsM,EAAMtM,OACN,EAAM,IAGR,OAAO00C,EAAI+C,EAAMmvC,KAAM/oF,IAOzBspF,EAAO,SAAS76E,GACd,IAAI+9E,EAAqBC,EAAyBC,EAC9CC,EAAuBC,EACvBC,EAA8BC,EA2ClC,OAzCAN,EAAsB31C,EAAI+C,EAAMuxC,KAAM,IAAI1lE,WAAW,CACnD,EACA,EAAM,EAAM,IACA,WAAXhX,EAAMpB,KAAoB,IACf,SAAXoB,EAAMpB,KAAkB,IACb,MAAXoB,EAAMpB,KAAgB,EACX,IAAXoB,EAAMpB,GACP,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,KAGpBw/E,EAA+Bh/E,KAAK6F,MAAMjF,EAAMs+E,qBAAuBzC,EAAa,IACpFwC,EAA+Bj/E,KAAK6F,MAAMjF,EAAMs+E,qBAAuBzC,EAAa,IAEpFmC,EAA0B51C,EAAI+C,EAAMsxC,KAAM,IAAIzlE,WAAW,CACvD,EACA,EAAM,EAAM,EAEXonE,IAAiC,GAAM,IACvCA,IAAiC,GAAM,IACvCA,IAAkC,EAAK,IACT,IAA/BA,EACCC,IAAiC,GAAM,IACvCA,IAAiC,GAAM,IACvCA,IAAkC,EAAK,IACT,IAA/BA,KAMFF,EAAa,GAQM,UAAfn+E,EAAM7B,MACR8/E,EAAmBlD,EAAK/6E,EAAOm+E,GACxB/1C,EAAI+C,EAAM0vC,KACNkD,EACAC,EACAC,KAMbC,EAAwBxD,EAAK16E,GAC7Bi+E,EAAmBlD,EAAK/6E,EACAk+E,EAAsBjqF,OAASkqF,GAChD/1C,EAAI+C,EAAM0vC,KACNkD,EACAC,EACAC,EACAC,KAQb7D,EAAO,SAASr6E,GAEd,OADAA,EAAMtK,SAAWsK,EAAMtK,UAAY,WAC5B0yC,EAAI+C,EAAMkvC,KACNC,EAAKt6E,GACLu6E,EAAKv6E,KAGlB86E,EAAO,SAAS96E,GACd,IAAIzO,EAAS,IAAIylB,WAAW,CAC1B,EACA,EAAM,EAAM,GACA,WAAXhX,EAAMpB,KAAoB,IACf,SAAXoB,EAAMpB,KAAkB,IACb,MAAXoB,EAAMpB,KAAgB,EACX,IAAXoB,EAAMpB,GACP,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,EAClB,EAAM,EAAM,EAAM,IAUpB,MAJmB,UAAfoB,EAAM7B,OACR5M,EAAOA,EAAO0C,OAAS,GAAK,GAGvBm0C,EAAI+C,EAAM2vC,KAAMvpF,IAGxB,WACC,IAAIgtF,EAAWC,EAAWC,EAM1BA,EAAa,SAAStB,EAAS9hF,GAC7B,IAAIqjF,EAAkB,EAAGC,EAAc,EACnCC,EAAe,EAAGC,EAAwB,EAkB9C,OAfI1B,EAAQlpF,cACkBzC,IAAxB2rF,EAAQ,GAAGznF,WACbgpF,EAAkB,QAEIltF,IAApB2rF,EAAQ,GAAGpgE,OACb4hE,EAAc,QAESntF,IAArB2rF,EAAQ,GAAGD,QACb0B,EAAe,QAEwBptF,IAArC2rF,EAAQ,GAAG0B,wBACbA,EAAwB,IAIrB,CACL,EACA,EACAH,EAAkBC,EAAcC,EAAeC,EAC/C,GACkB,WAAjB1B,EAAQlpF,UAAyB,IAChB,SAAjBkpF,EAAQlpF,UAAuB,IACd,MAAjBkpF,EAAQlpF,UAAqB,EACb,IAAjBkpF,EAAQlpF,QACE,WAAToH,KAAyB,IAChB,SAATA,KAAuB,IACd,MAATA,KAAqB,EACb,IAATA,IAIJmjF,EAAY,SAASx+E,EAAO3E,GAC1B,IAAI6lB,EAAOi8D,EAAS2B,EAAQvnF,EAO5B,IALA4lF,EAAUn9E,EAAMm9E,SAAW,GAC3B9hF,GAAU,GAAU,GAAK8hF,EAAQlpF,OAEjCitB,EAAQu9D,EAAWtB,EAAS9hF,GAEvB9D,EAAI,EAAGA,EAAI4lF,EAAQlpF,OAAQsD,IAC9BunF,EAAS3B,EAAQ5lF,GACjB2pB,EAAQA,EAAM8I,OAAO,EACA,WAAlB80D,EAAOppF,YAA2B,IAChB,SAAlBopF,EAAOppF,YAAyB,IACd,MAAlBopF,EAAOppF,YAAuB,EACb,IAAlBopF,EAAOppF,UACQ,WAAdopF,EAAO/hE,QAAuB,IAChB,SAAd+hE,EAAO/hE,QAAqB,IACd,MAAd+hE,EAAO/hE,QAAmB,EACb,IAAd+hE,EAAO/hE,KACN+hE,EAAO5B,MAAM6B,WAAa,EAAKD,EAAO5B,MAAME,UAC5C0B,EAAO5B,MAAMG,cAAgB,EAC3ByB,EAAO5B,MAAM8B,eAAiB,EAC9BF,EAAO5B,MAAM+B,cAAgB,EAC9BH,EAAO5B,MAAMgC,gBACoB,MAAnCJ,EAAO5B,MAAMiC,oBACsB,GAAnCL,EAAO5B,MAAMiC,qBACmB,WAA/BL,EAAOD,yBAAwC,IAChB,SAA/BC,EAAOD,yBAAsC,IACd,MAA/BC,EAAOD,yBAAoC,EACb,IAA/BC,EAAOD,wBAGX,OAAOz2C,EAAI+C,EAAM4vC,KAAM,IAAI/jE,WAAWkK,KAGxCq9D,EAAY,SAASv+E,EAAO3E,GAC1B,IAAI6lB,EAAOi8D,EAAS2B,EAAQvnF,EAO5B,IALA4lF,EAAUn9E,EAAMm9E,SAAW,GAC3B9hF,GAAU,GAAU,EAAI8hF,EAAQlpF,OAEhCitB,EAAQu9D,EAAWtB,EAAS9hF,GAEvB9D,EAAI,EAAGA,EAAI4lF,EAAQlpF,OAAQsD,IAC9BunF,EAAS3B,EAAQ5lF,GACjB2pB,EAAQA,EAAM8I,OAAO,EACA,WAAlB80D,EAAOppF,YAA2B,IAChB,SAAlBopF,EAAOppF,YAAyB,IACd,MAAlBopF,EAAOppF,YAAuB,EACb,IAAlBopF,EAAOppF,UACQ,WAAdopF,EAAO/hE,QAAuB,IAChB,SAAd+hE,EAAO/hE,QAAqB,IACd,MAAd+hE,EAAO/hE,QAAmB,EACb,IAAd+hE,EAAO/hE,OAGX,OAAOqrB,EAAI+C,EAAM4vC,KAAM,IAAI/jE,WAAWkK,KAGxC65D,EAAO,SAAS/6E,EAAO3E,GACrB,MAAmB,UAAf2E,EAAM7B,KACDogF,EAAUv+E,EAAO3E,GAGnBmjF,EAAUx+E,EAAO3E,IA3G5B,GA+GAlL,EAAOC,QAAU,CACfypF,KAAMA,EACNC,KAAMA,EACNG,KAAMA,EACNC,KAAMA,EACN1lD,YAAa,SAASqlB,GACpB,IAGEtoD,EAFA6tF,EAAWvF,IACXwF,EAAQnF,EAAKrgC,GAMf,OAHAtoD,EAAS,IAAIylB,WAAWooE,EAASloE,WAAamoE,EAAMnoE,YACpD3lB,EAAOgrB,IAAI6iE,GACX7tF,EAAOgrB,IAAI8iE,EAAOD,EAASloE,YACpB3lB,K,oCCpvBX,IAGI+tF,EAHAj8D,EAAS,EAAQ,QASrBi8D,EAAY,WACV,IACEC,EAAa,IAAIvoE,WACjBwoE,EAAY,EAEdF,EAAU3nF,UAAUof,KAAKlf,KAAK9C,MAE9BA,KAAK0qF,aAAe,SAASluD,GAC3BiuD,EAAYjuD,GAGdx8B,KAAK2qF,gBAAkB,SAASC,EAAQC,GACtC,IACEC,EAAcF,EAAOC,EAAY,IAAM,GACzBD,EAAOC,EAAY,IAAM,GACzBD,EAAOC,EAAY,IAAM,EACzBD,EAAOC,EAAY,GACjC1C,EAAQyC,EAAOC,EAAY,GAC3BE,GAAyB,GAAR5C,IAAe,EAElC,OAAI4C,EACKD,EAAa,GAEfA,EAAa,IAGtB9qF,KAAKgrF,cAAgB,SAASJ,EAAQC,GACpC,IACEI,GAAoC,IAAxBL,EAAOC,EAAY,KAAc,EAC7CK,EAASN,EAAOC,EAAY,IAAM,EAClCM,EAAkC,KAAxBP,EAAOC,EAAY,GAE/B,OAAQM,EAAUD,EAAUD,GAG9BjrF,KAAKsI,KAAO,SAAS6jB,GACnB,IAGEi/D,EACA/hF,EACA8rB,EACAk2D,EALAC,EAAY,EACZT,EAAY,EAQVL,EAAWtrF,QACbmsF,EAAab,EAAWtrF,OACxBsrF,EAAa,IAAIvoE,WAAWkK,EAAMhK,WAAakpE,GAC/Cb,EAAWhjE,IAAIgjE,EAAW/iE,SAAS,EAAG4jE,IACtCb,EAAWhjE,IAAI2E,EAAOk/D,IAEtBb,EAAar+D,EAGf,MAAOq+D,EAAWtrF,OAAS2rF,GAAa,EACtC,GAAKL,EAAWK,KAAe,IAAIhD,WAAW,IACzC2C,EAAWK,EAAY,KAAO,IAAIhD,WAAW,IAC7C2C,EAAWK,EAAY,KAAO,IAAIhD,WAAW,GAuB3C,IAA6B,EAAxB2C,EAAWK,IAC4B,OAAV,IAA5BL,EAAWK,EAAY,IAD7B,CAKL,GAAIL,EAAWtrF,OAAS2rF,EAAY,EAClC,MAOF,GAJAS,EAAYtrF,KAAKgrF,cAAcR,EAAYK,GAIvCS,EAAYd,EAAWtrF,OACzB,MAGFi2B,EAAS,CACP/rB,KAAM,QACNN,KAAM0hF,EAAW/iE,SAASojE,EAAWA,EAAYS,GACjDl+D,IAAKq9D,EACLp8D,IAAKo8D,GAEPzqF,KAAKmG,QAAQ,OAAQgvB,GACrB01D,GAAaS,OAGfT,QApDA,CAME,GAAIL,EAAWtrF,OAAS2rF,EAAY,GAClC,MAQF,GAJAS,EAAYtrF,KAAK2qF,gBAAgBH,EAAYK,GAIzCS,EAAYd,EAAWtrF,OACzB,MAEFmK,EAAQ,CACND,KAAM,iBACNN,KAAM0hF,EAAW/iE,SAASojE,EAAWA,EAAYS,IAEnDtrF,KAAKmG,QAAQ,OAAQkD,GACrBwhF,GAAaS,EA+BjBF,EAAYZ,EAAWtrF,OAAS2rF,EAG9BL,EADEY,EAAY,EACDZ,EAAW/iE,SAASojE,GAEpB,IAAI5oE,aAKvBsoE,EAAU3nF,UAAY,IAAI0rB,EAE1BlzB,EAAOC,QAAUkvF,G,4CC5HjB,IAAIgB,EAAa1vF,OAAO2I,QAAU,WAChC,SAASgnF,KACT,OAAO,SAASrwE,GACd,GAAyB,IAArB1Y,UAAUvD,OACZ,MAAM,IAAIqB,MAAM,kDAGlB,OADAirF,EAAE5oF,UAAYuY,EACP,IAAIqwE,GAPmB,GAelC,SAASC,EAAaC,EAAWtlF,GAC/BpG,KAAK8N,KAAO,eACZ9N,KAAK0lB,KAAOgmE,EAAUhmE,KACtB1lB,KAAKoG,QAAUA,GAAWslF,EAAUtlF,QAkBtC,SAASulF,EAAeC,GAEtB,SAASC,EAAextB,EAAGtjD,EAAGQ,EAAGuwE,GAC/B,OAAiB,MAAL,EAAJztB,GAA0B,IAAL,EAAJtjD,IAAmB,EAAJQ,IAAc,EAAJuwE,GAAS,IAG7D,IAAI/wE,EAAI6wE,EAAM3pD,MAAM,oCACpB,OAAKlnB,EAIDA,EAAE,GAEG8wE,EAAe9wE,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAGiC,QAAQ,IAAK,IAAKjC,EAAE,IAClDA,EAAE,GAAK,GAGT8wE,EAAe9wE,EAAE,GAAIA,EAAE,GAAI,EAAIA,EAAE,IAGjC8wE,EAAe,EAAG9wE,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAZhC,KAkBX,SAASgxE,IACP/rF,KAAKutE,OAASge,EAAW,MAwD3B,SAASS,EAAaJ,EAAOv1C,EAAU41C,EAAeC,GACpD,IAAIriD,EAASqiD,EAAaN,EAAMz7D,MAAM+7D,GAAc,CAACN,GACrD,IAAK,IAAIppF,KAAKqnC,EACZ,GAAyB,kBAAdA,EAAOrnC,GAAlB,CAGA,IAAI2pF,EAAKtiD,EAAOrnC,GAAG2tB,MAAM87D,GACzB,GAAkB,IAAdE,EAAGjtF,OAAP,CAGA,IAAIi0C,EAAIg5C,EAAG,GACP1jD,EAAI0jD,EAAG,GACX91C,EAASlD,EAAG1K,KAIhB,SAAS2jD,EAASR,EAAOjiF,EAAK0iF,GAE5B,IAAIC,EAASV,EAEb,SAASW,IACP,IAAIC,EAAKb,EAAeC,GACxB,GAAW,OAAPY,EACF,MAAM,IAAIf,EAAaA,EAAagB,OAAOC,aACrB,wBAA0BJ,GAIlD,OADAV,EAAQA,EAAM5uE,QAAQ,iBAAkB,IACjCwvE,EAIT,SAASG,EAAmBf,EAAOjiF,GACjC,IAAIlJ,EAAW,IAAIsrF,EAEnBC,EAAaJ,GAAO,SAAUz4C,EAAG1K,GAC/B,OAAQ0K,GACR,IAAK,SAEH,IAAK,IAAI3wC,EAAI6pF,EAAWntF,OAAS,EAAGsD,GAAK,EAAGA,IAC1C,GAAI6pF,EAAW7pF,GAAGqH,KAAO4+B,EAAG,CAC1BhoC,EAAS+mB,IAAI2rB,EAAGk5C,EAAW7pF,GAAGoqF,QAC9B,MAGJ,MACF,IAAK,WACHnsF,EAASosF,IAAI15C,EAAG1K,EAAG,CAAC,KAAM,OAC1B,MACF,IAAK,OACH,IAAIqkD,EAAOrkD,EAAEtY,MAAM,KACf48D,EAAQD,EAAK,GACjBrsF,EAASusF,QAAQ75C,EAAG45C,GACpBtsF,EAAS6gE,QAAQnuB,EAAG45C,IAAStsF,EAAS+mB,IAAI,eAAe,GACzD/mB,EAASosF,IAAI15C,EAAG45C,EAAO,CAAC,SACJ,IAAhBD,EAAK5tF,QACPuB,EAASosF,IAAI,YAAaC,EAAK,GAAI,CAAC,QAAS,SAAU,QAEzD,MACF,IAAK,WACHA,EAAOrkD,EAAEtY,MAAM,KACf1vB,EAAS6gE,QAAQnuB,EAAG25C,EAAK,IACL,IAAhBA,EAAK5tF,QACPuB,EAASosF,IAAI,gBAAiBC,EAAK,GAAI,CAAC,QAAS,SAAU,QAE7D,MACF,IAAK,OACHrsF,EAAS6gE,QAAQnuB,EAAG1K,GACpB,MACF,IAAK,QACHhoC,EAASosF,IAAI15C,EAAG1K,EAAG,CAAC,QAAS,SAAU,MAAO,OAAQ,UACtD,SAED,IAAK,MAGR9+B,EAAIijF,OAASnsF,EAASqJ,IAAI,SAAU,MACpCH,EAAI22D,SAAW7/D,EAASqJ,IAAI,WAAY,IACxCH,EAAIsjF,KAAOxsF,EAASqJ,IAAI,OAAQ,QAChCH,EAAIujF,UAAYzsF,EAASqJ,IAAI,YAAa,SAC1CH,EAAIwjF,YAAc1sF,EAASqJ,IAAI,eAAe,GAC9CH,EAAIqe,KAAOvnB,EAASqJ,IAAI,OAAQ,KAChCH,EAAIyjF,MAAQ3sF,EAASqJ,IAAI,QAAS,UAClCH,EAAI2O,SAAW7X,EAASqJ,IAAI,WAAY,CACtCyW,MAAO,EACPrjB,KAAM,EACNguF,OAAQ,GACRlrE,IAAK,IACL7iB,MAAO,KACNwM,EAAIyjF,OACPzjF,EAAI0jF,cAAgB5sF,EAASqJ,IAAI,gBAAiB,CAChDyW,MAAO,QACPrjB,KAAM,QACNguF,OAAQ,SACRlrE,IAAK,MACL7iB,MAAO,OACNwM,EAAIyjF,OAGT,SAASE,IACP1B,EAAQA,EAAM5uE,QAAQ,OAAQ,IAOhC,GAHAswE,IACA3jF,EAAI0B,UAAYkhF,IAChBe,IAC2B,WAAvB1B,EAAM2B,OAAO,EAAG,GAClB,MAAM,IAAI9B,EAAaA,EAAagB,OAAOC,aACpB,qEACAJ,GAEzBV,EAAQA,EAAM2B,OAAO,GACrBD,IACA3jF,EAAI4B,QAAUghF,IAGde,IACAX,EAAmBf,EAAOjiF,GAzN5B8hF,EAAa7oF,UAAY2oF,EAAWhrF,MAAMqC,WAC1C6oF,EAAa7oF,UAAU6B,YAAcgnF,EAGrCA,EAAagB,OAAS,CACpBe,aAAc,CACZ9nE,KAAM,EACNtf,QAAS,+BAEXsmF,aAAc,CACZhnE,KAAM,EACNtf,QAAS,0BAmCb2lF,EAASnpF,UAAY,CAEnB4kB,IAAK,SAAS2rB,EAAG1K,GACVzoC,KAAK8J,IAAIqpC,IAAY,KAAN1K,IAClBzoC,KAAKutE,OAAOp6B,GAAK1K,IAQrB3+B,IAAK,SAASqpC,EAAGs6C,EAAMC,GACrB,OAAIA,EACK1tF,KAAKmyC,IAAIgB,GAAKnzC,KAAKutE,OAAOp6B,GAAKs6C,EAAKC,GAEtC1tF,KAAKmyC,IAAIgB,GAAKnzC,KAAKutE,OAAOp6B,GAAKs6C,GAGxCt7C,IAAK,SAASgB,GACZ,OAAOA,KAAKnzC,KAAKutE,QAGnBsf,IAAK,SAAS15C,EAAG1K,EAAG3mC,GAClB,IAAK,IAAIsZ,EAAI,EAAGA,EAAItZ,EAAE5C,SAAUkc,EAC9B,GAAIqtB,IAAM3mC,EAAEsZ,GAAI,CACdpb,KAAKwnB,IAAI2rB,EAAG1K,GACZ,QAKNukD,QAAS,SAAS75C,EAAG1K,GACf,UAAUrhC,KAAKqhC,IACjBzoC,KAAKwnB,IAAI2rB,EAAGjzC,SAASuoC,EAAG,MAI5B64B,QAAS,SAASnuB,EAAG1K,GAEnB,SAASA,EAAExG,MAAM,8BACfwG,EAAI1Y,WAAW0Y,GACXA,GAAK,GAAKA,GAAK,QACjBzoC,KAAKwnB,IAAI2rB,EAAG1K,IACL,KAkIf,IAAIklD,EAAS,CACX,QAAS,IACT,OAAQ,IACR,OAAQ,IACR,QAAS,IACT,QAAS,IACT,SAAU,KAGRC,EAAW,CACb5yE,EAAG,OACHxY,EAAG,IACHT,EAAG,IACH8rF,EAAG,IACHC,KAAM,OACNC,GAAI,KACJtlD,EAAG,OACHulD,KAAM,QAGJC,EAAiB,CACnBxlD,EAAG,QACHulD,KAAM,QAGJE,EAAe,CACjBH,GAAI,QAIN,SAASI,EAAazxF,EAAQkvF,GAC5B,SAASwC,IAEP,IAAKxC,EACH,OAAO,KAIT,SAASyC,EAAQ7xF,GAEf,OADAovF,EAAQA,EAAM2B,OAAO/wF,EAAO0C,QACrB1C,EAGT,IAAIue,EAAI6wE,EAAM3pD,MAAM,uBAGpB,OAAOosD,EAAQtzE,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAIjC,SAASuzE,EAAUj3E,GACjB,OAAOs2E,EAAOt2E,GAEhB,SAASk3E,EAAShzE,GAChB,MAAQR,EAAIQ,EAAE0mB,MAAM,8BAClB1mB,EAAIA,EAAEyB,QAAQjC,EAAE,GAAIuzE,GAEtB,OAAO/yE,EAGT,SAASizE,EAAUC,EAASl9C,GAC1B,OAAQ28C,EAAa38C,EAAQm9C,YACtBR,EAAa38C,EAAQm9C,aAAeD,EAAQC,UAIrD,SAASn1E,EAAcnQ,EAAMulF,GAC3B,IAAIl+C,EAAUm9C,EAASxkF,GACvB,IAAKqnC,EACH,OAAO,KAET,IAAIc,EAAU70C,EAAO4c,SAASC,cAAck3B,GAC5Cc,EAAQm9C,UAAYj+C,EACpB,IAAI3iC,EAAOmgF,EAAe7kF,GAI1B,OAHI0E,GAAQ6gF,IACVp9C,EAAQzjC,GAAQ6gF,EAAWr2D,QAEtBiZ,EAGT,IAEI8G,EAFAu2C,EAAUlyF,EAAO4c,SAASC,cAAc,OACxCk1E,EAAUG,EAEVC,EAAW,GAEf,MAA6B,QAArBx2C,EAAI+1C,KACV,GAAa,MAAT/1C,EAAE,GA+CNo2C,EAAQp9C,YAAY30C,EAAO4c,SAASw7B,eAAey5C,EAASl2C,SA/C5D,CACE,GAAa,MAATA,EAAE,GAAY,CAEZw2C,EAAS3vF,QACT2vF,EAASA,EAAS3vF,OAAS,KAAOm5C,EAAEk1C,OAAO,GAAGvwE,QAAQ,IAAK,MAC7D6xE,EAASnjD,MACT+iD,EAAUA,EAAQzwD,YAGpB,SAEF,IACI+W,EADAy3C,EAAKb,EAAetzC,EAAEk1C,OAAO,EAAGl1C,EAAEn5C,OAAS,IAE/C,GAAIstF,EAAI,CAENz3C,EAAOr4C,EAAO4c,SAASw1E,4BAA4B,YAAatC,GAChEiC,EAAQp9C,YAAY0D,GACpB,SAEF,IAAIh6B,EAAIs9B,EAAEpW,MAAM,oDAEhB,IAAKlnB,EACH,SAIF,GADAg6B,EAAOx7B,EAAcwB,EAAE,GAAIA,EAAE,KACxBg6B,EACH,SAIF,IAAKy5C,EAAUC,EAAS15C,GACtB,SAGEh6B,EAAE,KACJg6B,EAAKhF,UAAYh1B,EAAE,GAAGwyE,OAAO,GAAGvwE,QAAQ,IAAK,MAI/C6xE,EAASvmF,KAAKyS,EAAE,IAChB0zE,EAAQp9C,YAAY0D,GACpB05C,EAAU15C,EAQd,OAAO65C,EAQT,IAAIG,EAAkB,CAAC,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAC9E,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MACxE,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MACxE,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MACxE,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MACxE,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MACxE,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAO,MAAQ,CAAC,KAAQ,MACzD,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAC/D,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAC/D,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAC/D,CAAC,MAAQ,OAAS,CAAC,MAAQ,OAAS,CAAC,MAAS,OAAU,CAAC,MAAS,OAClE,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OACtE,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OACtE,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OACtE,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OACtE,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,MAAS,OACtE,CAAC,MAAS,OAAU,CAAC,MAAS,OAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QACtE,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QACtE,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QACtE,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QACtE,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QACtE,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QACtE,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QACtE,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QACtE,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,OAAS,QAAU,CAAC,QAAU,UAExE,SAASC,EAAgBt3C,GACvB,IAAK,IAAIl1C,EAAI,EAAGA,EAAIusF,EAAgB7vF,OAAQsD,IAAK,CAC/C,IAAIke,EAAequE,EAAgBvsF,GACnC,GAAIk1C,GAAYh3B,EAAa,IAAMg3B,GAAYh3B,EAAa,GAC1D,OAAO,EAIX,OAAO,EAGT,SAASuuE,EAAc9yB,GACrB,IAEIzkB,EAFAw3C,EAAY,GACZ1jF,EAAO,GAGX,IAAK2wD,IAAWA,EAAOxd,WACrB,MAAO,MAGT,SAASwwC,EAAUD,EAAWn6C,GAC5B,IAAK,IAAIvyC,EAAIuyC,EAAK4J,WAAWz/C,OAAS,EAAGsD,GAAK,EAAGA,IAC/C0sF,EAAU5mF,KAAKysC,EAAK4J,WAAWn8C,IAInC,SAAS4sF,EAAaF,GACpB,IAAKA,IAAcA,EAAUhwF,OAC3B,OAAO,KAGT,IAAI61C,EAAOm6C,EAAUxjD,MACjBlgC,EAAOupC,EAAKlE,aAAekE,EAAK/D,UACpC,GAAIxlC,EAAM,CAGR,IAAIuP,EAAIvP,EAAKy2B,MAAM,cACnB,OAAIlnB,GACFm0E,EAAUhwF,OAAS,EACZ6b,EAAE,IAEJvP,EAET,MAAqB,SAAjBupC,EAAKtE,QACA2+C,EAAaF,GAElBn6C,EAAK4J,YACPwwC,EAAUD,EAAWn6C,GACdq6C,EAAaF,SAFtB,EAMFC,EAAUD,EAAW/yB,GACrB,MAAQ3wD,EAAO4jF,EAAaF,GAC1B,IAAK,IAAI1sF,EAAI,EAAGA,EAAIgJ,EAAKtM,OAAQsD,IAE/B,GADAk1C,EAAWlsC,EAAKq8E,WAAWrlF,GACvBwsF,EAAgBt3C,GAClB,MAAO,MAIb,MAAO,MAGT,SAAS23C,EAAe1lF,GACtB,GAAwB,kBAAbA,EAAIsjF,OACVtjF,EAAIwjF,aAAgBxjF,EAAIsjF,MAAQ,GAAKtjF,EAAIsjF,MAAQ,KACpD,OAAOtjF,EAAIsjF,KAEb,IAAKtjF,EAAIsB,QAAUtB,EAAIsB,MAAMqkF,gBACxB3lF,EAAIsB,MAAMqkF,cAAcC,aAC3B,OAAQ,EAKV,IAHA,IAAItkF,EAAQtB,EAAIsB,MACZowD,EAAYpwD,EAAMqkF,cAClB36E,EAAQ,EACHnS,EAAI,EAAGA,EAAI64D,EAAUn8D,QAAUm8D,EAAU74D,KAAOyI,EAAOzI,IACpC,YAAtB64D,EAAU74D,GAAG8gC,MACf3uB,IAGJ,OAAkB,IAATA,EAGX,SAAS66E,KAoBT,SAASC,EAAY/yF,EAAQiN,EAAK+lF,GAChC,IAAIC,EAAQ,aAAevoF,KAAKikC,UAAUC,WACtCyvB,EAAQ,yBACRuB,EAAkB,qBAElBqzB,IACF50B,EAAQ,qBACRuB,EAAkB,gBAGpBkzB,EAAS1sF,KAAK9C,MACdA,KAAK2J,IAAMA,EAIX3J,KAAKm8D,OAASgyB,EAAazxF,EAAQiN,EAAI6B,MACvC,IAAIokF,EAAS,CACX70B,MAAOA,EACPuB,gBAAiBA,EACjBhkD,SAAU,WACVpb,KAAM,EACNC,MAAO,EACPm2C,IAAK,EACLwpB,OAAQ,EACR+yB,QAAS,UAGNF,IACHC,EAAOE,YAA+B,KAAjBnmF,EAAI22D,SAAkB,gBACiB,OAAjB32D,EAAI22D,SAAoB,cACA,cACnEsvB,EAAOG,YAAc,aAEvB/vF,KAAKgwF,YAAYJ,EAAQ5vF,KAAKm8D,QAK9Bn8D,KAAKmsD,IAAMzvD,EAAO4c,SAASC,cAAc,OACzCq2E,EAAS,CACPK,UAAyB,WAAdtmF,EAAIyjF,MAAqB,SAAWzjF,EAAIyjF,MACnD8C,KAAMR,EAAaQ,KACnBC,WAAY,WACZ73E,SAAU,YAGPq3E,IACHC,EAAOQ,UAAYnB,EAAcjvF,KAAKm8D,QACtCyzB,EAAOE,YAA+B,KAAjBnmF,EAAI22D,SAAkB,gBACiB,OAAjB32D,EAAI22D,SAAoB,cACA,cACnE+vB,kBAAqB,aAGvBrwF,KAAKgwF,YAAYJ,GAEjB5vF,KAAKmsD,IAAI9a,YAAYrxC,KAAKm8D,QAK1B,IAAIm0B,EAAU,EACd,OAAQ3mF,EAAI0jF,eACZ,IAAK,QACHiD,EAAU3mF,EAAI2O,SACd,MACF,IAAK,SACHg4E,EAAU3mF,EAAI2O,SAAY3O,EAAIqe,KAAO,EACrC,MACF,IAAK,MACHsoE,EAAU3mF,EAAI2O,SAAW3O,EAAIqe,KAC7B,MAMmB,KAAjBre,EAAI22D,SACNtgE,KAAKgwF,YAAY,CACf9yF,KAAO8C,KAAKuwF,YAAYD,EAAS,KACjCryF,MAAO+B,KAAKuwF,YAAY5mF,EAAIqe,KAAM,OAMpChoB,KAAKgwF,YAAY,CACf18C,IAAKtzC,KAAKuwF,YAAYD,EAAS,KAC/B3xF,OAAQqB,KAAKuwF,YAAY5mF,EAAIqe,KAAM,OAIvChoB,KAAKwwF,KAAO,SAASn9C,GACnBrzC,KAAKgwF,YAAY,CACf18C,IAAKtzC,KAAKuwF,YAAYl9C,EAAIC,IAAK,MAC/BwpB,OAAQ98D,KAAKuwF,YAAYl9C,EAAIypB,OAAQ,MACrC5/D,KAAM8C,KAAKuwF,YAAYl9C,EAAIn2C,KAAM,MACjCC,MAAO6C,KAAKuwF,YAAYl9C,EAAIl2C,MAAO,MACnCwB,OAAQqB,KAAKuwF,YAAYl9C,EAAI10C,OAAQ,MACrCV,MAAO+B,KAAKuwF,YAAYl9C,EAAIp1C,MAAO,SAUzC,SAASwyF,EAAY90F,GACnB,IAMI+0F,EAAI/xF,EAAQV,EAAOq1C,EANnBq8C,EAAQ,aAAevoF,KAAKikC,UAAUC,WAO1C,GAAI3vC,EAAIwwD,IAAK,CACXxtD,EAAShD,EAAIwwD,IAAIhY,aACjBl2C,EAAQtC,EAAIwwD,IAAIlY,YAChBX,EAAM33C,EAAIwwD,IAAIwkC,UAEd,IAAIC,GAASA,EAAQj1F,EAAIwwD,IAAIxN,cAAgBiyC,EAAQA,EAAM,KAC/CA,EAAMC,gBAAkBD,EAAMC,iBAC1Cl1F,EAAMA,EAAIwwD,IAAIlZ,wBAKdy9C,EAAKE,EAAQvmF,KAAKijB,IAAKsjE,EAAM,IAAMA,EAAM,GAAGjyF,QAAW,EAAGhD,EAAIgD,OAASiyF,EAAM1xF,QAChE,EAGfc,KAAK9C,KAAOvB,EAAIuB,KAChB8C,KAAK7C,MAAQxB,EAAIwB,MACjB6C,KAAKszC,IAAM33C,EAAI23C,KAAOA,EACtBtzC,KAAKrB,OAAShD,EAAIgD,QAAUA,EAC5BqB,KAAK88D,OAASnhE,EAAImhE,QAAWxpB,GAAO33C,EAAIgD,QAAUA,GAClDqB,KAAK/B,MAAQtC,EAAIsC,OAASA,EAC1B+B,KAAK8wF,gBAAoBr0F,IAAPi0F,EAAmBA,EAAK/0F,EAAIm1F,WAE1CnB,IAAU3vF,KAAK8wF,aACjB9wF,KAAK8wF,WAAa,IAuHtB,SAASC,EAAsBr0F,EAAQs0F,EAAUC,EAAcC,GAO7D,SAASC,EAAiBpvF,EAAGqvF,GAK3B,IAJA,IAAIC,EACAC,EAAoB,IAAIb,EAAY1uF,GACpC6+D,EAAa,EAERp+D,EAAI,EAAGA,EAAI4uF,EAAKlyF,OAAQsD,IAAK,CACpC,MAAOT,EAAEwvF,qBAAqBN,EAAcG,EAAK5uF,KACzCT,EAAEyvF,OAAOP,IAAiBlvF,EAAE0vF,YAAYP,GAC9CnvF,EAAEyuF,KAAKY,EAAK5uF,IAId,GAAIT,EAAEyvF,OAAOP,GACX,OAAOlvF,EAET,IAAIuZ,EAAIvZ,EAAE2vF,oBAAoBT,GAG1BrwB,EAAatlD,IACf+1E,EAAe,IAAIZ,EAAY1uF,GAC/B6+D,EAAatlD,GAGfvZ,EAAI,IAAI0uF,EAAYa,GAEtB,OAAOD,GAAgBC,EAGzB,IAAIK,EAAc,IAAIlB,EAAYO,GAC9BrnF,EAAMqnF,EAASrnF,IACfioF,EAAUvC,EAAe1lF,GACzBynF,EAAO,GAGX,GAAIznF,EAAIwjF,YAAa,CACnB,IAAInlE,EACJ,OAAQre,EAAI22D,UACZ,IAAK,GACH8wB,EAAO,CAAE,KAAM,MACfppE,EAAO,SACP,MACF,IAAK,KACHopE,EAAO,CAAE,KAAM,MACfppE,EAAO,QACP,MACF,IAAK,KACHopE,EAAO,CAAE,KAAM,MACfppE,EAAO,QACP,MAGF,IAAI4X,EAAO+xD,EAAYb,WACnBx4E,EAAWsnB,EAAOv1B,KAAK4G,MAAM2gF,GAC7BC,EAAcZ,EAAajpE,GAAQ4X,EACnCkyD,EAAcV,EAAK,GAKnB/mF,KAAKC,IAAIgO,GAAYu5E,IACvBv5E,EAAWA,EAAW,GAAK,EAAI,EAC/BA,GAAYjO,KAAK0nF,KAAKF,EAAcjyD,GAAQA,GAO1CgyD,EAAU,IACZt5E,GAA6B,KAAjB3O,EAAI22D,SAAkB2wB,EAAatyF,OAASsyF,EAAahzF,MACrEmzF,EAAOA,EAAKr4D,WAKd44D,EAAYnB,KAAKsB,EAAax5E,OAEzB,CAEL,IAAI05E,EAAwBL,EAAYb,WAAaG,EAAatyF,OAAU,IAE5E,OAAQgL,EAAIujF,WACZ,IAAK,SACH0E,GAAYI,EAAuB,EACnC,MACF,IAAK,MACHJ,GAAWI,EACX,MAIF,OAAQroF,EAAI22D,UACZ,IAAK,GACH0wB,EAAShB,YAAY,CACnB18C,IAAK09C,EAAST,YAAYqB,EAAS,OAErC,MACF,IAAK,KACHZ,EAAShB,YAAY,CACnB9yF,KAAM8zF,EAAST,YAAYqB,EAAS,OAEtC,MACF,IAAK,KACHZ,EAAShB,YAAY,CACnB7yF,MAAO6zF,EAAST,YAAYqB,EAAS,OAEvC,MAGFR,EAAO,CAAE,KAAM,KAAM,KAAM,MAI3BO,EAAc,IAAIlB,EAAYO,GAGhC,IAAIK,EAAeF,EAAiBQ,EAAaP,GACjDJ,EAASR,KAAKa,EAAaY,kBAAkBhB,IAG/C,SAAS/jC,KAnZTsiC,EAAS5sF,UAAUotF,YAAc,SAASJ,EAAQzjC,GAEhD,IAAK,IAAI5c,KADT4c,EAAMA,GAAOnsD,KAAKmsD,IACDyjC,EACXA,EAAO/sF,eAAe0sC,KACxB4c,EAAIjf,MAAMqC,GAAQqgD,EAAOrgD,KAK/BigD,EAAS5sF,UAAU2tF,YAAc,SAASphF,EAAK+iF,GAC7C,OAAe,IAAR/iF,EAAY,EAAIA,EAAM+iF,GA4G/BzC,EAAY7sF,UAAY2oF,EAAWiE,EAAS5sF,WAC5C6sF,EAAY7sF,UAAU6B,YAAcgrF,EA6CpCgB,EAAY7tF,UAAU4tF,KAAO,SAASY,EAAMe,GAE1C,OADAA,OAAoB11F,IAAX01F,EAAuBA,EAASnyF,KAAK8wF,WACtCM,GACR,IAAK,KACHpxF,KAAK9C,MAAQi1F,EACbnyF,KAAK7C,OAASg1F,EACd,MACF,IAAK,KACHnyF,KAAK9C,MAAQi1F,EACbnyF,KAAK7C,OAASg1F,EACd,MACF,IAAK,KACHnyF,KAAKszC,KAAO6+C,EACZnyF,KAAK88D,QAAUq1B,EACf,MACF,IAAK,KACHnyF,KAAKszC,KAAO6+C,EACZnyF,KAAK88D,QAAUq1B,EACf,QAKJ1B,EAAY7tF,UAAUwvF,SAAW,SAASC,GACxC,OAAOryF,KAAK9C,KAAOm1F,EAAGl1F,OACf6C,KAAK7C,MAAQk1F,EAAGn1F,MAChB8C,KAAKszC,IAAM++C,EAAGv1B,QACd98D,KAAK88D,OAASu1B,EAAG/+C,KAI1Bm9C,EAAY7tF,UAAU6uF,YAAc,SAASvJ,GAC3C,IAAK,IAAI1lF,EAAI,EAAGA,EAAI0lF,EAAMhpF,OAAQsD,IAChC,GAAIxC,KAAKoyF,SAASlK,EAAM1lF,IACtB,OAAO,EAGX,OAAO,GAITiuF,EAAY7tF,UAAU4uF,OAAS,SAASpvD,GACtC,OAAOpiC,KAAKszC,KAAOlR,EAAUkR,KACtBtzC,KAAK88D,QAAU16B,EAAU06B,QACzB98D,KAAK9C,MAAQklC,EAAUllC,MACvB8C,KAAK7C,OAASilC,EAAUjlC,OAOjCszF,EAAY7tF,UAAU2uF,qBAAuB,SAASnvD,EAAWgvD,GAC/D,OAAQA,GACR,IAAK,KACH,OAAOpxF,KAAK9C,KAAOklC,EAAUllC,KAC/B,IAAK,KACH,OAAO8C,KAAK7C,MAAQilC,EAAUjlC,MAChC,IAAK,KACH,OAAO6C,KAAKszC,IAAMlR,EAAUkR,IAC9B,IAAK,KACH,OAAOtzC,KAAK88D,OAAS16B,EAAU06B,SAMnC2zB,EAAY7tF,UAAU8uF,oBAAsB,SAASW,GACnD,IAAI3jD,EAAIrkC,KAAKijB,IAAI,EAAGjjB,KAAKoZ,IAAIzjB,KAAK7C,MAAOk1F,EAAGl1F,OAASkN,KAAKijB,IAAIttB,KAAK9C,KAAMm1F,EAAGn1F,OACxEu3C,EAAIpqC,KAAKijB,IAAI,EAAGjjB,KAAKoZ,IAAIzjB,KAAK88D,OAAQu1B,EAAGv1B,QAAUzyD,KAAKijB,IAAIttB,KAAKszC,IAAK++C,EAAG/+C,MACzEg/C,EAAgB5jD,EAAI+F,EACxB,OAAO69C,GAAiBtyF,KAAKrB,OAASqB,KAAK/B,QAO7CwyF,EAAY7tF,UAAUqvF,kBAAoB,SAASM,GACjD,MAAO,CACLj/C,IAAKtzC,KAAKszC,IAAMi/C,EAAUj/C,IAC1BwpB,OAAQy1B,EAAUz1B,OAAS98D,KAAK88D,OAChC5/D,KAAM8C,KAAK9C,KAAOq1F,EAAUr1F,KAC5BC,MAAOo1F,EAAUp1F,MAAQ6C,KAAK7C,MAC9BwB,OAAQqB,KAAKrB,OACbV,MAAO+B,KAAK/B,QAMhBwyF,EAAY+B,qBAAuB,SAAS72F,GAC1C,IAAIgD,EAAShD,EAAIwwD,IAAMxwD,EAAIwwD,IAAIhY,aAAex4C,EAAI80C,QAAU90C,EAAIw4C,aAAe,EAC3El2C,EAAQtC,EAAIwwD,IAAMxwD,EAAIwwD,IAAIlY,YAAct4C,EAAI80C,QAAU90C,EAAIs4C,YAAc,EACxEX,EAAM33C,EAAIwwD,IAAMxwD,EAAIwwD,IAAIwkC,UAAYh1F,EAAI80C,QAAU90C,EAAIg1F,UAAY,EAEtEh1F,EAAMA,EAAIwwD,IAAMxwD,EAAIwwD,IAAIlZ,wBACVt3C,EAAI80C,QAAU90C,EAAIs3C,wBAA0Bt3C,EAC1D,IAAIoiD,EAAM,CACR7gD,KAAMvB,EAAIuB,KACVC,MAAOxB,EAAIwB,MACXm2C,IAAK33C,EAAI23C,KAAOA,EAChB30C,OAAQhD,EAAIgD,QAAUA,EACtBm+D,OAAQnhE,EAAImhE,QAAWxpB,GAAO33C,EAAIgD,QAAUA,GAC5CV,MAAOtC,EAAIsC,OAASA,GAEtB,OAAO8/C,GA0ITmP,EAAOE,cAAgB,WACrB,MAAO,CACLqlC,OAAQ,SAAS3pF,GACf,IAAKA,EACH,MAAO,GAET,GAAoB,kBAATA,EACT,MAAM,IAAIvI,MAAM,iCAElB,OAAOmyF,mBAAmBC,mBAAmB7pF,OAKnDokD,EAAO0lC,oBAAsB,SAASl2F,EAAQm2F,GAC5C,OAAKn2F,GAAWm2F,EAGT1E,EAAazxF,EAAQm2F,GAFnB,MAKX,IAAIC,EAAoB,IACpBC,EAAa,aACbC,EAAyB,OAK7B9lC,EAAO0O,YAAc,SAASl/D,EAAQuP,EAAMgnF,GAC1C,IAAKv2F,IAAWuP,IAASgnF,EACvB,OAAO,KAIT,MAAOA,EAAQ9hD,WACb8hD,EAAQr+C,YAAYq+C,EAAQ9hD,YAG9B,IAAI+hD,EAAgBx2F,EAAO4c,SAASC,cAAc,OAYlD,SAAS45E,EAAclnF,GACrB,IAAK,IAAIzJ,EAAI,EAAGA,EAAIyJ,EAAK/M,OAAQsD,IAC/B,GAAIyJ,EAAKzJ,GAAG4wF,eAAiBnnF,EAAKzJ,GAAG45D,aACnC,OAAO,EAGX,OAAO,EAIT,GArBA82B,EAAchmD,MAAM50B,SAAW,WAC/B46E,EAAchmD,MAAMhwC,KAAO,IAC3Bg2F,EAAchmD,MAAM/vC,MAAQ,IAC5B+1F,EAAchmD,MAAMoG,IAAM,IAC1B4/C,EAAchmD,MAAM4vB,OAAS,IAC7Bo2B,EAAchmD,MAAMmmD,OAASL,EAC7BC,EAAQ5hD,YAAY6hD,GAefC,EAAclnF,GAAnB,CAOA,IAAIilF,EAAe,GACfD,EAAeR,EAAY+B,qBAAqBU,GAChDr2B,EAAWxyD,KAAK4G,MAAMggF,EAAatyF,OAASm0F,EAAoB,KAAO,IACvEpD,EAAe,CACjBQ,KAAMrzB,EAAW,MAAQk2B,IAG3B,WAGE,IAFA,IAAI/B,EAAUrnF,EAELnH,EAAI,EAAGA,EAAIyJ,EAAK/M,OAAQsD,IAC/BmH,EAAMsC,EAAKzJ,GAGXwuF,EAAW,IAAIvB,EAAY/yF,EAAQiN,EAAK+lF,GACxCwD,EAAc7hD,YAAY2/C,EAAS7kC,KAGnC4kC,EAAsBr0F,EAAQs0F,EAAUC,EAAcC,GAItDvnF,EAAIyyD,aAAe40B,EAAS7kC,IAE5B+kC,EAAa5oF,KAAKmoF,EAAY+B,qBAAqBxB,KAjBvD,QAbE,IAAK,IAAIxuF,EAAI,EAAGA,EAAIyJ,EAAK/M,OAAQsD,IAC/B0wF,EAAc7hD,YAAYplC,EAAKzJ,GAAG45D,eAkCxClP,EAAOtoD,OAAS,SAASlI,EAAQywD,EAAOmmC,GACjCA,IACHA,EAAUnmC,EACVA,EAAQ,IAELA,IACHA,EAAQ,IAGVntD,KAAKtD,OAASA,EACdsD,KAAKmtD,MAAQA,EACbntD,KAAKglB,MAAQ,UACbhlB,KAAK2nB,OAAS,GACd3nB,KAAKszF,QAAUA,GAAW,IAAIC,YAAY,QAC1CvzF,KAAKqsF,WAAa,IAGpBn/B,EAAOtoD,OAAOhC,UAAY,CAGxB4wF,mBAAoB,SAASn8E,GAC3B,KAAIA,aAAao0E,GAGf,MAAMp0E,EAFNrX,KAAKutD,gBAAkBvtD,KAAKutD,eAAel2C,IAK/Co2C,MAAO,SAAU3kD,GACf,IAAI3E,EAAOnE,KAUX,SAASyzF,IACP,IAAI9rE,EAASxjB,EAAKwjB,OACd+rE,EAAM,EACV,MAAOA,EAAM/rE,EAAOzoB,QAA0B,OAAhByoB,EAAO+rE,IAAiC,OAAhB/rE,EAAO+rE,KACzDA,EAEJ,IAAIzG,EAAOtlE,EAAO4lE,OAAO,EAAGmG,GAS5B,MAPoB,OAAhB/rE,EAAO+rE,MACPA,EAEgB,OAAhB/rE,EAAO+rE,MACPA,EAEJvvF,EAAKwjB,OAASA,EAAO4lE,OAAOmG,GACrBzG,EAIT,SAAS0G,EAAY/H,GACnB,IAAInrF,EAAW,IAAIsrF,EAsCnB,GApCAC,EAAaJ,GAAO,SAAUz4C,EAAG1K,GAC/B,OAAQ0K,GACR,IAAK,KACH1yC,EAAS+mB,IAAI2rB,EAAG1K,GAChB,MACF,IAAK,QACHhoC,EAAS6gE,QAAQnuB,EAAG1K,GACpB,MACF,IAAK,QACHhoC,EAASusF,QAAQ75C,EAAG1K,GACpB,MACF,IAAK,eACL,IAAK,iBACH,IAAImrD,EAAKnrD,EAAEtY,MAAM,KACjB,GAAkB,IAAdyjE,EAAG10F,OACL,MAIF,IAAI20F,EAAS,IAAI9H,EAGjB,GAFA8H,EAAOvyB,QAAQ,IAAKsyB,EAAG,IACvBC,EAAOvyB,QAAQ,IAAKsyB,EAAG,KAClBC,EAAO1hD,IAAI,OAAS0hD,EAAO1hD,IAAI,KAClC,MAEF1xC,EAAS+mB,IAAI2rB,EAAI,IAAK0gD,EAAO/pF,IAAI,MACjCrJ,EAAS+mB,IAAI2rB,EAAI,IAAK0gD,EAAO/pF,IAAI,MACjC,MACF,IAAK,SACHrJ,EAASosF,IAAI15C,EAAG1K,EAAG,CAAC,OACpB,SAED,IAAK,MAIJhoC,EAAS0xC,IAAI,MAAO,CACtB,IAAIy6C,EAAS,IAAKzoF,EAAKgpD,MAAM1zB,WAAat1B,EAAKzH,OAAO+8B,WACtDmzD,EAAO3uF,MAAQwC,EAASqJ,IAAI,QAAS,KACrC8iF,EAAOkH,MAAQrzF,EAASqJ,IAAI,QAAS,GACrC8iF,EAAOmH,cAAgBtzF,EAASqJ,IAAI,gBAAiB,GACrD8iF,EAAOoH,cAAgBvzF,EAASqJ,IAAI,gBAAiB,KACrD8iF,EAAOqH,gBAAkBxzF,EAASqJ,IAAI,kBAAmB,GACzD8iF,EAAOsH,gBAAkBzzF,EAASqJ,IAAI,kBAAmB,KACzD8iF,EAAOtzD,OAAS74B,EAASqJ,IAAI,SAAU,IAEvC3F,EAAKgwF,UAAYhwF,EAAKgwF,SAASvH,GAG/BzoF,EAAKkoF,WAAW/jF,KAAK,CACnBuB,GAAIpJ,EAASqJ,IAAI,MACjB8iF,OAAQA,KAQd,SAASwH,EAAkBxI,GACzB,IAAInrF,EAAW,IAAIsrF,EAEnBC,EAAaJ,GAAO,SAASz4C,EAAG1K,GAC9B,OAAO0K,GACP,IAAK,QACH1yC,EAASusF,QAAQ75C,EAAI,IAAK1K,GAC1B,MACF,IAAK,OACHhoC,EAAS+mB,IAAI2rB,EAAI,IAAKw4C,EAAeljD,IACrC,SAED,SAAU,KAEbtkC,EAAKkwF,gBAAkBlwF,EAAKkwF,eAAe,CACzC,OAAU5zF,EAASqJ,IAAI,UACvB,MAASrJ,EAASqJ,IAAI,WAK1B,SAASwqF,EAAY1I,GACfA,EAAM3pD,MAAM,mBAEd+pD,EAAaJ,GAAO,SAASz4C,EAAG1K,GAC9B,OAAO0K,GACP,IAAK,kBACHihD,EAAkB3rD,GAClB,SAED,KAEHujD,EAAaJ,GAAO,SAAUz4C,EAAG1K,GAC/B,OAAQ0K,GACR,IAAK,SAEHwgD,EAAYlrD,GACZ,SAED,KA7HH3/B,IAEF3E,EAAKwjB,QAAUxjB,EAAKmvF,QAAQb,OAAO3pF,EAAM,CAACoC,QAAQ,KAiIpD,IACE,IAAI+hF,EACJ,GAAmB,YAAf9oF,EAAK6gB,MAAqB,CAE5B,IAAK,UAAU5d,KAAKjD,EAAKwjB,QACvB,OAAO3nB,KAGTitF,EAAOwG,IAEP,IAAI14E,EAAIkyE,EAAKhrD,MAAM,sBACnB,IAAKlnB,IAAMA,EAAE,GACX,MAAM,IAAI0wE,EAAaA,EAAagB,OAAOe,cAG7CrpF,EAAK6gB,MAAQ,SAGf,IAAIuvE,GAAuB,EAC3B,MAAOpwF,EAAKwjB,OAAQ,CAElB,IAAK,UAAUvgB,KAAKjD,EAAKwjB,QACvB,OAAO3nB,KAST,OANKu0F,EAGHA,GAAuB,EAFvBtH,EAAOwG,IAKDtvF,EAAK6gB,OACb,IAAK,SAEC,IAAI5d,KAAK6lF,GACXqH,EAAYrH,GACFA,IAEV9oF,EAAK6gB,MAAQ,MAEf,SACF,IAAK,OAEEioE,IACH9oF,EAAK6gB,MAAQ,MAEf,SACF,IAAK,KAEH,GAAI,iBAAiB5d,KAAK6lF,GAAO,CAC/B9oF,EAAK6gB,MAAQ,OACb,MAGF,IAAKioE,EACH,SAKF,GAHA9oF,EAAKwF,IAAM,IAAKxF,EAAKgpD,MAAMriD,QAAU3G,EAAKzH,OAAOoO,QAAQ,EAAG,EAAG,IAC/D3G,EAAK6gB,MAAQ,OAEgB,IAAzBioE,EAAK5vF,QAAQ,UAAe,CAC9B8G,EAAKwF,IAAIE,GAAKojF,EACd,SAIJ,IAAK,MAEH,IACEb,EAASa,EAAM9oF,EAAKwF,IAAKxF,EAAKkoF,YAC9B,MAAOh1E,GACPlT,EAAKqvF,mBAAmBn8E,GAExBlT,EAAKwF,IAAM,KACXxF,EAAK6gB,MAAQ,SACb,SAEF7gB,EAAK6gB,MAAQ,UACb,SACF,IAAK,UACH,IAAIwvE,GAAwC,IAAzBvH,EAAK5vF,QAAQ,UAKhC,IAAK4vF,GAAQuH,IAAiBD,GAAuB,GAAO,CAE1DpwF,EAAKmpD,OAASnpD,EAAKmpD,MAAMnpD,EAAKwF,KAC9BxF,EAAKwF,IAAM,KACXxF,EAAK6gB,MAAQ,KACb,SAEE7gB,EAAKwF,IAAI6B,OACXrH,EAAKwF,IAAI6B,MAAQ,MAEnBrH,EAAKwF,IAAI6B,MAAQyhF,EACjB,SACF,IAAK,SAEEA,IACH9oF,EAAK6gB,MAAQ,MAEf,WAGJ,MAAO3N,GACPlT,EAAKqvF,mBAAmBn8E,GAGL,YAAflT,EAAK6gB,OAAuB7gB,EAAKwF,KAAOxF,EAAKmpD,OAC/CnpD,EAAKmpD,MAAMnpD,EAAKwF,KAElBxF,EAAKwF,IAAM,KAGXxF,EAAK6gB,MAAuB,YAAf7gB,EAAK6gB,MAAsB,YAAc,SAExD,OAAOhlB,MAEToiB,MAAO,WACL,IAAIje,EAAOnE,KACX,IAWE,GATAmE,EAAKwjB,QAAUxjB,EAAKmvF,QAAQb,UAExBtuF,EAAKwF,KAAsB,WAAfxF,EAAK6gB,SACnB7gB,EAAKwjB,QAAU,OACfxjB,EAAKspD,SAKY,YAAftpD,EAAK6gB,MACP,MAAM,IAAIymE,EAAaA,EAAagB,OAAOe,cAE7C,MAAMn2E,GACNlT,EAAKqvF,mBAAmBn8E,GAG1B,OADAlT,EAAKqpD,SAAWrpD,EAAKqpD,UACdxtD,OAIX5E,EAAOC,QAAU6xD,G,oCCryCjB,IAQIunC,EAAuBC,EAAsBC,EAR7CrmE,EAAS,EAAQ,QACnBiG,EAAgB,EAAQ,QACxBqgE,EAAc,EAAQ,QACtBC,EAA0B,EAAQ,QAA+BA,wBAE/DC,EAAkB,EAAQ,QAO5BC,EAAqB,IACrBC,EAAY,GAMdP,EAAwB,WACtB,IACE9sE,EAAS,IAAI1F,WAAW8yE,GACxBE,EAAgB,EAElBR,EAAsB7xF,UAAUof,KAAKlf,KAAK9C,MAI1CA,KAAKsI,KAAO,SAAS6jB,GACnB,IAGEq+D,EAFA0K,EAAa,EACbC,EAAWJ,EAKTE,GACFzK,EAAa,IAAIvoE,WAAWkK,EAAMhK,WAAa8yE,GAC/CzK,EAAWhjE,IAAIG,EAAOF,SAAS,EAAGwtE,IAClCzK,EAAWhjE,IAAI2E,EAAO8oE,GACtBA,EAAgB,GAEhBzK,EAAar+D,EAIf,MAAOgpE,EAAW3K,EAAWroE,WAEvBqoE,EAAW0K,KAAgBF,GAAaxK,EAAW2K,KAAcH,GAWrEE,IACAC,MATEn1F,KAAKmG,QAAQ,OAAQqkF,EAAW/iE,SAASytE,EAAYC,IACrDD,GAAcH,EACdI,GAAYJ,GAaZG,EAAa1K,EAAWroE,aAC1BwF,EAAOH,IAAIgjE,EAAW/iE,SAASytE,GAAa,GAC5CD,EAAgBzK,EAAWroE,WAAa+yE,IAI5Cl1F,KAAKoiB,MAAQ,WAIP6yE,IAAkBF,GAAsBptE,EAAO,KAAOqtE,IACxDh1F,KAAKmG,QAAQ,OAAQwhB,GACrBstE,EAAgB,GAElBj1F,KAAKmG,QAAQ,UAGjBsuF,EAAsB7xF,UAAY,IAAI0rB,EAMtComE,EAAuB,WACrB,IAAIU,EAAUC,EAAUC,EAAUnxF,EAClCuwF,EAAqB9xF,UAAUof,KAAKlf,KAAK9C,MACzCmE,EAAOnE,KAEPA,KAAKu1F,qBAAuB,GAC5Bv1F,KAAKw1F,qBAAkB/4F,EAEvB24F,EAAW,SAASphE,EAASyhE,GAC3B,IAAInvF,EAAS,EAQTmvF,EAAIC,4BACNpvF,GAAU0tB,EAAQ1tB,GAAU,GAGb,QAAbmvF,EAAIrsF,KACNisF,EAASrhE,EAAQvM,SAASnhB,GAASmvF,GAEnCH,EAASthE,EAAQvM,SAASnhB,GAASmvF,IAIvCJ,EAAW,SAASrhE,EAAS2hE,GAC3BA,EAAIC,eAAiB5hE,EAAQ,GAC7B2hE,EAAIE,oBAAsB7hE,EAAQ,GAGlC7vB,EAAK2xF,QAAwB,GAAd9hE,EAAQ,MAAe,EAAIA,EAAQ,IAClD2hE,EAAIG,OAAS3xF,EAAK2xF,QAWpBR,EAAW,SAASthE,EAAS+hE,GAC3B,IAAIC,EAAeC,EAAUC,EAAmB5vF,EAOhD,GAAmB,EAAb0tB,EAAQ,GAAd,CAKA7vB,EAAKqxF,gBAAkB,CACrBviE,MAAO,KACPE,MAAO,KACP,iBAAkB,IAIpB6iE,GAA8B,GAAbhiE,EAAQ,KAAc,EAAIA,EAAQ,GACnDiiE,EAAW,EAAID,EAAgB,EAI/BE,GAAmC,GAAdliE,EAAQ,MAAe,EAAIA,EAAQ,IAGxD1tB,EAAS,GAAK4vF,EACd,MAAO5vF,EAAS2vF,EAAU,CACxB,IAAIE,EAAaniE,EAAQ1tB,GACrB8vF,GAA6B,GAAtBpiE,EAAQ1tB,EAAS,KAAc,EAAI0tB,EAAQ1tB,EAAS,GAK3D6vF,IAAevB,EAAYyB,kBACI,OAA/BlyF,EAAKqxF,gBAAgBviE,MACvB9uB,EAAKqxF,gBAAgBviE,MAAQmjE,EACpBD,IAAevB,EAAY0B,kBACI,OAA/BnyF,EAAKqxF,gBAAgBriE,MAC9BhvB,EAAKqxF,gBAAgBriE,MAAQijE,EACpBD,IAAevB,EAAY2B,uBAEpCpyF,EAAKqxF,gBAAgB,kBAAkBY,GAAOD,GAKhD7vF,GAAsE,IAApC,GAAtB0tB,EAAQ1tB,EAAS,KAAc,EAAI0tB,EAAQ1tB,EAAS,IAIlEyvF,EAAIP,gBAAkBrxF,EAAKqxF,kBAM7Bx1F,KAAKsI,KAAO,SAAS6sB,GACnB,IACE34B,EAAS,GACT8J,EAAS,EAmBX,GAjBA9J,EAAOk5F,6BAA2C,GAAZvgE,EAAO,IAG7C34B,EAAO45F,IAAkB,GAAZjhE,EAAO,GACpB34B,EAAO45F,MAAQ,EACf55F,EAAO45F,KAAOjhE,EAAO,IAOH,GAAZA,EAAO,MAAe,EAAK,IAC/B7uB,GAAU6uB,EAAO7uB,GAAU,GAIV,IAAf9J,EAAO45F,IACT55F,EAAO4M,KAAO,MACdgsF,EAASjgE,EAAO1N,SAASnhB,GAAS9J,GAClCwD,KAAKmG,QAAQ,OAAQ3J,QAChB,GAAIA,EAAO45F,MAAQp2F,KAAK81F,OAAQ,CACrCt5F,EAAO4M,KAAO,MACdgsF,EAASjgE,EAAO1N,SAASnhB,GAAS9J,GAClCwD,KAAKmG,QAAQ,OAAQ3J,GAGrB,MAAOwD,KAAKu1F,qBAAqBr2F,OAC/Bc,KAAKw2F,YAAYxrE,MAAMhrB,KAAMA,KAAKu1F,qBAAqB7oE,mBAEvBjwB,IAAzBuD,KAAKw1F,gBAGdx1F,KAAKu1F,qBAAqBjtF,KAAK,CAAC6sB,EAAQ7uB,EAAQ9J,IAEhDwD,KAAKw2F,YAAYrhE,EAAQ7uB,EAAQ9J,IAIrCwD,KAAKw2F,YAAc,SAASrhE,EAAQ7uB,EAAQ9J,GAEtCA,EAAO45F,MAAQp2F,KAAKw1F,gBAAgBviE,MACtCz2B,EAAO25F,WAAavB,EAAYyB,iBACvB75F,EAAO45F,MAAQp2F,KAAKw1F,gBAAgBriE,MAC7C32B,EAAO25F,WAAavB,EAAY0B,iBAIhC95F,EAAO25F,WAAan2F,KAAKw1F,gBAAgB,kBAAkBh5F,EAAO45F,KAGpE55F,EAAO4M,KAAO,MACd5M,EAAOsM,KAAOqsB,EAAO1N,SAASnhB,GAE9BtG,KAAKmG,QAAQ,OAAQ3J,KAIzBk4F,EAAqB9xF,UAAY,IAAI0rB,EACrComE,EAAqB+B,aAAgB,CACnCC,KAAM,GACNC,KAAM,IAWRhC,EAAmB,WACjB,IACExwF,EAAOnE,KAEPizB,EAAQ,CACNnqB,KAAM,GACNkf,KAAM,GAERmL,EAAQ,CACNrqB,KAAM,GACNkf,KAAM,GAER4uE,EAAgB,CACd9tF,KAAM,GACNkf,KAAM,GAER6uE,EAAW,SAAS7iE,EAAS8iE,GAC3B,IAAIC,EAGJD,EAAIE,aAAe,GAAMhjE,EAAQ,IAAM,EAAKA,EAAQ,IAGpD8iE,EAAIG,uBAAiD,KAAV,EAAbjjE,EAAQ,IAItC+iE,EAAc/iE,EAAQ,GAUJ,IAAd+iE,IAIFD,EAAI1pE,KAAoB,GAAb4G,EAAQ,KAAc,IAChB,IAAdA,EAAQ,MAAe,IACT,IAAdA,EAAQ,MAAe,IACT,IAAdA,EAAQ,MAAgB,GACV,IAAdA,EAAQ,OAAiB,EAC5B8iE,EAAI1pE,KAAO,EACX0pE,EAAI1pE,MAAsB,EAAd4G,EAAQ,OAAgB,EACpC8iE,EAAIzoE,IAAMyoE,EAAI1pE,IACI,GAAd2pE,IACFD,EAAIzoE,KAAqB,GAAd2F,EAAQ,MAAe,IACjB,IAAdA,EAAQ,MAAe,IACT,IAAdA,EAAQ,MAAe,IACT,IAAdA,EAAQ,MAAe,GACT,IAAdA,EAAQ,OAAgB,EAC3B8iE,EAAIzoE,KAAO,EACXyoE,EAAIzoE,MAAsB,EAAd2F,EAAQ,OAAgB,IAMxC8iE,EAAIhuF,KAAOkrB,EAAQvM,SAAS,EAAIuM,EAAQ,KAE1CkjE,EAAc,SAAShsF,EAAQ9B,EAAM+tF,GACnC,IAQE5S,EAPA6S,EAAa,IAAIn1E,WAAW/W,EAAO8c,MACnCtR,EAAQ,CACNtN,KAAMA,GAER5G,EAAI,EACJ8D,EAAS,EACT+wF,GAAkB,EAKpB,GAAKnsF,EAAOpC,KAAK5J,UAAUgM,EAAO8c,KAAO,GAAzC,CAMA,IAHAtR,EAAM4gF,QAAUpsF,EAAOpC,KAAK,GAAGstF,IAG1B5zF,EAAI,EAAGA,EAAI0I,EAAOpC,KAAK5J,OAAQsD,IAClC+hF,EAAWr5E,EAAOpC,KAAKtG,GAEvB40F,EAAW5vE,IAAI+8D,EAASz7E,KAAMxC,GAC9BA,GAAUi+E,EAASz7E,KAAKqZ,WAI1B00E,EAASO,EAAY1gF,GAIrB2gF,EAA2B,UAATjuF,GAAoBsN,EAAMsgF,cAAgB9rF,EAAO8c,MAG/DmvE,GAAcE,KAChBnsF,EAAO8c,KAAO,EACd9c,EAAOpC,KAAK5J,OAAS,GAKnBm4F,GACFlzF,EAAKgC,QAAQ,OAAQuQ,KAI3Bi+E,EAAiB/xF,UAAUof,KAAKlf,KAAK9C,MAErCA,KAAKsI,KAAO,SAASQ,IACnB,CACE6sF,IAAK,aAILmB,IAAK,WACH,IAAI5rF,EAAQirF,EAEZ,OAAQrtF,EAAKqtF,YACb,KAAKvB,EAAYyB,iBACjB,KAAKvB,EAAgBuB,iBACnBnrF,EAAS+nB,EACTkjE,EAAa,QACb,MACF,KAAKvB,EAAY0B,iBACfprF,EAASioB,EACTgjE,EAAa,QACb,MACF,KAAKvB,EAAY2B,qBACfrrF,EAAS0rF,EACTT,EAAa,iBACb,MACF,QAEE,OAKErtF,EAAK4sF,2BACPwB,EAAYhsF,EAAQirF,GAAY,GAKlCjrF,EAAOpC,KAAKR,KAAKQ,GACjBoC,EAAO8c,MAAQlf,EAAKA,KAAKqZ,YAE3B4zE,IAAK,WACH,IACEr/E,EAAQ,CACNtN,KAAM,WACN07C,OAAQ,IAEV0wC,EAAkB1sF,EAAK0sF,gBAGK,OAA1BA,EAAgBviE,OAClBvc,EAAMouC,OAAOx8C,KAAK,CAChBivF,kBAAmB,CACjBhO,oBAAqB,GAEvB1/E,IAAK2rF,EAAgBviE,MACrBukE,MAAO,MACPpuF,KAAM,UAGoB,OAA1BosF,EAAgBriE,OAClBzc,EAAMouC,OAAOx8C,KAAK,CAChBivF,kBAAmB,CACjBhO,oBAAqB,GAEvB1/E,IAAK2rF,EAAgBriE,MACrBqkE,MAAO,OACPpuF,KAAM,UAIVjF,EAAKgC,QAAQ,OAAQuQ,MAEtB5N,EAAKM,SAYVpJ,KAAKoiB,MAAQ,WAGX80E,EAAYjkE,EAAO,SACnBikE,EAAY/jE,EAAO,SACnB+jE,EAAYN,EAAe,kBAC3B52F,KAAKmG,QAAQ,UAGjBwuF,EAAiB/xF,UAAY,IAAI0rB,EAEjC,IAAImpE,EAAO,CACTC,QAAS,EACT3C,mBAAoBA,EACpBN,sBAAuBA,EACvBC,qBAAsBA,EACtBC,iBAAkBA,EAClBE,wBAAyBA,EACzBtgE,cAAeA,EAAcA,cAC7BG,aAAcH,EAAcG,aAC5BijE,eAAgB,EAAQ,SAG1B,IAAK,IAAIvuF,KAAQwrF,EACXA,EAAY/xF,eAAeuG,KAC7BquF,EAAKruF,GAAQwrF,EAAYxrF,IAI7BhO,EAAOC,QAAUo8F,G,oCCzfjB,W,oCCEAr8F,EAAOC,QAAU,CACfg7F,iBAAkB,GAClBC,iBAAkB,GAClBC,qBAAsB,K,kCCAxB16F,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAaG,EAAK0N,EAAKunE,GAAO,IAAIh1E,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASsH,EAAKpmB,EAAW8zB,EAAKxN,EAAW+0E,EAAKh1E,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA6O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAAhW,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BN,EAAMM,EAAQoN,EAAM9zB,EAAUq7F,EAAM/0E,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE/c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAIi8B,EAAiB,EAAQ,QAEzBC,EAAkB/kC,EAAuB8kC,GAEzCh3B,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCF,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCuuF,EAAsD,EAAQ,QAE9DC,EAAuDp8F,EAAuBm8F,GAE9En5D,EAAY,EAAQ,QAEpBq5D,EAAuB,IAAI91E,WAAW,OAAOkO,MAAM,IAAI1xB,KAAI,SAAUo6B,GACvE,OAAOA,EAAKgvD,WAAW,OAGrBmQ,EAAe,SAAsBC,GACvC,OAAOntE,OAAOC,aAAaC,MAAM,KAAMitE,IAWrCC,EAAmB,SAAWC,GAGhC,SAASD,EAAiBz3F,GACxB,IAAI+d,EAAU/b,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,GAAKA,UAAU,GAEnFsB,EAAgB/D,KAAMk4F,GAEtB11E,EAAK3mB,OAAOkJ,eAAemzF,EAAiBt1F,WAAY,cAAe5C,MAAM8C,KAAK9C,KAAMS,EAAU+d,GAIlGxe,KAAK0L,aAAe,KAEpB1L,KAAKo4F,gBAAkB,KAqYzB,OAlZA/zF,EAAU6zF,EAAkBC,GAuB5Bp1F,EAAam1F,EAAkB,CAAC,CAC9Bv1F,IAAK,YACL5G,MAAO,WACL,IAAKiE,KAAKo4F,kBAAoBp4F,KAAKo4F,gBAAgBnsF,KAAK/M,OACtD,OAAOuK,EAAU,WAAWsiB,mBAG9B,IAAI9f,EAAOjM,KAAKo4F,gBAAgBnsF,KAC5BsU,EAAQtU,EAAK,GAAGZ,UAChB2U,EAAM/T,EAAKA,EAAK/M,OAAS,GAAGmM,UAEhC,OAAO5B,EAAU,WAAWsiB,iBAAiB,CAAC,CAACxL,EAAOP,OAavD,CACDrd,IAAK,cACL5G,MAAO,SAAqB0C,GAC1B,IAAI+oB,IAAM/kB,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,KAA2BA,UAAU,GAElF,IAAKhE,EACH,OAAO,KAGT,IAAIoL,GAAK,EAAI60B,EAAUc,eAAe/gC,GAClC45F,EAAYr4F,KAAKs4F,cAAczuF,GAEnC,GAAI2d,IAAQ6wE,GAAa55F,EAAI0tB,MAAO,CAKlC,IAAIosE,EAAqBR,EAAqB51E,WAAa1jB,EAAI0tB,MAAMhK,WACjEq2E,EAAkB,IAAIv2E,WAAWs2E,GAErCC,EAAgBhxE,IAAI/oB,EAAI0tB,OACxBqsE,EAAgBhxE,IAAIuwE,EAAsBt5F,EAAI0tB,MAAMhK,YAEpDniB,KAAKs4F,cAAczuF,GAAMwuF,EAAY,CACnCx0E,YAAaplB,EAAIolB,YACjBxd,UAAW5H,EAAI4H,UACf8lB,MAAOqsE,GAIX,OAAOH,GAAa55F,IASrB,CACDkE,IAAK,qBACL5G,MAAO,WACL,OAAOiE,KAAKy4F,WAAaz4F,KAAKo4F,kBAAoBp4F,KAAK6f,WAUxD,CACDld,IAAK,QACL5G,MAAO,WAGL,OAFAiE,KAAKglB,MAAQ,QACbhlB,KAAKspC,kBACEtpC,KAAK04F,mBAWb,CACD/1F,IAAK,QACL5G,MAAO,SAAe48F,GACpB,MAAsB,qBAAXA,IAIX34F,KAAKo4F,gBAAkBO,EAIJ,SAAf34F,KAAKglB,OAAoBhlB,KAAK44F,sBAChC54F,KAAK64F,SARE74F,KAAKo4F,kBAmBf,CACDz1F,IAAK,SACL5G,MAAO,SAAgBwkB,EAAOP,IAC5B,EAAI83E,EAAqD,YAAYv3E,EAAOP,EAAKhgB,KAAKo4F,mBAYvF,CACDz1F,IAAK,cACL5G,MAAO,WACL,IAAI+I,EAAQ9E,KAEPA,KAAK84F,aACR94F,KAAK84F,WAAa94F,KAAKwkC,gBAAgBjjC,aAAavB,KAAKy4F,UAAWz4F,KAAK6xD,YAAa7xD,KAAK+4F,iBAAkB/4F,KAAKg5F,iBAIpH,IAAI5mE,EAAcpyB,KAAKi5F,aAAaj5F,KAAKk5F,YAAal5F,KAAKy4F,UAAWz4F,KAAK0yB,WAAY1yB,KAAKukC,aAAcvkC,KAAKg5F,eAAgBh5F,KAAK84F,YAIpI,GAFA1mE,EAAcpyB,KAAKm5F,mBAAmB/mE,GAEjCA,EAAL,CAIA,GAA8E,OAA1EpyB,KAAKwkC,gBAAgB40D,2BAA2BhnE,EAAYlpB,UAAoB,CAGlF,IAAImwF,EAAuB,WACzBv0F,EAAMkgB,MAAQ,QACTlgB,EAAM+a,UAET/a,EAAM4zF,kBAMV,OAFA14F,KAAKwkC,gBAAgB7Y,IAAI,kBAAmB0tE,QAC5Cr5F,KAAKglB,MAAQ,uBAIfhlB,KAAKs5F,aAAalnE,MAanB,CACDzvB,IAAK,qBACL5G,MAAO,SAA4Bq2B,GACjC,MAAOA,GAAeA,EAAYxQ,QAAQylC,MACxCj1B,EAAcpyB,KAAKu5F,qBAAqBnnE,EAAY1zB,SAAU0zB,EAAYM,WAAa,EAAGN,EAAYoB,eAAiBpB,EAAYzxB,SAAUyxB,EAAYonE,eAE3J,OAAOpnE,IAQR,CACDzvB,IAAK,iBACL5G,MAAO,WACL,IAAI4pB,EAAS3lB,KAEb,GAAKA,KAAKy5F,iBAAoBz5F,KAAKo4F,gBAAnC,CAKAp4F,KAAKglB,MAAQ,YAEb,IAAIoN,EAAcpyB,KAAKy5F,gBACnB73E,EAAUwQ,EAAYxQ,QAG1B,GAAgD,oBAArCrY,EAAe,WAAW2jD,QAAyBltD,KAAKo4F,iBAAmBp4F,KAAKo4F,gBAAgBj4F,MAAO,CAChH,IAAIyoD,EAAO,WAET,IAAIqF,EAAc,WAChBtoC,EAAO+zE,kBAeT,OAZA/zE,EAAOX,MAAQ,mBACfW,EAAOyyE,gBAAgBj4F,MAAMwrB,IAAI,cAAesiC,GAChDtoC,EAAOyyE,gBAAgBj4F,MAAMwrB,IAAI,cAAc,WAC7ChG,EAAOyyE,gBAAgBj4F,MAAMsf,IAAI,cAAewuC,GAChDtoC,EAAOR,MAAM,CACX/e,QAAS,yBAEXuf,EAAOX,MAAQ,QACfW,EAAOshB,QACPthB,EAAOxf,QAAQ,YAGV,CACLsiC,OAAGhsC,GAnBI,GAuBX,GAAoB,kBAATmsD,EAAmB,OAAOA,EAAKngB,EAG5C7mB,EAAQ+3E,WAAY,EAEpB,IACE35F,KAAK45F,cAAcxnE,GACnB,MAAO/a,GAMP,OALArX,KAAKmlB,MAAM,CACT/e,QAASiR,EAAEjR,UAEbpG,KAAKglB,MAAQ,QACbhlB,KAAKinC,QACEjnC,KAAKmG,QAAQ,SAKtB,GAFAnG,KAAK65F,mBAAmBznE,EAAapyB,KAAKwkC,gBAAgBnT,UAAUe,EAAYlpB,UAAWlJ,KAAKy4F,WAE5FrmE,EAAYonE,cAId,OAHAx5F,KAAKmG,QAAQ,kBACbnG,KAAKy5F,gBAAkB,UACvBz5F,KAAKglB,MAAQ,SAIfoN,EAAYjQ,WAAaiQ,EAAYjG,MAAMhK,WAE3CniB,KAAKkoC,oBAAsBtmB,EAAQjhB,SAE/ByxB,EAAYnmB,KAAK/M,QAEnBc,KAAKw+B,OAAOpM,EAAYnmB,KAAK,GAAGV,QAAS6mB,EAAYnmB,KAAKmmB,EAAYnmB,KAAK/M,OAAS,GAAGqM,SAGzF6mB,EAAYnmB,KAAKlB,SAAQ,SAAUpB,GACjCgc,EAAOyyE,gBAAgBhtF,OAAOzB,MAGhC3J,KAAK85F,wBAxEH95F,KAAKglB,MAAQ,UAkFhB,CACDriB,IAAK,gBACL5G,MAAO,SAAuBq2B,GAC5B,IAAIkhE,OAAU72F,EACVs9F,GAAsB,EAE2B,oBAA1CxwF,EAAe,WAAWgqF,YACnCD,EAAU,IAAI/pF,EAAe,WAAWgqF,YAAY,SAEpDD,EAAU/pF,EAAe,WAAW2jD,OAAOE,gBAC3C2sC,GAAsB,GAGxB,IAAIn0E,EAAS,IAAIrc,EAAe,WAAW2jD,OAAOtoD,OAAO2E,EAAe,WAAYA,EAAe,WAAW4jD,MAAOmmC,GAarH,GAXAlhE,EAAYnmB,KAAO,GACnBmmB,EAAY4nE,aAAe,CAAEC,OAAQ,EAAGC,MAAO,GAE/Ct0E,EAAO0nC,MAAQl7B,EAAYnmB,KAAK3D,KAAKlH,KAAKgxB,EAAYnmB,MACtD2Z,EAAOyuE,eAAiB,SAAU51F,GAChC,OAAO2zB,EAAY4nE,aAAev7F,GAEpCmnB,EAAO2nC,eAAiB,SAAUpoC,GAChC1b,EAAU,WAAWM,IAAIC,KAAK,wCAA0Cmb,EAAM/e,UAG5EgsB,EAAYxQ,QAAQnjB,IAAK,CAC3B,IAAI07F,EAAU/nE,EAAYxQ,QAAQnjB,IAAI0tB,MAElC4tE,IACFI,EAAUnC,EAAamC,IAGzBv0E,EAAO6nC,MAAM0sC,GAGf,IAAIttE,EAAcuF,EAAYjG,MAE1B4tE,IACFltE,EAAcmrE,EAAanrE,IAG7BjH,EAAO6nC,MAAM5gC,GACbjH,EAAOxD,UAgBR,CACDzf,IAAK,qBACL5G,MAAO,SAA4Bq2B,EAAamB,EAAY70B,GAC1D,IAAIkjB,EAAUwQ,EAAYxQ,QAE1B,GAAK2R,EAOL,GAAKnB,EAAYnmB,KAAK/M,OAAtB,CAQA,IAAI86F,EAAe5nE,EAAY4nE,aAC3B/rE,EAAO+rE,EAAaC,OAAS,IAAQD,EAAaE,MAAQ3mE,EAAWD,QAQzE,GANAlB,EAAYnmB,KAAKlB,SAAQ,SAAUpB,GAEjCA,EAAI0B,WAAa4iB,EACjBtkB,EAAI4B,SAAW0iB,MAGZvvB,EAASwyB,SAAU,CACtB,IAAIkpE,EAAahoE,EAAYnmB,KAAK,GAAGZ,UACjCgvF,EAAYjoE,EAAYnmB,KAAKmmB,EAAYnmB,KAAK/M,OAAS,GAAGmM,UAE9D3M,EAASwyB,SAAW,CAClBxqB,cAAehI,EAASgI,cAAgB0rB,EAAYM,WACpD9mB,KAAMvB,KAAKoZ,IAAI22E,EAAYC,EAAYz4E,EAAQjhB,iBAnBjDihB,EAAQylC,OAAQ,MAyBf6wC,EAnZc,CAoZpBz3D,EAAgB,YAEnBplC,EAAQ,WAAa68F,EACrB98F,EAAOC,QAAUA,EAAQ,Y,kCC1czBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAc,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA7gB,GAEnB,SAASS,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAUhH,IAAIqqB,EAAS,WACX,SAASA,IACPvqB,EAAgB/D,KAAMsuB,GAEtBtuB,KAAKuuB,UAAY,GA0GnB,OA9FAxrB,EAAaurB,EAAQ,CAAC,CACpB3rB,IAAK,KACL5G,MAAO,SAAYqN,EAAMolB,GAClBxuB,KAAKuuB,UAAUnlB,KAClBpJ,KAAKuuB,UAAUnlB,GAAQ,IAEzBpJ,KAAKuuB,UAAUnlB,GAAMd,KAAKkmB,KAY3B,CACD7rB,IAAK,MACL5G,MAAO,SAAaqN,EAAMolB,GACxB,IAAKxuB,KAAKuuB,UAAUnlB,GAClB,OAAO,EAGT,IAAIqE,EAAQzN,KAAKuuB,UAAUnlB,GAAM/L,QAAQmxB,GAGzC,OADAxuB,KAAKuuB,UAAUnlB,GAAMqlB,OAAOhhB,EAAO,GAC5BA,GAAS,IAUjB,CACD9K,IAAK,UACL5G,MAAO,SAAiBqN,GACtB,IAAIslB,EAAY1uB,KAAKuuB,UAAUnlB,GAC3B5G,OAAI,EACJtD,OAAS,EACTyvB,OAAO,EAEX,GAAKD,EAOL,GAAyB,IAArBjsB,UAAUvD,OAEZ,IADAA,EAASwvB,EAAUxvB,OACdsD,EAAI,EAAGA,EAAItD,IAAUsD,EACxBksB,EAAUlsB,GAAGM,KAAK9C,KAAMyC,UAAU,SAKpC,IAFAksB,EAAO1D,MAAMroB,UAAU5F,MAAM8F,KAAKL,UAAW,GAC7CvD,EAASwvB,EAAUxvB,OACdsD,EAAI,EAAGA,EAAItD,IAAUsD,EACxBksB,EAAUlsB,GAAGwoB,MAAMhrB,KAAM2uB,KAS9B,CACDhsB,IAAK,UACL5G,MAAO,WACLiE,KAAKuuB,UAAY,KAWlB,CACD5rB,IAAK,OACL5G,MAAO,SAAc6yB,GACnB5uB,KAAK6F,GAAG,QAAQ,SAAUiD,GACxB8lB,EAAYtmB,KAAKQ,UAKhBwlB,EA9GI,GAiHbjzB,EAAQ,WAAaizB,G,kCCzHrB,IAAIsmE,EAAc,EAAQ,QACtB0F,EAAiB,EAAQ,QAAwCA,eACjEC,EAAQ,GACZA,EAAM/N,GAAK,EAAQ,QACnB+N,EAAMxiC,IAAM,EAAQ,QAGpB,IACEyiC,EAAgB,IAChBzF,EAAqB,IACrBC,EAAY,GAEVyF,EAAkB,SAAS3xF,GAC7B,OAAKA,EAAK,KAAO,IAAI++E,WAAW,IAC3B/+E,EAAK,KAAO,IAAI++E,WAAW,IAC3B/+E,EAAK,KAAO,IAAI++E,WAAW,IAU9B6S,EAAY,SAASvuE,EAAO4pE,GAC9B,IAGE5gE,EAAQ/rB,EAFR8rF,EAAa,EACbC,EAAWJ,EAGb,MAAOI,EAAWhpE,EAAMhK,WAEtB,GAAIgK,EAAM+oE,KAAgBF,GAAa7oE,EAAMgpE,KAAcH,EAiC3DE,IACAC,QAlCA,CAKE,OAHAhgE,EAAShJ,EAAM1E,SAASytE,EAAYC,GACpC/rF,EAAOmxF,EAAM/N,GAAGmO,UAAUxlE,EAAQ4gE,EAAIK,KAE9BhtF,GACN,IAAK,MACE2sF,EAAIK,MACPL,EAAIK,IAAMmE,EAAM/N,GAAG6I,SAASlgE,IAE9B,MACF,IAAK,MACE4gE,EAAI6E,QACP7E,EAAI6E,MAAQL,EAAM/N,GAAG8I,SAASngE,IAEhC,MACF,QACE,MAIJ,GAAI4gE,EAAIK,KAAOL,EAAI6E,MACjB,OAGF1F,GAAcH,EACdI,GAAYJ,IAgBd8F,EAAiB,SAAS1uE,EAAO4pE,EAAKv5F,GACxC,IAGE24B,EAAQ/rB,EAAM0xF,EAASC,EAAMC,EAF7B9F,EAAa,EACbC,EAAWJ,EAGTkG,GAAU,EAGd,MAAO9F,EAAWhpE,EAAMhK,WAEtB,GAAIgK,EAAM+oE,KAAgBF,GAAa7oE,EAAMgpE,KAAcH,EAkC3DE,IACAC,QAnCA,CAKE,OAHAhgE,EAAShJ,EAAM1E,SAASytE,EAAYC,GACpC/rF,EAAOmxF,EAAM/N,GAAGmO,UAAUxlE,EAAQ4gE,EAAIK,KAE9BhtF,GACN,IAAK,MACH0xF,EAAUP,EAAM/N,GAAG0O,aAAa/lE,EAAQ4gE,EAAI6E,OAC5CG,EAAOR,EAAM/N,GAAG2O,+BAA+BhmE,GAC/B,UAAZ2lE,GAAuBC,IACzBC,EAAST,EAAM/N,GAAG4O,aAAajmE,GAC3B6lE,IACFA,EAAO5xF,KAAO,QACd5M,EAAO22B,MAAM7qB,KAAK0yF,GAClBC,GAAU,IAGd,MACF,QACE,MAGJ,GAAIA,EACF,MAGF/F,GAAcH,EACdI,GAAYJ,EAYhBI,EAAWhpE,EAAMhK,WACjB+yE,EAAaC,EAAWJ,EACxBkG,GAAU,EACV,MAAO/F,GAAc,EAEnB,GAAI/oE,EAAM+oE,KAAgBF,GAAa7oE,EAAMgpE,KAAcH,EAkC3DE,IACAC,QAnCA,CAKE,OAHAhgE,EAAShJ,EAAM1E,SAASytE,EAAYC,GACpC/rF,EAAOmxF,EAAM/N,GAAGmO,UAAUxlE,EAAQ4gE,EAAIK,KAE9BhtF,GACN,IAAK,MACH0xF,EAAUP,EAAM/N,GAAG0O,aAAa/lE,EAAQ4gE,EAAI6E,OAC5CG,EAAOR,EAAM/N,GAAG2O,+BAA+BhmE,GAC/B,UAAZ2lE,GAAuBC,IACzBC,EAAST,EAAM/N,GAAG4O,aAAajmE,GAC3B6lE,IACFA,EAAO5xF,KAAO,QACd5M,EAAO22B,MAAM7qB,KAAK0yF,GAClBC,GAAU,IAGd,MACF,QACE,MAGJ,GAAIA,EACF,MAGF/F,GAAcH,EACdI,GAAYJ,IAiBdsG,EAAiB,SAASlvE,EAAO4pE,EAAKv5F,GACxC,IAGE24B,EAAQ/rB,EAAM0xF,EAASC,EAAMC,EAAQpxF,EAAOpH,EAAGs0F,EAF/C5B,EAAa,EACbC,EAAWJ,EAGTkG,GAAU,EAEVK,EAAe,CACjBxyF,KAAM,GACNkf,KAAM,GAIR,MAAOmtE,EAAWhpE,EAAMhK,WAEtB,GAAIgK,EAAM+oE,KAAgBF,GAAa7oE,EAAMgpE,KAAcH,EAwD3DE,IACAC,QAzDA,CAKE,OAHAhgE,EAAShJ,EAAM1E,SAASytE,EAAYC,GACpC/rF,EAAOmxF,EAAM/N,GAAGmO,UAAUxlE,EAAQ4gE,EAAIK,KAE9BhtF,GACN,IAAK,MAGH,GAFA0xF,EAAUP,EAAM/N,GAAG0O,aAAa/lE,EAAQ4gE,EAAI6E,OAC5CG,EAAOR,EAAM/N,GAAG2O,+BAA+BhmE,GAC/B,UAAZ2lE,IACEC,IAASE,IACXD,EAAST,EAAM/N,GAAG4O,aAAajmE,GAC3B6lE,IACFA,EAAO5xF,KAAO,QACd5M,EAAOy2B,MAAM3qB,KAAK0yF,GAClBC,GAAU,KAGTz+F,EAAO++F,eAAe,CACzB,GAAIR,GACwB,IAAtBO,EAAatzE,KAAY,CAC3Bpe,EAAQ,IAAIqY,WAAWq5E,EAAatzE,MACpCxlB,EAAI,EACJ,MAAO84F,EAAaxyF,KAAK5J,OACvB43F,EAAMwE,EAAaxyF,KAAK4jB,QACxB9iB,EAAM4d,IAAIsvE,EAAKt0F,GACfA,GAAKs0F,EAAI30E,WAEPo4E,EAAM/N,GAAGgP,4BAA4B5xF,KACvCpN,EAAO++F,cAAgBhB,EAAM/N,GAAG4O,aAAaxxF,GAC7CpN,EAAO++F,cAAcnyF,KAAO,SAE9BkyF,EAAatzE,KAAO,EAGxBszE,EAAaxyF,KAAKR,KAAK6sB,GACvBmmE,EAAatzE,MAAQmN,EAAOhT,WAGhC,MACF,QACE,MAGJ,GAAI84E,GAAWz+F,EAAO++F,cACpB,MAGFrG,GAAcH,EACdI,GAAYJ,EAYhBI,EAAWhpE,EAAMhK,WACjB+yE,EAAaC,EAAWJ,EACxBkG,GAAU,EACV,MAAO/F,GAAc,EAEnB,GAAI/oE,EAAM+oE,KAAgBF,GAAa7oE,EAAMgpE,KAAcH,EAkC3DE,IACAC,QAnCA,CAKE,OAHAhgE,EAAShJ,EAAM1E,SAASytE,EAAYC,GACpC/rF,EAAOmxF,EAAM/N,GAAGmO,UAAUxlE,EAAQ4gE,EAAIK,KAE9BhtF,GACN,IAAK,MACH0xF,EAAUP,EAAM/N,GAAG0O,aAAa/lE,EAAQ4gE,EAAI6E,OAC5CG,EAAOR,EAAM/N,GAAG2O,+BAA+BhmE,GAC/B,UAAZ2lE,GAAuBC,IACvBC,EAAST,EAAM/N,GAAG4O,aAAajmE,GAC3B6lE,IACFA,EAAO5xF,KAAO,QACd5M,EAAOy2B,MAAM3qB,KAAK0yF,GAClBC,GAAU,IAGhB,MACF,QACE,MAGJ,GAAIA,EACF,MAGF/F,GAAcH,EACdI,GAAYJ,IAgBd0G,EAAmB,SAASrpE,EAAaspE,GAC3C,GAAItpE,EAAYe,OAASf,EAAYe,MAAMj0B,OAAQ,CACjD,IAAIy8F,EAAqBD,EACS,qBAAvBC,IACTA,EAAqBvpE,EAAYe,MAAM,GAAG9E,KAE5C+D,EAAYe,MAAMpoB,SAAQ,SAAS0jC,GACjCA,EAAKpgB,IAAMisE,EAAe7rD,EAAKpgB,IAAKstE,GACpCltD,EAAKrhB,IAAMktE,EAAe7rD,EAAKrhB,IAAKuuE,GAEpCltD,EAAKvb,QAAUub,EAAKpgB,IAAMmsE,EAC1B/rD,EAAKmtD,QAAUntD,EAAKrhB,IAAMotE,KAI9B,GAAIpoE,EAAYa,OAASb,EAAYa,MAAM/zB,OAAQ,CACjD,IAAI28F,EAAqBH,EAWzB,GAVkC,qBAAvBG,IACTA,EAAqBzpE,EAAYa,MAAM,GAAG5E,KAE5C+D,EAAYa,MAAMloB,SAAQ,SAAS0jC,GACjCA,EAAKpgB,IAAMisE,EAAe7rD,EAAKpgB,IAAKwtE,GACpCptD,EAAKrhB,IAAMktE,EAAe7rD,EAAKrhB,IAAKyuE,GAEpCptD,EAAKvb,QAAUub,EAAKpgB,IAAMmsE,EAC1B/rD,EAAKmtD,QAAUntD,EAAKrhB,IAAMotE,KAExBpoE,EAAYmpE,cAAe,CAC7B,IAAI3xF,EAAQwoB,EAAYmpE,cACxB3xF,EAAMykB,IAAMisE,EAAe1wF,EAAMykB,IAAKwtE,GACtCjyF,EAAMwjB,IAAMktE,EAAe1wF,EAAMwjB,IAAKyuE,GAEtCjyF,EAAMspB,QAAUtpB,EAAMykB,IAAMmsE,EAC5B5wF,EAAMgyF,QAAUhyF,EAAMykB,IAAMmsE,KAQ9BsB,EAAc,SAAS3vE,GACzB,IAOEgJ,EANA8lE,GAAU,EACVc,EAAa,EACbx/D,EAAa,KACbC,EAAY,KACZ8uD,EAAY,EACZT,EAAY,EAGd,MAAO1+D,EAAMjtB,OAAS2rF,GAAa,EAAG,CACpC,IAAIzhF,EAAOmxF,EAAMxiC,IAAI4iC,UAAUxuE,EAAO0+D,GACtC,OAAQzhF,GACN,IAAK,iBAGH,GAAI+iB,EAAMjtB,OAAS2rF,EAAY,GAAI,CACjCoQ,GAAU,EACV,MAOF,GAJA3P,EAAYiP,EAAMxiC,IAAI4yB,gBAAgBx+D,EAAO0+D,GAIzCS,EAAYn/D,EAAMjtB,OAAQ,CAC5B+7F,GAAU,EACV,MAEgB,OAAdz+D,IACFrH,EAAShJ,EAAM1E,SAASojE,EAAWA,EAAYS,GAC/C9uD,EAAY+9D,EAAMxiC,IAAIikC,kBAAkB7mE,IAE1C01D,GAAaS,EACb,MACF,IAAK,QAGH,GAAIn/D,EAAMjtB,OAAS2rF,EAAY,EAAG,CAChCoQ,GAAU,EACV,MAOF,GAJA3P,EAAYiP,EAAMxiC,IAAIizB,cAAc7+D,EAAO0+D,GAIvCS,EAAYn/D,EAAMjtB,OAAQ,CAC5B+7F,GAAU,EACV,MAEiB,OAAf1+D,IACFpH,EAAShJ,EAAM1E,SAASojE,EAAWA,EAAYS,GAC/C/uD,EAAag+D,EAAMxiC,IAAIkkC,gBAAgB9mE,IAEzC4mE,IACAlR,GAAaS,EACb,MACF,QACET,IACA,MAEJ,GAAIoQ,EACF,OAAO,KAGX,GAAmB,OAAf1+D,GAAqC,OAAdC,EACzB,OAAO,KAGT,IAAI0/D,EAAiB1B,EAAgBj+D,EAEjC//B,EAAS,CACX22B,MAAO,CACL,CACE/pB,KAAM,QACNilB,IAAKmO,EACLpP,IAAKoP,GAEP,CACEpzB,KAAM,QACNilB,IAAKmO,EAA0B,KAAbu/D,EAAoBG,EACtC9uE,IAAKoP,EAA0B,KAAbu/D,EAAoBG,KAK5C,OAAO1/F,GAQL2/F,EAAa,SAAShwE,GACxB,IAAI4pE,EAAM,CACRK,IAAK,KACLwE,MAAO,MAGLp+F,EAAS,GAIb,IAAK,IAAI45F,KAFTsE,EAAUvuE,EAAO4pE,GAEDA,EAAI6E,MAClB,GAAI7E,EAAI6E,MAAM/3F,eAAeuzF,GAAM,CACjC,IAAIhtF,EAAO2sF,EAAI6E,MAAMxE,GACrB,OAAQhtF,GACN,KAAKwrF,EAAYyB,iBACf75F,EAAOy2B,MAAQ,GACfooE,EAAelvE,EAAO4pE,EAAKv5F,GACC,IAAxBA,EAAOy2B,MAAM/zB,eACR1C,EAAOy2B,MAEhB,MACF,KAAK2hE,EAAY0B,iBACf95F,EAAO22B,MAAQ,GACf0nE,EAAe1uE,EAAO4pE,EAAKv5F,GACC,IAAxBA,EAAO22B,MAAMj0B,eACR1C,EAAO22B,MAEhB,MACF,QACE,OAIR,OAAO32B,GAWLs2B,EAAU,SAAS3G,EAAOuvE,GAC5B,IAEIl/F,EAFA4/F,EAAY3B,EAAgBtuE,GAUhC,OALE3vB,EADE4/F,EACON,EAAY3vE,GAEZgwE,EAAWhwE,GAGjB3vB,IAAYA,EAAO22B,OAAU32B,EAAOy2B,QAIzCwoE,EAAiBj/F,EAAQk/F,GAElBl/F,GALE,MAQXpB,EAAOC,QAAU,CACfy3B,QAASA,I,kCCpfX,IAAIupE,EAQJjhG,EAAOC,QAAU,SAAaihG,GAC5B,IAAIC,EAAUF,EAASC,EAAUn6E,WAAa,IAAO,GACjD3lB,EAAS,IAAIylB,WAAWq6E,EAAUn6E,WAAao6E,EAAQr9F,QAG3D,OAFA1C,EAAOgrB,IAAI80E,GACX9/F,EAAOgrB,IAAI+0E,EAASD,EAAUn6E,YACvB3lB,GAIT6/F,EAAU,CACR,CAAC,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,IAEb,CAAC,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,IAET,CAAC,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,IAEL,CAAC,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,IAED,CAAC,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,IAEb,CAAC,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,IAET,CAAC,GAAI,GAAI,GAAI,GACZ,GAAI,GAAI,GAAI,GACZ,GAAI,IAEL,CAAC,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,GAED,CAAC,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAEV,CAAC,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,GAEP,CAAC,EAAG,EAAG,EAAG,EACT,EAAG,GAEJ,CAAC,EAAG,EAAG,EAAG,EACT,GAED,CAAC,EAAG,EAAG,EAAG,GAEV,CAAC,EAAG,EAAG,GAEP,CAAC,EAAG,GAEJ,CAAC,K,kCC7EHxgG,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEnB,SAAS5H,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,IAAIuF,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCjE,EAAO,aAePi3F,EAAgB,WAClB,SAASA,EAAcvyE,EAAaggB,GAClC,IAAInlC,EAAQ9E,KAEZ+D,EAAgB/D,KAAMw8F,GAEtB,IAAIC,EAAqB,WACvB33F,EAAM43F,cAAgBzyE,EAAY0yE,gBAAgB1yD,GAIlDnlC,EAAM83F,qBAAuB,WAC3B,IAAIC,EAAkB/3F,EAAMg4F,iBAE5Bh4F,EAAMg4F,iBAAmB,KAErBD,GACFA,IAGF/3F,EAAMi4F,gBAGRj4F,EAAM43F,cAAct4D,iBAAiB,YAAat/B,EAAM83F,sBAExD93F,EAAMi4F,gBAGR/8F,KAAKg9F,WAAa,GAClBh9F,KAAK88F,iBAAmB,KACxB98F,KAAK4qB,iBAAmB,EACxB5qB,KAAKiqB,YAAcA,EACnBjqB,KAAKi9F,kBAAmB,EAEO,WAA3BhzE,EAAYzS,WACdyS,EAAYma,iBAAiB,aAAcq4D,GAE3CA,IA8IJ,OAnIA15F,EAAay5F,EAAe,CAAC,CAC3B75F,IAAK,QACL5G,MAAO,SAAewzB,GACpB,IAAI5J,EAAS3lB,KAETA,KAAKi9F,kBACPj9F,KAAKk9F,gBAAe,WAClBv3E,EAAO+2E,cAAcx2E,UACpBqJ,KAWN,CACD5sB,IAAK,eACL5G,MAAO,SAAsBowB,EAAOoD,GAClC,IAAIpJ,EAASnmB,KAEbA,KAAKi9F,kBAAmB,EACxBj9F,KAAKk9F,gBAAe,WAClB/2E,EAAOu2E,cAAcS,aAAahxE,KACjCoD,KAQJ,CACD5sB,IAAK,WACL5G,MAAO,WACL,OAAKiE,KAAK08F,cAGH18F,KAAK08F,cAAc58E,SAFjBrW,EAAU,WAAWsiB,qBAY/B,CACDppB,IAAK,SACL5G,MAAO,SAAgBwkB,EAAOP,GAC5B,IAAIyG,EAASzmB,KAETA,KAAKi9F,kBACPj9F,KAAKk9F,gBAAe,WAClBz2E,EAAOi2E,cAAcl+D,OAAOje,EAAOP,KAClCza,KASN,CACD5C,IAAK,WACL5G,MAAO,WACL,OAAQiE,KAAK08F,eAAiB18F,KAAK08F,cAAc/xE,UAAY3qB,KAAK88F,mBAQnE,CACDn6F,IAAK,kBACL5G,MAAO,SAAyBuK,GAC9B,IAAIqgB,EAAS3mB,KAQb,MANsB,qBAAXsG,IACTtG,KAAKk9F,gBAAe,WAClBv2E,EAAO+1E,cAAcpxF,gBAAkBhF,KAEzCtG,KAAK4qB,iBAAmBtkB,GAEnBtG,KAAK4qB,mBAMb,CACDjoB,IAAK,iBACL5G,MAAO,SAAwBs6C,EAAU9mB,GACvCvvB,KAAKg9F,WAAW10F,KAAK,CAAC+tC,EAASj1C,KAAKpB,MAAOuvB,IAC3CvvB,KAAK+8F,iBAMN,CACDp6F,IAAK,eACL5G,MAAO,WACL,IAAI2yB,OAAYjyB,GAEXuD,KAAK2qB,YAAc3qB,KAAKg9F,WAAW99F,SACtCwvB,EAAY1uB,KAAKg9F,WAAWtwE,QAC5B1sB,KAAK88F,iBAAmBpuE,EAAU,GAClCA,EAAU,QAOb,CACD/rB,IAAK,UACL5G,MAAO,WACLiE,KAAK08F,cAAc/yD,oBAAoB,YAAa3pC,KAAK48F,sBACrD58F,KAAK08F,eAAiD,SAAhC18F,KAAKiqB,YAAYzS,YACzCxX,KAAK08F,cAAcx2E,YAKlBs2E,EAnLW,GAsLpBnhG,EAAQ,WAAamhG,EACrBphG,EAAOC,QAAUA,EAAQ,Y,qBCzMzB,IAAI+hG,EAAc,OACdC,EAAmB,CACrB,IAAI,EACJ,IAAM,EACN,IAAM,GAEJC,EAAe,CACjB,OAAS,EACT,QAAU,EACV,KAAO,EACP,MAAQ,EACR,OAAS,GAGX,SAASC,EAAqBxhG,GAC5B,GAAqB,kBAAVA,EACT,OAAO,EAET,IAAIqhE,EAAMigC,EAAiBthG,EAAMw9B,eACjC,QAAO6jC,GAAMrhE,EAAMw9B,cAGrB,SAASikE,EAAiBzhG,GACxB,GAAqB,kBAAVA,EACT,OAAO,EAET,IAAIqxF,EAAQkQ,EAAavhG,EAAMw9B,eAC/B,QAAO6zD,GAAQrxF,EAAMw9B,cAGvB,SAAS1b,EAAOliB,GAEd,IADA,IAAI6G,EAAI,EACDA,EAAIC,UAAUvD,OAAQsD,IAAK,CAChC,IAAIi7F,EAAOh7F,UAAUD,GACrB,IAAK,IAAI8Y,KAAKmiF,EACZ9hG,EAAI2f,GAAKmiF,EAAKniF,GAIlB,OAAO3f,EAGT,SAASmP,EAAOO,EAAWE,EAASC,GAClC,IAAI7B,EAAM3J,KACN2vF,EAAQ,aAAevoF,KAAKikC,UAAUC,WACtCoyD,EAAU,GAEV/N,EACFhmF,EAAM2P,SAASC,cAAc,UAE7BmkF,EAAQv6F,YAAa,EAWvBwG,EAAIypF,cAAe,EAOnB,IAAIuK,EAAM,GACNC,GAAe,EACfC,EAAaxyF,EACbyyF,EAAWvyF,EACXwyF,EAAQvyF,EACRwyF,EAAU,KACVC,EAAY,GACZC,GAAe,EACfC,EAAQ,OACRC,EAAa,QACbC,EAAY,GACZC,EAAiB,SACjBC,EAAQ,GACRC,EAAS,SAiMb,GA/LA3iG,OAAOC,eAAe6N,EACpB,KAAMkU,EAAO,GAAI6/E,EAAS,CACxB5zF,IAAK,WACH,OAAO6zF,GAETn2E,IAAK,SAASzrB,GACZ4hG,EAAM,GAAK5hG,MAIjBF,OAAOC,eAAe6N,EACpB,cAAekU,EAAO,GAAI6/E,EAAS,CACjC5zF,IAAK,WACH,OAAO8zF,GAETp2E,IAAK,SAASzrB,GACZ6hG,IAAiB7hG,MAIvBF,OAAOC,eAAe6N,EACpB,YAAakU,EAAO,GAAI6/E,EAAS,CAC/B5zF,IAAK,WACH,OAAO+zF,GAETr2E,IAAK,SAASzrB,GACZ,GAAqB,kBAAVA,EACT,MAAM,IAAIkI,UAAU,uCAEtB45F,EAAa9hG,EACbiE,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,UAAWkU,EAAO,GAAI6/E,EAAS,CAC7B5zF,IAAK,WACH,OAAOg0F,GAETt2E,IAAK,SAASzrB,GACZ,GAAqB,kBAAVA,EACT,MAAM,IAAIkI,UAAU,qCAEtB65F,EAAW/hG,EACXiE,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,OAAQkU,EAAO,GAAI6/E,EAAS,CAC1B5zF,IAAK,WACH,OAAOi0F,GAETv2E,IAAK,SAASzrB,GACZgiG,EAAQ,GAAKhiG,EACbiE,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,SAAUkU,EAAO,GAAI6/E,EAAS,CAC5B5zF,IAAK,WACH,OAAOk0F,GAETx2E,IAAK,SAASzrB,GACZiiG,EAAUjiG,EACViE,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,WAAYkU,EAAO,GAAI6/E,EAAS,CAC9B5zF,IAAK,WACH,OAAOm0F,GAETz2E,IAAK,SAASzrB,GACZ,IAAIk+B,EAAUsjE,EAAqBxhG,GAEnC,IAAgB,IAAZk+B,EACF,MAAM,IAAIC,YAAY,+CAExB+jE,EAAYhkE,EACZj6B,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,cAAekU,EAAO,GAAI6/E,EAAS,CACjC5zF,IAAK,WACH,OAAOo0F,GAET12E,IAAK,SAASzrB,GACZmiG,IAAiBniG,EACjBiE,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,OAAQkU,EAAO,GAAI6/E,EAAS,CAC1B5zF,IAAK,WACH,OAAOq0F,GAET32E,IAAK,SAASzrB,GACZ,GAAqB,kBAAVA,GAAsBA,IAAUqhG,EACzC,MAAM,IAAIljE,YAAY,sDAExBikE,EAAQpiG,EACRiE,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,YAAakU,EAAO,GAAI6/E,EAAS,CAC/B5zF,IAAK,WACH,OAAOs0F,GAET52E,IAAK,SAASzrB,GACZ,IAAIk+B,EAAUujE,EAAiBzhG,GAC/B,IAAKk+B,EACH,MAAM,IAAIC,YAAY,+CAExBkkE,EAAankE,EACbj6B,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,WAAYkU,EAAO,GAAI6/E,EAAS,CAC9B5zF,IAAK,WACH,OAAOu0F,GAET72E,IAAK,SAASzrB,GACZ,GAAIA,EAAQ,GAAKA,EAAQ,IACvB,MAAM,IAAIwE,MAAM,uCAElB89F,EAAYtiG,EACZiE,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,gBAAiBkU,EAAO,GAAI6/E,EAAS,CACnC5zF,IAAK,WACH,OAAOw0F,GAET92E,IAAK,SAASzrB,GACZ,IAAIk+B,EAAUujE,EAAiBzhG,GAC/B,IAAKk+B,EACH,MAAM,IAAIC,YAAY,+CAExBokE,EAAiBrkE,EACjBj6B,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,OAAQkU,EAAO,GAAI6/E,EAAS,CAC1B5zF,IAAK,WACH,OAAOy0F,GAET/2E,IAAK,SAASzrB,GACZ,GAAIA,EAAQ,GAAKA,EAAQ,IACvB,MAAM,IAAIwE,MAAM,mCAElBg+F,EAAQxiG,EACRiE,KAAKozF,cAAe,MAI1Bv3F,OAAOC,eAAe6N,EACpB,QAASkU,EAAO,GAAI6/E,EAAS,CAC3B5zF,IAAK,WACH,OAAO00F,GAETh3E,IAAK,SAASzrB,GACZ,IAAIk+B,EAAUujE,EAAiBzhG,GAC/B,IAAKk+B,EACH,MAAM,IAAIC,YAAY,+CAExBskE,EAASvkE,EACTj6B,KAAKozF,cAAe,MAS1BzpF,EAAIyyD,kBAAe3/D,EAEfkzF,EACF,OAAOhmF,EAQXmB,EAAOlI,UAAU67F,aAAe,WAE9B,OAAOvxC,OAAO0lC,oBAAoBl2F,OAAQsD,KAAKwL,OAGjDpQ,EAAOC,QAAUyP,G,oCC1SjB,SAASpP,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIyN,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCk1B,EAAY,EAAQ,QAEpBggE,EAAiB,CACnBC,QAAS,EACTC,SAAU,IACVC,SAAU,KAGZxjG,EAAQqjG,eAAiBA,EAQzB,IAAII,EAAe,SAAsBz4F,GACvC,IAAI04F,OAAiBtiG,EACjBuiG,OAAeviG,EAMnB,OAFAuiG,EAAe34F,EAAUC,OAASD,EAAUnH,OAAS,EACrD6/F,EAAiB14F,EAAUC,OACpB,SAAWy4F,EAAiB,IAAMC,GASvCC,EAAoB,SAA2Br9E,GACjD,IAAI0Y,EAAU,GAKd,OAHI1Y,EAAQvb,YACVi0B,EAAQ4kE,MAAQJ,EAAal9E,EAAQvb,YAEhCi0B,GAQL6kE,EAAW,SAAkBC,GAC/BA,EAAWr0F,SAAQ,SAAUma,GAC3BA,EAAIgB,YASJm5E,EAAkB,SAAyBp6E,GAC7C,MAAO,CACLrmB,UAAWqmB,EAAQrmB,UACnB0gG,cAAer6E,EAAQq6E,eAAiB,EACxCC,cAAet6E,EAAQs6E,eAAiB,IAUxCC,EAAmB,SAA0BC,GAC/C,IAAIx6E,EAAUw6E,EAAcl9F,OACxBg9F,EAAgB7uF,KAAK24B,MAAQpkB,EAAQy6E,YACrCC,EAAQ,CACV/gG,UAAW2L,IACX+0F,cAAe,EACfC,cAAeA,GAAiB,GASlC,OANAI,EAAML,cAAgBG,EAAcG,OAIpCD,EAAM/gG,UAAYyL,KAAK6F,MAAMyvF,EAAML,cAAgBK,EAAMJ,cAAgB,EAAI,KAEtEI,GAULE,EAAe,SAAsB16E,EAAOF,GAC9C,OAAIA,EAAQ66E,SACH,CACLt6E,OAAQP,EAAQO,OAChBpf,QAAS,iCAAmC6e,EAAQle,IACpD2e,KAAMg5E,EAAeE,QACrB15E,IAAKD,GAILA,EAAQ86E,QACH,CACLv6E,OAAQP,EAAQO,OAChBpf,QAAS,+BAAiC6e,EAAQle,IAClD2e,KAAMg5E,EAAeG,QACrB35E,IAAKD,GAILE,EACK,CACLK,OAAQP,EAAQO,OAChBpf,QAAS,+BAAiC6e,EAAQle,IAClD2e,KAAMg5E,EAAeC,QACrBz5E,IAAKD,GAIF,MAYL+6E,EAAoB,SAA2Bp+E,EAASq+E,GAC1D,OAAO,SAAU96E,EAAOF,GACtB,IAAI6oC,EAAW7oC,EAAQ6oC,SACnBoyC,EAAWL,EAAa16E,EAAOF,GAEnC,GAAIi7E,EACF,OAAOD,EAAmBC,EAAUt+E,GAGtC,GAA4B,KAAxBksC,EAAS3rC,WACX,OAAO89E,EAAmB,CACxBz6E,OAAQP,EAAQO,OAChBpf,QAAS,2BAA6B6e,EAAQle,IAC9C2e,KAAMg5E,EAAeC,QACrBz5E,IAAKD,GACJrD,GAGL,IAAIkmE,EAAO,IAAIpgE,SAASomC,GAGxB,OADAlsC,EAAQjf,IAAIwpB,MAAQ,IAAI0S,YAAY,CAACipD,EAAKlgE,UAAU,GAAIkgE,EAAKlgE,UAAU,GAAIkgE,EAAKlgE,UAAU,GAAIkgE,EAAKlgE,UAAU,MACtGq4E,EAAmB,KAAMr+E,KAYhCu+E,EAA4B,SAAmCv+E,EAASq+E,GAC1E,OAAO,SAAU96E,EAAOF,GACtB,IAAI6oC,EAAW7oC,EAAQ6oC,SACnBoyC,EAAWL,EAAa16E,EAAOF,GAEnC,OAAIi7E,EACKD,EAAmBC,EAAUt+E,GAIV,IAAxBksC,EAAS3rC,WACJ89E,EAAmB,CACxBz6E,OAAQP,EAAQO,OAChBpf,QAAS,qCAAuC6e,EAAQle,IACxD2e,KAAMg5E,EAAeC,QACrBz5E,IAAKD,GACJrD,IAGLA,EAAQnjB,IAAI0tB,MAAQ,IAAIlK,WAAWgD,EAAQ6oC,UACpCmyC,EAAmB,KAAMr+E,MAchCw+E,EAAwB,SAA+Bx+E,EAASq+E,GAClE,OAAO,SAAU96E,EAAOF,GACtB,IAAI6oC,EAAW7oC,EAAQ6oC,SACnBoyC,EAAWL,EAAa16E,EAAOF,GAEnC,OAAIi7E,EACKD,EAAmBC,EAAUt+E,GAIV,IAAxBksC,EAAS3rC,WACJ89E,EAAmB,CACxBz6E,OAAQP,EAAQO,OAChBpf,QAAS,qCAAuC6e,EAAQle,IACxD2e,KAAMg5E,EAAeC,QACrBz5E,IAAKD,GACJrD,IAGLA,EAAQ+9E,MAAQN,EAAgBp6E,GAE5BrD,EAAQjf,IACVif,EAAQy+E,eAAiB,IAAIp+E,WAAWgD,EAAQ6oC,UAEhDlsC,EAAQuK,MAAQ,IAAIlK,WAAWgD,EAAQ6oC,UAGlCmyC,EAAmB,KAAMr+E,MAYhC0+E,EAAiB,SAAwBr7D,EAAWrjB,EAAS2+E,GAC/D,IAAIC,EAAoB,SAASA,EAAkB9pF,GACjD,GAAIA,EAAM5N,KAAKpG,SAAWkf,EAAQ6+E,UAAW,CAC3Cx7D,EAAU0E,oBAAoB,UAAW62D,GACzC,IAAIxhE,EAAYtoB,EAAM5N,KAAKk2B,UAG3B,OADApd,EAAQuK,MAAQ,IAAIlK,WAAW+c,EAAU7S,MAAO6S,EAAU9c,WAAY8c,EAAU7c,YACzEo+E,EAAO,KAAM3+E,KAIxBqjB,EAAUb,iBAAiB,UAAWo8D,GAItCv7D,EAAUpjB,aAAY,EAAI6c,EAAUK,2BAA2B,CAC7Dr8B,OAAQkf,EAAQ6+E,UAChB7hE,UAAWhd,EAAQy+E,eACnB19F,IAAKif,EAAQjf,IAAIwpB,MACjBllB,GAAI2a,EAAQjf,IAAIsE,KACd,CAAC2a,EAAQy+E,eAAe14E,OAAQ/F,EAAQjf,IAAIwpB,MAAMxE,UASpD+4E,EAAwB,SAA+BrzC,GACzD,OAAOA,EAAOjhD,QAAO,SAAUu0F,EAAMnxE,GACnC,OAAOA,EAAI9J,KAAOi7E,EAAKj7E,KAAO8J,EAAMmxE,MAepCC,EAAoB,SAA2BxB,EAAYn6D,EAAWs7D,GACxE,IAAIlzC,EAAS,GACT14C,EAAQ,EAEZ,OAAO,SAAUwQ,EAAOvD,GAQtB,GAPIuD,IAEFg6E,EAASC,GACT/xC,EAAO/kD,KAAK6c,IAEdxQ,GAAS,EAELA,IAAUyqF,EAAWlgG,OAAQ,CAI/B,GAFA0iB,EAAQi/E,iBAAmBnwF,KAAK24B,MAE5BgkB,EAAOnuD,OAAS,EAAG,CACrB,IAAI4hG,EAAaJ,EAAsBrzC,GAEvC,OAAOkzC,EAAOO,EAAYl/E,GAE5B,OAAIA,EAAQy+E,eACHC,EAAer7D,EAAWrjB,EAAS2+E,GAGrCA,EAAO,KAAM3+E,MAetBm/E,EAAiB,SAAwBn/E,EAASo/E,GACpD,OAAO,SAAUtqF,GAQf,OAPAkL,EAAQ+9E,MAAQl2F,EAAU,WAAWia,aAAa9B,EAAQ+9E,MAAOH,EAAiB9oF,KAG7EkL,EAAQ+9E,MAAMsB,sBAAwBr/E,EAAQ+9E,MAAML,gBACvD19E,EAAQ+9E,MAAMsB,qBAAuBvwF,KAAK24B,OAGrC23D,EAAWtqF,EAAOkL,KAoDzBs/E,EAAsB,SAA6Bh8E,EAAKi8E,EAAYC,EAAkBx/E,EAASo/E,EAAYT,GAC7G,IAAInB,EAAa,GACba,EAAqBW,EAAkBxB,EAAYgC,EAAkBb,GAGzE,GAAI3+E,EAAQjf,IAAK,CACf,IAAI0+F,EAAoB53F,EAAU,WAAWia,aAAay9E,EAAY,CACpEp6F,IAAK6a,EAAQjf,IAAIkhB,YACjBy9E,aAAc,gBAEZC,EAAqBvB,EAAkBp+E,EAASq+E,GAChDuB,EAASt8E,EAAIm8E,EAAmBE,GAEpCnC,EAAW92F,KAAKk5F,GAIlB,GAAI5/E,EAAQnjB,MAAQmjB,EAAQnjB,IAAI0tB,MAAO,CACrC,IAAIs1E,EAAqBh4F,EAAU,WAAWia,aAAay9E,EAAY,CACrEp6F,IAAK6a,EAAQnjB,IAAIolB,YACjBy9E,aAAc,cACdhnE,QAAS2kE,EAAkBr9E,EAAQnjB,OAEjCijG,EAA6BvB,EAA0Bv+E,EAASq+E,GAChE0B,EAAiBz8E,EAAIu8E,EAAoBC,GAE7CtC,EAAW92F,KAAKq5F,GAGlB,IAAIC,EAAwBn4F,EAAU,WAAWia,aAAay9E,EAAY,CACxEp6F,IAAK6a,EAAQiC,YACby9E,aAAc,cACdhnE,QAAS2kE,EAAkBr9E,KAEzBigF,EAAyBzB,EAAsBx+E,EAASq+E,GACxD6B,EAAa58E,EAAI08E,EAAuBC,GAK5C,OAHAC,EAAW19D,iBAAiB,WAAY28D,EAAen/E,EAASo/E,IAChE5B,EAAW92F,KAAKw5F,GAET,WACL,OAAO3C,EAASC,KAGpB/jG,EAAQ6lG,oBAAsBA,G,oCCnb9B,IAAI5yE,EAAS,WACXtuB,KAAKgiB,KAAO,WACV,IAAIuM,EAAY,GAOhBvuB,KAAK6F,GAAK,SAASuD,EAAMolB,GAClBD,EAAUnlB,KACbmlB,EAAUnlB,GAAQ,IAEpBmlB,EAAUnlB,GAAQmlB,EAAUnlB,GAAM6rB,OAAOzG,IAQ3CxuB,KAAKyf,IAAM,SAASrW,EAAMolB,GACxB,IAAI/gB,EACJ,QAAK8gB,EAAUnlB,KAGfqE,EAAQ8gB,EAAUnlB,GAAM/L,QAAQmxB,GAChCD,EAAUnlB,GAAQmlB,EAAUnlB,GAAMpM,QAClCuxB,EAAUnlB,GAAMqlB,OAAOhhB,EAAO,GACvBA,GAAS,IAOlBzN,KAAKmG,QAAU,SAASiD,GACtB,IAAIslB,EAAWlsB,EAAGtD,EAAQyvB,EAE1B,GADAD,EAAYH,EAAUnlB,GACjBslB,EAOL,GAAyB,IAArBjsB,UAAUvD,OAEZ,IADAA,EAASwvB,EAAUxvB,OACdsD,EAAI,EAAGA,EAAItD,IAAUsD,EACxBksB,EAAUlsB,GAAGM,KAAK9C,KAAMyC,UAAU,QAE/B,CAGL,IAFAksB,EAAO,GACPnsB,EAAIC,UAAUvD,OACTsD,EAAI,EAAGA,EAAIC,UAAUvD,SAAUsD,EAClCmsB,EAAKrmB,KAAK7F,UAAUD,IAGtB,IADAtD,EAASwvB,EAAUxvB,OACdsD,EAAI,EAAGA,EAAItD,IAAUsD,EACxBksB,EAAUlsB,GAAGwoB,MAAMhrB,KAAM2uB,KAO/B3uB,KAAK8S,QAAU,WACbyb,EAAY,MAclBD,EAAO1rB,UAAUsC,KAAO,SAAS0pB,GAS/B,OARA5uB,KAAK6F,GAAG,QAAQ,SAASiD,GACvB8lB,EAAYtmB,KAAKQ,MAGnB9I,KAAK6F,GAAG,QAAQ,SAASk8F,GACvBnzE,EAAYxM,MAAM2/E,MAGbnzE,GAOTN,EAAO1rB,UAAU0F,KAAO,SAASQ,GAC/B9I,KAAKmG,QAAQ,OAAQ2C,IAGvBwlB,EAAO1rB,UAAUwf,MAAQ,SAAS2/E,GAChC/hG,KAAKmG,QAAQ,OAAQ47F,IAGvB3mG,EAAOC,QAAUizB,G,qBCpHjBlzB,EAAOC,QAAU,0mH,kCCMjB,IA6EEs8F,EA5EArpE,EAAS,EAAQ,QACjBsmE,EAAc,EAAQ,QAGtBoN,EAAgB,SAAS71E,EAAO5L,EAAOP,GACrC,IAAIxd,EAAGhG,EAAS,GAChB,IAAKgG,EAAI+d,EAAO/d,EAAIwd,EAAKxd,IACvBhG,GAAU,KAAO,KAAO2vB,EAAM3pB,GAAGyZ,SAAS,KAAKjf,OAAO,GAExD,OAAOR,GAITylG,EAAY,SAAS91E,EAAO5L,EAAOP,GACjC,OAAO0yE,mBAAmBsP,EAAc71E,EAAO5L,EAAOP,KAIxDkiF,EAAgB,SAAS/1E,EAAO5L,EAAOP,GACrC,OAAOuuE,SAASyT,EAAc71E,EAAO5L,EAAOP,KAE9CmiF,EAAuB,SAASr5F,GAC9B,OAAQA,EAAK,IAAM,GACVA,EAAK,IAAM,GACXA,EAAK,IAAM,EACXA,EAAK,IAEhBs5F,EAAa,CACXC,KAAM,SAASp8F,GACb,IAAIzD,EACJ,GAAoB,IAAhByD,EAAI6C,KAAK,GAAb,CAKA,IAAKtG,EAAI,EAAGA,EAAIyD,EAAI6C,KAAK5J,OAAQsD,IAC/B,GAAoB,IAAhByD,EAAI6C,KAAKtG,GAAU,CAErByD,EAAI+/C,YAAci8C,EAAUh8F,EAAI6C,KAAM,EAAGtG,GAEzCyD,EAAIlK,MAAQkmG,EAAUh8F,EAAI6C,KAAMtG,EAAI,EAAGyD,EAAI6C,KAAK5J,QAAQ8d,QAAQ,OAAQ,IACxE,MAGJ/W,EAAI6C,KAAO7C,EAAIlK,QAEjBumG,KAAM,SAASr8F,GACb,IAAIzD,EACJ,GAAoB,IAAhByD,EAAI6C,KAAK,GAKb,IAAKtG,EAAI,EAAGA,EAAIyD,EAAI6C,KAAK5J,OAAQsD,IAC/B,GAAoB,IAAhByD,EAAI6C,KAAKtG,GAAU,CAErByD,EAAI+/C,YAAci8C,EAAUh8F,EAAI6C,KAAM,EAAGtG,GACzCyD,EAAI8F,IAAMk2F,EAAUh8F,EAAI6C,KAAMtG,EAAI,EAAGyD,EAAI6C,KAAK5J,QAC9C,QAINqjG,KAAM,SAASt8F,GACb,IAAIzD,EAEJ,IAAKA,EAAI,EAAGA,EAAIyD,EAAI6C,KAAK5J,OAAQsD,IAC/B,GAAoB,IAAhByD,EAAI6C,KAAKtG,GAAU,CAErByD,EAAIu8F,MAAQN,EAAcj8F,EAAI6C,KAAM,EAAGtG,GACvC,MAGJyD,EAAIgE,YAAchE,EAAI6C,KAAK2e,SAASjlB,EAAI,GACxCyD,EAAI6C,KAAO7C,EAAIgE,cAKrB0tF,EAAiB,SAASn5E,GACxB,IAeEhc,EAdA/B,EAAW,CACTse,SAAUP,IAAWA,EAAQO,OAK7B7b,WAAYsb,GAAWA,EAAQtb,YAGjCu/F,EAAU,EAEV96E,EAAS,GAET+6E,EAAa,EAQf,GALA/K,EAAe/0F,UAAUof,KAAKlf,KAAK9C,MAInCA,KAAK2iG,aAAe/N,EAAY2B,qBAAqBt6E,SAAS,IAC1Dxb,EAASyC,WACX,IAAKV,EAAI,EAAGA,EAAI/B,EAASyC,WAAWhE,OAAQsD,IAC1CxC,KAAK2iG,eAAiB,KAAOliG,EAASyC,WAAWV,GAAGyZ,SAAS,KAAKjf,OAAO,GAI7EgD,KAAKsI,KAAO,SAASe,GACnB,IAAIpD,EAAK28F,EAAYtX,EAAW1hF,EAAOpH,EAAGqgG,EAC1C,GAAmB,mBAAfx5F,EAAMD,KAaV,GANIC,EAAM4tF,yBACRyL,EAAa,EACb/6E,EAAOzoB,OAAS,GAII,IAAlByoB,EAAOzoB,SACNmK,EAAMP,KAAK5J,OAAS,IACnBmK,EAAMP,KAAK,KAAO,IAAI++E,WAAW,IACjCx+E,EAAMP,KAAK,KAAO,IAAI++E,WAAW,IACjCx+E,EAAMP,KAAK,KAAO,IAAI++E,WAAW,IACjCpnF,EAASse,OAEXtN,QAAQ1H,IAAI,8CAwBhB,GAjBA4d,EAAOrf,KAAKe,GACZq5F,GAAcr5F,EAAMP,KAAKqZ,WAGH,IAAlBwF,EAAOzoB,SAKTujG,EAAUN,EAAqB94F,EAAMP,KAAK2e,SAAS,EAAG,KAItDg7E,GAAW,MAITC,EAAaD,GAAjB,CAWA,IANAx8F,EAAM,CACJ6C,KAAM,IAAImZ,WAAWwgF,GACrB32F,OAAQ,GACRshB,IAAKzF,EAAO,GAAGyF,IACfiB,IAAK1G,EAAO,GAAG0G,KAEZ7rB,EAAI,EAAGA,EAAIigG,GACdx8F,EAAI6C,KAAK0e,IAAIG,EAAO,GAAG7e,KAAK2e,SAAS,EAAGg7E,EAAUjgG,GAAIA,GACtDA,GAAKmlB,EAAO,GAAG7e,KAAKqZ,WACpBugF,GAAc/6E,EAAO,GAAG7e,KAAKqZ,WAC7BwF,EAAO+E,QAITk2E,EAAa,GACK,GAAd38F,EAAI6C,KAAK,KAEX85F,GAAc,EACdA,GAAcT,EAAqBl8F,EAAI6C,KAAK2e,SAAS,GAAI,KAGzDg7E,GAAWN,EAAqBl8F,EAAI6C,KAAK2e,SAAS,GAAI,MAKxD,EAAG,CAGD,GADA6jE,EAAY6W,EAAqBl8F,EAAI6C,KAAK2e,SAASm7E,EAAa,EAAGA,EAAa,IAC5EtX,EAAY,EAEd,OAAO75E,QAAQ1H,IAAI,+DAarB,GAXA84F,EAAc/3E,OAAOC,aAAa9kB,EAAI6C,KAAK85F,GACT38F,EAAI6C,KAAK85F,EAAa,GACtB38F,EAAI6C,KAAK85F,EAAa,GACtB38F,EAAI6C,KAAK85F,EAAa,IAGxDh5F,EAAQ,CACNC,GAAIg5F,EACJ/5F,KAAM7C,EAAI6C,KAAK2e,SAASm7E,EAAa,GAAIA,EAAatX,EAAY,KAEpE1hF,EAAMjH,IAAMiH,EAAMC,GACdu4F,EAAWx4F,EAAMC,MACnBu4F,EAAWx4F,EAAMC,IAAID,GAID,iDAAhBA,EAAM44F,OAA0D,CAClE,IACEvnF,EAAIrR,EAAMd,KACVkf,GAAgB,EAAP/M,EAAE,KAAe,GAClBA,EAAE,IAAO,GACTA,EAAE,IAAM,GACRA,EAAE,IAAM,EACRA,EAAE,KAAO,EAEnB+M,GAAQ,EACRA,GAAe,EAAP/M,EAAE,GACVrR,EAAM6gF,UAAYziE,OAKFvrB,IAAZwJ,EAAImnB,UAAiC3wB,IAAZwJ,EAAIooB,MAC/BpoB,EAAImnB,IAAMxjB,EAAM6gF,UAChBxkF,EAAIooB,IAAMzkB,EAAM6gF,WAElBzqF,KAAKmG,QAAQ,YAAayD,GAG9B3D,EAAI6F,OAAOxD,KAAKsB,GAEhBg5F,GAAc,GACdA,GAActX,QACPsX,EAAaH,GACtBziG,KAAKmG,QAAQ,OAAQF,MAGzB0xF,EAAe/0F,UAAY,IAAI0rB,EAE/BlzB,EAAOC,QAAUs8F,G,oCCjPjB,SAASj8F,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIyN,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCs5F,EAAiB,CACnBC,cAAe,GACfC,UAAW,SAAmB1zE,GAC5B,IAAI7Q,EAAOze,KAAKye,KAAK,CAAEwkF,0BAA0B,IAC7CznB,EAAY/8D,EAAK82C,eAErB,OAAOjmC,EAAKksD,KAWZ0nB,EAAa,SAASA,EAAW1pD,EAAQh7B,GAC3C,IAAI2kF,EAAa,EACbjjF,EAAS,EACTkjF,EAAe35F,EAAU,WAAWia,aAAao/E,EAAgBtkF,GAErEg7B,EAAOsD,OAAM,WACXtD,EAAOrzC,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,oCASxC,IAAIu1F,EAAwB,WACtBnjF,GACFs5B,EAAO94C,YAAYwf,IAUnBk1C,EAAY,SAAmBomB,GACf,OAAdA,QAAoC/+E,IAAd++E,IAG1Bt7D,EAASs5B,EAAO74C,aAAe4J,KAAYivC,EAAO94C,eAAiB,EAEnE84C,EAAO7tB,IAAI,iBAAkB03E,GAE7B7pD,EAAOv8B,IAAIu+D,GACXhiC,EAAOrzC,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,qBACtC0rC,EAAO5Q,SASL06D,EAAe,WAGjB,GAAI5yF,KAAK24B,MAAQ85D,EAA0C,IAA7BC,EAAaL,cACzCvpD,EAAOrzC,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,kCADxC,CAKA,GAAKs1F,EAAaJ,WAA+C,oBAA3BI,EAAaJ,UAMnD,OAFAG,EAAazyF,KAAK24B,MAEX+5D,EAAaJ,UAAUlgG,KAAK02C,EAAQ4b,GALzC3rD,EAAU,WAAWM,IAAIob,MAAM,2EAa/Bo+E,EAAgB,SAASA,IAC3B/pD,EAAO/5B,IAAI,iBAAkB4jF,GAC7B7pD,EAAO/5B,IAAI,QAAS6jF,GACpB9pD,EAAO/5B,IAAI,UAAW8jF,IASpBC,EAAe,SAAsBC,GACvCF,IACAL,EAAW1pD,EAAQiqD,IAGrBjqD,EAAO3zC,GAAG,QAASy9F,GACnB9pD,EAAO3zC,GAAG,UAAW09F,GAIrB/pD,EAAOkqD,oBAAsBF,GAS3BE,EAAsB,SAA6BllF,GACrD0kF,EAAWljG,KAAMwe,IAGnBnjB,EAAQ,WAAaqoG,EACrBtoG,EAAOC,QAAUA,EAAQ,Y,oCCrHzBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEnB,SAAS5H,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,IAAIqF,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCq6F,EAAe,EAAQ,QAEvBC,EAAgBloG,EAAuBioG,GASvCjiF,EAAuB,SAA8BC,GACvDA,EAAW9b,GAAG,QAAQ,SAAU+b,GAK9B,IAAIiiF,EAAYjiF,EAAQ6d,YAExB7d,EAAQ6d,YAAc,CACpB32B,KAAM+6F,EAAUl8E,OAChBzF,WAAY2hF,EAAU3hF,WACtBC,WAAY0hF,EAAU1hF,YAGxB,IAAI2hF,EAAaliF,EAAQ9Y,KAEzB8Y,EAAQ9Y,KAAOg7F,EAAWn8E,OAC1Bpe,EAAe,WAAWsY,YAAY,CACpCC,OAAQ,OACRF,QAASA,EACTM,WAAY4hF,EAAW5hF,WACvBC,WAAY2hF,EAAW3hF,YACtB,CAACP,EAAQ9Y,UAGV6Y,EAAWoiF,eACbpiF,EAAWoiF,cAAcl+F,GAAG,QAAQ,SAAUmF,GAC5CzB,EAAe,WAAWsY,YAAY,CACpCC,OAAQ,UACRhZ,KAAMkC,OAKZ2W,EAAW9b,GAAG,QAAQ,SAAUiD,GAC9BS,EAAe,WAAWsY,YAAY,CAAEC,OAAQ,YAGlDH,EAAW9b,GAAG,WAAW,SAAUm+F,GACjCz6F,EAAe,WAAWsY,YAAY,CACpCC,OAAQ,UACRkiF,QAASA,QAaXjiF,EAAkB,WACpB,SAASA,EAAgBvD,GACvBza,EAAgB/D,KAAM+hB,GAEtB/hB,KAAKwe,QAAUA,GAAW,GAC1Bxe,KAAKgiB,OA6FP,OA9EAjf,EAAagf,EAAiB,CAAC,CAC7Bpf,IAAK,OACL5G,MAAO,WACDiE,KAAK2hB,YACP3hB,KAAK2hB,WAAW7O,UAElB9S,KAAK2hB,WAAa,IAAIiiF,EAAc,WAAWroG,WAAWyE,KAAKwe,SAC/DkD,EAAqB1hB,KAAK2hB,cAS3B,CACDhf,IAAK,OACL5G,MAAO,SAAc+M,GAEnB,IAAI8Y,EAAU,IAAIK,WAAWnZ,EAAKA,KAAMA,EAAKoZ,WAAYpZ,EAAKqZ,YAE9DniB,KAAK2hB,WAAWrZ,KAAKsZ,KAOtB,CACDjf,IAAK,QACL5G,MAAO,WACLiE,KAAKgiB,SAUN,CACDrf,IAAK,qBACL5G,MAAO,SAA4B+M,GACjC,IAAIwC,EAAkBxC,EAAKwC,iBAAmB,EAE9CtL,KAAK2hB,WAAWsiF,uBAAuB55F,KAAK4G,MAAwB,IAAlB3F,MAEnD,CACD3I,IAAK,sBACL5G,MAAO,SAA6B+M,GAClC9I,KAAK2hB,WAAWuiF,oBAAoB75F,KAAK0nF,KAAwB,IAAnBjpF,EAAKq7F,gBASpD,CACDxhG,IAAK,QACL5G,MAAO,SAAe+M,GACpB9I,KAAK2hB,WAAWS,UAEjB,CACDzf,IAAK,gBACL5G,MAAO,WACLiE,KAAK2hB,WAAWU,kBAEjB,CACD1f,IAAK,gBACL5G,MAAO,SAAuB+M,GAC5B9I,KAAK2hB,WAAWyiF,cAAct7F,EAAKu7F,gBAAgBrnG,aAIhD+kB,EAlGa,GAqGlBuiF,EAAmB,SAA0BngG,GAC/CA,EAAKwS,UAAY,SAAUD,GACC,SAAtBA,EAAM5N,KAAKgZ,QAAqBpL,EAAM5N,KAAK0V,QAC7Cxe,KAAKuiB,gBAAkB,IAAIR,EAAgBrL,EAAM5N,KAAK0V,UAInDxe,KAAKuiB,kBACRviB,KAAKuiB,gBAAkB,IAAIR,GAGzBrL,EAAM5N,MAAQ4N,EAAM5N,KAAKgZ,QAAgC,SAAtBpL,EAAM5N,KAAKgZ,QAC5C9hB,KAAKuiB,gBAAgB7L,EAAM5N,KAAKgZ,SAClC9hB,KAAKuiB,gBAAgB7L,EAAM5N,KAAKgZ,QAAQpL,EAAM5N,SAMtDzN,EAAQ,WAAa,SAAU8I,GAC7B,OAAO,IAAImgG,EAAiBngG,IAG9B/I,EAAOC,QAAUA,EAAQ,Y,kCC9MzB,IAAIizB,EAAS,EAAQ,QAEjBi2E,EAAS,WAETC,EAAY,WAEZlK,EAAiB,SAASv+F,EAAOw2F,GACnC,IAAInC,EAAY,EAEZr0F,EAAQw2F,IAQVnC,GAAa,GAKf,MAAO/lF,KAAKC,IAAIioF,EAAYx2F,GAASyoG,EACnCzoG,GAAUq0F,EAAYmU,EAGxB,OAAOxoG,GAGL84F,EAA0B,SAASzrF,GACrC,IAAIq7F,EAASC,EAEb7P,EAAwBjyF,UAAUof,KAAKlf,KAAK9C,MAE5CA,KAAK2kG,MAAQv7F,EAEbpJ,KAAKsI,KAAO,SAASQ,GACfA,EAAKM,OAASpJ,KAAK2kG,aAIFloG,IAAjBioG,IACFA,EAAe57F,EAAKulB,KAGtBvlB,EAAKulB,IAAMisE,EAAexxF,EAAKulB,IAAKq2E,GACpC57F,EAAKskB,IAAMktE,EAAexxF,EAAKskB,IAAKs3E,GAEpCD,EAAU37F,EAAKulB,IAEfruB,KAAKmG,QAAQ,OAAQ2C,KAGvB9I,KAAKoiB,MAAQ,WACXsiF,EAAeD,EACfzkG,KAAKmG,QAAQ,SAGfnG,KAAKqI,cAAgB,WACnBq8F,OAAe,EACfD,OAAU,IAKd5P,EAAwBjyF,UAAY,IAAI0rB,EAExClzB,EAAOC,QAAU,CACfw5F,wBAAyBA,EACzByF,eAAgBA,I,kCChFlBz+F,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAc,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA7gB,GAEfG,EAAU,EAAQ,QAElBC,EAAWhI,EAAuB+H,GAEtC,SAAS/H,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASC,EAA2BC,EAAMrB,GAAQ,IAAKqB,EAAQ,MAAM,IAAIC,eAAe,6DAAgE,OAAOtB,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BqB,EAAPrB,EAElO,SAASuB,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAYje,IAAI2Z,EAAa,SAAUrZ,GAGzB,SAASqZ,IACPna,EAAgB/D,KAAMke,GAEtB,IAAIpZ,EAAQZ,EAA2BlE,MAAOke,EAAWvZ,WAAa9I,OAAOkJ,eAAemZ,IAAapb,KAAK9C,OAG9G,OADA8E,EAAM6iB,OAAS,GACR7iB,EAyBT,OAjCAT,EAAU6Z,EAAYrZ,GAkBtB9B,EAAamb,EAAY,CAAC,CACxBvb,IAAK,OACL5G,MAAO,SAAc+M,GACnB,IAAI87F,OAAc,EAKlB,IAHA5kG,KAAK2nB,QAAU7e,EACf87F,EAAc5kG,KAAK2nB,OAAOtqB,QAAQ,MAE3BunG,GAAe,EAAGA,EAAc5kG,KAAK2nB,OAAOtqB,QAAQ,MACzD2C,KAAKmG,QAAQ,OAAQnG,KAAK2nB,OAAO7K,UAAU,EAAG8nF,IAC9C5kG,KAAK2nB,OAAS3nB,KAAK2nB,OAAO7K,UAAU8nF,EAAc,OAKjD1mF,EAlCQ,CAmCfxa,EAAS,YAEXrI,EAAQ,WAAa6iB,G,kCCzDrB,IAAI2mF,EAASlK,EAAW/nE,EAAWvnB,EAGnCw5F,EAAU,SAAS/7F,EAAM4P,GACvB,IACIlW,EAAGwlB,EAAM5e,EAAM4W,EAAK8kF,EADpBzwE,EAAU,GAGd,IAAK3b,EAAKxZ,OAER,OAAO,KAGT,IAAKsD,EAAI,EAAGA,EAAIsG,EAAKqZ,YACnB6F,EAAQlf,EAAKtG,IAAU,GACvBwlB,GAAQlf,EAAKtG,EAAI,IAAM,GACvBwlB,GAAQlf,EAAKtG,EAAI,IAAM,EACvBwlB,GAAQlf,EAAKtG,EAAI,GAEjB4G,EAAOuxF,EAAU7xF,EAAK2e,SAASjlB,EAAI,EAAGA,EAAI,IAE1Cwd,EAAMgI,EAAO,EAAIxlB,EAAIwlB,EAAOlf,EAAKqZ,WAE7B/Y,IAASsP,EAAK,KACI,IAAhBA,EAAKxZ,OAGPm1B,EAAQ/rB,KAAKQ,EAAK2e,SAASjlB,EAAI,EAAGwd,KAGlC8kF,EAAaD,EAAQ/7F,EAAK2e,SAASjlB,EAAI,EAAGwd,GAAMtH,EAAK1b,MAAM,IACvD8nG,EAAW5lG,SACbm1B,EAAUA,EAAQY,OAAO6vE,MAI/BtiG,EAAIwd,EAIN,OAAOqU,GAQTsmE,EAAY,SAAShzE,GACnB,IAAInrB,EAAS,GAKb,OAJAA,GAAUsuB,OAAOC,aAAapD,EAAO,IACrCnrB,GAAUsuB,OAAOC,aAAapD,EAAO,IACrCnrB,GAAUsuB,OAAOC,aAAapD,EAAO,IACrCnrB,GAAUsuB,OAAOC,aAAapD,EAAO,IAC9BnrB,GAqBTo2B,EAAY,SAAS5Q,GACnB,IACExlB,EAAS,GACTuoG,EAAQF,EAAQ7iF,EAAM,CAAC,OAAQ,SAGjC,OAAO+iF,EAAM34F,QAAO,SAAS5P,EAAQ8oF,GACnC,IAAIC,EAAMp6C,EAAS19B,EAAO5D,EAAI47E,EAG9B,OADAF,EAAOsf,EAAQvf,EAAM,CAAC,SAAS,GAC1BC,GAGLp6C,EAAUo6C,EAAK,GACf93E,EAAoB,IAAZ09B,EAAgB,GAAK,GAC7BthC,EAAK07E,EAAK93E,IAAc,GACnB83E,EAAK93E,EAAQ,IAAM,GACnB83E,EAAK93E,EAAQ,IAAO,EACpB83E,EAAK93E,EAAQ,GAElBg4E,EAAOof,EAAQvf,EAAM,CAAC,OAAQ,SAAS,GAClCG,GAGLt6C,EAAUs6C,EAAK,GACfh4E,EAAoB,IAAZ09B,EAAgB,GAAK,GAC7B3uC,EAAOqN,GAAM47E,EAAKh4E,IAAc,GACnBg4E,EAAKh4E,EAAQ,IAAM,GACnBg4E,EAAKh4E,EAAQ,IAAO,EACpBg4E,EAAKh4E,EAAQ,GACnBjR,GARE,MAXA,OAoBRA,IAmBL6O,EAAY,SAASunB,EAAW2xD,GAC9B,IAAIygB,EAAOC,EAAWzoG,EA6CtB,OA1CAwoG,EAAQH,EAAQtgB,EAAU,CAAC,OAAQ,SAGnC0gB,EAAY,GAAGhwE,OAAOjK,MAAM,GAAIg6E,EAAMvmG,KAAI,SAASqnF,GACjD,OAAO+e,EAAQ/e,EAAM,CAAC,SAASrnF,KAAI,SAASkpF,GAC1C,IAAI99E,EAAIigB,EAAOo7E,EA+Bf,OA5BAr7F,EAAK89E,EAAK,IAAM,GACXA,EAAK,IAAM,GACXA,EAAK,IAAM,EACXA,EAAK,GAEV79D,EAAQ8I,EAAU/oB,IAAO,IAGzBq7F,EAAWL,EAAQ/e,EAAM,CAAC,SAASrnF,KAAI,SAASipF,GAC9C,IAAIv8C,EAAS3uC,EAcb,OAZA2uC,EAAUu8C,EAAK,GACflrF,EAASkrF,EAAK,IAAM,GACXA,EAAK,IAAM,GACXA,EAAK,IAAO,EACZA,EAAK,GACG,IAAbv8C,IACF3uC,GAAU6N,KAAK0R,IAAI,EAAG,IACtBvf,GAAUkrF,EAAK,IAAO,GACZA,EAAK,IAAO,GACZA,EAAK,KAAQ,EACbA,EAAK,KAEVlrF,KACN,GACH0oG,EAAWA,GAAY36F,IAGhB26F,EAAWp7E,SAKtBttB,EAAS6N,KAAKoZ,IAAIuH,MAAM,KAAMi6E,GACvB/9F,SAAS1K,GAAUA,EAAS,GAGrCpB,EAAOC,QAAU,CACfs/F,UAAWA,EACX/nE,UAAWA,EACXvnB,UAAWA,I,oCCxLbxP,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAETV,EAAQ,WAAa,CACnBmvC,mBAAoB,GACpBG,uBAAwB,GACxBD,wBAAyB,EAGzBrrC,mBAAoB,IAEpBurC,sBAAuB,EACvB7C,0BAA2B,GAC3B8C,2BAA4B,GAE9BzvC,EAAOC,QAAUA,EAAQ,Y,mBCjBzBD,EAAOC,QAAU,8xF,oCCEjB,IAAIizB,EAAS,EAAQ,QAOjB62E,EAAiB,SAAS3mF,GAI5Bxe,KAAKolG,eAAiB,EACtBplG,KAAKqlG,eAAiB7mF,EAAQ6mF,eAE9BrlG,KAAKgtB,UAAY,GACjBhtB,KAAKktB,UAAY,GACjBltB,KAAKslG,WAAa,KAClBtlG,KAAKulG,WAAa,KAClBvlG,KAAKwlG,gBAAkB,GACvBxlG,KAAKylG,gBAAkB,GACvBzlG,KAAK0lG,cAAgB,EACrB1lG,KAAK2lG,gBAAkB,EAEvBR,EAAeviG,UAAUof,KAAKlf,KAAK9C,MAGnCA,KAAKsI,KAAO,SAASs9F,GAGnB,OAAIA,EAAOp6F,KACFxL,KAAKwlG,gBAAgBl9F,KAAKs9F,GAG/BA,EAAO95F,OACF9L,KAAKylG,gBAAgBn9F,KAAKs9F,IAGT,UAAtBA,EAAO36F,MAAM7B,OACfpJ,KAAKslG,WAAaM,EAAO36F,MACzBjL,KAAKgtB,UAAY44E,EAAO34E,KACxBjtB,KAAK0lG,sBAEmB,UAAtBE,EAAO36F,MAAM7B,OACfpJ,KAAKulG,WAAaK,EAAO36F,MACzBjL,KAAKktB,UAAY04E,EAAO34E,KACxBjtB,KAAK0lG,qBAKXP,EAAeviG,UAAY,IAAI0rB,EAC/B62E,EAAeviG,UAAUwf,MAAQ,SAAS2/E,GACxC,IACE8D,EACA76F,EACAxI,EACAsjG,EACApvF,EAAQ,CACNuW,KAAM,GACNZ,SAAU,GACV05E,eAAgB,GAChBp6F,SAAU,IAGd,GAAI3L,KAAK0lG,cAAgB1lG,KAAKolG,eAAgB,CAC5C,GAAoB,uBAAhBrD,GACgB,uBAAhBA,EAIF,OACK,GAA2B,IAAvB/hG,KAAK0lG,gBAOd1lG,KAAK2lG,kBAED3lG,KAAK2lG,gBAAkB3lG,KAAKolG,gBAC9B,OAQN,GAHAplG,KAAK2lG,iBAAmB3lG,KAAK0lG,cAC7B1lG,KAAK0lG,cAAgB,IAEjB1lG,KAAK2lG,gBAAkB3lG,KAAKolG,gBAAhC,CAeA,IAXIplG,KAAKslG,WACPQ,EAAmB9lG,KAAKslG,WAAW/N,kBAAkBnqE,IAC5CptB,KAAKulG,aACdO,EAAmB9lG,KAAKulG,WAAWhO,kBAAkBnqE,KAGvD1W,EAAMuW,KAAKD,UAAYhtB,KAAKgtB,UAC5BtW,EAAMuW,KAAKC,UAAYltB,KAAKktB,UAIvB1qB,EAAI,EAAGA,EAAIxC,KAAKwlG,gBAAgBtmG,OAAQsD,IAC3CwI,EAAUhL,KAAKwlG,gBAAgBhjG,GAC/BwI,EAAQK,UAAYL,EAAQutB,SAAWutE,EACvC96F,EAAQK,WAAa,IACrBL,EAAQO,QAAUP,EAAQwtB,OAASstE,EACnC96F,EAAQO,SAAW,IACnBmL,EAAMqvF,eAAe/6F,EAAQE,SAAU,EACvCwL,EAAM2V,SAAS/jB,KAAK0C,GAKtB,IAAKxI,EAAI,EAAGA,EAAIxC,KAAKylG,gBAAgBvmG,OAAQsD,IAC3CqjG,EAAM7lG,KAAKylG,gBAAgBjjG,GAC3BqjG,EAAIh6F,QAAUg6F,EAAIz4E,IAAM04E,EACxBD,EAAIh6F,SAAW,IACf6K,EAAM/K,SAASrD,KAAKu9F,GAItBnvF,EAAM/K,SAASg3F,aAAe3iG,KAAKqlG,eAAe1C,aAGlD3iG,KAAKslG,WAAa,KAClBtlG,KAAKulG,WAAa,KAClBvlG,KAAKgtB,UAAY,GACjBhtB,KAAKktB,UAAY,GACjBltB,KAAKwlG,gBAAgBtmG,OAAS,EAC9Bc,KAAKylG,gBAAgBvmG,OAAS,EAC9Bc,KAAK0lG,cAAgB,EACrB1lG,KAAK2lG,gBAAkB,EAGvB3lG,KAAKmG,QAAQ,OAAQuQ,GAErB1W,KAAKmG,QAAQ,UAGf/K,EAAOC,QAAU8pG,G,mBChJjB/pG,EAAOC,QAAU,8xF,mBCAjBD,EAAOC,QAAU,snJ,0CCAjBD,EAAOC,QAAU,kgI,kCCcjBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAET,IAAIiqG,EAA8B,SAAqC5nE,EAAcnU,EAAarI,GAChG,IAAI43B,EAASvvB,EAAYmB,QAGzB,GAAIxJ,EAAQyK,UAAYzK,EAAQyK,SAASntB,OAKvC,IAAK,IAAIo4F,KAJJl5D,EAAajzB,oBAChBizB,EAAajzB,kBAAoB,IAGfyW,EAAQmkF,eAC1B,IAAK3nE,EAAajzB,kBAAkBmsF,GAAU,CAC5C99C,EAAOr5C,MAAMgG,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,YAC5C,IAAI7C,EAAQuuC,EAAOyL,aAAaiE,aAAaouC,GAM3Cl5D,EAAajzB,kBAAkBmsF,GAJ7BrsF,GAQwCuuC,EAAO9U,mBAAmB,CAClEC,KAAM,WACN96B,GAAIytF,EACJ1yD,MAAO0yD,IACN,GAAOrsF,MAMd2W,EAAQjW,UAAYiW,EAAQjW,SAASzM,SAAWk/B,EAAapyB,iBAC/DoyB,EAAapyB,eAAiBwtC,EAAO9U,mBAAmB,CACtDC,KAAM,WACNC,MAAO,mBACN,GAAO35B,MACVmzB,EAAapyB,eAAe83B,gCAAkCliB,EAAQjW,SAASg3F,eAInFtnG,EAAQ,WAAa2qG,EACrB5qG,EAAOC,QAAUA,EAAQ,Y,kCCzDzB,IAGI4qG,EAAYC,EACZC,EAJA73E,EAAS,EAAQ,QACjBvH,EAAY,EAAQ,QAQxBm/E,EAAgB,WACd,IAEE1jG,EACAmlB,EAFArmB,EAAY,EAGd4kG,EAActjG,UAAUof,KAAKlf,KAAK9C,MAElCA,KAAKsI,KAAO,SAASQ,GACnB,IAAIs9F,EAsBJ,IApBKz+E,GAGHy+E,EAAa,IAAInkF,WAAW0F,EAAOxF,WAAarZ,EAAKA,KAAKqZ,YAC1DikF,EAAW5+E,IAAIG,GACfy+E,EAAW5+E,IAAI1e,EAAKA,KAAM6e,EAAOxF,YACjCwF,EAASy+E,GALTz+E,EAAS7e,EAAKA,KAmBTxH,EAAYqmB,EAAOxF,WAAa,EAAG7gB,IACxC,GAA8B,IAA1BqmB,EAAOrmB,EAAY,GAAU,CAE/BkB,EAAIlB,EAAY,EAChB,MAIJ,MAAOkB,EAAImlB,EAAOxF,WAGhB,OAAQwF,EAAOnlB,IACf,KAAK,EAEH,GAAsB,IAAlBmlB,EAAOnlB,EAAI,GAAU,CACvBA,GAAK,EACL,MACK,GAAsB,IAAlBmlB,EAAOnlB,EAAI,GAAU,CAC9BA,IACA,MAIElB,EAAY,IAAMkB,EAAI,GACxBxC,KAAKmG,QAAQ,OAAQwhB,EAAOF,SAASnmB,EAAY,EAAGkB,EAAI,IAI1D,GACEA,UACqB,IAAdmlB,EAAOnlB,IAAYA,EAAImlB,EAAOzoB,QACvCoC,EAAYkB,EAAI,EAChBA,GAAK,EACL,MACF,KAAK,EAEH,GAAsB,IAAlBmlB,EAAOnlB,EAAI,IACO,IAAlBmlB,EAAOnlB,EAAI,GAAU,CACvBA,GAAK,EACL,MAIFxC,KAAKmG,QAAQ,OAAQwhB,EAAOF,SAASnmB,EAAY,EAAGkB,EAAI,IACxDlB,EAAYkB,EAAI,EAChBA,GAAK,EACL,MACF,QAGEA,GAAK,EACL,MAIJmlB,EAASA,EAAOF,SAASnmB,GACzBkB,GAAKlB,EACLA,EAAY,GAGdtB,KAAKoiB,MAAQ,WAEPuF,GAAUA,EAAOxF,WAAa,GAChCniB,KAAKmG,QAAQ,OAAQwhB,EAAOF,SAASnmB,EAAY,IAGnDqmB,EAAS,KACTrmB,EAAY,EACZtB,KAAKmG,QAAQ,UAGjB+/F,EAActjG,UAAY,IAAI0rB,EAK9B63E,EAAkC,CAChCE,KAAK,EACLC,KAAK,EACLC,KAAK,EACLC,KAAK,EACLC,IAAI,EACJC,IAAI,EACJC,IAAI,EACJC,KAAK,EACLC,KAAK,EACLC,KAAK,EACLC,KAAK,EACLC,KAAK,GAOPf,EAAa,WACX,IAEE9hG,EACAmzF,EACA2P,EACAC,EAEAC,EACAC,EACAC,EARAC,EAAgB,IAAIpB,EAUtBD,EAAWrjG,UAAUof,KAAKlf,KAAK9C,MAC/BmE,EAAOnE,KAEPA,KAAKsI,KAAO,SAAS6sB,GACC,UAAhBA,EAAO/rB,OAGXkuF,EAAUniE,EAAOmiE,QACjB2P,EAAa9xE,EAAO/H,IACpB85E,EAAa/xE,EAAO9G,IAEpBi5E,EAAch/F,KAAK6sB,KAGrBmyE,EAAczhG,GAAG,QAAQ,SAASiD,GAChC,IACE4N,EAAQ,CACN4gF,QAASA,EACTlqE,IAAK65E,EACL54E,IAAK64E,EACLp+F,KAAMA,GAGV,OAAkB,GAAVA,EAAK,IACb,KAAK,EACH4N,EAAMme,YAAc,4CACpB,MACF,KAAK,EACHne,EAAMme,YAAc,WACpBne,EAAMoe,YAAcqyE,EAAgCr+F,EAAK2e,SAAS,IAClE,MACF,KAAK,EACH/Q,EAAMme,YAAc,yBACpBne,EAAMoe,YAAcqyE,EAAgCr+F,EAAK2e,SAAS,IAClE/Q,EAAM+1D,OAAS26B,EAAyB1wF,EAAMoe,aAC9C,MACF,KAAK,EACHpe,EAAMme,YAAc,yBACpB,MACF,KAAK,EACHne,EAAMme,YAAc,6BACpB,MAEF,QACE,MAEF1wB,EAAKgC,QAAQ,OAAQuQ,MAEvB4wF,EAAczhG,GAAG,QAAQ,WACvB1B,EAAKgC,QAAQ,WAGfnG,KAAKoiB,MAAQ,WACXklF,EAAcllF,SAYhBilF,EAAkB,SAAS1yF,EAAO4yF,GAChC,IAGEn5E,EACAo5E,EAHAC,EAAY,EACZC,EAAY,EAId,IAAKt5E,EAAI,EAAGA,EAAIzZ,EAAOyZ,IACH,IAAds5E,IACFF,EAAaD,EAAiB9+E,gBAC9Bi/E,GAAaD,EAAYD,EAAa,KAAO,KAG/CC,EAA2B,IAAdC,EAAmBD,EAAYC,GAYhDP,EAAkC,SAASr+F,GACzC,IAIE6+F,EAAWC,EAHX1oG,EAAS4J,EAAKqZ,WACd0lF,EAAoC,GACpCrlG,EAAI,EAIN,MAAOA,EAAItD,EAAS,EACF,IAAZ4J,EAAKtG,IAA4B,IAAhBsG,EAAKtG,EAAI,IAA4B,IAAhBsG,EAAKtG,EAAI,IACjDqlG,EAAkCv/F,KAAK9F,EAAI,GAC3CA,GAAK,GAELA,IAMJ,GAAiD,IAA7CqlG,EAAkC3oG,OACpC,OAAO4J,EAIT6+F,EAAYzoG,EAAS2oG,EAAkC3oG,OACvD0oG,EAAU,IAAI3lF,WAAW0lF,GACzB,IAAIG,EAAc,EAElB,IAAKtlG,EAAI,EAAGA,EAAImlG,EAAWG,IAAetlG,IACpCslG,IAAgBD,EAAkC,KAEpDC,IAEAD,EAAkCn7E,SAEpCk7E,EAAQplG,GAAKsG,EAAKg/F,GAGpB,OAAOF,GAYTR,EAA2B,SAASt+F,GAClC,IAMEy+F,EAAkB1e,EAAYE,EAAUD,EACxCif,EAAiBC,EACjBC,EAAgCC,EAChCC,EACAC,EACAC,EACAC,EACAC,EACA/lG,EAbAgmG,EAAsB,EACtBC,EAAuB,EACvBC,EAAqB,EACrBC,EAAwB,EACxBC,EAAW,EAkBb,GAPArB,EAAmB,IAAIxgF,EAAUje,GACjC+/E,EAAa0e,EAAiB5+E,mBAC9BmgE,EAAuBye,EAAiB5+E,mBACxCogE,EAAWwe,EAAiB5+E,mBAC5B4+E,EAAiBl/E,wBAGb89E,EAAgCtd,KAClCkf,EAAkBR,EAAiBh/E,wBACX,IAApBw/E,GACFR,EAAiB1/E,SAAS,GAE5B0/E,EAAiBl/E,wBACjBk/E,EAAiBl/E,wBACjBk/E,EAAiB1/E,SAAS,GACtB0/E,EAAiB7+E,eAEnB,IADA2/E,EAAwC,IAApBN,EAAyB,EAAI,GAC5CvlG,EAAI,EAAGA,EAAI6lG,EAAkB7lG,IAC5B+kG,EAAiB7+E,eAEjB2+E,EADE7kG,EAAI,EACU,GAEA,GAFI+kG,GAY9B,GAHAA,EAAiBl/E,wBACjB2/E,EAAkBT,EAAiBh/E,wBAEX,IAApBy/E,EACFT,EAAiBh/E,6BACZ,GAAwB,IAApBy/E,EAKT,IAJAT,EAAiB1/E,SAAS,GAC1B0/E,EAAiBj/E,gBACjBi/E,EAAiBj/E,gBACjB2/E,EAAiCV,EAAiBh/E,wBAC7C/lB,EAAI,EAAGA,EAAIylG,EAAgCzlG,IAC9C+kG,EAAiBj/E,gBAsBrB,GAlBAi/E,EAAiBl/E,wBACjBk/E,EAAiB1/E,SAAS,GAE1BqgF,EAAsBX,EAAiBh/E,wBACvC4/E,EAA4BZ,EAAiBh/E,wBAE7C6/E,EAAmBb,EAAiBx/E,SAAS,GACpB,IAArBqgF,GACFb,EAAiB1/E,SAAS,GAG5B0/E,EAAiB1/E,SAAS,GACtB0/E,EAAiB7+E,gBACnB8/E,EAAsBjB,EAAiBh/E,wBACvCkgF,EAAuBlB,EAAiBh/E,wBACxCmgF,EAAqBnB,EAAiBh/E,wBACtCogF,EAAwBpB,EAAiBh/E,yBAEvCg/E,EAAiB7+E,eAEf6+E,EAAiB7+E,cAAe,CAGlC,OADA6/E,EAAiBhB,EAAiB5+E,mBAC1B4/E,GACN,KAAK,EAAGD,EAAW,CAAC,EAAG,GAAI,MAC3B,KAAK,EAAGA,EAAW,CAAC,GAAI,IAAK,MAC7B,KAAK,EAAGA,EAAW,CAAC,GAAI,IAAK,MAC7B,KAAK,EAAGA,EAAW,CAAC,GAAI,IAAK,MAC7B,KAAK,EAAGA,EAAW,CAAC,GAAI,IAAK,MAC7B,KAAK,EAAGA,EAAW,CAAC,GAAI,IAAK,MAC7B,KAAK,EAAGA,EAAW,CAAC,GAAI,IAAK,MAC7B,KAAK,EAAGA,EAAW,CAAC,GAAI,IAAK,MAC7B,KAAK,EAAGA,EAAW,CAAC,GAAI,IAAK,MAC7B,KAAK,GAAIA,EAAW,CAAC,GAAI,IAAK,MAC9B,KAAK,GAAIA,EAAW,CAAC,GAAI,IAAK,MAC9B,KAAK,GAAIA,EAAW,CAAC,GAAI,IAAK,MAC9B,KAAK,GAAIA,EAAW,CAAC,IAAK,IAAK,MAC/B,KAAK,GAAIA,EAAW,CAAC,EAAG,GAAI,MAC5B,KAAK,GAAIA,EAAW,CAAC,EAAG,GAAI,MAC5B,KAAK,GAAIA,EAAW,CAAC,EAAG,GAAI,MAC5B,KAAK,IACHA,EAAW,CAACf,EAAiB5+E,oBAAsB,EACvC4+E,EAAiB5+E,mBACjB4+E,EAAiB5+E,oBAAsB,EACvC4+E,EAAiB5+E,oBAC7B,MAGA2/E,IACFM,EAAWN,EAAS,GAAKA,EAAS,IAIxC,MAAO,CACLzf,WAAYA,EACZE,SAAUA,EACVD,qBAAsBA,EACtB7qF,MAAOoM,KAAK0nF,MAAmC,IAA3BmW,EAAsB,GAAiC,EAAtBM,EAAiD,EAAvBC,GAA4BG,GAC3GjqG,QAAU,EAAIypG,IAAqBD,EAA4B,GAAK,GAA4B,EAArBO,EAAmD,EAAxBC,KAK5G1C,EAAWrjG,UAAY,IAAI0rB,EAE3BlzB,EAAOC,QAAU,CACf4qG,WAAYA,EACZC,cAAeA,I,kCCvZjBrqG,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAI8yB,EAAiB,WAAe,SAASC,EAAc3X,EAAK3U,GAAK,IAAIusB,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAWC,OAAKzyB,EAAW,IAAM,IAAK,IAAiCmR,EAA7BuhB,EAAKhY,EAAIiY,OAAOC,cAAmBL,GAAMphB,EAAKuhB,EAAGG,QAAQC,MAAOP,GAAK,EAA6B,GAArBD,EAAKzmB,KAAKsF,EAAG7R,OAAYyG,GAAKusB,EAAK7vB,SAAWsD,EAAG,MAAW,MAAOgtB,GAAOP,GAAK,EAAMC,EAAKM,EAAO,QAAU,KAAWR,GAAMG,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIF,EAAI,MAAMC,GAAQ,OAAOH,EAAQ,OAAO,SAAU5X,EAAK3U,GAAK,GAAIyoB,MAAMwE,QAAQtY,GAAQ,OAAOA,EAAY,GAAIiY,OAAOC,YAAYxzB,OAAOsb,GAAQ,OAAO2X,EAAc3X,EAAK3U,GAAa,MAAM,IAAIyB,UAAU,yDAAlkB,GAErB,SAASvI,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,IAAI6N,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAGnC6X,EAAoB,EAAI,GAMxBtB,EAAsC,EAApBsB,EASlBwnF,EAAQ,SAAej4F,EAAK6sE,GAC9B,IAAIU,EAAQtvD,EAAe4uD,EAAM,GAE7Bl9D,EAAQ49D,EAAM,GACdn+D,EAAMm+D,EAAM,GAEhB,OAAO9zE,KAAKoZ,IAAIpZ,KAAKijB,IAAI/M,EAAO3P,GAAMoP,IAEpC8oF,EAAe,SAAsBC,EAAY72D,GACnD,IAAI7d,EAAU,GACV7xB,OAAI/F,EAER,GAAIssG,GAAcA,EAAW7pG,OAE3B,IAAKsD,EAAI,EAAGA,EAAIumG,EAAW7pG,OAAQsD,IAC7B0vC,EAAU62D,EAAWxoF,MAAM/d,GAAIumG,EAAW/oF,IAAIxd,KAChD6xB,EAAQ/rB,KAAK,CAACygG,EAAWxoF,MAAM/d,GAAIumG,EAAW/oF,IAAIxd,KAKxD,OAAOiH,EAAU,WAAWsiB,iBAAiBsI,IAU3C1T,EAAY,SAAmBb,EAAUlU,GAC3C,OAAOk9F,EAAahpF,GAAU,SAAUS,EAAOP,GAC7C,OAAOO,EAAQc,GAAqBzV,GAAQoU,EAAMqB,GAAqBzV,MAUvEkV,EAAgB,SAAuBioF,EAAYn9F,GACrD,OAAOk9F,EAAaC,GAAY,SAAUxoF,GACxC,OAAOA,EAAQc,GAAqBzV,MASpC2V,EAAW,SAAkBzB,GAC/B,GAAIA,EAAS5gB,OAAS,EACpB,OAAOuK,EAAU,WAAWsiB,mBAK9B,IAFA,IAAIkU,EAAS,GAEJz9B,EAAI,EAAGA,EAAIsd,EAAS5gB,OAAQsD,IAAK,CACxC,IAAI+d,EAAQT,EAASE,IAAIxd,EAAI,GACzBwd,EAAMF,EAASS,MAAM/d,GAEzBy9B,EAAO33B,KAAK,CAACiY,EAAOP,IAGtB,OAAOvW,EAAU,WAAWsiB,iBAAiBkU,IAY3C+oE,EAAgC,SAAuCzlF,EAAUC,GACnF,IAAIhhB,OAAI/F,EACJ8jB,OAAQ9jB,EACRujB,OAAMvjB,EACND,EAAS,GACTysG,EAAQ,GAORC,EAAqB,SAA4BC,GACnD,OAAOA,EAAK,IAAMnpF,GAAOmpF,EAAK,IAAMnpF,GAGtC,GAAIuD,EAEF,IAAK/gB,EAAI,EAAGA,EAAI+gB,EAASrkB,OAAQsD,IAC/B+d,EAAQgD,EAAShD,MAAM/d,GACvBwd,EAAMuD,EAASvD,IAAIxd,GAEnBymG,EAAM3gG,KAAK,CAACiY,EAAOP,IAIvB,GAAIwD,EAGF,IAAKhhB,EAAI,EAAGA,EAAIghB,EAAOtkB,OAAQsD,IAC7B+d,EAAQiD,EAAOjD,MAAM/d,GACrBwd,EAAMwD,EAAOxD,IAAIxd,GAEbymG,EAAM5pD,KAAK6pD,IAKf1sG,EAAO8L,KAAK0X,GAMhB,OAAsB,IAAlBxjB,EAAO0C,OACF,KAGF1C,EAAO,IASZ4sG,EAAqB,SAA4BC,EAASC,GAC5D,IAAI/oF,EAAQ,KACRP,EAAM,KACNupF,EAAQ,EACRC,EAAU,GACVvpE,EAAS,GAEb,IAAKopE,IAAYA,EAAQnqG,SAAWoqG,IAAYA,EAAQpqG,OACtD,OAAOuK,EAAU,WAAWoiB,kBAK9B,IAAIlX,EAAQ00F,EAAQnqG,OAGpB,MAAOyV,IACL60F,EAAQlhG,KAAK,CAAEsD,KAAMy9F,EAAQ9oF,MAAM5L,GAAQvL,KAAM,UACjDogG,EAAQlhG,KAAK,CAAEsD,KAAMy9F,EAAQrpF,IAAIrL,GAAQvL,KAAM,QAEjDuL,EAAQ20F,EAAQpqG,OAChB,MAAOyV,IACL60F,EAAQlhG,KAAK,CAAEsD,KAAM09F,EAAQ/oF,MAAM5L,GAAQvL,KAAM,UACjDogG,EAAQlhG,KAAK,CAAEsD,KAAM09F,EAAQtpF,IAAIrL,GAAQvL,KAAM,QASjD,IANAogG,EAAQvsG,MAAK,SAAU6E,EAAGC,GACxB,OAAOD,EAAE8J,KAAO7J,EAAE6J,QAKf+I,EAAQ,EAAGA,EAAQ60F,EAAQtqG,OAAQyV,IACV,UAAxB60F,EAAQ70F,GAAOvL,MACjBmgG,IAIc,IAAVA,IACFhpF,EAAQipF,EAAQ70F,GAAO/I,OAEQ,QAAxB49F,EAAQ70F,GAAOvL,OACxBmgG,IAIc,IAAVA,IACFvpF,EAAMwpF,EAAQ70F,GAAO/I,OAKX,OAAV2U,GAA0B,OAARP,IACpBigB,EAAO33B,KAAK,CAACiY,EAAOP,IACpBO,EAAQ,KACRP,EAAM,MAIV,OAAOvW,EAAU,WAAWsiB,iBAAiBkU,IAe3CwpE,EAA2B,SAAkCC,EAAeC,EAAgBjpG,EAAaof,GAC3G,IAAI8pF,EAAoBD,EAAe3pF,IAAI,GAAK2pF,EAAeppF,MAAM,GACjEspF,EAAmBH,EAAc1pF,IAAI,GAAK0pF,EAAcnpF,MAAM,GAC9DupF,EAA4BF,EAAoBC,EAChDE,EAAuBX,EAAmBM,EAAe5pF,GACzDkqF,EAAwBZ,EAAmBO,EAAgB7pF,GAC3DmqF,EAAkB,EAClBC,EAAmB,EAEnBv1F,EAAQo1F,EAAqB7qG,OAEjC,MAAOyV,IACLs1F,GAAmBF,EAAqB/pF,IAAIrL,GAASo1F,EAAqBxpF,MAAM5L,GAM5Eo1F,EAAqBxpF,MAAM5L,KAAWjU,IACxCupG,GAAmBH,GAIvBn1F,EAAQq1F,EAAsB9qG,OAE9B,MAAOyV,IACLu1F,GAAoBF,EAAsBhqF,IAAIrL,GAASq1F,EAAsBzpF,MAAM5L,GAKrF,OAAOtK,KAAKijB,IAAI28E,EAAiBC,GAAoBN,EAAoB,KAevEO,EAA4B,SAAmC32E,EAAgB5yB,EAAiBF,EAAaof,GAC/G,IAAIsqF,EAAe52E,EAAiB5yB,EAGhCypG,EAAuB5gG,EAAU,WAAWsiB,iBAAiB,CAAC,CAACyH,EAAgB42E,KAQ/EE,EAAuB7gG,EAAU,WAAWsiB,iBAAiB,CAAC,CAAC88E,EAAMr1E,EAAgB,CAAC9yB,EAAa0pG,IAAgBA,KAIvH,GAAIE,EAAqB/pF,MAAM,KAAO+pF,EAAqBtqF,IAAI,GAC7D,OAAO,EAGT,IAAIshD,EAAUmoC,EAAyBa,EAAsBD,EAAsB3pG,EAAaof,GAIhG,OAAI1V,MAAMk3D,IAAYA,IAAY/2D,KAAY+2D,KAAa/2D,IAClD,EAGF+2D,GASL9gD,EAAiB,SAAwB0e,GAC3C,IAAIqrE,EAAS,GAEb,IAAKrrE,IAAUA,EAAMhgC,OACnB,MAAO,GAGT,IAAK,IAAIsD,EAAI,EAAGA,EAAI08B,EAAMhgC,OAAQsD,IAChC+nG,EAAOjiG,KAAK42B,EAAM3e,MAAM/d,GAAK,OAAS08B,EAAMlf,IAAIxd,IAGlD,OAAO+nG,EAAOluF,KAAK,OAiBjBxb,EAAoB,SAA2Bif,EAAUpf,GAC3D,IAAIypE,EAAe1nE,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,EAAIA,UAAU,GAEnF0mC,EAAcrpB,EAAS5gB,OAAS4gB,EAASE,IAAIF,EAAS5gB,OAAS,GAAK,EAExE,OAAQiqC,EAAczoC,GAAeypE,GAGvC9uE,EAAQ,WAAa,CACnBslB,UAAWA,EACXG,cAAeA,EACfS,SAAUA,EACVynF,8BAA+BA,EAC/BmB,0BAA2BA,EAC3B9oF,kBAAmBA,EACnBtB,gBAAiBA,EACjBS,eAAgBA,EAChB3f,kBAAmBA,GAErBzF,EAAOC,QAAUA,EAAQ,Y,kCC1WzBD,EAAOC,QAAU,SAAemvG,GAC9B,OAAOA,EAAO/iF,SAAS,EAAG+iF,EAAOroF,WAAaqoF,EAAOA,EAAOroF,WAAa,M,kCCf3E,IAAIsoF,EAAU,WACZ,IAAItmG,EAAOnE,KAEXA,KAAK6oD,KAAO,GAEZ7oD,KAAKsI,KAAO,SAASrC,GACnBjG,KAAK6oD,KAAKvgD,KAAK,CACb6jB,MAAOlmB,EAAIkmB,MACXkC,IAAKpoB,EAAIooB,IACTjB,IAAKnnB,EAAImnB,IACTK,SAAUxnB,EAAIwnB,SACdC,YAAaznB,EAAIynB,eAIrB7xB,OAAOC,eAAekE,KAAM,SAAU,CACpC8J,IAAK,WACH,OAAO3F,EAAK0kD,KAAK3pD,WAKvB9D,EAAOC,QAAUovG,G,mBCxBjBrvG,EAAOC,QAAU,81G,kCCEjBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAI8yB,EAAiB,WAAc,SAASC,EAAc3X,EAAK3U,GAAK,IAAIusB,EAAO,GAAQC,GAAK,EAAUC,GAAK,EAAWC,OAAKzyB,EAAW,IAAM,IAAK,IAAiCmR,EAA7BuhB,EAAKhY,EAAIiY,OAAOC,cAAmBL,GAAMphB,EAAKuhB,EAAGG,QAAQC,MAAOP,GAAK,EAA6B,GAArBD,EAAKzmB,KAAKsF,EAAG7R,OAAYyG,GAAKusB,EAAK7vB,SAAWsD,EAAG,MAAW,MAAOgtB,GAAOP,GAAK,EAAMC,EAAKM,EAAO,QAAU,KAAWR,GAAMG,EAAG,WAAWA,EAAG,YAAe,QAAU,GAAIF,EAAI,MAAMC,GAAQ,OAAOH,EAAQ,OAAO,SAAU5X,EAAK3U,GAAK,GAAIyoB,MAAMwE,QAAQtY,GAAQ,OAAOA,EAAY,GAAIiY,OAAOC,YAAYxzB,OAAOsb,GAAQ,OAAO2X,EAAc3X,EAAK3U,GAAa,MAAM,IAAIyB,UAAU,yDAAjkB,GAEjBlB,EAAe,WAAc,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA7gB,GAEfG,EAAU,EAAQ,QAElBC,EAAWhI,EAAuB+H,GAEtC,SAAS/H,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASC,EAA2BC,EAAMrB,GAAQ,IAAKqB,EAAQ,MAAM,IAAIC,eAAe,6DAAgE,OAAOtB,GAAyB,kBAATA,GAAqC,oBAATA,EAA8BqB,EAAPrB,EAElO,SAASuB,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAYje,IAAImmG,EAAqB,WACvB,IAAI/nG,EAAM,QACN5G,EAAQ,gBACR4uG,EAAW,MAAQhoG,EAAM,QAAU5G,EAAQ,IAE/C,OAAO,IAAIuyC,OAAO,WAAaq8D,EAAW,MAQxCC,EAAkB,SAAyBntG,GAE7C,IAAIyP,EAAQzP,EAAW0yB,MAAMu6E,KACzBluG,EAAS,GACTgG,EAAI0K,EAAMhO,OACVszE,OAAO,EAEX,MAAOhwE,IAEY,KAAb0K,EAAM1K,KAKVgwE,EAAO,eAAehnC,KAAKt+B,EAAM1K,IAAIxF,MAAM,GAE3Cw1E,EAAK,GAAKA,EAAK,GAAGx1D,QAAQ,aAAc,IACxCw1D,EAAK,GAAKA,EAAK,GAAGx1D,QAAQ,aAAc,IACxCw1D,EAAK,GAAKA,EAAK,GAAGx1D,QAAQ,kBAAmB,MAC7CxgB,EAAOg2E,EAAK,IAAMA,EAAK,IAEzB,OAAOh2E,GA4BL2hB,EAAc,SAAUtZ,GAG1B,SAASsZ,IAGP,OAFApa,EAAgB/D,KAAMme,GAEfja,EAA2BlE,MAAOme,EAAYxZ,WAAa9I,OAAOkJ,eAAeoZ,IAAcrb,KAAK9C,OA4V7G,OAjWAqE,EAAU8Z,EAAatZ,GAevB9B,EAAaob,EAAa,CAAC,CACzBxb,IAAK,OACL5G,MAAO,SAAckxF,GACnB,IAAIhrD,OAAQ,EACRvrB,OAAQ,EAIZ,GADAu2E,EAAOA,EAAKjwE,QAAQ,6BAA8B,IAC9B,IAAhBiwE,EAAK/tF,OAMT,GAAgB,MAAZ+tF,EAAK,GAST,GAA6B,IAAzBA,EAAK5vF,QAAQ,QAcjB,GAJA4vF,EAAOA,EAAKjwE,QAAQ,KAAM,IAG1BilB,EAAQ,WAAWuJ,KAAKyhD,GACpBhrD,EACFjiC,KAAKmG,QAAQ,OAAQ,CACnBiD,KAAM,MACNH,QAAS,YAHb,CAQA,GADAg5B,EAAQ,gCAAgCuJ,KAAKyhD,GACzChrD,EAYF,OAXAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,OAEPg5B,EAAM,KACRvrB,EAAM/V,SAAWovB,WAAWkS,EAAM,KAEhCA,EAAM,KACRvrB,EAAMiwD,MAAQ1kC,EAAM,SAEtBjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,qCAAqCuJ,KAAKyhD,GAC9ChrD,EASF,OARAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,kBAEPg5B,EAAM,KACRvrB,EAAM/V,SAAWT,SAAS+hC,EAAM,GAAI,UAEtCjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,mCAAmCuJ,KAAKyhD,GAC5ChrD,EASF,OARAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,iBAEPg5B,EAAM,KACRvrB,EAAM/V,SAAWT,SAAS+hC,EAAM,GAAI,UAEtCjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,8BAA8BuJ,KAAKyhD,GACvChrD,EASF,OARAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,WAEPg5B,EAAM,KACRvrB,EAAMy0B,QAAUjrC,SAAS+hC,EAAM,GAAI,UAErCjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,wCAAwCuJ,KAAKyhD,GACjDhrD,EASF,OARAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,kBAEPg5B,EAAM,KACRvrB,EAAMvP,OAASjH,SAAS+hC,EAAM,GAAI,UAEpCjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,gDAAgDuJ,KAAKyhD,GACzDhrD,EASF,OARAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,0BAEPg5B,EAAM,KACRvrB,EAAMvP,OAASjH,SAAS+hC,EAAM,GAAI,UAEpCjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,gCAAgCuJ,KAAKyhD,GACzChrD,EASF,OARAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,iBAEPg5B,EAAM,KACRvrB,EAAMrP,aAAe46B,EAAM,SAE7BjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,4CAA4CuJ,KAAKyhD,GACrDhrD,EAYF,OAXAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,aAEPg5B,EAAM,KACRvrB,EAAMxX,OAASgB,SAAS+hC,EAAM,GAAI,KAEhCA,EAAM,KACRvrB,EAAMpQ,OAASpG,SAAS+hC,EAAM,GAAI,UAEpCjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,iCAAiCuJ,KAAKyhD,GAC1ChrD,EASF,OARAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,eAEPg5B,EAAM,KACRvrB,EAAMxQ,SAAW,KAAKkB,KAAK66B,EAAM,UAEnCjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,qBAAqBuJ,KAAKyhD,GAC9BhrD,EAAJ,CAME,GALAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,OAGPg5B,EAAM,GAAI,CACZ,IAAIxkC,EAAamtG,EAAgB3oE,EAAM,IAKvC,GAHIxkC,EAAWoJ,MACb6P,EAAM3P,IAAMtJ,EAAWoJ,KAErBpJ,EAAWotG,UAAW,CACxB,IAAIC,EAAwBrtG,EAAWotG,UAAU16E,MAAM,KACnD46E,EAAyBl8E,EAAei8E,EAAuB,GAC/D5rG,EAAS6rG,EAAuB,GAChCzkG,EAASykG,EAAuB,GAEpCr0F,EAAMrQ,UAAY,GACdnH,IACFwX,EAAMrQ,UAAUnH,OAASgB,SAAShB,EAAQ,KAExCoH,IACFoQ,EAAMrQ,UAAUC,OAASpG,SAASoG,EAAQ,MAKhDtG,KAAKmG,QAAQ,OAAQuQ,QAIvB,GADAurB,EAAQ,4BAA4BuJ,KAAKyhD,GACrChrD,EAAJ,CAKE,GAJAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,cAEPg5B,EAAM,GAAI,CAGZ,GAFAvrB,EAAMjZ,WAAamtG,EAAgB3oE,EAAM,IAErCvrB,EAAMjZ,WAAWO,WAAY,CAC/B,IAAImyB,EAAQzZ,EAAMjZ,WAAWO,WAAWmyB,MAAM,KAC1C66E,EAAa,GAEb76E,EAAM,KACR66E,EAAW/sG,MAAQiC,SAASiwB,EAAM,GAAI,KAEpCA,EAAM,KACR66E,EAAWrsG,OAASuB,SAASiwB,EAAM,GAAI,KAEzCzZ,EAAMjZ,WAAWO,WAAagtG,EAE5Bt0F,EAAMjZ,WAAWC,YACnBgZ,EAAMjZ,WAAWC,UAAYwC,SAASwW,EAAMjZ,WAAWC,UAAW,KAEhEgZ,EAAMjZ,WAAW,gBACnBiZ,EAAMjZ,WAAW,cAAgByC,SAASwW,EAAMjZ,WAAW,cAAe,KAG9EuC,KAAKmG,QAAQ,OAAQuQ,OA3BvB,CA+BA,GADAurB,EAAQ,uBAAuBuJ,KAAKyhD,GAChChrD,EASF,OARAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,SAEPg5B,EAAM,KACRvrB,EAAMjZ,WAAamtG,EAAgB3oE,EAAM,UAE3CjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,kBAAkBuJ,KAAKyhD,GAC3BhrD,EACFjiC,KAAKmG,QAAQ,OAAQ,CACnBiD,KAAM,MACNH,QAAS,iBAKb,GADAg5B,EAAQ,wBAAwBuJ,KAAKyhD,GACjChrD,EACFjiC,KAAKmG,QAAQ,OAAQ,CACnBiD,KAAM,MACNH,QAAS,sBAHb,CAQA,GADAg5B,EAAQ,mCAAmCuJ,KAAKyhD,GAC5ChrD,EAUF,OATAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,qBAEPg5B,EAAM,KACRvrB,EAAMnO,eAAiB05B,EAAM,GAC7BvrB,EAAMlO,eAAiB,IAAIkI,KAAKuxB,EAAM,UAExCjiC,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,qBAAqBuJ,KAAKyhD,GAC9BhrD,EAsBF,OArBAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,OAEPg5B,EAAM,KACRvrB,EAAMjZ,WAAamtG,EAAgB3oE,EAAM,IAErCvrB,EAAMjZ,WAAWuJ,KACuC,OAAtD0P,EAAMjZ,WAAWuJ,GAAG8V,UAAU,EAAG,GAAGyc,gBACtC7iB,EAAMjZ,WAAWuJ,GAAK0P,EAAMjZ,WAAWuJ,GAAG8V,UAAU,IAGtDpG,EAAMjZ,WAAWuJ,GAAK0P,EAAMjZ,WAAWuJ,GAAGi7B,MAAM,SAChDvrB,EAAMjZ,WAAWuJ,GAAG,GAAK9G,SAASwW,EAAMjZ,WAAWuJ,GAAG,GAAI,IAC1D0P,EAAMjZ,WAAWuJ,GAAG,GAAK9G,SAASwW,EAAMjZ,WAAWuJ,GAAG,GAAI,IAC1D0P,EAAMjZ,WAAWuJ,GAAG,GAAK9G,SAASwW,EAAMjZ,WAAWuJ,GAAG,GAAI,IAC1D0P,EAAMjZ,WAAWuJ,GAAG,GAAK9G,SAASwW,EAAMjZ,WAAWuJ,GAAG,GAAI,IAC1D0P,EAAMjZ,WAAWuJ,GAAK,IAAI63B,YAAYnoB,EAAMjZ,WAAWuJ,WAG3DhH,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,+BAA+BuJ,KAAKyhD,GACxChrD,EAWF,OAVAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,gBAEPg5B,EAAM,GACRvrB,EAAM5N,KAAOm5B,EAAM,GAEnBvrB,EAAM5N,KAAO,QAEf9I,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,0BAA0BuJ,KAAKyhD,GACnChrD,EAWF,OAVAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,WAEPg5B,EAAM,GACRvrB,EAAM5N,KAAOm5B,EAAM,GAEnBvrB,EAAM5N,KAAO,QAEf9I,KAAKmG,QAAQ,OAAQuQ,GAIvB,GADAurB,EAAQ,yBAAyBuJ,KAAKyhD,GAClChrD,EAWF,OAVAvrB,EAAQ,CACNtN,KAAM,MACNH,QAAS,UAEPg5B,EAAM,GACRvrB,EAAM5N,KAAOm5B,EAAM,GAEnBvrB,EAAM5N,KAAO,QAEf9I,KAAKmG,QAAQ,OAAQuQ,GAKvB1W,KAAKmG,QAAQ,OAAQ,CACnBiD,KAAM,MACNN,KAAMmkF,EAAKjwF,MAAM,YArTjBgD,KAAKmG,QAAQ,OAAQ,CACnBiD,KAAM,UACNoC,KAAMyhF,EAAKjwF,MAAM,UAXnBgD,KAAKmG,QAAQ,OAAQ,CACnBiD,KAAM,MACNrC,IAAKkmF,QAiUN9uE,EAlWS,CAmWhBza,EAAS,YAEXrI,EAAQ,WAAa8iB,G,mBCncrB/iB,EAAOC,QAAU,83F,kCCEjB,IAAI4vG,EAAS,EAAQ,QAQjB//E,EAAe,SAASvqB,EAAUwyB,EAAOF,GAC3C,IAGEtnB,EACAnP,EACA0uG,EAJAC,EAAY,IAAIlpF,WAAW,GAC3Bs1D,EAAO,IAAI7vD,SAASyjF,EAAUxjF,QAyBhC,OAnBAhnB,EAAWA,GAAY,EACvBwyB,OAAkB12B,IAAV02B,GAA6BA,EACrCF,OAAkBx2B,IAAVw2B,GAA6BA,EAGrCskD,EAAK6zB,SAAS,EAAG,IACjB7zB,EAAK6zB,SAAS,EAAG,IACjB7zB,EAAK6zB,SAAS,EAAG,IAGjB7zB,EAAK6zB,SAAS,EAAG,GAGjB7zB,EAAK6zB,SAAS,GAAIj4E,EAAQ,EAAO,IAASF,EAAQ,EAAO,IAGzDskD,EAAKwQ,UAAU,EAAGojB,EAAUhpF,YAGxBxhB,GAAY,GAGdnE,EAAS,IAAIylB,WAAWkpF,EAAUhpF,WAAa,GAC/C3lB,EAAOgrB,IAAI2jF,GACX3uG,EAAOgrB,IAAI,CAAC,EAAG,EAAG,EAAG,GAAI2jF,EAAUhpF,YAC5B3lB,IAITmP,EAAW,IAAIs/F,EAAOA,EAAOI,cAC7B1/F,EAASyhB,IAAMzhB,EAAS0iB,IAAM,EAC9B1iB,EAAS2/F,oBAAoB,WAAY3qG,GACzCuqG,EAAiBv/F,EAAS4/F,WAAWrsG,OACrC1C,EAAS,IAAIylB,WAAWkpF,EAAUhpF,WAAa+oF,GAC/C1uG,EAAOgrB,IAAI2jF,GACX3uG,EAAOgrB,IAAI+vD,EAAKp1D,WAAY+oF,GAErB1uG,IAGTpB,EAAOC,QAAU6vB,G,kCCtDjBrvB,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAaC,EAAIC,EAAKC,GAAO,IAAIC,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASoH,EAAIlmB,EAAWmmB,EAAKG,EAAWF,EAAKC,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA4O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAA/V,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BR,EAAKQ,EAAQP,EAAMnmB,EAAUomB,EAAME,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE5c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAIiF,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCsf,EAA+B,EAAQ,QAEvCC,EAAgCrtB,EAAuBotB,GAEvDF,EAAuB,EAAQ,QAE/BC,EAAwBntB,EAAuBktB,GAE/CI,EAAoB,EAAQ,QAE5BG,EAAc,EAAQ,QAEtBC,EAAe1tB,EAAuBytB,GAEtCqiF,EAAoB,EAAQ,QAE5BC,EAAqB/vG,EAAuB8vG,GAE5C7tE,EAAc,EAAQ,QAEtB+tE,EAAwB,WAC1B,IAAIlvG,OAASC,EAEb,IACED,EAAwB,OACxB,MAAO6a,IAIT,OAAO7a,GAOLmvG,EAA0B,SAAiC1hF,EAAaggB,GAC1E,IAAI7L,EAAenU,EAAY0yE,gBAAgB1yD,GAC3CwR,EAAU5/C,OAAO2I,OAAO,MAE5Bi3C,EAAQ9wB,UAAW,EACnB8wB,EAAQmwD,YAAcxtE,EAEtB,IAAI0tB,EAAQ,SAAUnpD,GACa,oBAAtBy7B,EAAaz7B,GACtB84C,EAAQ94C,GAAO,WACb,OAAOy7B,EAAaz7B,GAAKqoB,MAAMoT,EAAc37B,YAEd,qBAAjBg5C,EAAQ94C,IACxB9G,OAAOC,eAAe2/C,EAAS94C,EAAK,CAClCmH,IAAK,WACH,OAAOs0B,EAAaz7B,IAEtB6kB,IAAK,SAAaihB,GAChB,OAAOrK,EAAaz7B,GAAO8lC,MAMnC,IAAK,IAAI9lC,KAAOy7B,EACd0tB,EAAMnpD,GAGR,OAAO84C,GAgBLowD,EAAsB,SAA6BlkF,EAAQ6xB,EAAQlmB,GACrE,IAAKkmB,IAAW7xB,EAAOzoB,OACrB,MAAO,GAIT,IAAI4sG,EAAiBzhG,KAAK0nF,KAA4C,KAAtCv4C,EAAO94C,cAAgB4yB,EAAU,IAE7D9wB,OAAI/F,EAER,IAAK+F,EAAI,EAAGA,EAAImlB,EAAOzoB,OAAQsD,IAC7B,GAAImlB,EAAOnlB,GAAG4qB,IAAM0+E,EAClB,MAIJ,OAAOnkF,EAAO3qB,MAAMwF,IAGtBnH,EAAQwwG,oBAAsBA,EAe9B,IAAIE,EAAkB,SAAyBpkF,EAAQqkF,EAAMhvF,GAC3D,IAAKgvF,EAAK9sG,OACR,OAAOyoB,EAGT,GAAI3K,EAKF,OAAOgvF,EAAKhvG,QAGd,IAAIujB,EAAQyrF,EAAK,GAAG5+E,IAEhB5qB,EAAI,EAER,IAAKA,EAAGA,EAAImlB,EAAOzoB,OAAQsD,IACzB,GAAImlB,EAAOnlB,GAAG4qB,KAAO7M,EACnB,MAIJ,OAAOoH,EAAO3qB,MAAM,EAAGwF,GAAGyyB,OAAO+2E,IAGnC3wG,EAAQ0wG,gBAAkBA,EAa1B,IAAIE,EAAkB,SAAyBtkF,EAAQpH,EAAOP,EAAKsT,GACjE,IAAIiF,EAAWluB,KAAK0nF,KAAyB,KAAnBxxE,EAAQ+S,IAC9BkF,EAASnuB,KAAK0nF,KAAuB,KAAjB/xE,EAAMsT,IAC1B44E,EAAgBvkF,EAAO3qB,QAEvBwF,EAAImlB,EAAOzoB,OAEf,MAAOsD,IACL,GAAImlB,EAAOnlB,GAAG4qB,KAAOoL,EACnB,MAIJ,IAAW,IAAPh2B,EAEF,OAAO0pG,EAGT,IAAI99E,EAAI5rB,EAAI,EAEZ,MAAO4rB,IACL,GAAIzG,EAAOyG,GAAGhB,KAAOmL,EACnB,MASJ,OAJAnK,EAAI/jB,KAAKijB,IAAIc,EAAG,GAEhB89E,EAAcz9E,OAAOL,EAAG5rB,EAAI4rB,EAAI,GAEzB89E,GAGT7wG,EAAQ4wG,gBAAkBA,EAe1B,IAAIE,EAAsB,SAAWniF,GAGnC,SAASmiF,EAAoBliF,EAAaoY,GACxC,IAAIv9B,EAAQ9E,KAEZ+D,EAAgB/D,KAAMmsG,GAEtB3pF,EAAK3mB,OAAOkJ,eAAeonG,EAAoBvpG,WAAY,cAAe5C,MAAM8C,KAAK9C,KAAMyJ,EAAU,WAAWqd,aAChH9mB,KAAK4qB,iBAAmB,EACxB5qB,KAAKosG,gBAAkB,GACvBpsG,KAAKqsG,iBAAkB,EAEvBrsG,KAAK0L,aAAeue,EACpBjqB,KAAKssG,QAAUjqE,EACfriC,KAAKusG,YAAc,KACnBvsG,KAAKwsG,YAAc,KACnBxsG,KAAKysG,gBAAiB,EACtBzsG,KAAK0sG,yBAA0B,EAC/B1sG,KAAK2sG,WAAa,GAClB3sG,KAAK4sG,aAAe,EACpB5sG,KAAK6sG,YAAcpjG,EAAU,WAAW8+B,QAAQC,YAAc,GAE9D,IAAIhqB,EAAU,CACZsuF,OAAO,EACPC,eAAgB/sG,KAAK6sG,aAGvB7sG,KAAKssG,QAAQvhG,SAAQ,SAAUysF,IACzB,EAAI75D,EAAYqvE,cAAcxV,GAChC1yF,EAAMynG,YAAc/U,GACX,EAAI75D,EAAYsvE,cAAczV,KACvC1yF,EAAM0nG,YAAchV,MAMxBx3F,KAAKyrB,aAAc,EAAIrC,EAAa,YAAYqiF,EAAmB,WAAYC,KAC/E1rG,KAAKyrB,YAAY5J,YAAY,CAAEC,OAAQ,OAAQtD,QAASA,IAExDxe,KAAKyrB,YAAY9U,UAAY,SAAUD,GACrC,MAA0B,SAAtBA,EAAM5N,KAAKgZ,OACNhd,EAAMooG,MAAMx2F,GAGK,SAAtBA,EAAM5N,KAAKgZ,OACNhd,EAAMqoG,MAAMz2F,GAGK,YAAtBA,EAAM5N,KAAKgZ,OACNhd,EAAMsoG,eAAe12F,QAD9B,GAOF7a,OAAOC,eAAekE,KAAM,kBAAmB,CAC7C8J,IAAK,WACH,OAAO9J,KAAK4qB,kBAEdpD,IAAK,SAAarY,GACG,kBAARA,GAAoBA,GAAO,IACpCnP,KAAK4qB,iBAAmBzb,EACxBnP,KAAK0sG,yBAA0B,EAG/B1sG,KAAK2sG,WAAWztG,OAAS,EACzBc,KAAK4sG,aAAe,EAIpB5sG,KAAKyrB,YAAY5J,YAAY,CAC3BC,OAAQ,qBACRxW,gBAAiB6D,QAOzBtT,OAAOC,eAAekE,KAAM,oBAAqB,CAC/C8J,IAAK,WACH,OAAQ9J,KAAKqtG,cAAgBrtG,KAAKstG,cAAcC,mBAElD/lF,IAAK,SAAajH,GACZvgB,KAAKqtG,eACPrtG,KAAKqtG,aAAaE,kBAAoBhtF,GAEpCvgB,KAAKstG,eACPttG,KAAKstG,aAAaC,kBAAoBhtF,MAM5C1kB,OAAOC,eAAekE,KAAM,WAAY,CACtC8J,IAAK,WACH,SAAU9J,KAAKqsG,kBAAoBrsG,KAAKysG,gBAAkBzsG,KAAKstG,cAAgBttG,KAAKstG,aAAa3iF,UAAY3qB,KAAKqtG,cAAgBrtG,KAAKqtG,aAAa1iF,aAMxJ9uB,OAAOC,eAAekE,KAAM,WAAY,CACtC8J,IAAK,WACH,IAAIyW,EAAQ,KACRP,EAAM,KACNupF,EAAQ,EACRC,EAAU,GACVvpE,EAAS,GAGb,IAAKjgC,KAAKqtG,eAAiBrtG,KAAKstG,aAC9B,OAAO7jG,EAAU,WAAWoiB,kBAI9B,IAAK7rB,KAAKqtG,aACR,OAAOrtG,KAAKstG,aAAaxtF,SAE3B,IAAK9f,KAAKstG,aACR,OAAOttG,KAAKqtG,aAAavtF,SAI3B,GAAI9f,KAAKysG,eACP,OAAOzsG,KAAKqtG,aAAavtF,SAI3B,GAA0C,IAAtC9f,KAAKqtG,aAAavtF,SAAS5gB,QAAsD,IAAtCc,KAAKstG,aAAaxtF,SAAS5gB,OACxE,OAAOuK,EAAU,WAAWoiB,kBAK9B,IAAI2hF,EAAgBxtG,KAAKqtG,aAAavtF,SAClC2tF,EAAgBztG,KAAKstG,aAAaxtF,SAClCnL,EAAQ64F,EAActuG,OAG1B,MAAOyV,IACL60F,EAAQlhG,KAAK,CAAEsD,KAAM4hG,EAAcjtF,MAAM5L,GAAQvL,KAAM,UACvDogG,EAAQlhG,KAAK,CAAEsD,KAAM4hG,EAAcxtF,IAAIrL,GAAQvL,KAAM,QAEvDuL,EAAQ84F,EAAcvuG,OACtB,MAAOyV,IACL60F,EAAQlhG,KAAK,CAAEsD,KAAM6hG,EAAcltF,MAAM5L,GAAQvL,KAAM,UACvDogG,EAAQlhG,KAAK,CAAEsD,KAAM6hG,EAAcztF,IAAIrL,GAAQvL,KAAM,QASvD,IANAogG,EAAQvsG,MAAK,SAAU6E,EAAGC,GACxB,OAAOD,EAAE8J,KAAO7J,EAAE6J,QAKf+I,EAAQ,EAAGA,EAAQ60F,EAAQtqG,OAAQyV,IACV,UAAxB60F,EAAQ70F,GAAOvL,MACjBmgG,IAIc,IAAVA,IACFhpF,EAAQipF,EAAQ70F,GAAO/I,OAEQ,QAAxB49F,EAAQ70F,GAAOvL,OACxBmgG,IAIc,IAAVA,IACFvpF,EAAMwpF,EAAQ70F,GAAO/I,OAKX,OAAV2U,GAA0B,OAARP,IACpBigB,EAAO33B,KAAK,CAACiY,EAAOP,IACpBO,EAAQ,KACRP,EAAM,MAIV,OAAOvW,EAAU,WAAWsiB,iBAAiBkU,MA6ZnD,OArlBA57B,EAAU8nG,EAAqBniF,GAsM/BjnB,EAAaopG,EAAqB,CAAC,CACjCxpG,IAAK,QACL5G,MAAO,SAAe2a,GACpB,IAAIkL,EAAUlL,EAAM5N,KAAK8Y,QAGzBA,EAAQ9Y,KAAO,IAAImZ,WAAWL,EAAQ9Y,KAAM4N,EAAM5N,KAAKoZ,WAAYxL,EAAM5N,KAAKqZ,YAE9EP,EAAQ6d,YAAc,IAAIxd,WAAWL,EAAQ6d,YAAY32B,KAAM8Y,EAAQ6d,YAAYvd,WAAYN,EAAQ6d,YAAYtd,aAEnH,EAAI4G,EAA8B,YAAY/oB,KAAMA,KAAK0L,aAAckW,GAGvE5hB,KAAKosG,gBAAgB9jG,KAAKsZ,KAa3B,CACDjf,IAAK,QACL5G,MAAO,SAAe2a,GAEiB,WAAjC1W,KAAK0L,aAAa8L,WAOtBxX,KAAK0tG,0BANH1tG,KAAKosG,gBAAgBltG,OAAS,IAkBjC,CACDyD,IAAK,2BACL5G,MAAO,WACL,IAAI4pB,EAAS3lB,KAETo2C,EAAQ,CAAC,QAAS,SAEtBA,EAAMrrC,SAAQ,SAAU3B,GAGtB,GAAKuc,EAAOvc,EAAO,YAKfuc,EAAOvc,EAAO,WAAlB,CAIA,IAAIue,EAAS,KAIb,GAAIhC,EAAOja,aAAatC,EAAO,WAC7Bue,EAAShC,EAAOja,aAAatC,EAAO,WAWpCue,EAAOgD,UAAW,MACb,CACL,IAAIgjF,EAAgBvkG,EAAO,SACvB6gC,EAAW7gC,EAAO,gBAAkBuc,EAAOgoF,GAAiB,IAEhEhmF,EAASgkF,EAAwBhmF,EAAOja,aAAakiG,mBAAoB3jE,GAEzEtkB,EAAOja,aAAatC,EAAO,WAAaue,EAG1ChC,EAAOvc,EAAO,WAAaue,EAG3B,CAAC,SAAU,cAAe,aAAa5c,SAAQ,SAAU2L,GACvDiR,EAAOyc,iBAAiB1tB,GAAO,WAE7B,GAAa,UAATtN,IAAoBuc,EAAO8mF,eAA/B,CAIc,cAAV/1F,IACFiP,EAAOvc,EAAO,WAAWuhB,UAAW,GAGtC,IAAIkjF,EAAgBz3D,EAAMuE,OAAM,SAAUtC,GAGxC,QAAU,UAANA,IAAiB1yB,EAAO8mF,kBAIxBrjG,IAASivC,IAAK1yB,EAAO0yB,EAAI,aAAc1yB,EAAO0yB,EAAI,WAAW1tB,aAMnE,OAAIkjF,EACKloF,EAAOxf,QAAQuQ,QADxB,eAiBP,CACD/T,IAAK,eACL5G,MAAO,SAAsB6lB,GAI3B,GAFA5hB,KAAKqsG,iBAAkB,EAEnBrsG,KAAKstG,cAAgBttG,KAAKstG,aAAaxtF,SAAS5gB,OAAQ,CAC1D,IAAIuuG,EAAgBztG,KAAKstG,aAAaxtF,SAEtC9f,KAAKyrB,YAAY5J,YAAY,CAC3BC,OAAQ,sBACRqiF,YAAasJ,EAAcztF,IAAIytF,EAAcvuG,OAAS,KAItDc,KAAKqtG,cACPrtG,KAAKyrB,YAAY5J,YAAY,CAC3BC,OAAQ,gBACRuiF,gBAAiBwH,EAAoB7rG,KAAK2sG,WAAY3sG,KAAK0L,aAAa0f,QAASprB,KAAK4sG,gBAI1F5sG,KAAKyrB,YAAY5J,YAAY,CAC3BC,OAAQ,OAIRhZ,KAAM8Y,EAAQ+F,OAIdzF,WAAYN,EAAQM,WACpBC,WAAYP,EAAQO,YACnB,CAACP,EAAQ+F,SACZ3nB,KAAKyrB,YAAY5J,YAAY,CAAEC,OAAQ,YAYxC,CACDnf,IAAK,iBACL5G,MAAO,SAAwB2a,GAC7B1W,KAAK2sG,WAAaZ,EAAgB/rG,KAAK2sG,WAAYj2F,EAAM5N,KAAKk7F,QAAShkG,KAAK6sG,eAW7E,CACDlqG,IAAK,SACL5G,MAAO,SAAgBwkB,EAAOP,GAe5B,GAdIhgB,KAAKqtG,eACPrtG,KAAKqtG,aAAa1iF,UAAW,EAC7B3qB,KAAKqtG,aAAa7uE,OAAOje,EAAOP,GAChChgB,KAAK2sG,WAAaV,EAAgBjsG,KAAK2sG,WAAYpsF,EAAOP,EAAKhgB,KAAK4sG,gBAEjE5sG,KAAKysG,gBAAkBzsG,KAAKstG,eAC/BttG,KAAKstG,aAAa3iF,UAAW,EAC7B3qB,KAAKstG,aAAa9uE,OAAOje,EAAOP,KAIlC,EAAI6I,EAAsB,YAAYtI,EAAOP,EAAKhgB,KAAKgM,gBAGnDhM,KAAKmL,kBACP,IAAK,IAAIF,KAASjL,KAAKmL,mBACrB,EAAI0d,EAAsB,YAAYtI,EAAOP,EAAKhgB,KAAKmL,kBAAkBF,MAY9E,CACDtI,IAAK,0BACL5G,MAAO,WACL,IAAI+xG,EAAiB,CACnB76E,MAAO,CACLrtB,SAAU,GACVumB,MAAO,GAETgH,MAAO,CACLvtB,SAAU,GACVumB,MAAO,GAETE,SAAU,GACV1gB,SAAU,IAKZmiG,EAAiB9tG,KAAKosG,gBAAgBhgG,QAAO,SAAU2hG,EAAYnsF,GACjE,IAAIxY,EAAOwY,EAAQxY,KACfN,EAAO8Y,EAAQ9Y,KACf22B,EAAc7d,EAAQ6d,YAqB1B,OAnBAsuE,EAAW3kG,GAAMxD,SAAS0C,KAAKQ,GAC/BilG,EAAW3kG,GAAM+iB,OAASrjB,EAAKqZ,WAE/B4rF,EAAW3kG,GAAMq2B,YAAcA,EAG3B7d,EAAQyK,WACV0hF,EAAW1hF,SAAW0hF,EAAW1hF,SAAS4I,OAAOrT,EAAQyK,WAGvDzK,EAAQ6sB,OACVs/D,EAAW3kG,GAAMqlC,KAAO7sB,EAAQ6sB,MAI9B7sB,EAAQjW,WACVoiG,EAAWpiG,SAAWoiG,EAAWpiG,SAASspB,OAAOrT,EAAQjW,WAGpDoiG,IACND,GAIE9tG,KAAKqtG,cAAiBrtG,KAAKstG,eAGK,IAA/BQ,EAAe76E,MAAM9G,QACvBnsB,KAAKwsG,YAAc,MAEc,IAA/BsB,EAAe36E,MAAMhH,QACvBnsB,KAAKusG,YAAc,MAGrBvsG,KAAKguG,4BAGHF,EAAe36E,MAAMsb,MACvBzuC,KAAK0L,aAAavF,QAAQ,CAAEiD,KAAM,YAAaqlC,KAAMq/D,EAAe36E,MAAMsb,OAExEq/D,EAAe76E,MAAMwb,MACvBzuC,KAAK0L,aAAavF,QAAQ,CAAEiD,KAAM,YAAaqlC,KAAMq/D,EAAe76E,MAAMwb,OAGxEzuC,KAAK0sG,2BACF1sG,KAAKysG,gBAAkBzsG,KAAKstG,eAC/BQ,EAAe36E,MAAMvtB,SAAS2oC,QAAQu/D,EAAe36E,MAAMsM,aAC3DquE,EAAe36E,MAAMhH,OAAS2hF,EAAe36E,MAAMsM,YAAYtd,YAEjEniB,KAAK0sG,yBAA0B,GAGjC,IAAIuB,GAAmB,EAGnBjuG,KAAKqtG,cAAgBS,EAAe76E,MAAM9G,OAC5C2hF,EAAe76E,MAAMrtB,SAAS2oC,QAAQu/D,EAAe76E,MAAMwM,aAC3DquE,EAAe76E,MAAM9G,OAAS2hF,EAAe76E,MAAMwM,YAAYtd,WAC/DniB,KAAKkuG,yBAAyBJ,EAAe76E,MAAOjzB,KAAKqtG,eAEzD,EAAIrkF,EAAkBxe,kBAAkBxK,KAAM8tG,EAAezhF,SAAUyhF,EAAeniG,YAC7E3L,KAAKqtG,eAAiBrtG,KAAKysG,gBAAmBzsG,KAAKstG,eAO5DW,GAAmB,IAGhBjuG,KAAKysG,gBAAkBzsG,KAAKstG,cAC/BttG,KAAKkuG,yBAAyBJ,EAAe36E,MAAOnzB,KAAKstG,cAG3DttG,KAAKosG,gBAAgBltG,OAAS,EAE1B+uG,GACFjuG,KAAKmG,QAAQ,aAIfnG,KAAKqsG,iBAAkB,IAWxB,CACD1pG,IAAK,2BACL5G,MAAO,SAAkCgyG,EAAYI,GACnD,IAAI7nG,EAAS,EACT8nG,OAAa3xG,EAEjB,GAAIsxG,EAAW5hF,MAAO,CACpBiiF,EAAa,IAAInsF,WAAW8rF,EAAW5hF,OAGvC4hF,EAAWnoG,SAASmF,SAAQ,SAAU6W,GACpCwsF,EAAW5mF,IAAI5F,EAAStb,GACxBA,GAAUsb,EAAQO,cAGpB,IACEgsF,EAAkBxjF,UAAW,EAC7BwjF,EAAkBhR,aAAaiR,GAC/B,MAAOjpF,GACHnlB,KAAK0L,aAAa0f,SACpBprB,KAAK0L,aAAa0f,QAAQjG,MAAM,CAC9BO,MAAO,EACPtc,KAAM,oBACNhD,QAAS+e,EAAM/e,QACfioG,cAAelpF,QAaxB,CACDxiB,IAAK,QACL5G,MAAO,WACDiE,KAAKqtG,cACPrtG,KAAKqtG,aAAannF,SAEflmB,KAAKysG,gBAAkBzsG,KAAKstG,cAC/BttG,KAAKstG,aAAapnF,QAEhBlmB,KAAKyrB,aACPzrB,KAAKyrB,YAAY5J,YAAY,CAAEC,OAAQ,UAEzC9hB,KAAKosG,gBAAgBltG,OAAS,EAC9Bc,KAAKqsG,iBAAkB,MAIpBF,EAtlBiB,CAulBvB1iG,EAAU,WAAWqd,aAExBzrB,EAAQ,WAAa8wG,G,kCC1zBrB,W,kCCiBA,SAASzwG,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIyN,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnC8kG,EAAa,WACf,IAAIppF,EAAM,SAASqpF,EAAY/vF,EAAS63B,GAEtC73B,GAAU,EAAIhV,EAASka,cAAc,CACnCsgB,QAAS,MACRxlB,GAIH,IAAIgwF,EAAgBD,EAAYC,eAAiB/kG,EAAU,WAAW43B,IAAInc,IAAIspF,cAE9E,GAAIA,GAA0C,oBAAlBA,EAA8B,CACxD,IAAI/K,EAAa+K,EAAchwF,GAE3BilF,IACFjlF,EAAUilF,GAId,IAAIx+E,GAAU,EAAIzb,EAAS0b,KAAK1G,GAAS,SAAU2G,EAAO2oC,GACxD,IAAI2gD,EAAcxpF,EAAQ6oC,UAErB3oC,GAASspF,IACZxpF,EAAQypF,aAAeh+F,KAAK24B,MAC5BpkB,EAAQs6E,cAAgBt6E,EAAQypF,aAAezpF,EAAQy6E,YACvDz6E,EAAQq6E,cAAgBmP,EAAYtsF,YAAcssF,EAAYvvG,OACzD+lB,EAAQrmB,YACXqmB,EAAQrmB,UAAYyL,KAAK6F,MAAM+U,EAAQq6E,cAAgBr6E,EAAQs6E,cAAgB,EAAI,OAOnFp6E,GAAwB,cAAfA,EAAMO,OACjBT,EAAQ66E,UAAW,GAMhB36E,GAAUF,EAAQ86E,SAAmC,MAAxBjyC,EAAS6gD,YAA8C,MAAxB7gD,EAAS6gD,YAA8C,IAAxB7gD,EAAS6gD,aACvGxpF,EAAQ,IAAI5kB,MAAM,mCAAqC0kB,IAAYwpF,GAAexpF,EAAQQ,iBAG5F4wB,EAASlxB,EAAOF,MAEd2pF,EAAgB3pF,EAAQiB,MAQ5B,OANAjB,EAAQiB,MAAQ,WAEd,OADAjB,EAAQ86E,SAAU,EACX6O,EAAc5jF,MAAM/F,EAASxiB,YAEtCwiB,EAAQle,IAAMyX,EAAQzX,IACtBke,EAAQy6E,YAAchvF,KAAK24B,MACpBpkB,GAGT,OAAOC,GAGT7pB,EAAQ,WAAaizG,EACrBlzG,EAAOC,QAAUA,EAAQ,Y,kCCvCzBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEnB,SAASS,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,IAAI4qG,EAAa,WACf,IAAIC,EAAS,CAAC,CAAC,GAAI,GAAI,GAAI,GAAI,IAAK,CAAC,GAAI,GAAI,GAAI,GAAI,KACjDC,EAAWD,EAAO,GAClBE,EAAWF,EAAO,GAClBG,EAAOF,EAAS,GAChBG,EAAUF,EAAS,GACnBxsG,OAAI/F,EACJiyC,OAAIjyC,EACJ0yG,OAAO1yG,EACPwe,EAAI,GACJm0F,EAAK,GACLC,OAAK5yG,EACL6yG,OAAK7yG,EACL8yG,OAAK9yG,EACL8e,OAAI9e,EACJ+yG,OAAO/yG,EACPgzG,OAAOhzG,EAGX,IAAK+F,EAAI,EAAGA,EAAI,IAAKA,IACnB4sG,GAAIn0F,EAAEzY,GAAKA,GAAK,EAAe,KAAVA,GAAK,IAAYA,GAAKA,EAG7C,IAAKksC,EAAIygE,EAAO,GAAIF,EAAKvgE,GAAIA,GAAK2gE,GAAM,EAAGF,EAAOC,EAAGD,IAAS,EAY5D,IAVA5zF,EAAI4zF,EAAOA,GAAQ,EAAIA,GAAQ,EAAIA,GAAQ,EAAIA,GAAQ,EACvD5zF,EAAIA,GAAK,EAAQ,IAAJA,EAAU,GACvB0zF,EAAKvgE,GAAKnzB,EACV2zF,EAAQ3zF,GAAKmzB,EAGb6gE,EAAKt0F,EAAEq0F,EAAKr0F,EAAEo0F,EAAKp0F,EAAEyzB,KACrB+gE,EAAY,SAALF,EAAsB,MAALD,EAAoB,IAALD,EAAiB,SAAJ3gE,EACpD8gE,EAAc,IAAPv0F,EAAEM,GAAiB,SAAJA,EAEjB/Y,EAAI,EAAGA,EAAI,EAAGA,IACjBusG,EAASvsG,GAAGksC,GAAK8gE,EAAOA,GAAQ,GAAKA,IAAS,EAC9CR,EAASxsG,GAAG+Y,GAAKk0F,EAAOA,GAAQ,GAAKA,IAAS,EAKlD,IAAKjtG,EAAI,EAAGA,EAAI,EAAGA,IACjBusG,EAASvsG,GAAKusG,EAASvsG,GAAGxF,MAAM,GAChCgyG,EAASxsG,GAAKwsG,EAASxsG,GAAGxF,MAAM,GAElC,OAAO8xG,GAELY,EAAY,KAUZC,EAAM,WACR,SAASA,EAAIhtG,GACXoB,EAAgB/D,KAAM2vG,GAgBjBD,IACHA,EAAYb,KAGd7uG,KAAK4vG,QAAU,CAAC,CAACF,EAAU,GAAG,GAAG1yG,QAAS0yG,EAAU,GAAG,GAAG1yG,QAAS0yG,EAAU,GAAG,GAAG1yG,QAAS0yG,EAAU,GAAG,GAAG1yG,QAAS0yG,EAAU,GAAG,GAAG1yG,SAAU,CAAC0yG,EAAU,GAAG,GAAG1yG,QAAS0yG,EAAU,GAAG,GAAG1yG,QAAS0yG,EAAU,GAAG,GAAG1yG,QAAS0yG,EAAU,GAAG,GAAG1yG,QAAS0yG,EAAU,GAAG,GAAG1yG,UACpQ,IAAIwF,OAAI/F,EACJ2xB,OAAI3xB,EACJozG,OAAMpzG,EACNqzG,OAASrzG,EACTszG,OAAStzG,EACTwyG,EAAOjvG,KAAK4vG,QAAQ,GAAG,GACvBZ,EAAWhvG,KAAK4vG,QAAQ,GACxBI,EAASrtG,EAAIzD,OACb+wG,EAAO,EAEX,GAAe,IAAXD,GAA2B,IAAXA,GAA2B,IAAXA,EAClC,MAAM,IAAIzvG,MAAM,wBAQlB,IALAuvG,EAASntG,EAAI3F,MAAM,GACnB+yG,EAAS,GACT/vG,KAAKsF,KAAO,CAACwqG,EAAQC,GAGhBvtG,EAAIwtG,EAAQxtG,EAAI,EAAIwtG,EAAS,GAAIxtG,IACpCqtG,EAAMC,EAAOttG,EAAI,IAGbA,EAAIwtG,IAAW,GAAgB,IAAXA,GAAgBxtG,EAAIwtG,IAAW,KACrDH,EAAMZ,EAAKY,IAAQ,KAAO,GAAKZ,EAAKY,GAAO,GAAK,MAAQ,GAAKZ,EAAKY,GAAO,EAAI,MAAQ,EAAIZ,EAAW,IAANY,GAG1FrtG,EAAIwtG,IAAW,IACjBH,EAAMA,GAAO,EAAIA,IAAQ,GAAKI,GAAQ,GACtCA,EAAOA,GAAQ,EAAkB,KAAbA,GAAQ,KAIhCH,EAAOttG,GAAKstG,EAAOttG,EAAIwtG,GAAUH,EAInC,IAAKzhF,EAAI,EAAG5rB,EAAG4rB,IAAK5rB,IAClBqtG,EAAMC,EAAW,EAAJ1hF,EAAQ5rB,EAAIA,EAAI,GAE3ButG,EAAO3hF,GADL5rB,GAAK,GAAK4rB,EAAI,EACJyhF,EAEAb,EAAS,GAAGC,EAAKY,IAAQ,KAAOb,EAAS,GAAGC,EAAKY,GAAO,GAAK,MAAQb,EAAS,GAAGC,EAAKY,GAAO,EAAI,MAAQb,EAAS,GAAGC,EAAW,IAANY,IA+D5I,OA5CA9sG,EAAa4sG,EAAK,CAAC,CACjBhtG,IAAK,UACL5G,MAAO,SAAiBm0G,EAAYC,EAAYC,EAAYC,EAAYC,EAAKhqG,GAC3E,IAAI3D,EAAM3C,KAAKsF,KAAK,GAEhBxD,EAAIouG,EAAavtG,EAAI,GACrBZ,EAAIsuG,EAAa1tG,EAAI,GACrBqY,EAAIo1F,EAAaztG,EAAI,GACrBsY,EAAIk1F,EAAaxtG,EAAI,GACrB4tG,OAAK9zG,EACL41F,OAAK51F,EACL+zG,OAAK/zG,EAGLg0G,EAAe9tG,EAAIzD,OAAS,EAAI,EAChCsD,OAAI/F,EACJi0G,EAAS,EACT9V,EAAQ56F,KAAK4vG,QAAQ,GAGrBe,EAAS/V,EAAM,GACfgW,EAAShW,EAAM,GACfiW,EAASjW,EAAM,GACfkW,EAASlW,EAAM,GACfqU,EAAOrU,EAAM,GAGjB,IAAKp4F,EAAI,EAAGA,EAAIiuG,EAAcjuG,IAC5B+tG,EAAKI,EAAO7uG,IAAM,IAAM8uG,EAAO7uG,GAAK,GAAK,KAAO8uG,EAAO71F,GAAK,EAAI,KAAO81F,EAAW,IAAJ71F,GAAWtY,EAAI+tG,GAC7Fre,EAAKse,EAAO5uG,IAAM,IAAM6uG,EAAO51F,GAAK,GAAK,KAAO61F,EAAO51F,GAAK,EAAI,KAAO61F,EAAW,IAAJhvG,GAAWa,EAAI+tG,EAAS,GACtGF,EAAKG,EAAO31F,IAAM,IAAM41F,EAAO31F,GAAK,GAAK,KAAO41F,EAAO/uG,GAAK,EAAI,KAAOgvG,EAAW,IAAJ/uG,GAAWY,EAAI+tG,EAAS,GACtGz1F,EAAI01F,EAAO11F,IAAM,IAAM21F,EAAO9uG,GAAK,GAAK,KAAO+uG,EAAO9uG,GAAK,EAAI,KAAO+uG,EAAW,IAAJ91F,GAAWrY,EAAI+tG,EAAS,GACrGA,GAAU,EACV5uG,EAAIyuG,EAAGxuG,EAAIswF,EAAGr3E,EAAIw1F,EAIpB,IAAKhuG,EAAI,EAAGA,EAAI,EAAGA,IACjB8tG,GAAK,GAAK9tG,GAAK8D,GAAU2oG,EAAKntG,IAAM,KAAO,GAAKmtG,EAAKltG,GAAK,GAAK,MAAQ,GAAKktG,EAAKj0F,GAAK,EAAI,MAAQ,EAAIi0F,EAAS,IAAJh0F,GAAWtY,EAAI+tG,KAC1HH,EAAKzuG,EAAEA,EAAIC,EAAEA,EAAIiZ,EAAEA,EAAIC,EAAEA,EAAIs1F,MAK5BZ,EAhIC,GAmIVt0G,EAAQ,WAAas0G,EACrBv0G,EAAOC,QAAUA,EAAQ,Y,kCC/OzBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAaC,EAAIC,EAAKC,GAAO,IAAIC,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASoH,EAAIlmB,EAAWmmB,EAAKG,EAAWF,EAAKC,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA4O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAA/V,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BR,EAAKQ,EAAQP,EAAMnmB,EAAUomB,EAAME,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE5c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAI+E,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCi0B,EAAkB,EAAQ,QAE1BC,EAAmB9hC,EAAuB6hC,GAE1C/zB,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCunG,EAAuB,EAAQ,QAE/BC,EAAwBt1G,EAAuBq1G,GAE/C/nF,EAAoB,EAAQ,QAE5B2U,EAAc,EAAQ,QAWtBszE,EAAkB,SAAWjnF,GAG/B,SAASinF,IACP,IAAInsG,EAAQ9E,KAEZ+D,EAAgB/D,KAAMixG,GAEtBzuF,EAAK3mB,OAAOkJ,eAAeksG,EAAgBruG,WAAY,cAAe5C,MAAM8C,KAAK9C,MACjF,IAAIzD,OAAWE,EAIf,IAAKF,KAFLyD,KAAK4tG,mBAAqB,IAAIrkG,EAAe,WAAW46B,YAEvCnkC,KAAK4tG,mBACdrxG,KAAY00G,EAAgBruG,WAA2D,oBAAtC5C,KAAK4tG,mBAAmBrxG,KAC7EyD,KAAKzD,GAAYyD,KAAK4tG,mBAAmBrxG,GAAU6E,KAAKpB,KAAK4tG,qBAOjE5tG,KAAK6xD,UAAYrnC,IACjB3uB,OAAOC,eAAekE,KAAM,WAAY,CACtC8J,IAAK,WACH,OAAI9J,KAAK6xD,YAActnD,IACdvK,KAAK6xD,UAEP7xD,KAAK4tG,mBAAmBjtG,UAEjC6mB,IAAK,SAAa7mB,GAChBX,KAAK6xD,UAAYlxD,EACbA,IAAa4J,MACfvK,KAAK4tG,mBAAmBjtG,SAAWA,MAKzC9E,OAAOC,eAAekE,KAAM,WAAY,CACtC8J,IAAK,WACH,OAAI9J,KAAK6xD,YAActnD,IACdd,EAAU,WAAWsiB,iBAAiB,CAAC,CAAC,EAAG/rB,KAAK4tG,mBAAmBjtG,YAErEX,KAAK4tG,mBAAmBlvF,YAInC7iB,OAAOC,eAAekE,KAAM,aAAc,CACxC8J,IAAK,WACH,OAAO9J,KAAK4tG,mBAAmBp2F,cAInC3b,OAAOC,eAAekE,KAAM,sBAAuB,CACjD8J,IAAK,WACH,OAAO9J,KAAKkxG,wBAMhBlxG,KAAK69B,cAAgB,GAErB79B,KAAKkxG,qBAAuB,GAQ5BlxG,KAAKmxG,2BAA6B,WAMhC,GAJArsG,EAAMosG,qBAAqBhyG,OAAS,EAID,IAA/B4F,EAAM+4B,cAAc3+B,OAAc,CACpC,IAAIk/B,EAAet5B,EAAM+4B,cAAc,GAKvC,OAHAO,EAAasuE,yBAA0B,EACvCtuE,EAAaquE,gBAAkBruE,EAAamuE,iBAC5CznG,EAAMosG,qBAAqB5oG,KAAK81B,GAalC,IALA,IAAIgzE,GAAkB,EAClBC,GAAmB,EAId7uG,EAAI,EAAGA,EAAIsC,EAAMsmB,QAAQ4+C,cAAc9qE,OAAQsD,IAAK,CAC3D,IAAIyI,EAAQnG,EAAMsmB,QAAQ4+C,cAAcxnE,GAExC,GAAIyI,EAAMs+C,SAA0B,SAAft+C,EAAM05B,KAAiB,CAG1CysE,GAAkB,EAClBC,GAAmB,EACnB,OAIJvsG,EAAM+4B,cAAc9yB,SAAQ,SAAUqzB,GAQpC,GAFAA,EAAasuE,yBAA0B,EAEnCtuE,EAAaouE,aAAepuE,EAAamuE,YAE3CnuE,EAAaquE,eAAiB2E,OACzB,GAAIhzE,EAAaouE,cAAgBpuE,EAAamuE,YAInDnuE,EAAaquE,gBAAiB,EAC9B4E,GAAmB,OACd,IAAKjzE,EAAaouE,aAAepuE,EAAamuE,cAEnDnuE,EAAaquE,eAAiB4E,EAC1BA,GACF,OAIJvsG,EAAMosG,qBAAqB5oG,KAAK81B,OAIpCp+B,KAAKsxG,qBAAuB,WAC1BxsG,EAAM+4B,cAAc9yB,SAAQ,SAAUqzB,GACpCA,EAAasuE,yBAA0B,MAI3C1sG,KAAKisB,YAAc,WACjBnnB,EAAM+4B,cAAc9yB,SAAQ,SAAUqzB,GAChCA,EAAa3S,aACf2S,EAAa3S,YAAY5J,YAAY,CAAEC,OAAQ,sBAKrD9hB,KAAKuxG,yBAA2B,SAAU76F,GACxC5R,EAAM+4B,cAAc9yB,SAAQ,SAAU4c,GACpC,OAAOA,EAAOilF,aAAel2F,EAAM4c,YAKvC,CAAC,aAAc,cAAe,eAAevoB,SAAQ,SAAUinE,GAC7DhyE,KAAK4tG,mBAAmBxpE,iBAAiB4tC,EAAWhyE,KAAKmG,QAAQ/E,KAAKpB,SACrEA,MAIHA,KAAK6F,GAAG,cAAc,SAAU6Q,GAE9B,IAAIuc,EAAQuK,EAAiB,WAAW8S,cAAc,SAAWxrC,EAAM0sG,KAAO,MAEzEv+E,IAILnuB,EAAMsmB,SAAU,EAAI3hB,EAAU,YAAYwpB,EAAM+K,YAIhDl5B,EAAMsmB,QAAQjrB,MAAM0F,GAAG,YAAaf,EAAMmnB,aAI1CnnB,EAAMsmB,QAAQjrB,MAAM0F,GAAG,2BAA4Bf,EAAMysG,0BAErDzsG,EAAMsmB,QAAQ4+C,aAAellE,EAAMsmB,QAAQ4+C,gBAC7CllE,EAAMsmB,QAAQ4+C,cAAcnkE,GAAG,SAAUf,EAAMqsG,4BAC/CrsG,EAAMsmB,QAAQ4+C,cAAcnkE,GAAG,WAAYf,EAAMqsG,4BACjDrsG,EAAMsmB,QAAQ4+C,cAAcnkE,GAAG,cAAef,EAAMqsG,6BAGtDrsG,EAAMsmB,QAAQvlB,GAAG,cAAef,EAAMwsG,0BAGxCtxG,KAAK6F,GAAG,eAAe,SAAU6Q,GAG/B,IAFA,IAAI/V,GAAW,EAAIqoB,EAAkB9e,iBAAiBpF,EAAMnE,UAEnD6B,EAAI,EAAGA,EAAIsC,EAAM+4B,cAAc3+B,OAAQsD,IAAK,CACnD,IAAIivG,EAAe3sG,EAAM+4B,cAAcr7B,GACnCyJ,EAAOwlG,EAAazlG,gBAAkBylG,EAAazlG,eAAeC,KAElEA,GAAQA,EAAK/M,SACf+M,EAAKA,EAAK/M,OAAS,GAAGqM,QAAU5K,OAOtCX,KAAK6F,GAAG,eAAe,SAAU6Q,GAC/B1W,KAAK69B,cAAc9yB,SAAQ,SAAUqzB,GAC/BA,EAAa3S,aACf2S,EAAa3S,YAAYS,eAI7BlsB,KAAK69B,cAAc3+B,OAAS,EACvBc,KAAKorB,UAINprB,KAAKorB,QAAQ4+C,aAAehqE,KAAKorB,QAAQ4+C,gBAC3ChqE,KAAKorB,QAAQ4+C,cAAcvqD,IAAI,SAAUzf,KAAKmxG,4BAC9CnxG,KAAKorB,QAAQ4+C,cAAcvqD,IAAI,WAAYzf,KAAKmxG,4BAChDnxG,KAAKorB,QAAQ4+C,cAAcvqD,IAAI,cAAezf,KAAKmxG,6BAOjDnxG,KAAKorB,QAAQ6xB,MACfj9C,KAAKorB,QAAQ3L,IAAI,cAAezf,KAAKsxG,sBACrCtxG,KAAKorB,QAAQjrB,MAAMsf,IAAI,YAAazf,KAAKisB,aACzCjsB,KAAKorB,QAAQjrB,MAAMsf,IAAI,2BAA4Bzf,KAAKuxG,+BAqF9D,OA1TAltG,EAAU4sG,EAAiBjnF,GAkP3BjnB,EAAakuG,EAAiB,CAAC,CAC7BtuG,IAAK,oBACL5G,MAAO,SAA2BwkB,EAAOP,GACvC,IAAImF,OAAQ1oB,EAEZ,GAAIuD,KAAKW,WAAa4J,IAIpB,MAHA4a,EAAQ,IAAI5kB,MAAM,oFAClB4kB,EAAMrX,KAAO,oBACbqX,EAAMO,KAAO,GACPP,GAGJnF,EAAMhgB,KAAK4tG,mBAAmBjtG,UAAYyJ,MAAMpK,KAAK4tG,mBAAmBjtG,aAC1EX,KAAK4tG,mBAAmBjtG,SAAWqf,KAWtC,CACDrd,IAAK,kBACL5G,MAAO,SAAyBqN,GAC9B,IAAIue,OAASlrB,EACTyhC,GAAa,EAAIP,EAAYQ,kBAAkB/0B,GAInD,GAAI,yBAAyBhC,KAAK82B,EAAW90B,MAAO,CAClD,IAAIi5B,EAAS,GAETnE,EAAWwzE,YAAcxzE,EAAWwzE,WAAWrvE,SACjDA,EAASnE,EAAWwzE,WAAWrvE,OAAOlS,MAAM,KAC5CkS,GAAS,EAAI1E,EAAYuE,uBAAuBG,GAChDA,EAASA,EAAOxjC,QAAO,SAAU24F,GAC/B,OAAO,EAAI75D,EAAYqvE,cAAcxV,KAAU,EAAI75D,EAAYsvE,cAAczV,OAI3D,IAAlBn1D,EAAOnjC,SACTmjC,EAAS,CAAC,cAAe,cAG3B1a,EAAS,IAAIqpF,EAAsB,WAAWhxG,KAAMqiC,GAElB,IAA9BriC,KAAK69B,cAAc3+B,SAMrBc,KAAK69B,cAAc,GAAGmwE,2BACtBrmF,EAAOqmF,2BAIPhuG,KAAK69B,cAAc,GAAG4uE,gBAAiB,QAIzC9kF,EAAS3nB,KAAK4tG,mBAAmBjR,gBAAgBvzF,GAInD,OADApJ,KAAK69B,cAAcv1B,KAAKqf,GACjBA,MAIJspF,EA3Ta,CA4TnBxnG,EAAU,WAAWqd,aAExBzrB,EAAQ,WAAa41G,EACrB71G,EAAOC,QAAUA,EAAQ,Y,mBC/WzBD,EAAOC,QAAU,k2I,kCCcjBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAET,IAAI41G,EAAsB,SAA6BpxF,EAAOP,EAAK/U,GACjE,IAAIzI,OAAI/F,EACJkN,OAAMlN,EAEV,GAAKwO,GAIAA,EAAMgB,KAAX,CAIAzJ,EAAIyI,EAAMgB,KAAK/M,OAEf,MAAOsD,IACLmH,EAAMsB,EAAMgB,KAAKzJ,GAGbmH,EAAI0B,WAAa2U,GAAOrW,EAAI4B,SAAWgV,GACzCtV,EAAM+jD,UAAUrlD,KAKtBtO,EAAQ,WAAas2G,EACrBv2G,EAAOC,QAAUA,EAAQ,Y,kCCpCzB,SAASK,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIyN,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnC62B,EAAkB,EAAQ,QAE1BC,EAAmB5kC,EAAuB2kC,GAE1C96B,EAAO,aAOPqsG,EAAkB,SAAyBrqE,GAC7C,IAAI5C,EAAO4C,EAAW,WAAa,OAAS,cAM5C,OAJIA,EAAWr/B,iBAAmBq/B,EAAWr/B,gBAAgB7K,QAAQ,yCAA2C,IAC9GsnC,EAAO,aAGFA,GAYLktE,EAAc,SAAqBC,EAAe5tF,GACpD4tF,EAAc5rF,QACd4rF,EAAc7qE,QAEV/iB,GAAaA,EAAUikB,uBACzBjkB,EAAUikB,qBAAqBlB,QAC/B/iB,EAAUikB,qBAAuB,OAIrC9sC,EAAQw2G,YAAcA,EAUtB,IAAIE,EAAe,SAAsBhoE,EAAgB7lB,GAGvDA,EAAUikB,qBAAuB4B,EACjCA,EAAerjB,QAGjBrrB,EAAQ02G,aAAeA,EAgBvB,IAAIC,EAAiB,SAAwB5oG,EAAM3I,GACjD,OAAO,WACL,IAAIwxG,EAA2BxxG,EAASmlC,eACpCksE,EAAgBG,EAAyB7oG,GACzC8oG,EAAoBD,EAAyBnsE,KAC7C5hB,EAAYzjB,EAASwlC,WAAW78B,GAEhC+oG,EAAcjuF,EAAUiuF,cACxBC,EAAcluF,EAAUkuF,YAAYD,GACpCE,EAAuBnuF,EAAUikB,qBAErC0pE,EAAYC,EAAe5tF,GAEtBkuF,IAKAA,EAAYroE,gBAYjB+nE,EAAcQ,eAEdP,EAAaK,EAAYroE,eAAgB7lB,IAbnCmuF,GAKFH,EAAkB5oE,qBAY1BjuC,EAAQ22G,eAAiBA,EAezB,IAAIO,EAAiB,SAAwBnpG,EAAM3I,GACjD,OAAO,WACL,IAAI+xG,EAA4B/xG,EAASmlC,eACrCksE,EAAgBU,EAA0BppG,GAC1C8oG,EAAoBM,EAA0B1sE,KAC9C5hB,EAAYzjB,EAASwlC,WAAW78B,GAEhC+oG,EAAcjuF,EAAUiuF,cACxBC,EAAcluF,EAAUkuF,YAAYD,GACpCE,EAAuBnuF,EAAUikB,qBAErC0pE,EAAYC,EAAe5tF,GAEtBkuF,IAKAA,EAAYroE,eAQbsoE,IAAyBD,EAAYroE,gBAQrC+nE,EAAc7mG,OAEhB6mG,EAAc7mG,MAAMknG,GAItBL,EAAcxoE,kBAEdyoE,EAAaK,EAAYroE,eAAgB7lB,IAZvC6tF,EAAaK,EAAYroE,eAAgB7lB,GARzCguF,EAAkB5oE,qBAwBxBjuC,EAAQk3G,eAAiBA,EACzB,IAAIE,EAAU,CAcZ3vE,MAAO,SAAe15B,EAAM3I,GAC1B,OAAO,WACL,IAAIqxG,EAAgBrxG,EAASmlC,eAAex8B,GACxC8a,EAAYzjB,EAASwlC,WAAW78B,GAChC88B,EAA2BzlC,EAASylC,yBAExC2rE,EAAYC,EAAe5tF,GAG3B,IAAIiuF,EAAcjuF,EAAUiuF,cACxBC,EAAcluF,EAAUkuF,cACxBvoG,GAAMuoG,EAAYvzG,QAAO,SAAUirC,GACrC,OAAOA,EAAM,cACZ,IAAMsoE,EAAY,IAAIvoG,GACrB6oG,EAAexuF,EAAU4gC,OAAOj7C,GAEpC,GAAIsoG,IAAgBO,EAApB,CAWA,IAAK,IAAIpb,KAFT7tF,EAAU,WAAWM,IAAIC,KAAK,oFAEVka,EAAU4gC,OAC5B5gC,EAAU4gC,OAAOwyC,GAAS/tC,QAAUrlC,EAAU4gC,OAAOwyC,KAAaob,EAGpExuF,EAAUquF,sBAZRrsE,EAAyB,CACvB9/B,QAAS,2DA0BjBy/B,UAAW,SAAmBz8B,EAAM3I,GAClC,OAAO,WACL,IAAIqxG,EAAgBrxG,EAASmlC,eAAex8B,GACxC8a,EAAYzjB,EAASwlC,WAAW78B,GAEpCK,EAAU,WAAWM,IAAIC,KAAK,4EAE9B6nG,EAAYC,EAAe5tF,GAE3B,IAAIjZ,EAAQiZ,EAAUiuF,cAElBlnG,IACFA,EAAMq4B,KAAO,YAGfpf,EAAUquF,oBAKhBl3G,EAAQo3G,QAAUA,EAClB,IAAIE,EAAiB,CAYnB7vE,MAAO,SAAe15B,EAAM2gC,EAAgBtpC,GAC1C,GAAKspC,EAAL,CAKA,IAAItrB,EAAOhe,EAASge,KAChBsnB,EAAiBtlC,EAASslC,eAC1B+rE,EAAgBrxG,EAASmlC,eAAex8B,GAE5C2gC,EAAelkC,GAAG,kBAAkB,WAClC,IAAI0B,EAAQwiC,EAAexiC,QAE3BuqG,EAAcpzG,SAAS6I,EAAOw+B,KAIzBtnB,EAAKoB,UAAYtY,EAAMf,SAA8B,SAAnBiY,EAAKinB,YAC1CosE,EAAcprF,UAIlBqjB,EAAelkC,GAAG,kBAAkB,WAClCisG,EAAcpzG,SAASqrC,EAAexiC,QAASw+B,GAG1CtnB,EAAKoB,UACRiyF,EAAcprF,UAIlBqjB,EAAelkC,GAAG,QAAS4sG,EAAQrpG,GAAMA,EAAM3I,MAajDolC,UAAW,SAAmBz8B,EAAM2gC,EAAgBtpC,GAClD,IAAIge,EAAOhe,EAASge,KAChBsnB,EAAiBtlC,EAASslC,eAC1B+rE,EAAgBrxG,EAASmlC,eAAex8B,GACxC8a,EAAYzjB,EAASwlC,WAAW78B,GAEpC2gC,EAAelkC,GAAG,kBAAkB,WAClC,IAAI0B,EAAQwiC,EAAexiC,QAE3BuqG,EAAcpzG,SAAS6I,EAAOw+B,GAC9B+rE,EAAc7mG,MAAMiZ,EAAUiuF,iBAIzB1zF,EAAKoB,UAAYtY,EAAMf,SAA8B,SAAnBiY,EAAKinB,YAC1CosE,EAAcprF,UAIlBqjB,EAAelkC,GAAG,kBAAkB,WAClCisG,EAAcpzG,SAASqrC,EAAexiC,QAASw+B,GAG1CtnB,EAAKoB,UACRiyF,EAAcprF,UAIlBqjB,EAAelkC,GAAG,QAAS4sG,EAAQrpG,GAAMA,EAAM3I,MAInDpF,EAAQs3G,eAAiBA,EACzB,IAAIC,EAAa,CAUf,MAAS,SAAexpG,EAAM3I,GAC5B,IAAI6iC,EAAO7iC,EAAS6iC,KAChB1e,EAAMnkB,EAASmkB,IACfktF,EAAgBrxG,EAASmlC,eAAex8B,GACxC28B,EAAiBtlC,EAASslC,eAC1Bz+B,EAAc7G,EAAStC,OAAOmJ,YAC9BurG,EAA4BpyG,EAASwlC,WAAW78B,GAChDygC,EAASgpE,EAA0BhpE,OACnCib,EAAS+tD,EAA0B/tD,OASvC,IAAK,IAAI9hB,KAJJ17B,EAAY8B,IAAmD,IAA1CvN,OAAO0Q,KAAKjF,EAAY8B,IAAOlK,QAAyB,UAATokC,IACvEh8B,EAAY8B,GAAQ,CAAE08B,KAAM,CAAE,QAAW,CAAE,SAAW,MAGpCx+B,EAAY8B,GAK9B,IAAK,IAAI0pG,KAJJjpE,EAAO7G,KACV6G,EAAO7G,GAAW,IAGK17B,EAAY8B,GAAM45B,GAAU,CACnD,IAAIuE,EAAajgC,EAAY8B,GAAM45B,GAAS8vE,GACxC/oE,OAAiBttC,EAgBrB,GAbEstC,EADExC,EAAW1jB,YACI,IAAIyc,EAAiB,WAAWiH,EAAW1jB,YAAae,EAAKmhB,GAI7D,KAGnBwB,EAAa99B,EAAU,WAAWia,aAAa,CAAE7Z,GAAIipG,EAAc/oE,eAAgBA,GAAkBxC,GAErGorE,EAAevpG,GAAMA,EAAMm+B,EAAWwC,eAAgBtpC,GAEtDopC,EAAO7G,GAAS16B,KAAKi/B,GAEe,qBAAzBud,EAAOguD,GAA+B,CAC/C,IAAI7nG,EAAQ,IAAIxB,EAAU,WAAW0lD,WAAW,CAC9CtlD,GAAIipG,EACJnuE,KAAMitE,EAAgBrqE,GACtBgiB,SAAS,EACTxhD,SAAUw/B,EAAWx/B,SACrB,QAAWw/B,EAAW,WACtB3C,MAAOkuE,IAGThuD,EAAOguD,GAAgB7nG,GAM7B6mG,EAAcjsG,GAAG,QAAS4sG,EAAQrpG,GAAMA,EAAM3I,KAWhD,UAAa,SAAmB2I,EAAM3I,GACpC,IAAIge,EAAOhe,EAASge,KAChBmG,EAAMnkB,EAASmkB,IACfktF,EAAgBrxG,EAASmlC,eAAex8B,GACxC28B,EAAiBtlC,EAASslC,eAC1Bz+B,EAAc7G,EAAStC,OAAOmJ,YAC9ByrG,EAA6BtyG,EAASwlC,WAAW78B,GACjDygC,EAASkpE,EAA2BlpE,OACpCib,EAASiuD,EAA2BjuD,OAExC,IAAK,IAAI9hB,KAAW17B,EAAY8B,GAK9B,IAAK,IAAI0pG,KAJJjpE,EAAO7G,KACV6G,EAAO7G,GAAW,IAGK17B,EAAY8B,GAAM45B,GACzC,IAAI17B,EAAY8B,GAAM45B,GAAS8vE,GAAc1qG,OAA7C,CAYA,IAAIm/B,EAAajgC,EAAY8B,GAAM45B,GAAS8vE,GAW5C,GATAvrE,EAAa99B,EAAU,WAAWia,aAAa,CAC7C7Z,GAAIipG,EACJ/oE,eAAgB,IAAIzJ,EAAiB,WAAWiH,EAAW1jB,YAAae,EAAKmhB,IAC5EwB,GAEHorE,EAAevpG,GAAMA,EAAMm+B,EAAWwC,eAAgBtpC,GAEtDopC,EAAO7G,GAAS16B,KAAKi/B,GAEe,qBAAzBud,EAAOguD,GAA+B,CAC/C,IAAI7nG,EAAQwT,EAAKimB,mBAAmB,CAClC76B,GAAIipG,EACJnuE,KAAM,YACN4kB,SAAS,EACTxhD,SAAUw/B,EAAWx/B,SACrB68B,MAAOkuE,IACN,GAAO7nG,MAEV65C,EAAOguD,GAAgB7nG,GAM7B6mG,EAAcjsG,GAAG,QAAS4sG,EAAQrpG,GAAMA,EAAM3I,KAWhD,kBAAmB,SAAwB2I,EAAM3I,GAC/C,IAAIge,EAAOhe,EAASge,KAChBnX,EAAc7G,EAAStC,OAAOmJ,YAC9B0rG,EAA6BvyG,EAASwlC,WAAW78B,GACjDygC,EAASmpE,EAA2BnpE,OACpCib,EAASkuD,EAA2BluD,OAExC,IAAK,IAAI9hB,KAAW17B,EAAY8B,GAK9B,IAAK,IAAI0pG,KAJJjpE,EAAO7G,KACV6G,EAAO7G,GAAW,IAGK17B,EAAY8B,GAAM45B,GAAU,CACnD,IAAIuE,EAAajgC,EAAY8B,GAAM45B,GAAS8vE,GAI5C,GAAKvrE,EAAWv/B,WAAWi6B,MAAM,UAMjC4H,EAAO7G,GAAS16B,KAAKmB,EAAU,WAAWia,aAAa,CAAE7Z,GAAIipG,GAAgBvrE,IAEzC,qBAAzBud,EAAOguD,IAA+B,CAC/C,IAAI7nG,EAAQwT,EAAKimB,mBAAmB,CAClC76B,GAAI09B,EAAWv/B,WACf28B,KAAM,WACN4kB,SAAS,EACTxhD,SAAUw/B,EAAWx/B,SACrB68B,MAAOkuE,IACN,GAAO7nG,MAEV65C,EAAOguD,GAAgB7nG,MAOjC5P,EAAQu3G,WAAaA,EAerB,IAAIR,EAAc,SAAqBhpG,EAAM3I,GAC3C,OAAO,SAAUwK,GACf,IAAI+6B,EAAuBvlC,EAASulC,qBAChC6D,EAASppC,EAASwlC,WAAW78B,GAAMygC,OAEnCtiC,EAAQy+B,EAAqBz+B,QAEjC,IAAKA,EACH,OAAO,KAGT,IAAI0rG,EAAW,KAQf,OANI1rG,EAAM9J,WAAW2L,KACnB6pG,EAAWppE,EAAOtiC,EAAM9J,WAAW2L,KAGrC6pG,EAAWA,GAAYppE,EAAO/D,KAET,qBAAV76B,EACFgoG,EAGK,OAAVhoG,EAGK,KAGFgoG,EAASp0G,QAAO,SAAUoE,GAC/B,OAAOA,EAAM4G,KAAOoB,EAAMpB,MACzB,IAAM,OAIbxO,EAAQ+2G,YAAcA,EACtB,IAAID,EAAc,CAahBrvE,MAAO,SAAe15B,EAAM3I,GAC1B,OAAO,WACL,IAAIqkD,EAASrkD,EAASwlC,WAAW78B,GAAM07C,OAEvC,IAAK,IAAIj7C,KAAMi7C,EACb,GAAIA,EAAOj7C,GAAI0/C,QACb,OAAOzE,EAAOj7C,GAIlB,OAAO,OAeXg8B,UAAW,SAAmBz8B,EAAM3I,GAClC,OAAO,WACL,IAAIqkD,EAASrkD,EAASwlC,WAAW78B,GAAM07C,OAEvC,IAAK,IAAIj7C,KAAMi7C,EACb,GAAwB,YAApBA,EAAOj7C,GAAIy5B,KACb,OAAOwhB,EAAOj7C,GAIlB,OAAO,QAKbxO,EAAQ82G,YAAcA,EA+BtB,IAAIxsE,EAAmB,SAA0BllC,GAC/C,CAAC,QAAS,YAAa,mBAAmBsK,SAAQ,SAAU3B,GAC1DwpG,EAAWxpG,GAAMA,EAAM3I,MAGzB,IAAIwlC,EAAaxlC,EAASwlC,WACtBD,EAAuBvlC,EAASulC,qBAChCvnB,EAAOhe,EAASge,KAChBmG,EAAMnkB,EAASmkB,IAGnB,CAAC,QAAS,aAAa7Z,SAAQ,SAAU3B,GACvC68B,EAAW78B,GAAMgpG,YAAcA,EAAYhpG,EAAM3I,GACjDwlC,EAAW78B,GAAM+oG,YAAcA,EAAY/oG,GAAMA,EAAM3I,GACvDwlC,EAAW78B,GAAM4oG,eAAiBA,EAAe5oG,EAAM3I,GACvDwlC,EAAW78B,GAAMmpG,eAAiBA,EAAenpG,EAAM3I,MAKzD,IAAIsiC,EAAakD,EAAWnD,MAAMsvE,cAC9BpvE,GAAWD,EAAWlkC,QAAO,SAAUirC,GACzC,OAAOA,EAAM,cACZ,IAAM/G,EAAW,IAAIl5B,GAExBo8B,EAAWnD,MAAMgiB,OAAO9hB,GAASumB,SAAU,EAC3CtjB,EAAWnD,MAAMyvE,iBAEjBvsE,EAAqBngC,GAAG,eAAe,WACrC,CAAC,QAAS,aAAakF,SAAQ,SAAU3B,GACvC,OAAO68B,EAAW78B,GAAM4oG,uBAK5B,IAAIkB,EAAsB,WACxBjtE,EAAWnD,MAAMyvE,iBACjB9zF,EAAKtY,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,sBActC,IAAK,IAAIjE,KAXT4U,EAAKurD,cAAc5lC,iBAAiB,SAAU8uE,GAC9Cz0F,EAAKq0C,mBAAmB1uB,iBAAiB,SAAU6B,EAAWJ,UAAU0sE,gBAExE3tF,EAAI/e,GAAG,WAAW,WAChB4Y,EAAKurD,cAAcrgC,oBAAoB,SAAUupE,GACjDz0F,EAAKq0C,mBAAmBnpB,oBAAoB,SAAU1D,EAAWJ,UAAU0sE,mBAI7E9zF,EAAK2zC,YAAY,SAEFnsB,EAAWnD,MAAMgiB,OAC9BrmC,EAAKurD,cAAcjhB,SAAS9iB,EAAWnD,MAAMgiB,OAAOj7C,KAIxDxO,EAAQsqC,iBAAmBA,EAS3B,IAAIzB,EAAmB,WACrB,IAAI+B,EAAa,GAcjB,MAZA,CAAC,QAAS,YAAa,mBAAmBl7B,SAAQ,SAAU3B,GAC1D68B,EAAW78B,GAAQ,CACjBygC,OAAQ,GACRib,OAAQ,GACR3c,qBAAsB,KACtBiqE,YAAa7sG,EACb4sG,YAAa5sG,EACbysG,eAAgBzsG,EAChBgtG,eAAgBhtG,MAIb0gC,GAET5qC,EAAQ6oC,iBAAmBA,G,qBCjvB3B9oC,EAAOC,QAAU,CACf4K,IAAK,EAAQ,QACb1K,WAAY,EAAQ,QACpB2vB,aAAc,EAAQ,U,mCCHxB,W,mBCAA9vB,EAAOC,QAAU,01G,kCCKjBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAa6N,EAAKunE,EAAKub,GAAO,IAAIvwF,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASgV,EAAK9zB,EAAWq7F,EAAK/0E,EAAWswF,EAAKvwF,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA6O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAAhW,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BoN,EAAMpN,EAAQ20E,EAAMr7F,EAAU42G,EAAMtwF,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE/c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAIrI,EAAY,EAAQ,QAEpBC,EAAaT,EAAuBQ,GAEpCsN,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnC4pG,EAAiB,EAAQ,QAEzBC,EAAkB33G,EAAuB03G,GAEzCp3G,EAAU,EAAQ,QAElBC,EAAWP,EAAuBM,GAElCsN,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCuuF,EAAsD,EAAQ,QAE9DC,EAAuDp8F,EAAuBm8F,GAE9En5D,EAAY,EAAQ,QAEpB40E,EAAuB,EAAQ,QAE/Bl1F,EAAU,EAAQ,QAElBm1F,EAAqB,EAAQ,QAG7BC,EAAqB,IAYrBC,EAAoB,SAA2B/0G,EAAUurB,EAAa0G,GACxE,IAAKjyB,IAAaurB,EAChB,OAAO,EAGT,IAAIrkB,EAAWlH,EAASkH,SAIpB8tG,EAAsB/iF,IAAiB/qB,EAAS1G,OAKpD,OAAOR,EAAS8H,SAAsC,SAA3ByjB,EAAYzS,YAAyBk8F,GAG9DC,EAAS,SAAgB/iG,GAC3B,MAAsB,kBAARA,GAAoB1J,SAAS0J,IAGzCgjG,EAAqB,SAA4BvuE,EAAYwuE,EAAeC,GAG9E,MAAmB,SAAfzuE,GAA0BwuE,GAAkBC,EAI3CA,EAAgBzgF,eAAkBygF,EAAgB1gF,cAInDygF,EAAczgF,gBAAkB0gF,EAAgB1gF,cAC3C,6LAGJygF,EAAczgF,eAAiB0gF,EAAgB1gF,cAC3C,kMAGF,KAXE,4CAJA,MAkBX/3B,EAAQu4G,mBAAqBA,EAc7B,IAAIG,EAAyB,SAAgCr1F,EAAUhe,EAAagI,GAClF,IAAIsrG,OAAev3G,EAanB,OATEu3G,EAFEt1F,EAASxf,QAAUwf,EAAS6B,MAAM,GAAK,GAAK7B,EAAS6B,MAAM,GAAK7f,EAEnDge,EAAS6B,MAAM,GAGf7f,EAAc,GAMxB2J,KAAKoZ,IAAIuwF,EAActzG,EAAcgI,IAG9CrN,EAAQ04G,uBAAyBA,EASjC,IAAIE,EAAgB,SAAWjqF,GAG7B,SAASiqF,EAAcxzG,GACrB,IAAIqE,EAAQ9E,KAERwe,EAAU/b,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,GAAKA,UAAU,GAMnF,GAJAsB,EAAgB/D,KAAMi0G,GAEtBzxF,EAAK3mB,OAAOkJ,eAAekvG,EAAcrxG,WAAY,cAAe5C,MAAM8C,KAAK9C,OAE1ES,EACH,MAAM,IAAIwD,UAAU,wCAEtB,GAAoC,oBAAzBxD,EAASC,YAClB,MAAM,IAAIuD,UAAU,mCAEtB,IAAKxD,EAASwpB,YACZ,MAAM,IAAIhmB,UAAU,4BAGtBjE,KAAKglB,MAAQ,OACbhlB,KAAKpB,UAAY6B,EAAS7B,UAC1BoB,KAAKk0G,WAAa,CAAEzpE,KAAM,EAAG91B,MAAO,GACpC3U,KAAKm0G,UAAY3pF,IACjBxqB,KAAKo0G,cACLp0G,KAAK0yB,WAAa,KAGlB1yB,KAAKukC,WAAa9jC,EAASskC,UAC3B/kC,KAAKg5F,aAAev4F,EAASC,YAC7BV,KAAKskC,UAAY7jC,EAASie,SAC1B1e,KAAKq0G,SAAW5zG,EAASmf,QACzB5f,KAAK6xD,UAAYpxD,EAASE,SAC1BX,KAAK0L,aAAejL,EAASwpB,YAC7BjqB,KAAK6kB,KAAOpkB,EAASmkB,IACrB5kB,KAAKs0G,YAAc7zG,EAAS4kC,WAC5BrlC,KAAKu0G,oBAAiB,EACtBv0G,KAAKykC,sBAAwBhkC,EAAS2kC,qBACtCplC,KAAKw0G,kBAAoB/zG,EAASukC,iBAGlChlC,KAAKy0G,oBAAsB,KAC3Bz0G,KAAKuyD,YAAS,EACdvyD,KAAK+4F,kBAAoB,EACzB/4F,KAAKy5F,gBAAkB,KACvBz5F,KAAK00G,UAAY,KACjB10G,KAAK20G,eAAiB,KACtB30G,KAAK40G,YAAc,KAGnB50G,KAAK60G,qBAAuB,KAC5B70G,KAAKs4F,cAAgB,GAErBt4F,KAAK6kC,WAAapkC,EAASwkC,UAK3BjlC,KAAKwkC,gBAAkB/jC,EAASM,eAChCf,KAAK84F,WAAa,CAChBnoE,aAAc,EACd/kB,KAAM,GAGR5L,KAAKwkC,gBAAgB3+B,GAAG,kBAAkB,WACxC,OAAOf,EAAMqB,QAAQ,qBAGvBnG,KAAK0L,aAAa04B,iBAAiB,cAAc,WAC/C,OAAOt/B,EAAMgkC,QAAS,KAIxB9oC,KAAK80G,gBAAiB,EAElBt2F,EAAQO,QACV/e,KAAKgf,QAAUvV,EAAU,WAAWM,IAAI3I,KAAKqI,EAAU,WAAY,iBAAkBzJ,KAAKs0G,YAAa,OAspC3G,OAnuCAjwG,EAAU4vG,EAAejqF,GAuFzBjnB,EAAakxG,EAAe,CAAC,CAC3BtxG,IAAK,cACL5G,MAAO,WACLiE,KAAK+0G,sBAAwB,EAC7B/0G,KAAKg1G,cAAgB,EACrBh1G,KAAKi1G,qBAAuB,EAC5Bj1G,KAAKk1G,sBAAwB,EAC7Bl1G,KAAKm1G,qBAAuB,EAC5Bn1G,KAAKo1G,sBAAwB,EAC7Bp1G,KAAKkoC,mBAAqB,IAM3B,CACDvlC,IAAK,UACL5G,MAAO,WACLiE,KAAKglB,MAAQ,WACbhlB,KAAKinC,QACLjnC,KAAKq1G,SACDr1G,KAAK20G,gBACP30G,KAAK20G,eAAe7hG,UAEtB9S,KAAKo0G,gBAON,CACDzxG,IAAK,QACL5G,MAAO,WACc,YAAfiE,KAAKglB,OAOThlB,KAAKq1G,SAMLr1G,KAAKglB,MAAQ,QAIRhlB,KAAK6f,UACR7f,KAAK04F,kBAjBD14F,KAAKy5F,kBACPz5F,KAAKy5F,gBAAkB,QAyB5B,CACD92F,IAAK,SACL5G,MAAO,WACDiE,KAAKy5F,iBACPz5F,KAAKy5F,gBAAgB6b,gBAIvBt1G,KAAKy5F,gBAAkB,OASxB,CACD92F,IAAK,QACL5G,MAAO,SAAew5G,GAMpB,MALsB,qBAAXA,IACTv1G,KAAKuyD,OAASgjD,GAGhBv1G,KAAKy5F,gBAAkB,KAChBz5F,KAAKuyD,SAEb,CACD5vD,IAAK,cACL5G,MAAO,WACLiE,KAAK8oC,QAAS,EACd9oC,KAAKinC,QACLjnC,KAAKmG,QAAQ,WASd,CACDxD,IAAK,YACL5G,MAAO,WACL,OAAKiE,KAAK20G,eAIH30G,KAAK20G,eAAe70F,WAHlBrW,EAAU,WAAWsiB,qBAgB/B,CACDppB,IAAK,cACL5G,MAAO,SAAqB0C,GAC1B,IAAI+oB,IAAM/kB,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,KAA2BA,UAAU,GAElF,IAAKhE,EACH,OAAO,KAGT,IAAIoL,GAAK,EAAI60B,EAAUc,eAAe/gC,GAClC45F,EAAYr4F,KAAKs4F,cAAczuF,GAUnC,OARI2d,IAAQ6wE,GAAa55F,EAAI0tB,QAC3BnsB,KAAKs4F,cAAczuF,GAAMwuF,EAAY,CACnCx0E,YAAaplB,EAAIolB,YACjBxd,UAAW5H,EAAI4H,UACf8lB,MAAO1tB,EAAI0tB,QAIRksE,GAAa55F,IASrB,CACDkE,IAAK,qBACL5G,MAAO,WACL,OAAOiE,KAAKy4F,YAIZz4F,KAAK20G,gBAAkB30G,KAAK00G,WAA4B,SAAf10G,KAAKglB,SAAsBhlB,KAAK6f,WAM1E,CACDld,IAAK,OACL5G,MAAO,WAML,GAJAiE,KAAK04F,iBAIA14F,KAAKy4F,UAAV,CAQA,GAHAz4F,KAAKwkC,gBAAgBgxE,mBAAmBx1G,KAAKy4F,WAG1B,SAAfz4F,KAAKglB,OAAoBhlB,KAAK44F,qBAChC,OAAO54F,KAAK64F,SAKT74F,KAAK44F,sBAAuC,UAAf54F,KAAKglB,OAAoC,SAAfhlB,KAAKglB,QAIjEhlB,KAAKglB,MAAQ,YAUd,CACDriB,IAAK,QACL5G,MAAO,WAIL,OAHAiE,KAAKglB,MAAQ,QACbhlB,KAAK20G,eAAiB,IAAItB,EAAgB,WAAWrzG,KAAK0L,aAAc1L,KAAK00G,WAC7E10G,KAAKspC,kBACEtpC,KAAK04F,mBAQb,CACD/1F,IAAK,WACL5G,MAAO,SAAkBi2B,GACvB,IAAIxT,EAAU/b,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,GAAKA,UAAU,GAEnF,GAAKuvB,EAAL,CAIA,IAAID,EAAc/xB,KAAKy4F,UACnBrmE,EAAcpyB,KAAKy5F,gBAqBvB,GAnBAz5F,KAAKy4F,UAAYzmE,EACjBhyB,KAAK40G,YAAcp2F,EAKdxe,KAAKukC,eACRvS,EAAYd,SAAW,CACrBxqB,cAAesrB,EAAYtrB,cAC3BkF,KAAM,IAMV5L,KAAKmG,QAAQ,kBAIM,SAAfnG,KAAKglB,OAAoBhlB,KAAK44F,qBAChC,OAAO54F,KAAK64F,QAGd,GAAK9mE,GAAeA,EAAYhrB,MAAQirB,EAAYjrB,IAApD,CAaA,IAAIkrB,EAAoBD,EAAYtrB,cAAgBqrB,EAAYrrB,cAEhE1G,KAAKgf,QAAQ,oBAAqBiT,GAKV,OAApBjyB,KAAK0yB,aACP1yB,KAAK0yB,YAAcT,GAMjBG,IACFA,EAAYM,YAAcT,EAKtBG,EAAYM,YAAc,IAC5BN,EAAYxQ,QAAUoQ,EAAYpsB,SAASwsB,EAAYM,cAI3D1yB,KAAKwkC,gBAAgBixE,uBAAuB1jF,EAAaC,QArC/B,OAApBhyB,KAAK0yB,YAGP1yB,KAAKsyG,kBA2CV,CACD3vG,IAAK,QACL5G,MAAO,WACDiE,KAAKy0G,sBACPlrG,EAAe,WAAWmO,aAAa1X,KAAKy0G,qBAE5Cz0G,KAAKy0G,oBAAsB,QAS9B,CACD9xG,IAAK,SACL5G,MAAO,WACL,OAAoC,OAA7BiE,KAAKy0G,sBASb,CACD9xG,IAAK,WACL5G,MAAO,SAAkB25G,GACnB11G,KAAK00G,YAIT10G,KAAK00G,UAAYgB,EAGE,SAAf11G,KAAKglB,OAAoBhlB,KAAK44F,sBAChC54F,KAAK64F,WAOR,CACDl2F,IAAK,kBACL5G,MAAO,WACLiE,KAAK8oC,QAAS,EACd9oC,KAAKooC,cACLpoC,KAAKw+B,OAAO,EAAGx+B,KAAK6xD,aACpB7xD,KAAKmG,QAAQ,qBASd,CACDxD,IAAK,cACL5G,MAAO,WACLiE,KAAK80G,gBAAiB,EACtB90G,KAAKsyG,iBAON,CACD3vG,IAAK,eACL5G,MAAO,WACLiE,KAAK0yB,WAAa,KAClB1yB,KAAK84F,WAAa,KAClB94F,KAAKkmB,UAQN,CACDvjB,IAAK,SACL5G,MAAO,SAAgBwkB,EAAOP,GACxBhgB,KAAK20G,gBACP30G,KAAK20G,eAAen2E,OAAOje,EAAOP,IAEpC,EAAI83E,EAAqD,YAAYv3E,EAAOP,EAAKhgB,KAAKykC,yBAQvF,CACD9hC,IAAK,iBACL5G,MAAO,WACDiE,KAAKy0G,qBACPlrG,EAAe,WAAWmO,aAAa1X,KAAKy0G,qBAG9Cz0G,KAAKy0G,oBAAsBlrG,EAAe,WAAWoW,WAAW3f,KAAK21G,mBAAmBv0G,KAAKpB,MAAO,KASrG,CACD2C,IAAK,qBACL5G,MAAO,WACc,UAAfiE,KAAKglB,OACPhlB,KAAK41G,cAGH51G,KAAKy0G,qBACPlrG,EAAe,WAAWmO,aAAa1X,KAAKy0G,qBAG9Cz0G,KAAKy0G,oBAAsBlrG,EAAe,WAAWoW,WAAW3f,KAAK21G,mBAAmBv0G,KAAKpB,MAAOwzG,KAYrG,CACD7wG,IAAK,cACL5G,MAAO,WACL,IAAIiE,KAAK20G,eAAehqF,WAAxB,CAIK3qB,KAAK84F,aACR94F,KAAK84F,WAAa94F,KAAKwkC,gBAAgBjjC,aAAavB,KAAKy4F,UAAWz4F,KAAK6xD,YAAa7xD,KAAK+4F,iBAAkB/4F,KAAKg5F,iBAIpH,IAAI5mE,EAAcpyB,KAAKi5F,aAAaj5F,KAAKk5F,YAAal5F,KAAKy4F,UAAWz4F,KAAK0yB,WAAY1yB,KAAKukC,aAAcvkC,KAAKg5F,eAAgBh5F,KAAK84F,YAEpI,GAAK1mE,EAAL,CAIA,IAAIyW,EAAgB4qE,EAAkBzzG,KAAKy4F,UAAWz4F,KAAK0L,aAAc0mB,EAAYM,YAEjFmW,EACF7oC,KAAKqmC,eAIHjU,EAAYM,aAAe1yB,KAAKy4F,UAAU7yF,SAAS1G,OAAS,GAAsC,UAAjCc,KAAK0L,aAAa8L,YAA2BxX,KAAKq0G,eAUnHjiF,EAAYlpB,WAAalJ,KAAK+4F,kBAAmD,OAA/B3mE,EAAYoB,gBAA2BpB,EAAYoB,eAAiBxzB,KAAK20G,eAAerpG,qBAC5ItL,KAAKwkC,gBAAgB7P,QACrBvC,EAAY9mB,gBAAkB8mB,EAAYoB,gBAG5CxzB,KAAKs5F,aAAalnE,QAenB,CACDzvB,IAAK,eACL5G,MAAO,SAAsB+jB,EAAUphB,EAAUg0B,EAAYqS,EAAWrkC,EAAaY,GACnF,IAAIu0G,EAAkB,EAClBriF,OAAiB/2B,EAEjBqjB,EAAS5gB,SACX22G,EAAkB/1F,EAASE,IAAIF,EAAS5gB,OAAS,IAGnD,IAAI42G,EAAezrG,KAAKijB,IAAI,EAAGuoF,EAAkBn1G,GAEjD,IAAKhC,EAASkH,SAAS1G,OACrB,OAAO,KAKT,GAAI42G,GAAgB91G,KAAKw0G,oBACvB,OAAO,KAKT,IAAKzvE,GAAa+wE,GAAgB,EAChC,OAAO,KAST,GANA91G,KAAKgf,QAAQ,eAAgB,cAAe0T,EAAY,aAAcqS,EAAW,eAAgBrkC,EAAa,aAAcY,EAAW,iBAAkBtB,KAAK80G,eAAgB,gBAAiBgB,GAM7K,OAAdx0G,EAGF,OAFAoxB,EAAa1yB,KAAK+1G,yBAAyBr3G,GAC3CsB,KAAKgf,QAAQ,UAAW,cAAe0T,GAChC1yB,KAAKu5F,qBAAqB76F,EAAUg0B,EAAY,MAAM,GAI/D,GAAmB,OAAfA,EAAqB,CACvB1yB,KAAKgf,QAAQ,cAAe,cAAe0T,EAAa,GACxD,IAAI9Q,EAAUljB,EAASkH,SAAS8sB,GAOhC,OAJEc,EADE5R,GAAWA,EAAQ5B,IACJ4B,EAAQ5B,IAER61F,EAEZ71G,KAAKu5F,qBAAqB76F,EAAUg0B,EAAa,EAAGc,GAAgB,GAM7E,GAAIxzB,KAAK80G,eAAgB,CAEvB,IAAIkB,EAAkB75G,EAAW,WAAW85G,oBAAoBv3G,EAAUm3G,EAAiBv0G,EAAUqvB,aAAcrvB,EAAUsK,MAE7H8mB,EAAasjF,EAAgBtjF,WAC7Bc,EAAiBwiF,EAAgB3qG,cAC5B,CAED2qG,EAAkB75G,EAAW,WAAW85G,oBAAoBv3G,EAAUgC,EAAaY,EAAUqvB,aAAcrvB,EAAUsK,MAEzH8mB,EAAasjF,EAAgBtjF,WAC7Bc,EAAiBwiF,EAAgB3qG,UAInC,OAFArL,KAAKgf,QAAQ,uBAAwB,cAAe0T,EAAY,kBAAmBc,GAE5ExzB,KAAKu5F,qBAAqB76F,EAAUg0B,EAAYc,GAAgB,KAYxE,CACD7wB,IAAK,2BACL5G,MAAO,SAAkC2C,GACvC,IAAIinB,EAAS3lB,KAEb,IAA+B,IAA3BA,KAAK+4F,iBACP,OAAO,EAGT,IAAImd,EAAoBx3G,EAASkH,SAASnH,KAAI,SAAU8c,EAAG/Y,GACzD,MAAO,CACL0G,SAAUqS,EAAErS,SACZynB,aAAcnuB,MAEf3D,QAAO,SAAU0c,GAClB,OAAOA,EAAErS,WAAayc,EAAOozE,oBAG/B,OAAImd,EAAkBh3G,OACbg3G,EAAkB7rG,KAAKoZ,IAAIyyF,EAAkBh3G,OAAS,EAAG,IAAIyxB,aAG/DtmB,KAAKijB,IAAI5uB,EAASkH,SAAS1G,OAAS,EAAG,KAE/C,CACDyD,IAAK,uBACL5G,MAAO,SAA8B2C,EAAUg0B,EAAYc,EAAgBgmE,GACzE,GAAI9mE,EAAa,GAAKA,GAAch0B,EAASkH,SAAS1G,OACpD,OAAO,KAGT,IAAI0iB,EAAUljB,EAASkH,SAAS8sB,GAEhC,MAAO,CACL+tE,UAAW,kBAAoBp2F,KAAK2R,SAEpCjV,IAAK6a,EAAQiC,YAEb6O,WAAYA,EAGZ8mE,cAAeA,EACfhmE,eAAgBA,EAEhB90B,SAAUA,EAEVytB,MAAO,KAEPk0E,eAAgB,KAGhB/0F,gBAAiB,KAEjBpC,SAAU0Y,EAAQ1Y,SAElBvI,SAAUihB,EAAQjhB,SAElBihB,QAASA,KAcZ,CACDjf,IAAK,qBACL5G,MAAO,SAA4B4jG,GACjC,GAAI3/F,KAAK6kB,KAAK1kB,MAAM0f,WAInB7f,KAAK40G,YAAY5wE,UAEjBhkC,KAAKy4F,UAAUh7F,WAAWC,UACzB,OAAO,EAMT,GAAIgT,KAAK24B,OAASs2D,EAAMsB,sBAAwBvwF,KAAK24B,OAAS,IAC5D,OAAO,EAGT,IAAI3oC,EAAcV,KAAKg5F,eACnBmd,EAAoBxW,EAAM/gG,UAC1BgC,EAAkBZ,KAAKy5F,gBAAgB94F,SAEvCy1G,EAAuBj6G,EAAW,WAAWuF,2BAA2Bd,EAAiBu1G,EAAmBn2G,KAAKy4F,UAAWkH,EAAML,eAKlIz+F,GAAoB,EAAIud,EAAQvd,mBAAmBb,KAAKk5F,YAAax4F,EAAaV,KAAK6kB,KAAK1kB,MAAMgqE,gBAAkB,EAIxH,GAAIisC,GAAwBv1G,EAC1B,OAAO,EAGT,IAAIw1G,GAAkB,EAAI9C,EAAmB/yG,iCAAiC,CAC5ErC,OAAQ6B,KAAK6kB,KAAKrmB,UAAUL,OAC5BuC,YAAaA,EACb9B,UAAWu3G,EACXx1G,SAAUX,KAAK6xD,YACfjxD,gBAAiBA,EACjBC,kBAAmBA,EACnBC,gBAAiBd,KAAK+4F,iBACtBh4F,eAAgBf,KAAKwkC,kBAGvB,GAAK6xE,EAAL,CAIA,IAAI10G,EAAoBy0G,EAAuBv1G,EAE3Cy1G,EAAuB30G,EAAoB00G,EAAgB10G,kBAE3D40G,EAAoB,GASxB,OAJI11G,GAAqBud,EAAQiD,oBAC/Bk1F,EAAoB,IAGjBF,EAAgB33G,UAAY23G,EAAgB33G,SAASqI,MAAQ/G,KAAKy4F,UAAU1xF,KAAOuvG,EAAuBC,GACtG,GAMTv2G,KAAKpB,UAAYy3G,EAAgB33G,SAASjB,WAAWC,UAAYzB,EAAS,WAAWoD,mBAAqB,EAC1GW,KAAKkmB,QACLlmB,KAAKmG,QAAQ,eACN,MAYR,CACDxD,IAAK,kBACL5G,MAAO,SAAyB2a,EAAO8/F,GAChCx2G,KAAKy5F,iBAAmB+c,EAAc/V,YAAczgG,KAAKy5F,gBAAgBgH,YAAazgG,KAAKy2G,mBAAmBD,EAAc7W,QAIjI3/F,KAAKmG,QAAQ,cAQd,CACDxD,IAAK,eACL5G,MAAO,SAAsBq2B,GAC3BpyB,KAAKglB,MAAQ,UACbhlB,KAAKy5F,gBAAkBrnE,EACvBpyB,KAAK02G,gBAAgBtkF,GAErBA,EAAYkjF,eAAgB,EAAIhC,EAAqBpS,qBAAqBlhG,KAAK6kB,KAAKK,IAAKllB,KAAK40G,YAAa50G,KAAK6kC,WAAY7kC,KAAK22G,4BAA4BvkF,GAE7JpyB,KAAK42G,gBAAgBx1G,KAAKpB,MAAOA,KAAK62G,wBAAwBz1G,KAAKpB,SAWpE,CACD2C,IAAK,kBACL5G,MAAO,SAAyBq2B,GAC9B,IAAI4hF,EAAeD,EAAuB/zG,KAAKskC,YAAatkC,KAAKg5F,eAAgBh5F,KAAKy4F,UAAU/vF,gBAAkB,IAQ9GsrG,EAAe,GACjBh0G,KAAKw+B,OAAO,EAAGw1E,KAalB,CACDrxG,IAAK,8BACL5G,MAAO,SAAqCq2B,GAC1C,IAAIxQ,EAAUwQ,EAAYxQ,QACtB40F,EAAgB,CAClB3yF,YAAajC,EAAQiC,YACrBxd,UAAWub,EAAQvb,UACnBo6F,UAAWruE,EAAYquE,WAGzB,GAAI7+E,EAAQjf,IAAK,CAGf,IAAIsE,EAAK2a,EAAQjf,IAAIsE,IAAM,IAAI43B,YAAY,CAAC,EAAG,EAAG,EAAGzM,EAAYM,WAAaN,EAAY1zB,SAASgI,gBAEnG8vG,EAAc7zG,IAAM,CAClBkhB,YAAajC,EAAQjf,IAAIkhB,YACzB5c,GAAIA,GAQR,OAJI2a,EAAQnjB,MACV+3G,EAAc/3G,IAAMuB,KAAKy/B,YAAY7d,EAAQnjB,MAGxC+3G,IASR,CACD7zG,IAAK,0BACL5G,MAAO,SAAiCopB,EAAOqxF,GAW7C,GARAx2G,KAAKg1G,eAAiB,EAElBwB,EAAc7W,QAChB3/F,KAAK+0G,uBAAyByB,EAAc7W,MAAML,cAClDt/F,KAAKo1G,uBAAyBoB,EAAc7W,MAAMJ,eAI/Cv/F,KAAKy5F,iBASV,GAAI+c,EAAc/V,YAAczgG,KAAKy5F,gBAAgBgH,UAArD,CAKA,GAAIt7E,EAOF,OANAnlB,KAAKy5F,gBAAkB,KACvBz5F,KAAKglB,MAAQ,QAKTG,EAAMO,OAAS4tF,EAAqB5U,eAAeG,aACrD7+F,KAAKi1G,sBAAwB,IAI/Bj1G,KAAKinC,QAKD9hB,EAAMO,OAAS4tF,EAAqB5U,eAAeE,SACrD5+F,KAAKk1G,uBAAyB,EAC9Bl1G,KAAKpB,UAAY,EACjBoB,KAAKm0G,UAAY3pF,SACjBxqB,KAAKmG,QAAQ,qBAMfnG,KAAKm1G,sBAAwB,EAC7Bn1G,KAAKmlB,MAAMA,QACXnlB,KAAKmG,QAAQ,WAMfnG,KAAKpB,UAAY43G,EAAc7W,MAAM/gG,UACrCoB,KAAKm0G,UAAYqC,EAAc7W,MAAMJ,cAIjCiX,EAAc/3G,MAChB+3G,EAAc/3G,IAAMuB,KAAKy/B,YAAY+2E,EAAc/3G,KAAK,IAG1DuB,KAAK82G,wBAAwBN,SAzD3Bx2G,KAAKi1G,sBAAwB,IAkEhC,CACDtyG,IAAK,0BACL5G,MAAO,SAAiCy6G,GACtC,IAAIpkF,EAAcpyB,KAAKy5F,gBAEvBrnE,EAAYjG,MAAQqqF,EAAcrqF,MAC9BqqF,EAAc/3G,MAChB2zB,EAAYxQ,QAAQnjB,IAAI0tB,MAAQqqF,EAAc/3G,IAAI0tB,OAGpDiG,EAAYyuE,iBAAmB2V,EAAc3V,iBAC7C7gG,KAAK05F,mBAQN,CACD/2F,IAAK,iBACL5G,MAAO,WACL,IAAIoqB,EAASnmB,KAEb,GAAKA,KAAKy5F,gBAAV,CAKA,IAAIrnE,EAAcpyB,KAAKy5F,gBACnB73E,EAAUwQ,EAAYxQ,QACtByQ,EAAaryB,KAAKwkC,gBAAgBuyE,iBAAiB3kF,GAKpB,qBAAxBpyB,KAAKu0G,gBAAkCliF,IAGlDA,EAAWgB,eAAiBhB,EAAWe,iBACrCpzB,KAAKu0G,eAAiB,CACpBlhF,cAAehB,EAAWgB,cAC1BD,cAAef,EAAWe,gBAI9B,IAAI4jF,EAA0BpD,EAAmB5zG,KAAKs0G,YAAat0G,KAAKu0G,eAAgBliF,GAExF,GAAI2kF,EAMF,OALAh3G,KAAKmlB,MAAM,CACT/e,QAAS4wG,EACTvzE,kBAAmBl5B,WAErBvK,KAAKmG,QAAQ,SAIf,GAAIisB,EAAYonE,cAId,OAHAx5F,KAAKmG,QAAQ,kBACbnG,KAAKy5F,gBAAkB,UACvBz5F,KAAKglB,MAAQ,SAIqB,OAAhCoN,EAAY9mB,iBAA4B8mB,EAAY9mB,kBAAoBtL,KAAK20G,eAAerpG,oBAC9FtL,KAAK20G,eAAerpG,gBAAgB8mB,EAAY9mB,iBAEhDtL,KAAKmG,QAAQ,oBAGf,IAAI8wG,EAAkBj3G,KAAKwkC,gBAAgB0yE,mBAAmB9kF,EAAYlpB,UAElD,OAApB+tG,GACFj3G,KAAKmG,QAAQ,CACXiD,KAAM,qBACNkqB,QAAS2jF,IAIbj3G,KAAKglB,MAAQ,YAITpD,EAAQnjB,KACV,WACE,IAAI04G,GAAS,EAAIz4E,EAAUc,eAAe5d,EAAQnjB,KAElD,IAAK0nB,EAAO0uF,sBAAwB1uF,EAAO0uF,uBAAyBsC,EAAQ,CAC1E,IAAI13E,EAActZ,EAAOsZ,YAAY7d,EAAQnjB,KAE7C0nB,EAAOwuF,eAAexX,aAAa19D,EAAYtT,OAAO,WACpDhG,EAAO0uF,qBAAuBsC,MAPpC,GAaF/kF,EAAYjQ,WAAaiQ,EAAYjG,MAAMhK,WACd,kBAAlBP,EAAQrB,OAA6C,kBAAhBqB,EAAQ5B,IACtDhgB,KAAKkoC,oBAAsBtmB,EAAQ5B,IAAM4B,EAAQrB,MAEjDvgB,KAAKkoC,oBAAsBtmB,EAAQjhB,SAGrCX,KAAK20G,eAAexX,aAAa/qE,EAAYjG,MAAOnsB,KAAK85F,iBAAiB14F,KAAKpB,YA/E7EA,KAAKglB,MAAQ,UAyFhB,CACDriB,IAAK,mBACL5G,MAAO,WAGL,GAFAiE,KAAKgf,QAAQ,mBAAoB,eAAgBhf,KAAKy5F,kBAEjDz5F,KAAKy5F,gBAKR,OAJAz5F,KAAKglB,MAAQ,aACRhlB,KAAK6f,UACR7f,KAAK04F,kBAKT,IAAItmE,EAAcpyB,KAAKy5F,gBACnB73E,EAAUwQ,EAAYxQ,QACtBw1F,EAAuC,OAApBp3G,KAAK0yB,WAsB5B,GApBA1yB,KAAKy5F,gBAAkB,KACvBz5F,KAAKq3G,kBAAkBjlF,GACvBpyB,KAAKs3G,uBAAuBllF,GAE5BpyB,KAAKglB,MAAQ,QAEbhlB,KAAK0yB,WAAaN,EAAYM,WAC9B1yB,KAAK80G,gBAAiB,EACtB90G,KAAK+4F,iBAAmB3mE,EAAYlpB,SAMpClJ,KAAKmG,QAAQ,kBAMTyb,EAAQ5B,KAAOhgB,KAAKg5F,eAAiBp3E,EAAQ5B,IAA4C,EAAtCoS,EAAY1zB,SAASgK,eAC1E1I,KAAKspC,sBADP,CAOI8tE,GACFp3G,KAAKmG,QAAQ,mBAEfnG,KAAKmG,QAAQ,YAKb,IAAI0iC,EAAgB4qE,EAAkBrhF,EAAY1zB,SAAUsB,KAAK0L,aAAc0mB,EAAYM,WAAa,GAEpGmW,GACF7oC,KAAKqmC,cAGFrmC,KAAK6f,UACR7f,KAAK04F,oBAaR,CACD/1F,IAAK,oBACL5G,MAAO,SAA2Bq2B,GAChC,IAAIqY,EAAOzqC,KAAKk0G,WAAWzpE,KAGvB8sE,EAAwB7mG,KAAK24B,MAAQjX,EAAYyuE,iBAAmB,EAEpE2W,EAA8BntG,KAAK6F,MAAMkiB,EAAYjQ,WAAao1F,EAAwB,EAAI,KAIlGv3G,KAAKk0G,WAAWzpE,OAAS+sE,EAA8B/sE,KAAUzqC,KAAKk0G,WAAWv/F,QASlF,CACDhS,IAAK,UACL5G,MAAO,cAWN,CACD4G,IAAK,yBACL5G,MAAO,SAAgCq2B,GACrC,GAAKpyB,KAAKykC,sBAAV,CAIA,IAAI7iB,EAAUwQ,EAAYxQ,QACtBrB,EAAQqB,EAAQrB,MAChBP,EAAM4B,EAAQ5B,IAGlB,GAAK2zF,EAAOpzF,IAAWozF,EAAO3zF,GAA9B,EAIA,EAAI83E,EAAqD,YAAYv3E,EAAOP,EAAKhgB,KAAKykC,uBAEtF,IAAI75B,EAAMrB,EAAe,WAAWsB,eAAiBtB,EAAe,WAAWuB,OAC3E/O,EAAQ,CACV6C,UAAWwzB,EAAY1zB,SAASjB,WAAWC,UAC3CstG,WAAY54E,EAAY1zB,SAASjB,WAAWO,WAC5CqkC,OAAQjQ,EAAY1zB,SAASjB,WAAW0E,OACxCggB,WAAYiQ,EAAYjQ,WACxBpb,IAAKqrB,EAAYrrB,IACjBmC,SAAUkpB,EAAYlpB,SACtBxK,SAAU0zB,EAAY1zB,SAASqI,IAC/BwZ,MAAOA,EACPP,IAAKA,GAEHlX,EAAOyR,KAAKD,UAAUve,GACtB4N,EAAM,IAAIiB,EAAI2V,EAAOP,EAAKlX,GAI9Ba,EAAI5N,MAAQA,EAEZiE,KAAKykC,sBAAsBr5B,OAAOzB,SAI/BsqG,EApuCW,CAquCjBxqG,EAAU,WAAWqd,aAExBzrB,EAAQ,WAAa44G,G,kCCj3CrBp4G,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEnB,SAAS5H,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,IAAIwzG,EAAO,EAAQ,QAEfC,EAAQh8G,EAAuB+7G,GAE/BE,EAAe,EAAQ,QAEvBC,EAAgBl8G,EAAuBi8G,GAEvCE,EAAS,EAAQ,QAMjBC,EAAO,SAAcC,GACvB,OAAOA,GAAQ,IAAa,MAAPA,IAAkB,GAAY,SAAPA,IAAoB,EAAIA,IAAS,IAgB3EC,EAAU,SAAiBp5E,EAAWj8B,EAAKs1G,GAE7C,IAAIC,EAAc,IAAIC,WAAWv5E,EAAUjX,OAAQiX,EAAU1c,WAAY0c,EAAUzc,YAAc,GAE7Fi2F,EAAW,IAAIV,EAAM,WAAWzsF,MAAMroB,UAAU5F,MAAM8F,KAAKH,IAG3Dq8B,EAAY,IAAI/c,WAAW2c,EAAUzc,YACrCk2F,EAAc,IAAIF,WAAWn5E,EAAUrX,QAIvC2wF,OAAQ77G,EACR87G,OAAQ97G,EACR+7G,OAAQ/7G,EACRg8G,OAAQh8G,EACRyzG,OAAazzG,EACb0zG,OAAa1zG,EACb2zG,OAAa3zG,EACb4zG,OAAa5zG,EAGbi8G,OAASj8G,EAWb,IAPA67G,EAAQL,EAAW,GACnBM,EAAQN,EAAW,GACnBO,EAAQP,EAAW,GACnBQ,EAAQR,EAAW,GAIdS,EAAS,EAAGA,EAASR,EAAYh5G,OAAQw5G,GAAU,EAGtDxI,EAAa4H,EAAKI,EAAYQ,IAC9BvI,EAAa2H,EAAKI,EAAYQ,EAAS,IACvCtI,EAAa0H,EAAKI,EAAYQ,EAAS,IACvCrI,EAAayH,EAAKI,EAAYQ,EAAS,IAGvCN,EAASJ,QAAQ9H,EAAYC,EAAYC,EAAYC,EAAYgI,EAAaK,GAI9EL,EAAYK,GAAUZ,EAAKO,EAAYK,GAAUJ,GACjDD,EAAYK,EAAS,GAAKZ,EAAKO,EAAYK,EAAS,GAAKH,GACzDF,EAAYK,EAAS,GAAKZ,EAAKO,EAAYK,EAAS,GAAKF,GACzDH,EAAYK,EAAS,GAAKZ,EAAKO,EAAYK,EAAS,GAAKD,GAGzDH,EAAQpI,EACRqI,EAAQpI,EACRqI,EAAQpI,EACRqI,EAAQpI,EAGV,OAAOrxE,GAGT3jC,EAAQ28G,QAAUA,EAalB,IAAIl5E,EAAY,WACd,SAASA,EAAUF,EAAWj8B,EAAKs1G,EAAY1oF,GAC7CxrB,EAAgB/D,KAAM8+B,GAEtB,IAAIc,EAAOd,EAAU65E,KACjBT,EAAc,IAAIC,WAAWv5E,EAAUjX,QACvCqX,EAAY,IAAI/c,WAAW2c,EAAUzc,YACrC3f,EAAI,EAMR,IAJAxC,KAAK44G,aAAe,IAAIhB,EAAc,WAGtC53G,KAAK44G,aAAatwG,KAAKtI,KAAK64G,cAAcX,EAAYzwF,SAASjlB,EAAGA,EAAIo9B,GAAOj9B,EAAKs1G,EAAYj5E,IACzFx8B,EAAIo9B,EAAMp9B,EAAI01G,EAAYh5G,OAAQsD,GAAKo9B,EAC1Cq4E,EAAa,IAAIp5E,YAAY,CAACi5E,EAAKI,EAAY11G,EAAI,IAAKs1G,EAAKI,EAAY11G,EAAI,IAAKs1G,EAAKI,EAAY11G,EAAI,IAAKs1G,EAAKI,EAAY11G,EAAI,MACjIxC,KAAK44G,aAAatwG,KAAKtI,KAAK64G,cAAcX,EAAYzwF,SAASjlB,EAAGA,EAAIo9B,GAAOj9B,EAAKs1G,EAAYj5E,IAGhGh/B,KAAK44G,aAAatwG,MAAK,WAErBinB,EAAK,MAAM,EAAIsoF,EAAOiB,OAAO95E,OA+BjC,OArBAj8B,EAAa+7B,EAAW,CAAC,CACvBn8B,IAAK,gBAKL5G,MAAO,SAAuB6iC,EAAWj8B,EAAKs1G,EAAYj5E,GACxD,OAAO,WACL,IAAI7S,EAAQ6rF,EAAQp5E,EAAWj8B,EAAKs1G,GAEpCj5E,EAAUxX,IAAI2E,EAAOyS,EAAU1c,gBAGjC,CAAC,CACHvf,IAAK,OACLmH,IAAK,WAEH,OAAO,SAIJg1B,EAnDO,GAsDhBzjC,EAAQyjC,UAAYA,EACpBzjC,EAAQ,WAAa,CACnByjC,UAAWA,EACXk5E,QAASA,I,kCCzKX,IA6BIv8G,EAAoBD,EAAoBD,EAAY4pG,EAItD4T,EACAte,EACAue,EACAC,EACAC,EACAC,EACAC,EAvCE9qF,EAAS,EAAQ,QACjBopC,EAAM,EAAQ,QACd+/B,EAAO,EAAQ,QACfh7D,EAAa,EAAQ,QACrBwpE,EAAa,EAAQ,QAAkBA,WACvC1b,EAAY,EAAQ,QACpBnvD,EAAgB,EAAQ,QACxBi+E,EAAQ,EAAQ,QAGhBC,EAAmB,CACrB,kBACA,eACA,aACA,yBACA,cAGEC,EAAmB,CACrB,QACA,SACA,aACA,WACA,wBAGEj9E,EAAmB,IAmBvBy8E,EAAsB,WACpB,MAAO,CACL/wF,KAAM,EACNmgE,MAAO,CACL6B,UAAW,EACX3B,UAAW,EACXC,aAAc,EACd2B,cAAe,EACfG,oBAAqB,KAK3BqQ,EAAkB,SAAS3xF,GACzB,OAAKA,EAAK,KAAO,IAAI++E,WAAW,IAC3B/+E,EAAK,KAAO,IAAI++E,WAAW,IAC3B/+E,EAAK,KAAO,IAAI++E,WAAW,IASlCsxB,EAAc,SAASr3G,EAAGC,GACxB,IACES,EAEF,GAAIV,EAAE5C,SAAW6C,EAAE7C,OACjB,OAAO,EAIT,IAAKsD,EAAI,EAAGA,EAAIV,EAAE5C,OAAQsD,IACxB,GAAIV,EAAEU,KAAOT,EAAES,GACb,OAAO,EAIX,OAAO,GAMT42G,EAAsB,SAASv8G,GAC7B,IACE2F,EACAg3G,EACAC,EAAM,EAGR,IAAKj3G,EAAI,EAAGA,EAAI3F,EAAMqC,OAAQsD,IAC5Bg3G,EAAa38G,EAAM2F,GACnBi3G,GAAOD,EAAW1wG,KAAKqZ,WAGzB,OAAOs3F,GAQTj+G,EAAqB,SAASyP,GAC5B,IACEyuG,EAAa,GACb1xB,EAAiB,EACjB2xB,EAAqB,EACrBC,EAAqB,EACrBC,EAA2BtvG,IAE7B/O,EAAmBoH,UAAUof,KAAKlf,KAAK9C,MAEvCA,KAAKsI,KAAO,SAASQ,GACnBkwG,EAAe/tG,EAAOnC,GAElBmC,GACFquG,EAAiBvuG,SAAQ,SAASwkC,GAChCtkC,EAAMskC,GAAQzmC,EAAKymC,MAKvBmqE,EAAWpxG,KAAKQ,IAGlB9I,KAAK85G,eAAiB,SAASC,GAC7BJ,EAAqBI,EAAc9uG,EAAMssF,kBAAkBhO,qBAG7DvpF,KAAKg6G,4BAA8B,SAASzwB,GAC1CswB,EAA2BtwB,GAG7BvpF,KAAKkkG,oBAAsB,SAAS1nE,GAClCo9E,EAAqBp9E,GAGvBx8B,KAAKoiB,MAAQ,WACX,IACEtW,EACAo5E,EACAH,EACAmD,EAGwB,IAAtBwxB,EAAWx6G,QAKf4M,EAAS9L,KAAKi6G,6BAA6BP,GAC3CzuG,EAAMs+E,oBAAsB2vB,EAAkCjuG,GAE9DjL,KAAKk6G,mBAAmBjvG,EAAOa,GAI/Bb,EAAMm9E,QAAUpoF,KAAKm6G,qBAAqBruG,GAG1Ci5E,EAAOrtB,EAAIqtB,KAAK/kF,KAAKo6G,sBAAsBtuG,IAE3C4tG,EAAa,GAEbx0B,EAAOxtB,EAAIwtB,KAAK8C,EAAgB,CAAC/8E,IACjCi9E,EAAQ,IAAIjmE,WAAWijE,EAAK/iE,WAAa4iE,EAAK5iE,YAG9C6lE,IAEAE,EAAM1gE,IAAI09D,GACVgD,EAAM1gE,IAAIu9D,EAAMG,EAAK/iE,YAErB82F,EAAahuG,GAEbjL,KAAKmG,QAAQ,OAAQ,CAAC8E,MAAOA,EAAOi9E,MAAOA,IAC3CloF,KAAKmG,QAAQ,OAAQ,uBA9BnBnG,KAAKmG,QAAQ,OAAQ,uBAmCzBnG,KAAKk6G,mBAAqB,SAASjvG,EAAOa,GACxC,IACEuuG,EAKAC,EACA93G,EALA+3G,EAAgB,EAChBC,EAAmB,EACnBC,EAAsB,EACtBC,EAAoB,EAItB,GAAK5uG,EAAO5M,SAIZm7G,EAAwBhB,EAAMj9E,iBAAiBnxB,EAAMs+E,oBAAqBt+E,EAAMmyB,YAEhFm9E,EAAgBlwG,KAAK0nF,KAAKz1D,GAAoBrxB,EAAMmyB,WAAa,OAE7Dw8E,GAAsBC,IAExBW,EACEH,EAAwBhwG,KAAKijB,IAAIssF,EAAoBC,GAEvDY,EAAsBpwG,KAAK6F,MAAMsqG,EAAmBD,GACpDG,EAAoBD,EAAsBF,KAKxCE,EAAsB,GAAKC,EAAoBp+E,EAAmB,IAAtE,CAYA,IARAg+E,EAAcl/E,EAAcnwB,EAAMmyB,YAE7Bk9E,IAGHA,EAAcxuG,EAAO,GAAGhD,MAGrBtG,EAAI,EAAGA,EAAIi4G,EAAqBj4G,IACnCsJ,EAAO2iB,OAAOjsB,EAAG,EAAG,CAClBsG,KAAMwxG,IAIVrvG,EAAMs+E,qBACJl/E,KAAK6F,MAAMmpG,EAAMh9E,iBAAiBq+E,EAAmBzvG,EAAMmyB,eAO/Dp9B,KAAKi6G,6BAA+B,SAASP,GAC3C,OAAIzuG,EAAM0vG,eAAiBhB,EAClBD,GAITzuG,EAAM0vG,cAAgBpwG,IAEfmvG,EAAW76G,QAAO,SAASy8F,GAEhC,OAAIA,EAAajtE,KAAOsrF,IACtB1uG,EAAM0vG,cAAgBtwG,KAAKoZ,IAAIxY,EAAM0vG,cAAerf,EAAajtE,KACjEpjB,EAAM2vG,cAAgB3vG,EAAM0vG,eACrB,QAQb36G,KAAKm6G,qBAAuB,SAASruG,GACnC,IACEtJ,EACA84F,EACAlT,EAAU,GAEZ,IAAK5lF,EAAI,EAAGA,EAAIsJ,EAAO5M,OAAQsD,IAC7B84F,EAAexvF,EAAOtJ,GACtB4lF,EAAQ9/E,KAAK,CACX0f,KAAMszE,EAAaxyF,KAAKqZ,WACxBxhB,SAAU,OAGd,OAAOynF,GAITpoF,KAAKo6G,sBAAwB,SAAStuG,GACpC,IACEtJ,EACA84F,EACAlS,EAAa,EACbtgF,EAAO,IAAImZ,WAAWm3F,EAAoBttG,IAE5C,IAAKtJ,EAAI,EAAGA,EAAIsJ,EAAO5M,OAAQsD,IAC7B84F,EAAexvF,EAAOtJ,GAEtBsG,EAAK0e,IAAI8zE,EAAaxyF,KAAMsgF,GAC5BA,GAAckS,EAAaxyF,KAAKqZ,WAElC,OAAOrZ,IAIXtN,EAAmBoH,UAAY,IAAI0rB,EAWnC7yB,EAAqB,SAASwP,EAAOuT,GACnC,IAIEiuD,EACAic,EAJAV,EAAiB,EACjB6yB,EAAW,GACXxW,EAAkB,GAIpB7lF,EAAUA,GAAW,GAErB/iB,EAAmBmH,UAAUof,KAAKlf,KAAK9C,aAEhCiL,EAAM6vG,OAEb96G,KAAK+6G,UAAY,GAEjB/6G,KAAKsI,KAAO,SAAS0yG,GACnBhC,EAAe/tG,EAAO+vG,GAGM,2BAAxBA,EAAQnmF,aAA6C43C,IACvDA,EAASuuC,EAAQvuC,OACjBxhE,EAAMw9E,IAAM,CAACuyB,EAAQlyG,MAErBywG,EAAiBxuG,SAAQ,SAASwkC,GAChCtkC,EAAMskC,GAAQk9B,EAAOl9B,KACpBvvC,OAGuB,2BAAxBg7G,EAAQnmF,aACP6zD,IACHA,EAAMsyB,EAAQlyG,KACdmC,EAAMy9E,IAAM,CAACsyB,EAAQlyG,OAIvB+xG,EAASvyG,KAAK0yG,IAGhBh7G,KAAKoiB,MAAQ,WACX,IACEtW,EACAmvG,EACAjP,EACA9mB,EACAH,EACAmD,EAIF,MAAO2yB,EAAS37G,OAAQ,CACtB,GAAgC,+BAA5B27G,EAAS,GAAGhmF,YACd,MAEFgmF,EAASnuF,QAIX,GAAwB,IAApBmuF,EAAS37G,OAGX,OAFAc,KAAKk7G,oBACLl7G,KAAKmG,QAAQ,OAAQ,sBAgDvB,GAzCA2F,EAAS9L,KAAKm7G,qBAAqBN,GACnC7O,EAAOhsG,KAAKo7G,qBAAqBtvG,GAoB5BkgG,EAAK,GAAG,GAAGv+E,WAEdwtF,EAAej7G,KAAKq7G,iBAAiBR,EAAS,GAAI5vG,GAE9CgwG,GACFjP,EAAKz9D,QAAQ0sE,GAGbjP,EAAK7pF,YAAc84F,EAAa94F,WAChC6pF,EAAKsP,UAAYL,EAAaK,SAC9BtP,EAAK5+E,IAAM6tF,EAAa7tF,IACxB4+E,EAAK39E,IAAM4sF,EAAa5sF,IACxB29E,EAAKrrG,UAAYs6G,EAAat6G,UAG9BqrG,EAAOhsG,KAAKu7G,qBAAqBvP,IAKjC3H,EAAgBnlG,OAAQ,CAC1B,IAAIs8G,EAQJ,GALEA,EADEh9F,EAAQuuF,eACI/sG,KAAKy7G,gBAAgBzP,GAErBhsG,KAAK07G,kBAAkB1P,IAGlCwP,EAiBH,OAfAx7G,KAAK+6G,UAAUxsE,QAAQ,CACrBotE,IAAK3P,EAAKtgE,MACVg9C,IAAKz9E,EAAMy9E,IACXD,IAAKx9E,EAAMw9E,MAIbzoF,KAAK+6G,UAAU77G,OAASmL,KAAKoZ,IAAI,EAAGzjB,KAAK+6G,UAAU77G,QAGnD27G,EAAW,GAGX76G,KAAKk7G,oBACLl7G,KAAKmG,QAAQ,OAAQ,sBAMvB8yG,EAAahuG,GAEb+gG,EAAOwP,EAGTxC,EAAe/tG,EAAO+gG,GAItB/gG,EAAMm9E,QAAUpoF,KAAKm6G,qBAAqBnO,GAG1CjnB,EAAOrtB,EAAIqtB,KAAK/kF,KAAK47G,oBAAoB5P,IAEzC/gG,EAAMs+E,oBAAsB2vB,EAAkCjuG,GAE9DjL,KAAKmG,QAAQ,oBAAqB6lG,EAAKvtG,KAAI,SAASk9G,GAClD,MAAO,CACLvuF,IAAKuuF,EAAIvuF,IACTiB,IAAKstF,EAAIttF,IACTlM,WAAYw5F,EAAIx5F,gBAKpBniB,KAAK+6G,UAAUxsE,QAAQ,CACrBotE,IAAK3P,EAAKtgE,MACVg9C,IAAKz9E,EAAMy9E,IACXD,IAAKx9E,EAAMw9E,MAIbzoF,KAAK+6G,UAAU77G,OAASmL,KAAKoZ,IAAI,EAAGzjB,KAAK+6G,UAAU77G,QAGnD27G,EAAW,GAEX76G,KAAKmG,QAAQ,sBAAuB8E,EAAMs+E,qBAC1CvpF,KAAKmG,QAAQ,oBAAqB8E,EAAMssF,mBAExCrS,EAAOxtB,EAAIwtB,KAAK8C,EAAgB,CAAC/8E,IAIjCi9E,EAAQ,IAAIjmE,WAAWijE,EAAK/iE,WAAa4iE,EAAK5iE,YAG9C6lE,IAEAE,EAAM1gE,IAAI09D,GACVgD,EAAM1gE,IAAIu9D,EAAMG,EAAK/iE,YAErBniB,KAAKmG,QAAQ,OAAQ,CAAC8E,MAAOA,EAAOi9E,MAAOA,IAE3CloF,KAAKk7G,eAGLl7G,KAAKmG,QAAQ,OAAQ,uBAGvBnG,KAAKk7G,aAAe,WAClBjC,EAAahuG,GAIbwhE,OAAShwE,EACTisF,OAAMjsF,GAKRuD,KAAKq7G,iBAAmB,SAASL,GAC/B,IAIEa,EACAC,EACAC,EACAC,EACAx5G,EAPAy5G,EAAa,KACbC,EAAmB,IACnBC,EAAkB5xG,IAQpB,IAAK/H,EAAI,EAAGA,EAAIxC,KAAK+6G,UAAU77G,OAAQsD,IACrCw5G,EAAgBh8G,KAAK+6G,UAAUv4G,GAC/Bu5G,EAAaC,EAAcL,IAGrB1wG,EAAMy9E,KAAOywB,EAAYluG,EAAMy9E,IAAI,GAAIszB,EAActzB,IAAI,KACzDz9E,EAAMw9E,KAAO0wB,EAAYluG,EAAMw9E,IAAI,GAAIuzB,EAAcvzB,IAAI,MAK3DszB,EAAW1tF,IAAMpjB,EAAMssF,kBAAkBlpE,MAK7CwtF,EAAeb,EAAQ3sF,IAAM0tF,EAAW1tF,IAAO0tF,EAAWp7G,SAItDk7G,IAAgBK,GAChBL,GAAeI,KAIZH,GACDK,EAAkBN,KACpBC,EAAgBE,EAChBG,EAAkBN,KAKxB,OAAIC,EACKA,EAAcH,IAEhB,MAGT37G,KAAKu7G,qBAAuB,SAASvP,GACnC,IAAI+P,EAiBJ,OAfK/P,EAAK,GAAG,GAAGv+E,UAAYu+E,EAAK9sG,OAAS,IAExC68G,EAAa/P,EAAKt/E,QAElBs/E,EAAK7pF,YAAe45F,EAAW55F,WAC/B6pF,EAAKsP,UAAYS,EAAWT,SAK5BtP,EAAK,GAAG,GAAG39E,IAAM0tF,EAAW1tF,IAC5B29E,EAAK,GAAG,GAAG5+E,IAAM2uF,EAAW3uF,IAC5B4+E,EAAK,GAAG,GAAGrrG,UAAYo7G,EAAWp7G,UAG7BqrG,GAOThsG,KAAKm7G,qBAAuB,SAASN,GACnC,IACEr4G,EACA45G,EACA9gB,EAAe,GACfxvF,EAAS,GAIX,IAFAwvF,EAAan5E,WAAa,EAErB3f,EAAI,EAAGA,EAAIq4G,EAAS37G,OAAQsD,IAC/B45G,EAAavB,EAASr4G,GAGS,+BAA3B45G,EAAWvnF,aAGTymE,EAAap8F,SACfo8F,EAAa36F,SAAWy7G,EAAW/tF,IAAMitE,EAAajtE,IACtDviB,EAAOxD,KAAKgzF,IAEdA,EAAe,CAAC8gB,GAChB9gB,EAAan5E,WAAai6F,EAAWtzG,KAAKqZ,WAC1Cm5E,EAAaluE,IAAMgvF,EAAWhvF,IAC9BkuE,EAAajtE,IAAM+tF,EAAW/tF,MAGC,8CAA3B+tF,EAAWvnF,cACbymE,EAAa7tE,UAAW,GAE1B6tE,EAAa36F,SAAWy7G,EAAW/tF,IAAMitE,EAAajtE,IACtDitE,EAAan5E,YAAci6F,EAAWtzG,KAAKqZ,WAC3Cm5E,EAAahzF,KAAK8zG,IActB,OARItwG,EAAO5M,UACLo8F,EAAa36F,UACd26F,EAAa36F,UAAY,KAC5B26F,EAAa36F,SAAWmL,EAAOA,EAAO5M,OAAS,GAAGyB,UAIpDmL,EAAOxD,KAAKgzF,GACLxvF,GAOT9L,KAAKo7G,qBAAuB,SAAStvG,GACnC,IACEtJ,EACA84F,EACAygB,EAAa,GACb/P,EAAO,GAiBT,IAbA+P,EAAW55F,WAAa,EACxB45F,EAAWT,SAAW,EACtBS,EAAWp7G,SAAW,EACtBo7G,EAAW3uF,IAAMthB,EAAO,GAAGshB,IAC3B2uF,EAAW1tF,IAAMviB,EAAO,GAAGuiB,IAG3B29E,EAAK7pF,WAAa,EAClB6pF,EAAKsP,SAAW,EAChBtP,EAAKrrG,SAAW,EAChBqrG,EAAK5+E,IAAMthB,EAAO,GAAGshB,IACrB4+E,EAAK39E,IAAMviB,EAAO,GAAGuiB,IAEhB7rB,EAAI,EAAGA,EAAIsJ,EAAO5M,OAAQsD,IAC7B84F,EAAexvF,EAAOtJ,GAElB84F,EAAa7tE,UAGXsuF,EAAW78G,SACb8sG,EAAK1jG,KAAKyzG,GACV/P,EAAK7pF,YAAc45F,EAAW55F,WAC9B6pF,EAAKsP,UAAYS,EAAWT,SAC5BtP,EAAKrrG,UAAYo7G,EAAWp7G,UAG9Bo7G,EAAa,CAACzgB,GACdygB,EAAWT,SAAWhgB,EAAap8F,OACnC68G,EAAW55F,WAAam5E,EAAan5E,WACrC45F,EAAW3uF,IAAMkuE,EAAaluE,IAC9B2uF,EAAW1tF,IAAMitE,EAAajtE,IAC9B0tF,EAAWp7G,SAAW26F,EAAa36F,WAEnCo7G,EAAWp7G,UAAY26F,EAAa36F,SACpCo7G,EAAWT,UAAYhgB,EAAap8F,OACpC68G,EAAW55F,YAAcm5E,EAAan5E,WACtC45F,EAAWzzG,KAAKgzF,IAapB,OATI0Q,EAAK9sG,QAAU68G,EAAWp7G,UAAY,IACxCo7G,EAAWp7G,SAAWqrG,EAAKA,EAAK9sG,OAAS,GAAGyB,UAE9CqrG,EAAK7pF,YAAc45F,EAAW55F,WAC9B6pF,EAAKsP,UAAYS,EAAWT,SAC5BtP,EAAKrrG,UAAYo7G,EAAWp7G,SAG5BqrG,EAAK1jG,KAAKyzG,GACH/P,GAIThsG,KAAKm6G,qBAAuB,SAASnO,EAAMqQ,GACzC,IACEh+C,EAAG77D,EACHunF,EACAgyB,EACAzgB,EACAlS,EAAaizB,GAAkB,EAC/Bj0B,EAAU,GAEZ,IAAK/pB,EAAI,EAAGA,EAAI2tC,EAAK9sG,OAAQm/D,IAG3B,IAFA09C,EAAa/P,EAAK3tC,GAEb77D,EAAI,EAAGA,EAAIu5G,EAAW78G,OAAQsD,IACjC84F,EAAeygB,EAAWv5G,GAE1BunF,EAASgvB,IAEThvB,EAAOX,WAAaA,EACpBW,EAAOD,sBAAwBwR,EAAaluE,IAAMkuE,EAAajtE,IAC/D07D,EAAOppF,SAAW26F,EAAa36F,SAC/BopF,EAAO/hE,KAAO,EAAIszE,EAAap8F,OAC/B6qF,EAAO/hE,MAAQszE,EAAan5E,WAExBm5E,EAAa7tE,WACfs8D,EAAO5B,MAAME,UAAY,GAG3Be,GAAcW,EAAO/hE,KAErBogE,EAAQ9/E,KAAKyhF,GAGjB,OAAO3B,GAITpoF,KAAK47G,oBAAsB,SAAS5P,GAClC,IACE3tC,EAAG77D,EAAG4rB,EACN2tF,EACAzgB,EACA8gB,EACAhzB,EAAa,EACbkzB,EAAiBtQ,EAAK7pF,WACtBo6F,EAAevQ,EAAKsP,SACpBkB,EAAkBF,EAAiB,EAAIC,EACvCzzG,EAAO,IAAImZ,WAAWu6F,GACtB10B,EAAO,IAAIpgE,SAAS5e,EAAK6e,QAG3B,IAAK02C,EAAI,EAAGA,EAAI2tC,EAAK9sG,OAAQm/D,IAI3B,IAHA09C,EAAa/P,EAAK3tC,GAGb77D,EAAI,EAAGA,EAAIu5G,EAAW78G,OAAQsD,IAIjC,IAHA84F,EAAeygB,EAAWv5G,GAGrB4rB,EAAI,EAAGA,EAAIktE,EAAap8F,OAAQkvB,IACnCguF,EAAa9gB,EAAaltE,GAE1B05D,EAAKC,UAAUqB,EAAYgzB,EAAWtzG,KAAKqZ,YAC3CinE,GAAc,EACdtgF,EAAK0e,IAAI40F,EAAWtzG,KAAMsgF,GAC1BA,GAAcgzB,EAAWtzG,KAAKqZ,WAIpC,OAAOrZ,GAKT9I,KAAK07G,kBAAoB,SAAS1P,GAChC,IAAIyQ,EAAYC,EAAUtvB,EAAOuuB,EAAKx5F,EAAYm5F,EAAU36G,EAAU66G,EAEtEr5F,EAAa6pF,EAAK7pF,WAClBm5F,EAAWtP,EAAKsP,SAChB36G,EAAWqrG,EAAKrrG,SAChB87G,EAAaC,EAAW,EAExB,MAAOD,EAAapY,EAAgBnlG,QAAUw9G,EAAW1Q,EAAK9sG,OAAQ,CAIpE,GAHAkuF,EAAQiX,EAAgBoY,GACxBd,EAAM3P,EAAK0Q,GAEPtvB,EAAMhgE,MAAQuuF,EAAIvuF,IACpB,MAGEuuF,EAAIvuF,IAAMggE,EAAMhgE,IAGlBqvF,KAMFC,IACAv6F,GAAcw5F,EAAIx5F,WAClBm5F,GAAYK,EAAIL,SAChB36G,GAAYg7G,EAAIh7G,UAGlB,OAAiB,IAAb+7G,EAEK1Q,EAGL0Q,IAAa1Q,EAAK9sG,OAEb,MAGTs8G,EAAcxP,EAAKhvG,MAAM0/G,GACzBlB,EAAYr5F,WAAaA,EACzBq5F,EAAY76G,SAAWA,EACvB66G,EAAYF,SAAWA,EACvBE,EAAYpuF,IAAMouF,EAAY,GAAGpuF,IACjCouF,EAAYntF,IAAMmtF,EAAY,GAAGntF,IAE1BmtF,IAKTx7G,KAAKy7G,gBAAkB,SAASzP,GAC9B,IAAIyQ,EAAYC,EAAUtvB,EAAOuuB,EAAKgB,EAAeC,EAmCjDC,EAjCJJ,EAAapY,EAAgBnlG,OAAS,EACtCw9G,EAAW1Q,EAAK9sG,OAAS,EACzBy9G,EAAgB,KAChBC,GAAa,EAEb,MAAOH,GAAc,GAAKC,GAAY,EAAG,CAIvC,GAHAtvB,EAAQiX,EAAgBoY,GACxBd,EAAM3P,EAAK0Q,GAEPtvB,EAAMhgE,MAAQuuF,EAAIvuF,IAAK,CACzBwvF,GAAa,EACb,MAGExvB,EAAMhgE,IAAMuuF,EAAIvuF,IAClBqvF,KAIEA,IAAepY,EAAgBnlG,OAAS,IAI1Cy9G,EAAgBD,GAGlBA,KAGF,IAAKE,GAAgC,OAAlBD,EACjB,OAAO,KAWT,GALEE,EADED,EACUF,EAEAC,EAGI,IAAdE,EACF,OAAO7Q,EAGT,IAAIwP,EAAcxP,EAAKhvG,MAAM6/G,GACzBlxG,EAAW6vG,EAAYpvG,QAAO,SAAS0wG,EAAOnB,GAIhD,OAHAmB,EAAM36F,YAAcw5F,EAAIx5F,WACxB26F,EAAMn8G,UAAYg7G,EAAIh7G,SACtBm8G,EAAMxB,UAAYK,EAAIL,SACfwB,IACN,CAAE36F,WAAY,EAAGxhB,SAAU,EAAG26G,SAAU,IAQ3C,OANAE,EAAYr5F,WAAaxW,EAASwW,WAClCq5F,EAAY76G,SAAWgL,EAAShL,SAChC66G,EAAYF,SAAW3vG,EAAS2vG,SAChCE,EAAYpuF,IAAMouF,EAAY,GAAGpuF,IACjCouF,EAAYntF,IAAMmtF,EAAY,GAAGntF,IAE1BmtF,GAGTx7G,KAAKokG,cAAgB,SAAS2Y,GAC5B1Y,EAAkB0Y,IAItBthH,EAAmBmH,UAAY,IAAI0rB,EAOnC0qF,EAAiB,SAAS/tG,EAAOnC,GACP,kBAAbA,EAAKskB,WACsB3wB,IAAhCwO,EAAMssF,kBAAkBnqE,MAC1BniB,EAAMssF,kBAAkBnqE,IAAMtkB,EAAKskB,UAGT3wB,IAAxBwO,EAAM2vG,cACR3vG,EAAM2vG,cAAgB9xG,EAAKskB,IAE3BniB,EAAM2vG,cAAgBvwG,KAAKoZ,IAAIxY,EAAM2vG,cAAe9xG,EAAKskB,UAG/B3wB,IAAxBwO,EAAM+xG,cACR/xG,EAAM+xG,cAAgBl0G,EAAKskB,IAE3BniB,EAAM+xG,cAAgB3yG,KAAKijB,IAAIriB,EAAM+xG,cAAel0G,EAAKskB,MAIrC,kBAAbtkB,EAAKulB,WACsB5xB,IAAhCwO,EAAMssF,kBAAkBlpE,MAC1BpjB,EAAMssF,kBAAkBlpE,IAAMvlB,EAAKulB,UAGT5xB,IAAxBwO,EAAM0vG,cACR1vG,EAAM0vG,cAAgB7xG,EAAKulB,IAE3BpjB,EAAM0vG,cAAgBtwG,KAAKoZ,IAAIxY,EAAM0vG,cAAe7xG,EAAKulB,UAG/B5xB,IAAxBwO,EAAMgyG,cACRhyG,EAAMgyG,cAAgBn0G,EAAKulB,IAE3BpjB,EAAMgyG,cAAgB5yG,KAAKijB,IAAIriB,EAAMgyG,cAAen0G,EAAKulB,OAS/D4qF,EAAe,SAAShuG,UACfA,EAAM0vG,qBACN1vG,EAAMgyG,qBACNhyG,EAAM2vG,qBACN3vG,EAAM+xG,eAQf9D,EAAoC,SAASjuG,GAC3C,IACEs+E,EACAz/D,EAGAozF,EAA2BjyG,EAAM0vG,cAAgB1vG,EAAMssF,kBAAkBlpE,IAoB3E,OAhBAk7D,EAAsBt+E,EAAMssF,kBAAkBhO,oBAG9CA,GAAuB2zB,EAGvB3zB,EAAsBl/E,KAAKijB,IAAI,EAAGi8D,GAEf,UAAft+E,EAAM7B,OAGR0gB,EAAQ7e,EAAMmyB,WAAad,EAC3BitD,GAAuBz/D,EACvBy/D,EAAsBl/E,KAAK6F,MAAMq5E,IAG5BA,GAQT4b,EAAiB,SAAS3mF,EAAS6mF,GAIjCrlG,KAAKolG,eAAiB,EACtBplG,KAAKqlG,eAAiBA,EAEO,qBAAlB7mF,EAAQsuF,MACjB9sG,KAAKm9G,cAAgB3+F,EAAQsuF,MAE7B9sG,KAAKm9G,aAAc,EAGrBn9G,KAAK0lG,cAAgB,GACrB1lG,KAAKslG,WAAa,KAClBtlG,KAAKo9G,aAAe,GACpBp9G,KAAKwlG,gBAAkB,GACvBxlG,KAAKylG,gBAAkB,GACvBzlG,KAAKq9G,aAAe,EACpBr9G,KAAKs9G,cAAgB,EAErBnY,EAAeviG,UAAUof,KAAKlf,KAAK9C,MAGnCA,KAAKsI,KAAO,SAASs9F,GAGnB,OAAIA,EAAOp6F,KACFxL,KAAKwlG,gBAAgBl9F,KAAKs9F,GAG/BA,EAAO95F,OACF9L,KAAKylG,gBAAgBn9F,KAAKs9F,IAMnC5lG,KAAK0lG,cAAcp9F,KAAKs9F,EAAO36F,OAC/BjL,KAAKo9G,aAAa90G,KAAKs9F,EAAO1d,OAC9BloF,KAAKq9G,cAAgBzX,EAAO1d,MAAM/lE,WAER,UAAtByjF,EAAO36F,MAAM7B,OACfpJ,KAAKslG,WAAaM,EAAO36F,YAED,UAAtB26F,EAAO36F,MAAM7B,OACfpJ,KAAKulG,WAAaK,EAAO36F,WAK/Bk6F,EAAeviG,UAAY,IAAI0rB,EAC/B62E,EAAeviG,UAAUwf,MAAQ,SAAS2/E,GACxC,IAQE/2F,EACA66F,EACApmE,EAEAj9B,EAXA8D,EAAS,EACToQ,EAAQ,CACN2V,SAAU,GACV05E,eAAgB,GAChBp6F,SAAU,GACV8iC,KAAM,IAKRq3D,EAAmB,EAGrB,GAAI9lG,KAAK0lG,cAAcxmG,OAASc,KAAKolG,eAAgB,CACnD,GAAoB,uBAAhBrD,GACgB,uBAAhBA,EAIF,OACK,GAAI/hG,KAAKm9G,YAGd,OACK,GAAkC,IAA9Bn9G,KAAK0lG,cAAcxmG,OAa5B,OANAc,KAAKs9G,qBAEDt9G,KAAKs9G,eAAiBt9G,KAAKolG,iBAC7BplG,KAAKmG,QAAQ,QACbnG,KAAKs9G,cAAgB,IAuC3B,IAjCIt9G,KAAKslG,YACPQ,EAAmB9lG,KAAKslG,WAAW/N,kBAAkBnqE,IACrDmsF,EAAiBxuG,SAAQ,SAASwkC,GAChC74B,EAAM+3B,KAAKc,GAAQvvC,KAAKslG,WAAW/1D,KAClCvvC,OACMA,KAAKulG,aACdO,EAAmB9lG,KAAKulG,WAAWhO,kBAAkBnqE,IACrDksF,EAAiBvuG,SAAQ,SAASwkC,GAChC74B,EAAM+3B,KAAKc,GAAQvvC,KAAKulG,WAAWh2D,KAClCvvC,OAG6B,IAA9BA,KAAK0lG,cAAcxmG,OACrBwX,EAAMtN,KAAOpJ,KAAK0lG,cAAc,GAAGt8F,KAEnCsN,EAAMtN,KAAO,WAGfpJ,KAAKs9G,eAAiBt9G,KAAK0lG,cAAcxmG,OAEzCugC,EAAci4B,EAAIj4B,YAAYz/B,KAAK0lG,eAGnChvF,EAAM+oB,YAAc,IAAIxd,WAAWwd,EAAYtd,YAI/CzL,EAAM+oB,YAAYjY,IAAIiY,GAGtB/oB,EAAM5N,KAAO,IAAImZ,WAAWjiB,KAAKq9G,cAG5B76G,EAAI,EAAGA,EAAIxC,KAAKo9G,aAAal+G,OAAQsD,IACxCkU,EAAM5N,KAAK0e,IAAIxnB,KAAKo9G,aAAa56G,GAAI8D,GACrCA,GAAUtG,KAAKo9G,aAAa56G,GAAG2f,WAKjC,IAAK3f,EAAI,EAAGA,EAAIxC,KAAKwlG,gBAAgBtmG,OAAQsD,IAC3CwI,EAAUhL,KAAKwlG,gBAAgBhjG,GAC/BwI,EAAQK,UAAaL,EAAQutB,SAAWutE,EACxC96F,EAAQK,WAAa,IACrBL,EAAQO,QAAWP,EAAQwtB,OAASstE,EACpC96F,EAAQO,SAAW,IACnBmL,EAAMqvF,eAAe/6F,EAAQE,SAAU,EACvCwL,EAAM2V,SAAS/jB,KAAK0C,GAKtB,IAAKxI,EAAI,EAAGA,EAAIxC,KAAKylG,gBAAgBvmG,OAAQsD,IAC3CqjG,EAAM7lG,KAAKylG,gBAAgBjjG,GAC3BqjG,EAAIh6F,QAAWg6F,EAAIz4E,IAAM04E,EACzBD,EAAIh6F,SAAW,IACf6K,EAAM/K,SAASrD,KAAKu9F,GAItBnvF,EAAM/K,SAASg3F,aAAe3iG,KAAKqlG,eAAe1C,aAGlD3iG,KAAK0lG,cAAcxmG,OAAS,EAC5Bc,KAAKslG,WAAa,KAClBtlG,KAAKo9G,aAAal+G,OAAS,EAC3Bc,KAAKwlG,gBAAgBtmG,OAAS,EAC9Bc,KAAKq9G,aAAe,EACpBr9G,KAAKylG,gBAAgBvmG,OAAS,EAG9Bc,KAAKmG,QAAQ,OAAQuQ,GAGjB1W,KAAKs9G,eAAiBt9G,KAAKolG,iBAC7BplG,KAAKmG,QAAQ,QACbnG,KAAKs9G,cAAgB,IASzB/hH,EAAa,SAASijB,GACpB,IAGE8mF,EACAC,EAHAphG,EAAOnE,KACPu9G,GAAa,EAIfhiH,EAAWqH,UAAUof,KAAKlf,KAAK9C,MAE/Bwe,EAAUA,GAAW,GACrBxe,KAAKupF,oBAAsB/qE,EAAQ+qE,qBAAuB,EAC1DvpF,KAAKw9G,kBAAoB,GAEzBx9G,KAAKy9G,iBAAmB,WACtB,IAAIC,EAAW,GACf19G,KAAKw9G,kBAAoBE,EAEzBA,EAASt0G,KAAO,MAChBs0G,EAASrY,eAAiB,IAAI5N,EAAKE,eAGnC+lB,EAASC,UAAY,IAAIpzB,EACzBmzB,EAASE,6BAA+B,IAAInmB,EAAK5C,wBAAwB,SACzE6oB,EAASG,qCAAuC,IAAIpmB,EAAK5C,wBAAwB,kBACjF6oB,EAASI,WAAa,IAAIrhF,EAC1BihF,EAASK,eAAiB,IAAI5Y,EAAe3mF,EAASk/F,EAASrY,gBAC/DqY,EAASM,eAAiBN,EAASC,UAEnCD,EAASC,UACNz4G,KAAKw4G,EAASE,8BACd14G,KAAKw4G,EAASI,YACjBJ,EAASC,UACNz4G,KAAKw4G,EAASG,sCACd34G,KAAKw4G,EAASrY,gBACdngG,KAAKw4G,EAASK,gBAEjBL,EAASrY,eAAex/F,GAAG,aAAa,SAAS+D,GAC/C8zG,EAASC,UAAUjzB,aAAa9gF,EAAM6gF,cAGxCizB,EAASC,UAAU93G,GAAG,QAAQ,SAASiD,GACnB,mBAAdA,EAAKM,MAA8Bs0G,EAASO,qBAC9C1Y,EAAaA,GAAc,CACzBhO,kBAAmB,CACjBhO,oBAAqBplF,EAAKolF,qBAE5BiO,MAAO,OACPpuF,KAAM,SAGRs0G,EAASK,eAAe3Y,iBACxBsY,EAASO,mBAAqB,IAAIziH,EAAmB+pG,GAErDmY,EAASI,WACN54G,KAAKw4G,EAASO,oBACd/4G,KAAKw4G,EAASK,oBAKrBL,EAASK,eAAel4G,GAAG,OAAQ7F,KAAKmG,QAAQ/E,KAAKpB,KAAM,SAE3D09G,EAASK,eAAel4G,GAAG,OAAQ7F,KAAKmG,QAAQ/E,KAAKpB,KAAM,UAG7DA,KAAKk+G,gBAAkB,WACrB,IAAIR,EAAW,GACf19G,KAAKw9G,kBAAoBE,EAEzBA,EAASt0G,KAAO,KAChBs0G,EAASrY,eAAiB,IAAI5N,EAAKE,eAGnC+lB,EAASS,aAAe,IAAI1mB,EAAKhD,sBACjCipB,EAASz4G,YAAc,IAAIwyF,EAAK/C,qBAChCgpB,EAASU,iBAAmB,IAAI3mB,EAAK9C,iBACrC+oB,EAASW,6BAA+B,IAAI5mB,EAAK5C,wBAAwB,SACzE6oB,EAASE,6BAA+B,IAAInmB,EAAK5C,wBAAwB,SACzE6oB,EAASG,qCAAuC,IAAIpmB,EAAK5C,wBAAwB,kBACjF6oB,EAASI,WAAa,IAAIrhF,EAC1BihF,EAASY,WAAa,IAAIrY,EAC1ByX,EAAS3Z,cAAgB,IAAItM,EAAKljE,cAClCmpF,EAASK,eAAiB,IAAI5Y,EAAe3mF,EAASk/F,EAASrY,gBAC/DqY,EAASM,eAAiBN,EAASS,aAGnCT,EAASS,aACNj5G,KAAKw4G,EAASz4G,aACdC,KAAKw4G,EAASU,kBAIjBV,EAASU,iBACNl5G,KAAKw4G,EAASW,8BACdn5G,KAAKw4G,EAASY,YACjBZ,EAASU,iBACNl5G,KAAKw4G,EAASE,8BACd14G,KAAKw4G,EAASI,YAEjBJ,EAASU,iBACNl5G,KAAKw4G,EAASG,sCACd34G,KAAKw4G,EAASrY,gBACdngG,KAAKw4G,EAASK,gBAGjBL,EAASY,WAAWp5G,KAAKw4G,EAAS3Z,eAC/B7+F,KAAKw4G,EAASK,gBAEjBL,EAASU,iBAAiBv4G,GAAG,QAAQ,SAASiD,GAC5C,IAAItG,EAEJ,GAAkB,aAAdsG,EAAKM,KAAqB,CAC5B5G,EAAIsG,EAAKg8C,OAAO5lD,OAGhB,MAAOsD,IACA8iG,GAAsC,UAAxBx8F,EAAKg8C,OAAOtiD,GAAG4G,KAGtBm8F,GAAsC,UAAxBz8F,EAAKg8C,OAAOtiD,GAAG4G,OACvCm8F,EAAaz8F,EAAKg8C,OAAOtiD,GACzB+iG,EAAWhO,kBAAkBhO,oBAAsBplF,EAAKolF,sBAJxD+b,EAAax8F,EAAKg8C,OAAOtiD,GACzB8iG,EAAW/N,kBAAkBhO,oBAAsBplF,EAAKolF,qBAQxD+b,IAAeoY,EAASa,qBAC1Bb,EAASK,eAAe3Y,iBACxBsY,EAASa,mBAAqB,IAAI9iH,EAAmB6pG,EAAY9mF,GAEjEk/F,EAASa,mBAAmB14G,GAAG,qBAAqB,SAAS0xF,GAIvDgO,IACFA,EAAWhO,kBAAoBA,EAK/BmmB,EAASO,mBAAmBnE,eAAeviB,EAAkBlpE,SAIjEqvF,EAASa,mBAAmB14G,GAAG,oBAC7B1B,EAAKgC,QAAQ/E,KAAK+C,EAAM,YAE1Bu5G,EAASa,mBAAmB14G,GAAG,uBAAuB,SAAS0jF,GACzDgc,GACFmY,EAASO,mBAAmBjE,4BAA4BzwB,MAK5Dm0B,EAASY,WACNp5G,KAAKw4G,EAASa,oBACdr5G,KAAKw4G,EAASK,iBAGfxY,IAAemY,EAASO,qBAE1BP,EAASK,eAAe3Y,iBACxBsY,EAASO,mBAAqB,IAAIziH,EAAmB+pG,GAGrDmY,EAASI,WACN54G,KAAKw4G,EAASO,oBACd/4G,KAAKw4G,EAASK,qBAMvBL,EAASK,eAAel4G,GAAG,OAAQ7F,KAAKmG,QAAQ/E,KAAKpB,KAAM,SAE3D09G,EAASK,eAAel4G,GAAG,OAAQ7F,KAAKmG,QAAQ/E,KAAKpB,KAAM,UAI7DA,KAAKikG,uBAAyB,SAAS1a,GACrC,IAAIm0B,EAAW19G,KAAKw9G,kBAEpBx9G,KAAKupF,oBAAsBA,EACvBgc,IACFA,EAAWhO,kBAAkBlpE,SAAM5xB,EACnC8oG,EAAWhO,kBAAkBnqE,SAAM3wB,EACnCw8G,EAAa1T,GACbA,EAAWhO,kBAAkBhO,oBAAsBA,EAC/Cm0B,EAASE,8BACXF,EAASE,6BAA6Bv1G,iBAGtCi9F,IACEoY,EAASa,qBACXb,EAASa,mBAAmBxD,UAAY,GACxC2C,EAASW,6BAA6Bh2G,iBAExCi9F,EAAW/N,kBAAkBlpE,SAAM5xB,EACnC6oG,EAAW/N,kBAAkBnqE,SAAM3wB,EACnCw8G,EAAa3T,GACboY,EAAS3Z,cAAcpvE,QACvB2wE,EAAW/N,kBAAkBhO,oBAAsBA,GAGjDm0B,EAASG,sCACXH,EAASG,qCAAqCx1G,iBAIlDrI,KAAKkkG,oBAAsB,SAAS1nE,GAC9B+oE,GACFvlG,KAAKw9G,kBAAkBS,mBAAmB/Z,oBAAoB1nE,IAIlEx8B,KAAKokG,cAAgB,SAASC,GACxBiB,GAActlG,KAAKw9G,kBAAkBe,oBACvCv+G,KAAKw9G,kBAAkBe,mBAAmBna,cAAcC,IAK5DrkG,KAAKsI,KAAO,SAASQ,GACnB,GAAIy0G,EAAY,CACd,IAAIiB,EAAQ/jB,EAAgB3xF,GAExB01G,GAAyC,QAAhCx+G,KAAKw9G,kBAAkBp0G,KAClCpJ,KAAKy9G,mBACKe,GAAyC,OAAhCx+G,KAAKw9G,kBAAkBp0G,MAC1CpJ,KAAKk+G,kBAEPX,GAAa,EAEfv9G,KAAKw9G,kBAAkBQ,eAAe11G,KAAKQ,IAI7C9I,KAAKoiB,MAAQ,WACTm7F,GAAa,EAEfv9G,KAAKw9G,kBAAkBQ,eAAe57F,SAIxCpiB,KAAKqiB,cAAgB,WACfriB,KAAKw9G,kBAAkBzZ,eACzB/jG,KAAKw9G,kBAAkBzZ,cAAcpvE,UAK3Cp5B,EAAWqH,UAAY,IAAI0rB,EAE3BlzB,EAAOC,QAAU,CACfE,WAAYA,EACZE,mBAAoBA,EACpBD,mBAAoBA,EACpB89G,iBAAkBA,EAClBC,iBAAkBA,I,kCCt6CpB,SAASx1G,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAJhHpI,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIwkC,EAAc,EAAQ,QActBk+E,EAAiB,SAAwBC,EAAQC,EAAaC,GAChE,OAAO,SAAU9vE,GACf,IAAIpwC,EAAWggH,EAAOvgH,OAAOK,UAAUmgH,GACnCE,GAAe,EAAIt+E,EAAYxhC,gBAAgBL,GAC/CogH,GAAmB,EAAIv+E,EAAYthC,WAAWP,GAElD,MAAsB,qBAAXowC,EACFgwE,GAGLhwE,SACKpwC,EAASw3C,SAEhBx3C,EAASw3C,UAAW,EAGlBpH,IAAWgwE,GAAqBD,IAElCD,IACI9vE,EACF4vE,EAAOv4G,QAAQ,oBAEfu4G,EAAOv4G,QAAQ,sBAGZ2oC,KAYPiwE,EAAiB,SAASA,EAAeC,EAAYtgH,EAAUmL,GACjE9F,EAAgB/D,KAAM++G,GAGtB,IAAIE,EAAqBD,EAAWE,0BAA0BC,mBAAmB/9G,KAAK49G,EAAWE,2BAGjG,GAAIxgH,EAASjB,WAAWO,WAAY,CAClC,IAAIgtG,EAAatsG,EAASjB,WAAWO,WAErCgC,KAAK/B,MAAQ+sG,EAAW/sG,MACxB+B,KAAKrB,OAASqsG,EAAWrsG,OAG3BqB,KAAKpB,UAAYF,EAASjB,WAAWC,UAIrCsC,KAAK6J,GAAKA,EAIV7J,KAAKupD,QAAUk1D,EAAeO,EAAWxgH,UAAWE,EAASqI,IAAKk4G,IAWhEG,EAA0B,SAAiCJ,GAC7D,IAAIxgH,EAAYwgH,EAAWxgH,UAG3BwgH,EAAWK,gBAAkB,WAC3B,OAAO7gH,EAAUL,OAAOK,UAAUK,QAAO,SAAU0I,GACjD,QAAQ,EAAIg5B,EAAYxhC,gBAAgBwI,MACvC9I,KAAI,SAAU4Y,EAAG7U,GAClB,OAAO,IAAIu8G,EAAeC,EAAY3nG,EAAGA,EAAEtQ,UAKjD1L,EAAQ,WAAa+jH,EACrBhkH,EAAOC,QAAUA,EAAQ,Y,kCCxGzB,IASEE,EACAE,EACAD,EACA8jH,EACA5xF,EACA6xF,EAdEjxF,EAAS,EAAQ,QACjB28E,EAAS,EAAQ,QACjBxT,EAAO,EAAQ,QACfh7D,EAAa,EAAQ,QACrBwpE,EAAa,EAAQ,QAAkBA,WACvCd,EAAiB,EAAQ,QACzBsF,EAAU,EAAQ,QAetB6U,EAAsB,SAASr0G,EAAOnC,GACZ,kBAAbA,EAAKskB,WACsB3wB,IAAhCwO,EAAMssF,kBAAkBnqE,IAC1BniB,EAAMssF,kBAAkBnqE,IAAMtkB,EAAKskB,IAEnCniB,EAAMssF,kBAAkBnqE,IACtB/iB,KAAKoZ,IAAIxY,EAAMssF,kBAAkBnqE,IAAKtkB,EAAKskB,MAIzB,kBAAbtkB,EAAKulB,WACsB5xB,IAAhCwO,EAAMssF,kBAAkBlpE,IAC1BpjB,EAAMssF,kBAAkBlpE,IAAMvlB,EAAKulB,IAEnCpjB,EAAMssF,kBAAkBlpE,IACtBhkB,KAAKoZ,IAAIxY,EAAMssF,kBAAkBlpE,IAAKvlB,EAAKulB,OAKnDX,EAAc,SAASziB,EAAOmiB,GAC5B,IACEnnB,EAAM,IAAIglG,EAAOA,EAAOI,cAS1B,OAPAplG,EAAIooB,IAAMjB,EACVnnB,EAAImnB,IAAMA,EAEVnnB,EAAIqlG,oBAAoB,eAAgB,GACxCrlG,EAAIqlG,oBAAoB,QAASrgG,EAAMhN,OACvCgI,EAAIqlG,oBAAoB,SAAUrgG,EAAMtM,QAEjCsH,GAGTs5G,EAAe,SAASt0G,EAAOmiB,GAC7B,IACE5qB,EACAyD,EAAM,IAAIglG,EAAOA,EAAOuU,WAAW,GAerC,IAbAv5G,EAAIooB,IAAMjB,EACVnnB,EAAImnB,IAAMA,EAEVnnB,EAAIw5G,UAAU,GACdx5G,EAAIw5G,UAAUx0G,EAAM49E,YACpB5iF,EAAIw5G,UAAUx0G,EAAM69E,sBACpB7iF,EAAIw5G,UAAUx0G,EAAM89E,UACpB9iF,EAAIw5G,UAAU,KACdx5G,EAAIw5G,UAAU,KACdx5G,EAAIy5G,WAAWz0G,EAAMw9E,IAAI,GAAGvpF,QAC5B+G,EAAI05G,WAAW10G,EAAMw9E,IAAI,IAEzBxiF,EAAIw5G,UAAUx0G,EAAMy9E,IAAIxpF,QACnBsD,EAAI,EAAGA,EAAIyI,EAAMy9E,IAAIxpF,SAAUsD,EAClCyD,EAAIy5G,WAAWz0G,EAAMy9E,IAAIlmF,GAAGtD,QAC5B+G,EAAI05G,WAAW10G,EAAMy9E,IAAIlmF,IAG3B,OAAOyD,GAOTzK,EAAqB,SAASyP,GAC5B,IAGE20G,EAFAlG,EAAa,GACbmG,EAAiB,GAGnBrkH,EAAmBoH,UAAUof,KAAKlf,KAAK9C,MAEvCA,KAAKsI,KAAO,SAASQ,GACnBw2G,EAAoBr0G,EAAOnC,GAEvBmC,IACFA,EAAMiyB,gBAAkBp0B,EAAKo0B,gBAC7BjyB,EAAMkyB,aAAer0B,EAAKq0B,aAC1BlyB,EAAMmyB,WAAat0B,EAAKs0B,WACxBnyB,EAAMoyB,uBAAyBv0B,EAAKu0B,uBACpCpyB,EAAMqyB,WAAax0B,EAAKw0B,WACxBryB,EAAM60G,UAAa70G,EAAMiyB,iBAAmB,GACzBjyB,EAAMoyB,wBAA0B,EAChCpyB,EAAMkyB,cAAgB,GAG3Cr0B,EAAKskB,IAAM/iB,KAAK4G,MAAMnI,EAAKskB,IAAM,IACjCtkB,EAAKulB,IAAMhkB,KAAK4G,MAAMnI,EAAKulB,IAAM,IAGjCqrF,EAAWpxG,KAAKQ,IAGlB9I,KAAKoiB,MAAQ,WACX,IAAIk5E,EAAcykB,EAAWC,EAAa/yF,EAAO,IAAIw9E,EAErD,GAA0B,IAAtBiP,EAAWx6G,OAAf,CAKA8gH,GAAez1G,IAEf,MAAOmvG,EAAWx6G,OAChBo8F,EAAeoe,EAAWhtF,QAGtBmzF,EAAe3gH,QAAUo8F,EAAaluE,KAAOyyF,EAAe,KAC9DG,EAAcH,EAAenzF,QAC7B1sB,KAAKigH,kBAAkBhzF,EAAM+yF,KAM3B/0G,EAAM60G,YAAcF,GAAgBtkB,EAAaluE,IAAM4yF,GAAe,OACxEhgH,KAAKigH,kBAAkBhzF,EAAMquE,EAAaluE,KAC1CwyF,EAAe30G,EAAM60G,UACrBE,EAAc1kB,EAAaluE,KAG7B2yF,EAAY,IAAI9U,EAAOA,EAAOiV,WAC9BH,EAAU3yF,IAAMkuE,EAAaluE,IAC7B2yF,EAAU1xF,IAAMitE,EAAajtE,IAE7B0xF,EAAUJ,WAAWrkB,EAAaxyF,MAElCmkB,EAAK3kB,KAAKy3G,EAAUxU,YAGtBsU,EAAe3gH,OAAS,EACxB0gH,EAAe,KACf5/G,KAAKmG,QAAQ,OAAQ,CAAC8E,MAAOA,EAAOgiB,KAAMA,EAAK47B,OAE/C7oD,KAAKmG,QAAQ,OAAQ,2BArCnBnG,KAAKmG,QAAQ,OAAQ,uBAwCzBnG,KAAKigH,kBAAoB,SAAShzF,EAAMG,GACtC,IAAI2yF,EAEJA,EAAY,IAAI9U,EAAOA,EAAOI,cAI9B0U,EAAU3yF,IAAMA,EAChB2yF,EAAU1xF,IAAMjB,EAGhB2yF,EAAUzU,oBAAoB,eAAgB,IAC9CyU,EAAUI,qBAAqB,SAAiC,IAAvBl1G,EAAMkyB,cAC/C4iF,EAAUzU,oBAAoB,kBAAmBrgG,EAAMmyB,YAEvD2iF,EAAUzU,oBAAoB,kBAAmB,IAEjDr+E,EAAK3kB,KAAKy3G,EAAUxU,YAEpBwU,EAAY,IAAI9U,EAAOA,EAAOiV,WAAW,GAIzCH,EAAU3yF,IAAMA,EAChB2yF,EAAU1xF,IAAMjB,EAEhB2yF,EAAUj4B,KAAKs4B,UAAUL,EAAUznG,SAAUrN,EAAM60G,WACnDC,EAAUznG,UAAY,EACtBynG,EAAU7gH,OAASmL,KAAKijB,IAAIyyF,EAAU7gH,OAAQ6gH,EAAUznG,UAExD2U,EAAK3kB,KAAKy3G,EAAUxU,aAGtBvrG,KAAKqgH,gBAAkB,SAASjzF,GAC9ByyF,EAAev3G,KAAK8kB,KAGxB5xB,EAAmBoH,UAAY,IAAI0rB,EAMnC7yB,EAAqB,SAASwP,GAC5B,IAEEwhE,EACA6zC,EAFAzF,EAAW,GAGbp/G,EAAmBmH,UAAUof,KAAKlf,KAAK9C,MAEvCA,KAAKugH,YAAc,SAAStzF,EAAMrjB,GAChC,GAAKA,EAAL,CAKA,GAAI6iE,GAAUxhE,GAASA,EAAMu1G,cACxB52G,EAAM6jB,UAA4B,IAAhBR,EAAK/tB,QAAe,CAEzC,IAAIuhH,EAAU/yF,EAAY++C,EAAQ7iE,EAAMykB,KAAKk9E,WACzCmV,EAAWnB,EAAat0G,EAAOrB,EAAMykB,KAAKk9E,WAE9CkV,EAAQ/yF,YAAcgzF,EAAShzF,aAAc,EAE7CT,EAAK3kB,KAAKm4G,GACVxzF,EAAK3kB,KAAKo4G,GACVz1G,EAAMu1G,aAAc,EAEpBxgH,KAAKmG,QAAQ,WAAYyD,EAAMykB,KAGjCzkB,EAAM+2G,aACN1zF,EAAK3kB,KAAKsB,EAAM2hG,YAChB+U,EAAY,OAGdtgH,KAAKsI,KAAO,SAASQ,GACnBw2G,EAAoBr0G,EAAOnC,GAE3BA,EAAKskB,IAAM/iB,KAAK4G,MAAMnI,EAAKskB,IAAM,IACjCtkB,EAAKulB,IAAMhkB,KAAK4G,MAAMnI,EAAKulB,IAAM,IAGjCwsF,EAASvyG,KAAKQ,IAGhB9I,KAAKoiB,MAAQ,WACX,IACEg6F,EACAnvF,EAAO,IAAIw9E,EAIb,MAAOoQ,EAAS37G,OAAQ,CACtB,GAAgC,+BAA5B27G,EAAS,GAAGhmF,YACd,MAEFgmF,EAASnuF,QAIX,GAAwB,IAApBmuF,EAAS37G,OAAb,CAKA,MAAO27G,EAAS37G,OACdk9G,EAAavB,EAASnuF,QAGS,2BAA3B0vF,EAAWvnF,aACb5pB,EAAMu1G,aAAc,EACpB/zC,EAAS2vC,EAAW3vC,OACpBxhE,EAAMhN,MAAQwuE,EAAOxuE,MACrBgN,EAAMtM,OAAS8tE,EAAO9tE,OACtBsM,EAAMw9E,IAAM,CAAC2zB,EAAWtzG,MACxBmC,EAAM49E,WAAapc,EAAOoc,WAC1B59E,EAAM89E,SAAWtc,EAAOsc,SACxB99E,EAAM69E,qBAAuBrc,EAAOqc,qBACpCw3B,EAAUK,cAC0B,2BAA3BvE,EAAWvnF,aACpB5pB,EAAMu1G,aAAc,EACpBv1G,EAAMy9E,IAAM,CAAC0zB,EAAWtzG,MACxBw3G,EAAUK,cAC0B,+BAA3BvE,EAAWvnF,aAChByrF,GACFtgH,KAAKugH,YAAYtzF,EAAMqzF,GAEzBA,EAAY,IAAIrV,EAAOA,EAAOuU,WAC9Bc,EAAUlzF,IAAMgvF,EAAWhvF,IAC3BkzF,EAAUjyF,IAAM+tF,EAAW/tF,MAEI,8CAA3B+tF,EAAWvnF,cAEbyrF,EAAU7yF,UAAW,GAEvB6yF,EAAUK,cAEZL,EAAUM,eACVN,EAAUX,WAAWvD,EAAWtzG,MAE9Bw3G,GACFtgH,KAAKugH,YAAYtzF,EAAMqzF,GAGzBtgH,KAAKmG,QAAQ,OAAQ,CAAC8E,MAAOA,EAAOgiB,KAAMA,EAAK47B,OAG/C7oD,KAAKmG,QAAQ,OAAQ,2BA9CnBnG,KAAKmG,QAAQ,OAAQ,wBAkD3B1K,EAAmBmH,UAAY,IAAI0rB,EAMnC/yB,EAAa,SAASijB,GACpB,IAGE2/F,EAAcl5G,EAAam5G,EAC3BC,EAA8BT,EAC9BC,EACAC,EAAYQ,EACZC,EAAoBN,EAAoBla,EACxCga,EAPA55G,EAAOnE,KASTzE,EAAWqH,UAAUof,KAAKlf,KAAK9C,MAE/Bwe,EAAUA,GAAW,GAGrBxe,KAAKqlG,eAAiB,IAAI5N,EAAKE,eAE/Bn5E,EAAQ6mF,eAAiBrlG,KAAKqlG,eAG9B8Y,EAAe,IAAI1mB,EAAKhD,sBACxBxvF,EAAc,IAAIwyF,EAAK/C,qBACvB0pB,EAAmB,IAAI3mB,EAAK9C,iBAC5B0pB,EAA+B,IAAI5mB,EAAK5C,wBAAwB,SAChE+oB,EAA+B,IAAInmB,EAAK5C,wBAAwB,SAChEgpB,EAAuC,IAAIpmB,EAAK5C,wBAAwB,kBAExEipB,EAAa,IAAIrhF,EACjB6hF,EAAa,IAAIrY,EACjB8X,EAAiB,IAAI5Y,EAAe3mF,GAGpC2/F,EACGj5G,KAAKD,GACLC,KAAKk5G,GAIRA,EACGl5G,KAAKm5G,GACLn5G,KAAKo5G,GACRF,EACGl5G,KAAK04G,GACL14G,KAAK44G,GAERM,EACGl5G,KAAK24G,GACL34G,KAAKlF,KAAKqlG,gBACVngG,KAAK64G,GAERha,EAAgB,IAAItM,EAAKljE,cACzB+pF,EAAWp5G,KAAK6+F,GACb7+F,KAAK64G,GAGRK,EAAiBv4G,GAAG,QAAQ,SAASiD,GACnC,IAAItG,EAAG8iG,EAAYC,EAEnB,GAAkB,aAAdz8F,EAAKM,KAAqB,CAC5B5G,EAAIsG,EAAKg8C,OAAO5lD,OAGhB,MAAOsD,IACuB,UAAxBsG,EAAKg8C,OAAOtiD,GAAG4G,KACjBk8F,EAAax8F,EAAKg8C,OAAOtiD,GACQ,UAAxBsG,EAAKg8C,OAAOtiD,GAAG4G,OACxBm8F,EAAaz8F,EAAKg8C,OAAOtiD,IAKzB8iG,IAAeiZ,IACjBR,EAAe3Y,iBACfmZ,EAAqB,IAAI9iH,EAAmB6pG,GAG5CgZ,EACGp5G,KAAKq5G,GACLr5G,KAAK64G,IAGNxY,IAAe0Y,IAEjBF,EAAe3Y,iBACf6Y,EAAqB,IAAIziH,EAAmB+pG,GAG5CuY,EACG54G,KAAK+4G,GACL/4G,KAAK64G,GAEJQ,GACFA,EAAmB14G,GAAG,WAAYo4G,EAAmBoC,sBAO7DrgH,KAAKsI,KAAO,SAASQ,GACnBq1G,EAAa71G,KAAKQ,IAIpB9I,KAAKoiB,MAAQ,WAEX+7F,EAAa/7F,SAIfpiB,KAAKqiB,cAAgB,WACnB0hF,EAAcpvE,SAIhBopF,EAAel4G,GAAG,QAAQ,SAAS6Q,GACjCvS,EAAKgC,QAAQ,OAAQuQ,MAIvBqnG,EAAel4G,GAAG,QAAQ,WACxB1B,EAAKgC,QAAQ,YAGjB5K,EAAWqH,UAAY,IAAI0rB,EAG3BlzB,EAAOC,QAAUE,G,kCCnbjB,SAASG,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIyN,EAAW,EAAQ,QAEnBF,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAUxCu3G,EAAmB,SAA0BniH,EAAUoiH,GACzD,IAAItkH,EAAS,EACTgG,EAAIs+G,EAAcpiH,EAASgI,cAG3Bkb,EAAUljB,EAASkH,SAASpD,GAIhC,GAAIof,EAAS,CACX,GAA6B,qBAAlBA,EAAQrB,MACjB,MAAO,CAAE/jB,OAAQolB,EAAQrB,MAAOwgG,SAAS,GAE3C,GAA2B,qBAAhBn/F,EAAQ5B,IACjB,MAAO,CACLxjB,OAAQolB,EAAQ5B,IAAM4B,EAAQjhB,SAC9BogH,SAAS,GAIf,MAAOv+G,IAAK,CAEV,GADAof,EAAUljB,EAASkH,SAASpD,GACD,qBAAhBof,EAAQ5B,IACjB,MAAO,CAAExjB,OAAQA,EAASolB,EAAQ5B,IAAK+gG,SAAS,GAKlD,GAFAvkH,GAAUolB,EAAQjhB,SAEW,qBAAlBihB,EAAQrB,MACjB,MAAO,CAAE/jB,OAAQA,EAASolB,EAAQrB,MAAOwgG,SAAS,GAGtD,MAAO,CAAEvkH,OAAQA,EAAQukH,SAAS,IAUhCC,EAAkB,SAAyBtiH,EAAUoiH,GAOvD,IANA,IAAItkH,EAAS,EACTolB,OAAUnlB,EACV+F,EAAIs+G,EAAcpiH,EAASgI,cAIxBlE,EAAI9D,EAASkH,SAAS1G,OAAQsD,IAAK,CAExC,GADAof,EAAUljB,EAASkH,SAASpD,GACC,qBAAlBof,EAAQrB,MACjB,MAAO,CACL/jB,OAAQolB,EAAQrB,MAAQ/jB,EACxBukH,SAAS,GAMb,GAFAvkH,GAAUolB,EAAQjhB,SAES,qBAAhBihB,EAAQ5B,IACjB,MAAO,CACLxjB,OAAQolB,EAAQ5B,IAAMxjB,EACtBukH,SAAS,GAKf,MAAO,CAAEvkH,QAAS,EAAGukH,SAAS,IAgB5BE,EAAmB,SAA0BviH,EAAUoiH,EAAa/3E,GACtE,IAAIm4E,OAAWzkH,EACX0kH,OAAU1kH,EAMd,MAJ2B,qBAAhBqkH,IACTA,EAAcpiH,EAASgI,cAAgBhI,EAASkH,SAAS1G,QAGvD4hH,EAAcpiH,EAASgI,cAClB,GAITw6G,EAAWL,EAAiBniH,EAAUoiH,GAClCI,EAASH,QAIJG,EAAS1kH,QAKlB2kH,EAAUH,EAAgBtiH,EAAUoiH,GAChCK,EAAQJ,QAGHI,EAAQ3kH,OAIV0kH,EAAS1kH,OAASusC,KAkBvBpoC,EAAW,SAAkBjC,EAAUoiH,EAAa/3E,GACtD,IAAKrqC,EACH,OAAO,EAST,GANuB,kBAAZqqC,IACTA,EAAU,GAKe,qBAAhB+3E,EAA6B,CAEtC,GAAIpiH,EAASkK,cACX,OAAOlK,EAASkK,cAIlB,IAAKlK,EAAS8H,QACZ,OAAO+C,EAAe,WAAWgB,SAKrC,OAAO02G,EAAiBviH,EAAUoiH,EAAa/3E,IAGjD1tC,EAAQsF,SAAWA,EAYnB,IAAI8wB,EAAe,SAAsB/yB,EAAUw2F,EAAYC,GAC7D,IAAIisB,EAAY,EAEhB,GAAIlsB,EAAaC,EAAU,CACzB,IAAI1X,EAAO,CAAC0X,EAAUD,GACtBA,EAAazX,EAAK,GAClB0X,EAAW1X,EAAK,GAGlB,GAAIyX,EAAa,EAAG,CAClB,IAAK,IAAI1yF,EAAI0yF,EAAY1yF,EAAI6H,KAAKoZ,IAAI,EAAG0xE,GAAW3yF,IAClD4+G,GAAa1iH,EAASgK,eAExBwsF,EAAa,EAGf,IAAS1yF,EAAI0yF,EAAY1yF,EAAI2yF,EAAU3yF,IACrC4+G,GAAa1iH,EAASkH,SAASpD,GAAG7B,SAGpC,OAAOygH,GAGT/lH,EAAQo2B,aAAeA,EAavB,IAAI4vF,EAAgB,SAAuB3iH,GACzC,IAAKA,EAASkH,SAAS1G,OACrB,OAAO,EAGT,IAAIsD,EAAI9D,EAASkH,SAAS1G,OAAS,EAC/BoiH,EAAkB5iH,EAASkH,SAASpD,GAAG7B,UAAYjC,EAASgK,eAC5D64G,EAAeD,EAA4C,EAA1B5iH,EAASgK,eAE9C,MAAOlG,IAGL,GAFA8+G,GAAmB5iH,EAASkH,SAASpD,GAAG7B,SAEpC2gH,GAAmBC,EACrB,MAIJ,OAAOl3G,KAAKijB,IAAI,EAAG9qB,IAGrBnH,EAAQgmH,cAAgBA,EAcxB,IAAIn4E,EAAc,SAAqBxqC,EAAUqqC,EAASy4E,GACxD,IAAK9iH,IAAaA,EAASkH,SACzB,OAAO,KAET,GAAIlH,EAAS8H,QACX,OAAO7F,EAASjC,GAGlB,GAAgB,OAAZqqC,EACF,OAAO,KAGTA,EAAUA,GAAW,EAErB,IAAI+3E,EAAcU,EAAiBH,EAAc3iH,GAAYA,EAASkH,SAAS1G,OAE/E,OAAO+hH,EAAiBviH,EAAUA,EAASgI,cAAgBo6G,EAAa/3E,IAG1E1tC,EAAQ6tC,YAAcA,EAgBtB,IAAIxqB,EAAW,SAAkBhgB,EAAUqqC,GACzC,IAAIy4E,GAAiB,EACjBlhG,EAAgByoB,GAAW,EAC3B3oB,EAAc8oB,EAAYxqC,EAAUqqC,EAASy4E,GAEjD,OAAoB,OAAhBphG,GACK,EAAI5W,EAASqiB,oBAEf,EAAIriB,EAASqiB,iBAAiBvL,EAAeF,IAGtD/kB,EAAQqjB,SAAWA,EACnB,IAAI+iG,EAAgB,SAAuB7wG,GACzC,OAAOA,EAAMvG,KAAK6F,MAAMU,KAAS,GAG/B8wG,EAAwB,SAA+BC,EAAW/wG,GAEpE,GAAI6wG,EAAc7wG,GAChB,OAAOA,EAAkB,GAAZ+wG,EAKf,IAFA,IAAIC,EAAmBhxG,EAAIqL,WAAWkU,MAAM,KAAK,GAAGjxB,OAE3CsD,EAAI,EAAGA,GAAKo/G,EAAkBp/G,IAAK,CAC1C,IAAIsnB,EAAQzf,KAAK0R,IAAI,GAAIvZ,GACrB0X,EAAOtJ,EAAMkZ,EAEjB,GAAI23F,EAAcvnG,IAAS1X,IAAMo/G,EAC/B,OAAQ1nG,EAAOynG,GAAa73F,IAK9B+3F,EAA4BH,EAAsBtgH,KAAK,KAAM,GAC7D0gH,EAA6BJ,EAAsBtgH,KAAK,MAAO,GAa/D60G,EAAsB,SAA6Bv3G,EAAUgC,EAAaw0F,EAAY7pF,GACxF,IAAI7I,OAAI/F,EACJmlB,OAAUnlB,EACVslH,EAAcrjH,EAASkH,SAAS1G,OAEhC0M,EAAOlL,EAAc2K,EAEzB,GAAIO,EAAO,EAAG,CAGZ,GAAIspF,EAAa,EACf,IAAK1yF,EAAI0yF,EAAa,EAAG1yF,GAAK,EAAGA,IAG/B,GAFAof,EAAUljB,EAASkH,SAASpD,GAC5BoJ,GAAQk2G,EAA2BlgG,EAAQjhB,UACvCiL,EAAO,EACT,MAAO,CACL8mB,WAAYlwB,EACZ6I,UAAWA,EAAYomB,EAAa/yB,EAAUw2F,EAAY1yF,IAOlE,MAAO,CACLkwB,WAAY,EACZrnB,UAAW3K,GAOf,GAAIw0F,EAAa,EAAG,CAClB,IAAK1yF,EAAI0yF,EAAY1yF,EAAI,EAAGA,IAE1B,GADAoJ,GAAQlN,EAASgK,eACbkD,EAAO,EACT,MAAO,CACL8mB,WAAY,EACZrnB,UAAW3K,GAIjBw0F,EAAa,EAKf,IAAK1yF,EAAI0yF,EAAY1yF,EAAIu/G,EAAav/G,IAGpC,GAFAof,EAAUljB,EAASkH,SAASpD,GAC5BoJ,GAAQi2G,EAA0BjgG,EAAQjhB,UACtCiL,EAAO,EACT,MAAO,CACL8mB,WAAYlwB,EACZ6I,UAAWA,EAAYomB,EAAa/yB,EAAUw2F,EAAY1yF,IAMhE,MAAO,CACLkwB,WAAYqvF,EAAc,EAC1B12G,UAAW3K,IAIfrF,EAAQ46G,oBAAsBA,EAQ9B,IAAI+L,EAAgB,SAAuBtjH,GACzC,OAAOA,EAAS0qC,cAAgB1qC,EAAS0qC,aAAe14B,KAAK24B,OAG/DhuC,EAAQ2mH,cAAgBA,EASxB,IAAIjjH,EAAiB,SAAwBL,GAC3C,OAAOA,EAAS0qC,cAAgB1qC,EAAS0qC,eAAiB7+B,KAG5DlP,EAAQ0D,eAAiBA,EAQzB,IAAIE,EAAY,SAAmBP,GACjC,IAAIujH,EAAcD,EAActjH,GAEhC,OAAQA,EAASw3C,WAAa+rE,GAGhC5mH,EAAQ4D,UAAYA,EAQpB,IAAIE,EAAa,SAAoBT,GACnC,OAAOA,EAASw3C,UAGlB76C,EAAQ8D,WAAaA,EAMrB,IAAIsoC,EAAQ,SAAelgC,GACzB,IAAK,IAAI/E,EAAI,EAAGA,EAAI+E,EAAM3B,SAAS1G,OAAQsD,IACzC,GAAI+E,EAAM3B,SAASpD,GAAGG,IACpB,OAAO,EAGX,OAAO,GAGTtH,EAAQosC,MAAQA,EAMhB,IAAIC,EAAS,SAAgBngC,GAC3B,IAAK,IAAI/E,EAAI,EAAGA,EAAI+E,EAAM3B,SAAS1G,OAAQsD,IACzC,GAAI+E,EAAM3B,SAASpD,GAAG/D,IACpB,OAAO,EAGX,OAAO,GAGTpD,EAAQqsC,OAASA,EAYjB,IAAIvmC,EAAe,SAAsBqxE,EAAM9zE,GAC7C,OAAOA,EAASjB,YAAciB,EAASjB,WAAW+0E,IAGpDn3E,EAAQ8F,aAAeA,EAiBvB,IAAIO,EAA6B,SAAoCd,EAAiBhC,EAAWF,GAC/F,IAAI4gG,EAAgB78F,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,EAAIA,UAAU,GAExF,IAAKtB,EAAa,YAAazC,GAC7B,OAAO8rB,IAGT,IAAIxC,EAAOpnB,EAAkBlC,EAASjB,WAAWC,UAEjD,OAAQsqB,EAAuB,EAAhBs3E,GAAqB1gG,GAGtCvD,EAAQqG,2BAA6BA,EAMrC,IAAI+jC,EAA2B,SAAkCtnC,EAAQoJ,GACvE,GAAgC,IAA5BpJ,EAAOK,UAAUU,OACnB,OAAO,EAGT,IAAIgjH,EAAmB36G,EAAM9J,WAAWC,WAAaC,OAAOC,UAE5D,OAMc,IANPO,EAAOK,UAAUK,QAAO,SAAUH,GACvC,QAAKO,EAAUP,KAIPA,EAASjB,WAAWC,WAAa,GAAKwkH,KAC7ChjH,QAGL7D,EAAQoqC,yBAA2BA,EAEnCpqC,EAAQ,WAAa,CACnBsF,SAAUA,EACV+d,SAAUA,EACV2iG,cAAeA,EACfpL,oBAAqBA,EACrBh3G,UAAWA,EACXE,WAAYA,EACZ6iH,cAAeA,EACfjjH,eAAgBA,EAChBmqC,YAAaA,EACbzB,MAAOA,EACPC,OAAQA,EACRvmC,aAAcA,EACdO,2BAA4BA,EAC5B+jC,yBAA0BA,I,kCC5jB5BpqC,EAAQ8mH,IAAM,EAAQ,QACtB9mH,EAAQy9G,MAAQ,EAAQ,S,mBCXxB19G,EAAOC,QAAU,syI,kCCUjB,IAAIu5F,EAAc,EAAQ,QAEtBwtB,EAAW,SAASjtF,GACtB,IAAIihE,EAAkB,GAAZjhE,EAAO,GAGjB,OAFAihE,IAAQ,EACRA,GAAOjhE,EAAO,GACPihE,GAGL+E,EAAiC,SAAShmE,GAC5C,SAAsB,GAAZA,EAAO,KAGfktF,EAAqB,SAASltF,GAChC,IAAI7uB,EAAS,EASb,OAHkB,GAAZ6uB,EAAO,MAAe,EAAK,IAC/B7uB,GAAU6uB,EAAO,GAAK,GAEjB7uB,GAGLq0F,EAAY,SAASxlE,EAAQ2gE,GAC/B,IAAIM,EAAMgsB,EAASjtF,GACnB,OAAY,IAARihE,EACK,MACEA,IAAQN,EACV,MACEA,EACF,MAEF,MAGLT,EAAW,SAASlgE,GACtB,IAAI4lE,EAAOI,EAA+BhmE,GACtC7uB,EAAS,EAAI+7G,EAAmBltF,GAMpC,OAJI4lE,IACFz0F,GAAU6uB,EAAO7uB,GAAU,IAGC,GAAtB6uB,EAAO7uB,EAAS,MAAe,EAAI6uB,EAAO7uB,EAAS,KAGzDgvF,EAAW,SAASngE,GACtB,IAAIqgE,EAAkB,GAClBuF,EAAOI,EAA+BhmE,GACtCmtF,EAAgB,EAAID,EAAmBltF,GAW3C,GATI4lE,IACFunB,GAAiBntF,EAAOmtF,GAAiB,GAQT,EAA5BntF,EAAOmtF,EAAgB,GAA7B,CAIA,IAAItsB,EAAeC,EAAUC,EAE7BF,GAA6C,GAA5B7gE,EAAOmtF,EAAgB,KAAc,EAAIntF,EAAOmtF,EAAgB,GACjFrsB,EAAW,EAAID,EAAgB,EAI/BE,GAAkD,GAA7B/gE,EAAOmtF,EAAgB,MAAe,EAAIntF,EAAOmtF,EAAgB,IAGtF,IAAIh8G,EAAS,GAAK4vF,EAClB,MAAO5vF,EAAS2vF,EAAU,CACxB,IAAIzzF,EAAI8/G,EAAgBh8G,EAExBkvF,GAAiC,GAAhBrgE,EAAO3yB,EAAI,KAAc,EAAI2yB,EAAO3yB,EAAI,IAAM2yB,EAAO3yB,GAItE8D,GAA0D,IAA9B,GAAhB6uB,EAAO3yB,EAAI,KAAc,EAAI2yB,EAAO3yB,EAAI,IAEtD,OAAOgzF,IAGL0F,EAAe,SAAS/lE,EAAQqgE,GAClC,IAAIY,EAAMgsB,EAASjtF,GACf/rB,EAAOosF,EAAgBY,GAC3B,OAAQhtF,GACN,KAAKwrF,EAAYyB,iBACf,MAAO,QACT,KAAKzB,EAAY0B,iBACf,MAAO,QACT,KAAK1B,EAAY2B,qBACf,MAAO,iBACT,QACE,OAAO,OAIT6E,EAAe,SAASjmE,GAC1B,IAAI4lE,EAAOI,EAA+BhmE,GAC1C,IAAK4lE,EACH,OAAO,KAGT,IAAIz0F,EAAS,EAAI+7G,EAAmBltF,GAEpC,GAAI7uB,GAAU6uB,EAAOhT,WAWnB,OAAO,KAGT,IACI40E,EADAD,EAAM,KAuCV,OAjCAC,EAAc5hE,EAAO7uB,EAAS,GAUZ,IAAdywF,IACFD,EAAM,GAINA,EAAI1pE,KAA4B,GAArB+H,EAAO7uB,EAAS,KAAc,IAChB,IAAtB6uB,EAAO7uB,EAAS,MAAe,IACT,IAAtB6uB,EAAO7uB,EAAS,MAAe,IACT,IAAtB6uB,EAAO7uB,EAAS,MAAgB,GACV,IAAtB6uB,EAAO7uB,EAAS,OAAiB,EACpCwwF,EAAI1pE,KAAO,EACX0pE,EAAI1pE,MAA8B,EAAtB+H,EAAO7uB,EAAS,OAAgB,EAC5CwwF,EAAIzoE,IAAMyoE,EAAI1pE,IACI,GAAd2pE,IACFD,EAAIzoE,KAA6B,GAAtB8G,EAAO7uB,EAAS,MAAe,IACjB,IAAtB6uB,EAAO7uB,EAAS,MAAe,IACT,IAAtB6uB,EAAO7uB,EAAS,MAAe,IACT,IAAtB6uB,EAAO7uB,EAAS,MAAe,GACT,IAAtB6uB,EAAO7uB,EAAS,OAAgB,EACnCwwF,EAAIzoE,KAAO,EACXyoE,EAAIzoE,MAA8B,EAAtB8G,EAAO7uB,EAAS,OAAgB,IAGzCwwF,GAGLyrB,EAAmB,SAASn5G,GAC9B,OAAQA,GACN,KAAK,EACH,MAAO,4CACT,KAAK,EACH,MAAO,WACT,KAAK,EACH,MAAO,yBACT,KAAK,EACH,MAAO,yBACT,KAAK,EACH,MAAO,6BACT,QACE,OAAO,OAIToyF,EAA8B,SAASrmE,GASzC,IARA,IAKIqtF,EALAl8G,EAAS,EAAI+7G,EAAmBltF,GAChCstF,EAActtF,EAAO1N,SAASnhB,GAC9Bo8G,EAAS,EACTC,EAAiB,EACjBC,GAAgB,EAIbD,EAAiBF,EAAYtgG,WAAa,EAAGwgG,IAClD,GAAwC,IAApCF,EAAYE,EAAiB,GAAU,CAEzCD,EAASC,EAAiB,EAC1B,MAIJ,MAAOD,EAASD,EAAYtgG,WAG1B,OAAQsgG,EAAYC,IACpB,KAAK,EAEH,GAAgC,IAA5BD,EAAYC,EAAS,GAAU,CACjCA,GAAU,EACV,MACK,GAAgC,IAA5BD,EAAYC,EAAS,GAAU,CACxCA,IACA,MAGEC,EAAiB,IAAMD,EAAS,IAClCF,EAAUD,EAAmD,GAAlCE,EAAYE,EAAiB,IACxC,8CAAZH,IACFI,GAAgB,IAKpB,GACEF,UAC+B,IAAxBD,EAAYC,IAAiBA,EAASD,EAAYvjH,QAC3DyjH,EAAiBD,EAAS,EAC1BA,GAAU,EACV,MACF,KAAK,EAEH,GAAgC,IAA5BD,EAAYC,EAAS,IACO,IAA5BD,EAAYC,EAAS,GAAU,CACjCA,GAAU,EACV,MAGFF,EAAUD,EAAmD,GAAlCE,EAAYE,EAAiB,IACxC,8CAAZH,IACFI,GAAgB,GAElBD,EAAiBD,EAAS,EAC1BA,GAAU,EACV,MACF,QAGEA,GAAU,EACV,MAcJ,OAXAD,EAAcA,EAAYh7F,SAASk7F,GACnCD,GAAUC,EACVA,EAAiB,EAEbF,GAAeA,EAAYtgG,WAAa,IAC1CqgG,EAAUD,EAAmD,GAAlCE,EAAYE,EAAiB,IACxC,8CAAZH,IACFI,GAAgB,IAIbA,GAITxnH,EAAOC,QAAU,CACfs/F,UAAWA,EACXtF,SAAUA,EACVC,SAAUA,EACV6F,+BAAgCA,EAChCD,aAAcA,EACdE,aAAcA,EACdI,4BAA6BA,I,kCCrR/B,IAAIz4F,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAa6N,EAAKunE,EAAKub,GAAO,IAAIvwF,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASgV,EAAK9zB,EAAWq7F,EAAK/0E,EAAWswF,EAAKvwF,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA6O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAAhW,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BoN,EAAMpN,EAAQ20E,EAAMr7F,EAAU42G,EAAMtwF,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE/c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAIg5B,EAAkB,EAAQ,QAE1BC,EAAmB9hC,EAAuB6hC,GAE1C8C,EAAkB,EAAQ,QAE1BC,EAAmB5kC,EAAuB2kC,GAE1CnkC,EAAY,EAAQ,QAEpBC,EAAaT,EAAuBQ,GAEpC2mH,EAAO,EAAQ,QAEfC,EAAQpnH,EAAuBmnH,GAE/BpkF,EAAgB,EAAQ,QAExBC,EAAY,EAAQ,QAEpBqkF,EAAarnH,EAAuBgjC,GAEpCskF,EAA8B,EAAQ,QAEtC5/F,EAAc,EAAQ,QAEtBC,EAAe3nB,EAAuB0nB,GAEtC5Z,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnCy5G,EAA4B,EAAQ,QAEpCjnH,EAAU,EAAQ,QAElBC,EAAWP,EAAuBM,GAElCknH,EAAkB,EAAQ,QAE1BC,EAAmBznH,EAAuBwnH,GAE1C55G,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExC85G,EAAmB,EAAQ,QAE3BC,EAAoB3nH,EAAuB0nH,GAE3CE,EAAuB,EAAQ,QAE/BC,EAAwB7nH,EAAuB4nH,GAE/CE,EAAuB,EAAQ,QAE/BniF,EAAM,CACR5c,eAAgB6b,EAAiB,WACjCkH,SAAUrrC,EAAW,WACrB2iC,UAAWL,EAAcK,UACzB2kF,YAAahlF,EAAcglF,YAC3BzL,QAASv5E,EAAcu5E,QACvBt4E,MAAOqjF,EAAW,WAElBW,2BAA4BF,EAAqBzjH,sBACjD4jH,0BAA2BH,EAAqBxhH,uCAChD1E,yBAA0BkmH,EAAqBlmH,yBAC/CO,0BAA2B2lH,EAAqB3lH,0BAEhDqnB,KAAK,EAAI49F,EAAM,eAIbc,EAAoB,QAGxB,CAAC,qBAAsB,yBAA0B,0BAA2B,wBAAyB,4BAA6B,6BAA8B,sBAAsB74G,SAAQ,SAAUwkC,GACtM1zC,OAAOC,eAAeulC,EAAKkO,EAAM,CAC/BzlC,IAAK,WAEH,OADAL,EAAU,WAAWM,IAAIC,KAAK,aAAeulC,EAAO,kDAC7CtzC,EAAS,WAAWszC,IAE7B/nB,IAAK,SAAazrB,GAChB0N,EAAU,WAAWM,IAAIC,KAAK,aAAeulC,EAAO,kDAE/B,kBAAVxzC,GAAsBA,EAAQ,EACvC0N,EAAU,WAAWM,IAAIC,KAAK,gBAAkBulC,EAAO,uCAIzDtzC,EAAS,WAAWszC,GAAQxzC,QAYlC,IAAI8nH,EAAuB,SAA8BC,EAAe/5E,GAItE,IAHA,IAAI/X,EAAc+X,EAAexiC,QAC7B2kE,GAAiB,EAEZ1pE,EAAI,EAAGA,EAAIshH,EAAc5kH,OAAQsD,IACxC,GAAIshH,EAActhH,GAAGqH,KAAOmoB,EAAYjrB,IAAK,CAC3CmlE,EAAgB1pE,EAChB,MAIJshH,EAAcC,eAAiB73C,EAC/B43C,EAAc39G,QAAQ,CACpB+lE,cAAeA,EACf9iE,KAAM,YAWN46G,EAA0B,SAAiCF,EAAel/F,GAC5EA,EAAIy6F,kBAAkBt0G,SAAQ,SAAUjM,GACtCglH,EAAcG,gBAAgBnlH,MAEhC+kH,EAAqBC,EAAel/F,EAAIpmB,YAK1C6iC,EAAIwyB,cAAgB,WAClB,OAAOpqD,EAAU,WAAWM,IAAIC,KAAK,4EAMvCq3B,EAAI6iF,kBAAoB,WACtB,IAAIjxF,EAAQuK,EAAiB,WAAWjkB,cAAc,SAGtD,IAAK9P,EAAU,WAAWyqD,QAAQ,SAAS6E,cACzC,OAAO,EAIT,IAAIorD,EAAU,CAEd,gCAEA,gBAEA,kBAEA,wBAEA,kBAAmB,gBAAiB,uBAEpC,OAAOA,EAAQ9kE,MAAK,SAAU+kE,GAC5B,MAAQ,kBAAkBh9G,KAAK6rB,EAAM2gC,YAAYwwD,OAtB7B,GA+BxB/iF,EAAI03B,YAAc,WAChB,OAAOtvD,EAAU,WAAWM,IAAIC,KAAK,4EAGvC,IAAI6yC,EAAYpzC,EAAU,WAAWi1C,aAAa,aAa9C2lE,EAAa,SAAW7+D,GAG1B,SAAS6+D,EAAW3hH,EAAQ+b,EAAMD,GAChC,IAAI1Z,EAAQ9E,KAQZ,GANA+D,EAAgB/D,KAAMqkH,GAEtB7hG,EAAK3mB,OAAOkJ,eAAes/G,EAAWzhH,WAAY,cAAe5C,MAAM8C,KAAK9C,KAAMye,EAAMD,EAAQoG,KAI5FnG,EAAKs+B,UAAYt+B,EAAKs+B,SAASu1B,SAAU,CAC3C,IAAIyQ,GAAU,EAAIt5E,EAAU,YAAYgV,EAAKs+B,SAASu1B,UAEjDyQ,EAAQlgF,eAAe,QAC1BhH,OAAOC,eAAeinF,EAAS,MAAO,CACpCj5E,IAAK,WAGH,OAFAL,EAAU,WAAWM,IAAIC,KAAK,2DAC9ByU,EAAKtY,QAAQ,CAAEiD,KAAM,QAAS0E,KAAM,sBAC7BhJ,KAcf,GARA9E,KAAKG,MAAQse,EACbze,KAAKskH,QAAU5hH,EACf1C,KAAK2/F,MAAQ,GACb3/F,KAAKukH,yBAA0B,EAC/BvkH,KAAKwkH,cAIDxkH,KAAK+8C,SAAS0nE,iBAAmBhmG,EAAKk2D,2BAA6Bl2D,EAAKm2D,2BAC1E,MAAM,IAAIr0E,MAAM,4EAKlBP,KAAK6F,GAAG23B,EAAiB,WAAY,CAAC,mBAAoB,yBAA0B,sBAAuB,uBAAuB,SAAU9mB,GAC1I,IAAIqmE,EAAoBv/C,EAAiB,WAAWu/C,mBAAqBv/C,EAAiB,WAAWknF,yBAA2BlnF,EAAiB,WAAWmnF,sBAAwBnnF,EAAiB,WAAWonF,oBAE5M7nC,GAAqBA,EAAkBrrC,SAAS5sC,EAAM3E,MAAM7D,OAC9DwI,EAAMo6G,0BAA0BC,wBAIpCn/G,KAAK6F,GAAG7F,KAAKG,MAAO,WAAW,WACzBH,KAAKukH,wBACPvkH,KAAKukH,yBAA0B,EAIjCvkH,KAAKygB,eAAezgB,KAAKG,MAAMO,kBAEjCV,KAAK6F,GAAG7F,KAAKG,MAAO,SAAS,WACvBH,KAAKk/G,2BACPl/G,KAAKk/G,0BAA0B2F,kBAInC7kH,KAAK6F,GAAG7F,KAAKG,MAAO,OAAQH,KAAK4oC,MA8TnC,OA3XAvkC,EAAUggH,EAAY7+D,GAwEtBziD,EAAashH,EAAY,CAAC,CACxB1hH,IAAK,cACL5G,MAAO,WACL,IAAI4pB,EAAS3lB,KAGbA,KAAK+8C,SAASj4B,gBAAkB9kB,KAAK+8C,SAASj4B,kBAAmB,EAElB,kBAApC9kB,KAAK+8C,SAAStZ,oBACvBzjC,KAAK+8C,SAAStZ,kBAAoB,KAKG,kBAA5BzjC,KAAK+8C,SAASn+C,YACvBoB,KAAK+8C,SAASn+C,UAAYglH,GAK5B5jH,KAAK+8C,SAASrZ,yBAA2B1jC,KAAK+8C,SAASrZ,0BAA4B1jC,KAAK+8C,SAASn+C,YAAcglH,EAG/G,CAAC,kBAAmB,YAAa,2BAA2B74G,SAAQ,SAAU+5G,GACtC,qBAA3Bn/F,EAAO2+F,QAAQQ,KACxBn/F,EAAOo3B,SAAS+nE,GAAUn/F,EAAO2+F,QAAQQ,OAI7C9kH,KAAKpB,UAAYoB,KAAK+8C,SAASn+C,YAQhC,CACD+D,IAAK,MACL5G,MAAO,SAAau7D,GAClB,IAAInxC,EAASnmB,KAGRs3D,IAGLt3D,KAAKwkH,cAELxkH,KAAK+8C,SAAShxC,IAAM/L,KAAKskH,QAAQrnG,IACjCjd,KAAK+8C,SAASt+B,KAAOze,KAAKG,MAC1BH,KAAK+8C,SAASxZ,UAAYlC,EAE1BrhC,KAAKk/G,0BAA4B,IAAI+D,EAA0B5/E,yBAAyBrjC,KAAK+8C,UAC7F/8C,KAAK+kH,iBAAmB,IAAI1B,EAAkB,WAAW55G,EAAU,WAAWia,aAAa1jB,KAAK+8C,SAAU,CACxGr+B,SAAU,WACR,OAAOyH,EAAOzH,eAIlB1e,KAAKk/G,0BAA0Br5G,GAAG,SAAS,WACzC,IAAI2zC,EAAS/vC,EAAU,WAAWq5C,QAAQ38B,EAAOhmB,MAAM48C,SAASu1B,UAEhE94B,EAAOr0B,MAAMgB,EAAO+4F,0BAA0B/5F,UAKhDnlB,KAAKk/G,0BAA0Bx4E,eAAiB1mC,KAAK0mC,eAAiB1mC,KAAK0mC,eAAetlC,KAAKpB,MAAQqhC,EAAIqiF,2BAA2BtiH,KAAKpB,MAE3IA,KAAKk/G,0BAA0Bz4E,sBAAwBpF,EAAIsiF,0BAA0BviH,KAAKpB,MAG1FA,KAAKxB,UAAYwB,KAAKk/G,0BAA0Bh6E,sBAChDllC,KAAKiqB,YAAcjqB,KAAKk/G,0BAA0Bj1F,YAKlDpuB,OAAOmH,iBAAiBhD,KAAM,CAC5B0mC,eAAgB,CACd58B,IAAK,WACH,OAAO9J,KAAKk/G,0BAA0Bx4E,gBAExClf,IAAK,SAAakf,GAChB1mC,KAAKk/G,0BAA0Bx4E,eAAiBA,EAAetlC,KAAKpB,QAGxEk0G,WAAY,CACVpqG,IAAK,WACH,OAAO9J,KAAKk/G,0BAA0Br9E,mBAAmBqyE,WAAWzpE,MAEtEjjB,IAAK,SAAa0sF,GAChBl0G,KAAKk/G,0BAA0Br9E,mBAAmBqyE,WAAWzpE,KAAOypE,EAGpEl0G,KAAKk/G,0BAA0Br9E,mBAAmBqyE,WAAWv/F,MAAQ,IAGzE/V,UAAW,CACTkL,IAAK,WACH,OAAO9J,KAAKk/G,0BAA0Br9E,mBAAmBjjC,WAE3D4oB,IAAK,SAAa5oB,GAChBoB,KAAKk/G,0BAA0Br9E,mBAAmBjjC,UAAYA,EAI9DoB,KAAKk/G,0BAA0Br9E,mBAAmBqyE,WAAa,CAC7DzpE,KAAM,EACN91B,MAAO,KAab1U,gBAAiB,CACf6J,IAAK,WACH,IAAIk7G,EAAe,GAAKhlH,KAAKpB,WAAa,GACtCqmH,OAAgBxoH,EAGlBwoH,EADEjlH,KAAKk0G,WAAa,EACJ,EAAIl0G,KAAKk0G,WAET,EAGlB,IAAIgR,EAAgB76G,KAAK6F,MAAM,GAAK80G,EAAeC,IAEnD,OAAOC,GAET19F,IAAK,WACH/d,EAAU,WAAWM,IAAIob,MAAM,mDAKrCtpB,OAAOmH,iBAAiBhD,KAAK2/F,MAAO,CAClC/gG,UAAW,CACTkL,IAAK,WACH,OAAOqc,EAAOvnB,WAAa,GAE7BuE,YAAY,GAEd6xG,cAAe,CACblrG,IAAK,WACH,OAAOqc,EAAO+4F,0BAA0BiG,kBAAoB,GAE9DhiH,YAAY,GAEd8xG,qBAAsB,CACpBnrG,IAAK,WACH,OAAOqc,EAAO+4F,0BAA0BkG,yBAA2B,GAErEjiH,YAAY,GAEd+xG,sBAAuB,CACrBprG,IAAK,WACH,OAAOqc,EAAO+4F,0BAA0BmG,0BAA4B,GAEtEliH,YAAY,GAEdgyG,qBAAsB,CACpBrrG,IAAK,WACH,OAAOqc,EAAO+4F,0BAA0BoG,yBAA2B,GAErEniH,YAAY,GAEdiyG,sBAAuB,CACrBtrG,IAAK,WACH,OAAOqc,EAAO+4F,0BAA0BqG,0BAA4B,GAEtEpiH,YAAY,GAEd4xG,sBAAuB,CACrBjrG,IAAK,WACH,OAAOqc,EAAO+4F,0BAA0BsG,0BAA4B,GAEtEriH,YAAY,GAEd+kC,mBAAoB,CAClBp+B,IAAK,WACH,OAAOqc,EAAO+4F,0BAA0BuG,uBAAyB,GAEnEtiH,YAAY,KAIhBnD,KAAKG,MAAMwrB,IAAI,UAAW3rB,KAAKk/G,0BAA0B54E,eAAellC,KAAKpB,KAAKk/G,4BAElFl/G,KAAKk/G,0BAA0Br5G,GAAG,wBAAwB,YAExD,EAAIs9G,EAAiB,YAAYh9F,MAKnCnmB,KAAK6F,GAAG7F,KAAKk/G,0BAA2B,YAAY,WAClDl/G,KAAKG,MAAMgG,QAAQ,eAKrBnG,KAAK6F,GAAG7F,KAAKk/G,0BAA2B,aAAa,WACnDl/G,KAAKukH,yBAA0B,KAGjCvkH,KAAKG,MAAM28C,OAAM,WACf,OAAO32B,EAAOu/F,yBAKX1lH,KAAKG,MAAM7D,MAIhB0D,KAAKG,MAAM8c,IAAIxT,EAAU,WAAW2T,IAAIK,gBAAgBzd,KAAKk/G,0BAA0Bj1F,iBASxF,CACDtnB,IAAK,sBACL5G,MAAO,WACL,IAAI0qB,EAASzmB,KAETw5C,EAAS/vC,EAAU,WAAWq5C,QAAQ9iD,KAAKG,MAAM48C,SAASu1B,UAE1D94B,GAAUA,EAAOsqE,gBACnB9jH,KAAK2lH,eAAiBnsE,EAAOsqE,gBAE7B9jH,KAAKk/G,0BAA0Br5G,GAAG,wBAAwB,WACxDm+G,EAAwBv9F,EAAOk/F,eAAgBl/F,MAGjDzmB,KAAKxB,UAAUqH,GAAG,eAAe,WAC/Bg+G,EAAqBp9F,EAAOk/F,eAAgBl/F,EAAOjoB,iBAQxD,CACDmE,IAAK,OACL5G,MAAO,WACLiE,KAAKk/G,0BAA0Bt2E,SAMhC,CACDjmC,IAAK,iBACL5G,MAAO,SAAwB2E,GAC7BV,KAAKk/G,0BAA0Bz+F,eAAe/f,KAM/C,CACDiC,IAAK,WACL5G,MAAO,WACL,OAAOiE,KAAKk/G,0BAA0Bv+G,aAMvC,CACDgC,IAAK,WACL5G,MAAO,WACL,OAAOiE,KAAKk/G,0BAA0BxgG,aAMvC,CACD/b,IAAK,UACL5G,MAAO,WACDiE,KAAK+kH,kBACP/kH,KAAK+kH,iBAAiBjyG,UAEpB9S,KAAKk/G,2BACPl/G,KAAKk/G,0BAA0BpsG,UAE7B9S,KAAK2lH,gBACP3lH,KAAK2lH,eAAe7yG,UAEtB0P,EAAK3mB,OAAOkJ,eAAes/G,EAAWzhH,WAAY,UAAW5C,MAAM8C,KAAK9C,UAIrEqkH,EA5XQ,CA6XdxnE,GAEC+oE,EAAmB,SAASA,EAAiBtiF,GAC/C,MAAO,CACLyxB,gBAAiB,SAAyBjB,GACxC,IAAIt1C,EAAU/b,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,GAAKA,UAAU,GAE/E2gG,EAAe35F,EAAU,WAAWia,aAAaja,EAAU,WAAW+U,QAASA,GAInF,QAAI4kF,EAAax+E,MAAOw+E,EAAax+E,IAAI0e,MAAQ8/D,EAAax+E,IAAI0e,OAASA,IAGpEsiF,EAAiBhyD,YAAYE,EAAO1qD,KAAMg6F,IAEnD5tC,aAAc,SAAsB9yD,EAAQ+b,GAC1C,IAAID,EAAU/b,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,GAAKA,UAAU,GAE/E2gG,EAAe35F,EAAU,WAAWia,aAAaja,EAAU,WAAW+U,QAASA,EAAS,CAAEoG,IAAK,CAAE0e,KAAMA,KAc3G,MAZa,UAATA,GAGF7kB,EAAKkB,YAAW,WACdlB,EAAKtY,QAAQ,eACZ,GAGLsY,EAAKmG,IAAM,IAAIy/F,EAAW3hH,EAAQ+b,EAAM2kF,GACxC3kF,EAAKmG,IAAIM,KAAM,EAAI49F,EAAM,cAEzBrkG,EAAKmG,IAAI3H,IAAIva,EAAOua,KACbwB,EAAKmG,KAEdgvC,YAAa,SAAqBxqD,GAChC,IAAIoV,EAAU/b,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,GAAKA,UAAU,GAE/E2gG,EAAe35F,EAAU,WAAWia,aAAaja,EAAU,WAAW+U,QAASA,GAEnF,OAAIonG,EAAiBhyD,YAAYxqD,EAAMg6F,GAC9B,QAEF,MAKbwiB,EAAiBhyD,YAAc,SAAUxqD,EAAMoV,GAE7C,GAAI/U,EAAU,WAAW8+B,QAAQC,YAAc/+B,EAAU,WAAW8+B,QAAQC,YAAc,GACxF,OAAO,EAGT,IAAIqsC,EAAY,yDAGhB,SAAKr2D,EAAQoG,IAAI6/F,gBAAkBpjF,EAAI6iF,oBAGhCrvC,EAAUztE,KAAKgC,IAGwB,qBAArCK,EAAU,WAAW06B,aAAmE,qBAA7B16B,EAAU,WAAW2T,MACzF3T,EAAU,WAAW06B,YAAc6+E,EAA4B7+E,YAC/D16B,EAAU,WAAW2T,IAAM4lG,EAA4B5lG,KAGzD,IAAIyoG,EAAYp8G,EAAU,WAAWyqD,QAAQ,SAGzC8uD,EAA4B7+E,YAAY2hF,8BAC1Cr8G,EAAU,WAAWyqD,QAAQ,SAASS,sBAAsBixD,EAAiB,SAAU,GAErFr8G,EAAe,WAAW0Y,YAAc4jG,GAC1CA,EAAUlxD,sBAAsBixD,EAAiB,UAGnDn8G,EAAU,WAAW46G,WAAaA,EAClC56G,EAAU,WAAWm8G,iBAAmBA,EACxCn8G,EAAU,WAAW43B,IAAMA,EACtB53B,EAAU,WAAWmsD,KACxBnsD,EAAU,WAAW84C,kBAAkB,MAAOlhB,GAEhD53B,EAAU,WAAWwuD,KAAO50C,EAAa,WACzC5Z,EAAU,WAAW+U,QAAQoG,IAAMnb,EAAU,WAAW+U,QAAQoG,KAAO,GAEnEnb,EAAU,WAAWg4E,eACvBh4E,EAAU,WAAWg4E,eAAe,sBAAuB8hC,EAAsB,YAEjF95G,EAAU,WAAWkO,OAAO,sBAAuB4rG,EAAsB,YAG3EnoH,EAAOC,QAAU,CACfgmC,IAAKA,EACLgjF,WAAYA,EACZuB,iBAAkBA,I,mBC9qBpBxqH,EAAOC,QAAU,0+G,kCCAjB,W,kCCSA,SAASK,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIuN,EAAgB,EAAQ,QAExBC,EAAiB7N,EAAuB4N,GAExCy8G,EAAoB,EAAQ,QAE5BC,EAAqBtqH,EAAuBqqH,GAE5CE,EAAmB,EAAQ,QAE3BC,EAAoBxqH,EAAuBuqH,GAE3Cz8G,EAAW,EAAQ,QAEnBC,EAAY/N,EAAuB8N,GAEnC28G,EAAW,EAMXC,EAAW,CAOb9iF,KAAM,QAMR75B,EAAU,WAAW48G,aAAe,GASpC,IAAIjgE,EAAO,SAAckgE,EAAavoF,GACpC,IAAI9T,EAAcxgB,EAAU,WAAW48G,aAAaC,GAEpD,IAAIr8F,EAGF,MAAM,IAAI1pB,MAAM,qCAFhB0pB,EAAY9jB,QAAQ,CAAEiD,KAAM,aAAc20B,MAAOA,KAYjD+nF,EAA6B,WAC/B,QAASv8G,EAAe,WAAW46B,eAAiB56B,EAAe,WAAW46B,YAAYmG,iBAAmB/gC,EAAe,WAAW46B,YAAYmG,gBAAgB,6CAajKnG,EAAc,SAAqB3lB,GACrC,IAAI/d,EAAWgJ,EAAU,WAAWia,aAAa0iG,EAAU5nG,GAQ3D,GANAxe,KAAKmkC,YAAc,CACjBiiB,KAAMA,EACN0/D,2BAA4BA,GAIR,UAAlBrlH,EAAS6iC,MAAsC,SAAlB7iC,EAAS6iC,MAAmBwiF,IAC3D,OAAO,IAAII,EAAkB,WACxB,GAAIz8G,EAAU,WAAWyqD,QAAQ,SACtC,OAAO,IAAI8xD,EAAmB,WAGhC,MAAM,IAAIzlH,MAAM,qEAGlBlF,EAAQ8oC,YAAcA,EACtBA,EAAYiiB,KAAOA,EACnBjiB,EAAY2hF,2BAA6BA,EAQzC,IAAI1oG,EAAM,CASRK,gBAAiB,SAAyBpC,GACxC,IAAIkrG,EAAkB,yBAClBx6G,OAAMtP,EAGV,OAAI4e,aAAkB6qG,EAAkB,YACtCn6G,EAAMxC,EAAe,WAAW6T,IAAIK,gBAAgBpC,EAAOuyF,oBAC3DvyF,EAAOm2F,KAAOzlG,EACPA,GAIHsP,aAAkB2qG,EAAmB,YAQ3Cj6G,EAAMw6G,EAAkBJ,EAExBA,IAGA18G,EAAU,WAAW48G,aAAat6G,GAAOsP,EAElCtP,IAdLA,EAAMxC,EAAe,WAAW6T,IAAIK,gBAAgBpC,GACpDA,EAAOm2F,KAAOzlG,EACPA,KAgBb1Q,EAAQ+hB,IAAMA,EACd3T,EAAU,WAAW06B,YAAcA,EACnC16B,EAAU,WAAW2T,IAAMA,G,kCC9I3BvhB,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAET,IAAImG,EAAc,WAChB,IAAImgC,EAAS5/B,UAAUvD,QAAU,QAAsBzC,IAAjBgG,UAAU,GAAmB,GAAKA,UAAU,GAE9EjG,EAAS,CACX2tC,WAAY,GAEV6wD,OAASv+F,EAgBb,OAdAD,EAAO2tC,WAAa9H,EAAOlS,MAAM,KAAKjxB,OACtC1C,EAAO2tC,WAAa3tC,EAAO2tC,YAAc,EAGzC6wD,EAAS,2BAA2BxvD,KAAKnJ,GACrC24D,IACFx+F,EAAO4F,WAAa44F,EAAO,GAC3Bx+F,EAAO+kC,yBAA2By5D,EAAO,IAI3Cx+F,EAAOglC,aAAe,8CAA8CgK,KAAKnJ,GACzE7lC,EAAOglC,aAAehlC,EAAOglC,cAAgBhlC,EAAOglC,aAAa,GAE1DhlC,GAETnB,EAAQ6G,YAAcA,G,kCCjCtB,IAAI+oG,EAGJA,EAAS,SAAS7hG,EAAM02G,GACtB,IAgCEt9G,EA7BAgkH,EAAQ,EAKRC,EAAkB,MAIlBC,EAAe,SAASC,EAAKhyG,GAC3B,IACEwX,EACAy6F,EAAYD,EAAIruG,SAAW3D,EACzBiyG,EAAYD,EAAIx6F,MAAMhK,aAM1BgK,EAAQ,IAAIlK,WAAuB,EAAZ2kG,GACvBz6F,EAAM3E,IAAIm/F,EAAIx6F,MAAM1E,SAAS,EAAGk/F,EAAIruG,UAAW,GAC/CquG,EAAIx6F,MAAQA,EACZw6F,EAAI7+B,KAAO,IAAIpgE,SAASi/F,EAAIx6F,MAAMxE,UAIpCk/F,EAAa5b,EAAO4b,YAAc,IAAI5kG,WAAW,QAAQ/iB,QACzD4nH,EAAc7b,EAAO6b,aAAe,IAAI7kG,WAAW,SAAS/iB,QAC5D6nH,EAAoB9b,EAAO8b,mBAAqB,IAAI9kG,WAAW,eAAe/iB,QAGhF,IAAK+rG,EAAO4b,WAAY,CAKtB,IAAKrkH,EAAI,EAAGA,EAAI,QAAQtD,OAAQsD,IAC9BqkH,EAAWrkH,GAAK,QAAQqlF,WAAWrlF,GAErC,IAAKA,EAAI,EAAGA,EAAI,SAAStD,OAAQsD,IAC/BskH,EAAYtkH,GAAK,SAASqlF,WAAWrlF,GAEvC,IAAKA,EAAI,EAAGA,EAAI,eAAetD,OAAQsD,IACrCukH,EAAkBvkH,GAAK,eAAeqlF,WAAWrlF,GAGnDyoG,EAAO4b,WAAaA,EACpB5b,EAAO6b,YAAcA,EACrB7b,EAAO8b,kBAAoBA,EAK7B,OAFA/mH,KAAKytB,UAAW,EAERrkB,GACR,KAAK6hG,EAAOuU,UACVx/G,KAAKd,OAAS,GAEdunH,GAAmB,EACnB,MACF,KAAKxb,EAAOiV,UACVlgH,KAAKd,OAAS,GACdc,KAAKytB,UAAW,EAChB,MACF,KAAKw9E,EAAOI,aACVrrG,KAAKd,OAAS,GACdc,KAAKytB,UAAW,EAChB,MACF,QACE,MAAM,IAAIltB,MAAM,wBAGlBP,KAAKmsB,MAAQ,IAAIlK,WAAWwkG,GAC5BzmH,KAAK8nF,KAAO,IAAIpgE,SAAS1nB,KAAKmsB,MAAMxE,QACpC3nB,KAAKmsB,MAAM,GAAK/iB,EAChBpJ,KAAKsY,SAAWtY,KAAKd,OACrBc,KAAKytB,SAAWqyF,EAGhB9/G,KAAKotB,IAAM,EAEXptB,KAAKquB,IAAM,EAGXruB,KAAK2/G,WAAa,SAASxzF,EAAO7lB,EAAQpH,GACxC,IAEE8gB,EADAO,EAAQja,GAAU,EAEpBpH,EAASA,GAAUitB,EAAMhK,WACzBnC,EAAMO,EAAQrhB,EAEdwnH,EAAa1mH,KAAMd,GACnBc,KAAKmsB,MAAM3E,IAAI2E,EAAM1E,SAASlH,EAAOP,GAAMhgB,KAAKsY,UAEhDtY,KAAKsY,UAAYpZ,EACjBc,KAAKd,OAASmL,KAAKijB,IAAIttB,KAAKd,OAAQc,KAAKsY,WAI3CtY,KAAKy/G,UAAY,SAASuH,GACxBN,EAAa1mH,KAAM,GACnBA,KAAKmsB,MAAMnsB,KAAKsY,UAAY0uG,EAC5BhnH,KAAKsY,WACLtY,KAAKd,OAASmL,KAAKijB,IAAIttB,KAAKd,OAAQc,KAAKsY,WAI3CtY,KAAK0/G,WAAa,SAASuH,GACzBP,EAAa1mH,KAAM,GACnBA,KAAK8nF,KAAKs4B,UAAUpgH,KAAKsY,SAAU2uG,GACnCjnH,KAAKsY,UAAY,EACjBtY,KAAKd,OAASmL,KAAKijB,IAAIttB,KAAKd,OAAQc,KAAKsY,WAK3CtY,KAAKknH,SAAW,SAASxzB,GACvB,OAAO1zF,KAAKmsB,MAAMnsB,KAAKd,OAASw0F,IAMlC1zF,KAAKmnH,YAAc,WACjB,OAAc,IAAVX,EACK,EAGFxmH,KAAKd,QAAUsnH,EAAQ,IAGhCxmH,KAAK4gH,aAAe,WAElB,GAAI4F,EAAQ,EACV,MAAM,IAAIjmH,MAAM,0DAIlBimH,EAAQxmH,KAAKd,OACbc,KAAKd,QAAU,EACfc,KAAKsY,SAAWtY,KAAKd,QAIvBc,KAAK2gH,WAAa,SAASyG,GACzB,IACEC,EACAC,EAGEtnH,KAAKd,SAAWsnH,EAAQ,EAE1BxmH,KAAKd,QAAU,EACNsnH,EAAQ,IACjBa,EAAWb,EAAQ,EACnBc,EAAYtnH,KAAKd,OAASmoH,EAE1BrnH,KAAKsY,SAAWkuG,EAChBxmH,KAAK8nF,KAAKC,UAAU/nF,KAAKsY,SAAUgvG,GACnCtnH,KAAKsY,SAAWtY,KAAKd,OAEjBkoH,GAEFA,EAAa9+G,KAAKtI,KAAKmsB,MAAM1E,SAAS4/F,EAAUA,EAAWC,KAI/Dd,EAAQ,GAQVxmH,KAAKsrG,oBAAsB,SAAS3oG,EAAKwM,GACvC,IAAI3M,EAWJ,GAVAkkH,EAAa1mH,KAAM,EAAI2C,EAAIzD,OAAS,GAGpCc,KAAK8nF,KAAKs4B,UAAUpgH,KAAKsY,SAAU3V,EAAIzD,QACvCc,KAAKsY,UAAY,EAML,UAAR3V,EACF3C,KAAKmsB,MAAM3E,IAAIq/F,EAAY7mH,KAAKsY,UAChCtY,KAAKsY,UAAY,OACZ,GAAY,WAAR3V,EACT3C,KAAKmsB,MAAM3E,IAAIs/F,EAAa9mH,KAAKsY,UACjCtY,KAAKsY,UAAY,OACZ,GAAY,iBAAR3V,EACT3C,KAAKmsB,MAAM3E,IAAIu/F,EAAmB/mH,KAAKsY,UACvCtY,KAAKsY,UAAY,QAEjB,IAAK9V,EAAI,EAAGA,EAAIG,EAAIzD,OAAQsD,IAC1BxC,KAAKmsB,MAAMnsB,KAAKsY,UAAY3V,EAAIklF,WAAWrlF,GAC3CxC,KAAKsY,WAKTtY,KAAKsY,WAGLtY,KAAK8nF,KAAKy/B,WAAWvnH,KAAKsY,SAAUnJ,GACpCnP,KAAKsY,UAAY,EAGjBtY,KAAKd,OAASmL,KAAKijB,IAAIttB,KAAKd,OAAQc,KAAKsY,YACvCkuG,GAIJxmH,KAAKmgH,qBAAuB,SAASx9G,EAAKwM,GACxC,IAAI3M,EAIJ,IAHAkkH,EAAa1mH,KAAM,GACnBA,KAAK8nF,KAAKs4B,UAAUpgH,KAAKsY,SAAU3V,EAAIzD,QACvCc,KAAKsY,UAAY,EACZ9V,EAAI,EAAGA,EAAIG,EAAIzD,OAAQsD,IAE1BkkH,EAAa1mH,KAAM,GACnBA,KAAKmsB,MAAMnsB,KAAKsY,UAAY3V,EAAIklF,WAAWrlF,GAC3CxC,KAAKsY,WAEPouG,EAAa1mH,KAAM,GACnBA,KAAK8nF,KAAKsjB,SAASprG,KAAKsY,SAAU,GAClCtY,KAAKsY,WACLtY,KAAK8nF,KAAKsjB,SAASprG,KAAKsY,SAAUnJ,EAAM,EAAO,GAC/CnP,KAAKsY,WACLtY,KAAKd,OAASmL,KAAKijB,IAAIttB,KAAKd,OAAQc,KAAKsY,YACvCkuG,GAIJxmH,KAAKurG,SAAW,WACd,IACEic,EACAC,EAEF,OAAQznH,KAAKmsB,MAAM,IAEnB,KAAK8+E,EAAOuU,UAGVx/G,KAAKmsB,MAAM,IAAqD,GAA7CnsB,KAAKytB,UAAYqyF,EAAa,GAAO,IACxD9/G,KAAKmsB,MAAM,IAAM2zF,EAAa,EAAO,EAErC0H,EAAWxnH,KAAKotB,IAAMptB,KAAKquB,IAC3BruB,KAAKmsB,MAAM,KAAkB,SAAXq7F,KAA2B,GAC7CxnH,KAAKmsB,MAAM,KAAkB,MAAXq7F,KAA4B,EAC9CxnH,KAAKmsB,MAAM,KAAkB,IAAXq7F,KAA4B,EAC9C,MAEF,KAAKvc,EAAOiV,UACVlgH,KAAKmsB,MAAM,IAAM,IACjBnsB,KAAKmsB,MAAM,IAAM2zF,EAAY,EAAO,EACpC,MAEF,KAAK7U,EAAOI,aACVrrG,KAAKsY,SAAW,GAChBtY,KAAK8nF,KAAKsjB,SAASprG,KAAKsY,SAAU,GAClCtY,KAAKsY,WACLtY,KAAK8nF,KAAKs4B,UAAUpgH,KAAKsY,SAAU,IACnCtY,KAAKsY,UAAY,EAEjBtY,KAAKmsB,MAAM3E,IAAI,CAAC,IAAM,IAAM,GAAM,IAClB,IAAM,GAAM,GAAM,GAClB,IAAM,IAAOxnB,KAAKsY,UAClCtY,KAAKsY,UAAY,GACjBtY,KAAKmsB,MAAMnsB,KAAKsY,UAAY,EAC5BtY,KAAKsY,WACLtY,KAAK8nF,KAAKC,UAAU/nF,KAAKsY,SAAUkuG,GACnCxmH,KAAKsY,SAAWtY,KAAKd,OACrBc,KAAKmsB,MAAM3E,IAAI,CAAC,EAAG,EAAG,GAAIxnB,KAAKsY,UAC/BtY,KAAKsY,UAAY,EACjBtY,KAAKd,OAASc,KAAKsY,SACnB,MA8BF,OA3BAmvG,EAAMznH,KAAKd,OAAS,GAGpBc,KAAKmsB,MAAO,IAAY,SAANs7F,KAAsB,GACxCznH,KAAKmsB,MAAO,IAAY,MAANs7F,KAAuB,EACzCznH,KAAKmsB,MAAO,IAAY,IAANs7F,KAAuB,EAEzCznH,KAAKmsB,MAAO,IAAiB,SAAXnsB,KAAKquB,OAAsB,GAC7CruB,KAAKmsB,MAAO,IAAiB,MAAXnsB,KAAKquB,OAAuB,EAC9CruB,KAAKmsB,MAAO,IAAiB,IAAXnsB,KAAKquB,OAAuB,EAC9CruB,KAAKmsB,MAAO,IAAiB,WAAXnsB,KAAKquB,OAAsB,GAE7CruB,KAAKmsB,MAAO,GAAK,EACjBnsB,KAAKmsB,MAAO,GAAK,EACjBnsB,KAAKmsB,MAAM,IAAM,EAIjBu6F,EAAa1mH,KAAM,GACnBA,KAAK8nF,KAAKC,UAAU/nF,KAAKd,OAAQc,KAAKd,QACtCc,KAAKd,QAAU,EACfc,KAAKsY,UAAY,EAGjBtY,KAAKmsB,MAAQnsB,KAAKmsB,MAAM1E,SAAS,EAAGznB,KAAKd,QACzCc,KAAK0nH,UAAYzc,EAAOyc,UAAU1nH,KAAKmsB,OAEhCnsB,OAIXirG,EAAOiV,UAAY,EACnBjV,EAAOuU,UAAY,EACnBvU,EAAOI,aAAe,GAGtBJ,EAAO0c,aAAe,SAAS1hH,GAC7B,OAAOglG,EAAOiV,YAAcj6G,EAAI,IAIlCglG,EAAO2c,aAAe,SAAS3hH,GAC7B,OAAOglG,EAAOuU,YAAcv5G,EAAI,IAIlCglG,EAAO4c,WAAa,SAAS5hH,GAC3B,OAAOglG,EAAOI,eAAiBplG,EAAI,IAIrCglG,EAAO6c,WAAa,SAAS7hH,GAC3B,OAAIglG,EAAO2c,aAAa3hH,GACH,KAAZA,EAAI,MAGTglG,EAAO0c,aAAa1hH,MAIpBglG,EAAO4c,WAAW5hH,IAQxBglG,EAAOyc,UAAY,SAASzhH,GAC1B,IAAImnB,EAAMnnB,EAAK,IAAM,GAIrB,OAHAmnB,GAAOnnB,EAAK,IAAO,EACnBmnB,GAAOnnB,EAAK,IAAO,EACnBmnB,GAAOnnB,EAAK,IAAM,GACXmnB,GAGThyB,EAAOC,QAAU4vG,G,kCClXjB,IAAIvuG,EAAS,EAAQ,QACjBqrH,EAAa,EAAQ,QACrBC,EAAe,EAAQ,QACvBC,EAAQ,EAAQ,QAcpB,SAASC,EAAarrH,EAAOwyB,GACzB,IAAK,IAAI7sB,EAAI,EAAGA,EAAI3F,EAAMqC,OAAQsD,IAC9B6sB,EAASxyB,EAAM2F,IAIvB,SAAS2lH,EAAQxsH,GACb,IAAI,IAAI6G,KAAK7G,EACT,GAAGA,EAAIkH,eAAeL,GAAI,OAAO,EAErC,OAAO,EAGX,SAAS4lH,EAAWrhH,EAAKyX,EAAS63B,GAC9B,IAAIiuC,EAASv9E,EAYb,OAVIghH,EAAWvpG,IACX63B,EAAW73B,EACQ,kBAARzX,IACPu9E,EAAS,CAACv9E,IAAIA,KAGlBu9E,EAAS2jC,EAAMzpG,EAAS,CAACzX,IAAKA,IAGlCu9E,EAAOjuC,SAAWA,EACXiuC,EAGX,SAAS+jC,EAAUthH,EAAKyX,EAAS63B,GAE7B,OADA73B,EAAU4pG,EAAWrhH,EAAKyX,EAAS63B,GAC5BiyE,EAAW9pG,GAGtB,SAAS8pG,EAAW9pG,GAChB,GAA+B,qBAArBA,EAAQ63B,SACd,MAAM,IAAI91C,MAAM,6BAGpB,IAAIgoH,GAAS,EACTlyE,EAAW,SAAgB7mB,EAAKs+B,EAAUjb,GACtC01E,IACAA,GAAS,EACT/pG,EAAQ63B,SAAS7mB,EAAKs+B,EAAUjb,KAIxC,SAAS21E,IACkB,IAAnBtjG,EAAI1N,YACJmI,WAAW8oG,EAAU,GAI7B,SAASC,IAEL,IAAI71E,OAAOp2C,EAQX,GALIo2C,EADA3tB,EAAI4oC,SACG5oC,EAAI4oC,SAEJ5oC,EAAIO,cAAgBkjG,EAAOzjG,GAGlC0jG,EACA,IACI/1E,EAAOt4B,KAAKkzC,MAAM5a,GACpB,MAAOx7B,IAGb,OAAOw7B,EAGX,SAASg2E,EAAUC,GAMf,OALApxG,aAAaqxG,GACRD,aAAevoH,QAChBuoH,EAAM,IAAIvoH,MAAM,IAAMuoH,GAAO,kCAEjCA,EAAIna,WAAa,EACVt4D,EAASyyE,EAAKE,GAIzB,SAASP,IACL,IAAI1oB,EAAJ,CACA,IAAIv6E,EACJ9N,aAAaqxG,GAGTvjG,EAFDhH,EAAQyqG,aAAuBxsH,IAAbyoB,EAAIM,OAEZ,IAEgB,OAAfN,EAAIM,OAAkB,IAAMN,EAAIM,OAE9C,IAAIsoC,EAAWk7D,EACXx5F,EAAM,KAiBV,OAfe,IAAXhK,GACAsoC,EAAW,CACPjb,KAAM61E,IACN/Z,WAAYnpF,EACZ1e,OAAQA,EACRwzB,QAAS,GACTvuB,IAAKhF,EACLmiH,WAAYhkG,GAEbA,EAAIikG,wBACHr7D,EAASxzB,QAAU0tF,EAAa9iG,EAAIikG,2BAGxC35F,EAAM,IAAIjvB,MAAM,iCAEb81C,EAAS7mB,EAAKs+B,EAAUA,EAASjb,OAG5C,IAUIlwC,EACAo9F,EAXA76E,EAAM1G,EAAQ0G,KAAO,KAEpBA,IAEGA,EADA1G,EAAQqvC,MAAQrvC,EAAQyqG,OAClB,IAAIZ,EAAUe,eAEd,IAAIf,EAAUgB,gBAM5B,IAMIN,EANAhiH,EAAMme,EAAInZ,IAAMyS,EAAQzX,KAAOyX,EAAQzS,IACvCjF,EAASoe,EAAIpe,OAAS0X,EAAQ1X,QAAU,MACxC+rC,EAAOr0B,EAAQq0B,MAAQr0B,EAAQ1V,KAC/BwxB,EAAUpV,EAAIoV,QAAU9b,EAAQ8b,SAAW,GAC3CmlB,IAASjhC,EAAQihC,KACjBmpE,GAAS,EAETI,EAAkB,CAClBn2E,UAAMp2C,EACN69B,QAAS,GACTq0E,WAAY,EACZ7nG,OAAQA,EACRiF,IAAKhF,EACLmiH,WAAYhkG,GA0ChB,GAvCI,SAAU1G,IAA4B,IAAjBA,EAAQwmC,OAC7B4jE,GAAS,EACTtuF,EAAQ,WAAaA,EAAQ,YAAcA,EAAQ,UAAY,oBAChD,QAAXxzB,GAA+B,SAAXA,IACpBwzB,EAAQ,iBAAmBA,EAAQ,kBAAoBA,EAAQ,gBAAkB,oBACjFuY,EAAOt4B,KAAKD,WAA2B,IAAjBkE,EAAQwmC,KAAgBnS,EAAOr0B,EAAQwmC,QAIrE9/B,EAAIe,mBAAqBuiG,EACzBtjG,EAAI0tC,OAAS61D,EACbvjG,EAAI9N,QAAUyxG,EAEd3jG,EAAIokG,WAAa,aAGjBpkG,EAAIqkG,QAAU,WACVxpB,GAAU,GAEd76E,EAAIskG,UAAYX,EAChB3jG,EAAIkhC,KAAKt/C,EAAQC,GAAM04C,EAAMjhC,EAAQirG,SAAUjrG,EAAQkrG,UAEnDjqE,IACAv6B,EAAIJ,kBAAoBtG,EAAQsG,kBAK/B26B,GAAQjhC,EAAQwlB,QAAU,IAC3B+kF,EAAeppG,YAAW,WACtB,IAAIogF,EAAJ,CACAA,GAAU,EACV76E,EAAIgB,MAAM,WACV,IAAI7O,EAAI,IAAI9W,MAAM,0BAClB8W,EAAEqO,KAAO,YACTmjG,EAAUxxG,MACXmH,EAAQwlB,UAGX9e,EAAIykG,iBACJ,IAAIhnH,KAAO23B,EACJA,EAAQz3B,eAAeF,IACtBuiB,EAAIykG,iBAAiBhnH,EAAK23B,EAAQ33B,SAGvC,GAAI6b,EAAQ8b,UAAY6tF,EAAQ3pG,EAAQ8b,SAC3C,MAAM,IAAI/5B,MAAM,qDAkBpB,MAfI,iBAAkBie,IAClB0G,EAAIo8E,aAAe9iF,EAAQ8iF,cAG3B,eAAgB9iF,GACc,oBAAvBA,EAAQorG,YAEfprG,EAAQorG,WAAW1kG,GAMvBA,EAAI2kG,KAAKh3E,GAAQ,MAEV3tB,EAKX,SAASyjG,EAAOzjG,GACZ,GAAyB,aAArBA,EAAIo8E,aACJ,OAAOp8E,EAAI4kG,YAEf,IAAIC,EAAwB7kG,EAAI4kG,aAA4D,gBAA7C5kG,EAAI4kG,YAAYt2E,gBAAgBsH,SAC/E,MAAyB,KAArB51B,EAAIo8E,cAAwByoB,EAIzB,KAHI7kG,EAAI4kG,YAMnB,SAASvkH,KA1OTnK,EAAOC,QAAUgtH,EACjBA,EAAUgB,eAAiB3sH,EAAO2sH,gBAAkB9jH,EACpD8iH,EAAUe,eAAiB,oBAAqB,IAAKf,EAAUgB,eAAoBhB,EAAUgB,eAAiB3sH,EAAO0sH,eAErHlB,EAAa,CAAC,MAAO,MAAO,OAAQ,QAAS,OAAQ,WAAW,SAASphH,GACrEuhH,EAAqB,WAAXvhH,EAAsB,MAAQA,GAAU,SAASC,EAAKyX,EAAS63B,GAGrE,OAFA73B,EAAU4pG,EAAWrhH,EAAKyX,EAAS63B,GACnC73B,EAAQ1X,OAASA,EAAO0nC,cACjB85E,EAAW9pG,Q,kCCJ1B,IAAIke,EAA4B,CAC9B,KACA,MACA,KACA,KACA,MACA,KACA,KACA,MACA,KACA,KACA,MACA,IACA,MAGEylE,EAAuB,SAASr5F,GAClC,OAAQA,EAAK,IAAM,GACVA,EAAK,IAAM,GACXA,EAAK,IAAM,EACXA,EAAK,IAKZk5F,EAAgB,SAAS71E,EAAO5L,EAAOP,GACzC,IAAIxd,EAAGhG,EAAS,GAChB,IAAKgG,EAAI+d,EAAO/d,EAAIwd,EAAKxd,IACvBhG,GAAU,KAAO,KAAO2vB,EAAM3pB,GAAGyZ,SAAS,KAAKjf,OAAO,GAExD,OAAOR,GAKL0lG,EAAgB,SAAS/1E,EAAO5L,EAAOP,GACzC,OAAOuuE,SAASyT,EAAc71E,EAAO5L,EAAOP,KAG1C2qE,EAAkB,SAASC,EAAQC,GACrC,IACEC,EAAcF,EAAOC,EAAY,IAAM,GACzBD,EAAOC,EAAY,IAAM,GACzBD,EAAOC,EAAY,IAAM,EACzBD,EAAOC,EAAY,GACjC1C,EAAQyC,EAAOC,EAAY,GAC3BE,GAAyB,GAAR5C,IAAe,EAElC,OAAI4C,EACKD,EAAa,GAEfA,EAAa,IAGlBE,EAAgB,SAASJ,EAAQC,GACnC,IACEI,GAAoC,IAAxBL,EAAOC,EAAY,KAAc,EAC7CK,EAASN,EAAOC,EAAY,IAAM,EAClCM,EAAkC,KAAxBP,EAAOC,EAAY,GAE/B,OAAQM,EAAUD,EAAUD,GAG1B0P,EAAY,SAAS/P,EAAQC,GAC/B,OAAKD,EAAOC,KAAe,IAAIhD,WAAW,IACrC+C,EAAOC,EAAY,KAAO,IAAIhD,WAAW,IACzC+C,EAAOC,EAAY,KAAO,IAAIhD,WAAW,GACrC,kBACuB,EAApB+C,EAAOC,IAC4B,OAAV,IAAxBD,EAAOC,EAAY,IACvB,QAEF,MAGLoR,EAAkB,SAAS9mE,GAC7B,IAAI3yB,EAAI,EAER,MAAOA,EAAI,EAAI2yB,EAAOj2B,OAAQ,CAC5B,GAAkB,MAAdi2B,EAAO3yB,IAA0C,OAAV,IAAhB2yB,EAAO3yB,EAAI,IAMtC,OAAOk6B,GAA2C,GAAhBvH,EAAO3yB,EAAI,MAAe,GAH1DA,IAMJ,OAAO,MAGLw5F,EAAoB,SAAS7mE,GAC/B,IAAIytE,EAAYtX,EAAW1hF,EAAOi5F,EAGlCD,EAAa,GACG,GAAZztE,EAAO,KAETytE,GAAc,EACdA,GAAcT,EAAqBhtE,EAAO1N,SAAS,GAAI,MAKzD,EAAG,CAGD,GADA6jE,EAAY6W,EAAqBhtE,EAAO1N,SAASm7E,EAAa,EAAGA,EAAa,IAC1EtX,EAAY,EACd,OAAO,KAOT,GALAuX,EAAc/3E,OAAOC,aAAaoK,EAAOytE,GACPztE,EAAOytE,EAAa,GACpBztE,EAAOytE,EAAa,GACpBztE,EAAOytE,EAAa,IAElC,SAAhBC,EAAwB,CAC1Bj5F,EAAQurB,EAAO1N,SAASm7E,EAAa,GAAIA,EAAatX,EAAY,IAElE,IAAK,IAAI9oF,EAAI,EAAGA,EAAIoH,EAAMuY,WAAY3f,IACpC,GAAiB,IAAboH,EAAMpH,GAAU,CAClB,IAAIggG,EAAQN,EAAct4F,EAAO,EAAGpH,GACpC,GAAc,iDAAVggG,EAA0D,CAC5D,IAAIvnF,EAAIrR,EAAM6d,SAASjlB,EAAI,GACvBwlB,GAAgB,EAAP/M,EAAE,KAAe,GAClBA,EAAE,IAAO,GACTA,EAAE,IAAM,GACRA,EAAE,IAAM,EACRA,EAAE,KAAO,EAIrB,OAHA+M,GAAQ,EACRA,GAAe,EAAP/M,EAAE,GAEH+M,EAET,OAKN46E,GAAc,GACdA,GAActX,QACPsX,EAAaztE,EAAOhT,YAC7B,OAAO,MAGT/mB,EAAOC,QAAU,CACfsvF,gBAAiBA,EACjBK,cAAeA,EACf2P,UAAWA,EACXsB,gBAAiBA,EACjBD,kBAAmBA,I,kCC/IrB,SAAStgG,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAJzFE,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAKT,IAAIiuH,EAAa,EAAQ,QAErBrS,EAAe,EAAQ,QAEvBC,EAAgBl8G,EAAuBi8G,GAE3Ct8G,EAAQ,WAAa,CACnB28G,QAASgS,EAAWhS,QACpBl5E,UAAWkrF,EAAWlrF,UACtB2kF,YAAa7L,EAAc,YAE7Bx8G,EAAOC,QAAUA,EAAQ,Y,kCCxBzBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAGT,IAAIgH,EAAe,WAAe,SAASC,EAAiBT,EAAQU,GAAS,IAAK,IAAIT,EAAI,EAAGA,EAAIS,EAAM/D,OAAQsD,IAAK,CAAE,IAAIU,EAAaD,EAAMT,GAAIU,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMxH,OAAOC,eAAeyG,EAAQW,EAAWP,IAAKO,IAAiB,OAAO,SAAUI,EAAaC,EAAYC,GAAiJ,OAA9HD,GAAYP,EAAiBM,EAAYV,UAAWW,GAAiBC,GAAaR,EAAiBM,EAAaE,GAAqBF,GAA9gB,GAEfkf,EAAO,SAAaC,EAAIC,EAAKC,GAAO,IAAIC,GAAS,EAAiB,MAAOA,EAAQ,CAAE,IAAIvH,EAASoH,EAAIlmB,EAAWmmB,EAAKG,EAAWF,EAAKC,GAAS,EAAsB,OAAXvH,IAAiBA,EAASyH,SAASlgB,WAAW,IAAImgB,EAAOlnB,OAAOmnB,yBAAyB3H,EAAQ9e,GAAW,QAAaE,IAATsmB,EAAJ,CAA4O,GAAI,UAAWA,EAAQ,OAAOA,EAAKhnB,MAAgB,IAAImf,EAAS6H,EAAKjZ,IAAK,QAAerN,IAAXye,EAAwB,OAAoB,OAAOA,EAAOpY,KAAK+f,GAA/V,IAAII,EAASpnB,OAAOkJ,eAAesW,GAAS,GAAe,OAAX4H,EAAmB,OAA2BR,EAAKQ,EAAQP,EAAMnmB,EAAUomB,EAAME,EAAUD,GAAS,EAAMG,EAAOE,OAASxmB,IAE5c,SAASf,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,EAAM,CAAE,QAAWA,GAEzF,SAASoI,EAAgBC,EAAUV,GAAe,KAAMU,aAAoBV,GAAgB,MAAM,IAAIW,UAAU,qCAEhH,SAASI,EAAUC,EAAUC,GAAc,GAA0B,oBAAfA,GAA4C,OAAfA,EAAuB,MAAM,IAAIN,UAAU,kEAAoEM,GAAeD,EAAS1B,UAAY/G,OAAO2I,OAAOD,GAAcA,EAAW3B,UAAW,CAAE6B,YAAa,CAAE1I,MAAOuI,EAAUnB,YAAY,EAAOE,UAAU,EAAMD,cAAc,KAAemB,IAAY1I,OAAO6I,eAAiB7I,OAAO6I,eAAeJ,EAAUC,GAAcD,EAASK,UAAYJ,GAEje,IAAId,EAAU,EAAQ,QAElBC,EAAWhI,EAAuB+H,GAUlCggH,EAAc,SAAW5+G,GAG3B,SAAS4+G,IACP1/G,EAAgB/D,KAAMyjH,GAEtBjhG,EAAK3mB,OAAOkJ,eAAe0+G,EAAY7gH,WAAY,cAAe5C,MAAM8C,KAAK9C,KAAM0D,EAAS,YAC5F1D,KAAKiqH,KAAO,GACZjqH,KAAKwkB,MAAQ,EACbxkB,KAAKkqH,SAAW,KAmClB,OA3CA7lH,EAAUo/G,EAAa5+G,GAiBvB9B,EAAa0gH,EAAa,CAAC,CACzB9gH,IAAK,cACL5G,MAAO,WACLiE,KAAKiqH,KAAKv9F,OAAV1sB,GACIA,KAAKiqH,KAAK/qH,OACZc,KAAKkqH,SAAWvqG,WAAW3f,KAAKmqH,YAAY/oH,KAAKpB,MAAOA,KAAKwkB,OAE7DxkB,KAAKkqH,SAAW,OASnB,CACDvnH,IAAK,OACL5G,MAAO,SAAcquH,GACnBpqH,KAAKiqH,KAAK3hH,KAAK8hH,GACVpqH,KAAKkqH,WACRlqH,KAAKkqH,SAAWvqG,WAAW3f,KAAKmqH,YAAY/oH,KAAKpB,MAAOA,KAAKwkB,YAK5Di/F,EA5CS,CA6Cf//G,EAAS,YAEZrI,EAAQ,WAAaooH,EACrBroH,EAAOC,QAAUA,EAAQ,Y,qBC1DzB,IAAIqB,EAAS,EAAQ,QAEjBywD,EAAQ/xD,EAAOC,QAAU,CAC3B6xD,OAAQ,EAAQ,QAChBpiD,OAAQ,EAAQ,QAChB2uB,UAAW,EAAQ,SAGrB/8B,EAAOywD,MAAQA,EACfzwD,EAAOwwD,OAASC,EAAMD,OAEtB,IAAIm9D,EAAUl9D,EAAMriD,OAChBw/G,EAAan9D,EAAM1zB,UACnB8wF,EAAe7tH,EAAOoO,OACtB0/G,EAAkB9tH,EAAO+8B,UAE7B0zB,EAAMs9D,KAAO,WACX/tH,EAAOoO,OAASu/G,EAChB3tH,EAAO+8B,UAAY6wF,GAGrBn9D,EAAMu9D,QAAU,WACdhuH,EAAOoO,OAASy/G,EAChB7tH,EAAO+8B,UAAY+wF,GAGhB9tH,EAAOoO,QACVqiD,EAAMs9D,Q,mBChDRrvH,EAAOC,QAAU,81G,kCCajBQ,OAAOC,eAAeT,EAAS,aAAc,CAC3CU,OAAO,IAET,IAAIixG,EAAe,SAAsBxV,GACvC,MAAQ,iBAAiBpwF,KAAKowF,IAW5ByV,EAAe,SAAsBzV,GACvC,MAAQ,kBAAkBpwF,KAAKowF,IAY7Br5D,EAAmB,SAA0B/0B,GAC/C,IAAIiS,EAAS,CAAEjS,KAAM,GAAIsoG,WAAY,IACjCA,EAAatoG,EAAKkvB,OAAOnI,MAAM,KAenC,OAZA9U,EAAOjS,KAAOsoG,EAAWhlF,QAAQ4L,OACjCo5E,EAAW3mG,SAAQ,SAAU4/G,GAC3B,IAAIC,EAAOD,EAAUryF,OAAOnI,MAAM,KAElC,GAAIy6F,EAAK1rH,OAAS,EAAG,CACnB,IAAI2rH,EAAQD,EAAK,GAAG5tG,QAAQ,KAAM,IAAIsb,OAClCv8B,EAAQ6uH,EAAK,GAAG5tG,QAAQ,KAAM,IAAIsb,OAEtCjd,EAAOq2F,WAAWmZ,GAAS9uH,MAIxBsf,GAWL6mB,EAAwB,SAA+BG,GACzD,OAAOA,EAAO5jC,KAAI,SAAU+4F,GAC1B,OAAOA,EAAMx6E,QAAQ,uBAAuB,SAAU8tG,EAAMC,EAASC,GACnE,IAAIC,GAAc,KAAOttH,OAAOotH,GAAS9uG,SAAS,KAAKjf,OAAO,GAC1DkuH,GAAe,KAAOvtH,OAAOqtH,GAAU/uG,SAAS,KAAKjf,OAAO,GAEhE,MAAO,QAAUiuH,EAAa,KAAOC,SAK3C7vH,EAAQ,WAAa,CACnB2xG,aAAcA,EACd7uE,iBAAkBA,EAClB8uE,aAAcA,EACd/qE,sBAAuBA,GAEzB9mC,EAAOC,QAAUA,EAAQ,Y,kCCtFzB,W,mBCAAD,EAAOC,QAAU","file":"js/about.91f408aa.js","sourcesContent":["module.exports = {\n  generator: require('./mp4-generator'),\n  Transmuxer: require('./transmuxer').Transmuxer,\n  AudioSegmentStream: require('./transmuxer').AudioSegmentStream,\n  VideoSegmentStream: require('./transmuxer').VideoSegmentStream\n};\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _playlist = require('./playlist');\n\nvar _playlist2 = _interopRequireDefault(_playlist);\n\nvar _utilCodecsJs = require('./util/codecs.js');\n\n// Utilities\n\n/**\n * Returns the CSS value for the specified property on an element\n * using `getComputedStyle`. Firefox has a long-standing issue where\n * getComputedStyle() may return null when running in an iframe with\n * `display: none`.\n *\n * @see https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n * @param {HTMLElement} el the htmlelement to work on\n * @param {string} the proprety to get the style for\n */\nvar safeGetComputedStyle = function safeGetComputedStyle(el, property) {\n  var result = undefined;\n\n  if (!el) {\n    return '';\n  }\n\n  result = window.getComputedStyle(el);\n  if (!result) {\n    return '';\n  }\n\n  return result[property];\n};\n\n/**\n * Resuable stable sort function\n *\n * @param {Playlists} array\n * @param {Function} sortFn Different comparators\n * @function stableSort\n */\nvar stableSort = function stableSort(array, sortFn) {\n  var newArray = array.slice();\n\n  array.sort(function (left, right) {\n    var cmp = sortFn(left, right);\n\n    if (cmp === 0) {\n      return newArray.indexOf(left) - newArray.indexOf(right);\n    }\n    return cmp;\n  });\n};\n\n/**\n * A comparator function to sort two playlist object by bandwidth.\n *\n * @param {Object} left a media playlist object\n * @param {Object} right a media playlist object\n * @return {Number} Greater than zero if the bandwidth attribute of\n * left is greater than the corresponding attribute of right. Less\n * than zero if the bandwidth of right is greater than left and\n * exactly zero if the two are equal.\n */\nvar comparePlaylistBandwidth = function comparePlaylistBandwidth(left, right) {\n  var leftBandwidth = undefined;\n  var rightBandwidth = undefined;\n\n  if (left.attributes.BANDWIDTH) {\n    leftBandwidth = left.attributes.BANDWIDTH;\n  }\n  leftBandwidth = leftBandwidth || window.Number.MAX_VALUE;\n  if (right.attributes.BANDWIDTH) {\n    rightBandwidth = right.attributes.BANDWIDTH;\n  }\n  rightBandwidth = rightBandwidth || window.Number.MAX_VALUE;\n\n  return leftBandwidth - rightBandwidth;\n};\n\nexports.comparePlaylistBandwidth = comparePlaylistBandwidth;\n/**\n * A comparator function to sort two playlist object by resolution (width).\n * @param {Object} left a media playlist object\n * @param {Object} right a media playlist object\n * @return {Number} Greater than zero if the resolution.width attribute of\n * left is greater than the corresponding attribute of right. Less\n * than zero if the resolution.width of right is greater than left and\n * exactly zero if the two are equal.\n */\nvar comparePlaylistResolution = function comparePlaylistResolution(left, right) {\n  var leftWidth = undefined;\n  var rightWidth = undefined;\n\n  if (left.attributes.RESOLUTION && left.attributes.RESOLUTION.width) {\n    leftWidth = left.attributes.RESOLUTION.width;\n  }\n\n  leftWidth = leftWidth || window.Number.MAX_VALUE;\n\n  if (right.attributes.RESOLUTION && right.attributes.RESOLUTION.width) {\n    rightWidth = right.attributes.RESOLUTION.width;\n  }\n\n  rightWidth = rightWidth || window.Number.MAX_VALUE;\n\n  // NOTE - Fallback to bandwidth sort as appropriate in cases where multiple renditions\n  // have the same media dimensions/ resolution\n  if (leftWidth === rightWidth && left.attributes.BANDWIDTH && right.attributes.BANDWIDTH) {\n    return left.attributes.BANDWIDTH - right.attributes.BANDWIDTH;\n  }\n  return leftWidth - rightWidth;\n};\n\nexports.comparePlaylistResolution = comparePlaylistResolution;\n/**\n * Chooses the appropriate media playlist based on bandwidth and player size\n *\n * @param {Object} master\n *        Object representation of the master manifest\n * @param {Number} playerBandwidth\n *        Current calculated bandwidth of the player\n * @param {Number} playerWidth\n *        Current width of the player element\n * @param {Number} playerHeight\n *        Current height of the player element\n * @return {Playlist} the highest bitrate playlist less than the\n * currently detected bandwidth, accounting for some amount of\n * bandwidth variance\n */\nvar simpleSelector = function simpleSelector(master, playerBandwidth, playerWidth, playerHeight) {\n  // convert the playlists to an intermediary representation to make comparisons easier\n  var sortedPlaylistReps = master.playlists.map(function (playlist) {\n    var width = undefined;\n    var height = undefined;\n    var bandwidth = undefined;\n\n    width = playlist.attributes.RESOLUTION && playlist.attributes.RESOLUTION.width;\n    height = playlist.attributes.RESOLUTION && playlist.attributes.RESOLUTION.height;\n    bandwidth = playlist.attributes.BANDWIDTH;\n\n    bandwidth = bandwidth || window.Number.MAX_VALUE;\n\n    return {\n      bandwidth: bandwidth,\n      width: width,\n      height: height,\n      playlist: playlist\n    };\n  });\n\n  stableSort(sortedPlaylistReps, function (left, right) {\n    return left.bandwidth - right.bandwidth;\n  });\n\n  // filter out any playlists that have been excluded due to\n  // incompatible configurations\n  sortedPlaylistReps = sortedPlaylistReps.filter(function (rep) {\n    return !_playlist2['default'].isIncompatible(rep.playlist);\n  });\n\n  // filter out any playlists that have been disabled manually through the representations\n  // api or blacklisted temporarily due to playback errors.\n  var enabledPlaylistReps = sortedPlaylistReps.filter(function (rep) {\n    return _playlist2['default'].isEnabled(rep.playlist);\n  });\n\n  if (!enabledPlaylistReps.length) {\n    // if there are no enabled playlists, then they have all been blacklisted or disabled\n    // by the user through the representations api. In this case, ignore blacklisting and\n    // fallback to what the user wants by using playlists the user has not disabled.\n    enabledPlaylistReps = sortedPlaylistReps.filter(function (rep) {\n      return !_playlist2['default'].isDisabled(rep.playlist);\n    });\n  }\n\n  // filter out any variant that has greater effective bitrate\n  // than the current estimated bandwidth\n  var bandwidthPlaylistReps = enabledPlaylistReps.filter(function (rep) {\n    return rep.bandwidth * _config2['default'].BANDWIDTH_VARIANCE < playerBandwidth;\n  });\n\n  var highestRemainingBandwidthRep = bandwidthPlaylistReps[bandwidthPlaylistReps.length - 1];\n\n  // get all of the renditions with the same (highest) bandwidth\n  // and then taking the very first element\n  var bandwidthBestRep = bandwidthPlaylistReps.filter(function (rep) {\n    return rep.bandwidth === highestRemainingBandwidthRep.bandwidth;\n  })[0];\n\n  // filter out playlists without resolution information\n  var haveResolution = bandwidthPlaylistReps.filter(function (rep) {\n    return rep.width && rep.height;\n  });\n\n  // sort variants by resolution\n  stableSort(haveResolution, function (left, right) {\n    return left.width - right.width;\n  });\n\n  // if we have the exact resolution as the player use it\n  var resolutionBestRepList = haveResolution.filter(function (rep) {\n    return rep.width === playerWidth && rep.height === playerHeight;\n  });\n\n  highestRemainingBandwidthRep = resolutionBestRepList[resolutionBestRepList.length - 1];\n  // ensure that we pick the highest bandwidth variant that have exact resolution\n  var resolutionBestRep = resolutionBestRepList.filter(function (rep) {\n    return rep.bandwidth === highestRemainingBandwidthRep.bandwidth;\n  })[0];\n\n  var resolutionPlusOneList = undefined;\n  var resolutionPlusOneSmallest = undefined;\n  var resolutionPlusOneRep = undefined;\n\n  // find the smallest variant that is larger than the player\n  // if there is no match of exact resolution\n  if (!resolutionBestRep) {\n    resolutionPlusOneList = haveResolution.filter(function (rep) {\n      return rep.width > playerWidth || rep.height > playerHeight;\n    });\n\n    // find all the variants have the same smallest resolution\n    resolutionPlusOneSmallest = resolutionPlusOneList.filter(function (rep) {\n      return rep.width === resolutionPlusOneList[0].width && rep.height === resolutionPlusOneList[0].height;\n    });\n\n    // ensure that we also pick the highest bandwidth variant that\n    // is just-larger-than the video player\n    highestRemainingBandwidthRep = resolutionPlusOneSmallest[resolutionPlusOneSmallest.length - 1];\n    resolutionPlusOneRep = resolutionPlusOneSmallest.filter(function (rep) {\n      return rep.bandwidth === highestRemainingBandwidthRep.bandwidth;\n    })[0];\n  }\n\n  // fallback chain of variants\n  var chosenRep = resolutionPlusOneRep || resolutionBestRep || bandwidthBestRep || enabledPlaylistReps[0] || sortedPlaylistReps[0];\n\n  return chosenRep ? chosenRep.playlist : null;\n};\n\nexports.simpleSelector = simpleSelector;\n// Playlist Selectors\n\n/**\n * Chooses the appropriate media playlist based on the most recent\n * bandwidth estimate and the player size.\n *\n * Expects to be called within the context of an instance of HlsHandler\n *\n * @return {Playlist} the highest bitrate playlist less than the\n * currently detected bandwidth, accounting for some amount of\n * bandwidth variance\n */\nvar lastBandwidthSelector = function lastBandwidthSelector() {\n  return simpleSelector(this.playlists.master, this.systemBandwidth, parseInt(safeGetComputedStyle(this.tech_.el(), 'width'), 10), parseInt(safeGetComputedStyle(this.tech_.el(), 'height'), 10));\n};\n\nexports.lastBandwidthSelector = lastBandwidthSelector;\n/**\n * Chooses the appropriate media playlist based on an\n * exponential-weighted moving average of the bandwidth after\n * filtering for player size.\n *\n * Expects to be called within the context of an instance of HlsHandler\n *\n * @param {Number} decay - a number between 0 and 1. Higher values of\n * this parameter will cause previous bandwidth estimates to lose\n * significance more quickly.\n * @return {Function} a function which can be invoked to create a new\n * playlist selector function.\n * @see https://en.wikipedia.org/wiki/Moving_average#Exponential_moving_average\n */\nvar movingAverageBandwidthSelector = function movingAverageBandwidthSelector(decay) {\n  var average = -1;\n\n  if (decay < 0 || decay > 1) {\n    throw new Error('Moving average bandwidth decay must be between 0 and 1.');\n  }\n\n  return function () {\n    if (average < 0) {\n      average = this.systemBandwidth;\n    }\n\n    average = decay * this.systemBandwidth + (1 - decay) * average;\n    return simpleSelector(this.playlists.master, average, parseInt(safeGetComputedStyle(this.tech_.el(), 'width'), 10), parseInt(safeGetComputedStyle(this.tech_.el(), 'height'), 10));\n  };\n};\n\nexports.movingAverageBandwidthSelector = movingAverageBandwidthSelector;\n/**\n * Chooses the appropriate media playlist based on the potential to rebuffer\n *\n * @param {Object} settings\n *        Object of information required to use this selector\n * @param {Object} settings.master\n *        Object representation of the master manifest\n * @param {Number} settings.currentTime\n *        The current time of the player\n * @param {Number} settings.bandwidth\n *        Current measured bandwidth\n * @param {Number} settings.duration\n *        Duration of the media\n * @param {Number} settings.segmentDuration\n *        Segment duration to be used in round trip time calculations\n * @param {Number} settings.timeUntilRebuffer\n *        Time left in seconds until the player has to rebuffer\n * @param {Number} settings.currentTimeline\n *        The current timeline segments are being loaded from\n * @param {SyncController} settings.syncController\n *        SyncController for determining if we have a sync point for a given playlist\n * @return {Object|null}\n *         {Object} return.playlist\n *         The highest bandwidth playlist with the least amount of rebuffering\n *         {Number} return.rebufferingImpact\n *         The amount of time in seconds switching to this playlist will rebuffer. A\n *         negative value means that switching will cause zero rebuffering.\n */\nvar minRebufferMaxBandwidthSelector = function minRebufferMaxBandwidthSelector(settings) {\n  var master = settings.master;\n  var currentTime = settings.currentTime;\n  var bandwidth = settings.bandwidth;\n  var duration = settings.duration;\n  var segmentDuration = settings.segmentDuration;\n  var timeUntilRebuffer = settings.timeUntilRebuffer;\n  var currentTimeline = settings.currentTimeline;\n  var syncController = settings.syncController;\n\n  // filter out any playlists that have been excluded due to\n  // incompatible configurations\n  var compatiblePlaylists = master.playlists.filter(function (playlist) {\n    return !_playlist2['default'].isIncompatible(playlist);\n  });\n\n  // filter out any playlists that have been disabled manually through the representations\n  // api or blacklisted temporarily due to playback errors.\n  var enabledPlaylists = compatiblePlaylists.filter(_playlist2['default'].isEnabled);\n\n  if (!enabledPlaylists.length) {\n    // if there are no enabled playlists, then they have all been blacklisted or disabled\n    // by the user through the representations api. In this case, ignore blacklisting and\n    // fallback to what the user wants by using playlists the user has not disabled.\n    enabledPlaylists = compatiblePlaylists.filter(function (playlist) {\n      return !_playlist2['default'].isDisabled(playlist);\n    });\n  }\n\n  var bandwidthPlaylists = enabledPlaylists.filter(_playlist2['default'].hasAttribute.bind(null, 'BANDWIDTH'));\n\n  var rebufferingEstimates = bandwidthPlaylists.map(function (playlist) {\n    var syncPoint = syncController.getSyncPoint(playlist, duration, currentTimeline, currentTime);\n    // If there is no sync point for this playlist, switching to it will require a\n    // sync request first. This will double the request time\n    var numRequests = syncPoint ? 1 : 2;\n    var requestTimeEstimate = _playlist2['default'].estimateSegmentRequestTime(segmentDuration, bandwidth, playlist);\n    var rebufferingImpact = requestTimeEstimate * numRequests - timeUntilRebuffer;\n\n    return {\n      playlist: playlist,\n      rebufferingImpact: rebufferingImpact\n    };\n  });\n\n  var noRebufferingPlaylists = rebufferingEstimates.filter(function (estimate) {\n    return estimate.rebufferingImpact <= 0;\n  });\n\n  // Sort by bandwidth DESC\n  stableSort(noRebufferingPlaylists, function (a, b) {\n    return comparePlaylistBandwidth(b.playlist, a.playlist);\n  });\n\n  if (noRebufferingPlaylists.length) {\n    return noRebufferingPlaylists[0];\n  }\n\n  stableSort(rebufferingEstimates, function (a, b) {\n    return a.rebufferingImpact - b.rebufferingImpact;\n  });\n\n  return rebufferingEstimates[0] || null;\n};\n\nexports.minRebufferMaxBandwidthSelector = minRebufferMaxBandwidthSelector;\n/**\n * Chooses the appropriate media playlist, which in this case is the lowest bitrate\n * one with video.  If no renditions with video exist, return the lowest audio rendition.\n *\n * Expects to be called within the context of an instance of HlsHandler\n *\n * @return {Object|null}\n *         {Object} return.playlist\n *         The lowest bitrate playlist that contains a video codec.  If no such rendition\n *         exists pick the lowest audio rendition.\n */\nvar lowestBitrateCompatibleVariantSelector = function lowestBitrateCompatibleVariantSelector() {\n  // filter out any playlists that have been excluded due to\n  // incompatible configurations or playback errors\n  var playlists = this.playlists.master.playlists.filter(_playlist2['default'].isEnabled);\n\n  // Sort ascending by bitrate\n  stableSort(playlists, function (a, b) {\n    return comparePlaylistBandwidth(a, b);\n  });\n\n  // Parse and assume that playlists with no video codec have no video\n  // (this is not necessarily true, although it is generally true).\n  //\n  // If an entire manifest has no valid videos everything will get filtered\n  // out.\n  var playlistsWithVideo = playlists.filter(function (playlist) {\n    return (0, _utilCodecsJs.parseCodecs)(playlist.attributes.CODECS).videoCodec;\n  });\n\n  return playlistsWithVideo[0] || null;\n};\nexports.lowestBitrateCompatibleVariantSelector = lowestBitrateCompatibleVariantSelector;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0QjUwQjU3MjA4REExMUU5QUE3M0VERTc5NzdENkFENCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0QjUwQjU3MzA4REExMUU5QUE3M0VERTc5NzdENkFENCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRCNTBCNTcwMDhEQTExRTlBQTczRURFNzk3N0Q2QUQ0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRCNTBCNTcxMDhEQTExRTlBQTczRURFNzk3N0Q2QUQ0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+oIvLywAABYBJREFUeNrUGWlMHGX0zcwue8JesCwL5S6khJQWpEVqaajxCKg14hmNSasG45GY9o9JU+Mvr6RN0x/GRNMYY1I1TQxUYtrEag8aPBBFORe6XAu77C57sbszszOzvlnAclauleWRb+d93775vnd/7y1ENBqF7QwkbHOQzCEEQax7k3bLkBp3eB4IqMNpJY40YmZvB44OHJfwuwvlBTmezWJ8znOIf5F1CNDWO4gWJN7Cd08aklV6Q4oK1Ao5SMgZw/JCFEI0Ay7/NEwFgn4hGv0QBfloX1Eet+UC3OiypOLjoj5ZdajAlAYyqeSu9BzHw6DdKQrShkI8Vr2r0LllAlz9s1eP1NfyTKmlOUbDmg4ec3ngtt1lweOqa0qLXP+7AFd+7xIJv8tNT60ryEgDYtZVVpUxSALEvyGHC6wO1w1Ea+8v28VvRIA1Z6EIzzcqZEl12Wl64HkBAmEGQgy7qjGNtEwkAjvwXbVcdhDd6uTl9q7kjbjSmizQ1NYhZpuBisKc9NQUNXimQ+s6FJkHluOgc8gGbIQDjudvicFdX7m7Ka4udPFm+1GtWnF+f1EeuANBdB1h3ZpL16XELMhicDu8/lhsoHU+Q05ePVK1h9+QABd++lmJGjmGq4/iNAcHLeZzpNhblJlelqHXxFLjRkAulYIBrShPkoJMIgHblAe6hicgyDBf4jkRJNmDQ4VjWLxHMHbOP3GgPPifAnx++foBfHylUSuztGo16NQKDD4SvOgu9ikvVKD2vcEQml2AzQIVulS+KRWt4IWe0Qk8UxkbIm/eUBgCIVqMnwkkffaZmsrrKwrwSdOVKookf8wyGeU7M02QbdTjpUTFXEVCoRDBMLhR86Ouqc0vCXD/0pys2Fl4KcaeJPKEl1/MvSw2Bzh9gQjOa184fG/rEgHOfdOswGlvZkZ6dlVJEShlSWAZd8R8XaQRL6osgw5oDDqb2wPxgBSlHDJ0WhhxuiHMRmJrWpUSdpqNMWFauy3g8vrG0Z0Kjz58KLygFmIY+phKnZydZzZhMHHQ1ncb5leqYhpcb9ZZLYhn2D3+JWvj6Lol2WYQvcLt9ZkZmm7Er84uFIBmGjQaHehVCrjW2QOJVmb/gtq/r7QY0MVFZTcsIwBdrlHK4LeefvB5PZCI0PrHX5Cq04B9YqJsSTmNUmk4lsVgmUjY2t/v8wEFUZHX5KUC0LR7xDZm8PsCCd3ADEZYiHDc5HIW+GF4ZPTpRO/AwuEQyGWK5uUscBrj9qkIyxCJ2idTeGNrtLoQKvv9ZYu55948cTwqCKdpmoYIxkOigMibQqmEFK2WxqrgyU/fe7dlxVKi4ZXXH8TJO4hWozB4Z4jrszRAwLI99CKcWAGf2WMRLn7OEhEL8Nn3cVAkRePCJVw59cWZD/pWVY0+8uLLClwy4jcqfFku9g64HYVPKc4pxMk5HGmoWBNPAGYAgifucADz8Tu83x1fxM8k4tavPz4b3vSmfith3R3ZKjcnxTF/7vIFJHGJj3hYwGp3nkOua/zT4Q5sUnis9/drUlS3ck1pjZttgbhoheO4SrvLUzbu8HRj/xzUaZWlYw43uS0sMGx3vtQ9YDPgzmWlBZl7scPyaZRKW2f/aAsnCLr6g+VnEjYG0HWqPYHg2xQVPVGSb1Y4vb5cgeMqrPZJNj877RTNsm909FvrE/bHXQlJulExNMNyHtSQFZsQIVmeREgpisEG3oulMM9xvC8uP+5uBuwwGvr6R8aPuzzTxSjIQ9NMpJflhFGW54vydJpmd4el9/HafTcTPgtd/fXvFoqCugyD9vskqcQaCIZes9rcnVGBKD9y+B4+4bNQca65rW9oXNHeMzwQDjMjFEV+azbqvQ9U7ebjloW2K2z7/9D8I8AAUhveCuf/nyAAAAAASUVORK5CYII=\"","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _stream = require('./stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nvar _lineStream = require('./line-stream');\n\nvar _lineStream2 = _interopRequireDefault(_lineStream);\n\nvar _parseStream = require('./parse-stream');\n\nvar _parseStream2 = _interopRequireDefault(_parseStream);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file m3u8/parser.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\nvar Parser = function (_Stream) {\n  _inherits(Parser, _Stream);\n\n  function Parser() {\n    _classCallCheck(this, Parser);\n\n    var _this = _possibleConstructorReturn(this, (Parser.__proto__ || Object.getPrototypeOf(Parser)).call(this));\n\n    _this.lineStream = new _lineStream2['default']();\n    _this.parseStream = new _parseStream2['default']();\n    _this.lineStream.pipe(_this.parseStream);\n    /* eslint-disable consistent-this */\n    var self = _this;\n    /* eslint-enable consistent-this */\n    var uris = [];\n    var currentUri = {};\n    // if specified, the active EXT-X-MAP definition\n    var currentMap = void 0;\n    // if specified, the active decryption key\n    var _key = void 0;\n    var noop = function noop() {};\n    var defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    };\n    // group segments into numbered timelines delineated by discontinuities\n    var currentTimeline = 0;\n\n    // the manifest is empty until the parse stream begins delivering data\n    _this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    };\n\n    // update the manifest with the m3u8 entry from the parse stream\n    _this.parseStream.on('data', function (entry) {\n      var mediaGroup = void 0;\n      var rendition = void 0;\n\n      ({\n        tag: function tag() {\n          // switch based on the tag type\n          (({\n            'allow-cache': function allowCache() {\n              this.manifest.allowCache = entry.allowed;\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n            byterange: function byterange() {\n              var byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  this.trigger('info', {\n                    message: 'defaulting offset to zero'\n                  });\n                  entry.offset = 0;\n                }\n              }\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n            },\n            endlist: function endlist() {\n              this.manifest.endList = true;\n            },\n            inf: function inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n            key: function key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              }\n              // clear the active encryption key\n              if (entry.attributes.METHOD === 'NONE') {\n                _key = null;\n                return;\n              }\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              }\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              }\n\n              // setup an encryption key for upcoming segments\n              _key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                _key.iv = entry.attributes.IV;\n              }\n            },\n            'media-sequence': function mediaSequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n              this.manifest.mediaSequence = entry.number;\n            },\n            'discontinuity-sequence': function discontinuitySequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n            'playlist-type': function playlistType() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n              this.manifest.playlistType = entry.playlistType;\n            },\n            map: function map() {\n              currentMap = {};\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n            },\n            'stream-inf': function streamInf() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n              _extends(currentUri.attributes, entry.attributes);\n            },\n            media: function media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              }\n\n              // find the media group, creating defaults as necessary\n              var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']];\n\n              // collect the rendition metadata\n              rendition = {\n                'default': /yes/i.test(entry.attributes.DEFAULT)\n              };\n              if (rendition['default']) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              }\n\n              // insert the new rendition\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n            discontinuity: function discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n            'program-date-time': function programDateTime() {\n              this.manifest.dateTimeString = entry.dateTimeString;\n              this.manifest.dateTimeObject = entry.dateTimeObject;\n            },\n            targetduration: function targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n              this.manifest.targetDuration = entry.duration;\n            },\n            totalduration: function totalduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid total duration: ' + entry.duration\n                });\n                return;\n              }\n              this.manifest.totalDuration = entry.duration;\n            },\n            'cue-out': function cueOut() {\n              currentUri.cueOut = entry.data;\n            },\n            'cue-out-cont': function cueOutCont() {\n              currentUri.cueOutCont = entry.data;\n            },\n            'cue-in': function cueIn() {\n              currentUri.cueIn = entry.data;\n            }\n          })[entry.tagType] || noop).call(self);\n        },\n        uri: function uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri);\n\n          // if no explicit duration was declared, use the target duration\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          }\n          // annotate with encryption information, if necessary\n          if (_key) {\n            currentUri.key = _key;\n          }\n          currentUri.timeline = currentTimeline;\n          // annotate with initialization segment information, if necessary\n          if (currentMap) {\n            currentUri.map = currentMap;\n          }\n\n          // prepare for the next URI\n          currentUri = {};\n        },\n        comment: function comment() {\n          // comments are not important for playback\n        }\n      })[entry.type].call(self);\n    });\n\n    return _this;\n  }\n\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {String} chunk a potentially incomplete portion of the manifest\n   */\n\n\n  _createClass(Parser, [{\n    key: 'push',\n    value: function push(chunk) {\n      this.lineStream.push(chunk);\n    }\n\n    /**\n     * Flush any remaining input. This can be handy if the last line of an M3U8\n     * manifest did not contain a trailing newline but the file has been\n     * completely received.\n     */\n\n  }, {\n    key: 'end',\n    value: function end() {\n      // flush any buffered input\n      this.lineStream.push('\\n');\n    }\n  }]);\n\n  return Parser;\n}(_stream2['default']);\n\nexports['default'] = Parser;","/**\n * @file add-text-track-data.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\n/**\n * Define properties on a cue for backwards compatability,\n * but warn the user that the way that they are using it\n * is depricated and will be removed at a later date.\n *\n * @param {Cue} cue the cue to add the properties on\n * @private\n */\nvar deprecateOldCue = function deprecateOldCue(cue) {\n  Object.defineProperties(cue.frame, {\n    id: {\n      get: function get() {\n        _videoJs2['default'].log.warn('cue.frame.id is deprecated. Use cue.value.key instead.');\n        return cue.value.key;\n      }\n    },\n    value: {\n      get: function get() {\n        _videoJs2['default'].log.warn('cue.frame.value is deprecated. Use cue.value.data instead.');\n        return cue.value.data;\n      }\n    },\n    privateData: {\n      get: function get() {\n        _videoJs2['default'].log.warn('cue.frame.privateData is deprecated. Use cue.value.data instead.');\n        return cue.value.data;\n      }\n    }\n  });\n};\n\nvar durationOfVideo = function durationOfVideo(duration) {\n  var dur = undefined;\n\n  if (isNaN(duration) || Math.abs(duration) === Infinity) {\n    dur = Number.MAX_VALUE;\n  } else {\n    dur = duration;\n  }\n  return dur;\n};\n/**\n * Add text track data to a source handler given the captions and\n * metadata from the buffer.\n *\n * @param {Object} sourceHandler the flash or virtual source buffer\n * @param {Array} captionArray an array of caption data\n * @param {Array} metadataArray an array of meta data\n * @private\n */\nvar addTextTrackData = function addTextTrackData(sourceHandler, captionArray, metadataArray) {\n  var Cue = _globalWindow2['default'].WebKitDataCue || _globalWindow2['default'].VTTCue;\n\n  if (captionArray) {\n    captionArray.forEach(function (caption) {\n      var track = caption.stream;\n\n      this.inbandTextTracks_[track].addCue(new Cue(caption.startTime + this.timestampOffset, caption.endTime + this.timestampOffset, caption.text));\n    }, sourceHandler);\n  }\n\n  if (metadataArray) {\n    (function () {\n      var videoDuration = durationOfVideo(sourceHandler.mediaSource_.duration);\n\n      metadataArray.forEach(function (metadata) {\n        var time = metadata.cueTime + this.timestampOffset;\n\n        metadata.frames.forEach(function (frame) {\n          var cue = new Cue(time, time, frame.value || frame.url || frame.data || '');\n\n          cue.frame = frame;\n          cue.value = frame;\n          deprecateOldCue(cue);\n\n          this.metadataTrack_.addCue(cue);\n        }, this);\n      }, sourceHandler);\n\n      // Updating the metadeta cues so that\n      // the endTime of each cue is the startTime of the next cue\n      // the endTime of last cue is the duration of the video\n      if (sourceHandler.metadataTrack_ && sourceHandler.metadataTrack_.cues && sourceHandler.metadataTrack_.cues.length) {\n        (function () {\n          var cues = sourceHandler.metadataTrack_.cues;\n          var cuesArray = [];\n\n          // Create a copy of the TextTrackCueList...\n          // ...disregarding cues with a falsey value\n          for (var i = 0; i < cues.length; i++) {\n            if (cues[i]) {\n              cuesArray.push(cues[i]);\n            }\n          }\n\n          // Group cues by their startTime value\n          var cuesGroupedByStartTime = cuesArray.reduce(function (obj, cue) {\n            var timeSlot = obj[cue.startTime] || [];\n\n            timeSlot.push(cue);\n            obj[cue.startTime] = timeSlot;\n\n            return obj;\n          }, {});\n\n          // Sort startTimes by ascending order\n          var sortedStartTimes = Object.keys(cuesGroupedByStartTime).sort(function (a, b) {\n            return Number(a) - Number(b);\n          });\n\n          // Map each cue group's endTime to the next group's startTime\n          sortedStartTimes.forEach(function (startTime, idx) {\n            var cueGroup = cuesGroupedByStartTime[startTime];\n            var nextTime = Number(sortedStartTimes[idx + 1]) || videoDuration;\n\n            // Map each cue's endTime the next group's startTime\n            cueGroup.forEach(function (cue) {\n              cue.endTime = nextTime;\n            });\n          });\n        })();\n      }\n    })();\n  }\n};\n\nexports['default'] = {\n  addTextTrackData: addTextTrackData,\n  durationOfVideo: durationOfVideo\n};\nmodule.exports = exports['default'];","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RkY2OTZEMjA4REExMUU5OUI4NkI3NEQ1ODA0OThERCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RkY2OTZEMzA4REExMUU5OUI4NkI3NEQ1ODA0OThERCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRGRjY5NkQwMDhEQTExRTk5Qjg2Qjc0RDU4MDQ5OEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRGRjY5NkQxMDhEQTExRTk5Qjg2Qjc0RDU4MDQ5OEREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+3B6tXgAACWJJREFUeNrMWXts1Vcd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\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"all-box\",attrs:{\"id\":\"container\"}},[_c('div',{staticClass:\"header-box\"}),_c('div',{staticClass:\"left-box\"},[_c('leftbox')],1),_c('div',{staticClass:\"right-t-box\"},[_c('righttbox')],1),_c('div',{staticClass:\"right-b-box\"},[_c('rightbbox')],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"left-container\"},[_c('div',{staticClass:\"time-box\"},[_c('img',{attrs:{\"src\":require(\"../../assets/image/sz.png\"),\"alt\":\"\",\"srcset\":\"\"}}),_c('timexs',{attrs:{\"sendSync\":true,\"autoStart\":true,\"defaultVal\":0}})],1),_c('div',{staticClass:\"gd-box\"},[_vm._m(0),_vm._m(1),_c('div',{staticClass:\"lb-box\"},_vm._l((_vm.$store.getters.rankingData),function(itam,index){return _c('div',{key:index},[_c('div',{staticClass:\"itampaiming\"},[_c('div',{staticClass:\"indexname\"},[_c('div',{class:index + 1 == 1\n                      ? 'numberimg1'\n                      : index + 1 == 2\n                      ? 'numberimg2'\n                      : index + 1 == 3\n                      ? 'numberimg3'\n                      : ''},[_vm._v(\" \"+_vm._s(index + 1 == 1 ? '' : index + 1 == 2 ? '' : index + 1 == 3 ? '' : index + 1)+\" \")]),_c('div',{staticClass:\"nawe\"},[_vm._v(_vm._s(itam.userName))])]),_c('div',{staticClass:\"indexnum\"},[_vm._v(_vm._s(itam.name))]),_c('div',{staticClass:\"indexnum\"},[_vm._v(_vm._s(itam.speed)+\"km/h\")])])])}),0)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tit\"},[_c('div',{staticClass:\"titl\"},[_vm._v(\"当前排名\")]),_c('div',{staticClass:\"titlin\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tab-tit\"},[_c('div',{staticClass:\"tab-tit1\"},[_vm._v(\"姓名\")]),_c('div',{staticClass:\"tab-tit2\"},[_vm._v(\"设备号\")]),_c('div',{staticClass:\"tab-tit3\"},[_vm._v(\"速度\"),_c('br'),_vm._v(\"km/h\")])])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('span',{attrs:{\"sendSync\":_vm.sendSync,\"autoStart\":_vm.autoStart,\"defaultVal\":_vm.defaultVal}},[_vm._v(_vm._s(_vm.countString))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <span\r\n      :sendSync=\"sendSync\"\r\n      :autoStart=\"autoStart\"\r\n      :defaultVal=\"defaultVal\"\r\n      >{{ countString }}</span\r\n    >\r\n<!-- \r\n       120.991449, 31.05981,\r\n   120.991416,31.058287,\r\n   120.99133,31.055953,\r\n   120.991294, 31.054582,\r\n\r\n   120.991282, 31.05412,\r\n   120.990773,31.052616,\r\n   120.990172,31.05087,\r\n\r\n\r\n   120.989471, 31.04876,\r\n   120.989448, 31.048534,\r\n   120.988008, 31.049107,\r\n   120.986872, 31.049273,\r\n   120.984436, 31.049539,\r\n   120.98397, 31.049788,\r\n\r\n   120.98263,31.051409,\r\n   120.981708,31.052604,\r\n   120.979931, 31.054778,\r\n\r\n\r\n   \r\n   120.979385, 31.055119,\r\n   120.976864,31.055375,\r\n   120.973743, 31.055628,\r\n   120.971971,31.055016,\r\n   120.970282, 31.054489,\r\n   120.970154, 31.054161,\r\n   120.970904,31.051804,\r\n   120.971633,31.049635,\r\n   120.972406,31.047429,\r\n   120.972907, 31.045519,\r\n   120.972952, 31.044903,\r\n   120.972929, 31.044171,\r\n   120.972749, 31.043266, //22\r\n   120.972728, 31.041001,//22\r\n   120.973166, 31.03849,//22\r\n   120.973134,31.03593,\r\n   120.973048,31.033613,\r\n   120.973091,31.030009,\r\n   120.973048,31.02578,\r\n   120.973084, 31.020724,\r\n   120.975001,31.020779,\r\n   120.976782, 31.020865,\r\n   120.97808,31.020388,\r\n   120.977932, 31.020396,\r\n   120.98015,31.020392,\r\n  120.982918,31.020448,\r\n   120.985545, 31.020589,\r\n   120.987619, 31.021436,\r\n   120.989872, 31.022228,\r\n   120.99039, 31.022603,\r\n   120.991022, 31.022811,\r\n   120.992011, 31.02277,\r\n   120.992983, 31.022436,\r\n   120.994953, 31.022507,\r\n   120.9962, 31.022638,\r\n  120.997133,31.023565,\r\n  120.999021,31.023721,\r\n  121.000925,31.023767,\r\n  121.001794,31.023298,\r\n   121.001838, 31.023235,\r\n   121.002301, 31.022496,\r\n   121.002355, 31.022052,\r\n   121.002506, 31.021748,\r\n   121.002851, 31.021507,\r\n   121.003735, 31.021249,\r\n   121.005234, 31.021193,\r\n   121.007094,31.021266,\r\n   121.009411, 31.021367,\r\n   121.010231, 31.02168,\r\n   121.01076, 31.021695,\r\n   121.01116, 31.021477,\r\n   121.013328,31.021597,\r\n   121.015452,31.021689,\r\n   121.018006,31.021781,\r\n   121.021439,31.021983,\r\n   121.024314,31.022057,\r\n   121.02632, 31.022205,\r\n   121.028091,31.022443,\r\n   121.030022,31.022682,\r\n   121.03161,31.022866,\r\n   121.033369,31.023105,\r\n   121.035343,31.023363,\r\n   121.037596,31.023638,\r\n   121.040493,31.023988,\r\n   121.043294, 31.024305,\r\n   121.047763, 31.024894,\r\n   121.047763, 31.024894,\r\n   121.049934, 31.025402,\r\n   121.052016,31.025679,\r\n   121.053981, 31.025858,\r\n   121.05631,31.026135,\r\n   121.058649,31.026374,\r\n   121.060966,31.026686,\r\n   121.063283,31.026944,\r\n   121.065644,31.02733,\r\n   121.068004,31.027698,\r\n   121.070257,31.027992,\r\n   121.072274, 31.028352,\r\n   121.07305, 31.02886,\r\n   121.073301, 31.029358,\r\n   121.072913, 31.031039,\r\n   121.069823,31.032791,\r\n   121.0694, 31.033062,\r\n   121.067773,31.034142,\r\n   121.066613, 31.035064,\r\n   121.064603,31.036661,\r\n   121.062578, 31.038179,\r\n   121.061418, 31.038583,\r\n   121.060874, 31.038645,\r\n   121.060442, 31.038566,\r\n   121.060021, 31.038487,\r\n   121.059467, 31.03905,\r\n   121.059364, 31.039366,\r\n   121.059364, 31.039665,\r\n   121.059713, 31.039745,\r\n  //  121.060288, 31.039745,\r\n   121.061192, 31.039806,\r\n   121.061613, 31.039921,\r\n   121.061572, 31.040167,\r\n   121.061243, 31.040695,\r\n   121.06022,31.042384,\r\n   121.059212, 31.043915,\r\n   121.057837,  31.045467,\r\n   121.056433,31.04658,\r\n   121.056509, 31.04698,\r\n   121.055978, 31.047663,\r\n   121.054044, 31.048831,\r\n   121.052329, 31.049555,\r\n   121.051014, 31.049837,\r\n   121.048971, 31.050642,\r\n   121.046981,31.051488,\r\n   121.045518, 31.05207,\r\n   121.044015, 31.052614,\r\n   121.043075, 31.052815,\r\n   121.042488, 31.053016,\r\n   121.041525, 31.054183,\r\n   121.040116, 31.054867,\r\n   121.039599, 31.055491,\r\n   121.038224,31.056507,\r\n   121.036379,31.057776,\r\n   121.034555,31.058915,\r\n   121.032788, 31.060078,\r\n   121.032578, 31.060097, -->\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      isStart: false,\r\n      globalTimer: null, //获取setInterval对象值\r\n      countString: \"\", //用来显示时间\r\n      day: 0,\r\n      hour: 0,\r\n      minute: 0,\r\n      second: 0,\r\n      millisecond: 0,\r\n      countVal: this.defaultVal, //获取初始值\r\n      pauseTime: 0\r\n    };\r\n  },\r\n  watch: {\r\n    countString: {\r\n      deep: true,\r\n      handler: function (val, oldVal) {\r\n        var vm = this;\r\n        if (vm.needSendSunc) {\r\n          vm.passToParent(val);\r\n        }\r\n      }\r\n    },\r\n    needSendSunc: {\r\n      deep: true,\r\n      handler: function (val) {\r\n        var vm = this;\r\n        if (val) {\r\n          vm.passToParent(vm.countString);\r\n        }\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    sendSync: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    autoStart: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    defaultVal: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n  mounted () {\r\n\r\n    this.countDown()\r\n\r\n  },\r\n  computed: {\r\n    needSendSunc: function () {\r\n      return this.sendSync;\r\n    }\r\n  },\r\n  created: function () {\r\n    this.$on(\"startCount\", function () {\r\n      this.startCountFn();\r\n    });\r\n    this.$on(\"stopCount\", function () {\r\n      this.stopCountFn();\r\n    });\r\n  },\r\n  components: {},\r\n  methods: {\r\n    // 倒计时\r\n    countDown () {\r\n      const that = this;\r\n      //设置截止时间\r\n      let outTime = \"2021-05-16 13:00:00\"\r\n      // let outTime = \"2021-05-16 13:00:00\"\r\n      let endDate = new Date(outTime).getTime();\r\n      let timeID = setInterval(function () {\r\n        //获取当前时间\r\n        let date = new Date();\r\n        let startDate = date.getTime();\r\n        //时间差  \r\n        let leftTime = endDate - startDate;\r\n        if (leftTime >= 0) {\r\n          that.remainD = Math.floor(leftTime / 1000 / 60 / 60 / 24);\r\n          that.remainH = Math.floor(leftTime / 1000 / 60 / 60 % 24) + that.remainD * 24;\r\n          that.remainM = Math.floor(leftTime / 1000 / 60 % 60) < 10 ? '0' + Math.floor(leftTime / 1000 / 60 % 60) : Math.floor(leftTime / 1000 / 60 % 60);\r\n          that.remainS = Math.floor(leftTime / 1000 % 60) < 10 ? '0' + Math.floor(leftTime / 1000 % 60) : Math.floor(leftTime / 1000 % 60);\r\n          that.countString = `${that.remainH < 10 ? '0' + that.remainH : that.remainH}:${that.remainM}:${that.remainS}`;\r\n        } else {\r\n          if (that.autoStart) {\r\n            that.startCountFn();\r\n          }\r\n          clearInterval(timeID);\r\n        }\r\n      }, 1000)\r\n    },\r\n    // 计算当前比赛进行时间\r\n    counterFn: function (counterTime) {\r\n      var vm = this;\r\n      var nowDate = new Date().getTime();\r\n      if (vm.pauseTime == 0) {\r\n        var num = nowDate - counterTime; //计算时间毫秒差\r\n      } else {\r\n        vm.pauseTime = vm.pauseTime + 10;\r\n        var num = vm.pauseTime - counterTime; //计算时间毫秒差\r\n      }\r\n      var leave1 = num % (24 * 3600 * 1000); //计算天数后剩余的毫秒数\r\n      var leave2 = leave1 % (3600 * 1000); //计算小时数后剩余的毫秒数\r\n      var leave3 = leave2 % (60 * 1000); //计算分钟数后剩余的毫秒数\r\n      vm.day = Math.floor(num / (24 * 3600 * 1000)); //计算相差天数\r\n      vm.hour = Math.floor(leave1 / (3600 * 1000)) < 10 ? '0' + Math.floor(leave1 / (3600 * 1000)) : Math.floor(leave1 / (3600 * 1000)); //计算相差小时\r\n      vm.minute = Math.floor(leave2 / (60 * 1000)) < 10 ? '0' + Math.floor(leave2 / (60 * 1000)) : Math.floor(leave2 / (60 * 1000)); //计算相差分钟\r\n      vm.second = Math.round(leave3 / 1000) < 10 ? '0' + Math.round(leave3 / 1000) : Math.round(leave3 / 1000); //计算相差秒\r\n      vm.countString = `${vm.hour}:${vm.minute}:${vm.second}`;\r\n    },\r\n    startCountFn: function () {\r\n      var vm = this;\r\n      if (!vm.isStart) {\r\n        vm.countVal = vm.countVal ? vm.countVal : new Date().getTime();\r\n        var timer = setInterval(function () {\r\n          vm.counterFn(vm.countVal);\r\n        }, 10);\r\n        vm.globalTimer = timer;\r\n        vm.isStart = true;\r\n      }\r\n    },\r\n    stopCountFn: function () {\r\n      var vm = this;\r\n      if (vm.isStart) {\r\n        window.clearInterval(vm.globalTimer);\r\n        vm.globalTimer = null;\r\n        vm.isStart = false;\r\n        vm.pauseTime = new Date().getTime();\r\n      }\r\n    },\r\n    passToParent: function (data) {\r\n      var vm = this;\r\n      this.$emit(\"getDataFromChild\", data);\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./time.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./time.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./time.vue?vue&type=template&id=51d75c28&\"\nimport script from \"./time.vue?vue&type=script&lang=js&\"\nexport * from \"./time.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"left-container\">\r\n    <div class=\"time-box\">\r\n      <img src=\"../../assets/image/sz.png\" alt srcset />\r\n      <timexs :sendSync=\"true\" :autoStart=\"true\" :defaultVal=\"0\"></timexs>\r\n    </div>\r\n    <!-- <div class=\"weather-box\">\r\n      <div class=\"water-iteam\">\r\n        <img :src=\"require(`../../assets/weatherIcon/${$store.getters.weatherobj.weather}.png`)\" />\r\n        <div>{{$store.getters.weatherobj.temperature}}°</div>\r\n        <div class=\"mony-font\">\r\n          <div>风力：{{$store.getters.weatherobj.windPower}}</div>\r\n          <div>湿度：{{$store.getters.weatherobj.humidity}}</div>\r\n        </div>\r\n      </div>\r\n    \r\n    </div>-->\r\n    <div class=\"gd-box\">\r\n      <div class=\"tit\">\r\n        <div class=\"titl\">当前排名</div>\r\n        <div class=\"titlin\"></div>\r\n      </div>\r\n      <div class=\"tab-tit\">\r\n        <div class=\"tab-tit1\">姓名</div>\r\n        <div class=\"tab-tit2\">设备号</div>\r\n        <div class=\"tab-tit3\">速度<br />km/h</div>\r\n      </div>\r\n      <div class=\"lb-box\">\r\n      \r\n            <div\r\n              class=\"\"\r\n              v-for=\"(itam, index) in $store.getters.rankingData\"\r\n              :key=\"index\"\r\n            >\r\n              <div class=\"itampaiming\">\r\n                <div class=\"indexname\">\r\n                  <div\r\n                    :class=\"\r\n                      index + 1 == 1\r\n                        ? 'numberimg1'\r\n                        : index + 1 == 2\r\n                        ? 'numberimg2'\r\n                        : index + 1 == 3\r\n                        ? 'numberimg3'\r\n                        : ''\r\n                    \"\r\n                  >\r\n                    {{\r\n                      index + 1 == 1\r\n                        ? ''\r\n                        : index + 1 == 2\r\n                        ? ''\r\n                        : index + 1 == 3\r\n                        ? ''\r\n                        : index + 1\r\n                    }}\r\n                  </div>\r\n                  <div class=\"nawe\">{{ itam.userName }}</div>\r\n                </div>\r\n                <div class=\"indexnum\">{{ itam.name }}</div>\r\n                <div class=\"indexnum\">{{ itam.speed }}km/h</div>\r\n              </div>\r\n            </div>\r\n       \r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import Swiper from \"swiper\";\r\nimport timexs from \"./time.vue\";\r\n// import 'swiper/dist/css/swiper.min.css'\r\nexport default {\r\n  components: {\r\n    timexs\r\n  },\r\n  data () {\r\n    return {\r\n      mySwiper: null,\r\n      currentTime: 0,\r\n      timeObj: null, // 时间对象,下方会用到\r\n\r\n    };\r\n  },\r\n  watch: {\r\n    '$store.getters.rankingData': {\r\n      handler: function (newVal, oldVal) {\r\n        // TO DO\r\n        console.log(newVal)\r\n      \r\n     \r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    },\r\n  },\r\n  created () {\r\n    // this.testTimer()\r\n  },\r\n  mounted () {\r\n    // this.mySwiper = new Swiper(\".swiper-container\", {\r\n    //   autoplay: {\r\n    //     delay: 5000,\r\n    //     stopOnLastSlide: false,\r\n    //     disableOnInteraction: true\r\n    //   },\r\n    //   // mousewheel: true,\r\n    //   direction: 'vertical',\r\n    //   loop: true, // 循环模式选项\r\n    //   observer: true, // 修改swiper自己或子元素时，自动初始化swiper\r\n    //   observeParents: true // 修改swiper的父元素时，自动初始化swiper\r\n    // });\r\n    /* 鼠标滑过pagination控制swiper切换*/\r\n  },\r\n  methods: {\r\n    testTimer () {\r\n      this.timeFunction();\r\n      setInterval(() => {\r\n        this.timeFunction();\r\n      }, 1000);\r\n    },\r\n    timeFunction () {\r\n      // 开始执行倒计时\r\n      this.timeObj = {\r\n        // 时间对象\r\n        seconds: Math.floor(this.currentTime % 60),\r\n        minutes: Math.floor(this.currentTime / 60) % 60,\r\n        hours: Math.floor(this.currentTime / 60 / 60) % 24\r\n      };\r\n      // 计算出时分秒\r\n      this.myHours =\r\n        this.timeObj.hours < 10 ? \"0\" + this.timeObj.hours : this.timeObj.hours;\r\n      this.myMinutes =\r\n        this.timeObj.minutes < 10\r\n          ? \"0\" + this.timeObj.minutes\r\n          : this.timeObj.minutes;\r\n      this.mySeconds =\r\n        this.timeObj.seconds < 10\r\n          ? \"0\" + this.timeObj.seconds\r\n          : this.timeObj.seconds;\r\n      this.currentTime++;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.left-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-sizing: border-box;\r\n  .padding(0, 20, 0, 20);\r\n  border-radius: 8px;\r\n  .time-box {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    .vw(440);\r\n    .vh(150);\r\n    .font-size(60);\r\n    color: #ffffff;\r\n    background: url('../../assets/image/k1@3x.png');\r\n    background-size: 100% 100%;\r\n    font-family: DS-Digital;\r\n    font-weight: bold;\r\n    .padding(0, 50, 0, 50);\r\n    // img {\r\n    //   .margin(0, 35, 0, 0);\r\n    // }\r\n    img {\r\n      .vw(68);\r\n      .vh(68);\r\n    }\r\n  }\r\n  .weather-box {\r\n    width: 100%;\r\n    background: #0389c7;\r\n    border-radius: 8px;\r\n    box-sizing: border-box;\r\n    .padding(12, 12, 12, 12);\r\n    .water-iteam {\r\n      display: flex;\r\n      justify-content: space-around;\r\n      color: #ffffff;\r\n      .font-size(28);\r\n      align-items: center;\r\n    }\r\n    .mony-font {\r\n      .font-size(18);\r\n      text-align: left;\r\n      .line-height(28);\r\n    }\r\n    .water-iteam1 {\r\n      .font-size(36);\r\n      justify-content: flex-start;\r\n      .padding(0, 0, 0, 36);\r\n      .yx {\r\n        .margin(0, 0, 0, 26);\r\n      }\r\n    }\r\n  }\r\n  .gd-box {\r\n    .vw(440);\r\n    .vh(774);\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: url('../../assets/image/k.png');\r\n    background-size: 100% 100%;\r\n    .margin(16, 0, 0, 0);\r\n    box-sizing: border-box;\r\n    .padding(0,20,20,20);\r\n    .tit {\r\n      width: 100%;\r\n      .font-size(24);\r\n      color: #ffffff;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: center;\r\n      align-items: center;\r\n      .margin(36,0,0,0);\r\n      .titlin {\r\n        .vw(30);\r\n        .vh(4);\r\n        background: #fff;\r\n        .margin(10,0,0,0);\r\n      }\r\n    }\r\n    .lb-box {\r\n      flex: 1;\r\n      .swiper-container {\r\n        width: 100%;\r\n        height: 100%;\r\n        overflow: hidden;\r\n        // .swiper-wrapper{\r\n        //    width:100%;\r\n        // height:100%;\r\n        // }\r\n        .swiper-slide {\r\n          width: 100%;\r\n          .vh(60) !important;\r\n          .itampaiming {\r\n            width: 100%;\r\n            .vh(60);\r\n            display: flex;\r\n            justify-content: space-around;\r\n            .font-size(20);\r\n            color: #ffffff;\r\n            background: RGBA(2, 23, 63, 0.6);\r\n            align-items: center;\r\n            border-bottom: 1.5px solid RGBA(45, 65, 97, 0.3);\r\n            .numberimg1 {\r\n              .vw(30);\r\n              .vh(30);\r\n              background: url('../../assets/image/TOP1@3x.png');\r\n              background-size: 100% 100%;\r\n            }\r\n            .numberimg2 {\r\n              .vw(30);\r\n              .vh(30);\r\n              background: url('../../assets/image/TOP2@3x.png');\r\n              background-size: 100% 100%;\r\n            }\r\n            .numberimg3 {\r\n              .vw(30);\r\n              .vh(30);\r\n              background: url('../../assets/image/TOP3@3x.png');\r\n              background-size: 100% 100%;\r\n            }\r\n            .indexname {\r\n              display: flex;\r\n              align-items: center;\r\n              .nawe {\r\n                .margin(0,0,0,6);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .tab-tit {\r\n      width: 100%;\r\n      .vh(54);\r\n      display: flex;\r\n      .font-size(20);\r\n      .margin(20,0,0,0);\r\n      box-sizing: border-box;\r\n      .padding(8,0,8,0);\r\n      color: #ffffff;\r\n      align-items: center;\r\n      background: RGBA(15, 38, 79, 0.8);\r\n      .tab-tit1 {\r\n        .vw(180);\r\n      }\r\n      .tab-tit2 {\r\n        flex: 1;\r\n      }\r\n      .tab-tit3 {\r\n        flex: 1;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n.lb-box {\r\n  .header-item {\r\n    .font-size(20);\r\n  }\r\n  .ceil {\r\n    .font-size(20);\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./leftBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./leftBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./leftBox.vue?vue&type=template&id=c48cf910&scoped=true&\"\nimport script from \"./leftBox.vue?vue&type=script&lang=js&\"\nexport * from \"./leftBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./leftBox.vue?vue&type=style&index=0&id=c48cf910&lang=less&scoped=true&\"\nimport style1 from \"./leftBox.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c48cf910\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"right-container\"},[_c('div',{staticClass:\"weatwr\"},[_c('div',{staticClass:\"rgt\"},[_c('div',{staticClass:\"wdb\"},[_c('div',[_vm._v(_vm._s(_vm.$store.getters.weatherobj.temperature)+\"°\")]),_c('img',{attrs:{\"src\":require((\"../../assets/weatherIcon/\" + (_vm.$store.getters.weatherobj.weather) + \".png\"))}})]),_vm._m(0)]),_c('div',{staticClass:\"rgt\"},[_c('div',[_vm._v(\"风力：\"+_vm._s(_vm.$store.getters.weatherobj.windPower))]),_c('div',[_vm._v(\"湿度：\"+_vm._s(_vm.$store.getters.weatherobj.humidity))]),_c('div',[_vm._v(\"气压：暂无\")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wdb wdb1\"},[_c('div',[_vm._v(\"AQI\")]),_c('div',{staticStyle:{\"margin-left\":\"0.2vw\",\"margin-right\":\"0.5vw\"}},[_vm._v(\"30\")]),_c('div',[_vm._v(\"优\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"right-container\">\r\n    <div class=\"weatwr\">\r\n      <!-- <img :src=\"require(`../../assets/weatherIcon/${$store.getters.weatherobj.weather}.png`)\" />\r\n        <div>{{$store.getters.weatherobj.temperature}}°</div>\r\n        <div class=\"mony-font\">\r\n          <div>风力：{{$store.getters.weatherobj.windPower}}</div>\r\n          <div>湿度：{{$store.getters.weatherobj.humidity}}</div>\r\n        </div> -->\r\n      <div class=\"rgt\">\r\n        <div class=\"wdb\">\r\n          <div>{{ $store.getters.weatherobj.temperature }}°</div>\r\n          <img\r\n            :src=\"\r\n              require(`../../assets/weatherIcon/${$store.getters.weatherobj.weather}.png`)\r\n            \"\r\n          />\r\n        </div>\r\n        <div class=\"wdb wdb1\">\r\n          <div>AQI</div>\r\n          <div style=\"margin-left: 0.2vw; margin-right: 0.5vw\">30</div>\r\n          <div>优</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"rgt\">\r\n        <div>风力：{{ $store.getters.weatherobj.windPower }}</div>\r\n        <div>湿度：{{ $store.getters.weatherobj.humidity }}</div>\r\n        <div>气压：暂无</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport videojs from 'video.js'\r\nimport 'videojs-contrib-hls'\r\nexport default {\r\n  components: {},\r\n  data () {\r\n    return {\r\n    };\r\n  },\r\n  created () { },\r\n  mounted () {\r\n\r\n  },\r\n\r\n\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.right-container {\r\n  // width: 100%;\r\n  // height: 100%;\r\n  position: relative;\r\n  .weatwr {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    position: absolute;\r\n    .left(0);\r\n    .top(74);\r\n    .vw(440);\r\n    .vh(190);\r\n    .padding(40, 32, 40, 32);\r\n    background: url('../../assets/image/k4@3x.png');\r\n    background-size: 100% 100%;\r\n    -webkit-user-select: none;\r\n    -moz-user-select: none;\r\n    -ms-user-select: none;\r\n    user-select: none;\r\n    .rgt {\r\n      height: 100%;\r\n      display: flex;\r\n      flex-direction: column;\r\n      justify-content: space-between;\r\n      // align-items: center;\r\n      .font-size(24);\r\n      color: #ffffff;\r\n      .wdb {\r\n        display: flex;\r\n        .font-size(40);\r\n        align-items: center;\r\n        font-weight: 800;\r\n        img {\r\n          .vw(48);\r\n          .vh(36);\r\n        }\r\n        // text-align:left;\r\n      }\r\n      .wdb1 {\r\n        .font-size(33);\r\n      }\r\n      div {\r\n        text-align: left;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./rightTBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./rightTBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rightTBox.vue?vue&type=template&id=055dfc70&scoped=true&\"\nimport script from \"./rightTBox.vue?vue&type=script&lang=js&\"\nexport * from \"./rightTBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rightTBox.vue?vue&type=style&index=0&id=055dfc70&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"055dfc70\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"right-container\"},[_c('div',{staticClass:\"videobox\"},[_c('iframe',{staticStyle:{\"width\":\"90%\",\"height\":\"90%\"},attrs:{\"src\":\"http://liveshare.huya.com/iframe/52724\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"right-container\">\r\n    <div class=\"videobox\">\r\n      <iframe\r\n        style=\"width: 90%; height: 90%\"\r\n        src=\"http://liveshare.huya.com/iframe/52724\"\r\n      ></iframe>\r\n      <!-- <div class=\"video-js-box\">\r\n        <video\r\n          id=\"my-video\"\r\n          muted\r\n          class=\"video-js\"\r\n          controls\r\n          preload=\"auto\"\r\n          poster\r\n          style=\"width: 100%; height: 100%; object-fit: fill\"\r\n        >\r\n          <source\r\n            src=\"http://liveshare.huya.com/iframe/24565242\"\r\n            type=\"application/x-mpegURL\"\r\n          />\r\n        </video>\r\n      </div> -->\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import videojs from 'video.js'\r\n// import 'videojs-contrib-hls'\r\nexport default {\r\n  components: {},\r\n  data () {\r\n    return {\r\n      myPlayer: '',  //播放器\r\n      videoUrl: 'blob:https://www.huya.com/0c1f1195-e073-4015-8db6-6f7b8ac9a980'  //直播视频地址\r\n    };\r\n  },\r\n  created () { },\r\n  mounted () {\r\n\r\n    // videojs('my-video', {\r\n    //   bigPlayButton: false,\r\n    //   textTrackDisplay: false,\r\n    //   posterImage: true,\r\n    //   errorDisplay: false,\r\n    //   controlBar: true\r\n    // }, function () {\r\n    //   this.play()\r\n    // })\r\n    //初始化视频\r\n    // if(this.videoUrl){\r\n    //     this.myPlayer = this.$video(myVideo, {\r\n    //         controls: true, //启动视频播放的唯一方法是使用autoplay属性或通过Player /v1。\r\n    //         autoplay: true,  //自动播放属性,muted:静音播放 muted \r\n    //         preload: \"auto\",    //建议浏览器是否应在<video>加载元素后立即开始下载视频数据。\r\n    //         \"sources\": [{\r\n    //             src: this.videoUrl,\r\n    //             type:\"blob\"\r\n    //         }],\r\n    //     },function(){});\r\n    // }else{\r\n    //     const videoDom = this.$refs.viodeRef;  //不能用document 获取节点\r\n    //     this.$video(videoDom).dispose();  \r\n    // }\r\n  },\r\n  beforeDestroy: function () {\r\n    //离开页面销毁video实例，避免出现节点不存在 但是flash一直在执行，报 this.el.......is not function\r\n    const videoDom = this.$refs.viodeRef;  //不能用document 获取节点\r\n    this.$video(videoDom).dispose();\r\n  },\r\n  methods: {},\r\n\r\n\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.right-container {\r\n  // width: 100%;\r\n  // height: 100%;\r\n  position: relative;\r\n  .videobox {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    position: absolute;\r\n    .left(0);\r\n    .bottom(90);\r\n    .vw(440);\r\n    .vh(280);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    background: url('../../assets/image/k4@3x.png');\r\n    background-size: 100% 100%;\r\n    .video-js-box {\r\n      width: 95.8%;\r\n      height: 93%;\r\n      // z-index: -1;\r\n      .margin (0, 0, 0, 0);\r\n      -webkit-clip-path: polygon(\r\n        38% 0,\r\n        40.5% 3.5%,\r\n        60% 3.5%,\r\n        62.6% 0,\r\n        95.8% 0,\r\n        100% 7%,\r\n        100% 94%,\r\n        96.3% 100%,\r\n        4.2% 100%,\r\n        0 94%,\r\n        0 6.8%,\r\n        4.3% 0\r\n      );\r\n      clip-path: polygon(\r\n        38% 0,\r\n        40.5% 3.5%,\r\n        60% 3.5%,\r\n        62.6% 0,\r\n        95.8% 0,\r\n        100% 7%,\r\n        100% 94%,\r\n        96.3% 100%,\r\n        4.2% 100%,\r\n        0 94%,\r\n        0 6.8%,\r\n        4.3% 0\r\n      );\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./rightBBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./rightBBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./rightBBox.vue?vue&type=template&id=6720ead2&scoped=true&\"\nimport script from \"./rightBBox.vue?vue&type=script&lang=js&\"\nexport * from \"./rightBBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./rightBBox.vue?vue&type=style&index=0&id=6720ead2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6720ead2\",\n  null\n  \n)\n\nexport default component.exports","const linePath= \r\n   [\r\n   120.991449, 31.05981,\r\n   120.991416,31.058287,\r\n   120.99133,31.055953,\r\n   120.991294, 31.054582,\r\n\r\n   120.991282, 31.05412,\r\n   120.990773,31.052616,\r\n   120.990172,31.05087,\r\n\r\n\r\n   120.989471, 31.04876,\r\n   120.989448, 31.048534,\r\n   120.988008, 31.049107,\r\n   120.986872, 31.049273,\r\n   120.984436, 31.049539,\r\n   120.98397, 31.049788,\r\n\r\n   120.98263,31.051409,\r\n   120.981708,31.052604,\r\n   120.979931, 31.054778,\r\n\r\n\r\n   \r\n   120.979385, 31.055119,\r\n   120.976864,31.055375,\r\n   120.973743, 31.055628,\r\n   120.971971,31.055016,\r\n   120.970282, 31.054489,\r\n   120.970154, 31.054161,\r\n   120.970904,31.051804,\r\n   120.971633,31.049635,\r\n   120.972406,31.047429,\r\n   120.972907, 31.045519,\r\n   120.972952, 31.044903,\r\n   120.972929, 31.044171,\r\n   120.972749, 31.043266, //22\r\n   120.972728, 31.041001,//22\r\n   120.973166, 31.03849,//22\r\n   120.973134,31.03593,\r\n   120.973048,31.033613,\r\n   120.973091,31.030009,\r\n   120.973048,31.02578,\r\n   120.973084, 31.020724,\r\n   120.975001,31.020779,\r\n   120.976782, 31.020865,\r\n   120.97808,31.020388,\r\n   120.977932, 31.020396,\r\n   120.98015,31.020392,\r\n  120.982918,31.020448,\r\n   120.985545, 31.020589,\r\n   120.987619, 31.021436,\r\n   120.989872, 31.022228,\r\n   120.99039, 31.022603,\r\n   120.991022, 31.022811,\r\n   120.992011, 31.02277,\r\n   120.992983, 31.022436,\r\n   120.994953, 31.022507,\r\n   120.9962, 31.022638,\r\n  120.997133,31.023565,\r\n  120.999021,31.023721,\r\n  121.000925,31.023767,\r\n  121.001794,31.023298,\r\n   121.001838, 31.023235,\r\n   121.002301, 31.022496,\r\n   121.002355, 31.022052,\r\n   121.002506, 31.021748,\r\n   121.002851, 31.021507,\r\n   121.003735, 31.021249,\r\n   121.005234, 31.021193,\r\n   121.007094,31.021266,\r\n   121.009411, 31.021367,\r\n   121.010231, 31.02168,\r\n   121.01076, 31.021695,\r\n   121.01116, 31.021477,\r\n   121.013328,31.021597,\r\n   121.015452,31.021689,\r\n   121.018006,31.021781,\r\n   121.021439,31.021983,\r\n   121.024314,31.022057,\r\n   121.02632, 31.022205,\r\n   121.028091,31.022443,\r\n   121.030022,31.022682,\r\n   121.03161,31.022866,\r\n   121.033369,31.023105,\r\n   121.035343,31.023363,\r\n   121.037596,31.023638,\r\n   121.040493,31.023988,\r\n   121.043294, 31.024305,\r\n   121.047763, 31.024894,\r\n   121.047763, 31.024894,\r\n   121.049934, 31.025402,\r\n   121.052016,31.025679,\r\n   121.053981, 31.025858,\r\n   121.05631,31.026135,\r\n   121.058649,31.026374,\r\n   121.060966,31.026686,\r\n   121.063283,31.026944,\r\n   121.065644,31.02733,\r\n   121.068004,31.027698,\r\n   121.070257,31.027992,\r\n   121.072274, 31.028352,\r\n   121.07305, 31.02886,\r\n   121.073301, 31.029358,\r\n   121.072913, 31.031039,\r\n   121.069823,31.032791,\r\n   121.0694, 31.033062,\r\n   121.067773,31.034142,\r\n   121.066613, 31.035064,\r\n   121.064603,31.036661,\r\n   121.062578, 31.038179,\r\n   121.061418, 31.038583,\r\n   121.060874, 31.038645,\r\n   121.060442, 31.038566,\r\n   121.060021, 31.038487,\r\n   121.059467, 31.03905,\r\n   121.059364, 31.039366,\r\n   121.059364, 31.039665,\r\n   121.059713, 31.039745,\r\n  //  121.060288, 31.039745,\r\n   121.061192, 31.039806,\r\n   121.061613, 31.039921,\r\n   121.061572, 31.040167,\r\n   121.061243, 31.040695,\r\n   121.06022,31.042384,\r\n   121.059212, 31.043915,\r\n   121.057837,  31.045467,\r\n   121.056433,31.04658,\r\n   121.056509, 31.04698,\r\n   121.055978, 31.047663,\r\n   121.054044, 31.048831,\r\n   121.052329, 31.049555,\r\n   121.051014, 31.049837,\r\n   121.048971, 31.050642,\r\n   121.046981,31.051488,\r\n   121.045518, 31.05207,\r\n   121.044015, 31.052614,\r\n   121.043075, 31.052815,\r\n   121.042488, 31.053016,\r\n   121.041525, 31.054183,\r\n   121.040116, 31.054867,\r\n   121.039599, 31.055491,\r\n   121.038224,31.056507,\r\n   121.036379,31.057776,\r\n   121.034555,31.058915,\r\n   121.032788, 31.060078,\r\n   121.032578, 31.060097,\r\n]\r\nexport default {\r\n  linePath\r\n}\r\n","<template>\r\n  <div class=\"all-box\" id=\"container\">\r\n    <!-- <div class=\"infowindow\">\r\n      <div class=\"name\">Id:{{ curInfoWindow.id }}</div>\r\n      <div class=\"name\">姓名:{{ curInfoWindow.userName }}</div>\r\n      <div class=\"name\">设备号：{{ curInfoWindow.imei }}</div>\r\n    </div> -->\r\n    <div class=\"header-box\"></div>\r\n    <div class=\"left-box\">\r\n      <leftbox></leftbox>\r\n    </div>\r\n    <div class=\"right-t-box\">\r\n      <righttbox></righttbox>\r\n    </div>\r\n    <div class=\"right-b-box\">\r\n      <rightbbox></rightbbox>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport leftbox from \"./leftBox.vue\";\r\nimport righttbox from \"./rightTBox.vue\";\r\nimport rightbbox from \"./rightBBox.vue\";\r\nimport linePath from './linePath'\r\nexport default {\r\n  components: {\r\n    leftbox,\r\n    righttbox,\r\n    rightbbox\r\n  },\r\n  data () {\r\n    return {\r\n      MyMip: null,\r\n      passedPolyline: null,\r\n      timer: null, //d定时掉接口\r\n      allpoint: [],\r\n      carGroup: new AMap.OverlayGroup(), // 参赛群组\r\n      heatmap: null,\r\n      heatmapData: [],\r\n      query: {\r\n        page: 1,\r\n        pageSize: 15,\r\n        imei: \"\"\r\n      },\r\n      websock: null,\r\n      timerSocket: null,\r\n      timerHeatMap: null,\r\n\r\n      curMarkerList: [],\r\n      curMarkerAllData:[],\r\n      linePathList: [],\r\n      curDataList: [],\r\n      curInfoWindow: {},\r\n      hhh:0,\r\n\r\n    };\r\n  },\r\n  created () {\r\n    this.getImeis()\r\n    let that = this\r\n    this.timerHeatMap = setInterval(() => {\r\n      if (that.heatmap) {\r\n        that.heatmap.setMap(null)\r\n      }\r\n      that.curDataList.forEach(item => {\r\n        item.count = 0\r\n      })\r\n      that.allpoint.forEach((item, index) => {\r\n        that.curDataList.forEach((items, indexs) => {\r\n          var p1 = [items.lng, items.lat];\r\n          var p2 = [item.getExtData().lng, item.getExtData().lat];\r\n          let distance = AMap.GeometryUtil.distance(p1, p2);\r\n          if (item.getExtData().lng != 0 && item.getExtData.lat != 0 && distance <= 200) {\r\n            items.count = items.count + 1\r\n          }\r\n        })\r\n      })\r\n      that.heatMap()\r\n      that.heatmapData = that.cloneObj(that.curDataList)\r\n      that.heatmap.setDataSet({ data: that.heatmapData, min: 1, max: 100 });\r\n    }, 10000);\r\n  },\r\n  mounted () {\r\n    this.initmap();\r\n    if (sessionStorage.getItem(\"isReload\")) {\r\n      console.log(\"页面被刷新\");\r\n      clearInterval(this.timerSocket);\r\n      if (this.websock) {\r\n        this.websock.close(); //离开路由之后断开websocket连接\r\n      }\r\n    } else {\r\n      console.log(\"首次被加载\");\r\n      sessionStorage.setItem(\"isReload\", true)\r\n    }\r\n\r\n    let mypath = linePath.linePath\r\n    this.linePathList = this.separateArr(mypath, 2);\r\n    this.curDataList = []\r\n    this.linePathList.forEach(item => {\r\n      let obj = {\r\n        lng: item[0],\r\n        lat: item[1],\r\n        count: 1\r\n      }\r\n      this.curDataList.push(obj)\r\n    })\r\n\r\n  },\r\n  destroyed () {\r\n    this.websock.close(); //离开路由之后断开websocket连接\r\n    clearInterval(this.timerHeatMap);\r\n  },\r\n  methods: {\r\n    getImeis () {\r\n      let arpoly = [];\r\n      this.$fetchGet('/cycling/user/getImeis').then(res => {\r\n        res.content.forEach((items, indexs) => {\r\n          items.curMarkerObj = items\r\n          items.curMarkerObj.curMarkerData = []\r\n          items.curMarkerObj.curMarkerData.push([items.lng, items.lat])\r\n          items.count = 0;\r\n          items.rankNumber = 0;\r\n          this.allpoint.push(this.setMarker(items));\r\n          // this.carGroup.addOverlays(this.allpoint);\r\n          // 计算点位是否在当前路线点200米之内\r\n          this.curDataList.forEach((item, index) => {\r\n            var p1 = [item.lng, item.lat];\r\n            var p2 = [items.lng, items.lat];\r\n            let distance = AMap.GeometryUtil.distance(p1, p2);\r\n            if (distance <= 200) {\r\n              item.count = item.count + 1\r\n            }\r\n          })\r\n        })\r\n        this.heatmapData = this.cloneObj(this.curDataList)\r\n        this.heatmap.setDataSet({ data: this.heatmapData, min: 1, max: 100 });\r\n        let arrw = res.content.slice(0, 10)\r\n        this.$store.commit(\"SET_RANK\", arrw);\r\n        this.initWebSocket();\r\n      })\r\n    },\r\n    countTime () { },\r\n    initWebSocket () {\r\n      //初始化weosocket\r\n      const wsuri = \"ws://101.231.47.116:50000/cycling/realtime/socket\";\r\n      // const wsuri = \"ws://192.168.1.106:8080/cycling/realtime/socket\";\r\n      // const wsuri = \"ws://192.168.1.103:8080/cycling/realtime/socket\";\r\n\r\n      // const wsuri = \"ws://10.1.30.202:50000/cycling/realtime/socket\";\r\n      this.websock = new WebSocket(wsuri);\r\n      this.websock.onopen = event => {\r\n        console.log(\"数据已经链接\", event);\r\n        this.timerFun()\r\n        \r\n      };\r\n      this.websock.onmessage = res => {\r\n        console.log(\"接收数据\");\r\n       \r\n        // this.curMarkerAllData = []\r\n        // this.curMarkerList = []\r\n        // this.$store.commit(\"SET_RANK\", []);\r\n        let objme = JSON.parse(res.data).content[0];\r\n        \r\n        if (objme) {\r\n         console.log(this.allpoint,\"allpoint\")\r\n          this.allpoint.forEach((item, index) => {\r\n            item.getExtData().oldLng = item.getExtData().lng\r\n            item.getExtData().oldLat = item.getExtData().lat\r\n            if (objme.lng !== 0 && objme.lat !== 0&&objme.imei==item.getExtData().imei ) {\r\n              if (item.getExtData().curMarkerObj) {\r\n                this.curMarkerAllData.push(item.getExtData().curMarkerObj)\r\n              }\r\n              console.log(this.curMarkerAllData,\"curMarkerAllData\")\r\n              this.allpoint[index].show()\r\n              this.allpoint[index].setPosition([objme.lng,objme.lat]); //实时更新自行车的位置\r\n              let curInfo = item.getExtData().curMarkerObj\r\n              for (let i in curInfo) {\r\n                for (let z in objme) {\r\n                  if (i == z) {\r\n                    curInfo[i] = objme[z]\r\n                  }\r\n                }\r\n              }\r\n              if (curInfo) {\r\n                curInfo.curMarkerData.push([objme.lng, objme.lat])\r\n              }\r\n              curInfo.rankNumber = AMap.GeometryUtil.distanceOfLine(curInfo.curMarkerData);\r\n              // console.log(curInfo.userName, curInfo.rankNumber)\r\n              item.getExtData().lng = objme.lng\r\n              item.getExtData().lat = objme.lat\r\n                console.log(this.curMarkerList)\r\n              this.curMarkerList = this.curMarkerAllData\r\n              let arr = this.curMarkerList.sort(\r\n                this.createComprisonFunction(\"rankNumber\")\r\n              );\r\n              console.log(arr,\"arr\")\r\n              this.$store.commit(\"SET_RANK\", arr.slice(0, 10));\r\n            } else if (objme.lng == 0 && objme.lat == 0 &&objme.imei==item.getExtData().imei) {\r\n              this.allpoint[index].hide();\r\n\r\n              item.getExtData().lng = objme.lng\r\n              item.getExtData().lat = objme.lat\r\n            }\r\n\r\n          })\r\n\r\n        }\r\n      };\r\n      this.websock.onerror = e => {\r\n        console.log(\"链接失败\", e);\r\n      };\r\n      this.websock.onclose = e => {\r\n        let that = this\r\n\r\n        clearInterval(this.timerSocket);\r\n        console.log(\"断开连接\", e);\r\n        this.websock.close(); //离开路由之后断开websocket连接\r\n        if (e.currentTarget.readyState === 3) {\r\n          this.initWebSocket();\r\n        }\r\n      };\r\n    },\r\n    timerFun(){\r\n      //要执行的操作\r\n      this.allpoint.forEach(item => {\r\n          this.websock.send('cycling_' + item.getExtData().imei)\r\n        })\r\n      var timer=setTimeout(()=>{\r\n        this.timerFun()\r\n        clearTimeout(timer)\r\n      },5000)\r\n\r\n    },\r\n    heatMap () {\r\n      this.MyMip.plugin([\"AMap.HeatMap\"], () => {\r\n        //初始化heatmap对象\r\n        this.heatmap = new AMap.HeatMap(this.MyMip, {\r\n          radius: 65, //给定半径\r\n          opacity: [0, 0.8]\r\n        });\r\n      });\r\n    },\r\n    initmap () {\r\n      this.MyMip = new AMap.Map(\"container\", {\r\n        resizeEnable: true,\r\n        // zoom: 11.6,\r\n        // center: [121.003735, 31.021249],\r\n        zoom: 13.5,\r\n        center: [121.008434, 31.038352],\r\n\r\n        mapStyle: \"amap://styles/acd388fb971c7574c3c9219b4b04d90d\"\r\n      });\r\n      if (!this.isSupportCanvas()) {\r\n        alert('热力图仅对支持canvas的浏览器适用,您所使用的浏览器不能使用热力图功能,请换个浏览器试试~')\r\n      }\r\n      // this.MyMip.add(this.carGroup);\r\n      let mypath = linePath.linePath\r\n      let markerq = new AMap.Marker({\r\n        icon: require(\"../../assets/image/qw.png\"),\r\n        position: [120.991449, 31.05981],\r\n        offset: new AMap.Pixel(-40, -45)\r\n      });\r\n      markerq.setMap(this.MyMip);\r\n      let markerz = new AMap.Marker({\r\n        icon: require(\"../../assets/image/dx.png\"),\r\n        position: [121.032578, 31.060097],\r\n        offset: new AMap.Pixel(-40, -40)\r\n      });\r\n      markerz.setMap(this.MyMip);\r\n      let wdata = this.separateArr(mypath, 2);\r\n\r\n      // console.log(wdata)\r\n      let poyline = new AMap.Polyline({\r\n        path: wdata,\r\n        map: this.MyMip,\r\n        strokeColor: \"red\", //线颜色\r\n        strokeWeight: 0,\r\n        strokeOpacity: 0.5,\r\n        outlineColor: \"yellow\",\r\n        borderWeight: 9,\r\n        lineJoin: \"round\",\r\n        outlineColor: \"#FF0ABBC5\",\r\n        isOutline: true\r\n      });\r\n      AMap.plugin(\"AMap.Weather\", () => {\r\n        var weather = new AMap.Weather();\r\n        weather.getLive(\"青浦区\", (err, data) => {\r\n          this.$store.commit(\"SET_WEATER\", data);\r\n        });\r\n      });\r\n\r\n      this.heatMap()\r\n    },\r\n    isSupportCanvas () {\r\n      var elem = document.createElement('canvas');\r\n      return !!(elem.getContext && elem.getContext('2d'));\r\n    },\r\n    setMarker (row) {\r\n      let marker = new AMap.Marker({\r\n        map: this.MyMip,\r\n        position: [row.lng, row.lat],\r\n        icon: require(\"./arrow2@3x.png\"),\r\n        offset: new AMap.Pixel(-17, -16),\r\n        extData: row\r\n      });\r\n      marker.on('click', e => {\r\n        this.curInfoWindow = e.target.getExtData()\r\n      })\r\n      return marker;\r\n    },\r\n    setPolyline () {\r\n      let passedPolyline = new AMap.Polyline({\r\n        map: this.MyMip,\r\n        strokeColor: \"#AF5\", //线颜色\r\n        strokeWeight: 0.1 //线宽\r\n      });\r\n      return passedPolyline;\r\n    },\r\n    //数组的排序\r\n    createComprisonFunction (propertyName) {\r\n      return function (a, b) {\r\n        var value1 = a[propertyName];\r\n        var value2 = b[propertyName];\r\n        /*\r\n        * value2 - value1; ——> 降序\r\n        * value1 - value2; ——> 升序\r\n        */\r\n        return value2 - value1;//升序排序\r\n      };\r\n    },\r\n\r\n    //分隔数组，10\r\n    separateArr (data, n) {\r\n      //获取要切割的数组的长度\r\n      let len = data.length;\r\n      let lineNum = len % n === 0 ? len / n : Math.floor(len / n + 1);\r\n      let res = [];\r\n      for (let i = 0; i < lineNum; i++) {\r\n        // slice() 方法返回一个从开始到结束（不包括结束）选择的数组的一部分浅拷贝到一个新数组对象。且原始数组不会被修改。\r\n        let temp = data.slice(i * n, i * n + n);\r\n        res.push(temp);\r\n      }\r\n\r\n      return res;\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.all-box {\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(10, 28, 54, 1);\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  position: relative;\r\n\r\n  .infowindow {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 300px;\r\n    border: 1px solid #fff;\r\n    background: blue;\r\n    color: #fff;\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n    line-height: 24px;\r\n    z-index: 300;\r\n    text-align: left;\r\n    font-size: 18px;\r\n  }\r\n\r\n  .header-box {\r\n    // .vh(219);\r\n    width: 100%;\r\n    height: 219px;\r\n    background: url('../../assets/image/TOP@3x.png') no-repeat;\r\n    background-size: 100% 100%;\r\n    z-index: 10;\r\n  }\r\n  .left-box {\r\n    position: absolute;\r\n    .vw(480);\r\n    height: 100%;\r\n    .left(0);\r\n    .top(74);\r\n    .padding(35,0,30,22);\r\n    z-index: 10;\r\n  }\r\n  .right-t-box {\r\n    position: absolute;\r\n    .vw(480);\r\n    // height: 100%;\r\n    .right(0);\r\n    .top(74);\r\n    z-index: 10;\r\n  }\r\n\r\n  .right-b-box {\r\n    position: absolute;\r\n    .vw(480);\r\n    // height: 100%;\r\n    .right(0);\r\n    .bottom(-60);\r\n    z-index: 10;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=ef0f5eb8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=ef0f5eb8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ef0f5eb8\",\n  null\n  \n)\n\nexport default component.exports","// By default assume browserify was used to bundle app. These arguments are passed to\n// the module by browserify.\nvar bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\nvar stringify = JSON.stringify;\nvar webpack = false;\n\n// webpackBootstrap\nvar webpackBootstrapFn = function(modules) {\n  // The module cache\n  var installedModules = {};\n\n  // The require function\n  function __webpack_require__(moduleId) {\n\n    // Check if module is in cache\n    if(installedModules[moduleId]) {\n      return installedModules[moduleId].exports;\n    }\n    // Create a new module (and put it into the cache)\n    var module = installedModules[moduleId] = {\n      i: moduleId,\n      l: false,\n      exports: {}\n    };\n\n    // Execute the module function\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n    // Flag the module as loaded\n    module.l = true;\n\n    // Return the exports of the module\n    return module.exports;\n  }\n\n\n  // expose the modules object (__webpack_modules__)\n  __webpack_require__.m = modules;\n\n  // expose the module cache\n  __webpack_require__.c = installedModules;\n\n  // define getter function for harmony exports\n  __webpack_require__.d = function(exports, name, getter) {\n    if(!__webpack_require__.o(exports, name)) {\n      Object.defineProperty(exports, name, {\n        configurable: false,\n        enumerable: true,\n        get: getter\n      });\n    }\n  };\n\n  // getDefaultExport function for compatibility with non-harmony modules\n  __webpack_require__.n = function(module) {\n    var getter = module && module.__esModule ?\n      function getDefault() { return module['default']; } :\n      function getModuleExports() { return module; };\n\n    __webpack_require__.d(getter, 'a', getter);\n    return getter;\n  };\n\n  // Object.prototype.hasOwnProperty.call\n  __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n  // __webpack_public_path__\n  __webpack_require__.p = \"\";\n\n  // Load entry module and return exports\n  return __webpack_require__(__webpack_require__.s = entryModule);\n}\n\nif (typeof bundleFn === 'undefined') {\n  // Assume this was bundled with webpack and not browserify\n  webpack = true;\n  bundleFn = webpackBootstrapFn;\n  sources = __webpack_modules__;\n}\n\nvar bundleWithBrowserify = function(fn) {\n  // with browserify we must find the module key ourselves\n  var cacheKeys = Object.keys(cache);\n  var fnModuleKey;\n\n  for (var i = 0; i < cacheKeys.length; i++) {\n    var cacheKey = cacheKeys[i];\n    var cacheExports = cache[cacheKey].exports;\n\n    // Using babel as a transpiler to use esmodule, the export will always\n    // be an object with the default export as a property of it. To ensure\n    // the existing api and babel esmodule exports are both supported we\n    // check for both\n    if (cacheExports === fn || cacheExports && cacheExports.default === fn) {\n        fnModuleKey = cacheKey;\n        break;\n    }\n  }\n\n  // if we couldn't find one, lets make one\n  if (!fnModuleKey) {\n    fnModuleKey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n    var fnModuleCache = {};\n\n    for (var i = 0; i < cacheKeys.length; i++) {\n      var cacheKey = cacheKeys[i];\n\n      fnModuleCache[cacheKey] = cacheKey;\n    }\n\n    sources[fnModuleKey] = [\n      'function(require,module,exports){' + fn + '(self); }',\n      fnModuleCache\n    ];\n  }\n\n  var entryKey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n  var entryCache = {};\n\n  entryCache[fnModuleKey] = fnModuleKey;\n  sources[entryKey] = [\n    'function(require,module,exports){' +\n    // try to call default if defined to also support babel esmodule exports\n      'var f = require(' + stringify(fnModuleKey) + ');' +\n      '(f.default ? f.default : f)(self);' +\n    '}',\n    entryCache\n  ];\n\n  return '(' + bundleFn + ')({'\n        + Object.keys(sources).map(function(key) {\n            return stringify(key) + ':['\n                + sources[key][0] + ','\n                + stringify(sources[key][1]) + ']';\n        }).join(',')\n        + '},{},[' + stringify(entryKey) + '])';\n};\n\nvar bundleWithWebpack = function(fn, fnModuleId) {\n  var devMode = typeof fnModuleId === 'string';\n  var sourceStrings;\n\n  if (devMode) {\n    sourceStrings = {};\n  } else {\n    sourceStrings = [];\n  }\n\n  Object.keys(sources).forEach(function(sKey) {\n    if (!sources[sKey]) {\n      return;\n    }\n    sourceStrings[sKey] = sources[sKey].toString();\n  });\n\n  var fnModuleExports = __webpack_require__(fnModuleId);\n\n  // Using babel as a transpiler to use esmodule, the export will always\n  // be an object with the default export as a property of it. To ensure\n  // the existing api and babel esmodule exports are both supported we\n  // check for both\n  if (!(fnModuleExports && (fnModuleExports === fn || fnModuleExports.default === fn))) {\n    var fnSourceString = sourceStrings[fnModuleId];\n\n    sourceStrings[fnModuleId] = fnSourceString.substring(0, fnSourceString.length - 1) +\n                                '\\n' + fn.name + '();\\n}';\n  }\n\n  var modulesString;\n\n  if (devMode) {\n    // must escape quotes to support webpack loader options\n    fnModuleId = stringify(fnModuleId);\n    // dev mode in webpack4, modules are passed as an object\n    var mappedSourceStrings = Object.keys(sourceStrings).map(function(sKey) {\n      return stringify(sKey) + ':' + sourceStrings[sKey];\n    });\n\n    modulesString = '{' + mappedSourceStrings.join(',') + '}';\n  } else {\n    modulesString = '[' + sourceStrings.join(',') + ']';\n  }\n\n  return 'var fn = (' + bundleFn.toString().replace('entryModule', fnModuleId) + ')('\n        + modulesString\n        + ');\\n'\n        // not a function when calling a function from the current scope\n        + '(typeof fn === \"function\") && fn(self);';\n\n};\n\nmodule.exports = function webwackify(fn, fnModuleId) {\n  var src;\n\n  if (webpack) {\n    src = bundleWithWebpack(fn, fnModuleId);\n  } else {\n    src = bundleWithBrowserify(fn);\n  }\n\n  var blob = new Blob([src], { type: 'text/javascript' });\n  var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n  var workerUrl = URL.createObjectURL(blob);\n  var worker = new Worker(workerUrl);\n  worker.objectURL = workerUrl;\n  return worker;\n};\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","function clean (s) {\n  return s.replace(/\\n\\r?\\s*/g, '')\n}\n\n\nmodule.exports = function tsml (sa) {\n  var s = ''\n    , i = 0\n\n  for (; i < arguments.length; i++)\n    s += clean(sa[i]) + (arguments[i + 1] || '')\n\n  return s\n}","'use strict';\n\nvar _lineStream = require('./line-stream');\n\nvar _lineStream2 = _interopRequireDefault(_lineStream);\n\nvar _parseStream = require('./parse-stream');\n\nvar _parseStream2 = _interopRequireDefault(_parseStream);\n\nvar _parser = require('./parser');\n\nvar _parser2 = _interopRequireDefault(_parser);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nmodule.exports = {\n  LineStream: _lineStream2['default'],\n  ParseStream: _parseStream2['default'],\n  Parser: _parser2['default']\n}; /**\n    * @file m3u8/index.js\n    *\n    * Utilities for parsing M3U8 files. If the entire manifest is available,\n    * `Parser` will create an object representation with enough detail for managing\n    * playback. `ParseStream` and `LineStream` are lower-level parsing primitives\n    * that do not assume the entirety of the manifest is ready and expose a\n    * ReadableStream-like interface.\n    */","/**\n * @file playback-watcher.js\n *\n * Playback starts, and now my watch begins. It shall not end until my death. I shall\n * take no wait, hold no uncleared timeouts, father no bad seeks. I shall wear no crowns\n * and win no glory. I shall live and die at my post. I am the corrector of the underflow.\n * I am the watcher of gaps. I am the shield that guards the realms of seekable. I pledge\n * my life and honor to the Playback Watch, for this Player and all the Players to come.\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _ranges = require('./ranges');\n\nvar _ranges2 = _interopRequireDefault(_ranges);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\n// Set of events that reset the playback-watcher time check logic and clear the timeout\nvar timerCancelEvents = ['seeking', 'seeked', 'pause', 'playing', 'error'];\n\n/**\n * @class PlaybackWatcher\n */\n\nvar PlaybackWatcher = (function () {\n  /**\n   * Represents an PlaybackWatcher object.\n   * @constructor\n   * @param {object} options an object that includes the tech and settings\n   */\n\n  function PlaybackWatcher(options) {\n    var _this = this;\n\n    _classCallCheck(this, PlaybackWatcher);\n\n    this.tech_ = options.tech;\n    this.seekable = options.seekable;\n\n    this.consecutiveUpdates = 0;\n    this.lastRecordedTime = null;\n    this.timer_ = null;\n    this.checkCurrentTimeTimeout_ = null;\n\n    if (options.debug) {\n      this.logger_ = _videoJs2['default'].log.bind(_videoJs2['default'], 'playback-watcher ->');\n    }\n    this.logger_('initialize');\n\n    var canPlayHandler = function canPlayHandler() {\n      return _this.monitorCurrentTime_();\n    };\n    var waitingHandler = function waitingHandler() {\n      return _this.techWaiting_();\n    };\n    var cancelTimerHandler = function cancelTimerHandler() {\n      return _this.cancelTimer_();\n    };\n    var fixesBadSeeksHandler = function fixesBadSeeksHandler() {\n      return _this.fixesBadSeeks_();\n    };\n\n    this.tech_.on('seekablechanged', fixesBadSeeksHandler);\n    this.tech_.on('waiting', waitingHandler);\n    this.tech_.on(timerCancelEvents, cancelTimerHandler);\n    this.tech_.on('canplay', canPlayHandler);\n\n    // Define the dispose function to clean up our events\n    this.dispose = function () {\n      _this.logger_('dispose');\n      _this.tech_.off('seekablechanged', fixesBadSeeksHandler);\n      _this.tech_.off('waiting', waitingHandler);\n      _this.tech_.off(timerCancelEvents, cancelTimerHandler);\n      _this.tech_.off('canplay', canPlayHandler);\n      if (_this.checkCurrentTimeTimeout_) {\n        _globalWindow2['default'].clearTimeout(_this.checkCurrentTimeTimeout_);\n      }\n      _this.cancelTimer_();\n    };\n  }\n\n  /**\n   * Periodically check current time to see if playback stopped\n   *\n   * @private\n   */\n\n  _createClass(PlaybackWatcher, [{\n    key: 'monitorCurrentTime_',\n    value: function monitorCurrentTime_() {\n      this.checkCurrentTime_();\n\n      if (this.checkCurrentTimeTimeout_) {\n        _globalWindow2['default'].clearTimeout(this.checkCurrentTimeTimeout_);\n      }\n\n      // 42 = 24 fps // 250 is what Webkit uses // FF uses 15\n      this.checkCurrentTimeTimeout_ = _globalWindow2['default'].setTimeout(this.monitorCurrentTime_.bind(this), 250);\n    }\n\n    /**\n     * The purpose of this function is to emulate the \"waiting\" event on\n     * browsers that do not emit it when they are waiting for more\n     * data to continue playback\n     *\n     * @private\n     */\n  }, {\n    key: 'checkCurrentTime_',\n    value: function checkCurrentTime_() {\n      if (this.tech_.seeking() && this.fixesBadSeeks_()) {\n        this.consecutiveUpdates = 0;\n        this.lastRecordedTime = this.tech_.currentTime();\n        return;\n      }\n\n      if (this.tech_.paused() || this.tech_.seeking()) {\n        return;\n      }\n\n      var currentTime = this.tech_.currentTime();\n      var buffered = this.tech_.buffered();\n\n      if (this.lastRecordedTime === currentTime && (!buffered.length || currentTime + _ranges2['default'].SAFE_TIME_DELTA >= buffered.end(buffered.length - 1))) {\n        // If current time is at the end of the final buffered region, then any playback\n        // stall is most likely caused by buffering in a low bandwidth environment. The tech\n        // should fire a `waiting` event in this scenario, but due to browser and tech\n        // inconsistencies (e.g. The Flash tech does not fire a `waiting` event when the end\n        // of the buffer is reached and has fallen off the live window). Calling\n        // `techWaiting_` here allows us to simulate responding to a native `waiting` event\n        // when the tech fails to emit one.\n        return this.techWaiting_();\n      }\n\n      if (this.consecutiveUpdates >= 5 && currentTime === this.lastRecordedTime) {\n        this.consecutiveUpdates++;\n        this.waiting_();\n      } else if (currentTime === this.lastRecordedTime) {\n        this.consecutiveUpdates++;\n      } else {\n        this.consecutiveUpdates = 0;\n        this.lastRecordedTime = currentTime;\n      }\n    }\n\n    /**\n     * Cancels any pending timers and resets the 'timeupdate' mechanism\n     * designed to detect that we are stalled\n     *\n     * @private\n     */\n  }, {\n    key: 'cancelTimer_',\n    value: function cancelTimer_() {\n      this.consecutiveUpdates = 0;\n\n      if (this.timer_) {\n        this.logger_('cancelTimer_');\n        clearTimeout(this.timer_);\n      }\n\n      this.timer_ = null;\n    }\n\n    /**\n     * Fixes situations where there's a bad seek\n     *\n     * @return {Boolean} whether an action was taken to fix the seek\n     * @private\n     */\n  }, {\n    key: 'fixesBadSeeks_',\n    value: function fixesBadSeeks_() {\n      var seeking = this.tech_.seeking();\n      var seekable = this.seekable();\n      var currentTime = this.tech_.currentTime();\n      var seekTo = undefined;\n\n      if (seeking && this.afterSeekableWindow_(seekable, currentTime)) {\n        var seekableEnd = seekable.end(seekable.length - 1);\n\n        // sync to live point (if VOD, our seekable was updated and we're simply adjusting)\n        seekTo = seekableEnd;\n      }\n\n      if (seeking && this.beforeSeekableWindow_(seekable, currentTime)) {\n        var seekableStart = seekable.start(0);\n\n        // sync to the beginning of the live window\n        // provide a buffer of .1 seconds to handle rounding/imprecise numbers\n        seekTo = seekableStart + _ranges2['default'].SAFE_TIME_DELTA;\n      }\n\n      if (typeof seekTo !== 'undefined') {\n        this.logger_('Trying to seek outside of seekable at time ' + currentTime + ' with ' + ('seekable range ' + _ranges2['default'].printableRange(seekable) + '. Seeking to ') + (seekTo + '.'));\n\n        this.tech_.setCurrentTime(seekTo);\n        return true;\n      }\n\n      return false;\n    }\n\n    /**\n     * Handler for situations when we determine the player is waiting.\n     *\n     * @private\n     */\n  }, {\n    key: 'waiting_',\n    value: function waiting_() {\n      if (this.techWaiting_()) {\n        return;\n      }\n\n      // All tech waiting checks failed. Use last resort correction\n      var currentTime = this.tech_.currentTime();\n      var buffered = this.tech_.buffered();\n      var currentRange = _ranges2['default'].findRange(buffered, currentTime);\n\n      // Sometimes the player can stall for unknown reasons within a contiguous buffered\n      // region with no indication that anything is amiss (seen in Firefox). Seeking to\n      // currentTime is usually enough to kickstart the player. This checks that the player\n      // is currently within a buffered region before attempting a corrective seek.\n      // Chrome does not appear to continue `timeupdate` events after a `waiting` event\n      // until there is ~ 3 seconds of forward buffer available. PlaybackWatcher should also\n      // make sure there is ~3 seconds of forward buffer before taking any corrective action\n      // to avoid triggering an `unknownwaiting` event when the network is slow.\n      if (currentRange.length && currentTime + 3 <= currentRange.end(0)) {\n        this.cancelTimer_();\n        this.tech_.setCurrentTime(currentTime);\n\n        this.logger_('Stopped at ' + currentTime + ' while inside a buffered region ' + ('[' + currentRange.start(0) + ' -> ' + currentRange.end(0) + ']. Attempting to resume ') + 'playback by seeking to the current time.');\n\n        // unknown waiting corrections may be useful for monitoring QoS\n        this.tech_.trigger({ type: 'usage', name: 'hls-unknown-waiting' });\n        return;\n      }\n    }\n\n    /**\n     * Handler for situations when the tech fires a `waiting` event\n     *\n     * @return {Boolean}\n     *         True if an action (or none) was needed to correct the waiting. False if no\n     *         checks passed\n     * @private\n     */\n  }, {\n    key: 'techWaiting_',\n    value: function techWaiting_() {\n      var seekable = this.seekable();\n      var currentTime = this.tech_.currentTime();\n\n      if (this.tech_.seeking() && this.fixesBadSeeks_()) {\n        // Tech is seeking or bad seek fixed, no action needed\n        return true;\n      }\n\n      if (this.tech_.seeking() || this.timer_ !== null) {\n        // Tech is seeking or already waiting on another action, no action needed\n        return true;\n      }\n\n      if (this.beforeSeekableWindow_(seekable, currentTime)) {\n        var livePoint = seekable.end(seekable.length - 1);\n\n        this.logger_('Fell out of live window at time ' + currentTime + '. Seeking to ' + ('live point (seekable end) ' + livePoint));\n        this.cancelTimer_();\n        this.tech_.setCurrentTime(livePoint);\n\n        // live window resyncs may be useful for monitoring QoS\n        this.tech_.trigger({ type: 'usage', name: 'hls-live-resync' });\n        return true;\n      }\n\n      var buffered = this.tech_.buffered();\n      var nextRange = _ranges2['default'].findNextRange(buffered, currentTime);\n\n      if (this.videoUnderflow_(nextRange, buffered, currentTime)) {\n        // Even though the video underflowed and was stuck in a gap, the audio overplayed\n        // the gap, leading currentTime into a buffered range. Seeking to currentTime\n        // allows the video to catch up to the audio position without losing any audio\n        // (only suffering ~3 seconds of frozen video and a pause in audio playback).\n        this.cancelTimer_();\n        this.tech_.setCurrentTime(currentTime);\n\n        // video underflow may be useful for monitoring QoS\n        this.tech_.trigger({ type: 'usage', name: 'hls-video-underflow' });\n        return true;\n      }\n\n      // check for gap\n      if (nextRange.length > 0) {\n        var difference = nextRange.start(0) - currentTime;\n\n        this.logger_('Stopped at ' + currentTime + ', setting timer for ' + difference + ', seeking ' + ('to ' + nextRange.start(0)));\n\n        this.timer_ = setTimeout(this.skipTheGap_.bind(this), difference * 1000, currentTime);\n        return true;\n      }\n\n      // All checks failed. Returning false to indicate failure to correct waiting\n      return false;\n    }\n  }, {\n    key: 'afterSeekableWindow_',\n    value: function afterSeekableWindow_(seekable, currentTime) {\n      if (!seekable.length) {\n        // we can't make a solid case if there's no seekable, default to false\n        return false;\n      }\n\n      if (currentTime > seekable.end(seekable.length - 1) + _ranges2['default'].SAFE_TIME_DELTA) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: 'beforeSeekableWindow_',\n    value: function beforeSeekableWindow_(seekable, currentTime) {\n      if (seekable.length &&\n      // can't fall before 0 and 0 seekable start identifies VOD stream\n      seekable.start(0) > 0 && currentTime < seekable.start(0) - _ranges2['default'].SAFE_TIME_DELTA) {\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: 'videoUnderflow_',\n    value: function videoUnderflow_(nextRange, buffered, currentTime) {\n      if (nextRange.length === 0) {\n        // Even if there is no available next range, there is still a possibility we are\n        // stuck in a gap due to video underflow.\n        var gap = this.gapFromVideoUnderflow_(buffered, currentTime);\n\n        if (gap) {\n          this.logger_('Encountered a gap in video from ' + gap.start + ' to ' + gap.end + '. ' + ('Seeking to current time ' + currentTime));\n\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    /**\n     * Timer callback. If playback still has not proceeded, then we seek\n     * to the start of the next buffered region.\n     *\n     * @private\n     */\n  }, {\n    key: 'skipTheGap_',\n    value: function skipTheGap_(scheduledCurrentTime) {\n      var buffered = this.tech_.buffered();\n      var currentTime = this.tech_.currentTime();\n      var nextRange = _ranges2['default'].findNextRange(buffered, currentTime);\n\n      this.cancelTimer_();\n\n      if (nextRange.length === 0 || currentTime !== scheduledCurrentTime) {\n        return;\n      }\n\n      this.logger_('skipTheGap_:', 'currentTime:', currentTime, 'scheduled currentTime:', scheduledCurrentTime, 'nextRange start:', nextRange.start(0));\n\n      // only seek if we still have not played\n      this.tech_.setCurrentTime(nextRange.start(0) + _ranges2['default'].TIME_FUDGE_FACTOR);\n\n      this.tech_.trigger({ type: 'usage', name: 'hls-gap-skip' });\n    }\n  }, {\n    key: 'gapFromVideoUnderflow_',\n    value: function gapFromVideoUnderflow_(buffered, currentTime) {\n      // At least in Chrome, if there is a gap in the video buffer, the audio will continue\n      // playing for ~3 seconds after the video gap starts. This is done to account for\n      // video buffer underflow/underrun (note that this is not done when there is audio\n      // buffer underflow/underrun -- in that case the video will stop as soon as it\n      // encounters the gap, as audio stalls are more noticeable/jarring to a user than\n      // video stalls). The player's time will reflect the playthrough of audio, so the\n      // time will appear as if we are in a buffered region, even if we are stuck in a\n      // \"gap.\"\n      //\n      // Example:\n      // video buffer:   0 => 10.1, 10.2 => 20\n      // audio buffer:   0 => 20\n      // overall buffer: 0 => 10.1, 10.2 => 20\n      // current time: 13\n      //\n      // Chrome's video froze at 10 seconds, where the video buffer encountered the gap,\n      // however, the audio continued playing until it reached ~3 seconds past the gap\n      // (13 seconds), at which point it stops as well. Since current time is past the\n      // gap, findNextRange will return no ranges.\n      //\n      // To check for this issue, we see if there is a gap that starts somewhere within\n      // a 3 second range (3 seconds +/- 1 second) back from our current time.\n      var gaps = _ranges2['default'].findGaps(buffered);\n\n      for (var i = 0; i < gaps.length; i++) {\n        var start = gaps.start(i);\n        var end = gaps.end(i);\n\n        // gap is starts no more than 4 seconds back\n        if (currentTime - start < 4 && currentTime - start > 2) {\n          return {\n            start: start,\n            end: end\n          };\n        }\n      }\n\n      return null;\n    }\n\n    /**\n     * A debugging logger noop that is set to console.log only if debugging\n     * is enabled globally\n     *\n     * @private\n     */\n  }, {\n    key: 'logger_',\n    value: function logger_() {}\n  }]);\n\n  return PlaybackWatcher;\n})();\n\nexports['default'] = PlaybackWatcher;\nmodule.exports = exports['default'];","/**\n * @file flash-transmuxer-worker.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _muxJsLibFlv = require('mux.js/lib/flv');\n\nvar _muxJsLibFlv2 = _interopRequireDefault(_muxJsLibFlv);\n\n/**\n * Re-emits transmuxer events by converting them into messages to the\n * world outside the worker.\n *\n * @param {Object} transmuxer the transmuxer to wire events on\n * @private\n */\nvar wireTransmuxerEvents = function wireTransmuxerEvents(transmuxer) {\n  transmuxer.on('data', function (segment) {\n    _globalWindow2['default'].postMessage({\n      action: 'data',\n      segment: segment\n    });\n  });\n\n  transmuxer.on('done', function (data) {\n    _globalWindow2['default'].postMessage({ action: 'done' });\n  });\n};\n\n/**\n * All incoming messages route through this hash. If no function exists\n * to handle an incoming message, then we ignore the message.\n *\n * @class MessageHandlers\n * @param {Object} options the options to initialize with\n */\n\nvar MessageHandlers = (function () {\n  function MessageHandlers(options) {\n    _classCallCheck(this, MessageHandlers);\n\n    this.options = options || {};\n    this.init();\n  }\n\n  /**\n   * Our web wroker interface so that things can talk to mux.js\n   * that will be running in a web worker. The scope is passed to this by\n   * webworkify.\n   *\n   * @param {Object} self the scope for the web worker\n   */\n\n  /**\n   * initialize our web worker and wire all the events.\n   */\n\n  _createClass(MessageHandlers, [{\n    key: 'init',\n    value: function init() {\n      if (this.transmuxer) {\n        this.transmuxer.dispose();\n      }\n      this.transmuxer = new _muxJsLibFlv2['default'].Transmuxer(this.options);\n      wireTransmuxerEvents(this.transmuxer);\n    }\n\n    /**\n     * Adds data (a ts segment) to the start of the transmuxer pipeline for\n     * processing.\n     *\n     * @param {ArrayBuffer} data data to push into the muxer\n     */\n  }, {\n    key: 'push',\n    value: function push(data) {\n      // Cast array buffer to correct type for transmuxer\n      var segment = new Uint8Array(data.data, data.byteOffset, data.byteLength);\n\n      this.transmuxer.push(segment);\n    }\n\n    /**\n     * Recreate the transmuxer so that the next segment added via `push`\n     * start with a fresh transmuxer.\n     */\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.init();\n    }\n\n    /**\n     * Forces the pipeline to finish processing the last segment and emit its\n     * results.\n     */\n  }, {\n    key: 'flush',\n    value: function flush() {\n      this.transmuxer.flush();\n    }\n  }, {\n    key: 'resetCaptions',\n    value: function resetCaptions() {\n      this.transmuxer.resetCaptions();\n    }\n  }]);\n\n  return MessageHandlers;\n})();\n\nvar FlashTransmuxerWorker = function FlashTransmuxerWorker(self) {\n  self.onmessage = function (event) {\n    if (event.data.action === 'init' && event.data.options) {\n      this.messageHandlers = new MessageHandlers(event.data.options);\n      return;\n    }\n\n    if (!this.messageHandlers) {\n      this.messageHandlers = new MessageHandlers();\n    }\n\n    if (event.data && event.data.action && event.data.action !== 'init') {\n      if (this.messageHandlers[event.data.action]) {\n        this.messageHandlers[event.data.action](event.data);\n      }\n    }\n  };\n};\n\nexports['default'] = function (self) {\n  return new FlashTransmuxerWorker(self);\n};\n\nmodule.exports = exports['default'];","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAYAAAA4E5OyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RTk4QTVDNDlEQUQxMUVCOTk5OUIyQTE1NDExN0FBQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RTk4QTVDNTlEQUQxMUVCOTk5OUIyQTE1NDExN0FBQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRFOThBNUMyOURBRDExRUI5OTk5QjJBMTU0MTE3QUFBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRFOThBNUMzOURBRDExRUI5OTk5QjJBMTU0MTE3QUFBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++dIq1QAABoFJREFUeNrsm2lsVUUU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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NUQyQzM5MjA4REExMUU5OUUyNEUwRTBCM0FERDRDQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NUQyQzM5MzA4REExMUU5OUUyNEUwRTBCM0FERDRDQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ1RDJDMzkwMDhEQTExRTk5RTI0RTBFMEIzQURENENCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ1RDJDMzkxMDhEQTExRTk5RTI0RTBFMEIzQURENENCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+YRU2ygAACOdJREFUeNrUWQ2QVVUd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\"","/**\n * @module playlist-loader\n *\n * @file A state machine that manages the loading, caching, and updating of\n * M3U8 playlists.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _resolveUrl = require('./resolve-url');\n\nvar _resolveUrl2 = _interopRequireDefault(_resolveUrl);\n\nvar _videoJs = require('video.js');\n\nvar _m3u8Parser = require('m3u8-parser');\n\nvar _m3u8Parser2 = _interopRequireDefault(_m3u8Parser);\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\n/**\n * Returns a new array of segments that is the result of merging\n * properties from an older list of segments onto an updated\n * list. No properties on the updated playlist will be overridden.\n *\n * @param {Array} original the outdated list of segments\n * @param {Array} update the updated list of segments\n * @param {Number=} offset the index of the first update\n * segment in the original segment list. For non-live playlists,\n * this should always be zero and does not need to be\n * specified. For live playlists, it should be the difference\n * between the media sequence numbers in the original and updated\n * playlists.\n * @return a list of merged segment objects\n */\nvar updateSegments = function updateSegments(original, update, offset) {\n  var result = update.slice();\n\n  offset = offset || 0;\n  var length = Math.min(original.length, update.length + offset);\n\n  for (var i = offset; i < length; i++) {\n    result[i - offset] = (0, _videoJs.mergeOptions)(original[i], result[i - offset]);\n  }\n  return result;\n};\n\nexports.updateSegments = updateSegments;\nvar resolveSegmentUris = function resolveSegmentUris(segment, baseUri) {\n  if (!segment.resolvedUri) {\n    segment.resolvedUri = (0, _resolveUrl2['default'])(baseUri, segment.uri);\n  }\n  if (segment.key && !segment.key.resolvedUri) {\n    segment.key.resolvedUri = (0, _resolveUrl2['default'])(baseUri, segment.key.uri);\n  }\n  if (segment.map && !segment.map.resolvedUri) {\n    segment.map.resolvedUri = (0, _resolveUrl2['default'])(baseUri, segment.map.uri);\n  }\n};\n\nexports.resolveSegmentUris = resolveSegmentUris;\n/**\n  * Returns a new master playlist that is the result of merging an\n  * updated media playlist into the original version. If the\n  * updated media playlist does not match any of the playlist\n  * entries in the original master playlist, null is returned.\n  *\n  * @param {Object} master a parsed master M3U8 object\n  * @param {Object} media a parsed media M3U8 object\n  * @return {Object} a new object that represents the original\n  * master playlist with the updated media playlist merged in, or\n  * null if the merge produced no change.\n  */\nvar updateMaster = function updateMaster(master, media) {\n  var result = (0, _videoJs.mergeOptions)(master, {});\n  var playlist = result.playlists.filter(function (p) {\n    return p.uri === media.uri;\n  })[0];\n\n  if (!playlist) {\n    return null;\n  }\n\n  // consider the playlist unchanged if the number of segments is equal and the media\n  // sequence number is unchanged\n  if (playlist.segments && media.segments && playlist.segments.length === media.segments.length && playlist.mediaSequence === media.mediaSequence) {\n    return null;\n  }\n\n  var mergedPlaylist = (0, _videoJs.mergeOptions)(playlist, media);\n\n  // if the update could overlap existing segment information, merge the two segment lists\n  if (playlist.segments) {\n    mergedPlaylist.segments = updateSegments(playlist.segments, media.segments, media.mediaSequence - playlist.mediaSequence);\n  }\n\n  // resolve any segment URIs to prevent us from having to do it later\n  mergedPlaylist.segments.forEach(function (segment) {\n    resolveSegmentUris(segment, mergedPlaylist.resolvedUri);\n  });\n\n  // TODO Right now in the playlists array there are two references to each playlist, one\n  // that is referenced by index, and one by URI. The index reference may no longer be\n  // necessary.\n  for (var i = 0; i < result.playlists.length; i++) {\n    if (result.playlists[i].uri === media.uri) {\n      result.playlists[i] = mergedPlaylist;\n    }\n  }\n  result.playlists[media.uri] = mergedPlaylist;\n\n  return result;\n};\n\nexports.updateMaster = updateMaster;\nvar setupMediaPlaylists = function setupMediaPlaylists(master) {\n  // setup by-URI lookups and resolve media playlist URIs\n  var i = master.playlists.length;\n\n  while (i--) {\n    var playlist = master.playlists[i];\n\n    master.playlists[playlist.uri] = playlist;\n    playlist.resolvedUri = (0, _resolveUrl2['default'])(master.uri, playlist.uri);\n\n    if (!playlist.attributes) {\n      // Although the spec states an #EXT-X-STREAM-INF tag MUST have a\n      // BANDWIDTH attribute, we can play the stream without it. This means a poorly\n      // formatted master playlist may not have an attribute list. An attributes\n      // property is added here to prevent undefined references when we encounter\n      // this scenario.\n      playlist.attributes = {};\n\n      _videoJs.log.warn('Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.');\n    }\n  }\n};\n\nexports.setupMediaPlaylists = setupMediaPlaylists;\nvar resolveMediaGroupUris = function resolveMediaGroupUris(master) {\n  ['AUDIO', 'SUBTITLES'].forEach(function (mediaType) {\n    for (var groupKey in master.mediaGroups[mediaType]) {\n      for (var labelKey in master.mediaGroups[mediaType][groupKey]) {\n        var mediaProperties = master.mediaGroups[mediaType][groupKey][labelKey];\n\n        if (mediaProperties.uri) {\n          mediaProperties.resolvedUri = (0, _resolveUrl2['default'])(master.uri, mediaProperties.uri);\n        }\n      }\n    }\n  });\n};\n\nexports.resolveMediaGroupUris = resolveMediaGroupUris;\n/**\n * Calculates the time to wait before refreshing a live playlist\n *\n * @param {Object} media\n *        The current media\n * @param {Boolean} update\n *        True if there were any updates from the last refresh, false otherwise\n * @return {Number}\n *         The time in ms to wait before refreshing the live playlist\n */\nvar refreshDelay = function refreshDelay(media, update) {\n  var lastSegment = media.segments[media.segments.length - 1];\n  var delay = undefined;\n\n  if (update && lastSegment && lastSegment.duration) {\n    delay = lastSegment.duration * 1000;\n  } else {\n    // if the playlist is unchanged since the last reload or last segment duration\n    // cannot be determined, try again after half the target duration\n    delay = (media.targetDuration || 10) * 500;\n  }\n  return delay;\n};\n\nexports.refreshDelay = refreshDelay;\n/**\n * Load a playlist from a remote location\n *\n * @class PlaylistLoader\n * @extends videojs.EventTarget\n * @param {String} srcUrl the url to start with\n * @param {Object} hls\n * @param {Object} [options]\n * @param {Boolean} [options.withCredentials=false] the withCredentials xhr option\n * @param {Boolean} [options.handleManifestRedirects=false] whether to follow redirects, when any\n *        playlist request was redirected\n */\n\nvar PlaylistLoader = (function (_EventTarget) {\n  _inherits(PlaylistLoader, _EventTarget);\n\n  function PlaylistLoader(srcUrl, hls, options) {\n    var _this = this;\n\n    _classCallCheck(this, PlaylistLoader);\n\n    _get(Object.getPrototypeOf(PlaylistLoader.prototype), 'constructor', this).call(this);\n\n    options = options || {};\n\n    this.srcUrl = srcUrl;\n    this.hls_ = hls;\n    this.withCredentials = !!options.withCredentials;\n    this.handleManifestRedirects = !!options.handleManifestRedirects;\n\n    if (!this.srcUrl) {\n      throw new Error('A non-empty playlist URL is required');\n    }\n\n    // initialize the loader state\n    this.state = 'HAVE_NOTHING';\n\n    // live playlist staleness timeout\n    this.on('mediaupdatetimeout', function () {\n      if (_this.state !== 'HAVE_METADATA') {\n        // only refresh the media playlist if no other activity is going on\n        return;\n      }\n\n      _this.state = 'HAVE_CURRENT_METADATA';\n\n      _this.request = _this.hls_.xhr({\n        uri: (0, _resolveUrl2['default'])(_this.master.uri, _this.media().uri),\n        withCredentials: _this.withCredentials\n      }, function (error, req) {\n        // disposed\n        if (!_this.request) {\n          return;\n        }\n\n        if (error) {\n          return _this.playlistRequestError(_this.request, _this.media().uri, 'HAVE_METADATA');\n        }\n\n        _this.haveMetadata(_this.request, _this.media().uri);\n      });\n    });\n  }\n\n  _createClass(PlaylistLoader, [{\n    key: 'playlistRequestError',\n    value: function playlistRequestError(xhr, url, startingState) {\n      // any in-flight request is now finished\n      this.request = null;\n\n      if (startingState) {\n        this.state = startingState;\n      }\n\n      this.error = {\n        playlist: this.master.playlists[url],\n        status: xhr.status,\n        message: 'HLS playlist request error at URL: ' + url,\n        responseText: xhr.responseText,\n        code: xhr.status >= 500 ? 4 : 2\n      };\n\n      this.trigger('error');\n    }\n\n    // update the playlist loader's state in response to a new or\n    // updated playlist.\n  }, {\n    key: 'haveMetadata',\n    value: function haveMetadata(xhr, url) {\n      var _this2 = this;\n\n      // any in-flight request is now finished\n      this.request = null;\n      this.state = 'HAVE_METADATA';\n\n      var parser = new _m3u8Parser2['default'].Parser();\n\n      parser.push(xhr.responseText);\n      parser.end();\n      parser.manifest.uri = url;\n      // m3u8-parser does not attach an attributes property to media playlists so make\n      // sure that the property is attached to avoid undefined reference errors\n      parser.manifest.attributes = parser.manifest.attributes || {};\n\n      // merge this playlist into the master\n      var update = updateMaster(this.master, parser.manifest);\n\n      this.targetDuration = parser.manifest.targetDuration;\n\n      if (update) {\n        this.master = update;\n        this.media_ = this.master.playlists[parser.manifest.uri];\n      } else {\n        this.trigger('playlistunchanged');\n      }\n\n      // refresh live playlists after a target duration passes\n      if (!this.media().endList) {\n        _globalWindow2['default'].clearTimeout(this.mediaUpdateTimeout);\n        this.mediaUpdateTimeout = _globalWindow2['default'].setTimeout(function () {\n          _this2.trigger('mediaupdatetimeout');\n        }, refreshDelay(this.media(), !!update));\n      }\n\n      this.trigger('loadedplaylist');\n    }\n\n    /**\n     * Abort any outstanding work and clean up.\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.stopRequest();\n      _globalWindow2['default'].clearTimeout(this.mediaUpdateTimeout);\n    }\n  }, {\n    key: 'stopRequest',\n    value: function stopRequest() {\n      if (this.request) {\n        var oldRequest = this.request;\n\n        this.request = null;\n        oldRequest.onreadystatechange = null;\n        oldRequest.abort();\n      }\n    }\n\n    /**\n     * When called without any arguments, returns the currently\n     * active media playlist. When called with a single argument,\n     * triggers the playlist loader to asynchronously switch to the\n     * specified media playlist. Calling this method while the\n     * loader is in the HAVE_NOTHING causes an error to be emitted\n     * but otherwise has no effect.\n     *\n     * @param {Object=} playlist the parsed media playlist\n     * object to switch to\n     * @return {Playlist} the current loaded media\n     */\n  }, {\n    key: 'media',\n    value: function media(playlist) {\n      var _this3 = this;\n\n      // getter\n      if (!playlist) {\n        return this.media_;\n      }\n\n      // setter\n      if (this.state === 'HAVE_NOTHING') {\n        throw new Error('Cannot switch media playlist from ' + this.state);\n      }\n\n      var startingState = this.state;\n\n      // find the playlist object if the target playlist has been\n      // specified by URI\n      if (typeof playlist === 'string') {\n        if (!this.master.playlists[playlist]) {\n          throw new Error('Unknown playlist URI: ' + playlist);\n        }\n        playlist = this.master.playlists[playlist];\n      }\n\n      var mediaChange = !this.media_ || playlist.uri !== this.media_.uri;\n\n      // switch to fully loaded playlists immediately\n      if (this.master.playlists[playlist.uri].endList) {\n        // abort outstanding playlist requests\n        if (this.request) {\n          this.request.onreadystatechange = null;\n          this.request.abort();\n          this.request = null;\n        }\n        this.state = 'HAVE_METADATA';\n        this.media_ = playlist;\n\n        // trigger media change if the active media has been updated\n        if (mediaChange) {\n          this.trigger('mediachanging');\n          this.trigger('mediachange');\n        }\n        return;\n      }\n\n      // switching to the active playlist is a no-op\n      if (!mediaChange) {\n        return;\n      }\n\n      this.state = 'SWITCHING_MEDIA';\n\n      // there is already an outstanding playlist request\n      if (this.request) {\n        if (playlist.resolvedUri === this.request.url) {\n          // requesting to switch to the same playlist multiple times\n          // has no effect after the first\n          return;\n        }\n        this.request.onreadystatechange = null;\n        this.request.abort();\n        this.request = null;\n      }\n\n      // request the new playlist\n      if (this.media_) {\n        this.trigger('mediachanging');\n      }\n\n      this.request = this.hls_.xhr({\n        uri: playlist.resolvedUri,\n        withCredentials: this.withCredentials\n      }, function (error, req) {\n        // disposed\n        if (!_this3.request) {\n          return;\n        }\n\n        playlist.resolvedUri = _this3.resolveManifestRedirect(playlist.resolvedUri, req);\n\n        if (error) {\n          return _this3.playlistRequestError(_this3.request, playlist.uri, startingState);\n        }\n\n        _this3.haveMetadata(req, playlist.uri);\n\n        // fire loadedmetadata the first time a media playlist is loaded\n        if (startingState === 'HAVE_MASTER') {\n          _this3.trigger('loadedmetadata');\n        } else {\n          _this3.trigger('mediachange');\n        }\n      });\n    }\n\n    /**\n     * Checks whether xhr request was redirected and returns correct url depending\n     * on `handleManifestRedirects` option\n     *\n     * @api private\n     *\n     * @param  {String} url - an url being requested\n     * @param  {XMLHttpRequest} req - xhr request result\n     *\n     * @return {String}\n     */\n  }, {\n    key: 'resolveManifestRedirect',\n    value: function resolveManifestRedirect(url, req) {\n      if (this.handleManifestRedirects && req.responseURL && url !== req.responseURL) {\n        return req.responseURL;\n      }\n\n      return url;\n    }\n\n    /**\n     * pause loading of the playlist\n     */\n  }, {\n    key: 'pause',\n    value: function pause() {\n      this.stopRequest();\n      _globalWindow2['default'].clearTimeout(this.mediaUpdateTimeout);\n      if (this.state === 'HAVE_NOTHING') {\n        // If we pause the loader before any data has been retrieved, its as if we never\n        // started, so reset to an unstarted state.\n        this.started = false;\n      }\n      // Need to restore state now that no activity is happening\n      if (this.state === 'SWITCHING_MEDIA') {\n        // if the loader was in the process of switching media, it should either return to\n        // HAVE_MASTER or HAVE_METADATA depending on if the loader has loaded a media\n        // playlist yet. This is determined by the existence of loader.media_\n        if (this.media_) {\n          this.state = 'HAVE_METADATA';\n        } else {\n          this.state = 'HAVE_MASTER';\n        }\n      } else if (this.state === 'HAVE_CURRENT_METADATA') {\n        this.state = 'HAVE_METADATA';\n      }\n    }\n\n    /**\n     * start loading of the playlist\n     */\n  }, {\n    key: 'load',\n    value: function load(isFinalRendition) {\n      var _this4 = this;\n\n      _globalWindow2['default'].clearTimeout(this.mediaUpdateTimeout);\n\n      var media = this.media();\n\n      if (isFinalRendition) {\n        var delay = media ? media.targetDuration / 2 * 1000 : 5 * 1000;\n\n        this.mediaUpdateTimeout = _globalWindow2['default'].setTimeout(function () {\n          return _this4.load();\n        }, delay);\n        return;\n      }\n\n      if (!this.started) {\n        this.start();\n        return;\n      }\n\n      if (media && !media.endList) {\n        this.trigger('mediaupdatetimeout');\n      } else {\n        this.trigger('loadedplaylist');\n      }\n    }\n\n    /**\n     * start loading of the playlist\n     */\n  }, {\n    key: 'start',\n    value: function start() {\n      var _this5 = this;\n\n      this.started = true;\n\n      // request the specified URL\n      this.request = this.hls_.xhr({\n        uri: this.srcUrl,\n        withCredentials: this.withCredentials\n      }, function (error, req) {\n        // disposed\n        if (!_this5.request) {\n          return;\n        }\n\n        // clear the loader's request reference\n        _this5.request = null;\n\n        if (error) {\n          _this5.error = {\n            status: req.status,\n            message: 'HLS playlist request error at URL: ' + _this5.srcUrl,\n            responseText: req.responseText,\n            // MEDIA_ERR_NETWORK\n            code: 2\n          };\n          if (_this5.state === 'HAVE_NOTHING') {\n            _this5.started = false;\n          }\n          return _this5.trigger('error');\n        }\n\n        var parser = new _m3u8Parser2['default'].Parser();\n\n        parser.push(req.responseText);\n        parser.end();\n\n        _this5.state = 'HAVE_MASTER';\n\n        _this5.srcUrl = _this5.resolveManifestRedirect(_this5.srcUrl, req);\n\n        parser.manifest.uri = _this5.srcUrl;\n\n        // loaded a master playlist\n        if (parser.manifest.playlists) {\n          _this5.master = parser.manifest;\n\n          setupMediaPlaylists(_this5.master);\n          resolveMediaGroupUris(_this5.master);\n\n          _this5.trigger('loadedplaylist');\n          if (!_this5.request) {\n            // no media playlist was specifically selected so start\n            // from the first listed one\n            _this5.media(parser.manifest.playlists[0]);\n          }\n          return;\n        }\n\n        // loaded a media playlist\n        // infer a master playlist if none was previously requested\n        _this5.master = {\n          mediaGroups: {\n            'AUDIO': {},\n            'VIDEO': {},\n            'CLOSED-CAPTIONS': {},\n            'SUBTITLES': {}\n          },\n          uri: _globalWindow2['default'].location.href,\n          playlists: [{\n            uri: _this5.srcUrl,\n            resolvedUri: _this5.srcUrl,\n            // m3u8-parser does not attach an attributes property to media playlists so make\n            // sure that the property is attached to avoid undefined reference errors\n            attributes: {}\n          }]\n        };\n        _this5.master.playlists[_this5.srcUrl] = _this5.master.playlists[0];\n        _this5.haveMetadata(req, _this5.srcUrl);\n        return _this5.trigger('loadedmetadata');\n      });\n    }\n  }]);\n\n  return PlaylistLoader;\n})(_videoJs.EventTarget);\n\nexports['default'] = PlaylistLoader;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0OThBMjY0MjA4REExMUU5QTBDODkyRkE4NjUzNUUwNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0OThBMjY0MzA4REExMUU5QTBDODkyRkE4NjUzNUUwNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ5OEEyNjQwMDhEQTExRTlBMEM4OTJGQTg2NTM1RTA3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ5OEEyNjQxMDhEQTExRTlBMEM4OTJGQTg2NTM1RTA3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/E5q3QAAB8tJREFUeNrMWAtsW1cZ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\"","'use strict';\n\nvar ExpGolomb;\n\n/**\n * Parser for exponential Golomb codes, a variable-bitwidth number encoding\n * scheme used by h264.\n */\nExpGolomb = function(workingData) {\n  var\n    // the number of bytes left to examine in workingData\n    workingBytesAvailable = workingData.byteLength,\n\n    // the current word being examined\n    workingWord = 0, // :uint\n\n    // the number of bits left to examine in the current word\n    workingBitsAvailable = 0; // :uint;\n\n  // ():uint\n  this.length = function() {\n    return (8 * workingBytesAvailable);\n  };\n\n  // ():uint\n  this.bitsAvailable = function() {\n    return (8 * workingBytesAvailable) + workingBitsAvailable;\n  };\n\n  // ():void\n  this.loadWord = function() {\n    var\n      position = workingData.byteLength - workingBytesAvailable,\n      workingBytes = new Uint8Array(4),\n      availableBytes = Math.min(4, workingBytesAvailable);\n\n    if (availableBytes === 0) {\n      throw new Error('no bytes available');\n    }\n\n    workingBytes.set(workingData.subarray(position,\n                                          position + availableBytes));\n    workingWord = new DataView(workingBytes.buffer).getUint32(0);\n\n    // track the amount of workingData that has been processed\n    workingBitsAvailable = availableBytes * 8;\n    workingBytesAvailable -= availableBytes;\n  };\n\n  // (count:int):void\n  this.skipBits = function(count) {\n    var skipBytes; // :int\n    if (workingBitsAvailable > count) {\n      workingWord          <<= count;\n      workingBitsAvailable -= count;\n    } else {\n      count -= workingBitsAvailable;\n      skipBytes = Math.floor(count / 8);\n\n      count -= (skipBytes * 8);\n      workingBytesAvailable -= skipBytes;\n\n      this.loadWord();\n\n      workingWord <<= count;\n      workingBitsAvailable -= count;\n    }\n  };\n\n  // (size:int):uint\n  this.readBits = function(size) {\n    var\n      bits = Math.min(workingBitsAvailable, size), // :uint\n      valu = workingWord >>> (32 - bits); // :uint\n    // if size > 31, handle error\n    workingBitsAvailable -= bits;\n    if (workingBitsAvailable > 0) {\n      workingWord <<= bits;\n    } else if (workingBytesAvailable > 0) {\n      this.loadWord();\n    }\n\n    bits = size - bits;\n    if (bits > 0) {\n      return valu << bits | this.readBits(bits);\n    }\n    return valu;\n  };\n\n  // ():uint\n  this.skipLeadingZeros = function() {\n    var leadingZeroCount; // :uint\n    for (leadingZeroCount = 0; leadingZeroCount < workingBitsAvailable; ++leadingZeroCount) {\n      if ((workingWord & (0x80000000 >>> leadingZeroCount)) !== 0) {\n        // the first bit of working word is 1\n        workingWord <<= leadingZeroCount;\n        workingBitsAvailable -= leadingZeroCount;\n        return leadingZeroCount;\n      }\n    }\n\n    // we exhausted workingWord and still have not found a 1\n    this.loadWord();\n    return leadingZeroCount + this.skipLeadingZeros();\n  };\n\n  // ():void\n  this.skipUnsignedExpGolomb = function() {\n    this.skipBits(1 + this.skipLeadingZeros());\n  };\n\n  // ():void\n  this.skipExpGolomb = function() {\n    this.skipBits(1 + this.skipLeadingZeros());\n  };\n\n  // ():uint\n  this.readUnsignedExpGolomb = function() {\n    var clz = this.skipLeadingZeros(); // :uint\n    return this.readBits(clz + 1) - 1;\n  };\n\n  // ():int\n  this.readExpGolomb = function() {\n    var valu = this.readUnsignedExpGolomb(); // :int\n    if (0x01 & valu) {\n      // the number is odd if the low order bit is set\n      return (1 + valu) >>> 1; // add 1 to make it even, and divide by 2\n    }\n    return -1 * (valu >>> 1); // divide by two then make it negative\n  };\n\n  // Some convenience functions\n  // :Boolean\n  this.readBoolean = function() {\n    return this.readBits(1) === 1;\n  };\n\n  // ():int\n  this.readUnsignedByte = function() {\n    return this.readBits(8);\n  };\n\n  this.loadWord();\n};\n\nmodule.exports = ExpGolomb;\n","/**\n * @file flash-source-buffer.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _muxJsLibFlv = require('mux.js/lib/flv');\n\nvar _muxJsLibFlv2 = _interopRequireDefault(_muxJsLibFlv);\n\nvar _removeCuesFromTrack = require('./remove-cues-from-track');\n\nvar _removeCuesFromTrack2 = _interopRequireDefault(_removeCuesFromTrack);\n\nvar _createTextTracksIfNecessary = require('./create-text-tracks-if-necessary');\n\nvar _createTextTracksIfNecessary2 = _interopRequireDefault(_createTextTracksIfNecessary);\n\nvar _addTextTrackData = require('./add-text-track-data');\n\nvar _flashTransmuxerWorker = require('./flash-transmuxer-worker');\n\nvar _flashTransmuxerWorker2 = _interopRequireDefault(_flashTransmuxerWorker);\n\nvar _webwackify = require('webwackify');\n\nvar _webwackify2 = _interopRequireDefault(_webwackify);\n\nvar _flashConstants = require('./flash-constants');\n\nvar _flashConstants2 = _interopRequireDefault(_flashConstants);\n\nvar resolveFlashTransmuxWorker = function resolveFlashTransmuxWorker() {\n  var result = undefined;\n\n  try {\n    result = require.resolve('./flash-transmuxer-worker');\n  } catch (e) {\n    // no result\n  }\n\n  return result;\n};\n\n/**\n * A wrapper around the setTimeout function that uses\n * the flash constant time between ticks value.\n *\n * @param {Function} func the function callback to run\n * @private\n */\nvar scheduleTick = function scheduleTick(func) {\n  // Chrome doesn't invoke requestAnimationFrame callbacks\n  // in background tabs, so use setTimeout.\n  _globalWindow2['default'].setTimeout(func, _flashConstants2['default'].TIME_BETWEEN_CHUNKS);\n};\n\n/**\n * Generates a random string of max length 6\n *\n * @return {String} the randomly generated string\n * @function generateRandomString\n * @private\n */\nvar generateRandomString = function generateRandomString() {\n  return Math.random().toString(36).slice(2, 8);\n};\n\n/**\n * Round a number to a specified number of places much like\n * toFixed but return a number instead of a string representation.\n *\n * @param {Number} num A number\n * @param {Number} places The number of decimal places which to\n * round\n * @private\n */\nvar toDecimalPlaces = function toDecimalPlaces(num, places) {\n  if (typeof places !== 'number' || places < 0) {\n    places = 0;\n  }\n\n  var scale = Math.pow(10, places);\n\n  return Math.round(num * scale) / scale;\n};\n\n/**\n * A SourceBuffer implementation for Flash rather than HTML.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource\n * @param {Object} mediaSource the flash media source\n * @class FlashSourceBuffer\n * @extends videojs.EventTarget\n */\n\nvar FlashSourceBuffer = (function (_videojs$EventTarget) {\n  _inherits(FlashSourceBuffer, _videojs$EventTarget);\n\n  function FlashSourceBuffer(mediaSource) {\n    var _this = this;\n\n    _classCallCheck(this, FlashSourceBuffer);\n\n    _get(Object.getPrototypeOf(FlashSourceBuffer.prototype), 'constructor', this).call(this);\n    var encodedHeader = undefined;\n\n    // Start off using the globally defined value but refine\n    // as we append data into flash\n    this.chunkSize_ = _flashConstants2['default'].BYTES_PER_CHUNK;\n\n    // byte arrays queued to be appended\n    this.buffer_ = [];\n\n    // the total number of queued bytes\n    this.bufferSize_ = 0;\n\n    // to be able to determine the correct position to seek to, we\n    // need to retain information about the mapping between the\n    // media timeline and PTS values\n    this.basePtsOffset_ = NaN;\n\n    this.mediaSource_ = mediaSource;\n\n    this.audioBufferEnd_ = NaN;\n    this.videoBufferEnd_ = NaN;\n\n    // indicates whether the asynchronous continuation of an operation\n    // is still being processed\n    // see https://w3c.github.io/media-source/#widl-SourceBuffer-updating\n    this.updating = false;\n    this.timestampOffset_ = 0;\n\n    encodedHeader = _globalWindow2['default'].btoa(String.fromCharCode.apply(null, Array.prototype.slice.call(_muxJsLibFlv2['default'].getFlvHeader())));\n\n    // create function names with added randomness for the global callbacks flash will use\n    // to get data from javascript into the swf. Random strings are added as a safety\n    // measure for pages with multiple players since these functions will be global\n    // instead of per instance. When making a call to the swf, the browser generates a\n    // try catch code snippet, but just takes the function name and writes out an unquoted\n    // call to that function. If the player id has any special characters, this will result\n    // in an error, so safePlayerId replaces all special characters to '_'\n    var safePlayerId = this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g, '_');\n\n    this.flashEncodedHeaderName_ = 'vjs_flashEncodedHeader_' + safePlayerId + generateRandomString();\n    this.flashEncodedDataName_ = 'vjs_flashEncodedData_' + safePlayerId + generateRandomString();\n\n    _globalWindow2['default'][this.flashEncodedHeaderName_] = function () {\n      delete _globalWindow2['default'][_this.flashEncodedHeaderName_];\n      return encodedHeader;\n    };\n\n    this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_);\n\n    this.transmuxer_ = (0, _webwackify2['default'])(_flashTransmuxerWorker2['default'], resolveFlashTransmuxWorker());\n    this.transmuxer_.postMessage({ action: 'init', options: {} });\n    this.transmuxer_.onmessage = function (event) {\n      if (event.data.action === 'data') {\n        _this.receiveBuffer_(event.data.segment);\n      }\n    };\n\n    this.one('updateend', function () {\n      _this.mediaSource_.tech_.trigger('loadedmetadata');\n    });\n\n    Object.defineProperty(this, 'timestampOffset', {\n      get: function get() {\n        return this.timestampOffset_;\n      },\n      set: function set(val) {\n        if (typeof val === 'number' && val >= 0) {\n          this.timestampOffset_ = val;\n          // We have to tell flash to expect a discontinuity\n          this.mediaSource_.swfObj.vjs_discontinuity();\n          // the media <-> PTS mapping must be re-established after\n          // the discontinuity\n          this.basePtsOffset_ = NaN;\n          this.audioBufferEnd_ = NaN;\n          this.videoBufferEnd_ = NaN;\n\n          this.transmuxer_.postMessage({ action: 'reset' });\n        }\n      }\n    });\n\n    Object.defineProperty(this, 'buffered', {\n      get: function get() {\n        if (!this.mediaSource_ || !this.mediaSource_.swfObj || !('vjs_getProperty' in this.mediaSource_.swfObj)) {\n          return _videoJs2['default'].createTimeRange();\n        }\n\n        var buffered = this.mediaSource_.swfObj.vjs_getProperty('buffered');\n\n        if (buffered && buffered.length) {\n          buffered[0][0] = toDecimalPlaces(buffered[0][0], 3);\n          buffered[0][1] = toDecimalPlaces(buffered[0][1], 3);\n        }\n        return _videoJs2['default'].createTimeRanges(buffered);\n      }\n    });\n\n    // On a seek we remove all text track data since flash has no concept\n    // of a buffered-range and everything else is reset on seek\n    this.mediaSource_.player_.on('seeked', function () {\n      (0, _removeCuesFromTrack2['default'])(0, Infinity, _this.metadataTrack_);\n      if (_this.inbandTextTracks_) {\n        for (var track in _this.inbandTextTracks_) {\n          (0, _removeCuesFromTrack2['default'])(0, Infinity, _this.inbandTextTracks_[track]);\n        }\n      }\n    });\n\n    var onHlsReset = this.onHlsReset_.bind(this);\n\n    // hls-reset is fired by videojs.Hls on to the tech after the main SegmentLoader\n    // resets its state and flushes the buffer\n    this.mediaSource_.player_.tech_.on('hls-reset', onHlsReset);\n\n    this.mediaSource_.player_.tech_.hls.on('dispose', function () {\n      _this.transmuxer_.terminate();\n      _this.mediaSource_.player_.tech_.off('hls-reset', onHlsReset);\n    });\n  }\n\n  /**\n   * Append bytes to the sourcebuffers buffer, in this case we\n   * have to append it to swf object.\n   *\n   * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/appendBuffer\n   * @param {Array} bytes\n   */\n\n  _createClass(FlashSourceBuffer, [{\n    key: 'appendBuffer',\n    value: function appendBuffer(bytes) {\n      var error = undefined;\n\n      if (this.updating) {\n        error = new Error('SourceBuffer.append() cannot be called ' + 'while an update is in progress');\n        error.name = 'InvalidStateError';\n        error.code = 11;\n        throw error;\n      }\n      this.updating = true;\n      this.mediaSource_.readyState = 'open';\n      this.trigger({ type: 'update' });\n\n      this.transmuxer_.postMessage({\n        action: 'push',\n        data: bytes.buffer,\n        byteOffset: bytes.byteOffset,\n        byteLength: bytes.byteLength\n      }, [bytes.buffer]);\n      this.transmuxer_.postMessage({ action: 'flush' });\n    }\n\n    /**\n     * Reset the parser and remove any data queued to be sent to the SWF.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/abort\n     */\n  }, {\n    key: 'abort',\n    value: function abort() {\n      this.buffer_ = [];\n      this.bufferSize_ = 0;\n      this.mediaSource_.swfObj.vjs_abort();\n\n      // report any outstanding updates have ended\n      if (this.updating) {\n        this.updating = false;\n        this.trigger({ type: 'updateend' });\n      }\n    }\n\n    /**\n     * Flash cannot remove ranges already buffered in the NetStream\n     * but seeking clears the buffer entirely. For most purposes,\n     * having this operation act as a no-op is acceptable.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/remove\n     * @param {Double} start start of the section to remove\n     * @param {Double} end end of the section to remove\n     */\n  }, {\n    key: 'remove',\n    value: function remove(start, end) {\n      (0, _removeCuesFromTrack2['default'])(start, end, this.metadataTrack_);\n      if (this.inbandTextTracks_) {\n        for (var track in this.inbandTextTracks_) {\n          (0, _removeCuesFromTrack2['default'])(start, end, this.inbandTextTracks_[track]);\n        }\n      }\n      this.trigger({ type: 'update' });\n      this.trigger({ type: 'updateend' });\n    }\n\n    /**\n     * Receive a buffer from the flv.\n     *\n     * @param {Object} segment\n     * @private\n     */\n  }, {\n    key: 'receiveBuffer_',\n    value: function receiveBuffer_(segment) {\n      var _this2 = this;\n\n      // create an in-band caption track if one is present in the segment\n      (0, _createTextTracksIfNecessary2['default'])(this, this.mediaSource_, segment);\n      (0, _addTextTrackData.addTextTrackData)(this, segment.captions, segment.metadata);\n\n      // Do this asynchronously since convertTagsToData_ can be time consuming\n      scheduleTick(function () {\n        var flvBytes = _this2.convertTagsToData_(segment);\n\n        if (_this2.buffer_.length === 0) {\n          scheduleTick(_this2.processBuffer_.bind(_this2));\n        }\n\n        if (flvBytes) {\n          _this2.buffer_.push(flvBytes);\n          _this2.bufferSize_ += flvBytes.byteLength;\n        }\n      });\n    }\n\n    /**\n     * Append a portion of the current buffer to the SWF.\n     *\n     * @private\n     */\n  }, {\n    key: 'processBuffer_',\n    value: function processBuffer_() {\n      var _this3 = this;\n\n      var chunkSize = _flashConstants2['default'].BYTES_PER_CHUNK;\n\n      if (!this.buffer_.length) {\n        if (this.updating !== false) {\n          this.updating = false;\n          this.trigger({ type: 'updateend' });\n        }\n        // do nothing if the buffer is empty\n        return;\n      }\n\n      // concatenate appends up to the max append size\n      var chunk = this.buffer_[0].subarray(0, chunkSize);\n\n      // requeue any bytes that won't make it this round\n      if (chunk.byteLength < chunkSize || this.buffer_[0].byteLength === chunkSize) {\n        this.buffer_.shift();\n      } else {\n        this.buffer_[0] = this.buffer_[0].subarray(chunkSize);\n      }\n\n      this.bufferSize_ -= chunk.byteLength;\n\n      // base64 encode the bytes\n      var binary = [];\n      var length = chunk.byteLength;\n\n      for (var i = 0; i < length; i++) {\n        binary.push(String.fromCharCode(chunk[i]));\n      }\n      var b64str = _globalWindow2['default'].btoa(binary.join(''));\n\n      _globalWindow2['default'][this.flashEncodedDataName_] = function () {\n        // schedule another processBuffer to process any left over data or to\n        // trigger updateend\n        scheduleTick(_this3.processBuffer_.bind(_this3));\n        delete _globalWindow2['default'][_this3.flashEncodedDataName_];\n        return b64str;\n      };\n\n      // Notify the swf that segment data is ready to be appended\n      this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_);\n    }\n\n    /**\n     * Turns an array of flv tags into a Uint8Array representing the\n     * flv data. Also removes any tags that are before the current\n     * time so that playback begins at or slightly after the right\n     * place on a seek\n     *\n     * @private\n     * @param {Object} segmentData object of segment data\n     */\n  }, {\n    key: 'convertTagsToData_',\n    value: function convertTagsToData_(segmentData) {\n      var segmentByteLength = 0;\n      var tech = this.mediaSource_.tech_;\n      var videoTargetPts = 0;\n      var segment = undefined;\n      var videoTags = segmentData.tags.videoTags;\n      var audioTags = segmentData.tags.audioTags;\n\n      // Establish the media timeline to PTS translation if we don't\n      // have one already\n      if (isNaN(this.basePtsOffset_) && (videoTags.length || audioTags.length)) {\n        // We know there is at least one video or audio tag, but since we may not have both,\n        // we use pts: Infinity for the missing tag. The will force the following Math.min\n        // call will to use the proper pts value since it will always be less than Infinity\n        var firstVideoTag = videoTags[0] || { pts: Infinity };\n        var firstAudioTag = audioTags[0] || { pts: Infinity };\n\n        this.basePtsOffset_ = Math.min(firstAudioTag.pts, firstVideoTag.pts);\n      }\n\n      if (tech.seeking()) {\n        // Do not use previously saved buffer end values while seeking since buffer\n        // is cleared on all seeks\n        this.videoBufferEnd_ = NaN;\n        this.audioBufferEnd_ = NaN;\n      }\n\n      if (isNaN(this.videoBufferEnd_)) {\n        if (tech.buffered().length) {\n          videoTargetPts = tech.buffered().end(0) - this.timestampOffset;\n        }\n\n        // Trim to currentTime if seeking\n        if (tech.seeking()) {\n          videoTargetPts = Math.max(videoTargetPts, tech.currentTime() - this.timestampOffset);\n        }\n\n        // PTS values are represented in milliseconds\n        videoTargetPts *= 1e3;\n        videoTargetPts += this.basePtsOffset_;\n      } else {\n        // Add a fudge factor of 0.1 to the last video pts appended since a rendition change\n        // could append an overlapping segment, in which case there is a high likelyhood\n        // a tag could have a matching pts to videoBufferEnd_, which would cause\n        // that tag to get appended by the tag.pts >= targetPts check below even though it\n        // is a duplicate of what was previously appended\n        videoTargetPts = this.videoBufferEnd_ + 0.1;\n      }\n\n      // filter complete GOPs with a presentation time less than the seek target/end of buffer\n      var currentIndex = videoTags.length;\n\n      // if the last tag is beyond videoTargetPts, then do not search the list for a GOP\n      // since our videoTargetPts lies in a future segment\n      if (currentIndex && videoTags[currentIndex - 1].pts >= videoTargetPts) {\n        // Start by walking backwards from the end of the list until we reach a tag that\n        // is equal to or less than videoTargetPts\n        while (--currentIndex) {\n          var currentTag = videoTags[currentIndex];\n\n          if (currentTag.pts > videoTargetPts) {\n            continue;\n          }\n\n          // if we see a keyFrame or metadata tag once we've gone below videoTargetPts,\n          // exit the loop as this is the start of the GOP that we want to append\n          if (currentTag.keyFrame || currentTag.metaDataTag) {\n            break;\n          }\n        }\n\n        // We need to check if there are any metadata tags that come before currentIndex\n        // as those will be metadata tags associated with the GOP we are appending\n        // There could be 0 to 2 metadata tags that come before the currentIndex depending\n        // on what videoTargetPts is and whether the transmuxer prepended metadata tags to this\n        // key frame\n        while (currentIndex) {\n          var nextTag = videoTags[currentIndex - 1];\n\n          if (!nextTag.metaDataTag) {\n            break;\n          }\n\n          currentIndex--;\n        }\n      }\n\n      var filteredVideoTags = videoTags.slice(currentIndex);\n\n      var audioTargetPts = undefined;\n\n      if (isNaN(this.audioBufferEnd_)) {\n        audioTargetPts = videoTargetPts;\n      } else {\n        // Add a fudge factor of 0.1 to the last video pts appended since a rendition change\n        // could append an overlapping segment, in which case there is a high likelyhood\n        // a tag could have a matching pts to videoBufferEnd_, which would cause\n        // that tag to get appended by the tag.pts >= targetPts check below even though it\n        // is a duplicate of what was previously appended\n        audioTargetPts = this.audioBufferEnd_ + 0.1;\n      }\n\n      if (filteredVideoTags.length) {\n        // If targetPts intersects a GOP and we appended the tags for the GOP that came\n        // before targetPts, we want to make sure to trim audio tags at the pts\n        // of the first video tag to avoid brief moments of silence\n        audioTargetPts = Math.min(audioTargetPts, filteredVideoTags[0].pts);\n      }\n\n      // skip tags with a presentation time less than the seek target/end of buffer\n      currentIndex = 0;\n\n      while (currentIndex < audioTags.length) {\n        if (audioTags[currentIndex].pts >= audioTargetPts) {\n          break;\n        }\n\n        currentIndex++;\n      }\n\n      var filteredAudioTags = audioTags.slice(currentIndex);\n\n      // update the audio and video buffer ends\n      if (filteredAudioTags.length) {\n        this.audioBufferEnd_ = filteredAudioTags[filteredAudioTags.length - 1].pts;\n      }\n      if (filteredVideoTags.length) {\n        this.videoBufferEnd_ = filteredVideoTags[filteredVideoTags.length - 1].pts;\n      }\n\n      var tags = this.getOrderedTags_(filteredVideoTags, filteredAudioTags);\n\n      if (tags.length === 0) {\n        return;\n      }\n\n      // If we are appending data that comes before our target pts, we want to tell\n      // the swf to adjust its notion of current time to account for the extra tags\n      // we are appending to complete the GOP that intersects with targetPts\n      if (tags[0].pts < videoTargetPts && tech.seeking()) {\n        var fudgeFactor = 1 / 30;\n        var currentTime = tech.currentTime();\n        var diff = (videoTargetPts - tags[0].pts) / 1e3;\n        var adjustedTime = currentTime - diff;\n\n        if (adjustedTime < fudgeFactor) {\n          adjustedTime = 0;\n        }\n\n        try {\n          this.mediaSource_.swfObj.vjs_adjustCurrentTime(adjustedTime);\n        } catch (e) {\n          // no-op for backwards compatability of swf. If adjustCurrentTime fails,\n          // the swf may incorrectly report currentTime and buffered ranges\n          // but should not affect playback over than the time displayed on the\n          // progress bar is inaccurate\n        }\n      }\n\n      // concatenate the bytes into a single segment\n      for (var i = 0; i < tags.length; i++) {\n        segmentByteLength += tags[i].bytes.byteLength;\n      }\n      segment = new Uint8Array(segmentByteLength);\n      for (var i = 0, j = 0; i < tags.length; i++) {\n        segment.set(tags[i].bytes, j);\n        j += tags[i].bytes.byteLength;\n      }\n\n      return segment;\n    }\n\n    /**\n     * Assemble the FLV tags in decoder order.\n     *\n     * @private\n     * @param {Array} videoTags list of video tags\n     * @param {Array} audioTags list of audio tags\n     */\n  }, {\n    key: 'getOrderedTags_',\n    value: function getOrderedTags_(videoTags, audioTags) {\n      var tag = undefined;\n      var tags = [];\n\n      while (videoTags.length || audioTags.length) {\n        if (!videoTags.length) {\n          // only audio tags remain\n          tag = audioTags.shift();\n        } else if (!audioTags.length) {\n          // only video tags remain\n          tag = videoTags.shift();\n        } else if (audioTags[0].dts < videoTags[0].dts) {\n          // audio should be decoded next\n          tag = audioTags.shift();\n        } else {\n          // video should be decoded next\n          tag = videoTags.shift();\n        }\n\n        tags.push(tag);\n      }\n\n      return tags;\n    }\n  }, {\n    key: 'onHlsReset_',\n    value: function onHlsReset_() {\n      this.transmuxer_.postMessage({ action: 'resetCaptions' });\n    }\n  }]);\n\n  return FlashSourceBuffer;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = FlashSourceBuffer;\nmodule.exports = exports['default'];","/**\n * @file stream.js\n */\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar Stream = (function () {\n  function Stream() {\n    _classCallCheck(this, Stream);\n\n    this.listeners = {};\n  }\n\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {String} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n  _createClass(Stream, [{\n    key: 'on',\n    value: function on(type, listener) {\n      if (!this.listeners[type]) {\n        this.listeners[type] = [];\n      }\n      this.listeners[type].push(listener);\n    }\n\n    /**\n     * Remove a listener for a specified event type.\n     *\n     * @param {String} type the event name\n     * @param {Function} listener  a function previously registered for this\n     * type of event through `on`\n     * @return {Boolean} if we could turn it off or not\n     */\n  }, {\n    key: 'off',\n    value: function off(type, listener) {\n      var index = undefined;\n\n      if (!this.listeners[type]) {\n        return false;\n      }\n      index = this.listeners[type].indexOf(listener);\n      this.listeners[type].splice(index, 1);\n      return index > -1;\n    }\n\n    /**\n     * Trigger an event of the specified type on this stream. Any additional\n     * arguments to this function are passed as parameters to event listeners.\n     *\n     * @param {String} type the event name\n     */\n  }, {\n    key: 'trigger',\n    value: function trigger(type) {\n      var callbacks = undefined;\n      var i = undefined;\n      var length = undefined;\n      var args = undefined;\n\n      callbacks = this.listeners[type];\n      if (!callbacks) {\n        return;\n      }\n      // Slicing the arguments on every invocation of this method\n      // can add a significant amount of overhead. Avoid the\n      // intermediate object creation for the common case of a\n      // single callback argument\n      if (arguments.length === 2) {\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].call(this, arguments[1]);\n        }\n      } else {\n        args = Array.prototype.slice.call(arguments, 1);\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].apply(this, args);\n        }\n      }\n    }\n\n    /**\n     * Destroys the stream and cleans up.\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.listeners = {};\n    }\n\n    /**\n     * Forwards all `data` events on this stream to the destination stream. The\n     * destination stream should provide a method `push` to receive the data\n     * events as they arrive.\n     *\n     * @param {Stream} destination the stream that will receive all `data` events\n     * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n     */\n  }, {\n    key: 'pipe',\n    value: function pipe(destination) {\n      this.on('data', function (data) {\n        destination.push(data);\n      });\n    }\n  }]);\n\n  return Stream;\n})();\n\nexports['default'] = Stream;\nmodule.exports = exports['default'];","/**\n * @file ad-cue-tags.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\n/**\n * Searches for an ad cue that overlaps with the given mediaTime\n */\nvar findAdCue = function findAdCue(track, mediaTime) {\n  var cues = track.cues;\n\n  for (var i = 0; i < cues.length; i++) {\n    var cue = cues[i];\n\n    if (mediaTime >= cue.adStartTime && mediaTime <= cue.adEndTime) {\n      return cue;\n    }\n  }\n  return null;\n};\n\nvar updateAdCues = function updateAdCues(media, track) {\n  var offset = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n\n  if (!media.segments) {\n    return;\n  }\n\n  var mediaTime = offset;\n  var cue = undefined;\n\n  for (var i = 0; i < media.segments.length; i++) {\n    var segment = media.segments[i];\n\n    if (!cue) {\n      // Since the cues will span for at least the segment duration, adding a fudge\n      // factor of half segment duration will prevent duplicate cues from being\n      // created when timing info is not exact (e.g. cue start time initialized\n      // at 10.006677, but next call mediaTime is 10.003332 )\n      cue = findAdCue(track, mediaTime + segment.duration / 2);\n    }\n\n    if (cue) {\n      if ('cueIn' in segment) {\n        // Found a CUE-IN so end the cue\n        cue.endTime = mediaTime;\n        cue.adEndTime = mediaTime;\n        mediaTime += segment.duration;\n        cue = null;\n        continue;\n      }\n\n      if (mediaTime < cue.endTime) {\n        // Already processed this mediaTime for this cue\n        mediaTime += segment.duration;\n        continue;\n      }\n\n      // otherwise extend cue until a CUE-IN is found\n      cue.endTime += segment.duration;\n    } else {\n      if ('cueOut' in segment) {\n        cue = new _globalWindow2['default'].VTTCue(mediaTime, mediaTime + segment.duration, segment.cueOut);\n        cue.adStartTime = mediaTime;\n        // Assumes tag format to be\n        // #EXT-X-CUE-OUT:30\n        cue.adEndTime = mediaTime + parseFloat(segment.cueOut);\n        track.addCue(cue);\n      }\n\n      if ('cueOutCont' in segment) {\n        // Entered into the middle of an ad cue\n        var adOffset = undefined;\n        var adTotal = undefined;\n\n        // Assumes tag formate to be\n        // #EXT-X-CUE-OUT-CONT:10/30\n\n        var _segment$cueOutCont$split$map = segment.cueOutCont.split('/').map(parseFloat);\n\n        var _segment$cueOutCont$split$map2 = _slicedToArray(_segment$cueOutCont$split$map, 2);\n\n        adOffset = _segment$cueOutCont$split$map2[0];\n        adTotal = _segment$cueOutCont$split$map2[1];\n\n        cue = new _globalWindow2['default'].VTTCue(mediaTime, mediaTime + segment.duration, '');\n        cue.adStartTime = mediaTime - adOffset;\n        cue.adEndTime = cue.adStartTime + adTotal;\n        track.addCue(cue);\n      }\n    }\n    mediaTime += segment.duration;\n  }\n};\n\nexports['default'] = {\n  updateAdCues: updateAdCues,\n  findAdCue: findAdCue\n};\nmodule.exports = exports['default'];","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0QkRBNTdEMjA4REExMUU5QTM1MDhFRjRDM0UxRTc2QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0QkRBNTdEMzA4REExMUU5QTM1MDhFRjRDM0UxRTc2QSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRCREE1N0QwMDhEQTExRTlBMzUwOEVGNEMzRTFFNzZBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRCREE1N0QxMDhEQTExRTlBMzUwOEVGNEMzRTFFNzZBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+4bOMNwAABupJREFUeNrMWXlsG1Ua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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0REM2MjI0MjA4REExMUU5QUQ0NzlEREU5QTJDNjIyQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0REM2MjI0MzA4REExMUU5QUQ0NzlEREU5QTJDNjIyQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREQzYyMjQwMDhEQTExRTlBRDQ3OURERTlBMkM2MjJCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjREQzYyMjQxMDhEQTExRTlBRDQ3OURERTlBMkM2MjJCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Gk0P+AAABfxJREFUeNrUWGlsVFUU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\"","/**\n * @file sync-controller.js\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x2, _x3, _x4) { var _again = true; _function: while (_again) { var object = _x2, property = _x3, receiver = _x4; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x2 = parent; _x3 = property; _x4 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _muxJsLibMp4Probe = require('mux.js/lib/mp4/probe');\n\nvar _muxJsLibMp4Probe2 = _interopRequireDefault(_muxJsLibMp4Probe);\n\nvar _muxJsLibToolsTsInspectorJs = require('mux.js/lib/tools/ts-inspector.js');\n\nvar _playlist = require('./playlist');\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar syncPointStrategies = [\n// Stategy \"VOD\": Handle the VOD-case where the sync-point is *always*\n//                the equivalence display-time 0 === segment-index 0\n{\n  name: 'VOD',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    if (duration !== Infinity) {\n      var syncPoint = {\n        time: 0,\n        segmentIndex: 0\n      };\n\n      return syncPoint;\n    }\n    return null;\n  }\n},\n// Stategy \"ProgramDateTime\": We have a program-date-time tag in this playlist\n{\n  name: 'ProgramDateTime',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    if (syncController.datetimeToDisplayTime && playlist.dateTimeObject) {\n      var playlistTime = playlist.dateTimeObject.getTime() / 1000;\n      var playlistStart = playlistTime + syncController.datetimeToDisplayTime;\n      var syncPoint = {\n        time: playlistStart,\n        segmentIndex: 0\n      };\n\n      return syncPoint;\n    }\n    return null;\n  }\n},\n// Stategy \"Segment\": We have a known time mapping for a timeline and a\n//                    segment in the current timeline with timing data\n{\n  name: 'Segment',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    var segments = playlist.segments || [];\n    var syncPoint = null;\n    var lastDistance = null;\n\n    currentTime = currentTime || 0;\n\n    for (var i = 0; i < segments.length; i++) {\n      var segment = segments[i];\n\n      if (segment.timeline === currentTimeline && typeof segment.start !== 'undefined') {\n        var distance = Math.abs(currentTime - segment.start);\n\n        // Once the distance begins to increase, we have passed\n        // currentTime and can stop looking for better candidates\n        if (lastDistance !== null && lastDistance < distance) {\n          break;\n        }\n\n        if (!syncPoint || lastDistance === null || lastDistance >= distance) {\n          lastDistance = distance;\n          syncPoint = {\n            time: segment.start,\n            segmentIndex: i\n          };\n        }\n      }\n    }\n    return syncPoint;\n  }\n},\n// Stategy \"Discontinuity\": We have a discontinuity with a known\n//                          display-time\n{\n  name: 'Discontinuity',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    var syncPoint = null;\n\n    currentTime = currentTime || 0;\n\n    if (playlist.discontinuityStarts && playlist.discontinuityStarts.length) {\n      var lastDistance = null;\n\n      for (var i = 0; i < playlist.discontinuityStarts.length; i++) {\n        var segmentIndex = playlist.discontinuityStarts[i];\n        var discontinuity = playlist.discontinuitySequence + i + 1;\n        var discontinuitySync = syncController.discontinuities[discontinuity];\n\n        if (discontinuitySync) {\n          var distance = Math.abs(currentTime - discontinuitySync.time);\n\n          // Once the distance begins to increase, we have passed\n          // currentTime and can stop looking for better candidates\n          if (lastDistance !== null && lastDistance < distance) {\n            break;\n          }\n\n          if (!syncPoint || lastDistance === null || lastDistance >= distance) {\n            lastDistance = distance;\n            syncPoint = {\n              time: discontinuitySync.time,\n              segmentIndex: segmentIndex\n            };\n          }\n        }\n      }\n    }\n    return syncPoint;\n  }\n},\n// Stategy \"Playlist\": We have a playlist with a known mapping of\n//                     segment index to display time\n{\n  name: 'Playlist',\n  run: function run(syncController, playlist, duration, currentTimeline, currentTime) {\n    if (playlist.syncInfo) {\n      var syncPoint = {\n        time: playlist.syncInfo.time,\n        segmentIndex: playlist.syncInfo.mediaSequence - playlist.mediaSequence\n      };\n\n      return syncPoint;\n    }\n    return null;\n  }\n}];\n\nexports.syncPointStrategies = syncPointStrategies;\n\nvar SyncController = (function (_videojs$EventTarget) {\n  _inherits(SyncController, _videojs$EventTarget);\n\n  function SyncController() {\n    var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n    _classCallCheck(this, SyncController);\n\n    _get(Object.getPrototypeOf(SyncController.prototype), 'constructor', this).call(this);\n    // Segment Loader state variables...\n    // ...for synching across variants\n    this.inspectCache_ = undefined;\n\n    // ...for synching across variants\n    this.timelines = [];\n    this.discontinuities = [];\n    this.datetimeToDisplayTime = null;\n\n    if (options.debug) {\n      this.logger_ = _videoJs2['default'].log.bind(_videoJs2['default'], 'sync-controller ->');\n    }\n  }\n\n  /**\n   * Find a sync-point for the playlist specified\n   *\n   * A sync-point is defined as a known mapping from display-time to\n   * a segment-index in the current playlist.\n   *\n   * @param {Playlist} playlist\n   *        The playlist that needs a sync-point\n   * @param {Number} duration\n   *        Duration of the MediaSource (Infinite if playing a live source)\n   * @param {Number} currentTimeline\n   *        The last timeline from which a segment was loaded\n   * @returns {Object}\n   *          A sync-point object\n   */\n\n  _createClass(SyncController, [{\n    key: 'getSyncPoint',\n    value: function getSyncPoint(playlist, duration, currentTimeline, currentTime) {\n      var syncPoints = this.runStrategies_(playlist, duration, currentTimeline, currentTime);\n\n      if (!syncPoints.length) {\n        // Signal that we need to attempt to get a sync-point manually\n        // by fetching a segment in the playlist and constructing\n        // a sync-point from that information\n        return null;\n      }\n\n      // Now find the sync-point that is closest to the currentTime because\n      // that should result in the most accurate guess about which segment\n      // to fetch\n      return this.selectSyncPoint_(syncPoints, { key: 'time', value: currentTime });\n    }\n\n    /**\n     * Calculate the amount of time that has expired off the playlist during playback\n     *\n     * @param {Playlist} playlist\n     *        Playlist object to calculate expired from\n     * @param {Number} duration\n     *        Duration of the MediaSource (Infinity if playling a live source)\n     * @returns {Number|null}\n     *          The amount of time that has expired off the playlist during playback. Null\n     *          if no sync-points for the playlist can be found.\n     */\n  }, {\n    key: 'getExpiredTime',\n    value: function getExpiredTime(playlist, duration) {\n      if (!playlist || !playlist.segments) {\n        return null;\n      }\n\n      var syncPoints = this.runStrategies_(playlist, duration, playlist.discontinuitySequence, 0);\n\n      // Without sync-points, there is not enough information to determine the expired time\n      if (!syncPoints.length) {\n        return null;\n      }\n\n      var syncPoint = this.selectSyncPoint_(syncPoints, {\n        key: 'segmentIndex',\n        value: 0\n      });\n\n      // If the sync-point is beyond the start of the playlist, we want to subtract the\n      // duration from index 0 to syncPoint.segmentIndex instead of adding.\n      if (syncPoint.segmentIndex > 0) {\n        syncPoint.time *= -1;\n      }\n\n      return Math.abs(syncPoint.time + (0, _playlist.sumDurations)(playlist, syncPoint.segmentIndex, 0));\n    }\n\n    /**\n     * Runs each sync-point strategy and returns a list of sync-points returned by the\n     * strategies\n     *\n     * @private\n     * @param {Playlist} playlist\n     *        The playlist that needs a sync-point\n     * @param {Number} duration\n     *        Duration of the MediaSource (Infinity if playing a live source)\n     * @param {Number} currentTimeline\n     *        The last timeline from which a segment was loaded\n     * @returns {Array}\n     *          A list of sync-point objects\n     */\n  }, {\n    key: 'runStrategies_',\n    value: function runStrategies_(playlist, duration, currentTimeline, currentTime) {\n      var syncPoints = [];\n\n      // Try to find a sync-point in by utilizing various strategies...\n      for (var i = 0; i < syncPointStrategies.length; i++) {\n        var strategy = syncPointStrategies[i];\n        var syncPoint = strategy.run(this, playlist, duration, currentTimeline, currentTime);\n\n        if (syncPoint) {\n          syncPoint.strategy = strategy.name;\n          syncPoints.push({\n            strategy: strategy.name,\n            syncPoint: syncPoint\n          });\n          this.logger_('syncPoint found via <' + strategy.name + '>:', syncPoint);\n        }\n      }\n\n      return syncPoints;\n    }\n\n    /**\n     * Selects the sync-point nearest the specified target\n     *\n     * @private\n     * @param {Array} syncPoints\n     *        List of sync-points to select from\n     * @param {Object} target\n     *        Object specifying the property and value we are targeting\n     * @param {String} target.key\n     *        Specifies the property to target. Must be either 'time' or 'segmentIndex'\n     * @param {Number} target.value\n     *        The value to target for the specified key.\n     * @returns {Object}\n     *          The sync-point nearest the target\n     */\n  }, {\n    key: 'selectSyncPoint_',\n    value: function selectSyncPoint_(syncPoints, target) {\n      var bestSyncPoint = syncPoints[0].syncPoint;\n      var bestDistance = Math.abs(syncPoints[0].syncPoint[target.key] - target.value);\n      var bestStrategy = syncPoints[0].strategy;\n\n      for (var i = 1; i < syncPoints.length; i++) {\n        var newDistance = Math.abs(syncPoints[i].syncPoint[target.key] - target.value);\n\n        if (newDistance < bestDistance) {\n          bestDistance = newDistance;\n          bestSyncPoint = syncPoints[i].syncPoint;\n          bestStrategy = syncPoints[i].strategy;\n        }\n      }\n\n      this.logger_('syncPoint with strategy <' + bestStrategy + '> chosen: ', bestSyncPoint);\n      return bestSyncPoint;\n    }\n\n    /**\n     * Save any meta-data present on the segments when segments leave\n     * the live window to the playlist to allow for synchronization at the\n     * playlist level later.\n     *\n     * @param {Playlist} oldPlaylist - The previous active playlist\n     * @param {Playlist} newPlaylist - The updated and most current playlist\n     */\n  }, {\n    key: 'saveExpiredSegmentInfo',\n    value: function saveExpiredSegmentInfo(oldPlaylist, newPlaylist) {\n      var mediaSequenceDiff = newPlaylist.mediaSequence - oldPlaylist.mediaSequence;\n\n      // When a segment expires from the playlist and it has a start time\n      // save that information as a possible sync-point reference in future\n      for (var i = mediaSequenceDiff - 1; i >= 0; i--) {\n        var lastRemovedSegment = oldPlaylist.segments[i];\n\n        if (lastRemovedSegment && typeof lastRemovedSegment.start !== 'undefined') {\n          newPlaylist.syncInfo = {\n            mediaSequence: oldPlaylist.mediaSequence + i,\n            time: lastRemovedSegment.start\n          };\n          this.logger_('playlist sync:', newPlaylist.syncInfo);\n          this.trigger('syncinfoupdate');\n          break;\n        }\n      }\n    }\n\n    /**\n     * Save the mapping from playlist's ProgramDateTime to display. This should\n     * only ever happen once at the start of playback.\n     *\n     * @param {Playlist} playlist - The currently active playlist\n     */\n  }, {\n    key: 'setDateTimeMapping',\n    value: function setDateTimeMapping(playlist) {\n      if (!this.datetimeToDisplayTime && playlist.dateTimeObject) {\n        var playlistTimestamp = playlist.dateTimeObject.getTime() / 1000;\n\n        this.datetimeToDisplayTime = -playlistTimestamp;\n      }\n    }\n\n    /**\n     * Reset the state of the inspection cache when we do a rendition\n     * switch\n     */\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.inspectCache_ = undefined;\n    }\n\n    /**\n     * Probe or inspect a fmp4 or an mpeg2-ts segment to determine the start\n     * and end of the segment in it's internal \"media time\". Used to generate\n     * mappings from that internal \"media time\" to the display time that is\n     * shown on the player.\n     *\n     * @param {SegmentInfo} segmentInfo - The current active request information\n     */\n  }, {\n    key: 'probeSegmentInfo',\n    value: function probeSegmentInfo(segmentInfo) {\n      var segment = segmentInfo.segment;\n      var playlist = segmentInfo.playlist;\n      var timingInfo = undefined;\n\n      if (segment.map) {\n        timingInfo = this.probeMp4Segment_(segmentInfo);\n      } else {\n        timingInfo = this.probeTsSegment_(segmentInfo);\n      }\n\n      if (timingInfo) {\n        if (this.calculateSegmentTimeMapping_(segmentInfo, timingInfo)) {\n          this.saveDiscontinuitySyncInfo_(segmentInfo);\n\n          // If the playlist does not have sync information yet, record that information\n          // now with segment timing information\n          if (!playlist.syncInfo) {\n            playlist.syncInfo = {\n              mediaSequence: playlist.mediaSequence + segmentInfo.mediaIndex,\n              time: segment.start\n            };\n          }\n        }\n      }\n\n      return timingInfo;\n    }\n\n    /**\n     * Probe an fmp4 or an mpeg2-ts segment to determine the start of the segment\n     * in it's internal \"media time\".\n     *\n     * @private\n     * @param {SegmentInfo} segmentInfo - The current active request information\n     * @return {object} The start and end time of the current segment in \"media time\"\n     */\n  }, {\n    key: 'probeMp4Segment_',\n    value: function probeMp4Segment_(segmentInfo) {\n      var segment = segmentInfo.segment;\n      var timescales = _muxJsLibMp4Probe2['default'].timescale(segment.map.bytes);\n      var startTime = _muxJsLibMp4Probe2['default'].startTime(timescales, segmentInfo.bytes);\n\n      if (segmentInfo.timestampOffset !== null) {\n        segmentInfo.timestampOffset -= startTime;\n      }\n\n      return {\n        start: startTime,\n        end: startTime + segment.duration\n      };\n    }\n\n    /**\n     * Probe an mpeg2-ts segment to determine the start and end of the segment\n     * in it's internal \"media time\".\n     *\n     * @private\n     * @param {SegmentInfo} segmentInfo - The current active request information\n     * @return {object} The start and end time of the current segment in \"media time\"\n     */\n  }, {\n    key: 'probeTsSegment_',\n    value: function probeTsSegment_(segmentInfo) {\n      var timeInfo = (0, _muxJsLibToolsTsInspectorJs.inspect)(segmentInfo.bytes, this.inspectCache_);\n      var segmentStartTime = undefined;\n      var segmentEndTime = undefined;\n\n      if (!timeInfo) {\n        return null;\n      }\n\n      if (timeInfo.video && timeInfo.video.length === 2) {\n        this.inspectCache_ = timeInfo.video[1].dts;\n        segmentStartTime = timeInfo.video[0].dtsTime;\n        segmentEndTime = timeInfo.video[1].dtsTime;\n      } else if (timeInfo.audio && timeInfo.audio.length === 2) {\n        this.inspectCache_ = timeInfo.audio[1].dts;\n        segmentStartTime = timeInfo.audio[0].dtsTime;\n        segmentEndTime = timeInfo.audio[1].dtsTime;\n      }\n\n      return {\n        start: segmentStartTime,\n        end: segmentEndTime,\n        containsVideo: timeInfo.video && timeInfo.video.length === 2,\n        containsAudio: timeInfo.audio && timeInfo.audio.length === 2\n      };\n    }\n  }, {\n    key: 'timestampOffsetForTimeline',\n    value: function timestampOffsetForTimeline(timeline) {\n      if (typeof this.timelines[timeline] === 'undefined') {\n        return null;\n      }\n      return this.timelines[timeline].time;\n    }\n  }, {\n    key: 'mappingForTimeline',\n    value: function mappingForTimeline(timeline) {\n      if (typeof this.timelines[timeline] === 'undefined') {\n        return null;\n      }\n      return this.timelines[timeline].mapping;\n    }\n\n    /**\n     * Use the \"media time\" for a segment to generate a mapping to \"display time\" and\n     * save that display time to the segment.\n     *\n     * @private\n     * @param {SegmentInfo} segmentInfo\n     *        The current active request information\n     * @param {object} timingInfo\n     *        The start and end time of the current segment in \"media time\"\n     * @returns {Boolean}\n     *          Returns false if segment time mapping could not be calculated\n     */\n  }, {\n    key: 'calculateSegmentTimeMapping_',\n    value: function calculateSegmentTimeMapping_(segmentInfo, timingInfo) {\n      var segment = segmentInfo.segment;\n      var mappingObj = this.timelines[segmentInfo.timeline];\n\n      if (segmentInfo.timestampOffset !== null) {\n        this.logger_('tsO:', segmentInfo.timestampOffset);\n\n        mappingObj = {\n          time: segmentInfo.startOfSegment,\n          mapping: segmentInfo.startOfSegment - timingInfo.start\n        };\n        this.timelines[segmentInfo.timeline] = mappingObj;\n        this.trigger('timestampoffset');\n\n        segment.start = segmentInfo.startOfSegment;\n        segment.end = timingInfo.end + mappingObj.mapping;\n      } else if (mappingObj) {\n        segment.start = timingInfo.start + mappingObj.mapping;\n        segment.end = timingInfo.end + mappingObj.mapping;\n      } else {\n        return false;\n      }\n\n      return true;\n    }\n\n    /**\n     * Each time we have discontinuity in the playlist, attempt to calculate the location\n     * in display of the start of the discontinuity and save that. We also save an accuracy\n     * value so that we save values with the most accuracy (closest to 0.)\n     *\n     * @private\n     * @param {SegmentInfo} segmentInfo - The current active request information\n     */\n  }, {\n    key: 'saveDiscontinuitySyncInfo_',\n    value: function saveDiscontinuitySyncInfo_(segmentInfo) {\n      var playlist = segmentInfo.playlist;\n      var segment = segmentInfo.segment;\n\n      // If the current segment is a discontinuity then we know exactly where\n      // the start of the range and it's accuracy is 0 (greater accuracy values\n      // mean more approximation)\n      if (segment.discontinuity) {\n        this.discontinuities[segment.timeline] = {\n          time: segment.start,\n          accuracy: 0\n        };\n      } else if (playlist.discontinuityStarts.length) {\n        // Search for future discontinuities that we can provide better timing\n        // information for and save that information for sync purposes\n        for (var i = 0; i < playlist.discontinuityStarts.length; i++) {\n          var segmentIndex = playlist.discontinuityStarts[i];\n          var discontinuity = playlist.discontinuitySequence + i + 1;\n          var mediaIndexDiff = segmentIndex - segmentInfo.mediaIndex;\n          var accuracy = Math.abs(mediaIndexDiff);\n\n          if (!this.discontinuities[discontinuity] || this.discontinuities[discontinuity].accuracy > accuracy) {\n            var time = undefined;\n\n            if (mediaIndexDiff < 0) {\n              time = segment.start - (0, _playlist.sumDurations)(playlist, segmentInfo.mediaIndex, segmentIndex);\n            } else {\n              time = segment.end + (0, _playlist.sumDurations)(playlist, segmentInfo.mediaIndex + 1, segmentIndex);\n            }\n\n            this.discontinuities[discontinuity] = {\n              time: time,\n              accuracy: accuracy\n            };\n          }\n        }\n      }\n    }\n\n    /**\n     * A debugging logger noop that is set to console.log only if debugging\n     * is enabled globally\n     *\n     * @private\n     */\n  }, {\n    key: 'logger_',\n    value: function logger_() {}\n  }]);\n\n  return SyncController;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = SyncController;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RTREQTFDMjA4REExMUU5QkU1RkQzMTIzN0IxRjk2RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RTREQTFDMzA4REExMUU5QkU1RkQzMTIzN0IxRjk2RSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRFNERBMUMwMDhEQTExRTlCRTVGRDMxMjM3QjFGOTZFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRFNERBMUMxMDhEQTExRTlCRTVGRDMxMjM3QjFGOTZFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+nYVOoQAAB4hJREFUeNrUWHlsHOUV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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0N0I4OUE5MjA4REExMUU5OTEzN0FEMjkxQjBFQkQwMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0N0I4OUE5MzA4REExMUU5OTEzN0FEMjkxQjBFQkQwMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ3Qjg5QTkwMDhEQTExRTk5MTM3QUQyOTFCMEVCRDAyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ3Qjg5QTkxMDhEQTExRTk5MTM3QUQyOTFCMEVCRDAyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Dwr4CAAABntJREFUeNrUWGlsVFUU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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0ODU5RTNBMjA4REExMUU5OTk2MEFFMEQ2OTQxMUZBMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0ODU5RTNBMzA4REExMUU5OTk2MEFFMEQ2OTQxMUZBMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ4NTlFM0EwMDhEQTExRTk5OTYwQUUwRDY5NDExRkEyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ4NTlFM0ExMDhEQTExRTk5OTYwQUUwRDY5NDExRkEyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+PsPoCQAAB41JREFUeNrMWAlsXNUV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\"","/**\n * mux.js\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * Reads in-band caption information from a video elementary\n * stream. Captions must follow the CEA-708 standard for injection\n * into an MPEG-2 transport streams.\n * @see https://en.wikipedia.org/wiki/CEA-708\n * @see https://www.gpo.gov/fdsys/pkg/CFR-2007-title47-vol1/pdf/CFR-2007-title47-vol1-sec15-119.pdf\n */\n\n'use strict';\n\n// -----------------\n// Link To Transport\n// -----------------\n\n// Supplemental enhancement information (SEI) NAL units have a\n// payload type field to indicate how they are to be\n// interpreted. CEAS-708 caption content is always transmitted with\n// payload type 0x04.\nvar USER_DATA_REGISTERED_ITU_T_T35 = 4,\n    RBSP_TRAILING_BITS = 128,\n    Stream = require('../utils/stream');\n\n/**\n  * Parse a supplemental enhancement information (SEI) NAL unit.\n  * Stops parsing once a message of type ITU T T35 has been found.\n  *\n  * @param bytes {Uint8Array} the bytes of a SEI NAL unit\n  * @return {object} the parsed SEI payload\n  * @see Rec. ITU-T H.264, 7.3.2.3.1\n  */\nvar parseSei = function(bytes) {\n  var\n    i = 0,\n    result = {\n      payloadType: -1,\n      payloadSize: 0\n    },\n    payloadType = 0,\n    payloadSize = 0;\n\n  // go through the sei_rbsp parsing each each individual sei_message\n  while (i < bytes.byteLength) {\n    // stop once we have hit the end of the sei_rbsp\n    if (bytes[i] === RBSP_TRAILING_BITS) {\n      break;\n    }\n\n    // Parse payload type\n    while (bytes[i] === 0xFF) {\n      payloadType += 255;\n      i++;\n    }\n    payloadType += bytes[i++];\n\n    // Parse payload size\n    while (bytes[i] === 0xFF) {\n      payloadSize += 255;\n      i++;\n    }\n    payloadSize += bytes[i++];\n\n    // this sei_message is a 608/708 caption so save it and break\n    // there can only ever be one caption message in a frame's sei\n    if (!result.payload && payloadType === USER_DATA_REGISTERED_ITU_T_T35) {\n      result.payloadType = payloadType;\n      result.payloadSize = payloadSize;\n      result.payload = bytes.subarray(i, i + payloadSize);\n      break;\n    }\n\n    // skip the payload and parse the next message\n    i += payloadSize;\n    payloadType = 0;\n    payloadSize = 0;\n  }\n\n  return result;\n};\n\n// see ANSI/SCTE 128-1 (2013), section 8.1\nvar parseUserData = function(sei) {\n  // itu_t_t35_contry_code must be 181 (United States) for\n  // captions\n  if (sei.payload[0] !== 181) {\n    return null;\n  }\n\n  // itu_t_t35_provider_code should be 49 (ATSC) for captions\n  if (((sei.payload[1] << 8) | sei.payload[2]) !== 49) {\n    return null;\n  }\n\n  // the user_identifier should be \"GA94\" to indicate ATSC1 data\n  if (String.fromCharCode(sei.payload[3],\n                          sei.payload[4],\n                          sei.payload[5],\n                          sei.payload[6]) !== 'GA94') {\n    return null;\n  }\n\n  // finally, user_data_type_code should be 0x03 for caption data\n  if (sei.payload[7] !== 0x03) {\n    return null;\n  }\n\n  // return the user_data_type_structure and strip the trailing\n  // marker bits\n  return sei.payload.subarray(8, sei.payload.length - 1);\n};\n\n// see CEA-708-D, section 4.4\nvar parseCaptionPackets = function(pts, userData) {\n  var results = [], i, count, offset, data;\n\n  // if this is just filler, return immediately\n  if (!(userData[0] & 0x40)) {\n    return results;\n  }\n\n  // parse out the cc_data_1 and cc_data_2 fields\n  count = userData[0] & 0x1f;\n  for (i = 0; i < count; i++) {\n    offset = i * 3;\n    data = {\n      type: userData[offset + 2] & 0x03,\n      pts: pts\n    };\n\n    // capture cc data when cc_valid is 1\n    if (userData[offset + 2] & 0x04) {\n      data.ccData = (userData[offset + 3] << 8) | userData[offset + 4];\n      results.push(data);\n    }\n  }\n  return results;\n};\n\nvar CaptionStream = function() {\n\n  CaptionStream.prototype.init.call(this);\n\n  this.captionPackets_ = [];\n\n  this.ccStreams_ = [\n    new Cea608Stream(0, 0), // eslint-disable-line no-use-before-define\n    new Cea608Stream(0, 1), // eslint-disable-line no-use-before-define\n    new Cea608Stream(1, 0), // eslint-disable-line no-use-before-define\n    new Cea608Stream(1, 1) // eslint-disable-line no-use-before-define\n  ];\n\n  this.reset();\n\n  // forward data and done events from CCs to this CaptionStream\n  this.ccStreams_.forEach(function(cc) {\n    cc.on('data', this.trigger.bind(this, 'data'));\n    cc.on('done', this.trigger.bind(this, 'done'));\n  }, this);\n\n};\n\nCaptionStream.prototype = new Stream();\nCaptionStream.prototype.push = function(event) {\n  var sei, userData;\n\n  // only examine SEI NALs\n  if (event.nalUnitType !== 'sei_rbsp') {\n    return;\n  }\n\n  // parse the sei\n  sei = parseSei(event.escapedRBSP);\n\n  // ignore everything but user_data_registered_itu_t_t35\n  if (sei.payloadType !== USER_DATA_REGISTERED_ITU_T_T35) {\n    return;\n  }\n\n  // parse out the user data payload\n  userData = parseUserData(sei);\n\n  // ignore unrecognized userData\n  if (!userData) {\n    return;\n  }\n\n  // Sometimes, the same segment # will be downloaded twice. To stop the\n  // caption data from being processed twice, we track the latest dts we've\n  // received and ignore everything with a dts before that. However, since\n  // data for a specific dts can be split across 2 packets on either side of\n  // a segment boundary, we need to make sure we *don't* ignore the second\n  // dts packet we receive that has dts === this.latestDts_. And thus, the\n  // ignoreNextEqualDts_ flag was born.\n  if (event.dts < this.latestDts_) {\n    // We've started getting older data, so set the flag.\n    this.ignoreNextEqualDts_ = true;\n    return;\n  } else if ((event.dts === this.latestDts_) && (this.ignoreNextEqualDts_)) {\n    // We've received the last duplicate packet, time to start processing again\n    this.ignoreNextEqualDts_ = false;\n    return;\n  }\n\n  // parse out CC data packets and save them for later\n  this.captionPackets_ = this.captionPackets_.concat(parseCaptionPackets(event.pts, userData));\n  this.latestDts_ = event.dts;\n};\n\nCaptionStream.prototype.flush = function() {\n  // make sure we actually parsed captions before proceeding\n  if (!this.captionPackets_.length) {\n    this.ccStreams_.forEach(function(cc) {\n      cc.flush();\n    }, this);\n    return;\n  }\n\n  // In Chrome, the Array#sort function is not stable so add a\n  // presortIndex that we can use to ensure we get a stable-sort\n  this.captionPackets_.forEach(function(elem, idx) {\n    elem.presortIndex = idx;\n  });\n\n  // sort caption byte-pairs based on their PTS values\n  this.captionPackets_.sort(function(a, b) {\n    if (a.pts === b.pts) {\n      return a.presortIndex - b.presortIndex;\n    }\n    return a.pts - b.pts;\n  });\n\n  this.captionPackets_.forEach(function(packet) {\n    if (packet.type < 2) {\n      // Dispatch packet to the right Cea608Stream\n      this.dispatchCea608Packet(packet);\n    }\n    // this is where an 'else' would go for a dispatching packets\n    // to a theoretical Cea708Stream that handles SERVICEn data\n  }, this);\n\n  this.captionPackets_.length = 0;\n  this.ccStreams_.forEach(function(cc) {\n    cc.flush();\n  }, this);\n  return;\n};\n\nCaptionStream.prototype.reset = function() {\n  this.latestDts_ = null;\n  this.ignoreNextEqualDts_ = false;\n  this.activeCea608Channel_ = [null, null];\n  this.ccStreams_.forEach(function(ccStream) {\n    ccStream.reset();\n  });\n};\n\nCaptionStream.prototype.dispatchCea608Packet = function(packet) {\n  // NOTE: packet.type is the CEA608 field\n  if (this.setsChannel1Active(packet)) {\n    this.activeCea608Channel_[packet.type] = 0;\n  } else if (this.setsChannel2Active(packet)) {\n    this.activeCea608Channel_[packet.type] = 1;\n  }\n  if (this.activeCea608Channel_[packet.type] === null) {\n    // If we haven't received anything to set the active channel, discard the\n    // data; we don't want jumbled captions\n    return;\n  }\n  this.ccStreams_[(packet.type << 1) + this.activeCea608Channel_[packet.type]].push(packet);\n};\n\nCaptionStream.prototype.setsChannel1Active = function(packet) {\n  return ((packet.ccData & 0x7800) === 0x1000);\n};\nCaptionStream.prototype.setsChannel2Active = function(packet) {\n  return ((packet.ccData & 0x7800) === 0x1800);\n};\n\n// ----------------------\n// Session to Application\n// ----------------------\n\nvar CHARACTER_TRANSLATION = {\n  0x2a: 0xe1,     // á\n  0x5c: 0xe9,     // é\n  0x5e: 0xed,     // í\n  0x5f: 0xf3,     // ó\n  0x60: 0xfa,     // ú\n  0x7b: 0xe7,     // ç\n  0x7c: 0xf7,     // ÷\n  0x7d: 0xd1,     // Ñ\n  0x7e: 0xf1,     // ñ\n  0x7f: 0x2588,   // █\n  0x0130: 0xae,   // ®\n  0x0131: 0xb0,   // °\n  0x0132: 0xbd,   // ½\n  0x0133: 0xbf,   // ¿\n  0x0134: 0x2122, // ™\n  0x0135: 0xa2,   // ¢\n  0x0136: 0xa3,   // £\n  0x0137: 0x266a, // ♪\n  0x0138: 0xe0,   // à\n  0x0139: 0xa0,   //\n  0x013a: 0xe8,   // è\n  0x013b: 0xe2,   // â\n  0x013c: 0xea,   // ê\n  0x013d: 0xee,   // î\n  0x013e: 0xf4,   // ô\n  0x013f: 0xfb,   // û\n  0x0220: 0xc1,   // Á\n  0x0221: 0xc9,   // É\n  0x0222: 0xd3,   // Ó\n  0x0223: 0xda,   // Ú\n  0x0224: 0xdc,   // Ü\n  0x0225: 0xfc,   // ü\n  0x0226: 0x2018, // ‘\n  0x0227: 0xa1,   // ¡\n  0x0228: 0x2a,   // *\n  0x0229: 0x27,   // '\n  0x022a: 0x2014, // —\n  0x022b: 0xa9,   // ©\n  0x022c: 0x2120, // ℠\n  0x022d: 0x2022, // •\n  0x022e: 0x201c, // “\n  0x022f: 0x201d, // ”\n  0x0230: 0xc0,   // À\n  0x0231: 0xc2,   // Â\n  0x0232: 0xc7,   // Ç\n  0x0233: 0xc8,   // È\n  0x0234: 0xca,   // Ê\n  0x0235: 0xcb,   // Ë\n  0x0236: 0xeb,   // ë\n  0x0237: 0xce,   // Î\n  0x0238: 0xcf,   // Ï\n  0x0239: 0xef,   // ï\n  0x023a: 0xd4,   // Ô\n  0x023b: 0xd9,   // Ù\n  0x023c: 0xf9,   // ù\n  0x023d: 0xdb,   // Û\n  0x023e: 0xab,   // «\n  0x023f: 0xbb,   // »\n  0x0320: 0xc3,   // Ã\n  0x0321: 0xe3,   // ã\n  0x0322: 0xcd,   // Í\n  0x0323: 0xcc,   // Ì\n  0x0324: 0xec,   // ì\n  0x0325: 0xd2,   // Ò\n  0x0326: 0xf2,   // ò\n  0x0327: 0xd5,   // Õ\n  0x0328: 0xf5,   // õ\n  0x0329: 0x7b,   // {\n  0x032a: 0x7d,   // }\n  0x032b: 0x5c,   // \\\n  0x032c: 0x5e,   // ^\n  0x032d: 0x5f,   // _\n  0x032e: 0x7c,   // |\n  0x032f: 0x7e,   // ~\n  0x0330: 0xc4,   // Ä\n  0x0331: 0xe4,   // ä\n  0x0332: 0xd6,   // Ö\n  0x0333: 0xf6,   // ö\n  0x0334: 0xdf,   // ß\n  0x0335: 0xa5,   // ¥\n  0x0336: 0xa4,   // ¤\n  0x0337: 0x2502, // │\n  0x0338: 0xc5,   // Å\n  0x0339: 0xe5,   // å\n  0x033a: 0xd8,   // Ø\n  0x033b: 0xf8,   // ø\n  0x033c: 0x250c, // ┌\n  0x033d: 0x2510, // ┐\n  0x033e: 0x2514, // └\n  0x033f: 0x2518  // ┘\n};\n\nvar getCharFromCode = function(code) {\n  if (code === null) {\n    return '';\n  }\n  code = CHARACTER_TRANSLATION[code] || code;\n  return String.fromCharCode(code);\n};\n\n// the index of the last row in a CEA-608 display buffer\nvar BOTTOM_ROW = 14;\n\n// This array is used for mapping PACs -> row #, since there's no way of\n// getting it through bit logic.\nvar ROWS = [0x1100, 0x1120, 0x1200, 0x1220, 0x1500, 0x1520, 0x1600, 0x1620,\n            0x1700, 0x1720, 0x1000, 0x1300, 0x1320, 0x1400, 0x1420];\n\n// CEA-608 captions are rendered onto a 34x15 matrix of character\n// cells. The \"bottom\" row is the last element in the outer array.\nvar createDisplayBuffer = function() {\n  var result = [], i = BOTTOM_ROW + 1;\n  while (i--) {\n    result.push('');\n  }\n  return result;\n};\n\nvar Cea608Stream = function(field, dataChannel) {\n  Cea608Stream.prototype.init.call(this);\n\n  this.field_ = field || 0;\n  this.dataChannel_ = dataChannel || 0;\n\n  this.name_ = 'CC' + (((this.field_ << 1) | this.dataChannel_) + 1);\n\n  this.setConstants();\n  this.reset();\n\n  this.push = function(packet) {\n    var data, swap, char0, char1, text;\n    // remove the parity bits\n    data = packet.ccData & 0x7f7f;\n\n    // ignore duplicate control codes; the spec demands they're sent twice\n    if (data === this.lastControlCode_) {\n      this.lastControlCode_ = null;\n      return;\n    }\n\n    // Store control codes\n    if ((data & 0xf000) === 0x1000) {\n      this.lastControlCode_ = data;\n    } else if (data !== this.PADDING_) {\n      this.lastControlCode_ = null;\n    }\n\n    char0 = data >>> 8;\n    char1 = data & 0xff;\n\n    if (data === this.PADDING_) {\n      return;\n\n    } else if (data === this.RESUME_CAPTION_LOADING_) {\n      this.mode_ = 'popOn';\n\n    } else if (data === this.END_OF_CAPTION_) {\n      this.clearFormatting(packet.pts);\n      // if a caption was being displayed, it's gone now\n      this.flushDisplayed(packet.pts);\n\n      // flip memory\n      swap = this.displayed_;\n      this.displayed_ = this.nonDisplayed_;\n      this.nonDisplayed_ = swap;\n\n      // start measuring the time to display the caption\n      this.startPts_ = packet.pts;\n\n    } else if (data === this.ROLL_UP_2_ROWS_) {\n      this.topRow_ = BOTTOM_ROW - 1;\n      this.mode_ = 'rollUp';\n    } else if (data === this.ROLL_UP_3_ROWS_) {\n      this.topRow_ = BOTTOM_ROW - 2;\n      this.mode_ = 'rollUp';\n    } else if (data === this.ROLL_UP_4_ROWS_) {\n      this.topRow_ = BOTTOM_ROW - 3;\n      this.mode_ = 'rollUp';\n    } else if (data === this.CARRIAGE_RETURN_) {\n      this.clearFormatting(packet.pts);\n      this.flushDisplayed(packet.pts);\n      this.shiftRowsUp_();\n      this.startPts_ = packet.pts;\n\n    } else if (data === this.BACKSPACE_) {\n      if (this.mode_ === 'popOn') {\n        this.nonDisplayed_[BOTTOM_ROW] = this.nonDisplayed_[BOTTOM_ROW].slice(0, -1);\n      } else {\n        this.displayed_[BOTTOM_ROW] = this.displayed_[BOTTOM_ROW].slice(0, -1);\n      }\n    } else if (data === this.ERASE_DISPLAYED_MEMORY_) {\n      this.flushDisplayed(packet.pts);\n      this.displayed_ = createDisplayBuffer();\n    } else if (data === this.ERASE_NON_DISPLAYED_MEMORY_) {\n      this.nonDisplayed_ = createDisplayBuffer();\n\n    } else if (data === this.RESUME_DIRECT_CAPTIONING_) {\n      this.mode_ = 'paintOn';\n\n    // Append special characters to caption text\n    } else if (this.isSpecialCharacter(char0, char1)) {\n      // Bitmask char0 so that we can apply character transformations\n      // regardless of field and data channel.\n      // Then byte-shift to the left and OR with char1 so we can pass the\n      // entire character code to `getCharFromCode`.\n      char0 = (char0 & 0x03) << 8;\n      text = getCharFromCode(char0 | char1);\n      this[this.mode_](packet.pts, text);\n      this.column_++;\n\n    // Append extended characters to caption text\n    } else if (this.isExtCharacter(char0, char1)) {\n      // Extended characters always follow their \"non-extended\" equivalents.\n      // IE if a \"è\" is desired, you'll always receive \"eè\"; non-compliant\n      // decoders are supposed to drop the \"è\", while compliant decoders\n      // backspace the \"e\" and insert \"è\".\n\n      // Delete the previous character\n      if (this.mode_ === 'popOn') {\n        this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1);\n      } else {\n        this.displayed_[BOTTOM_ROW] = this.displayed_[BOTTOM_ROW].slice(0, -1);\n      }\n\n      // Bitmask char0 so that we can apply character transformations\n      // regardless of field and data channel.\n      // Then byte-shift to the left and OR with char1 so we can pass the\n      // entire character code to `getCharFromCode`.\n      char0 = (char0 & 0x03) << 8;\n      text = getCharFromCode(char0 | char1);\n      this[this.mode_](packet.pts, text);\n      this.column_++;\n\n    // Process mid-row codes\n    } else if (this.isMidRowCode(char0, char1)) {\n      // Attributes are not additive, so clear all formatting\n      this.clearFormatting(packet.pts);\n\n      // According to the standard, mid-row codes\n      // should be replaced with spaces, so add one now\n      this[this.mode_](packet.pts, ' ');\n      this.column_++;\n\n      if ((char1 & 0xe) === 0xe) {\n        this.addFormatting(packet.pts, ['i']);\n      }\n\n      if ((char1 & 0x1) === 0x1) {\n        this.addFormatting(packet.pts, ['u']);\n      }\n\n    // Detect offset control codes and adjust cursor\n    } else if (this.isOffsetControlCode(char0, char1)) {\n      // Cursor position is set by indent PAC (see below) in 4-column\n      // increments, with an additional offset code of 1-3 to reach any\n      // of the 32 columns specified by CEA-608. So all we need to do\n      // here is increment the column cursor by the given offset.\n      this.column_ += (char1 & 0x03);\n\n    // Detect PACs (Preamble Address Codes)\n    } else if (this.isPAC(char0, char1)) {\n\n      // There's no logic for PAC -> row mapping, so we have to just\n      // find the row code in an array and use its index :(\n      var row = ROWS.indexOf(data & 0x1f20);\n\n      if (row !== this.row_) {\n        // formatting is only persistent for current row\n        this.clearFormatting(packet.pts);\n        this.row_ = row;\n      }\n      // All PACs can apply underline, so detect and apply\n      // (All odd-numbered second bytes set underline)\n      if ((char1 & 0x1) && (this.formatting_.indexOf('u') === -1)) {\n          this.addFormatting(packet.pts, ['u']);\n      }\n\n      if ((data & 0x10) === 0x10) {\n        // We've got an indent level code. Each successive even number\n        // increments the column cursor by 4, so we can get the desired\n        // column position by bit-shifting to the right (to get n/2)\n        // and multiplying by 4.\n        this.column_ = ((data & 0xe) >> 1) * 4;\n      }\n\n      if (this.isColorPAC(char1)) {\n        // it's a color code, though we only support white, which\n        // can be either normal or italicized. white italics can be\n        // either 0x4e or 0x6e depending on the row, so we just\n        // bitwise-and with 0xe to see if italics should be turned on\n        if ((char1 & 0xe) === 0xe) {\n          this.addFormatting(packet.pts, ['i']);\n        }\n      }\n\n    // We have a normal character in char0, and possibly one in char1\n    } else if (this.isNormalChar(char0)) {\n      if (char1 === 0x00) {\n        char1 = null;\n      }\n      text = getCharFromCode(char0);\n      text += getCharFromCode(char1);\n      this[this.mode_](packet.pts, text);\n      this.column_ += text.length;\n\n    } // finish data processing\n\n  };\n};\nCea608Stream.prototype = new Stream();\n// Trigger a cue point that captures the current state of the\n// display buffer\nCea608Stream.prototype.flushDisplayed = function(pts) {\n  var content = this.displayed_\n    // remove spaces from the start and end of the string\n    .map(function(row) {\n      return row.trim();\n    })\n    // combine all text rows to display in one cue\n    .join('\\n')\n    // and remove blank rows from the start and end, but not the middle\n    .replace(/^\\n+|\\n+$/g, '');\n\n  if (content.length) {\n    this.trigger('data', {\n      startPts: this.startPts_,\n      endPts: pts,\n      text: content,\n      stream: this.name_\n    });\n  }\n};\n\n/**\n * Zero out the data, used for startup and on seek\n */\nCea608Stream.prototype.reset = function() {\n  this.mode_ = 'popOn';\n  // When in roll-up mode, the index of the last row that will\n  // actually display captions. If a caption is shifted to a row\n  // with a lower index than this, it is cleared from the display\n  // buffer\n  this.topRow_ = 0;\n  this.startPts_ = 0;\n  this.displayed_ = createDisplayBuffer();\n  this.nonDisplayed_ = createDisplayBuffer();\n  this.lastControlCode_ = null;\n\n  // Track row and column for proper line-breaking and spacing\n  this.column_ = 0;\n  this.row_ = BOTTOM_ROW;\n\n  // This variable holds currently-applied formatting\n  this.formatting_ = [];\n};\n\n/**\n * Sets up control code and related constants for this instance\n */\nCea608Stream.prototype.setConstants = function() {\n  // The following attributes have these uses:\n  // ext_ :    char0 for mid-row codes, and the base for extended\n  //           chars (ext_+0, ext_+1, and ext_+2 are char0s for\n  //           extended codes)\n  // control_: char0 for control codes, except byte-shifted to the\n  //           left so that we can do this.control_ | CONTROL_CODE\n  // offset_:  char0 for tab offset codes\n  //\n  // It's also worth noting that control codes, and _only_ control codes,\n  // differ between field 1 and field2. Field 2 control codes are always\n  // their field 1 value plus 1. That's why there's the \"| field\" on the\n  // control value.\n  if (this.dataChannel_ === 0) {\n    this.BASE_     = 0x10;\n    this.EXT_      = 0x11;\n    this.CONTROL_  = (0x14 | this.field_) << 8;\n    this.OFFSET_   = 0x17;\n  } else if (this.dataChannel_ === 1) {\n    this.BASE_     = 0x18;\n    this.EXT_      = 0x19;\n    this.CONTROL_  = (0x1c | this.field_) << 8;\n    this.OFFSET_   = 0x1f;\n  }\n\n  // Constants for the LSByte command codes recognized by Cea608Stream. This\n  // list is not exhaustive. For a more comprehensive listing and semantics see\n  // http://www.gpo.gov/fdsys/pkg/CFR-2010-title47-vol1/pdf/CFR-2010-title47-vol1-sec15-119.pdf\n  // Padding\n  this.PADDING_                    = 0x0000;\n  // Pop-on Mode\n  this.RESUME_CAPTION_LOADING_     = this.CONTROL_ | 0x20;\n  this.END_OF_CAPTION_             = this.CONTROL_ | 0x2f;\n  // Roll-up Mode\n  this.ROLL_UP_2_ROWS_             = this.CONTROL_ | 0x25;\n  this.ROLL_UP_3_ROWS_             = this.CONTROL_ | 0x26;\n  this.ROLL_UP_4_ROWS_             = this.CONTROL_ | 0x27;\n  this.CARRIAGE_RETURN_            = this.CONTROL_ | 0x2d;\n  // paint-on mode (not supported)\n  this.RESUME_DIRECT_CAPTIONING_   = this.CONTROL_ | 0x29;\n  // Erasure\n  this.BACKSPACE_                  = this.CONTROL_ | 0x21;\n  this.ERASE_DISPLAYED_MEMORY_     = this.CONTROL_ | 0x2c;\n  this.ERASE_NON_DISPLAYED_MEMORY_ = this.CONTROL_ | 0x2e;\n};\n\n/**\n * Detects if the 2-byte packet data is a special character\n *\n * Special characters have a second byte in the range 0x30 to 0x3f,\n * with the first byte being 0x11 (for data channel 1) or 0x19 (for\n * data channel 2).\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are an special character\n */\nCea608Stream.prototype.isSpecialCharacter = function(char0, char1) {\n  return (char0 === this.EXT_ && char1 >= 0x30 && char1 <= 0x3f);\n};\n\n/**\n * Detects if the 2-byte packet data is an extended character\n *\n * Extended characters have a second byte in the range 0x20 to 0x3f,\n * with the first byte being 0x12 or 0x13 (for data channel 1) or\n * 0x1a or 0x1b (for data channel 2).\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are an extended character\n */\nCea608Stream.prototype.isExtCharacter = function(char0, char1) {\n  return ((char0 === (this.EXT_ + 1) || char0 === (this.EXT_ + 2)) &&\n    (char1 >= 0x20 && char1 <= 0x3f));\n};\n\n/**\n * Detects if the 2-byte packet is a mid-row code\n *\n * Mid-row codes have a second byte in the range 0x20 to 0x2f, with\n * the first byte being 0x11 (for data channel 1) or 0x19 (for data\n * channel 2).\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are a mid-row code\n */\nCea608Stream.prototype.isMidRowCode = function(char0, char1) {\n  return (char0 === this.EXT_ && (char1 >= 0x20 && char1 <= 0x2f));\n};\n\n/**\n * Detects if the 2-byte packet is an offset control code\n *\n * Offset control codes have a second byte in the range 0x21 to 0x23,\n * with the first byte being 0x17 (for data channel 1) or 0x1f (for\n * data channel 2).\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are an offset control code\n */\nCea608Stream.prototype.isOffsetControlCode = function(char0, char1) {\n  return (char0 === this.OFFSET_ && (char1 >= 0x21 && char1 <= 0x23));\n};\n\n/**\n * Detects if the 2-byte packet is a Preamble Address Code\n *\n * PACs have a first byte in the range 0x10 to 0x17 (for data channel 1)\n * or 0x18 to 0x1f (for data channel 2), with the second byte in the\n * range 0x40 to 0x7f.\n *\n * @param  {Integer} char0 The first byte\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the 2 bytes are a PAC\n */\nCea608Stream.prototype.isPAC = function(char0, char1) {\n  return (char0 >= this.BASE_ && char0 < (this.BASE_ + 8) &&\n    (char1 >= 0x40 && char1 <= 0x7f));\n};\n\n/**\n * Detects if a packet's second byte is in the range of a PAC color code\n *\n * PAC color codes have the second byte be in the range 0x40 to 0x4f, or\n * 0x60 to 0x6f.\n *\n * @param  {Integer} char1 The second byte\n * @return {Boolean}       Whether the byte is a color PAC\n */\nCea608Stream.prototype.isColorPAC = function(char1) {\n  return ((char1 >= 0x40 && char1 <= 0x4f) || (char1 >= 0x60 && char1 <= 0x7f));\n};\n\n/**\n * Detects if a single byte is in the range of a normal character\n *\n * Normal text bytes are in the range 0x20 to 0x7f.\n *\n * @param  {Integer} char  The byte\n * @return {Boolean}       Whether the byte is a normal character\n */\nCea608Stream.prototype.isNormalChar = function(char) {\n  return (char >= 0x20 && char <= 0x7f);\n};\n\n// Adds the opening HTML tag for the passed character to the caption text,\n// and keeps track of it for later closing\nCea608Stream.prototype.addFormatting = function(pts, format) {\n  this.formatting_ = this.formatting_.concat(format);\n  var text = format.reduce(function(text, format) {\n    return text + '<' + format + '>';\n  }, '');\n  this[this.mode_](pts, text);\n};\n\n// Adds HTML closing tags for current formatting to caption text and\n// clears remembered formatting\nCea608Stream.prototype.clearFormatting = function(pts) {\n  if (!this.formatting_.length) {\n    return;\n  }\n  var text = this.formatting_.reverse().reduce(function(text, format) {\n    return text + '</' + format + '>';\n  }, '');\n  this.formatting_ = [];\n  this[this.mode_](pts, text);\n};\n\n// Mode Implementations\nCea608Stream.prototype.popOn = function(pts, text) {\n  var baseRow = this.nonDisplayed_[this.row_];\n\n  // buffer characters\n  baseRow += text;\n  this.nonDisplayed_[this.row_] = baseRow;\n};\n\nCea608Stream.prototype.rollUp = function(pts, text) {\n  var baseRow = this.displayed_[BOTTOM_ROW];\n\n  baseRow += text;\n  this.displayed_[BOTTOM_ROW] = baseRow;\n\n};\n\nCea608Stream.prototype.shiftRowsUp_ = function() {\n  var i;\n  // clear out inactive rows\n  for (i = 0; i < this.topRow_; i++) {\n    this.displayed_[i] = '';\n  }\n  // shift displayed rows up\n  for (i = this.topRow_; i < BOTTOM_ROW; i++) {\n    this.displayed_[i] = this.displayed_[i + 1];\n  }\n  // clear out the bottom row\n  this.displayed_[BOTTOM_ROW] = '';\n};\n\n// paintOn mode is not implemented\nCea608Stream.prototype.paintOn = function() {};\n\n// exports\nmodule.exports = {\n  CaptionStream: CaptionStream,\n  Cea608Stream: Cea608Stream\n};\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar scrollSetting = {\n  \"\": true,\n  \"up\": true\n};\n\nfunction findScrollSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var scroll = scrollSetting[value.toLowerCase()];\n  return scroll ? value.toLowerCase() : false;\n}\n\nfunction isValidPercentValue(value) {\n  return typeof value === \"number\" && (value >= 0 && value <= 100);\n}\n\n// VTTRegion shim http://dev.w3.org/html5/webvtt/#vttregion-interface\nfunction VTTRegion() {\n  var _width = 100;\n  var _lines = 3;\n  var _regionAnchorX = 0;\n  var _regionAnchorY = 100;\n  var _viewportAnchorX = 0;\n  var _viewportAnchorY = 100;\n  var _scroll = \"\";\n\n  Object.defineProperties(this, {\n    \"width\": {\n      enumerable: true,\n      get: function() {\n        return _width;\n      },\n      set: function(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"Width must be between 0 and 100.\");\n        }\n        _width = value;\n      }\n    },\n    \"lines\": {\n      enumerable: true,\n      get: function() {\n        return _lines;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Lines must be set to a number.\");\n        }\n        _lines = value;\n      }\n    },\n    \"regionAnchorY\": {\n      enumerable: true,\n      get: function() {\n        return _regionAnchorY;\n      },\n      set: function(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorX must be between 0 and 100.\");\n        }\n        _regionAnchorY = value;\n      }\n    },\n    \"regionAnchorX\": {\n      enumerable: true,\n      get: function() {\n        return _regionAnchorX;\n      },\n      set: function(value) {\n        if(!isValidPercentValue(value)) {\n          throw new Error(\"RegionAnchorY must be between 0 and 100.\");\n        }\n        _regionAnchorX = value;\n      }\n    },\n    \"viewportAnchorY\": {\n      enumerable: true,\n      get: function() {\n        return _viewportAnchorY;\n      },\n      set: function(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorY must be between 0 and 100.\");\n        }\n        _viewportAnchorY = value;\n      }\n    },\n    \"viewportAnchorX\": {\n      enumerable: true,\n      get: function() {\n        return _viewportAnchorX;\n      },\n      set: function(value) {\n        if (!isValidPercentValue(value)) {\n          throw new Error(\"ViewportAnchorX must be between 0 and 100.\");\n        }\n        _viewportAnchorX = value;\n      }\n    },\n    \"scroll\": {\n      enumerable: true,\n      get: function() {\n        return _scroll;\n      },\n      set: function(value) {\n        var setting = findScrollSetting(value);\n        // Have to check for false as an empty string is a legal value.\n        if (setting === false) {\n          throw new SyntaxError(\"An invalid or illegal string was specified.\");\n        }\n        _scroll = setting;\n      }\n    }\n  });\n}\n\nmodule.exports = VTTRegion;\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0OEU4OEYxMjA4REExMUU5QjRGREQ1OUYzRjlCOTdBNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0OEU4OEYxMzA4REExMUU5QjRGREQ1OUYzRjlCOTdBNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ4RTg4RjEwMDhEQTExRTlCNEZERDU5RjNGOUI5N0E3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ4RTg4RjExMDhEQTExRTlCNEZERDU5RjNGOUI5N0E3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+depLfgAACKFJREFUeNrsWXlsFNcZ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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NzEwOUFDMjA4REExMUU5QjQ2M0UzN0E1NjZDRjdFQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NzEwOUFDMzA4REExMUU5QjQ2M0UzN0E1NjZDRjdFQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ3MTA5QUMwMDhEQTExRTlCNDYzRTM3QTU2NkNGN0VBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ3MTA5QUMxMDhEQTExRTlCNDYzRTM3QTU2NkNGN0VBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+mCep5gAABNtJREFUeNrsWEtsG0UY3n9mdtde54WblCaEpGlCFQgtqEJQpCIOSERQ8TpSARLigiqBUA8gUJVTgAviRrn0zg0VJF698TiA4NAeClShopRHE0ghdhyvvTsPvnEeuMaxN4n7iJSJ/sx699+Z//vfs2SMcTbzYM4mH1sAtgBscFArFnl76lwfpsdBd4PstQv6B3QGdBL01ZFbhs11BwCC2/efXiJBBuQYa1VcOtohkpjNEpDXAeLi9QbgZUh60NOqx1WqG6uJGhYjieUizqc10e/4/WKrQdAGhH+YGXM0LeUQtO434rXWiLi4EDP2DX4ebqU7iXUKL+Anz6fjeJfLmd8XZESH5zKrD6m1OZfPxzHmKi0xX8lBQ0LBIvfh1hfXFADGnZ6Uo0SOZ014oVCIk1jbj2W/8rwHrjkAz6Hd3Oisva7WdFME5PhC64Ow4G78tDHxNegjuFR4VetAO3N20hreFYxRWnDyOEipvpSUd7laPYgYegmP3wOg/VcZAC+vhV+jY7R2usHz+J5sV2dfyr/RV6o/kPEoYmMULG8CxD1XLAth8U5MD4GspnZxbXakVTyyXq1Za4RSrbieIsqHwj2Fy0Nwp2JLYwDCW8FfgO/uAHVyYwIyRljoKb7oFjb9RIiFopQ6yabVwtuBNTvgWiOoFzZDfdYyABD+CWj7lZSSA8j1qeX7PUGK96TSYkHGuhBLvYCkWVJqQ7ndFkIAGK7a28NkLR+B8qvVDmogfDc0cyIFP60O2G2pFLcvzZZKKolgGVew3nQgJOJgJizKWu1fZhnXO45Ff+WOOYDqN4ASyIxDClXcutWPoC9BnwBMPgmAR9IyPgYQmY1ottPzmC1rSU5+KHKzXOsOW19qSrlWjAox45ckY7YVOQYQHzfMQqhQ3WgpMwyrVVOzv9qRiyKd9NgqjO4WjLzt6bS4KZOpkI8Yw7LMxglceQjVfw/6r1eh4GdXLGBbA0zjoAO4GGWOaa9kC633/b+xaS6MScTT5LljGjyjclGIKUN0RED4XpjhLd8x+1zjZBkZd+Vd+k+jHopRl+9xZvVMix1aPor1Qp3MY583EqDC0xQkNVKEn0JWDDl/0mr+aBs593OHgkV7UN3NY6z2Z6ksq/XgAtRqTlhxJ9O4r1huVRuxrKYI15gs+o8xwdGYucSCy0xEpmnVs9rBaQVWZOtygypTNLFDfUXQ4sZcQItTxOjWauekBAXaJOGhFsVLfUXYmz8J/J9wOd+PRLe9co8SdBcWJCXguYKKiIyTwx7vV94+OT3ThuCcLGk1viBVVqOACCJVUtqrhZxsJORMkl7r8CAvy6JDxw8PD71GdUy6DdSFk1X84cWZd0Ot722JIC1ShDKmDKu9MyflGyhmmpp9dbi9vX1iXslDodI9tc8DzktZz/1uNor2wlod6/HvqqSZHwyC0/NS7v27HHWYmi4BRbTgc/Z5TsrJ53YOnl3zof773PxoTsZ3wPezwmGq0xVnR9oy3yIbFM8XFrp+CcPJv8rlR0vatK3tQGIKGeGeyMXxxDODN88BdDAXxWO/lcLbQqkDBWChUmdO5fKn6zV0LfmwtTymw9D9uVh6LC+j8bLWY7BKL+pHBoYQSyZRyHoF0B8uox8QZ59eiuIPnhroj9e7J219Xt8CsAVgc49/BRgAT2RUQv4xZR8AAAAASUVORK5CYII=\"","/**\n * @file flash-constants.js\n */\n/**\n * The maximum size in bytes for append operations to the video.js\n * SWF. Calling through to Flash blocks and can be expensive so\n * we chunk data and pass through 4KB at a time, yielding to the\n * browser between chunks. This gives a theoretical maximum rate of\n * 1MB/s into Flash. Any higher and we begin to drop frames and UI\n * responsiveness suffers.\n *\n * @private\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar flashConstants = {\n  // times in milliseconds\n  TIME_BETWEEN_CHUNKS: 1,\n  BYTES_PER_CHUNK: 1024 * 32\n};\n\nexports[\"default\"] = flashConstants;\nmodule.exports = exports[\"default\"];","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAyCAYAAAAus5mQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGQjkwQTAwMzlEQkMxMUVCOEJEQkQ0MkZBN0VGNkU0OSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGQjkwQTAwNDlEQkMxMUVCOEJEQkQ0MkZBN0VGNkU0OSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZCOTBBMDAxOURCQzExRUI4QkRCRDQyRkE3RUY2RTQ5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZCOTBBMDAyOURCQzExRUI4QkRCRDQyRkE3RUY2RTQ5Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+hGEg6wAAB6lJREFUeNq8WXtQlFUU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\"","var trim = function(string) {\n  return string.replace(/^\\s+|\\s+$/g, '');\n}\n  , isArray = function(arg) {\n      return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n\nmodule.exports = function (headers) {\n  if (!headers)\n    return {}\n\n  var result = {}\n\n  var headersArr = trim(headers).split('\\n')\n\n  for (var i = 0; i < headersArr.length; i++) {\n    var row = headersArr[i]\n    var index = row.indexOf(':')\n    , key = trim(row.slice(0, index)).toLowerCase()\n    , value = trim(row.slice(index + 1))\n\n    if (typeof(result[key]) === 'undefined') {\n      result[key] = value\n    } else if (isArray(result[key])) {\n      result[key].push(value)\n    } else {\n      result[key] = [ result[key], value ]\n    }\n  }\n\n  return result\n}\n","/**\n * @file resolve-url.js\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _urlToolkit = require('url-toolkit');\n\nvar _urlToolkit2 = _interopRequireDefault(_urlToolkit);\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar resolveUrl = function resolveUrl(baseURL, relativeURL) {\n  // return early if we don't need to resolve\n  if (/^[a-z]+:/i.test(relativeURL)) {\n    return relativeURL;\n  }\n\n  // if the base URL is relative then combine with the current location\n  if (!/\\/\\//i.test(baseURL)) {\n    baseURL = _urlToolkit2['default'].buildAbsoluteURL(_globalWindow2['default'].location.href, baseURL);\n  }\n\n  return _urlToolkit2['default'].buildAbsoluteURL(baseURL, relativeURL);\n};\n\nexports['default'] = resolveUrl;\nmodule.exports = exports['default'];","var highPrefix = [33, 16, 5, 32, 164, 27];\nvar lowPrefix = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252];\nvar zeroFill = function(count) {\n  var a = [];\n  while (count--) {\n    a.push(0);\n  }\n  return a;\n};\n\nvar makeTable = function(metaTable) {\n  return Object.keys(metaTable).reduce(function(obj, key) {\n    obj[key] = new Uint8Array(metaTable[key].reduce(function(arr, part) {\n      return arr.concat(part);\n    }, []));\n    return obj;\n  }, {});\n};\n\n// Frames-of-silence to use for filling in missing AAC frames\nvar coneOfSilence = {\n  96000: [highPrefix, [227, 64], zeroFill(154), [56]],\n  88200: [highPrefix, [231], zeroFill(170), [56]],\n  64000: [highPrefix, [248, 192], zeroFill(240), [56]],\n  48000: [highPrefix, [255, 192], zeroFill(268), [55, 148, 128], zeroFill(54), [112]],\n  44100: [highPrefix, [255, 192], zeroFill(268), [55, 163, 128], zeroFill(84), [112]],\n  32000: [highPrefix, [255, 192], zeroFill(268), [55, 234], zeroFill(226), [112]],\n  24000: [highPrefix, [255, 192], zeroFill(268), [55, 255, 128], zeroFill(268), [111, 112], zeroFill(126), [224]],\n  16000: [highPrefix, [255, 192], zeroFill(268), [55, 255, 128], zeroFill(268), [111, 255], zeroFill(269), [223, 108], zeroFill(195), [1, 192]],\n  12000: [lowPrefix, zeroFill(268), [3, 127, 248], zeroFill(268), [6, 255, 240], zeroFill(268), [13, 255, 224], zeroFill(268), [27, 253, 128], zeroFill(259), [56]],\n  11025: [lowPrefix, zeroFill(268), [3, 127, 248], zeroFill(268), [6, 255, 240], zeroFill(268), [13, 255, 224], zeroFill(268), [27, 255, 192], zeroFill(268), [55, 175, 128], zeroFill(108), [112]],\n  8000: [lowPrefix, zeroFill(268), [3, 121, 16], zeroFill(47), [7]]\n};\n\nmodule.exports = makeTable(coneOfSilence);\n","var\n  ONE_SECOND_IN_TS = 90000, // 90kHz clock\n  secondsToVideoTs,\n  secondsToAudioTs,\n  videoTsToSeconds,\n  audioTsToSeconds,\n  audioTsToVideoTs,\n  videoTsToAudioTs;\n\nsecondsToVideoTs = function(seconds) {\n  return seconds * ONE_SECOND_IN_TS;\n};\n\nsecondsToAudioTs = function(seconds, sampleRate) {\n  return seconds * sampleRate;\n};\n\nvideoTsToSeconds = function(timestamp) {\n  return timestamp / ONE_SECOND_IN_TS;\n};\n\naudioTsToSeconds = function(timestamp, sampleRate) {\n  return timestamp / sampleRate;\n};\n\naudioTsToVideoTs = function(timestamp, sampleRate) {\n  return secondsToVideoTs(audioTsToSeconds(timestamp, sampleRate));\n};\n\nvideoTsToAudioTs = function(timestamp, sampleRate) {\n  return secondsToAudioTs(videoTsToSeconds(timestamp), sampleRate);\n};\n\nmodule.exports = {\n  secondsToVideoTs: secondsToVideoTs,\n  secondsToAudioTs: secondsToAudioTs,\n  videoTsToSeconds: videoTsToSeconds,\n  audioTsToSeconds: audioTsToSeconds,\n  audioTsToVideoTs: audioTsToVideoTs,\n  videoTsToAudioTs: videoTsToAudioTs\n};\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NzEwOUFDMjA4REExMUU5QjQ2M0UzN0E1NjZDRjdFQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NzEwOUFDMzA4REExMUU5QjQ2M0UzN0E1NjZDRjdFQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ3MTA5QUMwMDhEQTExRTlCNDYzRTM3QTU2NkNGN0VBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ3MTA5QUMxMDhEQTExRTlCNDYzRTM3QTU2NkNGN0VBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+mCep5gAABNtJREFUeNrsWEtsG0UY3n9mdtde54WblCaEpGlCFQgtqEJQpCIOSERQ8TpSARLigiqBUA8gUJVTgAviRrn0zg0VJF698TiA4NAeClShopRHE0ghdhyvvTsPvnEeuMaxN4n7iJSJ/sx699+Z//vfs2SMcTbzYM4mH1sAtgBscFArFnl76lwfpsdBd4PstQv6B3QGdBL01ZFbhs11BwCC2/efXiJBBuQYa1VcOtohkpjNEpDXAeLi9QbgZUh60NOqx1WqG6uJGhYjieUizqc10e/4/WKrQdAGhH+YGXM0LeUQtO434rXWiLi4EDP2DX4ebqU7iXUKL+Anz6fjeJfLmd8XZESH5zKrD6m1OZfPxzHmKi0xX8lBQ0LBIvfh1hfXFADGnZ6Uo0SOZ014oVCIk1jbj2W/8rwHrjkAz6Hd3Oisva7WdFME5PhC64Ow4G78tDHxNegjuFR4VetAO3N20hreFYxRWnDyOEipvpSUd7laPYgYegmP3wOg/VcZAC+vhV+jY7R2usHz+J5sV2dfyr/RV6o/kPEoYmMULG8CxD1XLAth8U5MD4GspnZxbXakVTyyXq1Za4RSrbieIsqHwj2Fy0Nwp2JLYwDCW8FfgO/uAHVyYwIyRljoKb7oFjb9RIiFopQ6yabVwtuBNTvgWiOoFzZDfdYyABD+CWj7lZSSA8j1qeX7PUGK96TSYkHGuhBLvYCkWVJqQ7ndFkIAGK7a28NkLR+B8qvVDmogfDc0cyIFP60O2G2pFLcvzZZKKolgGVew3nQgJOJgJizKWu1fZhnXO45Ff+WOOYDqN4ASyIxDClXcutWPoC9BnwBMPgmAR9IyPgYQmY1ottPzmC1rSU5+KHKzXOsOW19qSrlWjAox45ckY7YVOQYQHzfMQqhQ3WgpMwyrVVOzv9qRiyKd9NgqjO4WjLzt6bS4KZOpkI8Yw7LMxglceQjVfw/6r1eh4GdXLGBbA0zjoAO4GGWOaa9kC633/b+xaS6MScTT5LljGjyjclGIKUN0RED4XpjhLd8x+1zjZBkZd+Vd+k+jHopRl+9xZvVMix1aPor1Qp3MY583EqDC0xQkNVKEn0JWDDl/0mr+aBs593OHgkV7UN3NY6z2Z6ksq/XgAtRqTlhxJ9O4r1huVRuxrKYI15gs+o8xwdGYucSCy0xEpmnVs9rBaQVWZOtygypTNLFDfUXQ4sZcQItTxOjWauekBAXaJOGhFsVLfUXYmz8J/J9wOd+PRLe9co8SdBcWJCXguYKKiIyTwx7vV94+OT3ThuCcLGk1viBVVqOACCJVUtqrhZxsJORMkl7r8CAvy6JDxw8PD71GdUy6DdSFk1X84cWZd0Ot722JIC1ShDKmDKu9MyflGyhmmpp9dbi9vX1iXslDodI9tc8DzktZz/1uNor2wlod6/HvqqSZHwyC0/NS7v27HHWYmi4BRbTgc/Z5TsrJ53YOnl3zof773PxoTsZ3wPezwmGq0xVnR9oy3yIbFM8XFrp+CcPJv8rlR0vatK3tQGIKGeGeyMXxxDODN88BdDAXxWO/lcLbQqkDBWChUmdO5fKn6zV0LfmwtTymw9D9uVh6LC+j8bLWY7BKL+pHBoYQSyZRyHoF0B8uox8QZ59eiuIPnhroj9e7J219Xt8CsAVgc49/BRgAT2RUQv4xZR8AAAAASUVORK5CYII=\"","'use strict';\n\nvar Stream = require('../utils/stream.js');\n\nvar AdtsStream;\n\nvar\n  ADTS_SAMPLING_FREQUENCIES = [\n    96000,\n    88200,\n    64000,\n    48000,\n    44100,\n    32000,\n    24000,\n    22050,\n    16000,\n    12000,\n    11025,\n    8000,\n    7350\n  ];\n\n/*\n * Accepts a ElementaryStream and emits data events with parsed\n * AAC Audio Frames of the individual packets. Input audio in ADTS\n * format is unpacked and re-emitted as AAC frames.\n *\n * @see http://wiki.multimedia.cx/index.php?title=ADTS\n * @see http://wiki.multimedia.cx/?title=Understanding_AAC\n */\nAdtsStream = function() {\n  var buffer;\n\n  AdtsStream.prototype.init.call(this);\n\n  this.push = function(packet) {\n    var\n      i = 0,\n      frameNum = 0,\n      frameLength,\n      protectionSkipBytes,\n      frameEnd,\n      oldBuffer,\n      sampleCount,\n      adtsFrameDuration;\n\n    if (packet.type !== 'audio') {\n      // ignore non-audio data\n      return;\n    }\n\n    // Prepend any data in the buffer to the input data so that we can parse\n    // aac frames the cross a PES packet boundary\n    if (buffer) {\n      oldBuffer = buffer;\n      buffer = new Uint8Array(oldBuffer.byteLength + packet.data.byteLength);\n      buffer.set(oldBuffer);\n      buffer.set(packet.data, oldBuffer.byteLength);\n    } else {\n      buffer = packet.data;\n    }\n\n    // unpack any ADTS frames which have been fully received\n    // for details on the ADTS header, see http://wiki.multimedia.cx/index.php?title=ADTS\n    while (i + 5 < buffer.length) {\n\n      // Loook for the start of an ADTS header..\n      if (buffer[i] !== 0xFF || (buffer[i + 1] & 0xF6) !== 0xF0) {\n        // If a valid header was not found,  jump one forward and attempt to\n        // find a valid ADTS header starting at the next byte\n        i++;\n        continue;\n      }\n\n      // The protection skip bit tells us if we have 2 bytes of CRC data at the\n      // end of the ADTS header\n      protectionSkipBytes = (~buffer[i + 1] & 0x01) * 2;\n\n      // Frame length is a 13 bit integer starting 16 bits from the\n      // end of the sync sequence\n      frameLength = ((buffer[i + 3] & 0x03) << 11) |\n        (buffer[i + 4] << 3) |\n        ((buffer[i + 5] & 0xe0) >> 5);\n\n      sampleCount = ((buffer[i + 6] & 0x03) + 1) * 1024;\n      adtsFrameDuration = (sampleCount * 90000) /\n        ADTS_SAMPLING_FREQUENCIES[(buffer[i + 2] & 0x3c) >>> 2];\n\n      frameEnd = i + frameLength;\n\n      // If we don't have enough data to actually finish this ADTS frame, return\n      // and wait for more data\n      if (buffer.byteLength < frameEnd) {\n        return;\n      }\n\n      // Otherwise, deliver the complete AAC frame\n      this.trigger('data', {\n        pts: packet.pts + (frameNum * adtsFrameDuration),\n        dts: packet.dts + (frameNum * adtsFrameDuration),\n        sampleCount: sampleCount,\n        audioobjecttype: ((buffer[i + 2] >>> 6) & 0x03) + 1,\n        channelcount: ((buffer[i + 2] & 1) << 2) |\n          ((buffer[i + 3] & 0xc0) >>> 6),\n        samplerate: ADTS_SAMPLING_FREQUENCIES[(buffer[i + 2] & 0x3c) >>> 2],\n        samplingfrequencyindex: (buffer[i + 2] & 0x3c) >>> 2,\n        // assume ISO/IEC 14496-12 AudioSampleEntry default of 16\n        samplesize: 16,\n        data: buffer.subarray(i + 7 + protectionSkipBytes, frameEnd)\n      });\n\n      // If the buffer is empty, clear it and return\n      if (buffer.byteLength === frameEnd) {\n        buffer = undefined;\n        return;\n      }\n\n      frameNum++;\n\n      // Remove the finished frame from the buffer and start the process again\n      buffer = buffer.subarray(frameEnd);\n    }\n  };\n  this.flush = function() {\n    this.trigger('done');\n  };\n};\n\nAdtsStream.prototype = new Stream();\n\nmodule.exports = AdtsStream;\n","/**\n * @file flash-media-source.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _globalDocument = require('global/document');\n\nvar _globalDocument2 = _interopRequireDefault(_globalDocument);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _flashSourceBuffer = require('./flash-source-buffer');\n\nvar _flashSourceBuffer2 = _interopRequireDefault(_flashSourceBuffer);\n\nvar _flashConstants = require('./flash-constants');\n\nvar _flashConstants2 = _interopRequireDefault(_flashConstants);\n\nvar _codecUtils = require('./codec-utils');\n\n/**\n * A flash implmentation of HTML MediaSources and a polyfill\n * for browsers that don't support native or HTML MediaSources..\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource\n * @class FlashMediaSource\n * @extends videojs.EventTarget\n */\n\nvar FlashMediaSource = (function (_videojs$EventTarget) {\n  _inherits(FlashMediaSource, _videojs$EventTarget);\n\n  function FlashMediaSource() {\n    var _this = this;\n\n    _classCallCheck(this, FlashMediaSource);\n\n    _get(Object.getPrototypeOf(FlashMediaSource.prototype), 'constructor', this).call(this);\n    this.sourceBuffers = [];\n    this.readyState = 'closed';\n\n    this.on(['sourceopen', 'webkitsourceopen'], function (event) {\n      // find the swf where we will push media data\n      _this.swfObj = _globalDocument2['default'].getElementById(event.swfId);\n      _this.player_ = (0, _videoJs2['default'])(_this.swfObj.parentNode);\n      _this.tech_ = _this.swfObj.tech;\n      _this.readyState = 'open';\n\n      _this.tech_.on('seeking', function () {\n        var i = _this.sourceBuffers.length;\n\n        while (i--) {\n          _this.sourceBuffers[i].abort();\n        }\n      });\n\n      // trigger load events\n      if (_this.swfObj) {\n        _this.swfObj.vjs_load();\n      }\n    });\n  }\n\n  /**\n    * Set or return the presentation duration.\n    *\n    * @param {Double} value the duration of the media in seconds\n    * @param {Double} the current presentation duration\n    * @link http://www.w3.org/TR/media-source/#widl-MediaSource-duration\n    */\n\n  /**\n   * We have this function so that the html and flash interfaces\n   * are the same.\n   *\n   * @private\n   */\n\n  _createClass(FlashMediaSource, [{\n    key: 'addSeekableRange_',\n    value: function addSeekableRange_() {}\n    // intentional no-op\n\n    /**\n     * Create a new flash source buffer and add it to our flash media source.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/addSourceBuffer\n     * @param {String} type the content-type of the source\n     * @return {Object} the flash source buffer\n     */\n\n  }, {\n    key: 'addSourceBuffer',\n    value: function addSourceBuffer(type) {\n      var parsedType = (0, _codecUtils.parseContentType)(type);\n      var sourceBuffer = undefined;\n\n      // if this is an FLV type, we'll push data to flash\n      if (parsedType.type === 'video/mp2t' || parsedType.type === 'audio/mp2t') {\n        // Flash source buffers\n        sourceBuffer = new _flashSourceBuffer2['default'](this);\n      } else {\n        throw new Error('NotSupportedError (Video.js)');\n      }\n\n      this.sourceBuffers.push(sourceBuffer);\n      return sourceBuffer;\n    }\n\n    /**\n     * Signals the end of the stream.\n     *\n     * @link https://w3c.github.io/media-source/#widl-MediaSource-endOfStream-void-EndOfStreamError-error\n     * @param {String=} error Signals that a playback error\n     * has occurred. If specified, it must be either \"network\" or\n     * \"decode\".\n     */\n  }, {\n    key: 'endOfStream',\n    value: function endOfStream(error) {\n      if (error === 'network') {\n        // MEDIA_ERR_NETWORK\n        this.tech_.error(2);\n      } else if (error === 'decode') {\n        // MEDIA_ERR_DECODE\n        this.tech_.error(3);\n      }\n      if (this.readyState !== 'ended') {\n        this.readyState = 'ended';\n        this.swfObj.vjs_endOfStream();\n      }\n    }\n  }]);\n\n  return FlashMediaSource;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = FlashMediaSource;\ntry {\n  Object.defineProperty(FlashMediaSource.prototype, 'duration', {\n    /**\n     * Return the presentation duration.\n     *\n     * @return {Double} the duration of the media in seconds\n     * @link http://www.w3.org/TR/media-source/#widl-MediaSource-duration\n     */\n    get: function get() {\n      if (!this.swfObj) {\n        return NaN;\n      }\n      // get the current duration from the SWF\n      return this.swfObj.vjs_getProperty('duration');\n    },\n    /**\n     * Set the presentation duration.\n     *\n     * @param {Double} value the duration of the media in seconds\n     * @return {Double} the duration of the media in seconds\n     * @link http://www.w3.org/TR/media-source/#widl-MediaSource-duration\n     */\n    set: function set(value) {\n      var i = undefined;\n      var oldDuration = this.swfObj.vjs_getProperty('duration');\n\n      this.swfObj.vjs_setProperty('duration', value);\n\n      if (value < oldDuration) {\n        // In MSE, this triggers the range removal algorithm which causes\n        // an update to occur\n        for (i = 0; i < this.sourceBuffers.length; i++) {\n          this.sourceBuffers[i].remove(value, oldDuration);\n        }\n      }\n\n      return value;\n    }\n  });\n} catch (e) {\n  // IE8 throws if defineProperty is called on a non-DOM node. We\n  // don't support IE8 but we shouldn't throw an error if loaded\n  // there.\n  FlashMediaSource.prototype.duration = NaN;\n}\n\nfor (var property in _flashConstants2['default']) {\n  FlashMediaSource[property] = _flashConstants2['default'][property];\n}\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _aesDecrypter = require('aes-decrypter');\n\nvar _binUtils = require('./bin-utils');\n\n/**\n * Our web worker interface so that things can talk to aes-decrypter\n * that will be running in a web worker. the scope is passed to this by\n * webworkify.\n *\n * @param {Object} self\n *        the scope for the web worker\n */\nvar DecrypterWorker = function DecrypterWorker(self) {\n  self.onmessage = function (event) {\n    var data = event.data;\n    var encrypted = new Uint8Array(data.encrypted.bytes, data.encrypted.byteOffset, data.encrypted.byteLength);\n    var key = new Uint32Array(data.key.bytes, data.key.byteOffset, data.key.byteLength / 4);\n    var iv = new Uint32Array(data.iv.bytes, data.iv.byteOffset, data.iv.byteLength / 4);\n\n    /* eslint-disable no-new, handle-callback-err */\n    new _aesDecrypter.Decrypter(encrypted, key, iv, function (err, bytes) {\n      _globalWindow2['default'].postMessage((0, _binUtils.createTransferableMessage)({\n        source: data.source,\n        decrypted: bytes\n      }), [bytes.buffer]);\n    });\n    /* eslint-enable */\n  };\n};\n\nexports['default'] = function (self) {\n  return new DecrypterWorker(self);\n};\n\nmodule.exports = exports['default'];","/**\n * @file bin-utils.js\n */\n\n/**\n * convert a TimeRange to text\n *\n * @param {TimeRange} range the timerange to use for conversion\n * @param {Number} i the iterator on the range to convert\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar textRange = function textRange(range, i) {\n  return range.start(i) + '-' + range.end(i);\n};\n\n/**\n * format a number as hex string\n *\n * @param {Number} e The number\n * @param {Number} i the iterator\n */\nvar formatHexString = function formatHexString(e, i) {\n  var value = e.toString(16);\n\n  return '00'.substring(0, 2 - value.length) + value + (i % 2 ? ' ' : '');\n};\nvar formatAsciiString = function formatAsciiString(e) {\n  if (e >= 0x20 && e < 0x7e) {\n    return String.fromCharCode(e);\n  }\n  return '.';\n};\n\n/**\n * Creates an object for sending to a web worker modifying properties that are TypedArrays\n * into a new object with seperated properties for the buffer, byteOffset, and byteLength.\n *\n * @param {Object} message\n *        Object of properties and values to send to the web worker\n * @return {Object}\n *         Modified message with TypedArray values expanded\n * @function createTransferableMessage\n */\nvar createTransferableMessage = function createTransferableMessage(message) {\n  var transferable = {};\n\n  Object.keys(message).forEach(function (key) {\n    var value = message[key];\n\n    if (ArrayBuffer.isView(value)) {\n      transferable[key] = {\n        bytes: value.buffer,\n        byteOffset: value.byteOffset,\n        byteLength: value.byteLength\n      };\n    } else {\n      transferable[key] = value;\n    }\n  });\n\n  return transferable;\n};\n\n/**\n * Returns a unique string identifier for a media initialization\n * segment.\n */\nvar initSegmentId = function initSegmentId(initSegment) {\n  var byterange = initSegment.byterange || {\n    length: Infinity,\n    offset: 0\n  };\n\n  return [byterange.length, byterange.offset, initSegment.resolvedUri].join(',');\n};\n\n/**\n * utils to help dump binary data to the console\n */\nvar utils = {\n  hexDump: function hexDump(data) {\n    var bytes = Array.prototype.slice.call(data);\n    var step = 16;\n    var result = '';\n    var hex = undefined;\n    var ascii = undefined;\n\n    for (var j = 0; j < bytes.length / step; j++) {\n      hex = bytes.slice(j * step, j * step + step).map(formatHexString).join('');\n      ascii = bytes.slice(j * step, j * step + step).map(formatAsciiString).join('');\n      result += hex + ' ' + ascii + '\\n';\n    }\n    return result;\n  },\n  tagDump: function tagDump(tag) {\n    return utils.hexDump(tag.bytes);\n  },\n  textRanges: function textRanges(ranges) {\n    var result = '';\n    var i = undefined;\n\n    for (i = 0; i < ranges.length; i++) {\n      result += textRange(ranges, i) + ' ';\n    }\n    return result;\n  },\n  createTransferableMessage: createTransferableMessage,\n  initSegmentId: initSegmentId\n};\n\nexports['default'] = utils;\nmodule.exports = exports['default'];","var map = {\n\t\"./undefined.png\": \"9877\",\n\t\"./中雨.png\": \"3c18\",\n\t\"./中雪.png\": \"d3b3\",\n\t\"./冻雨.png\": \"402f\",\n\t\"./多云.png\": \"a2ee\",\n\t\"./大雨.png\": \"b2a1\",\n\t\"./大雪.png\": \"8cb2\",\n\t\"./小雨.png\": \"b58e\",\n\t\"./小雪.png\": \"0acc\",\n\t\"./强沙尘暴.png\": \"a178\",\n\t\"./扬沙.png\": \"fef5\",\n\t\"./晴.png\": \"1287\",\n\t\"./暴雨.png\": \"40d6\",\n\t\"./暴雪.png\": \"2d0e\",\n\t\"./沙尘暴.png\": \"28eb\",\n\t\"./浮尘.png\": \"633f\",\n\t\"./特大暴雨.png\": \"dc13\",\n\t\"./阴.png\": \"a078\",\n\t\"./阵雨.png\": \"3d7d\",\n\t\"./阵雪.png\": \"421e\",\n\t\"./雨.png\": \"f0e0\",\n\t\"./雨夹雪.png\": \"3a48\",\n\t\"./雷阵雨.png\": \"cb03\",\n\t\"./雾.png\": \"518b\",\n\t\"./霾.png\": \"431a\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"5f13\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEQ0U1OTIyMEE3RTIxMUVCQUM2NUZCRjk5QzVBNjk4QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEQ0U1OTIyMUE3RTIxMUVCQUM2NUZCRjk5QzVBNjk4QiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkRDRTU5MjFFQTdFMjExRUJBQzY1RkJGOTlDNUE2OThCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRDRTU5MjFGQTdFMjExRUJBQzY1RkJGOTlDNUE2OThCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+UTPbqAAABehJREFUeNrUWU1v3FQU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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NTJGQTVDMjA4REExMUU5QjY1MUU1MDg5RDk1QTM5RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NTJGQTVDMzA4REExMUU5QjY1MUU1MDg5RDk1QTM5RSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ1MkZBNUMwMDhEQTExRTlCNjUxRTUwODlEOTVBMzlFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ1MkZBNUMxMDhEQTExRTlCNjUxRTUwODlEOTVBMzlFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8F9q+gAAA+lJREFUeNrsWF1oVEcUvjNz7+69G2NEBaE+KJI+FJWk/kAUIibgz4uoqC1I1fgkbR+0ARFBwUKpihBTUJr6A9q85KEQRDRCaQ3F0ljQbBSNKELFohbRh8Qk7u789Ju5G7N7s7vZNDeU4A58OTPD2ZnzzTlzztwQpZQ1lRu1pngrESgReN8J2MEJQkjWuLNp60yIPUAMaF3d+NPDYha+1d44yyLWbHQfL93UxPPpdZ7ctsFSqgXdGcAZoBF75E2NwaxZjAeuAN8Ch4CbaUJ52+3L+2PxjoNtLOa+tGPeA+B5/NrBLfn0WTR6Fqf2QfqA9gErQwshGKvdUZMxpU9pSaHfMM/9jnnRT23PI+jr8WyQaLt7/cjCoG5X6x5CI04ZdZzM6fLQCKRd2ZMx9SYwHh2TnvsJc2G461m2W2bAop4NUluDujU7flAs4hwGFLVNNP+SRqiXeD1wDDgF1ILUy4IeiHgWs8st25kOVBjJnHLMTZO59Gt2nmkmjj2H2PaHGK7B+qnxECDBSxG8xONtD2+3nGbM+wKxgbWYvnaWlDylZLKqsnp370SzTtBeO+y0xlhsP2XeNMrczwixtYefU5X8fN5HG3snI42G7oHh9vejX2dQGq1QSj6dW1krwzJ4lL2TRWCy2n+pA1OrEheoCRTuqWUucqLnXV/RcDaRT/dJ72WPstg6SiNzcGZdcytX9RSzx2+nti+XyWQduneQja6F/RZqhf86gQ7E9Y0/276M5FJ63HNxgRRD96UYaOe8r4Wn+uJ/3WtvGmvx38811GPtLnSPAx04sO2hEcBiFRBmQSWlpbhYJrn4OJeuEIPfCz4wn6f6LaHB+y2Q+epR9/m1BWNbyA1SiEx76sL0gK7Ar3UHhsMgIRXnz3IS4AN1gr8xhgveZyT3SdQXJiDiKBiZUw9CI4B4FBCbgRvYpBvG71rRcO5pTgKJoX8MAZw+wsfAeCI18KLQHjLFf0w/5i4B3wCn/5c60PPzob141zQTps/GXwth9wLEFy2u//rVlKgD3VcPbCOU7sJq+vUax7YnqtcffVIqZO9FIUPK1Pl95rsAHnGN/nrCB0rUl24Ub39f6jF1YngylxlQij7GeAuZF6lSyFwygYs8CDmoM5WBxFgkMP82YfEhX5rxkC+t7NNW6UyYHKsS/5H3q4uMSBNqJtx8SQg1DtUGU2ZDOhYBAUodGJ1CrEozrxRL69HA70nW+vmuV9C2XASqx0xdmfeEDG84TIK8I4LnNIz2TNz63wY0W49kG1vE/asqpg5cGO9FGvHwcE+Zv9oeHT6+XSo9P1q/8LqFbSOlf+6WCJQIlAiUCEyk/SvAAElEm1I/xF98AAAAAElFTkSuQmCC\"","/**\n * @file master-playlist-controller.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _playlistLoader = require('./playlist-loader');\n\nvar _playlistLoader2 = _interopRequireDefault(_playlistLoader);\n\nvar _playlistJs = require('./playlist.js');\n\nvar _segmentLoader = require('./segment-loader');\n\nvar _segmentLoader2 = _interopRequireDefault(_segmentLoader);\n\nvar _vttSegmentLoader = require('./vtt-segment-loader');\n\nvar _vttSegmentLoader2 = _interopRequireDefault(_vttSegmentLoader);\n\nvar _ranges = require('./ranges');\n\nvar _ranges2 = _interopRequireDefault(_ranges);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _adCueTags = require('./ad-cue-tags');\n\nvar _adCueTags2 = _interopRequireDefault(_adCueTags);\n\nvar _syncController = require('./sync-controller');\n\nvar _syncController2 = _interopRequireDefault(_syncController);\n\nvar _videojsContribMediaSourcesEs5CodecUtils = require('videojs-contrib-media-sources/es5/codec-utils');\n\nvar _webwackify = require('webwackify');\n\nvar _webwackify2 = _interopRequireDefault(_webwackify);\n\nvar _decrypterWorker = require('./decrypter-worker');\n\nvar _decrypterWorker2 = _interopRequireDefault(_decrypterWorker);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _utilCodecsJs = require('./util/codecs.js');\n\nvar _mediaGroups = require('./media-groups');\n\nvar ABORT_EARLY_BLACKLIST_SECONDS = 60 * 2;\n\nvar Hls = undefined;\n\n// Default codec parameters if none were provided for video and/or audio\nvar defaultCodecs = {\n  videoCodec: 'avc1',\n  videoObjectTypeIndicator: '.4d400d',\n  // AAC-LC\n  audioProfile: '2'\n};\n\n// SegmentLoader stats that need to have each loader's\n// values summed to calculate the final value\nvar loaderStats = ['mediaRequests', 'mediaRequestsAborted', 'mediaRequestsTimedout', 'mediaRequestsErrored', 'mediaTransferDuration', 'mediaBytesTransferred'];\nvar sumLoaderStat = function sumLoaderStat(stat) {\n  return this.audioSegmentLoader_[stat] + this.mainSegmentLoader_[stat];\n};\n\nvar resolveDecrypterWorker = function resolveDecrypterWorker() {\n  var result = undefined;\n\n  try {\n    result = require.resolve('./decrypter-worker');\n  } catch (e) {\n    // no result\n  }\n\n  return result;\n};\n\n/**\n * Replace codecs in the codec string with the old apple-style `avc1.<dd>.<dd>` to the\n * standard `avc1.<hhhhhh>`.\n *\n * @param codecString {String} the codec string\n * @return {String} the codec string with old apple-style codecs replaced\n *\n * @private\n */\nvar mapLegacyAvcCodecs_ = function mapLegacyAvcCodecs_(codecString) {\n  return codecString.replace(/avc1\\.(\\d+)\\.(\\d+)/i, function (match) {\n    return (0, _videojsContribMediaSourcesEs5CodecUtils.translateLegacyCodecs)([match])[0];\n  });\n};\n\nexports.mapLegacyAvcCodecs_ = mapLegacyAvcCodecs_;\n/**\n * Build a media mime-type string from a set of parameters\n * @param {String} type either 'audio' or 'video'\n * @param {String} container either 'mp2t' or 'mp4'\n * @param {Array} codecs an array of codec strings to add\n * @return {String} a valid media mime-type\n */\nvar makeMimeTypeString = function makeMimeTypeString(type, container, codecs) {\n  // The codecs array is filtered so that falsey values are\n  // dropped and don't cause Array#join to create spurious\n  // commas\n  return type + '/' + container + '; codecs=\"' + codecs.filter(function (c) {\n    return !!c;\n  }).join(', ') + '\"';\n};\n\n/**\n * Returns the type container based on information in the playlist\n * @param {Playlist} media the current media playlist\n * @return {String} a valid media container type\n */\nvar getContainerType = function getContainerType(media) {\n  // An initialization segment means the media playlist is an iframe\n  // playlist or is using the mp4 container. We don't currently\n  // support iframe playlists, so assume this is signalling mp4\n  // fragments.\n  if (media.segments && media.segments.length && media.segments[0].map) {\n    return 'mp4';\n  }\n  return 'mp2t';\n};\n\n/**\n * Returns a set of codec strings parsed from the playlist or the default\n * codec strings if no codecs were specified in the playlist\n * @param {Playlist} media the current media playlist\n * @return {Object} an object with the video and audio codecs\n */\nvar getCodecs = function getCodecs(media) {\n  // if the codecs were explicitly specified, use them instead of the\n  // defaults\n  var mediaAttributes = media.attributes || {};\n\n  if (mediaAttributes.CODECS) {\n    return (0, _utilCodecsJs.parseCodecs)(mediaAttributes.CODECS);\n  }\n  return defaultCodecs;\n};\n\n/**\n * Calculates the MIME type strings for a working configuration of\n * SourceBuffers to play variant streams in a master playlist. If\n * there is no possible working configuration, an empty array will be\n * returned.\n *\n * @param master {Object} the m3u8 object for the master playlist\n * @param media {Object} the m3u8 object for the variant playlist\n * @return {Array} the MIME type strings. If the array has more than\n * one entry, the first element should be applied to the video\n * SourceBuffer and the second to the audio SourceBuffer.\n *\n * @private\n */\nvar mimeTypesForPlaylist_ = function mimeTypesForPlaylist_(master, media) {\n  var containerType = getContainerType(media);\n  var codecInfo = getCodecs(media);\n  var mediaAttributes = media.attributes || {};\n  // Default condition for a traditional HLS (no demuxed audio/video)\n  var isMuxed = true;\n  var isMaat = false;\n\n  if (!media) {\n    // Not enough information\n    return [];\n  }\n\n  if (master.mediaGroups.AUDIO && mediaAttributes.AUDIO) {\n    var audioGroup = master.mediaGroups.AUDIO[mediaAttributes.AUDIO];\n\n    // Handle the case where we are in a multiple-audio track scenario\n    if (audioGroup) {\n      isMaat = true;\n      // Start with the everything demuxed then...\n      isMuxed = false;\n      // ...check to see if any audio group tracks are muxed (ie. lacking a uri)\n      for (var groupId in audioGroup) {\n        if (!audioGroup[groupId].uri) {\n          isMuxed = true;\n          break;\n        }\n      }\n    }\n  }\n\n  // HLS with multiple-audio tracks must always get an audio codec.\n  // Put another way, there is no way to have a video-only multiple-audio HLS!\n  if (isMaat && !codecInfo.audioProfile) {\n    _videoJs2['default'].log.warn('Multiple audio tracks present but no audio codec string is specified. ' + 'Attempting to use the default audio codec (mp4a.40.2)');\n    codecInfo.audioProfile = defaultCodecs.audioProfile;\n  }\n\n  // Generate the final codec strings from the codec object generated above\n  var codecStrings = {};\n\n  if (codecInfo.videoCodec) {\n    codecStrings.video = '' + codecInfo.videoCodec + codecInfo.videoObjectTypeIndicator;\n  }\n\n  if (codecInfo.audioProfile) {\n    codecStrings.audio = 'mp4a.40.' + codecInfo.audioProfile;\n  }\n\n  // Finally, make and return an array with proper mime-types depending on\n  // the configuration\n  var justAudio = makeMimeTypeString('audio', containerType, [codecStrings.audio]);\n  var justVideo = makeMimeTypeString('video', containerType, [codecStrings.video]);\n  var bothVideoAudio = makeMimeTypeString('video', containerType, [codecStrings.video, codecStrings.audio]);\n\n  if (isMaat) {\n    if (!isMuxed && codecStrings.video) {\n      return [justVideo, justAudio];\n    }\n    // There exists the possiblity that this will return a `video/container`\n    // mime-type for the first entry in the array even when there is only audio.\n    // This doesn't appear to be a problem and simplifies the code.\n    return [bothVideoAudio, justAudio];\n  }\n\n  // If there is ano video codec at all, always just return a single\n  // audio/<container> mime-type\n  if (!codecStrings.video) {\n    return [justAudio];\n  }\n\n  // When not using separate audio media groups, audio and video is\n  // *always* muxed\n  return [bothVideoAudio];\n};\n\nexports.mimeTypesForPlaylist_ = mimeTypesForPlaylist_;\n/**\n * the master playlist controller controls all interactons\n * between playlists and segmentloaders. At this time this mainly\n * involves a master playlist and a series of audio playlists\n * if they are available\n *\n * @class MasterPlaylistController\n * @extends videojs.EventTarget\n */\n\nvar MasterPlaylistController = (function (_videojs$EventTarget) {\n  _inherits(MasterPlaylistController, _videojs$EventTarget);\n\n  function MasterPlaylistController(options) {\n    var _this = this;\n\n    _classCallCheck(this, MasterPlaylistController);\n\n    _get(Object.getPrototypeOf(MasterPlaylistController.prototype), 'constructor', this).call(this);\n\n    var url = options.url;\n    var handleManifestRedirects = options.handleManifestRedirects;\n    var withCredentials = options.withCredentials;\n    var mode = options.mode;\n    var tech = options.tech;\n    var bandwidth = options.bandwidth;\n    var externHls = options.externHls;\n    var useCueTags = options.useCueTags;\n    var blacklistDuration = options.blacklistDuration;\n    var enableLowInitialPlaylist = options.enableLowInitialPlaylist;\n\n    if (!url) {\n      throw new Error('A non-empty playlist URL is required');\n    }\n\n    Hls = externHls;\n\n    this.tech_ = tech;\n    this.hls_ = tech.hls;\n    this.mode_ = mode;\n    this.useCueTags_ = useCueTags;\n    this.blacklistDuration = blacklistDuration;\n    this.enableLowInitialPlaylist = enableLowInitialPlaylist;\n\n    if (this.useCueTags_) {\n      this.cueTagsTrack_ = this.tech_.addTextTrack('metadata', 'ad-cues');\n      this.cueTagsTrack_.inBandMetadataTrackDispatchType = '';\n    }\n\n    this.requestOptions_ = {\n      withCredentials: withCredentials,\n      handleManifestRedirects: handleManifestRedirects,\n      timeout: null\n    };\n\n    this.mediaTypes_ = (0, _mediaGroups.createMediaTypes)();\n\n    this.mediaSource = new _videoJs2['default'].MediaSource({ mode: mode });\n\n    // load the media source into the player\n    this.mediaSource.addEventListener('sourceopen', this.handleSourceOpen_.bind(this));\n\n    this.seekable_ = _videoJs2['default'].createTimeRanges();\n    this.hasPlayed_ = function () {\n      return false;\n    };\n\n    this.syncController_ = new _syncController2['default'](options);\n    this.segmentMetadataTrack_ = tech.addRemoteTextTrack({\n      kind: 'metadata',\n      label: 'segment-metadata'\n    }, false).track;\n\n    this.decrypter_ = (0, _webwackify2['default'])(_decrypterWorker2['default'], resolveDecrypterWorker());\n\n    var segmentLoaderSettings = {\n      hls: this.hls_,\n      mediaSource: this.mediaSource,\n      currentTime: this.tech_.currentTime.bind(this.tech_),\n      seekable: function seekable() {\n        return _this.seekable();\n      },\n      seeking: function seeking() {\n        return _this.tech_.seeking();\n      },\n      duration: function duration() {\n        return _this.mediaSource.duration;\n      },\n      hasPlayed: function hasPlayed() {\n        return _this.hasPlayed_();\n      },\n      goalBufferLength: function goalBufferLength() {\n        return _this.goalBufferLength();\n      },\n      bandwidth: bandwidth,\n      syncController: this.syncController_,\n      decrypter: this.decrypter_\n    };\n\n    // setup playlist loaders\n    this.masterPlaylistLoader_ = new _playlistLoader2['default'](url, this.hls_, this.requestOptions_);\n    this.setupMasterPlaylistLoaderListeners_();\n\n    // setup segment loaders\n    // combined audio/video or just video when alternate audio track is selected\n    this.mainSegmentLoader_ = new _segmentLoader2['default'](_videoJs2['default'].mergeOptions(segmentLoaderSettings, {\n      segmentMetadataTrack: this.segmentMetadataTrack_,\n      loaderType: 'main'\n    }), options);\n\n    // alternate audio track\n    this.audioSegmentLoader_ = new _segmentLoader2['default'](_videoJs2['default'].mergeOptions(segmentLoaderSettings, {\n      loaderType: 'audio'\n    }), options);\n\n    this.subtitleSegmentLoader_ = new _vttSegmentLoader2['default'](_videoJs2['default'].mergeOptions(segmentLoaderSettings, {\n      loaderType: 'vtt'\n    }), options);\n\n    this.setupSegmentLoaderListeners_();\n\n    // Create SegmentLoader stat-getters\n    loaderStats.forEach(function (stat) {\n      _this[stat + '_'] = sumLoaderStat.bind(_this, stat);\n    });\n\n    this.masterPlaylistLoader_.load();\n  }\n\n  /**\n   * Register event handlers on the master playlist loader. A helper\n   * function for construction time.\n   *\n   * @private\n   */\n\n  _createClass(MasterPlaylistController, [{\n    key: 'setupMasterPlaylistLoaderListeners_',\n    value: function setupMasterPlaylistLoaderListeners_() {\n      var _this2 = this;\n\n      this.masterPlaylistLoader_.on('loadedmetadata', function () {\n        var media = _this2.masterPlaylistLoader_.media();\n        var requestTimeout = _this2.masterPlaylistLoader_.targetDuration * 1.5 * 1000;\n\n        // If we don't have any more available playlists, we don't want to\n        // timeout the request.\n        if ((0, _playlistJs.isLowestEnabledRendition)(_this2.masterPlaylistLoader_.master, _this2.masterPlaylistLoader_.media())) {\n          _this2.requestOptions_.timeout = 0;\n        } else {\n          _this2.requestOptions_.timeout = requestTimeout;\n        }\n\n        // if this isn't a live video and preload permits, start\n        // downloading segments\n        if (media.endList && _this2.tech_.preload() !== 'none') {\n          _this2.mainSegmentLoader_.playlist(media, _this2.requestOptions_);\n          _this2.mainSegmentLoader_.load();\n        }\n\n        (0, _mediaGroups.setupMediaGroups)({\n          segmentLoaders: {\n            AUDIO: _this2.audioSegmentLoader_,\n            SUBTITLES: _this2.subtitleSegmentLoader_,\n            main: _this2.mainSegmentLoader_\n          },\n          tech: _this2.tech_,\n          requestOptions: _this2.requestOptions_,\n          masterPlaylistLoader: _this2.masterPlaylistLoader_,\n          mode: _this2.mode_,\n          hls: _this2.hls_,\n          master: _this2.master(),\n          mediaTypes: _this2.mediaTypes_,\n          blacklistCurrentPlaylist: _this2.blacklistCurrentPlaylist.bind(_this2)\n        });\n\n        _this2.triggerPresenceUsage_(_this2.master(), media);\n\n        try {\n          _this2.setupSourceBuffers_();\n        } catch (e) {\n          _videoJs2['default'].log.warn('Failed to create SourceBuffers', e);\n          return _this2.mediaSource.endOfStream('decode');\n        }\n        _this2.setupFirstPlay();\n\n        _this2.trigger('selectedinitialmedia');\n      });\n\n      this.masterPlaylistLoader_.on('loadedplaylist', function () {\n        var updatedPlaylist = _this2.masterPlaylistLoader_.media();\n\n        if (!updatedPlaylist) {\n          var selectedMedia = undefined;\n\n          if (_this2.enableLowInitialPlaylist) {\n            selectedMedia = _this2.selectInitialPlaylist();\n          }\n\n          if (!selectedMedia) {\n            selectedMedia = _this2.selectPlaylist();\n          }\n\n          _this2.initialMedia_ = selectedMedia;\n          _this2.masterPlaylistLoader_.media(_this2.initialMedia_);\n          return;\n        }\n\n        if (_this2.useCueTags_) {\n          _this2.updateAdCues_(updatedPlaylist);\n        }\n\n        // TODO: Create a new event on the PlaylistLoader that signals\n        // that the segments have changed in some way and use that to\n        // update the SegmentLoader instead of doing it twice here and\n        // on `mediachange`\n        _this2.mainSegmentLoader_.playlist(updatedPlaylist, _this2.requestOptions_);\n        _this2.updateDuration();\n\n        // If the player isn't paused, ensure that the segment loader is running,\n        // as it is possible that it was temporarily stopped while waiting for\n        // a playlist (e.g., in case the playlist errored and we re-requested it).\n        if (!_this2.tech_.paused()) {\n          _this2.mainSegmentLoader_.load();\n        }\n\n        if (!updatedPlaylist.endList) {\n          (function () {\n            var addSeekableRange = function addSeekableRange() {\n              var seekable = _this2.seekable();\n\n              if (seekable.length !== 0) {\n                _this2.mediaSource.addSeekableRange_(seekable.start(0), seekable.end(0));\n              }\n            };\n\n            if (_this2.duration() !== Infinity) {\n              (function () {\n                var onDurationchange = function onDurationchange() {\n                  if (_this2.duration() === Infinity) {\n                    addSeekableRange();\n                  } else {\n                    _this2.tech_.one('durationchange', onDurationchange);\n                  }\n                };\n\n                _this2.tech_.one('durationchange', onDurationchange);\n              })();\n            } else {\n              addSeekableRange();\n            }\n          })();\n        }\n      });\n\n      this.masterPlaylistLoader_.on('error', function () {\n        _this2.blacklistCurrentPlaylist(_this2.masterPlaylistLoader_.error);\n      });\n\n      this.masterPlaylistLoader_.on('mediachanging', function () {\n        _this2.mainSegmentLoader_.abort();\n        _this2.mainSegmentLoader_.pause();\n      });\n\n      this.masterPlaylistLoader_.on('mediachange', function () {\n        var media = _this2.masterPlaylistLoader_.media();\n        var requestTimeout = _this2.masterPlaylistLoader_.targetDuration * 1.5 * 1000;\n\n        // If we don't have any more available playlists, we don't want to\n        // timeout the request.\n        if ((0, _playlistJs.isLowestEnabledRendition)(_this2.masterPlaylistLoader_.master, _this2.masterPlaylistLoader_.media())) {\n          _this2.requestOptions_.timeout = 0;\n        } else {\n          _this2.requestOptions_.timeout = requestTimeout;\n        }\n\n        // TODO: Create a new event on the PlaylistLoader that signals\n        // that the segments have changed in some way and use that to\n        // update the SegmentLoader instead of doing it twice here and\n        // on `loadedplaylist`\n        _this2.mainSegmentLoader_.playlist(media, _this2.requestOptions_);\n        _this2.mainSegmentLoader_.load();\n\n        _this2.tech_.trigger({\n          type: 'mediachange',\n          bubbles: true\n        });\n      });\n\n      this.masterPlaylistLoader_.on('playlistunchanged', function () {\n        var updatedPlaylist = _this2.masterPlaylistLoader_.media();\n        var playlistOutdated = _this2.stuckAtPlaylistEnd_(updatedPlaylist);\n\n        if (playlistOutdated) {\n          // Playlist has stopped updating and we're stuck at its end. Try to\n          // blacklist it and switch to another playlist in the hope that that\n          // one is updating (and give the player a chance to re-adjust to the\n          // safe live point).\n          _this2.blacklistCurrentPlaylist({\n            message: 'Playlist no longer updating.'\n          });\n          // useful for monitoring QoS\n          _this2.tech_.trigger('playliststuck');\n        }\n      });\n\n      this.masterPlaylistLoader_.on('renditiondisabled', function () {\n        _this2.tech_.trigger({ type: 'usage', name: 'hls-rendition-disabled' });\n      });\n      this.masterPlaylistLoader_.on('renditionenabled', function () {\n        _this2.tech_.trigger({ type: 'usage', name: 'hls-rendition-enabled' });\n      });\n    }\n\n    /**\n     * A helper function for triggerring presence usage events once per source\n     *\n     * @private\n     */\n  }, {\n    key: 'triggerPresenceUsage_',\n    value: function triggerPresenceUsage_(master, media) {\n      var mediaGroups = master.mediaGroups || {};\n      var defaultDemuxed = true;\n      var audioGroupKeys = Object.keys(mediaGroups.AUDIO);\n\n      for (var mediaGroup in mediaGroups.AUDIO) {\n        for (var label in mediaGroups.AUDIO[mediaGroup]) {\n          var properties = mediaGroups.AUDIO[mediaGroup][label];\n\n          if (!properties.uri) {\n            defaultDemuxed = false;\n          }\n        }\n      }\n\n      if (defaultDemuxed) {\n        this.tech_.trigger({ type: 'usage', name: 'hls-demuxed' });\n      }\n\n      if (Object.keys(mediaGroups.SUBTITLES).length) {\n        this.tech_.trigger({ type: 'usage', name: 'hls-webvtt' });\n      }\n\n      if (Hls.Playlist.isAes(media)) {\n        this.tech_.trigger({ type: 'usage', name: 'hls-aes' });\n      }\n\n      if (Hls.Playlist.isFmp4(media)) {\n        this.tech_.trigger({ type: 'usage', name: 'hls-fmp4' });\n      }\n\n      if (audioGroupKeys.length && Object.keys(mediaGroups.AUDIO[audioGroupKeys[0]]).length > 1) {\n        this.tech_.trigger({ type: 'usage', name: 'hls-alternate-audio' });\n      }\n\n      if (this.useCueTags_) {\n        this.tech_.trigger({ type: 'usage', name: 'hls-playlist-cue-tags' });\n      }\n    }\n\n    /**\n     * Register event handlers on the segment loaders. A helper function\n     * for construction time.\n     *\n     * @private\n     */\n  }, {\n    key: 'setupSegmentLoaderListeners_',\n    value: function setupSegmentLoaderListeners_() {\n      var _this3 = this;\n\n      this.mainSegmentLoader_.on('bandwidthupdate', function () {\n        var nextPlaylist = _this3.selectPlaylist();\n        var currentPlaylist = _this3.masterPlaylistLoader_.media();\n        var buffered = _this3.tech_.buffered();\n        var forwardBuffer = buffered.length ? buffered.end(buffered.length - 1) - _this3.tech_.currentTime() : 0;\n\n        var bufferLowWaterLine = _this3.bufferLowWaterLine();\n\n        // If the playlist is live, then we want to not take low water line into account.\n        // This is because in LIVE, the player plays 3 segments from the end of the\n        // playlist, and if `BUFFER_LOW_WATER_LINE` is greater than the duration availble\n        // in those segments, a viewer will never experience a rendition upswitch.\n        if (!currentPlaylist.endList ||\n        // For the same reason as LIVE, we ignore the low water line when the VOD\n        // duration is below the max potential low water line\n        _this3.duration() < _config2['default'].MAX_BUFFER_LOW_WATER_LINE ||\n        // we want to switch down to lower resolutions quickly to continue playback, but\n        nextPlaylist.attributes.BANDWIDTH < currentPlaylist.attributes.BANDWIDTH ||\n        // ensure we have some buffer before we switch up to prevent us running out of\n        // buffer while loading a higher rendition.\n        forwardBuffer >= bufferLowWaterLine) {\n          _this3.masterPlaylistLoader_.media(nextPlaylist);\n        }\n\n        _this3.tech_.trigger('bandwidthupdate');\n      });\n      this.mainSegmentLoader_.on('progress', function () {\n        _this3.trigger('progress');\n      });\n\n      this.mainSegmentLoader_.on('error', function () {\n        _this3.blacklistCurrentPlaylist(_this3.mainSegmentLoader_.error());\n      });\n\n      this.mainSegmentLoader_.on('syncinfoupdate', function () {\n        _this3.onSyncInfoUpdate_();\n      });\n\n      this.mainSegmentLoader_.on('timestampoffset', function () {\n        _this3.tech_.trigger({ type: 'usage', name: 'hls-timestamp-offset' });\n      });\n      this.audioSegmentLoader_.on('syncinfoupdate', function () {\n        _this3.onSyncInfoUpdate_();\n      });\n\n      this.mainSegmentLoader_.on('ended', function () {\n        _this3.onEndOfStream();\n      });\n\n      this.mainSegmentLoader_.on('earlyabort', function () {\n        _this3.blacklistCurrentPlaylist({\n          message: 'Aborted early because there isn\\'t enough bandwidth to complete the ' + 'request without rebuffering.'\n        }, ABORT_EARLY_BLACKLIST_SECONDS);\n      });\n\n      this.mainSegmentLoader_.on('reseteverything', function () {\n        // If playing an MTS stream, a videojs.MediaSource is listening for\n        // hls-reset to reset caption parsing state in the transmuxer\n        _this3.tech_.trigger('hls-reset');\n      });\n\n      this.mainSegmentLoader_.on('segmenttimemapping', function (event) {\n        // If playing an MTS stream in html, a videojs.MediaSource is listening for\n        // hls-segment-time-mapping update its internal mapping of stream to display time\n        _this3.tech_.trigger({\n          type: 'hls-segment-time-mapping',\n          mapping: event.mapping\n        });\n      });\n\n      this.audioSegmentLoader_.on('ended', function () {\n        _this3.onEndOfStream();\n      });\n    }\n  }, {\n    key: 'mediaSecondsLoaded_',\n    value: function mediaSecondsLoaded_() {\n      return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded + this.mainSegmentLoader_.mediaSecondsLoaded);\n    }\n\n    /**\n     * Call load on our SegmentLoaders\n     */\n  }, {\n    key: 'load',\n    value: function load() {\n      this.mainSegmentLoader_.load();\n      if (this.mediaTypes_.AUDIO.activePlaylistLoader) {\n        this.audioSegmentLoader_.load();\n      }\n      if (this.mediaTypes_.SUBTITLES.activePlaylistLoader) {\n        this.subtitleSegmentLoader_.load();\n      }\n    }\n\n    /**\n     * Re-tune playback quality level for the current player\n     * conditions. This method may perform destructive actions, like\n     * removing already buffered content, to readjust the currently\n     * active playlist quickly.\n     *\n     * @private\n     */\n  }, {\n    key: 'fastQualityChange_',\n    value: function fastQualityChange_() {\n      var media = this.selectPlaylist();\n\n      if (media !== this.masterPlaylistLoader_.media()) {\n        this.masterPlaylistLoader_.media(media);\n\n        this.mainSegmentLoader_.resetLoader();\n        // don't need to reset audio as it is reset when media changes\n      }\n    }\n\n    /**\n     * Begin playback.\n     */\n  }, {\n    key: 'play',\n    value: function play() {\n      if (this.setupFirstPlay()) {\n        return;\n      }\n\n      if (this.tech_.ended()) {\n        this.tech_.setCurrentTime(0);\n      }\n\n      if (this.hasPlayed_()) {\n        this.load();\n      }\n\n      var seekable = this.tech_.seekable();\n\n      // if the viewer has paused and we fell out of the live window,\n      // seek forward to the live point\n      if (this.tech_.duration() === Infinity) {\n        if (this.tech_.currentTime() < seekable.start(0)) {\n          return this.tech_.setCurrentTime(seekable.end(seekable.length - 1));\n        }\n      }\n    }\n\n    /**\n     * Seek to the latest media position if this is a live video and the\n     * player and video are loaded and initialized.\n     */\n  }, {\n    key: 'setupFirstPlay',\n    value: function setupFirstPlay() {\n      var _this4 = this;\n\n      var media = this.masterPlaylistLoader_.media();\n\n      // Check that everything is ready to begin buffering for the first call to play\n      //  If 1) there is no active media\n      //     2) the player is paused\n      //     3) the first play has already been setup\n      // then exit early\n      if (!media || this.tech_.paused() || this.hasPlayed_()) {\n        return false;\n      }\n\n      // when the video is a live stream\n      if (!media.endList) {\n        var _ret3 = (function () {\n          var seekable = _this4.seekable();\n\n          if (!seekable.length) {\n            // without a seekable range, the player cannot seek to begin buffering at the live\n            // point\n            return {\n              v: false\n            };\n          }\n\n          if (_videoJs2['default'].browser.IE_VERSION && _this4.mode_ === 'html5' && _this4.tech_.readyState() === 0) {\n            // IE11 throws an InvalidStateError if you try to set currentTime while the\n            // readyState is 0, so it must be delayed until the tech fires loadedmetadata.\n            _this4.tech_.one('loadedmetadata', function () {\n              _this4.trigger('firstplay');\n              _this4.tech_.setCurrentTime(seekable.end(0));\n              _this4.hasPlayed_ = function () {\n                return true;\n              };\n            });\n\n            return {\n              v: false\n            };\n          }\n\n          // trigger firstplay to inform the source handler to ignore the next seek event\n          _this4.trigger('firstplay');\n          // seek to the live point\n          _this4.tech_.setCurrentTime(seekable.end(0));\n        })();\n\n        if (typeof _ret3 === 'object') return _ret3.v;\n      }\n\n      this.hasPlayed_ = function () {\n        return true;\n      };\n      // we can begin loading now that everything is ready\n      this.load();\n      return true;\n    }\n\n    /**\n     * handle the sourceopen event on the MediaSource\n     *\n     * @private\n     */\n  }, {\n    key: 'handleSourceOpen_',\n    value: function handleSourceOpen_() {\n      // Only attempt to create the source buffer if none already exist.\n      // handleSourceOpen is also called when we are \"re-opening\" a source buffer\n      // after `endOfStream` has been called (in response to a seek for instance)\n      try {\n        this.setupSourceBuffers_();\n      } catch (e) {\n        _videoJs2['default'].log.warn('Failed to create Source Buffers', e);\n        return this.mediaSource.endOfStream('decode');\n      }\n\n      // if autoplay is enabled, begin playback. This is duplicative of\n      // code in video.js but is required because play() must be invoked\n      // *after* the media source has opened.\n      if (this.tech_.autoplay()) {\n        var playPromise = this.tech_.play();\n\n        // Catch/silence error when a pause interrupts a play request\n        // on browsers which return a promise\n        if (typeof playPromise !== 'undefined' && typeof playPromise.then === 'function') {\n          playPromise.then(null, function (e) {});\n        }\n      }\n\n      this.trigger('sourceopen');\n    }\n\n    /**\n     * Calls endOfStream on the media source when all active stream types have called\n     * endOfStream\n     *\n     * @param {string} streamType\n     *        Stream type of the segment loader that called endOfStream\n     * @private\n     */\n  }, {\n    key: 'onEndOfStream',\n    value: function onEndOfStream() {\n      var isEndOfStream = this.mainSegmentLoader_.ended_;\n\n      if (this.mediaTypes_.AUDIO.activePlaylistLoader) {\n        // if the audio playlist loader exists, then alternate audio is active, so we need\n        // to wait for both the main and audio segment loaders to call endOfStream\n        isEndOfStream = isEndOfStream && this.audioSegmentLoader_.ended_;\n      }\n\n      if (isEndOfStream) {\n        this.mediaSource.endOfStream();\n      }\n    }\n\n    /**\n     * Check if a playlist has stopped being updated\n     * @param {Object} playlist the media playlist object\n     * @return {boolean} whether the playlist has stopped being updated or not\n     */\n  }, {\n    key: 'stuckAtPlaylistEnd_',\n    value: function stuckAtPlaylistEnd_(playlist) {\n      var seekable = this.seekable();\n\n      if (!seekable.length) {\n        // playlist doesn't have enough information to determine whether we are stuck\n        return false;\n      }\n\n      var expired = this.syncController_.getExpiredTime(playlist, this.mediaSource.duration);\n\n      if (expired === null) {\n        return false;\n      }\n\n      // does not use the safe live end to calculate playlist end, since we\n      // don't want to say we are stuck while there is still content\n      var absolutePlaylistEnd = Hls.Playlist.playlistEnd(playlist, expired);\n      var currentTime = this.tech_.currentTime();\n      var buffered = this.tech_.buffered();\n\n      if (!buffered.length) {\n        // return true if the playhead reached the absolute end of the playlist\n        return absolutePlaylistEnd - currentTime <= _ranges2['default'].SAFE_TIME_DELTA;\n      }\n      var bufferedEnd = buffered.end(buffered.length - 1);\n\n      // return true if there is too little buffer left and buffer has reached absolute\n      // end of playlist\n      return bufferedEnd - currentTime <= _ranges2['default'].SAFE_TIME_DELTA && absolutePlaylistEnd - bufferedEnd <= _ranges2['default'].SAFE_TIME_DELTA;\n    }\n\n    /**\n     * Blacklists a playlist when an error occurs for a set amount of time\n     * making it unavailable for selection by the rendition selection algorithm\n     * and then forces a new playlist (rendition) selection.\n     *\n     * @param {Object=} error an optional error that may include the playlist\n     * to blacklist\n     * @param {Number=} blacklistDuration an optional number of seconds to blacklist the\n     * playlist\n     */\n  }, {\n    key: 'blacklistCurrentPlaylist',\n    value: function blacklistCurrentPlaylist(error, blacklistDuration) {\n      if (error === undefined) error = {};\n\n      var currentPlaylist = undefined;\n      var nextPlaylist = undefined;\n\n      // If the `error` was generated by the playlist loader, it will contain\n      // the playlist we were trying to load (but failed) and that should be\n      // blacklisted instead of the currently selected playlist which is likely\n      // out-of-date in this scenario\n      currentPlaylist = error.playlist || this.masterPlaylistLoader_.media();\n\n      blacklistDuration = blacklistDuration || error.blacklistDuration || this.blacklistDuration;\n\n      // If there is no current playlist, then an error occurred while we were\n      // trying to load the master OR while we were disposing of the tech\n      if (!currentPlaylist) {\n        this.error = error;\n\n        try {\n          return this.mediaSource.endOfStream('network');\n        } catch (e) {\n          return this.trigger('error');\n        }\n      }\n\n      var isFinalRendition = this.masterPlaylistLoader_.master.playlists.filter(_playlistJs.isEnabled).length === 1;\n\n      if (isFinalRendition) {\n        // Never blacklisting this playlist because it's final rendition\n        _videoJs2['default'].log.warn('Problem encountered with the current ' + 'HLS playlist. Trying again since it is the final playlist.');\n\n        this.tech_.trigger('retryplaylist');\n        return this.masterPlaylistLoader_.load(isFinalRendition);\n      }\n      // Blacklist this playlist\n      currentPlaylist.excludeUntil = Date.now() + blacklistDuration * 1000;\n      this.tech_.trigger('blacklistplaylist');\n      this.tech_.trigger({ type: 'usage', name: 'hls-rendition-blacklisted' });\n\n      // Select a new playlist\n      nextPlaylist = this.selectPlaylist();\n      _videoJs2['default'].log.warn('Problem encountered with the current HLS playlist.' + (error.message ? ' ' + error.message : '') + ' Switching to another playlist.');\n\n      return this.masterPlaylistLoader_.media(nextPlaylist);\n    }\n\n    /**\n     * Pause all segment loaders\n     */\n  }, {\n    key: 'pauseLoading',\n    value: function pauseLoading() {\n      this.mainSegmentLoader_.pause();\n      if (this.mediaTypes_.AUDIO.activePlaylistLoader) {\n        this.audioSegmentLoader_.pause();\n      }\n      if (this.mediaTypes_.SUBTITLES.activePlaylistLoader) {\n        this.subtitleSegmentLoader_.pause();\n      }\n    }\n\n    /**\n     * set the current time on all segment loaders\n     *\n     * @param {TimeRange} currentTime the current time to set\n     * @return {TimeRange} the current time\n     */\n  }, {\n    key: 'setCurrentTime',\n    value: function setCurrentTime(currentTime) {\n      var buffered = _ranges2['default'].findRange(this.tech_.buffered(), currentTime);\n\n      if (!(this.masterPlaylistLoader_ && this.masterPlaylistLoader_.media())) {\n        // return immediately if the metadata is not ready yet\n        return 0;\n      }\n\n      // it's clearly an edge-case but don't thrown an error if asked to\n      // seek within an empty playlist\n      if (!this.masterPlaylistLoader_.media().segments) {\n        return 0;\n      }\n\n      // In flash playback, the segment loaders should be reset on every seek, even\n      // in buffer seeks. If the seek location is already buffered, continue buffering as\n      // usual\n      if (buffered && buffered.length && this.mode_ !== 'flash') {\n        return currentTime;\n      }\n\n      // cancel outstanding requests so we begin buffering at the new\n      // location\n      this.mainSegmentLoader_.resetEverything();\n      this.mainSegmentLoader_.abort();\n      if (this.mediaTypes_.AUDIO.activePlaylistLoader) {\n        this.audioSegmentLoader_.resetEverything();\n        this.audioSegmentLoader_.abort();\n      }\n      if (this.mediaTypes_.SUBTITLES.activePlaylistLoader) {\n        this.subtitleSegmentLoader_.resetEverything();\n        this.subtitleSegmentLoader_.abort();\n      }\n\n      // start segment loader loading in case they are paused\n      this.load();\n    }\n\n    /**\n     * get the current duration\n     *\n     * @return {TimeRange} the duration\n     */\n  }, {\n    key: 'duration',\n    value: function duration() {\n      if (!this.masterPlaylistLoader_) {\n        return 0;\n      }\n\n      if (this.mediaSource) {\n        return this.mediaSource.duration;\n      }\n\n      return Hls.Playlist.duration(this.masterPlaylistLoader_.media());\n    }\n\n    /**\n     * check the seekable range\n     *\n     * @return {TimeRange} the seekable range\n     */\n  }, {\n    key: 'seekable',\n    value: function seekable() {\n      return this.seekable_;\n    }\n  }, {\n    key: 'onSyncInfoUpdate_',\n    value: function onSyncInfoUpdate_() {\n      var mainSeekable = undefined;\n      var audioSeekable = undefined;\n\n      if (!this.masterPlaylistLoader_) {\n        return;\n      }\n\n      var media = this.masterPlaylistLoader_.media();\n\n      if (!media) {\n        return;\n      }\n\n      var expired = this.syncController_.getExpiredTime(media, this.mediaSource.duration);\n\n      if (expired === null) {\n        // not enough information to update seekable\n        return;\n      }\n\n      mainSeekable = Hls.Playlist.seekable(media, expired);\n\n      if (mainSeekable.length === 0) {\n        return;\n      }\n\n      if (this.mediaTypes_.AUDIO.activePlaylistLoader) {\n        media = this.mediaTypes_.AUDIO.activePlaylistLoader.media();\n        expired = this.syncController_.getExpiredTime(media, this.mediaSource.duration);\n\n        if (expired === null) {\n          return;\n        }\n\n        audioSeekable = Hls.Playlist.seekable(media, expired);\n\n        if (audioSeekable.length === 0) {\n          return;\n        }\n      }\n\n      if (!audioSeekable) {\n        // seekable has been calculated based on buffering video data so it\n        // can be returned directly\n        this.seekable_ = mainSeekable;\n      } else if (audioSeekable.start(0) > mainSeekable.end(0) || mainSeekable.start(0) > audioSeekable.end(0)) {\n        // seekables are pretty far off, rely on main\n        this.seekable_ = mainSeekable;\n      } else {\n        this.seekable_ = _videoJs2['default'].createTimeRanges([[audioSeekable.start(0) > mainSeekable.start(0) ? audioSeekable.start(0) : mainSeekable.start(0), audioSeekable.end(0) < mainSeekable.end(0) ? audioSeekable.end(0) : mainSeekable.end(0)]]);\n      }\n\n      this.tech_.trigger('seekablechanged');\n    }\n\n    /**\n     * Update the player duration\n     */\n  }, {\n    key: 'updateDuration',\n    value: function updateDuration() {\n      var _this5 = this;\n\n      var oldDuration = this.mediaSource.duration;\n      var newDuration = Hls.Playlist.duration(this.masterPlaylistLoader_.media());\n      var buffered = this.tech_.buffered();\n      var setDuration = function setDuration() {\n        _this5.mediaSource.duration = newDuration;\n        _this5.tech_.trigger('durationchange');\n\n        _this5.mediaSource.removeEventListener('sourceopen', setDuration);\n      };\n\n      if (buffered.length > 0) {\n        newDuration = Math.max(newDuration, buffered.end(buffered.length - 1));\n      }\n\n      // if the duration has changed, invalidate the cached value\n      if (oldDuration !== newDuration) {\n        // update the duration\n        if (this.mediaSource.readyState !== 'open') {\n          this.mediaSource.addEventListener('sourceopen', setDuration);\n        } else {\n          setDuration();\n        }\n      }\n    }\n\n    /**\n     * dispose of the MasterPlaylistController and everything\n     * that it controls\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      var _this6 = this;\n\n      this.decrypter_.terminate();\n      this.masterPlaylistLoader_.dispose();\n      this.mainSegmentLoader_.dispose();\n\n      ['AUDIO', 'SUBTITLES'].forEach(function (type) {\n        var groups = _this6.mediaTypes_[type].groups;\n\n        for (var id in groups) {\n          groups[id].forEach(function (group) {\n            if (group.playlistLoader) {\n              group.playlistLoader.dispose();\n            }\n          });\n        }\n      });\n\n      this.audioSegmentLoader_.dispose();\n      this.subtitleSegmentLoader_.dispose();\n    }\n\n    /**\n     * return the master playlist object if we have one\n     *\n     * @return {Object} the master playlist object that we parsed\n     */\n  }, {\n    key: 'master',\n    value: function master() {\n      return this.masterPlaylistLoader_.master;\n    }\n\n    /**\n     * return the currently selected playlist\n     *\n     * @return {Object} the currently selected playlist object that we parsed\n     */\n  }, {\n    key: 'media',\n    value: function media() {\n      // playlist loader will not return media if it has not been fully loaded\n      return this.masterPlaylistLoader_.media() || this.initialMedia_;\n    }\n\n    /**\n     * setup our internal source buffers on our segment Loaders\n     *\n     * @private\n     */\n  }, {\n    key: 'setupSourceBuffers_',\n    value: function setupSourceBuffers_() {\n      var media = this.masterPlaylistLoader_.media();\n      var mimeTypes = undefined;\n\n      // wait until a media playlist is available and the Media Source is\n      // attached\n      if (!media || this.mediaSource.readyState !== 'open') {\n        return;\n      }\n\n      mimeTypes = mimeTypesForPlaylist_(this.masterPlaylistLoader_.master, media);\n      if (mimeTypes.length < 1) {\n        this.error = 'No compatible SourceBuffer configuration for the variant stream:' + media.resolvedUri;\n        return this.mediaSource.endOfStream('decode');\n      }\n      this.mainSegmentLoader_.mimeType(mimeTypes[0]);\n      if (mimeTypes[1]) {\n        this.audioSegmentLoader_.mimeType(mimeTypes[1]);\n      }\n\n      // exclude any incompatible variant streams from future playlist\n      // selection\n      this.excludeIncompatibleVariants_(media);\n    }\n\n    /**\n     * Blacklist playlists that are known to be codec or\n     * stream-incompatible with the SourceBuffer configuration. For\n     * instance, Media Source Extensions would cause the video element to\n     * stall waiting for video data if you switched from a variant with\n     * video and audio to an audio-only one.\n     *\n     * @param {Object} media a media playlist compatible with the current\n     * set of SourceBuffers. Variants in the current master playlist that\n     * do not appear to have compatible codec or stream configurations\n     * will be excluded from the default playlist selection algorithm\n     * indefinitely.\n     * @private\n     */\n  }, {\n    key: 'excludeIncompatibleVariants_',\n    value: function excludeIncompatibleVariants_(media) {\n      var master = this.masterPlaylistLoader_.master;\n      var codecCount = 2;\n      var videoCodec = null;\n      var codecs = undefined;\n\n      if (media.attributes.CODECS) {\n        codecs = (0, _utilCodecsJs.parseCodecs)(media.attributes.CODECS);\n        videoCodec = codecs.videoCodec;\n        codecCount = codecs.codecCount;\n      }\n      master.playlists.forEach(function (variant) {\n        var variantCodecs = {\n          codecCount: 2,\n          videoCodec: null\n        };\n\n        if (variant.attributes.CODECS) {\n          var codecString = variant.attributes.CODECS;\n\n          variantCodecs = (0, _utilCodecsJs.parseCodecs)(codecString);\n\n          if (window.MediaSource && window.MediaSource.isTypeSupported && !window.MediaSource.isTypeSupported('video/mp4; codecs=\"' + mapLegacyAvcCodecs_(codecString) + '\"')) {\n            variant.excludeUntil = Infinity;\n          }\n        }\n\n        // if the streams differ in the presence or absence of audio or\n        // video, they are incompatible\n        if (variantCodecs.codecCount !== codecCount) {\n          variant.excludeUntil = Infinity;\n        }\n\n        // if h.264 is specified on the current playlist, some flavor of\n        // it must be specified on all compatible variants\n        if (variantCodecs.videoCodec !== videoCodec) {\n          variant.excludeUntil = Infinity;\n        }\n      });\n    }\n  }, {\n    key: 'updateAdCues_',\n    value: function updateAdCues_(media) {\n      var offset = 0;\n      var seekable = this.seekable();\n\n      if (seekable.length) {\n        offset = seekable.start(0);\n      }\n\n      _adCueTags2['default'].updateAdCues(media, this.cueTagsTrack_, offset);\n    }\n\n    /**\n     * Calculates the desired forward buffer length based on current time\n     *\n     * @return {Number} Desired forward buffer length in seconds\n     */\n  }, {\n    key: 'goalBufferLength',\n    value: function goalBufferLength() {\n      var currentTime = this.tech_.currentTime();\n      var initial = _config2['default'].GOAL_BUFFER_LENGTH;\n      var rate = _config2['default'].GOAL_BUFFER_LENGTH_RATE;\n      var max = Math.max(initial, _config2['default'].MAX_GOAL_BUFFER_LENGTH);\n\n      return Math.min(initial + currentTime * rate, max);\n    }\n\n    /**\n     * Calculates the desired buffer low water line based on current time\n     *\n     * @return {Number} Desired buffer low water line in seconds\n     */\n  }, {\n    key: 'bufferLowWaterLine',\n    value: function bufferLowWaterLine() {\n      var currentTime = this.tech_.currentTime();\n      var initial = _config2['default'].BUFFER_LOW_WATER_LINE;\n      var rate = _config2['default'].BUFFER_LOW_WATER_LINE_RATE;\n      var max = Math.max(initial, _config2['default'].MAX_BUFFER_LOW_WATER_LINE);\n\n      return Math.min(initial + currentTime * rate, max);\n    }\n  }]);\n\n  return MasterPlaylistController;\n})(_videoJs2['default'].EventTarget);\n\nexports.MasterPlaylistController = MasterPlaylistController;","/**\n * @license\n * Video.js 6.12.1 <http://videojs.com/>\n * Copyright Brightcove, Inc. <https://www.brightcove.com/>\n * Available under Apache License Version 2.0\n * <https://github.com/videojs/video.js/blob/master/LICENSE>\n *\n * Includes vtt.js <https://github.com/mozilla/vtt.js>\n * Available under Apache License Version 2.0\n * <https://github.com/mozilla/vtt.js/blob/master/LICENSE>\n */\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar window = _interopDefault(require('global/window'));\nvar document = _interopDefault(require('global/document'));\nvar tsml = _interopDefault(require('tsml'));\nvar safeParseTuple = _interopDefault(require('safe-json-parse/tuple'));\nvar xhr = _interopDefault(require('xhr'));\nvar vtt = _interopDefault(require('videojs-vtt.js'));\n\nvar version = \"6.12.1\";\n\n/**\n * @file browser.js\n * @module browser\n */\nvar USER_AGENT = window.navigator && window.navigator.userAgent || '';\nvar webkitVersionMap = /AppleWebKit\\/([\\d.]+)/i.exec(USER_AGENT);\nvar appleWebkitVersion = webkitVersionMap ? parseFloat(webkitVersionMap.pop()) : null;\n\n/*\n * Device is an iPhone\n *\n * @type {Boolean}\n * @constant\n * @private\n */\nvar IS_IPAD = /iPad/i.test(USER_AGENT);\n\n// The Facebook app's UIWebView identifies as both an iPhone and iPad, so\n// to identify iPhones, we need to exclude iPads.\n// http://artsy.github.io/blog/2012/10/18/the-perils-of-ios-user-agent-sniffing/\nvar IS_IPHONE = /iPhone/i.test(USER_AGENT) && !IS_IPAD;\nvar IS_IPOD = /iPod/i.test(USER_AGENT);\nvar IS_IOS = IS_IPHONE || IS_IPAD || IS_IPOD;\n\nvar IOS_VERSION = function () {\n  var match = USER_AGENT.match(/OS (\\d+)_/i);\n\n  if (match && match[1]) {\n    return match[1];\n  }\n  return null;\n}();\n\nvar IS_ANDROID = /Android/i.test(USER_AGENT);\nvar ANDROID_VERSION = function () {\n  // This matches Android Major.Minor.Patch versions\n  // ANDROID_VERSION is Major.Minor as a Number, if Minor isn't available, then only Major is returned\n  var match = USER_AGENT.match(/Android (\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))*/i);\n\n  if (!match) {\n    return null;\n  }\n\n  var major = match[1] && parseFloat(match[1]);\n  var minor = match[2] && parseFloat(match[2]);\n\n  if (major && minor) {\n    return parseFloat(match[1] + '.' + match[2]);\n  } else if (major) {\n    return major;\n  }\n  return null;\n}();\n\n// Old Android is defined as Version older than 2.3, and requiring a webkit version of the android browser\nvar IS_OLD_ANDROID = IS_ANDROID && /webkit/i.test(USER_AGENT) && ANDROID_VERSION < 2.3;\nvar IS_NATIVE_ANDROID = IS_ANDROID && ANDROID_VERSION < 5 && appleWebkitVersion < 537;\n\nvar IS_FIREFOX = /Firefox/i.test(USER_AGENT);\nvar IS_EDGE = /Edge/i.test(USER_AGENT);\nvar IS_CHROME = !IS_EDGE && (/Chrome/i.test(USER_AGENT) || /CriOS/i.test(USER_AGENT));\nvar CHROME_VERSION = function () {\n  var match = USER_AGENT.match(/(Chrome|CriOS)\\/(\\d+)/);\n\n  if (match && match[2]) {\n    return parseFloat(match[2]);\n  }\n  return null;\n}();\nvar IS_IE8 = /MSIE\\s8\\.0/.test(USER_AGENT);\nvar IE_VERSION = function () {\n  var result = /MSIE\\s(\\d+)\\.\\d/.exec(USER_AGENT);\n  var version = result && parseFloat(result[1]);\n\n  if (!version && /Trident\\/7.0/i.test(USER_AGENT) && /rv:11.0/.test(USER_AGENT)) {\n    // IE 11 has a different user agent string than other IE versions\n    version = 11.0;\n  }\n\n  return version;\n}();\n\nvar IS_SAFARI = /Safari/i.test(USER_AGENT) && !IS_CHROME && !IS_ANDROID && !IS_EDGE;\nvar IS_ANY_SAFARI = (IS_SAFARI || IS_IOS) && !IS_CHROME;\n\nvar TOUCH_ENABLED = isReal() && ('ontouchstart' in window || window.navigator.maxTouchPoints || window.DocumentTouch && window.document instanceof window.DocumentTouch);\n\nvar BACKGROUND_SIZE_SUPPORTED = isReal() && 'backgroundSize' in window.document.createElement('video').style;\n\nvar browser = (Object.freeze || Object)({\n\tIS_IPAD: IS_IPAD,\n\tIS_IPHONE: IS_IPHONE,\n\tIS_IPOD: IS_IPOD,\n\tIS_IOS: IS_IOS,\n\tIOS_VERSION: IOS_VERSION,\n\tIS_ANDROID: IS_ANDROID,\n\tANDROID_VERSION: ANDROID_VERSION,\n\tIS_OLD_ANDROID: IS_OLD_ANDROID,\n\tIS_NATIVE_ANDROID: IS_NATIVE_ANDROID,\n\tIS_FIREFOX: IS_FIREFOX,\n\tIS_EDGE: IS_EDGE,\n\tIS_CHROME: IS_CHROME,\n\tCHROME_VERSION: CHROME_VERSION,\n\tIS_IE8: IS_IE8,\n\tIE_VERSION: IE_VERSION,\n\tIS_SAFARI: IS_SAFARI,\n\tIS_ANY_SAFARI: IS_ANY_SAFARI,\n\tTOUCH_ENABLED: TOUCH_ENABLED,\n\tBACKGROUND_SIZE_SUPPORTED: BACKGROUND_SIZE_SUPPORTED\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\n\n\n\n\n\n\n\n\n\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar taggedTemplateLiteralLoose = function (strings, raw) {\n  strings.raw = raw;\n  return strings;\n};\n\n/**\n * @file obj.js\n * @module obj\n */\n\n/**\n * @callback obj:EachCallback\n *\n * @param {Mixed} value\n *        The current key for the object that is being iterated over.\n *\n * @param {string} key\n *        The current key-value for object that is being iterated over\n */\n\n/**\n * @callback obj:ReduceCallback\n *\n * @param {Mixed} accum\n *        The value that is accumulating over the reduce loop.\n *\n * @param {Mixed} value\n *        The current key for the object that is being iterated over.\n *\n * @param {string} key\n *        The current key-value for object that is being iterated over\n *\n * @return {Mixed}\n *         The new accumulated value.\n */\nvar toString = Object.prototype.toString;\n\n/**\n * Get the keys of an Object\n *\n * @param {Object}\n *        The Object to get the keys from\n *\n * @return {string[]}\n *         An array of the keys from the object. Returns an empty array if the\n *         object passed in was invalid or had no keys.\n *\n * @private\n */\nvar keys = function keys(object) {\n  return isObject(object) ? Object.keys(object) : [];\n};\n\n/**\n * Array-like iteration for objects.\n *\n * @param {Object} object\n *        The object to iterate over\n *\n * @param {obj:EachCallback} fn\n *        The callback function which is called for each key in the object.\n */\nfunction each(object, fn) {\n  keys(object).forEach(function (key) {\n    return fn(object[key], key);\n  });\n}\n\n/**\n * Array-like reduce for objects.\n *\n * @param {Object} object\n *        The Object that you want to reduce.\n *\n * @param {Function} fn\n *         A callback function which is called for each key in the object. It\n *         receives the accumulated value and the per-iteration value and key\n *         as arguments.\n *\n * @param {Mixed} [initial = 0]\n *        Starting value\n *\n * @return {Mixed}\n *         The final accumulated value.\n */\nfunction reduce(object, fn) {\n  var initial = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  return keys(object).reduce(function (accum, key) {\n    return fn(accum, object[key], key);\n  }, initial);\n}\n\n/**\n * Object.assign-style object shallow merge/extend.\n *\n * @param  {Object} target\n * @param  {Object} ...sources\n * @return {Object}\n */\nfunction assign(target) {\n  for (var _len = arguments.length, sources = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    sources[_key - 1] = arguments[_key];\n  }\n\n  if (Object.assign) {\n    return Object.assign.apply(Object, [target].concat(sources));\n  }\n\n  sources.forEach(function (source) {\n    if (!source) {\n      return;\n    }\n\n    each(source, function (value, key) {\n      target[key] = value;\n    });\n  });\n\n  return target;\n}\n\n/**\n * Returns whether a value is an object of any kind - including DOM nodes,\n * arrays, regular expressions, etc. Not functions, though.\n *\n * This avoids the gotcha where using `typeof` on a `null` value\n * results in `'object'`.\n *\n * @param  {Object} value\n * @return {Boolean}\n */\nfunction isObject(value) {\n  return !!value && (typeof value === 'undefined' ? 'undefined' : _typeof(value)) === 'object';\n}\n\n/**\n * Returns whether an object appears to be a \"plain\" object - that is, a\n * direct instance of `Object`.\n *\n * @param  {Object} value\n * @return {Boolean}\n */\nfunction isPlain(value) {\n  return isObject(value) && toString.call(value) === '[object Object]' && value.constructor === Object;\n}\n\n/**\n * @file log.js\n * @module log\n */\nvar log = void 0;\n\n// This is the private tracking variable for logging level.\nvar level = 'info';\n\n// This is the private tracking variable for the logging history.\nvar history = [];\n\n/**\n * Log messages to the console and history based on the type of message\n *\n * @private\n * @param  {string} type\n *         The name of the console method to use.\n *\n * @param  {Array} args\n *         The arguments to be passed to the matching console method.\n *\n * @param  {boolean} [stringify]\n *         By default, only old IEs should get console argument stringification,\n *         but this is exposed as a parameter to facilitate testing.\n */\nvar logByType = function logByType(type, args) {\n  var stringify = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !!IE_VERSION && IE_VERSION < 11;\n\n  var lvl = log.levels[level];\n  var lvlRegExp = new RegExp('^(' + lvl + ')$');\n\n  if (type !== 'log') {\n\n    // Add the type to the front of the message when it's not \"log\".\n    args.unshift(type.toUpperCase() + ':');\n  }\n\n  // Add a clone of the args at this point to history.\n  if (history) {\n    history.push([].concat(args));\n  }\n\n  // Add console prefix after adding to history.\n  args.unshift('VIDEOJS:');\n\n  // If there's no console then don't try to output messages, but they will\n  // still be stored in history.\n  if (!window.console) {\n    return;\n  }\n\n  // Was setting these once outside of this function, but containing them\n  // in the function makes it easier to test cases where console doesn't exist\n  // when the module is executed.\n  var fn = window.console[type];\n\n  if (!fn && type === 'debug') {\n    // Certain browsers don't have support for console.debug. For those, we\n    // should default to the closest comparable log.\n    fn = window.console.info || window.console.log;\n  }\n\n  // Bail out if there's no console or if this type is not allowed by the\n  // current logging level.\n  if (!fn || !lvl || !lvlRegExp.test(type)) {\n    return;\n  }\n\n  // IEs previous to 11 log objects uselessly as \"[object Object]\"; so, JSONify\n  // objects and arrays for those less-capable browsers.\n  if (stringify) {\n    args = args.map(function (a) {\n      if (isObject(a) || Array.isArray(a)) {\n        try {\n          return JSON.stringify(a);\n        } catch (x) {\n          return String(a);\n        }\n      }\n\n      // Cast to string before joining, so we get null and undefined explicitly\n      // included in output (as we would in a modern console).\n      return String(a);\n    }).join(' ');\n  }\n\n  // Old IE versions do not allow .apply() for console methods (they are\n  // reported as objects rather than functions).\n  if (!fn.apply) {\n    fn(args);\n  } else {\n    fn[Array.isArray(args) ? 'apply' : 'call'](window.console, args);\n  }\n};\n\n/**\n * Logs plain debug messages. Similar to `console.log`.\n *\n * @class\n * @param    {Mixed[]} args\n *           One or more messages or objects that should be logged.\n */\nlog = function log() {\n  for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  logByType('log', args);\n};\n\n/**\n * Enumeration of available logging levels, where the keys are the level names\n * and the values are `|`-separated strings containing logging methods allowed\n * in that logging level. These strings are used to create a regular expression\n * matching the function name being called.\n *\n * Levels provided by video.js are:\n *\n * - `off`: Matches no calls. Any value that can be cast to `false` will have\n *   this effect. The most restrictive.\n * - `all`: Matches only Video.js-provided functions (`debug`, `log`,\n *   `log.warn`, and `log.error`).\n * - `debug`: Matches `log.debug`, `log`, `log.warn`, and `log.error` calls.\n * - `info` (default): Matches `log`, `log.warn`, and `log.error` calls.\n * - `warn`: Matches `log.warn` and `log.error` calls.\n * - `error`: Matches only `log.error` calls.\n *\n * @type {Object}\n */\nlog.levels = {\n  all: 'debug|log|warn|error',\n  off: '',\n  debug: 'debug|log|warn|error',\n  info: 'log|warn|error',\n  warn: 'warn|error',\n  error: 'error',\n  DEFAULT: level\n};\n\n/**\n * Get or set the current logging level. If a string matching a key from\n * {@link log.levels} is provided, acts as a setter. Regardless of argument,\n * returns the current logging level.\n *\n * @param  {string} [lvl]\n *         Pass to set a new logging level.\n *\n * @return {string}\n *         The current logging level.\n */\nlog.level = function (lvl) {\n  if (typeof lvl === 'string') {\n    if (!log.levels.hasOwnProperty(lvl)) {\n      throw new Error('\"' + lvl + '\" in not a valid log level');\n    }\n    level = lvl;\n  }\n  return level;\n};\n\n/**\n * Returns an array containing everything that has been logged to the history.\n *\n * This array is a shallow clone of the internal history record. However, its\n * contents are _not_ cloned; so, mutating objects inside this array will\n * mutate them in history.\n *\n * @return {Array}\n */\nlog.history = function () {\n  return history ? [].concat(history) : [];\n};\n\n/**\n * Clears the internal history tracking, but does not prevent further history\n * tracking.\n */\nlog.history.clear = function () {\n  if (history) {\n    history.length = 0;\n  }\n};\n\n/**\n * Disable history tracking if it is currently enabled.\n */\nlog.history.disable = function () {\n  if (history !== null) {\n    history.length = 0;\n    history = null;\n  }\n};\n\n/**\n * Enable history tracking if it is currently disabled.\n */\nlog.history.enable = function () {\n  if (history === null) {\n    history = [];\n  }\n};\n\n/**\n * Logs error messages. Similar to `console.error`.\n *\n * @param {Mixed[]} args\n *        One or more messages or objects that should be logged as an error\n */\nlog.error = function () {\n  for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    args[_key2] = arguments[_key2];\n  }\n\n  return logByType('error', args);\n};\n\n/**\n * Logs warning messages. Similar to `console.warn`.\n *\n * @param {Mixed[]} args\n *        One or more messages or objects that should be logged as a warning.\n */\nlog.warn = function () {\n  for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    args[_key3] = arguments[_key3];\n  }\n\n  return logByType('warn', args);\n};\n\n/**\n * Logs debug messages. Similar to `console.debug`, but may also act as a comparable\n * log if `console.debug` is not available\n *\n * @param {Mixed[]} args\n *        One or more messages or objects that should be logged as debug.\n */\nlog.debug = function () {\n  for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n    args[_key4] = arguments[_key4];\n  }\n\n  return logByType('debug', args);\n};\n\nvar log$1 = log;\n\n/**\n * @file computed-style.js\n * @module computed-style\n */\n/**\n * A safe getComputedStyle with an IE8 fallback.\n *\n * This is needed because in Firefox, if the player is loaded in an iframe with\n * `display:none`, then `getComputedStyle` returns `null`, so, we do a null-check to\n * make sure  that the player doesn't break in these cases.\n *\n * @param {Element} el\n *        The element you want the computed style of\n *\n * @param {string} prop\n *        The property name you want\n *\n * @see https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n *\n * @static\n * @const\n */\nfunction computedStyle(el, prop) {\n  if (!el || !prop) {\n    return '';\n  }\n\n  if (typeof window.getComputedStyle === 'function') {\n    var cs = window.getComputedStyle(el);\n\n    return cs ? cs[prop] : '';\n  }\n\n  return el.currentStyle[prop] || '';\n}\n\nvar _templateObject = taggedTemplateLiteralLoose(['Setting attributes in the second argument of createEl()\\n                has been deprecated. Use the third argument instead.\\n                createEl(type, properties, attributes). Attempting to set ', ' to ', '.'], ['Setting attributes in the second argument of createEl()\\n                has been deprecated. Use the third argument instead.\\n                createEl(type, properties, attributes). Attempting to set ', ' to ', '.']);\n\n/**\n * @file dom.js\n * @module dom\n */\n/**\n * Detect if a value is a string with any non-whitespace characters.\n *\n * @param {string} str\n *        The string to check\n *\n * @return {boolean}\n *         - True if the string is non-blank\n *         - False otherwise\n *\n */\nfunction isNonBlankString(str) {\n  return typeof str === 'string' && /\\S/.test(str);\n}\n\n/**\n * Throws an error if the passed string has whitespace. This is used by\n * class methods to be relatively consistent with the classList API.\n *\n * @param {string} str\n *         The string to check for whitespace.\n *\n * @throws {Error}\n *         Throws an error if there is whitespace in the string.\n *\n */\nfunction throwIfWhitespace(str) {\n  if (/\\s/.test(str)) {\n    throw new Error('class has illegal whitespace characters');\n  }\n}\n\n/**\n * Produce a regular expression for matching a className within an elements className.\n *\n * @param {string} className\n *         The className to generate the RegExp for.\n *\n * @return {RegExp}\n *         The RegExp that will check for a specific `className` in an elements\n *         className.\n */\nfunction classRegExp(className) {\n  return new RegExp('(^|\\\\s)' + className + '($|\\\\s)');\n}\n\n/**\n * Whether the current DOM interface appears to be real.\n *\n * @return {Boolean}\n */\nfunction isReal() {\n  return (\n\n    // Both document and window will never be undefined thanks to `global`.\n    document === window.document &&\n\n    // In IE < 9, DOM methods return \"object\" as their type, so all we can\n    // confidently check is that it exists.\n    typeof document.createElement !== 'undefined'\n  );\n}\n\n/**\n * Determines, via duck typing, whether or not a value is a DOM element.\n *\n * @param {Mixed} value\n *        The thing to check\n *\n * @return {boolean}\n *         - True if it is a DOM element\n *         - False otherwise\n */\nfunction isEl(value) {\n  return isObject(value) && value.nodeType === 1;\n}\n\n/**\n * Determines if the current DOM is embedded in an iframe.\n *\n * @return {boolean}\n *\n */\nfunction isInFrame() {\n\n  // We need a try/catch here because Safari will throw errors when attempting\n  // to get either `parent` or `self`\n  try {\n    return window.parent !== window.self;\n  } catch (x) {\n    return true;\n  }\n}\n\n/**\n * Creates functions to query the DOM using a given method.\n *\n * @param {string} method\n *         The method to create the query with.\n *\n * @return {Function}\n *         The query method\n */\nfunction createQuerier(method) {\n  return function (selector, context) {\n    if (!isNonBlankString(selector)) {\n      return document[method](null);\n    }\n    if (isNonBlankString(context)) {\n      context = document.querySelector(context);\n    }\n\n    var ctx = isEl(context) ? context : document;\n\n    return ctx[method] && ctx[method](selector);\n  };\n}\n\n/**\n * Creates an element and applies properties.\n *\n * @param {string} [tagName='div']\n *         Name of tag to be created.\n *\n * @param {Object} [properties={}]\n *         Element properties to be applied.\n *\n * @param {Object} [attributes={}]\n *         Element attributes to be applied.\n *\n * @param {String|Element|TextNode|Array|Function} [content]\n *         Contents for the element (see: {@link dom:normalizeContent})\n *\n * @return {Element}\n *         The element that was created.\n */\nfunction createEl() {\n  var tagName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'div';\n  var properties = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var content = arguments[3];\n\n  var el = document.createElement(tagName);\n\n  Object.getOwnPropertyNames(properties).forEach(function (propName) {\n    var val = properties[propName];\n\n    // See #2176\n    // We originally were accepting both properties and attributes in the\n    // same object, but that doesn't work so well.\n    if (propName.indexOf('aria-') !== -1 || propName === 'role' || propName === 'type') {\n      log$1.warn(tsml(_templateObject, propName, val));\n      el.setAttribute(propName, val);\n\n      // Handle textContent since it's not supported everywhere and we have a\n      // method for it.\n    } else if (propName === 'textContent') {\n      textContent(el, val);\n    } else {\n      el[propName] = val;\n    }\n  });\n\n  Object.getOwnPropertyNames(attributes).forEach(function (attrName) {\n    el.setAttribute(attrName, attributes[attrName]);\n  });\n\n  if (content) {\n    appendContent(el, content);\n  }\n\n  return el;\n}\n\n/**\n * Injects text into an element, replacing any existing contents entirely.\n *\n * @param {Element} el\n *        The element to add text content into\n *\n * @param {string} text\n *        The text content to add.\n *\n * @return {Element}\n *         The element with added text content.\n */\nfunction textContent(el, text) {\n  if (typeof el.textContent === 'undefined') {\n    el.innerText = text;\n  } else {\n    el.textContent = text;\n  }\n  return el;\n}\n\n/**\n * Insert an element as the first child node of another\n *\n * @param {Element} child\n *        Element to insert\n *\n * @param {Element} parent\n *        Element to insert child into\n */\nfunction prependTo(child, parent) {\n  if (parent.firstChild) {\n    parent.insertBefore(child, parent.firstChild);\n  } else {\n    parent.appendChild(child);\n  }\n}\n\n/**\n * Check if an element has a CSS class\n *\n * @param {Element} element\n *        Element to check\n *\n * @param {string} classToCheck\n *        Class name to check for\n *\n * @return {boolean}\n *         - True if the element had the class\n *         - False otherwise.\n *\n * @throws {Error}\n *         Throws an error if `classToCheck` has white space.\n */\nfunction hasClass(element, classToCheck) {\n  throwIfWhitespace(classToCheck);\n  if (element.classList) {\n    return element.classList.contains(classToCheck);\n  }\n  return classRegExp(classToCheck).test(element.className);\n}\n\n/**\n * Add a CSS class name to an element\n *\n * @param {Element} element\n *        Element to add class name to.\n *\n * @param {string} classToAdd\n *        Class name to add.\n *\n * @return {Element}\n *         The dom element with the added class name.\n */\nfunction addClass(element, classToAdd) {\n  if (element.classList) {\n    element.classList.add(classToAdd);\n\n    // Don't need to `throwIfWhitespace` here because `hasElClass` will do it\n    // in the case of classList not being supported.\n  } else if (!hasClass(element, classToAdd)) {\n    element.className = (element.className + ' ' + classToAdd).trim();\n  }\n\n  return element;\n}\n\n/**\n * Remove a CSS class name from an element\n *\n * @param {Element} element\n *        Element to remove a class name from.\n *\n * @param {string} classToRemove\n *        Class name to remove\n *\n * @return {Element}\n *         The dom element with class name removed.\n */\nfunction removeClass(element, classToRemove) {\n  if (element.classList) {\n    element.classList.remove(classToRemove);\n  } else {\n    throwIfWhitespace(classToRemove);\n    element.className = element.className.split(/\\s+/).filter(function (c) {\n      return c !== classToRemove;\n    }).join(' ');\n  }\n\n  return element;\n}\n\n/**\n * The callback definition for toggleElClass.\n *\n * @callback Dom~PredicateCallback\n * @param {Element} element\n *        The DOM element of the Component.\n *\n * @param {string} classToToggle\n *        The `className` that wants to be toggled\n *\n * @return {boolean|undefined}\n *         - If true the `classToToggle` will get added to `element`.\n *         - If false the `classToToggle` will get removed from `element`.\n *         - If undefined this callback will be ignored\n */\n\n/**\n * Adds or removes a CSS class name on an element depending on an optional\n * condition or the presence/absence of the class name.\n *\n * @param {Element} element\n *        The element to toggle a class name on.\n *\n * @param {string} classToToggle\n *        The class that should be toggled\n *\n * @param {boolean|PredicateCallback} [predicate]\n *        See the return value for {@link Dom~PredicateCallback}\n *\n * @return {Element}\n *         The element with a class that has been toggled.\n */\nfunction toggleClass(element, classToToggle, predicate) {\n\n  // This CANNOT use `classList` internally because IE does not support the\n  // second parameter to the `classList.toggle()` method! Which is fine because\n  // `classList` will be used by the add/remove functions.\n  var has = hasClass(element, classToToggle);\n\n  if (typeof predicate === 'function') {\n    predicate = predicate(element, classToToggle);\n  }\n\n  if (typeof predicate !== 'boolean') {\n    predicate = !has;\n  }\n\n  // If the necessary class operation matches the current state of the\n  // element, no action is required.\n  if (predicate === has) {\n    return;\n  }\n\n  if (predicate) {\n    addClass(element, classToToggle);\n  } else {\n    removeClass(element, classToToggle);\n  }\n\n  return element;\n}\n\n/**\n * Apply attributes to an HTML element.\n *\n * @param {Element} el\n *        Element to add attributes to.\n *\n * @param {Object} [attributes]\n *        Attributes to be applied.\n */\nfunction setAttributes(el, attributes) {\n  Object.getOwnPropertyNames(attributes).forEach(function (attrName) {\n    var attrValue = attributes[attrName];\n\n    if (attrValue === null || typeof attrValue === 'undefined' || attrValue === false) {\n      el.removeAttribute(attrName);\n    } else {\n      el.setAttribute(attrName, attrValue === true ? '' : attrValue);\n    }\n  });\n}\n\n/**\n * Get an element's attribute values, as defined on the HTML tag\n * Attributes are not the same as properties. They're defined on the tag\n * or with setAttribute (which shouldn't be used with HTML)\n * This will return true or false for boolean attributes.\n *\n * @param {Element} tag\n *        Element from which to get tag attributes.\n *\n * @return {Object}\n *         All attributes of the element.\n */\nfunction getAttributes(tag) {\n  var obj = {};\n\n  // known boolean attributes\n  // we can check for matching boolean properties, but older browsers\n  // won't know about HTML5 boolean attributes that we still read from\n  var knownBooleans = ',' + 'autoplay,controls,playsinline,loop,muted,default,defaultMuted' + ',';\n\n  if (tag && tag.attributes && tag.attributes.length > 0) {\n    var attrs = tag.attributes;\n\n    for (var i = attrs.length - 1; i >= 0; i--) {\n      var attrName = attrs[i].name;\n      var attrVal = attrs[i].value;\n\n      // check for known booleans\n      // the matching element property will return a value for typeof\n      if (typeof tag[attrName] === 'boolean' || knownBooleans.indexOf(',' + attrName + ',') !== -1) {\n        // the value of an included boolean attribute is typically an empty\n        // string ('') which would equal false if we just check for a false value.\n        // we also don't want support bad code like autoplay='false'\n        attrVal = attrVal !== null ? true : false;\n      }\n\n      obj[attrName] = attrVal;\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Get the value of an element's attribute\n *\n * @param {Element} el\n *        A DOM element\n *\n * @param {string} attribute\n *        Attribute to get the value of\n *\n * @return {string}\n *         value of the attribute\n */\nfunction getAttribute(el, attribute) {\n  return el.getAttribute(attribute);\n}\n\n/**\n * Set the value of an element's attribute\n *\n * @param {Element} el\n *        A DOM element\n *\n * @param {string} attribute\n *        Attribute to set\n *\n * @param {string} value\n *        Value to set the attribute to\n */\nfunction setAttribute(el, attribute, value) {\n  el.setAttribute(attribute, value);\n}\n\n/**\n * Remove an element's attribute\n *\n * @param {Element} el\n *        A DOM element\n *\n * @param {string} attribute\n *        Attribute to remove\n */\nfunction removeAttribute(el, attribute) {\n  el.removeAttribute(attribute);\n}\n\n/**\n * Attempt to block the ability to select text while dragging controls\n */\nfunction blockTextSelection() {\n  document.body.focus();\n  document.onselectstart = function () {\n    return false;\n  };\n}\n\n/**\n * Turn off text selection blocking\n */\nfunction unblockTextSelection() {\n  document.onselectstart = function () {\n    return true;\n  };\n}\n\n/**\n * Identical to the native `getBoundingClientRect` function, but ensures that\n * the method is supported at all (it is in all browsers we claim to support)\n * and that the element is in the DOM before continuing.\n *\n * This wrapper function also shims properties which are not provided by some\n * older browsers (namely, IE8).\n *\n * Additionally, some browsers do not support adding properties to a\n * `ClientRect`/`DOMRect` object; so, we shallow-copy it with the standard\n * properties (except `x` and `y` which are not widely supported). This helps\n * avoid implementations where keys are non-enumerable.\n *\n * @param  {Element} el\n *         Element whose `ClientRect` we want to calculate.\n *\n * @return {Object|undefined}\n *         Always returns a plain\n */\nfunction getBoundingClientRect(el) {\n  if (el && el.getBoundingClientRect && el.parentNode) {\n    var rect = el.getBoundingClientRect();\n    var result = {};\n\n    ['bottom', 'height', 'left', 'right', 'top', 'width'].forEach(function (k) {\n      if (rect[k] !== undefined) {\n        result[k] = rect[k];\n      }\n    });\n\n    if (!result.height) {\n      result.height = parseFloat(computedStyle(el, 'height'));\n    }\n\n    if (!result.width) {\n      result.width = parseFloat(computedStyle(el, 'width'));\n    }\n\n    return result;\n  }\n}\n\n/**\n * The postion of a DOM element on the page.\n *\n * @typedef {Object} module:dom~Position\n *\n * @property {number} left\n *           Pixels to the left\n *\n * @property {number} top\n *           Pixels on top\n */\n\n/**\n * Offset Left.\n * getBoundingClientRect technique from\n * John Resig\n *\n * @see http://ejohn.org/blog/getboundingclientrect-is-awesome/\n *\n * @param {Element} el\n *        Element from which to get offset\n *\n * @return {module:dom~Position}\n *         The position of the element that was passed in.\n */\nfunction findPosition(el) {\n  var box = void 0;\n\n  if (el.getBoundingClientRect && el.parentNode) {\n    box = el.getBoundingClientRect();\n  }\n\n  if (!box) {\n    return {\n      left: 0,\n      top: 0\n    };\n  }\n\n  var docEl = document.documentElement;\n  var body = document.body;\n\n  var clientLeft = docEl.clientLeft || body.clientLeft || 0;\n  var scrollLeft = window.pageXOffset || body.scrollLeft;\n  var left = box.left + scrollLeft - clientLeft;\n\n  var clientTop = docEl.clientTop || body.clientTop || 0;\n  var scrollTop = window.pageYOffset || body.scrollTop;\n  var top = box.top + scrollTop - clientTop;\n\n  // Android sometimes returns slightly off decimal values, so need to round\n  return {\n    left: Math.round(left),\n    top: Math.round(top)\n  };\n}\n\n/**\n * x and y coordinates for a dom element or mouse pointer\n *\n * @typedef {Object} Dom~Coordinates\n *\n * @property {number} x\n *           x coordinate in pixels\n *\n * @property {number} y\n *           y coordinate in pixels\n */\n\n/**\n * Get pointer position in element\n * Returns an object with x and y coordinates.\n * The base on the coordinates are the bottom left of the element.\n *\n * @param {Element} el\n *        Element on which to get the pointer position on\n *\n * @param {EventTarget~Event} event\n *        Event object\n *\n * @return {Dom~Coordinates}\n *         A Coordinates object corresponding to the mouse position.\n *\n */\nfunction getPointerPosition(el, event) {\n  var position = {};\n  var box = findPosition(el);\n  var boxW = el.offsetWidth;\n  var boxH = el.offsetHeight;\n\n  var boxY = box.top;\n  var boxX = box.left;\n  var pageY = event.pageY;\n  var pageX = event.pageX;\n\n  if (event.changedTouches) {\n    pageX = event.changedTouches[0].pageX;\n    pageY = event.changedTouches[0].pageY;\n  }\n\n  position.y = Math.max(0, Math.min(1, (boxY - pageY + boxH) / boxH));\n  position.x = Math.max(0, Math.min(1, (pageX - boxX) / boxW));\n\n  return position;\n}\n\n/**\n * Determines, via duck typing, whether or not a value is a text node.\n *\n * @param {Mixed} value\n *        Check if this value is a text node.\n *\n * @return {boolean}\n *         - True if it is a text node\n *         - False otherwise\n */\nfunction isTextNode(value) {\n  return isObject(value) && value.nodeType === 3;\n}\n\n/**\n * Empties the contents of an element.\n *\n * @param {Element} el\n *        The element to empty children from\n *\n * @return {Element}\n *         The element with no children\n */\nfunction emptyEl(el) {\n  while (el.firstChild) {\n    el.removeChild(el.firstChild);\n  }\n  return el;\n}\n\n/**\n * Normalizes content for eventual insertion into the DOM.\n *\n * This allows a wide range of content definition methods, but protects\n * from falling into the trap of simply writing to `innerHTML`, which is\n * an XSS concern.\n *\n * The content for an element can be passed in multiple types and\n * combinations, whose behavior is as follows:\n *\n * @param {String|Element|TextNode|Array|Function} content\n *        - String: Normalized into a text node.\n *        - Element/TextNode: Passed through.\n *        - Array: A one-dimensional array of strings, elements, nodes, or functions\n *          (which return single strings, elements, or nodes).\n *        - Function: If the sole argument, is expected to produce a string, element,\n *          node, or array as defined above.\n *\n * @return {Array}\n *         All of the content that was passed in normalized.\n */\nfunction normalizeContent(content) {\n\n  // First, invoke content if it is a function. If it produces an array,\n  // that needs to happen before normalization.\n  if (typeof content === 'function') {\n    content = content();\n  }\n\n  // Next up, normalize to an array, so one or many items can be normalized,\n  // filtered, and returned.\n  return (Array.isArray(content) ? content : [content]).map(function (value) {\n\n    // First, invoke value if it is a function to produce a new value,\n    // which will be subsequently normalized to a Node of some kind.\n    if (typeof value === 'function') {\n      value = value();\n    }\n\n    if (isEl(value) || isTextNode(value)) {\n      return value;\n    }\n\n    if (typeof value === 'string' && /\\S/.test(value)) {\n      return document.createTextNode(value);\n    }\n  }).filter(function (value) {\n    return value;\n  });\n}\n\n/**\n * Normalizes and appends content to an element.\n *\n * @param {Element} el\n *        Element to append normalized content to.\n *\n *\n * @param {String|Element|TextNode|Array|Function} content\n *        See the `content` argument of {@link dom:normalizeContent}\n *\n * @return {Element}\n *         The element with appended normalized content.\n */\nfunction appendContent(el, content) {\n  normalizeContent(content).forEach(function (node) {\n    return el.appendChild(node);\n  });\n  return el;\n}\n\n/**\n * Normalizes and inserts content into an element; this is identical to\n * `appendContent()`, except it empties the element first.\n *\n * @param {Element} el\n *        Element to insert normalized content into.\n *\n * @param {String|Element|TextNode|Array|Function} content\n *        See the `content` argument of {@link dom:normalizeContent}\n *\n * @return {Element}\n *         The element with inserted normalized content.\n *\n */\nfunction insertContent(el, content) {\n  return appendContent(emptyEl(el), content);\n}\n\n/**\n * Check if event was a single left click\n *\n * @param {EventTarget~Event} event\n *        Event object\n *\n * @return {boolean}\n *         - True if a left click\n *         - False if not a left click\n */\nfunction isSingleLeftClick(event) {\n  // Note: if you create something draggable, be sure to\n  // call it on both `mousedown` and `mousemove` event,\n  // otherwise `mousedown` should be enough for a button\n\n  if (event.button === undefined && event.buttons === undefined) {\n    // Why do we need `buttons` ?\n    // Because, middle mouse sometimes have this:\n    // e.button === 0 and e.buttons === 4\n    // Furthermore, we want to prevent combination click, something like\n    // HOLD middlemouse then left click, that would be\n    // e.button === 0, e.buttons === 5\n    // just `button` is not gonna work\n\n    // Alright, then what this block does ?\n    // this is for chrome `simulate mobile devices`\n    // I want to support this as well\n\n    return true;\n  }\n\n  if (event.button === 0 && event.buttons === undefined) {\n    // Touch screen, sometimes on some specific device, `buttons`\n    // doesn't have anything (safari on ios, blackberry...)\n\n    return true;\n  }\n\n  if (IE_VERSION === 9) {\n    // Ignore IE9\n\n    return true;\n  }\n\n  if (event.button !== 0 || event.buttons !== 1) {\n    // This is the reason we have those if else block above\n    // if any special case we can catch and let it slide\n    // we do it above, when get to here, this definitely\n    // is-not-left-click\n\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Finds a single DOM element matching `selector` within the optional\n * `context` of another DOM element (defaulting to `document`).\n *\n * @param {string} selector\n *        A valid CSS selector, which will be passed to `querySelector`.\n *\n * @param {Element|String} [context=document]\n *        A DOM element within which to query. Can also be a selector\n *        string in which case the first matching element will be used\n *        as context. If missing (or no element matches selector), falls\n *        back to `document`.\n *\n * @return {Element|null}\n *         The element that was found or null.\n */\nvar $ = createQuerier('querySelector');\n\n/**\n * Finds a all DOM elements matching `selector` within the optional\n * `context` of another DOM element (defaulting to `document`).\n *\n * @param {string} selector\n *           A valid CSS selector, which will be passed to `querySelectorAll`.\n *\n * @param {Element|String} [context=document]\n *           A DOM element within which to query. Can also be a selector\n *           string in which case the first matching element will be used\n *           as context. If missing (or no element matches selector), falls\n *           back to `document`.\n *\n * @return {NodeList}\n *         A element list of elements that were found. Will be empty if none were found.\n *\n */\nvar $$ = createQuerier('querySelectorAll');\n\n\n\nvar Dom = (Object.freeze || Object)({\n\tisReal: isReal,\n\tisEl: isEl,\n\tisInFrame: isInFrame,\n\tcreateEl: createEl,\n\ttextContent: textContent,\n\tprependTo: prependTo,\n\thasClass: hasClass,\n\taddClass: addClass,\n\tremoveClass: removeClass,\n\ttoggleClass: toggleClass,\n\tsetAttributes: setAttributes,\n\tgetAttributes: getAttributes,\n\tgetAttribute: getAttribute,\n\tsetAttribute: setAttribute,\n\tremoveAttribute: removeAttribute,\n\tblockTextSelection: blockTextSelection,\n\tunblockTextSelection: unblockTextSelection,\n\tgetBoundingClientRect: getBoundingClientRect,\n\tfindPosition: findPosition,\n\tgetPointerPosition: getPointerPosition,\n\tisTextNode: isTextNode,\n\temptyEl: emptyEl,\n\tnormalizeContent: normalizeContent,\n\tappendContent: appendContent,\n\tinsertContent: insertContent,\n\tisSingleLeftClick: isSingleLeftClick,\n\t$: $,\n\t$$: $$\n});\n\n/**\n * @file guid.js\n * @module guid\n */\n\n/**\n * Unique ID for an element or function\n * @type {Number}\n */\nvar _guid = 1;\n\n/**\n * Get a unique auto-incrementing ID by number that has not been returned before.\n *\n * @return {number}\n *         A new unique ID.\n */\nfunction newGUID() {\n  return _guid++;\n}\n\n/**\n * @file dom-data.js\n * @module dom-data\n */\n/**\n * Element Data Store.\n *\n * Allows for binding data to an element without putting it directly on the\n * element. Ex. Event listeners are stored here.\n * (also from jsninja.com, slightly modified and updated for closure compiler)\n *\n * @type {Object}\n * @private\n */\nvar elData = {};\n\n/*\n * Unique attribute name to store an element's guid in\n *\n * @type {String}\n * @constant\n * @private\n */\nvar elIdAttr = 'vdata' + new Date().getTime();\n\n/**\n * Returns the cache object where data for an element is stored\n *\n * @param {Element} el\n *        Element to store data for.\n *\n * @return {Object}\n *         The cache object for that el that was passed in.\n */\nfunction getData(el) {\n  var id = el[elIdAttr];\n\n  if (!id) {\n    id = el[elIdAttr] = newGUID();\n  }\n\n  if (!elData[id]) {\n    elData[id] = {};\n  }\n\n  return elData[id];\n}\n\n/**\n * Returns whether or not an element has cached data\n *\n * @param {Element} el\n *        Check if this element has cached data.\n *\n * @return {boolean}\n *         - True if the DOM element has cached data.\n *         - False otherwise.\n */\nfunction hasData(el) {\n  var id = el[elIdAttr];\n\n  if (!id) {\n    return false;\n  }\n\n  return !!Object.getOwnPropertyNames(elData[id]).length;\n}\n\n/**\n * Delete data for the element from the cache and the guid attr from getElementById\n *\n * @param {Element} el\n *        Remove cached data for this element.\n */\nfunction removeData(el) {\n  var id = el[elIdAttr];\n\n  if (!id) {\n    return;\n  }\n\n  // Remove all stored data\n  delete elData[id];\n\n  // Remove the elIdAttr property from the DOM node\n  try {\n    delete el[elIdAttr];\n  } catch (e) {\n    if (el.removeAttribute) {\n      el.removeAttribute(elIdAttr);\n    } else {\n      // IE doesn't appear to support removeAttribute on the document element\n      el[elIdAttr] = null;\n    }\n  }\n}\n\n/**\n * @file events.js. An Event System (John Resig - Secrets of a JS Ninja http://jsninja.com/)\n * (Original book version wasn't completely usable, so fixed some things and made Closure Compiler compatible)\n * This should work very similarly to jQuery's events, however it's based off the book version which isn't as\n * robust as jquery's, so there's probably some differences.\n *\n * @module events\n */\n\n/**\n * Clean up the listener cache and dispatchers\n *\n * @param {Element|Object} elem\n *        Element to clean up\n *\n * @param {string} type\n *        Type of event to clean up\n */\nfunction _cleanUpEvents(elem, type) {\n  var data = getData(elem);\n\n  // Remove the events of a particular type if there are none left\n  if (data.handlers[type].length === 0) {\n    delete data.handlers[type];\n    // data.handlers[type] = null;\n    // Setting to null was causing an error with data.handlers\n\n    // Remove the meta-handler from the element\n    if (elem.removeEventListener) {\n      elem.removeEventListener(type, data.dispatcher, false);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + type, data.dispatcher);\n    }\n  }\n\n  // Remove the events object if there are no types left\n  if (Object.getOwnPropertyNames(data.handlers).length <= 0) {\n    delete data.handlers;\n    delete data.dispatcher;\n    delete data.disabled;\n  }\n\n  // Finally remove the element data if there is no data left\n  if (Object.getOwnPropertyNames(data).length === 0) {\n    removeData(elem);\n  }\n}\n\n/**\n * Loops through an array of event types and calls the requested method for each type.\n *\n * @param {Function} fn\n *        The event method we want to use.\n *\n * @param {Element|Object} elem\n *        Element or object to bind listeners to\n *\n * @param {string} type\n *        Type of event to bind to.\n *\n * @param {EventTarget~EventListener} callback\n *        Event listener.\n */\nfunction _handleMultipleEvents(fn, elem, types, callback) {\n  types.forEach(function (type) {\n    // Call the event method for each one of the types\n    fn(elem, type, callback);\n  });\n}\n\n/**\n * Fix a native event to have standard property values\n *\n * @param {Object} event\n *        Event object to fix.\n *\n * @return {Object}\n *         Fixed event object.\n */\nfunction fixEvent(event) {\n\n  function returnTrue() {\n    return true;\n  }\n\n  function returnFalse() {\n    return false;\n  }\n\n  // Test if fixing up is needed\n  // Used to check if !event.stopPropagation instead of isPropagationStopped\n  // But native events return true for stopPropagation, but don't have\n  // other expected methods like isPropagationStopped. Seems to be a problem\n  // with the Javascript Ninja code. So we're just overriding all events now.\n  if (!event || !event.isPropagationStopped) {\n    var old = event || window.event;\n\n    event = {};\n    // Clone the old object so that we can modify the values event = {};\n    // IE8 Doesn't like when you mess with native event properties\n    // Firefox returns false for event.hasOwnProperty('type') and other props\n    //  which makes copying more difficult.\n    // TODO: Probably best to create a whitelist of event props\n    for (var key in old) {\n      // Safari 6.0.3 warns you if you try to copy deprecated layerX/Y\n      // Chrome warns you if you try to copy deprecated keyboardEvent.keyLocation\n      // and webkitMovementX/Y\n      if (key !== 'layerX' && key !== 'layerY' && key !== 'keyLocation' && key !== 'webkitMovementX' && key !== 'webkitMovementY') {\n        // Chrome 32+ warns if you try to copy deprecated returnValue, but\n        // we still want to if preventDefault isn't supported (IE8).\n        if (!(key === 'returnValue' && old.preventDefault)) {\n          event[key] = old[key];\n        }\n      }\n    }\n\n    // The event occurred on this element\n    if (!event.target) {\n      event.target = event.srcElement || document;\n    }\n\n    // Handle which other element the event is related to\n    if (!event.relatedTarget) {\n      event.relatedTarget = event.fromElement === event.target ? event.toElement : event.fromElement;\n    }\n\n    // Stop the default browser action\n    event.preventDefault = function () {\n      if (old.preventDefault) {\n        old.preventDefault();\n      }\n      event.returnValue = false;\n      old.returnValue = false;\n      event.defaultPrevented = true;\n    };\n\n    event.defaultPrevented = false;\n\n    // Stop the event from bubbling\n    event.stopPropagation = function () {\n      if (old.stopPropagation) {\n        old.stopPropagation();\n      }\n      event.cancelBubble = true;\n      old.cancelBubble = true;\n      event.isPropagationStopped = returnTrue;\n    };\n\n    event.isPropagationStopped = returnFalse;\n\n    // Stop the event from bubbling and executing other handlers\n    event.stopImmediatePropagation = function () {\n      if (old.stopImmediatePropagation) {\n        old.stopImmediatePropagation();\n      }\n      event.isImmediatePropagationStopped = returnTrue;\n      event.stopPropagation();\n    };\n\n    event.isImmediatePropagationStopped = returnFalse;\n\n    // Handle mouse position\n    if (event.clientX !== null && event.clientX !== undefined) {\n      var doc = document.documentElement;\n      var body = document.body;\n\n      event.pageX = event.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n      event.pageY = event.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n    }\n\n    // Handle key presses\n    event.which = event.charCode || event.keyCode;\n\n    // Fix button for mouse clicks:\n    // 0 == left; 1 == middle; 2 == right\n    if (event.button !== null && event.button !== undefined) {\n\n      // The following is disabled because it does not pass videojs-standard\n      // and... yikes.\n      /* eslint-disable */\n      event.button = event.button & 1 ? 0 : event.button & 4 ? 1 : event.button & 2 ? 2 : 0;\n      /* eslint-enable */\n    }\n  }\n\n  // Returns fixed-up instance\n  return event;\n}\n\n/**\n * Whether passive event listeners are supported\n */\nvar _supportsPassive = false;\n\n(function () {\n  try {\n    var opts = Object.defineProperty({}, 'passive', {\n      get: function get() {\n        _supportsPassive = true;\n      }\n    });\n\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {\n    // disregard\n  }\n})();\n\n/**\n * Touch events Chrome expects to be passive\n */\nvar passiveEvents = ['touchstart', 'touchmove'];\n\n/**\n * Add an event listener to element\n * It stores the handler function in a separate cache object\n * and adds a generic handler to the element's event,\n * along with a unique id (guid) to the element.\n *\n * @param {Element|Object} elem\n *        Element or object to bind listeners to\n *\n * @param {string|string[]} type\n *        Type of event to bind to.\n *\n * @param {EventTarget~EventListener} fn\n *        Event listener.\n */\nfunction on(elem, type, fn) {\n  if (Array.isArray(type)) {\n    return _handleMultipleEvents(on, elem, type, fn);\n  }\n\n  var data = getData(elem);\n\n  // We need a place to store all our handler data\n  if (!data.handlers) {\n    data.handlers = {};\n  }\n\n  if (!data.handlers[type]) {\n    data.handlers[type] = [];\n  }\n\n  if (!fn.guid) {\n    fn.guid = newGUID();\n  }\n\n  data.handlers[type].push(fn);\n\n  if (!data.dispatcher) {\n    data.disabled = false;\n\n    data.dispatcher = function (event, hash) {\n\n      if (data.disabled) {\n        return;\n      }\n\n      event = fixEvent(event);\n\n      var handlers = data.handlers[event.type];\n\n      if (handlers) {\n        // Copy handlers so if handlers are added/removed during the process it doesn't throw everything off.\n        var handlersCopy = handlers.slice(0);\n\n        for (var m = 0, n = handlersCopy.length; m < n; m++) {\n          if (event.isImmediatePropagationStopped()) {\n            break;\n          } else {\n            try {\n              handlersCopy[m].call(elem, event, hash);\n            } catch (e) {\n              log$1.error(e);\n            }\n          }\n        }\n      }\n    };\n  }\n\n  if (data.handlers[type].length === 1) {\n    if (elem.addEventListener) {\n      var options = false;\n\n      if (_supportsPassive && passiveEvents.indexOf(type) > -1) {\n        options = { passive: true };\n      }\n      elem.addEventListener(type, data.dispatcher, options);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + type, data.dispatcher);\n    }\n  }\n}\n\n/**\n * Removes event listeners from an element\n *\n * @param {Element|Object} elem\n *        Object to remove listeners from.\n *\n * @param {string|string[]} [type]\n *        Type of listener to remove. Don't include to remove all events from element.\n *\n * @param {EventTarget~EventListener} [fn]\n *        Specific listener to remove. Don't include to remove listeners for an event\n *        type.\n */\nfunction off(elem, type, fn) {\n  // Don't want to add a cache object through getElData if not needed\n  if (!hasData(elem)) {\n    return;\n  }\n\n  var data = getData(elem);\n\n  // If no events exist, nothing to unbind\n  if (!data.handlers) {\n    return;\n  }\n\n  if (Array.isArray(type)) {\n    return _handleMultipleEvents(off, elem, type, fn);\n  }\n\n  // Utility function\n  var removeType = function removeType(el, t) {\n    data.handlers[t] = [];\n    _cleanUpEvents(el, t);\n  };\n\n  // Are we removing all bound events?\n  if (type === undefined) {\n    for (var t in data.handlers) {\n      if (Object.prototype.hasOwnProperty.call(data.handlers || {}, t)) {\n        removeType(elem, t);\n      }\n    }\n    return;\n  }\n\n  var handlers = data.handlers[type];\n\n  // If no handlers exist, nothing to unbind\n  if (!handlers) {\n    return;\n  }\n\n  // If no listener was provided, remove all listeners for type\n  if (!fn) {\n    removeType(elem, type);\n    return;\n  }\n\n  // We're only removing a single handler\n  if (fn.guid) {\n    for (var n = 0; n < handlers.length; n++) {\n      if (handlers[n].guid === fn.guid) {\n        handlers.splice(n--, 1);\n      }\n    }\n  }\n\n  _cleanUpEvents(elem, type);\n}\n\n/**\n * Trigger an event for an element\n *\n * @param {Element|Object} elem\n *        Element to trigger an event on\n *\n * @param {EventTarget~Event|string} event\n *        A string (the type) or an event object with a type attribute\n *\n * @param {Object} [hash]\n *        data hash to pass along with the event\n *\n * @return {boolean|undefined}\n *         - Returns the opposite of `defaultPrevented` if default was prevented\n *         - Otherwise returns undefined\n */\nfunction trigger(elem, event, hash) {\n  // Fetches element data and a reference to the parent (for bubbling).\n  // Don't want to add a data object to cache for every parent,\n  // so checking hasElData first.\n  var elemData = hasData(elem) ? getData(elem) : {};\n  var parent = elem.parentNode || elem.ownerDocument;\n  // type = event.type || event,\n  // handler;\n\n  // If an event name was passed as a string, creates an event out of it\n  if (typeof event === 'string') {\n    event = { type: event, target: elem };\n  } else if (!event.target) {\n    event.target = elem;\n  }\n\n  // Normalizes the event properties.\n  event = fixEvent(event);\n\n  // If the passed element has a dispatcher, executes the established handlers.\n  if (elemData.dispatcher) {\n    elemData.dispatcher.call(elem, event, hash);\n  }\n\n  // Unless explicitly stopped or the event does not bubble (e.g. media events)\n  // recursively calls this function to bubble the event up the DOM.\n  if (parent && !event.isPropagationStopped() && event.bubbles === true) {\n    trigger.call(null, parent, event, hash);\n\n    // If at the top of the DOM, triggers the default action unless disabled.\n  } else if (!parent && !event.defaultPrevented) {\n    var targetData = getData(event.target);\n\n    // Checks if the target has a default action for this event.\n    if (event.target[event.type]) {\n      // Temporarily disables event dispatching on the target as we have already executed the handler.\n      targetData.disabled = true;\n      // Executes the default action.\n      if (typeof event.target[event.type] === 'function') {\n        event.target[event.type]();\n      }\n      // Re-enables event dispatching.\n      targetData.disabled = false;\n    }\n  }\n\n  // Inform the triggerer if the default was prevented by returning false\n  return !event.defaultPrevented;\n}\n\n/**\n * Trigger a listener only once for an event\n *\n * @param {Element|Object} elem\n *        Element or object to bind to.\n *\n * @param {string|string[]} type\n *        Name/type of event\n *\n * @param {Event~EventListener} fn\n *        Event Listener function\n */\nfunction one(elem, type, fn) {\n  if (Array.isArray(type)) {\n    return _handleMultipleEvents(one, elem, type, fn);\n  }\n  var func = function func() {\n    off(elem, type, func);\n    fn.apply(this, arguments);\n  };\n\n  // copy the guid to the new function so it can removed using the original function's ID\n  func.guid = fn.guid = fn.guid || newGUID();\n  on(elem, type, func);\n}\n\nvar Events = (Object.freeze || Object)({\n\tfixEvent: fixEvent,\n\ton: on,\n\toff: off,\n\ttrigger: trigger,\n\tone: one\n});\n\n/**\n * @file setup.js - Functions for setting up a player without\n * user interaction based on the data-setup `attribute` of the video tag.\n *\n * @module setup\n */\nvar _windowLoaded = false;\nvar videojs$2 = void 0;\n\n/**\n * Set up any tags that have a data-setup `attribute` when the player is started.\n */\nvar autoSetup = function autoSetup() {\n\n  // Protect against breakage in non-browser environments and check global autoSetup option.\n  if (!isReal() || videojs$2.options.autoSetup === false) {\n    return;\n  }\n\n  // One day, when we stop supporting IE8, go back to this, but in the meantime...*hack hack hack*\n  // var vids = Array.prototype.slice.call(document.getElementsByTagName('video'));\n  // var audios = Array.prototype.slice.call(document.getElementsByTagName('audio'));\n  // var mediaEls = vids.concat(audios);\n\n  // Because IE8 doesn't support calling slice on a node list, we need to loop\n  // through each list of elements to build up a new, combined list of elements.\n  var vids = document.getElementsByTagName('video');\n  var audios = document.getElementsByTagName('audio');\n  var divs = document.getElementsByTagName('video-js');\n  var mediaEls = [];\n\n  if (vids && vids.length > 0) {\n    for (var i = 0, e = vids.length; i < e; i++) {\n      mediaEls.push(vids[i]);\n    }\n  }\n\n  if (audios && audios.length > 0) {\n    for (var _i = 0, _e = audios.length; _i < _e; _i++) {\n      mediaEls.push(audios[_i]);\n    }\n  }\n\n  if (divs && divs.length > 0) {\n    for (var _i2 = 0, _e2 = divs.length; _i2 < _e2; _i2++) {\n      mediaEls.push(divs[_i2]);\n    }\n  }\n\n  // Check if any media elements exist\n  if (mediaEls && mediaEls.length > 0) {\n\n    for (var _i3 = 0, _e3 = mediaEls.length; _i3 < _e3; _i3++) {\n      var mediaEl = mediaEls[_i3];\n\n      // Check if element exists, has getAttribute func.\n      // IE seems to consider typeof el.getAttribute == 'object' instead of\n      // 'function' like expected, at least when loading the player immediately.\n      if (mediaEl && mediaEl.getAttribute) {\n\n        // Make sure this player hasn't already been set up.\n        if (mediaEl.player === undefined) {\n          var options = mediaEl.getAttribute('data-setup');\n\n          // Check if data-setup attr exists.\n          // We only auto-setup if they've added the data-setup attr.\n          if (options !== null) {\n            // Create new video.js instance.\n            videojs$2(mediaEl);\n          }\n        }\n\n        // If getAttribute isn't defined, we need to wait for the DOM.\n      } else {\n        autoSetupTimeout(1);\n        break;\n      }\n    }\n\n    // No videos were found, so keep looping unless page is finished loading.\n  } else if (!_windowLoaded) {\n    autoSetupTimeout(1);\n  }\n};\n\n/**\n * Wait until the page is loaded before running autoSetup. This will be called in\n * autoSetup if `hasLoaded` returns false.\n *\n * @param {number} wait\n *        How long to wait in ms\n *\n * @param {module:videojs} [vjs]\n *        The videojs library function\n */\nfunction autoSetupTimeout(wait, vjs) {\n  if (vjs) {\n    videojs$2 = vjs;\n  }\n\n  window.setTimeout(autoSetup, wait);\n}\n\nif (isReal() && document.readyState === 'complete') {\n  _windowLoaded = true;\n} else {\n  /**\n   * Listen for the load event on window, and set _windowLoaded to true.\n   *\n   * @listens load\n   */\n  one(window, 'load', function () {\n    _windowLoaded = true;\n  });\n}\n\n/**\n * @file stylesheet.js\n * @module stylesheet\n */\n/**\n * Create a DOM syle element given a className for it.\n *\n * @param {string} className\n *        The className to add to the created style element.\n *\n * @return {Element}\n *         The element that was created.\n */\nvar createStyleElement = function createStyleElement(className) {\n  var style = document.createElement('style');\n\n  style.className = className;\n\n  return style;\n};\n\n/**\n * Add text to a DOM element.\n *\n * @param {Element} el\n *        The Element to add text content to.\n *\n * @param {string} content\n *        The text to add to the element.\n */\nvar setTextContent = function setTextContent(el, content) {\n  if (el.styleSheet) {\n    el.styleSheet.cssText = content;\n  } else {\n    el.textContent = content;\n  }\n};\n\n/**\n * @file fn.js\n * @module fn\n */\n/**\n * Bind (a.k.a proxy or Context). A simple method for changing the context of a function\n * It also stores a unique id on the function so it can be easily removed from events.\n *\n * @param {Mixed} context\n *        The object to bind as scope.\n *\n * @param {Function} fn\n *        The function to be bound to a scope.\n *\n * @param {number} [uid]\n *        An optional unique ID for the function to be set\n *\n * @return {Function}\n *         The new function that will be bound into the context given\n */\nvar bind = function bind(context, fn, uid) {\n  // Make sure the function has a unique ID\n  if (!fn.guid) {\n    fn.guid = newGUID();\n  }\n\n  // Create the new function that changes the context\n  var bound = function bound() {\n    return fn.apply(context, arguments);\n  };\n\n  // Allow for the ability to individualize this function\n  // Needed in the case where multiple objects might share the same prototype\n  // IF both items add an event listener with the same function, then you try to remove just one\n  // it will remove both because they both have the same guid.\n  // when using this, you need to use the bind method when you remove the listener as well.\n  // currently used in text tracks\n  bound.guid = uid ? uid + '_' + fn.guid : fn.guid;\n\n  return bound;\n};\n\n/**\n * Wraps the given function, `fn`, with a new function that only invokes `fn`\n * at most once per every `wait` milliseconds.\n *\n * @param  {Function} fn\n *         The function to be throttled.\n *\n * @param  {Number}   wait\n *         The number of milliseconds by which to throttle.\n *\n * @return {Function}\n */\nvar throttle = function throttle(fn, wait) {\n  var last = Date.now();\n\n  var throttled = function throttled() {\n    var now = Date.now();\n\n    if (now - last >= wait) {\n      fn.apply(undefined, arguments);\n      last = now;\n    }\n  };\n\n  return throttled;\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked.\n *\n * Inspired by lodash and underscore implementations.\n *\n * @param  {Function} func\n *         The function to wrap with debounce behavior.\n *\n * @param  {number} wait\n *         The number of milliseconds to wait after the last invocation.\n *\n * @param  {boolean} [immediate]\n *         Whether or not to invoke the function immediately upon creation.\n *\n * @param  {Object} [context=window]\n *         The \"context\" in which the debounced function should debounce. For\n *         example, if this function should be tied to a Video.js player,\n *         the player can be passed here. Alternatively, defaults to the\n *         global `window` object.\n *\n * @return {Function}\n *         A debounced function.\n */\nvar debounce = function debounce(func, wait, immediate) {\n  var context = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : window;\n\n  var timeout = void 0;\n\n  /* eslint-disable consistent-this */\n  return function () {\n    var self = this;\n    var args = arguments;\n\n    var _later = function later() {\n      timeout = null;\n      _later = null;\n      if (!immediate) {\n        func.apply(self, args);\n      }\n    };\n\n    if (!timeout && immediate) {\n      func.apply(self, args);\n    }\n\n    context.clearTimeout(timeout);\n    timeout = context.setTimeout(_later, wait);\n  };\n  /* eslint-enable consistent-this */\n};\n\n/**\n * @file src/js/event-target.js\n */\n/**\n * `EventTarget` is a class that can have the same API as the DOM `EventTarget`. It\n * adds shorthand functions that wrap around lengthy functions. For example:\n * the `on` function is a wrapper around `addEventListener`.\n *\n * @see [EventTarget Spec]{@link https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget}\n * @class EventTarget\n */\nvar EventTarget = function EventTarget() {};\n\n/**\n * A Custom DOM event.\n *\n * @typedef {Object} EventTarget~Event\n * @see [Properties]{@link https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent}\n */\n\n/**\n * All event listeners should follow the following format.\n *\n * @callback EventTarget~EventListener\n * @this {EventTarget}\n *\n * @param {EventTarget~Event} event\n *        the event that triggered this function\n *\n * @param {Object} [hash]\n *        hash of data sent during the event\n */\n\n/**\n * An object containing event names as keys and booleans as values.\n *\n * > NOTE: If an event name is set to a true value here {@link EventTarget#trigger}\n *         will have extra functionality. See that function for more information.\n *\n * @property EventTarget.prototype.allowedEvents_\n * @private\n */\nEventTarget.prototype.allowedEvents_ = {};\n\n/**\n * Adds an `event listener` to an instance of an `EventTarget`. An `event listener` is a\n * function that will get called when an event with a certain name gets triggered.\n *\n * @param {string|string[]} type\n *        An event name or an array of event names.\n *\n * @param {EventTarget~EventListener} fn\n *        The function to call with `EventTarget`s\n */\nEventTarget.prototype.on = function (type, fn) {\n  // Remove the addEventListener alias before calling Events.on\n  // so we don't get into an infinite type loop\n  var ael = this.addEventListener;\n\n  this.addEventListener = function () {};\n  on(this, type, fn);\n  this.addEventListener = ael;\n};\n\n/**\n * An alias of {@link EventTarget#on}. Allows `EventTarget` to mimic\n * the standard DOM API.\n *\n * @function\n * @see {@link EventTarget#on}\n */\nEventTarget.prototype.addEventListener = EventTarget.prototype.on;\n\n/**\n * Removes an `event listener` for a specific event from an instance of `EventTarget`.\n * This makes it so that the `event listener` will no longer get called when the\n * named event happens.\n *\n * @param {string|string[]} type\n *        An event name or an array of event names.\n *\n * @param {EventTarget~EventListener} fn\n *        The function to remove.\n */\nEventTarget.prototype.off = function (type, fn) {\n  off(this, type, fn);\n};\n\n/**\n * An alias of {@link EventTarget#off}. Allows `EventTarget` to mimic\n * the standard DOM API.\n *\n * @function\n * @see {@link EventTarget#off}\n */\nEventTarget.prototype.removeEventListener = EventTarget.prototype.off;\n\n/**\n * This function will add an `event listener` that gets triggered only once. After the\n * first trigger it will get removed. This is like adding an `event listener`\n * with {@link EventTarget#on} that calls {@link EventTarget#off} on itself.\n *\n * @param {string|string[]} type\n *        An event name or an array of event names.\n *\n * @param {EventTarget~EventListener} fn\n *        The function to be called once for each event name.\n */\nEventTarget.prototype.one = function (type, fn) {\n  // Remove the addEventListener alialing Events.on\n  // so we don't get into an infinite type loop\n  var ael = this.addEventListener;\n\n  this.addEventListener = function () {};\n  one(this, type, fn);\n  this.addEventListener = ael;\n};\n\n/**\n * This function causes an event to happen. This will then cause any `event listeners`\n * that are waiting for that event, to get called. If there are no `event listeners`\n * for an event then nothing will happen.\n *\n * If the name of the `Event` that is being triggered is in `EventTarget.allowedEvents_`.\n * Trigger will also call the `on` + `uppercaseEventName` function.\n *\n * Example:\n * 'click' is in `EventTarget.allowedEvents_`, so, trigger will attempt to call\n * `onClick` if it exists.\n *\n * @param {string|EventTarget~Event|Object} event\n *        The name of the event, an `Event`, or an object with a key of type set to\n *        an event name.\n */\nEventTarget.prototype.trigger = function (event) {\n  var type = event.type || event;\n\n  if (typeof event === 'string') {\n    event = { type: type };\n  }\n  event = fixEvent(event);\n\n  if (this.allowedEvents_[type] && this['on' + type]) {\n    this['on' + type](event);\n  }\n\n  trigger(this, event);\n};\n\n/**\n * An alias of {@link EventTarget#trigger}. Allows `EventTarget` to mimic\n * the standard DOM API.\n *\n * @function\n * @see {@link EventTarget#trigger}\n */\nEventTarget.prototype.dispatchEvent = EventTarget.prototype.trigger;\n\n/**\n * @file mixins/evented.js\n * @module evented\n */\n/**\n * Returns whether or not an object has had the evented mixin applied.\n *\n * @param  {Object} object\n *         An object to test.\n *\n * @return {boolean}\n *         Whether or not the object appears to be evented.\n */\nvar isEvented = function isEvented(object) {\n  return object instanceof EventTarget || !!object.eventBusEl_ && ['on', 'one', 'off', 'trigger'].every(function (k) {\n    return typeof object[k] === 'function';\n  });\n};\n\n/**\n * Whether a value is a valid event type - non-empty string or array.\n *\n * @private\n * @param  {string|Array} type\n *         The type value to test.\n *\n * @return {boolean}\n *         Whether or not the type is a valid event type.\n */\nvar isValidEventType = function isValidEventType(type) {\n  return (\n    // The regex here verifies that the `type` contains at least one non-\n    // whitespace character.\n    typeof type === 'string' && /\\S/.test(type) || Array.isArray(type) && !!type.length\n  );\n};\n\n/**\n * Validates a value to determine if it is a valid event target. Throws if not.\n *\n * @private\n * @throws {Error}\n *         If the target does not appear to be a valid event target.\n *\n * @param  {Object} target\n *         The object to test.\n */\nvar validateTarget = function validateTarget(target) {\n  if (!target.nodeName && !isEvented(target)) {\n    throw new Error('Invalid target; must be a DOM node or evented object.');\n  }\n};\n\n/**\n * Validates a value to determine if it is a valid event target. Throws if not.\n *\n * @private\n * @throws {Error}\n *         If the type does not appear to be a valid event type.\n *\n * @param  {string|Array} type\n *         The type to test.\n */\nvar validateEventType = function validateEventType(type) {\n  if (!isValidEventType(type)) {\n    throw new Error('Invalid event type; must be a non-empty string or array.');\n  }\n};\n\n/**\n * Validates a value to determine if it is a valid listener. Throws if not.\n *\n * @private\n * @throws {Error}\n *         If the listener is not a function.\n *\n * @param  {Function} listener\n *         The listener to test.\n */\nvar validateListener = function validateListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new Error('Invalid listener; must be a function.');\n  }\n};\n\n/**\n * Takes an array of arguments given to `on()` or `one()`, validates them, and\n * normalizes them into an object.\n *\n * @private\n * @param  {Object} self\n *         The evented object on which `on()` or `one()` was called. This\n *         object will be bound as the `this` value for the listener.\n *\n * @param  {Array} args\n *         An array of arguments passed to `on()` or `one()`.\n *\n * @return {Object}\n *         An object containing useful values for `on()` or `one()` calls.\n */\nvar normalizeListenArgs = function normalizeListenArgs(self, args) {\n\n  // If the number of arguments is less than 3, the target is always the\n  // evented object itself.\n  var isTargetingSelf = args.length < 3 || args[0] === self || args[0] === self.eventBusEl_;\n  var target = void 0;\n  var type = void 0;\n  var listener = void 0;\n\n  if (isTargetingSelf) {\n    target = self.eventBusEl_;\n\n    // Deal with cases where we got 3 arguments, but we are still listening to\n    // the evented object itself.\n    if (args.length >= 3) {\n      args.shift();\n    }\n\n    type = args[0];\n    listener = args[1];\n  } else {\n    target = args[0];\n    type = args[1];\n    listener = args[2];\n  }\n\n  validateTarget(target);\n  validateEventType(type);\n  validateListener(listener);\n\n  listener = bind(self, listener);\n\n  return { isTargetingSelf: isTargetingSelf, target: target, type: type, listener: listener };\n};\n\n/**\n * Adds the listener to the event type(s) on the target, normalizing for\n * the type of target.\n *\n * @private\n * @param  {Element|Object} target\n *         A DOM node or evented object.\n *\n * @param  {string} method\n *         The event binding method to use (\"on\" or \"one\").\n *\n * @param  {string|Array} type\n *         One or more event type(s).\n *\n * @param  {Function} listener\n *         A listener function.\n */\nvar listen = function listen(target, method, type, listener) {\n  validateTarget(target);\n\n  if (target.nodeName) {\n    Events[method](target, type, listener);\n  } else {\n    target[method](type, listener);\n  }\n};\n\n/**\n * Contains methods that provide event capabilites to an object which is passed\n * to {@link module:evented|evented}.\n *\n * @mixin EventedMixin\n */\nvar EventedMixin = {\n\n  /**\n   * Add a listener to an event (or events) on this object or another evented\n   * object.\n   *\n   * @param  {string|Array|Element|Object} targetOrType\n   *         If this is a string or array, it represents the event type(s)\n   *         that will trigger the listener.\n   *\n   *         Another evented object can be passed here instead, which will\n   *         cause the listener to listen for events on _that_ object.\n   *\n   *         In either case, the listener's `this` value will be bound to\n   *         this object.\n   *\n   * @param  {string|Array|Function} typeOrListener\n   *         If the first argument was a string or array, this should be the\n   *         listener function. Otherwise, this is a string or array of event\n   *         type(s).\n   *\n   * @param  {Function} [listener]\n   *         If the first argument was another evented object, this will be\n   *         the listener function.\n   */\n  on: function on$$1() {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var _normalizeListenArgs = normalizeListenArgs(this, args),\n        isTargetingSelf = _normalizeListenArgs.isTargetingSelf,\n        target = _normalizeListenArgs.target,\n        type = _normalizeListenArgs.type,\n        listener = _normalizeListenArgs.listener;\n\n    listen(target, 'on', type, listener);\n\n    // If this object is listening to another evented object.\n    if (!isTargetingSelf) {\n\n      // If this object is disposed, remove the listener.\n      var removeListenerOnDispose = function removeListenerOnDispose() {\n        return _this.off(target, type, listener);\n      };\n\n      // Use the same function ID as the listener so we can remove it later it\n      // using the ID of the original listener.\n      removeListenerOnDispose.guid = listener.guid;\n\n      // Add a listener to the target's dispose event as well. This ensures\n      // that if the target is disposed BEFORE this object, we remove the\n      // removal listener that was just added. Otherwise, we create a memory leak.\n      var removeRemoverOnTargetDispose = function removeRemoverOnTargetDispose() {\n        return _this.off('dispose', removeListenerOnDispose);\n      };\n\n      // Use the same function ID as the listener so we can remove it later\n      // it using the ID of the original listener.\n      removeRemoverOnTargetDispose.guid = listener.guid;\n\n      listen(this, 'on', 'dispose', removeListenerOnDispose);\n      listen(target, 'on', 'dispose', removeRemoverOnTargetDispose);\n    }\n  },\n\n\n  /**\n   * Add a listener to an event (or events) on this object or another evented\n   * object. The listener will only be called once and then removed.\n   *\n   * @param  {string|Array|Element|Object} targetOrType\n   *         If this is a string or array, it represents the event type(s)\n   *         that will trigger the listener.\n   *\n   *         Another evented object can be passed here instead, which will\n   *         cause the listener to listen for events on _that_ object.\n   *\n   *         In either case, the listener's `this` value will be bound to\n   *         this object.\n   *\n   * @param  {string|Array|Function} typeOrListener\n   *         If the first argument was a string or array, this should be the\n   *         listener function. Otherwise, this is a string or array of event\n   *         type(s).\n   *\n   * @param  {Function} [listener]\n   *         If the first argument was another evented object, this will be\n   *         the listener function.\n   */\n  one: function one$$1() {\n    var _this2 = this;\n\n    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var _normalizeListenArgs2 = normalizeListenArgs(this, args),\n        isTargetingSelf = _normalizeListenArgs2.isTargetingSelf,\n        target = _normalizeListenArgs2.target,\n        type = _normalizeListenArgs2.type,\n        listener = _normalizeListenArgs2.listener;\n\n    // Targeting this evented object.\n\n\n    if (isTargetingSelf) {\n      listen(target, 'one', type, listener);\n\n      // Targeting another evented object.\n    } else {\n      var wrapper = function wrapper() {\n        for (var _len3 = arguments.length, largs = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          largs[_key3] = arguments[_key3];\n        }\n\n        _this2.off(target, type, wrapper);\n        listener.apply(null, largs);\n      };\n\n      // Use the same function ID as the listener so we can remove it later\n      // it using the ID of the original listener.\n      wrapper.guid = listener.guid;\n      listen(target, 'one', type, wrapper);\n    }\n  },\n\n\n  /**\n   * Removes listener(s) from event(s) on an evented object.\n   *\n   * @param  {string|Array|Element|Object} [targetOrType]\n   *         If this is a string or array, it represents the event type(s).\n   *\n   *         Another evented object can be passed here instead, in which case\n   *         ALL 3 arguments are _required_.\n   *\n   * @param  {string|Array|Function} [typeOrListener]\n   *         If the first argument was a string or array, this may be the\n   *         listener function. Otherwise, this is a string or array of event\n   *         type(s).\n   *\n   * @param  {Function} [listener]\n   *         If the first argument was another evented object, this will be\n   *         the listener function; otherwise, _all_ listeners bound to the\n   *         event type(s) will be removed.\n   */\n  off: function off$$1(targetOrType, typeOrListener, listener) {\n\n    // Targeting this evented object.\n    if (!targetOrType || isValidEventType(targetOrType)) {\n      off(this.eventBusEl_, targetOrType, typeOrListener);\n\n      // Targeting another evented object.\n    } else {\n      var target = targetOrType;\n      var type = typeOrListener;\n\n      // Fail fast and in a meaningful way!\n      validateTarget(target);\n      validateEventType(type);\n      validateListener(listener);\n\n      // Ensure there's at least a guid, even if the function hasn't been used\n      listener = bind(this, listener);\n\n      // Remove the dispose listener on this evented object, which was given\n      // the same guid as the event listener in on().\n      this.off('dispose', listener);\n\n      if (target.nodeName) {\n        off(target, type, listener);\n        off(target, 'dispose', listener);\n      } else if (isEvented(target)) {\n        target.off(type, listener);\n        target.off('dispose', listener);\n      }\n    }\n  },\n\n\n  /**\n   * Fire an event on this evented object, causing its listeners to be called.\n   *\n   * @param   {string|Object} event\n   *          An event type or an object with a type property.\n   *\n   * @param   {Object} [hash]\n   *          An additional object to pass along to listeners.\n   *\n   * @returns {boolean}\n   *          Whether or not the default behavior was prevented.\n   */\n  trigger: function trigger$$1(event, hash) {\n    return trigger(this.eventBusEl_, event, hash);\n  }\n};\n\n/**\n * Applies {@link module:evented~EventedMixin|EventedMixin} to a target object.\n *\n * @param  {Object} target\n *         The object to which to add event methods.\n *\n * @param  {Object} [options={}]\n *         Options for customizing the mixin behavior.\n *\n * @param  {String} [options.eventBusKey]\n *         By default, adds a `eventBusEl_` DOM element to the target object,\n *         which is used as an event bus. If the target object already has a\n *         DOM element that should be used, pass its key here.\n *\n * @return {Object}\n *         The target object.\n */\nfunction evented(target) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var eventBusKey = options.eventBusKey;\n\n  // Set or create the eventBusEl_.\n\n  if (eventBusKey) {\n    if (!target[eventBusKey].nodeName) {\n      throw new Error('The eventBusKey \"' + eventBusKey + '\" does not refer to an element.');\n    }\n    target.eventBusEl_ = target[eventBusKey];\n  } else {\n    target.eventBusEl_ = createEl('span', { className: 'vjs-event-bus' });\n  }\n\n  assign(target, EventedMixin);\n\n  // When any evented object is disposed, it removes all its listeners.\n  target.on('dispose', function () {\n    target.off();\n    window.setTimeout(function () {\n      target.eventBusEl_ = null;\n    }, 0);\n  });\n\n  return target;\n}\n\n/**\n * @file mixins/stateful.js\n * @module stateful\n */\n/**\n * Contains methods that provide statefulness to an object which is passed\n * to {@link module:stateful}.\n *\n * @mixin StatefulMixin\n */\nvar StatefulMixin = {\n\n  /**\n   * A hash containing arbitrary keys and values representing the state of\n   * the object.\n   *\n   * @type {Object}\n   */\n  state: {},\n\n  /**\n   * Set the state of an object by mutating its\n   * {@link module:stateful~StatefulMixin.state|state} object in place.\n   *\n   * @fires   module:stateful~StatefulMixin#statechanged\n   * @param   {Object|Function} stateUpdates\n   *          A new set of properties to shallow-merge into the plugin state.\n   *          Can be a plain object or a function returning a plain object.\n   *\n   * @returns {Object|undefined}\n   *          An object containing changes that occurred. If no changes\n   *          occurred, returns `undefined`.\n   */\n  setState: function setState(stateUpdates) {\n    var _this = this;\n\n    // Support providing the `stateUpdates` state as a function.\n    if (typeof stateUpdates === 'function') {\n      stateUpdates = stateUpdates();\n    }\n\n    var changes = void 0;\n\n    each(stateUpdates, function (value, key) {\n\n      // Record the change if the value is different from what's in the\n      // current state.\n      if (_this.state[key] !== value) {\n        changes = changes || {};\n        changes[key] = {\n          from: _this.state[key],\n          to: value\n        };\n      }\n\n      _this.state[key] = value;\n    });\n\n    // Only trigger \"statechange\" if there were changes AND we have a trigger\n    // function. This allows us to not require that the target object be an\n    // evented object.\n    if (changes && isEvented(this)) {\n\n      /**\n       * An event triggered on an object that is both\n       * {@link module:stateful|stateful} and {@link module:evented|evented}\n       * indicating that its state has changed.\n       *\n       * @event    module:stateful~StatefulMixin#statechanged\n       * @type     {Object}\n       * @property {Object} changes\n       *           A hash containing the properties that were changed and\n       *           the values they were changed `from` and `to`.\n       */\n      this.trigger({\n        changes: changes,\n        type: 'statechanged'\n      });\n    }\n\n    return changes;\n  }\n};\n\n/**\n * Applies {@link module:stateful~StatefulMixin|StatefulMixin} to a target\n * object.\n *\n * If the target object is {@link module:evented|evented} and has a\n * `handleStateChanged` method, that method will be automatically bound to the\n * `statechanged` event on itself.\n *\n * @param   {Object} target\n *          The object to be made stateful.\n *\n * @param   {Object} [defaultState]\n *          A default set of properties to populate the newly-stateful object's\n *          `state` property.\n *\n * @returns {Object}\n *          Returns the `target`.\n */\nfunction stateful(target, defaultState) {\n  assign(target, StatefulMixin);\n\n  // This happens after the mixing-in because we need to replace the `state`\n  // added in that step.\n  target.state = assign({}, target.state, defaultState);\n\n  // Auto-bind the `handleStateChanged` method of the target object if it exists.\n  if (typeof target.handleStateChanged === 'function' && isEvented(target)) {\n    target.on('statechanged', target.handleStateChanged);\n  }\n\n  return target;\n}\n\n/**\n * @file to-title-case.js\n * @module to-title-case\n */\n\n/**\n * Uppercase the first letter of a string.\n *\n * @param {string} string\n *        String to be uppercased\n *\n * @return {string}\n *         The string with an uppercased first letter\n */\nfunction toTitleCase(string) {\n  if (typeof string !== 'string') {\n    return string;\n  }\n\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\n/**\n * Compares the TitleCase versions of the two strings for equality.\n *\n * @param {string} str1\n *        The first string to compare\n *\n * @param {string} str2\n *        The second string to compare\n *\n * @return {boolean}\n *         Whether the TitleCase versions of the strings are equal\n */\nfunction titleCaseEquals(str1, str2) {\n  return toTitleCase(str1) === toTitleCase(str2);\n}\n\n/**\n * @file merge-options.js\n * @module merge-options\n */\n/**\n * Deep-merge one or more options objects, recursively merging **only** plain\n * object properties.\n *\n * @param   {Object[]} sources\n *          One or more objects to merge into a new object.\n *\n * @returns {Object}\n *          A new object that is the merged result of all sources.\n */\nfunction mergeOptions() {\n  var result = {};\n\n  for (var _len = arguments.length, sources = Array(_len), _key = 0; _key < _len; _key++) {\n    sources[_key] = arguments[_key];\n  }\n\n  sources.forEach(function (source) {\n    if (!source) {\n      return;\n    }\n\n    each(source, function (value, key) {\n      if (!isPlain(value)) {\n        result[key] = value;\n        return;\n      }\n\n      if (!isPlain(result[key])) {\n        result[key] = {};\n      }\n\n      result[key] = mergeOptions(result[key], value);\n    });\n  });\n\n  return result;\n}\n\n/**\n * Player Component - Base class for all UI objects\n *\n * @file component.js\n */\n/**\n * Base class for all UI Components.\n * Components are UI objects which represent both a javascript object and an element\n * in the DOM. They can be children of other components, and can have\n * children themselves.\n *\n * Components can also use methods from {@link EventTarget}\n */\n\nvar Component = function () {\n\n  /**\n   * A callback that is called when a component is ready. Does not have any\n   * paramters and any callback value will be ignored.\n   *\n   * @callback Component~ReadyCallback\n   * @this Component\n   */\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Object[]} [options.children]\n   *        An array of children objects to intialize this component with. Children objects have\n   *        a name property that will be used if more than one component of the same type needs to be\n   *        added.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        Function that gets called when the `Component` is ready.\n   */\n  function Component(player, options, ready) {\n    classCallCheck(this, Component);\n\n\n    // The component might be the player itself and we can't pass `this` to super\n    if (!player && this.play) {\n      this.player_ = player = this; // eslint-disable-line\n    } else {\n      this.player_ = player;\n    }\n\n    // Make a copy of prototype.options_ to protect against overriding defaults\n    this.options_ = mergeOptions({}, this.options_);\n\n    // Updated options with supplied options\n    options = this.options_ = mergeOptions(this.options_, options);\n\n    // Get ID from options or options element if one is supplied\n    this.id_ = options.id || options.el && options.el.id;\n\n    // If there was no ID from the options, generate one\n    if (!this.id_) {\n      // Don't require the player ID function in the case of mock players\n      var id = player && player.id && player.id() || 'no_player';\n\n      this.id_ = id + '_component_' + newGUID();\n    }\n\n    this.name_ = options.name || null;\n\n    // Create element if one wasn't provided in options\n    if (options.el) {\n      this.el_ = options.el;\n    } else if (options.createEl !== false) {\n      this.el_ = this.createEl();\n    }\n\n    // if evented is anything except false, we want to mixin in evented\n    if (options.evented !== false) {\n      // Make this an evented object and use `el_`, if available, as its event bus\n      evented(this, { eventBusKey: this.el_ ? 'el_' : null });\n    }\n    stateful(this, this.constructor.defaultState);\n\n    this.children_ = [];\n    this.childIndex_ = {};\n    this.childNameIndex_ = {};\n\n    // Add any child components in options\n    if (options.initChildren !== false) {\n      this.initChildren();\n    }\n\n    this.ready(ready);\n    // Don't want to trigger ready here or it will before init is actually\n    // finished for all children that run this constructor\n\n    if (options.reportTouchActivity !== false) {\n      this.enableTouchActivity();\n    }\n  }\n\n  /**\n   * Dispose of the `Component` and all child components.\n   *\n   * @fires Component#dispose\n   */\n\n\n  Component.prototype.dispose = function dispose() {\n\n    /**\n     * Triggered when a `Component` is disposed.\n     *\n     * @event Component#dispose\n     * @type {EventTarget~Event}\n     *\n     * @property {boolean} [bubbles=false]\n     *           set to false so that the close event does not\n     *           bubble up\n     */\n    this.trigger({ type: 'dispose', bubbles: false });\n\n    // Dispose all children.\n    if (this.children_) {\n      for (var i = this.children_.length - 1; i >= 0; i--) {\n        if (this.children_[i].dispose) {\n          this.children_[i].dispose();\n        }\n      }\n    }\n\n    // Delete child references\n    this.children_ = null;\n    this.childIndex_ = null;\n    this.childNameIndex_ = null;\n\n    if (this.el_) {\n      // Remove element from DOM\n      if (this.el_.parentNode) {\n        this.el_.parentNode.removeChild(this.el_);\n      }\n\n      removeData(this.el_);\n      this.el_ = null;\n    }\n\n    // remove reference to the player after disposing of the element\n    this.player_ = null;\n  };\n\n  /**\n   * Return the {@link Player} that the `Component` has attached to.\n   *\n   * @return {Player}\n   *         The player that this `Component` has attached to.\n   */\n\n\n  Component.prototype.player = function player() {\n    return this.player_;\n  };\n\n  /**\n   * Deep merge of options objects with new options.\n   * > Note: When both `obj` and `options` contain properties whose values are objects.\n   *         The two properties get merged using {@link module:mergeOptions}\n   *\n   * @param {Object} obj\n   *        The object that contains new options.\n   *\n   * @return {Object}\n   *         A new object of `this.options_` and `obj` merged together.\n   *\n   * @deprecated since version 5\n   */\n\n\n  Component.prototype.options = function options(obj) {\n    log$1.warn('this.options() has been deprecated and will be moved to the constructor in 6.0');\n\n    if (!obj) {\n      return this.options_;\n    }\n\n    this.options_ = mergeOptions(this.options_, obj);\n    return this.options_;\n  };\n\n  /**\n   * Get the `Component`s DOM element\n   *\n   * @return {Element}\n   *         The DOM element for this `Component`.\n   */\n\n\n  Component.prototype.el = function el() {\n    return this.el_;\n  };\n\n  /**\n   * Create the `Component`s DOM element.\n   *\n   * @param {string} [tagName]\n   *        Element's DOM node type. e.g. 'div'\n   *\n   * @param {Object} [properties]\n   *        An object of properties that should be set.\n   *\n   * @param {Object} [attributes]\n   *        An object of attributes that should be set.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  Component.prototype.createEl = function createEl$$1(tagName, properties, attributes) {\n    return createEl(tagName, properties, attributes);\n  };\n\n  /**\n   * Localize a string given the string in english.\n   *\n   * If tokens are provided, it'll try and run a simple token replacement on the provided string.\n   * The tokens it looks for look like `{1}` with the index being 1-indexed into the tokens array.\n   *\n   * If a `defaultValue` is provided, it'll use that over `string`,\n   * if a value isn't found in provided language files.\n   * This is useful if you want to have a descriptive key for token replacement\n   * but have a succinct localized string and not require `en.json` to be included.\n   *\n   * Currently, it is used for the progress bar timing.\n   * ```js\n   * {\n   *   \"progress bar timing: currentTime={1} duration={2}\": \"{1} of {2}\"\n   * }\n   * ```\n   * It is then used like so:\n   * ```js\n   * this.localize('progress bar timing: currentTime={1} duration{2}',\n   *               [this.player_.currentTime(), this.player_.duration()],\n   *               '{1} of {2}');\n   * ```\n   *\n   * Which outputs something like: `01:23 of 24:56`.\n   *\n   *\n   * @param {string} string\n   *        The string to localize and the key to lookup in the language files.\n   * @param {string[]} [tokens]\n   *        If the current item has token replacements, provide the tokens here.\n   * @param {string} [defaultValue]\n   *        Defaults to `string`. Can be a default value to use for token replacement\n   *        if the lookup key is needed to be separate.\n   *\n   * @return {string}\n   *         The localized string or if no localization exists the english string.\n   */\n\n\n  Component.prototype.localize = function localize(string, tokens) {\n    var defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : string;\n\n    var code = this.player_.language && this.player_.language();\n    var languages = this.player_.languages && this.player_.languages();\n    var language = languages && languages[code];\n    var primaryCode = code && code.split('-')[0];\n    var primaryLang = languages && languages[primaryCode];\n\n    var localizedString = defaultValue;\n\n    if (language && language[string]) {\n      localizedString = language[string];\n    } else if (primaryLang && primaryLang[string]) {\n      localizedString = primaryLang[string];\n    }\n\n    if (tokens) {\n      localizedString = localizedString.replace(/\\{(\\d+)\\}/g, function (match, index) {\n        var value = tokens[index - 1];\n        var ret = value;\n\n        if (typeof value === 'undefined') {\n          ret = match;\n        }\n\n        return ret;\n      });\n    }\n\n    return localizedString;\n  };\n\n  /**\n   * Return the `Component`s DOM element. This is where children get inserted.\n   * This will usually be the the same as the element returned in {@link Component#el}.\n   *\n   * @return {Element}\n   *         The content element for this `Component`.\n   */\n\n\n  Component.prototype.contentEl = function contentEl() {\n    return this.contentEl_ || this.el_;\n  };\n\n  /**\n   * Get this `Component`s ID\n   *\n   * @return {string}\n   *         The id of this `Component`\n   */\n\n\n  Component.prototype.id = function id() {\n    return this.id_;\n  };\n\n  /**\n   * Get the `Component`s name. The name gets used to reference the `Component`\n   * and is set during registration.\n   *\n   * @return {string}\n   *         The name of this `Component`.\n   */\n\n\n  Component.prototype.name = function name() {\n    return this.name_;\n  };\n\n  /**\n   * Get an array of all child components\n   *\n   * @return {Array}\n   *         The children\n   */\n\n\n  Component.prototype.children = function children() {\n    return this.children_;\n  };\n\n  /**\n   * Returns the child `Component` with the given `id`.\n   *\n   * @param {string} id\n   *        The id of the child `Component` to get.\n   *\n   * @return {Component|undefined}\n   *         The child `Component` with the given `id` or undefined.\n   */\n\n\n  Component.prototype.getChildById = function getChildById(id) {\n    return this.childIndex_[id];\n  };\n\n  /**\n   * Returns the child `Component` with the given `name`.\n   *\n   * @param {string} name\n   *        The name of the child `Component` to get.\n   *\n   * @return {Component|undefined}\n   *         The child `Component` with the given `name` or undefined.\n   */\n\n\n  Component.prototype.getChild = function getChild(name) {\n    if (!name) {\n      return;\n    }\n\n    name = toTitleCase(name);\n\n    return this.childNameIndex_[name];\n  };\n\n  /**\n   * Add a child `Component` inside the current `Component`.\n   *\n   *\n   * @param {string|Component} child\n   *        The name or instance of a child to add.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of options that will get passed to children of\n   *        the child.\n   *\n   * @param {number} [index=this.children_.length]\n   *        The index to attempt to add a child into.\n   *\n   * @return {Component}\n   *         The `Component` that gets added as a child. When using a string the\n   *         `Component` will get created by this process.\n   */\n\n\n  Component.prototype.addChild = function addChild(child) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var index = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.children_.length;\n\n    var component = void 0;\n    var componentName = void 0;\n\n    // If child is a string, create component with options\n    if (typeof child === 'string') {\n      componentName = toTitleCase(child);\n\n      var componentClassName = options.componentClass || componentName;\n\n      // Set name through options\n      options.name = componentName;\n\n      // Create a new object & element for this controls set\n      // If there's no .player_, this is a player\n      var ComponentClass = Component.getComponent(componentClassName);\n\n      if (!ComponentClass) {\n        throw new Error('Component ' + componentClassName + ' does not exist');\n      }\n\n      // data stored directly on the videojs object may be\n      // misidentified as a component to retain\n      // backwards-compatibility with 4.x. check to make sure the\n      // component class can be instantiated.\n      if (typeof ComponentClass !== 'function') {\n        return null;\n      }\n\n      component = new ComponentClass(this.player_ || this, options);\n\n      // child is a component instance\n    } else {\n      component = child;\n    }\n\n    this.children_.splice(index, 0, component);\n\n    if (typeof component.id === 'function') {\n      this.childIndex_[component.id()] = component;\n    }\n\n    // If a name wasn't used to create the component, check if we can use the\n    // name function of the component\n    componentName = componentName || component.name && toTitleCase(component.name());\n\n    if (componentName) {\n      this.childNameIndex_[componentName] = component;\n    }\n\n    // Add the UI object's element to the container div (box)\n    // Having an element is not required\n    if (typeof component.el === 'function' && component.el()) {\n      var childNodes = this.contentEl().children;\n      var refNode = childNodes[index] || null;\n\n      this.contentEl().insertBefore(component.el(), refNode);\n    }\n\n    // Return so it can stored on parent object if desired.\n    return component;\n  };\n\n  /**\n   * Remove a child `Component` from this `Component`s list of children. Also removes\n   * the child `Component`s element from this `Component`s element.\n   *\n   * @param {Component} component\n   *        The child `Component` to remove.\n   */\n\n\n  Component.prototype.removeChild = function removeChild(component) {\n    if (typeof component === 'string') {\n      component = this.getChild(component);\n    }\n\n    if (!component || !this.children_) {\n      return;\n    }\n\n    var childFound = false;\n\n    for (var i = this.children_.length - 1; i >= 0; i--) {\n      if (this.children_[i] === component) {\n        childFound = true;\n        this.children_.splice(i, 1);\n        break;\n      }\n    }\n\n    if (!childFound) {\n      return;\n    }\n\n    this.childIndex_[component.id()] = null;\n    this.childNameIndex_[component.name()] = null;\n\n    var compEl = component.el();\n\n    if (compEl && compEl.parentNode === this.contentEl()) {\n      this.contentEl().removeChild(component.el());\n    }\n  };\n\n  /**\n   * Add and initialize default child `Component`s based upon options.\n   */\n\n\n  Component.prototype.initChildren = function initChildren() {\n    var _this = this;\n\n    var children = this.options_.children;\n\n    if (children) {\n      // `this` is `parent`\n      var parentOptions = this.options_;\n\n      var handleAdd = function handleAdd(child) {\n        var name = child.name;\n        var opts = child.opts;\n\n        // Allow options for children to be set at the parent options\n        // e.g. videojs(id, { controlBar: false });\n        // instead of videojs(id, { children: { controlBar: false });\n        if (parentOptions[name] !== undefined) {\n          opts = parentOptions[name];\n        }\n\n        // Allow for disabling default components\n        // e.g. options['children']['posterImage'] = false\n        if (opts === false) {\n          return;\n        }\n\n        // Allow options to be passed as a simple boolean if no configuration\n        // is necessary.\n        if (opts === true) {\n          opts = {};\n        }\n\n        // We also want to pass the original player options\n        // to each component as well so they don't need to\n        // reach back into the player for options later.\n        opts.playerOptions = _this.options_.playerOptions;\n\n        // Create and add the child component.\n        // Add a direct reference to the child by name on the parent instance.\n        // If two of the same component are used, different names should be supplied\n        // for each\n        var newChild = _this.addChild(name, opts);\n\n        if (newChild) {\n          _this[name] = newChild;\n        }\n      };\n\n      // Allow for an array of children details to passed in the options\n      var workingChildren = void 0;\n      var Tech = Component.getComponent('Tech');\n\n      if (Array.isArray(children)) {\n        workingChildren = children;\n      } else {\n        workingChildren = Object.keys(children);\n      }\n\n      workingChildren\n      // children that are in this.options_ but also in workingChildren  would\n      // give us extra children we do not want. So, we want to filter them out.\n      .concat(Object.keys(this.options_).filter(function (child) {\n        return !workingChildren.some(function (wchild) {\n          if (typeof wchild === 'string') {\n            return child === wchild;\n          }\n          return child === wchild.name;\n        });\n      })).map(function (child) {\n        var name = void 0;\n        var opts = void 0;\n\n        if (typeof child === 'string') {\n          name = child;\n          opts = children[name] || _this.options_[name] || {};\n        } else {\n          name = child.name;\n          opts = child;\n        }\n\n        return { name: name, opts: opts };\n      }).filter(function (child) {\n        // we have to make sure that child.name isn't in the techOrder since\n        // techs are registerd as Components but can't aren't compatible\n        // See https://github.com/videojs/video.js/issues/2772\n        var c = Component.getComponent(child.opts.componentClass || toTitleCase(child.name));\n\n        return c && !Tech.isTech(c);\n      }).forEach(handleAdd);\n    }\n  };\n\n  /**\n   * Builds the default DOM class name. Should be overriden by sub-components.\n   *\n   * @return {string}\n   *         The DOM class name for this object.\n   *\n   * @abstract\n   */\n\n\n  Component.prototype.buildCSSClass = function buildCSSClass() {\n    // Child classes can include a function that does:\n    // return 'CLASS NAME' + this._super();\n    return '';\n  };\n\n  /**\n   * Bind a listener to the component's ready state.\n   * Different from event listeners in that if the ready event has already happened\n   * it will trigger the function immediately.\n   *\n   * @return {Component}\n   *         Returns itself; method can be chained.\n   */\n\n\n  Component.prototype.ready = function ready(fn) {\n    var sync = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (!fn) {\n      return;\n    }\n\n    if (!this.isReady_) {\n      this.readyQueue_ = this.readyQueue_ || [];\n      this.readyQueue_.push(fn);\n      return;\n    }\n\n    if (sync) {\n      fn.call(this);\n    } else {\n      // Call the function asynchronously by default for consistency\n      this.setTimeout(fn, 1);\n    }\n  };\n\n  /**\n   * Trigger all the ready listeners for this `Component`.\n   *\n   * @fires Component#ready\n   */\n\n\n  Component.prototype.triggerReady = function triggerReady() {\n    this.isReady_ = true;\n\n    // Ensure ready is triggered asynchronously\n    this.setTimeout(function () {\n      var readyQueue = this.readyQueue_;\n\n      // Reset Ready Queue\n      this.readyQueue_ = [];\n\n      if (readyQueue && readyQueue.length > 0) {\n        readyQueue.forEach(function (fn) {\n          fn.call(this);\n        }, this);\n      }\n\n      // Allow for using event listeners also\n      /**\n       * Triggered when a `Component` is ready.\n       *\n       * @event Component#ready\n       * @type {EventTarget~Event}\n       */\n      this.trigger('ready');\n    }, 1);\n  };\n\n  /**\n   * Find a single DOM element matching a `selector`. This can be within the `Component`s\n   * `contentEl()` or another custom context.\n   *\n   * @param {string} selector\n   *        A valid CSS selector, which will be passed to `querySelector`.\n   *\n   * @param {Element|string} [context=this.contentEl()]\n   *        A DOM element within which to query. Can also be a selector string in\n   *        which case the first matching element will get used as context. If\n   *        missing `this.contentEl()` gets used. If  `this.contentEl()` returns\n   *        nothing it falls back to `document`.\n   *\n   * @return {Element|null}\n   *         the dom element that was found, or null\n   *\n   * @see [Information on CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors)\n   */\n\n\n  Component.prototype.$ = function $$$1(selector, context) {\n    return $(selector, context || this.contentEl());\n  };\n\n  /**\n   * Finds all DOM element matching a `selector`. This can be within the `Component`s\n   * `contentEl()` or another custom context.\n   *\n   * @param {string} selector\n   *        A valid CSS selector, which will be passed to `querySelectorAll`.\n   *\n   * @param {Element|string} [context=this.contentEl()]\n   *        A DOM element within which to query. Can also be a selector string in\n   *        which case the first matching element will get used as context. If\n   *        missing `this.contentEl()` gets used. If  `this.contentEl()` returns\n   *        nothing it falls back to `document`.\n   *\n   * @return {NodeList}\n   *         a list of dom elements that were found\n   *\n   * @see [Information on CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors)\n   */\n\n\n  Component.prototype.$$ = function $$$$1(selector, context) {\n    return $$(selector, context || this.contentEl());\n  };\n\n  /**\n   * Check if a component's element has a CSS class name.\n   *\n   * @param {string} classToCheck\n   *        CSS class name to check.\n   *\n   * @return {boolean}\n   *         - True if the `Component` has the class.\n   *         - False if the `Component` does not have the class`\n   */\n\n\n  Component.prototype.hasClass = function hasClass$$1(classToCheck) {\n    return hasClass(this.el_, classToCheck);\n  };\n\n  /**\n   * Add a CSS class name to the `Component`s element.\n   *\n   * @param {string} classToAdd\n   *        CSS class name to add\n   */\n\n\n  Component.prototype.addClass = function addClass$$1(classToAdd) {\n    addClass(this.el_, classToAdd);\n  };\n\n  /**\n   * Remove a CSS class name from the `Component`s element.\n   *\n   * @param {string} classToRemove\n   *        CSS class name to remove\n   */\n\n\n  Component.prototype.removeClass = function removeClass$$1(classToRemove) {\n    removeClass(this.el_, classToRemove);\n  };\n\n  /**\n   * Add or remove a CSS class name from the component's element.\n   * - `classToToggle` gets added when {@link Component#hasClass} would return false.\n   * - `classToToggle` gets removed when {@link Component#hasClass} would return true.\n   *\n   * @param  {string} classToToggle\n   *         The class to add or remove based on (@link Component#hasClass}\n   *\n   * @param  {boolean|Dom~predicate} [predicate]\n   *         An {@link Dom~predicate} function or a boolean\n   */\n\n\n  Component.prototype.toggleClass = function toggleClass$$1(classToToggle, predicate) {\n    toggleClass(this.el_, classToToggle, predicate);\n  };\n\n  /**\n   * Show the `Component`s element if it is hidden by removing the\n   * 'vjs-hidden' class name from it.\n   */\n\n\n  Component.prototype.show = function show() {\n    this.removeClass('vjs-hidden');\n  };\n\n  /**\n   * Hide the `Component`s element if it is currently showing by adding the\n   * 'vjs-hidden` class name to it.\n   */\n\n\n  Component.prototype.hide = function hide() {\n    this.addClass('vjs-hidden');\n  };\n\n  /**\n   * Lock a `Component`s element in its visible state by adding the 'vjs-lock-showing'\n   * class name to it. Used during fadeIn/fadeOut.\n   *\n   * @private\n   */\n\n\n  Component.prototype.lockShowing = function lockShowing() {\n    this.addClass('vjs-lock-showing');\n  };\n\n  /**\n   * Unlock a `Component`s element from its visible state by removing the 'vjs-lock-showing'\n   * class name from it. Used during fadeIn/fadeOut.\n   *\n   * @private\n   */\n\n\n  Component.prototype.unlockShowing = function unlockShowing() {\n    this.removeClass('vjs-lock-showing');\n  };\n\n  /**\n   * Get the value of an attribute on the `Component`s element.\n   *\n   * @param {string} attribute\n   *        Name of the attribute to get the value from.\n   *\n   * @return {string|null}\n   *         - The value of the attribute that was asked for.\n   *         - Can be an empty string on some browsers if the attribute does not exist\n   *           or has no value\n   *         - Most browsers will return null if the attibute does not exist or has\n   *           no value.\n   *\n   * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute}\n   */\n\n\n  Component.prototype.getAttribute = function getAttribute$$1(attribute) {\n    return getAttribute(this.el_, attribute);\n  };\n\n  /**\n   * Set the value of an attribute on the `Component`'s element\n   *\n   * @param {string} attribute\n   *        Name of the attribute to set.\n   *\n   * @param {string} value\n   *        Value to set the attribute to.\n   *\n   * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute}\n   */\n\n\n  Component.prototype.setAttribute = function setAttribute$$1(attribute, value) {\n    setAttribute(this.el_, attribute, value);\n  };\n\n  /**\n   * Remove an attribute from the `Component`s element.\n   *\n   * @param {string} attribute\n   *        Name of the attribute to remove.\n   *\n   * @see [DOM API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute}\n   */\n\n\n  Component.prototype.removeAttribute = function removeAttribute$$1(attribute) {\n    removeAttribute(this.el_, attribute);\n  };\n\n  /**\n   * Get or set the width of the component based upon the CSS styles.\n   * See {@link Component#dimension} for more detailed information.\n   *\n   * @param {number|string} [num]\n   *        The width that you want to set postfixed with '%', 'px' or nothing.\n   *\n   * @param {boolean} [skipListeners]\n   *        Skip the componentresize event trigger\n   *\n   * @return {number|string}\n   *         The width when getting, zero if there is no width. Can be a string\n   *           postpixed with '%' or 'px'.\n   */\n\n\n  Component.prototype.width = function width(num, skipListeners) {\n    return this.dimension('width', num, skipListeners);\n  };\n\n  /**\n   * Get or set the height of the component based upon the CSS styles.\n   * See {@link Component#dimension} for more detailed information.\n   *\n   * @param {number|string} [num]\n   *        The height that you want to set postfixed with '%', 'px' or nothing.\n   *\n   * @param {boolean} [skipListeners]\n   *        Skip the componentresize event trigger\n   *\n   * @return {number|string}\n   *         The width when getting, zero if there is no width. Can be a string\n   *         postpixed with '%' or 'px'.\n   */\n\n\n  Component.prototype.height = function height(num, skipListeners) {\n    return this.dimension('height', num, skipListeners);\n  };\n\n  /**\n   * Set both the width and height of the `Component` element at the same time.\n   *\n   * @param  {number|string} width\n   *         Width to set the `Component`s element to.\n   *\n   * @param  {number|string} height\n   *         Height to set the `Component`s element to.\n   */\n\n\n  Component.prototype.dimensions = function dimensions(width, height) {\n    // Skip componentresize listeners on width for optimization\n    this.width(width, true);\n    this.height(height);\n  };\n\n  /**\n   * Get or set width or height of the `Component` element. This is the shared code\n   * for the {@link Component#width} and {@link Component#height}.\n   *\n   * Things to know:\n   * - If the width or height in an number this will return the number postfixed with 'px'.\n   * - If the width/height is a percent this will return the percent postfixed with '%'\n   * - Hidden elements have a width of 0 with `window.getComputedStyle`. This function\n   *   defaults to the `Component`s `style.width` and falls back to `window.getComputedStyle`.\n   *   See [this]{@link http://www.foliotek.com/devblog/getting-the-width-of-a-hidden-element-with-jquery-using-width/}\n   *   for more information\n   * - If you want the computed style of the component, use {@link Component#currentWidth}\n   *   and {@link {Component#currentHeight}\n   *\n   * @fires Component#componentresize\n   *\n   * @param {string} widthOrHeight\n   8        'width' or 'height'\n   *\n   * @param  {number|string} [num]\n   8         New dimension\n   *\n   * @param  {boolean} [skipListeners]\n   *         Skip componentresize event trigger\n   *\n   * @return {number}\n   *         The dimension when getting or 0 if unset\n   */\n\n\n  Component.prototype.dimension = function dimension(widthOrHeight, num, skipListeners) {\n    if (num !== undefined) {\n      // Set to zero if null or literally NaN (NaN !== NaN)\n      if (num === null || num !== num) {\n        num = 0;\n      }\n\n      // Check if using css width/height (% or px) and adjust\n      if (('' + num).indexOf('%') !== -1 || ('' + num).indexOf('px') !== -1) {\n        this.el_.style[widthOrHeight] = num;\n      } else if (num === 'auto') {\n        this.el_.style[widthOrHeight] = '';\n      } else {\n        this.el_.style[widthOrHeight] = num + 'px';\n      }\n\n      // skipListeners allows us to avoid triggering the resize event when setting both width and height\n      if (!skipListeners) {\n        /**\n         * Triggered when a component is resized.\n         *\n         * @event Component#componentresize\n         * @type {EventTarget~Event}\n         */\n        this.trigger('componentresize');\n      }\n\n      return;\n    }\n\n    // Not setting a value, so getting it\n    // Make sure element exists\n    if (!this.el_) {\n      return 0;\n    }\n\n    // Get dimension value from style\n    var val = this.el_.style[widthOrHeight];\n    var pxIndex = val.indexOf('px');\n\n    if (pxIndex !== -1) {\n      // Return the pixel value with no 'px'\n      return parseInt(val.slice(0, pxIndex), 10);\n    }\n\n    // No px so using % or no style was set, so falling back to offsetWidth/height\n    // If component has display:none, offset will return 0\n    // TODO: handle display:none and no dimension style using px\n    return parseInt(this.el_['offset' + toTitleCase(widthOrHeight)], 10);\n  };\n\n  /**\n   * Get the width or the height of the `Component` elements computed style. Uses\n   * `window.getComputedStyle`.\n   *\n   * @param {string} widthOrHeight\n   *        A string containing 'width' or 'height'. Whichever one you want to get.\n   *\n   * @return {number}\n   *         The dimension that gets asked for or 0 if nothing was set\n   *         for that dimension.\n   */\n\n\n  Component.prototype.currentDimension = function currentDimension(widthOrHeight) {\n    var computedWidthOrHeight = 0;\n\n    if (widthOrHeight !== 'width' && widthOrHeight !== 'height') {\n      throw new Error('currentDimension only accepts width or height value');\n    }\n\n    if (typeof window.getComputedStyle === 'function') {\n      var computedStyle = window.getComputedStyle(this.el_);\n\n      computedWidthOrHeight = computedStyle.getPropertyValue(widthOrHeight) || computedStyle[widthOrHeight];\n    }\n\n    // remove 'px' from variable and parse as integer\n    computedWidthOrHeight = parseFloat(computedWidthOrHeight);\n\n    // if the computed value is still 0, it's possible that the browser is lying\n    // and we want to check the offset values.\n    // This code also runs on IE8 and wherever getComputedStyle doesn't exist.\n    if (computedWidthOrHeight === 0) {\n      var rule = 'offset' + toTitleCase(widthOrHeight);\n\n      computedWidthOrHeight = this.el_[rule];\n    }\n\n    return computedWidthOrHeight;\n  };\n\n  /**\n   * An object that contains width and height values of the `Component`s\n   * computed style. Uses `window.getComputedStyle`.\n   *\n   * @typedef {Object} Component~DimensionObject\n   *\n   * @property {number} width\n   *           The width of the `Component`s computed style.\n   *\n   * @property {number} height\n   *           The height of the `Component`s computed style.\n   */\n\n  /**\n   * Get an object that contains width and height values of the `Component`s\n   * computed style.\n   *\n   * @return {Component~DimensionObject}\n   *         The dimensions of the components element\n   */\n\n\n  Component.prototype.currentDimensions = function currentDimensions() {\n    return {\n      width: this.currentDimension('width'),\n      height: this.currentDimension('height')\n    };\n  };\n\n  /**\n   * Get the width of the `Component`s computed style. Uses `window.getComputedStyle`.\n   *\n   * @return {number} width\n   *           The width of the `Component`s computed style.\n   */\n\n\n  Component.prototype.currentWidth = function currentWidth() {\n    return this.currentDimension('width');\n  };\n\n  /**\n   * Get the height of the `Component`s computed style. Uses `window.getComputedStyle`.\n   *\n   * @return {number} height\n   *           The height of the `Component`s computed style.\n   */\n\n\n  Component.prototype.currentHeight = function currentHeight() {\n    return this.currentDimension('height');\n  };\n\n  /**\n   * Set the focus to this component\n   */\n\n\n  Component.prototype.focus = function focus() {\n    this.el_.focus();\n  };\n\n  /**\n   * Remove the focus from this component\n   */\n\n\n  Component.prototype.blur = function blur() {\n    this.el_.blur();\n  };\n\n  /**\n   * Emit a 'tap' events when touch event support gets detected. This gets used to\n   * support toggling the controls through a tap on the video. They get enabled\n   * because every sub-component would have extra overhead otherwise.\n   *\n   * @private\n   * @fires Component#tap\n   * @listens Component#touchstart\n   * @listens Component#touchmove\n   * @listens Component#touchleave\n   * @listens Component#touchcancel\n   * @listens Component#touchend\n    */\n\n\n  Component.prototype.emitTapEvents = function emitTapEvents() {\n    // Track the start time so we can determine how long the touch lasted\n    var touchStart = 0;\n    var firstTouch = null;\n\n    // Maximum movement allowed during a touch event to still be considered a tap\n    // Other popular libs use anywhere from 2 (hammer.js) to 15,\n    // so 10 seems like a nice, round number.\n    var tapMovementThreshold = 10;\n\n    // The maximum length a touch can be while still being considered a tap\n    var touchTimeThreshold = 200;\n\n    var couldBeTap = void 0;\n\n    this.on('touchstart', function (event) {\n      // If more than one finger, don't consider treating this as a click\n      if (event.touches.length === 1) {\n        // Copy pageX/pageY from the object\n        firstTouch = {\n          pageX: event.touches[0].pageX,\n          pageY: event.touches[0].pageY\n        };\n        // Record start time so we can detect a tap vs. \"touch and hold\"\n        touchStart = new Date().getTime();\n        // Reset couldBeTap tracking\n        couldBeTap = true;\n      }\n    });\n\n    this.on('touchmove', function (event) {\n      // If more than one finger, don't consider treating this as a click\n      if (event.touches.length > 1) {\n        couldBeTap = false;\n      } else if (firstTouch) {\n        // Some devices will throw touchmoves for all but the slightest of taps.\n        // So, if we moved only a small distance, this could still be a tap\n        var xdiff = event.touches[0].pageX - firstTouch.pageX;\n        var ydiff = event.touches[0].pageY - firstTouch.pageY;\n        var touchDistance = Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n\n        if (touchDistance > tapMovementThreshold) {\n          couldBeTap = false;\n        }\n      }\n    });\n\n    var noTap = function noTap() {\n      couldBeTap = false;\n    };\n\n    // TODO: Listen to the original target. http://youtu.be/DujfpXOKUp8?t=13m8s\n    this.on('touchleave', noTap);\n    this.on('touchcancel', noTap);\n\n    // When the touch ends, measure how long it took and trigger the appropriate\n    // event\n    this.on('touchend', function (event) {\n      firstTouch = null;\n      // Proceed only if the touchmove/leave/cancel event didn't happen\n      if (couldBeTap === true) {\n        // Measure how long the touch lasted\n        var touchTime = new Date().getTime() - touchStart;\n\n        // Make sure the touch was less than the threshold to be considered a tap\n        if (touchTime < touchTimeThreshold) {\n          // Don't let browser turn this into a click\n          event.preventDefault();\n          /**\n           * Triggered when a `Component` is tapped.\n           *\n           * @event Component#tap\n           * @type {EventTarget~Event}\n           */\n          this.trigger('tap');\n          // It may be good to copy the touchend event object and change the\n          // type to tap, if the other event properties aren't exact after\n          // Events.fixEvent runs (e.g. event.target)\n        }\n      }\n    });\n  };\n\n  /**\n   * This function reports user activity whenever touch events happen. This can get\n   * turned off by any sub-components that wants touch events to act another way.\n   *\n   * Report user touch activity when touch events occur. User activity gets used to\n   * determine when controls should show/hide. It is simple when it comes to mouse\n   * events, because any mouse event should show the controls. So we capture mouse\n   * events that bubble up to the player and report activity when that happens.\n   * With touch events it isn't as easy as `touchstart` and `touchend` toggle player\n   * controls. So touch events can't help us at the player level either.\n   *\n   * User activity gets checked asynchronously. So what could happen is a tap event\n   * on the video turns the controls off. Then the `touchend` event bubbles up to\n   * the player. Which, if it reported user activity, would turn the controls right\n   * back on. We also don't want to completely block touch events from bubbling up.\n   * Furthermore a `touchmove` event and anything other than a tap, should not turn\n   * controls back on.\n   *\n   * @listens Component#touchstart\n   * @listens Component#touchmove\n   * @listens Component#touchend\n   * @listens Component#touchcancel\n   */\n\n\n  Component.prototype.enableTouchActivity = function enableTouchActivity() {\n    // Don't continue if the root player doesn't support reporting user activity\n    if (!this.player() || !this.player().reportUserActivity) {\n      return;\n    }\n\n    // listener for reporting that the user is active\n    var report = bind(this.player(), this.player().reportUserActivity);\n\n    var touchHolding = void 0;\n\n    this.on('touchstart', function () {\n      report();\n      // For as long as the they are touching the device or have their mouse down,\n      // we consider them active even if they're not moving their finger or mouse.\n      // So we want to continue to update that they are active\n      this.clearInterval(touchHolding);\n      // report at the same interval as activityCheck\n      touchHolding = this.setInterval(report, 250);\n    });\n\n    var touchEnd = function touchEnd(event) {\n      report();\n      // stop the interval that maintains activity if the touch is holding\n      this.clearInterval(touchHolding);\n    };\n\n    this.on('touchmove', report);\n    this.on('touchend', touchEnd);\n    this.on('touchcancel', touchEnd);\n  };\n\n  /**\n   * A callback that has no parameters and is bound into `Component`s context.\n   *\n   * @callback Component~GenericCallback\n   * @this Component\n   */\n\n  /**\n   * Creates a function that runs after an `x` millisecond timeout. This function is a\n   * wrapper around `window.setTimeout`. There are a few reasons to use this one\n   * instead though:\n   * 1. It gets cleared via  {@link Component#clearTimeout} when\n   *    {@link Component#dispose} gets called.\n   * 2. The function callback will gets turned into a {@link Component~GenericCallback}\n   *\n   * > Note: You can't use `window.clearTimeout` on the id returned by this function. This\n   *         will cause its dispose listener not to get cleaned up! Please use\n   *         {@link Component#clearTimeout} or {@link Component#dispose} instead.\n   *\n   * @param {Component~GenericCallback} fn\n   *        The function that will be run after `timeout`.\n   *\n   * @param {number} timeout\n   *        Timeout in milliseconds to delay before executing the specified function.\n   *\n   * @return {number}\n   *         Returns a timeout ID that gets used to identify the timeout. It can also\n   *         get used in {@link Component#clearTimeout} to clear the timeout that\n   *         was set.\n   *\n   * @listens Component#dispose\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setTimeout}\n   */\n\n\n  Component.prototype.setTimeout = function setTimeout(fn, timeout) {\n    var _this2 = this;\n\n    // declare as variables so they are properly available in timeout function\n    // eslint-disable-next-line\n    var timeoutId, disposeFn;\n\n    fn = bind(this, fn);\n\n    timeoutId = window.setTimeout(function () {\n      _this2.off('dispose', disposeFn);\n      fn();\n    }, timeout);\n\n    disposeFn = function disposeFn() {\n      return _this2.clearTimeout(timeoutId);\n    };\n\n    disposeFn.guid = 'vjs-timeout-' + timeoutId;\n\n    this.on('dispose', disposeFn);\n\n    return timeoutId;\n  };\n\n  /**\n   * Clears a timeout that gets created via `window.setTimeout` or\n   * {@link Component#setTimeout}. If you set a timeout via {@link Component#setTimeout}\n   * use this function instead of `window.clearTimout`. If you don't your dispose\n   * listener will not get cleaned up until {@link Component#dispose}!\n   *\n   * @param {number} timeoutId\n   *        The id of the timeout to clear. The return value of\n   *        {@link Component#setTimeout} or `window.setTimeout`.\n   *\n   * @return {number}\n   *         Returns the timeout id that was cleared.\n   *\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearTimeout}\n   */\n\n\n  Component.prototype.clearTimeout = function clearTimeout(timeoutId) {\n    window.clearTimeout(timeoutId);\n\n    var disposeFn = function disposeFn() {};\n\n    disposeFn.guid = 'vjs-timeout-' + timeoutId;\n\n    this.off('dispose', disposeFn);\n\n    return timeoutId;\n  };\n\n  /**\n   * Creates a function that gets run every `x` milliseconds. This function is a wrapper\n   * around `window.setInterval`. There are a few reasons to use this one instead though.\n   * 1. It gets cleared via  {@link Component#clearInterval} when\n   *    {@link Component#dispose} gets called.\n   * 2. The function callback will be a {@link Component~GenericCallback}\n   *\n   * @param {Component~GenericCallback} fn\n   *        The function to run every `x` seconds.\n   *\n   * @param {number} interval\n   *        Execute the specified function every `x` milliseconds.\n   *\n   * @return {number}\n   *         Returns an id that can be used to identify the interval. It can also be be used in\n   *         {@link Component#clearInterval} to clear the interval.\n   *\n   * @listens Component#dispose\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval}\n   */\n\n\n  Component.prototype.setInterval = function setInterval(fn, interval) {\n    var _this3 = this;\n\n    fn = bind(this, fn);\n\n    var intervalId = window.setInterval(fn, interval);\n\n    var disposeFn = function disposeFn() {\n      return _this3.clearInterval(intervalId);\n    };\n\n    disposeFn.guid = 'vjs-interval-' + intervalId;\n\n    this.on('dispose', disposeFn);\n\n    return intervalId;\n  };\n\n  /**\n   * Clears an interval that gets created via `window.setInterval` or\n   * {@link Component#setInterval}. If you set an inteval via {@link Component#setInterval}\n   * use this function instead of `window.clearInterval`. If you don't your dispose\n   * listener will not get cleaned up until {@link Component#dispose}!\n   *\n   * @param {number} intervalId\n   *        The id of the interval to clear. The return value of\n   *        {@link Component#setInterval} or `window.setInterval`.\n   *\n   * @return {number}\n   *         Returns the interval id that was cleared.\n   *\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearInterval}\n   */\n\n\n  Component.prototype.clearInterval = function clearInterval(intervalId) {\n    window.clearInterval(intervalId);\n\n    var disposeFn = function disposeFn() {};\n\n    disposeFn.guid = 'vjs-interval-' + intervalId;\n\n    this.off('dispose', disposeFn);\n\n    return intervalId;\n  };\n\n  /**\n   * Queues up a callback to be passed to requestAnimationFrame (rAF), but\n   * with a few extra bonuses:\n   *\n   * - Supports browsers that do not support rAF by falling back to\n   *   {@link Component#setTimeout}.\n   *\n   * - The callback is turned into a {@link Component~GenericCallback} (i.e.\n   *   bound to the component).\n   *\n   * - Automatic cancellation of the rAF callback is handled if the component\n   *   is disposed before it is called.\n   *\n   * @param  {Component~GenericCallback} fn\n   *         A function that will be bound to this component and executed just\n   *         before the browser's next repaint.\n   *\n   * @return {number}\n   *         Returns an rAF ID that gets used to identify the timeout. It can\n   *         also be used in {@link Component#cancelAnimationFrame} to cancel\n   *         the animation frame callback.\n   *\n   * @listens Component#dispose\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame}\n   */\n\n\n  Component.prototype.requestAnimationFrame = function requestAnimationFrame(fn) {\n    var _this4 = this;\n\n    // declare as variables so they are properly available in rAF function\n    // eslint-disable-next-line\n    var id, disposeFn;\n\n    if (this.supportsRaf_) {\n      fn = bind(this, fn);\n\n      id = window.requestAnimationFrame(function () {\n        _this4.off('dispose', disposeFn);\n        fn();\n      });\n\n      disposeFn = function disposeFn() {\n        return _this4.cancelAnimationFrame(id);\n      };\n\n      disposeFn.guid = 'vjs-raf-' + id;\n      this.on('dispose', disposeFn);\n\n      return id;\n    }\n\n    // Fall back to using a timer.\n    return this.setTimeout(fn, 1000 / 60);\n  };\n\n  /**\n   * Cancels a queued callback passed to {@link Component#requestAnimationFrame}\n   * (rAF).\n   *\n   * If you queue an rAF callback via {@link Component#requestAnimationFrame},\n   * use this function instead of `window.cancelAnimationFrame`. If you don't,\n   * your dispose listener will not get cleaned up until {@link Component#dispose}!\n   *\n   * @param {number} id\n   *        The rAF ID to clear. The return value of {@link Component#requestAnimationFrame}.\n   *\n   * @return {number}\n   *         Returns the rAF ID that was cleared.\n   *\n   * @see [Similar to]{@link https://developer.mozilla.org/en-US/docs/Web/API/window/cancelAnimationFrame}\n   */\n\n\n  Component.prototype.cancelAnimationFrame = function cancelAnimationFrame(id) {\n    if (this.supportsRaf_) {\n      window.cancelAnimationFrame(id);\n\n      var disposeFn = function disposeFn() {};\n\n      disposeFn.guid = 'vjs-raf-' + id;\n\n      this.off('dispose', disposeFn);\n\n      return id;\n    }\n\n    // Fall back to using a timer.\n    return this.clearTimeout(id);\n  };\n\n  /**\n   * Register a `Component` with `videojs` given the name and the component.\n   *\n   * > NOTE: {@link Tech}s should not be registered as a `Component`. {@link Tech}s\n   *         should be registered using {@link Tech.registerTech} or\n   *         {@link videojs:videojs.registerTech}.\n   *\n   * > NOTE: This function can also be seen on videojs as\n   *         {@link videojs:videojs.registerComponent}.\n   *\n   * @param {string} name\n   *        The name of the `Component` to register.\n   *\n   * @param {Component} ComponentToRegister\n   *        The `Component` class to register.\n   *\n   * @return {Component}\n   *         The `Component` that was registered.\n   */\n\n\n  Component.registerComponent = function registerComponent(name, ComponentToRegister) {\n    if (typeof name !== 'string' || !name) {\n      throw new Error('Illegal component name, \"' + name + '\"; must be a non-empty string.');\n    }\n\n    var Tech = Component.getComponent('Tech');\n\n    // We need to make sure this check is only done if Tech has been registered.\n    var isTech = Tech && Tech.isTech(ComponentToRegister);\n    var isComp = Component === ComponentToRegister || Component.prototype.isPrototypeOf(ComponentToRegister.prototype);\n\n    if (isTech || !isComp) {\n      var reason = void 0;\n\n      if (isTech) {\n        reason = 'techs must be registered using Tech.registerTech()';\n      } else {\n        reason = 'must be a Component subclass';\n      }\n\n      throw new Error('Illegal component, \"' + name + '\"; ' + reason + '.');\n    }\n\n    name = toTitleCase(name);\n\n    if (!Component.components_) {\n      Component.components_ = {};\n    }\n\n    var Player = Component.getComponent('Player');\n\n    if (name === 'Player' && Player && Player.players) {\n      var players = Player.players;\n      var playerNames = Object.keys(players);\n\n      // If we have players that were disposed, then their name will still be\n      // in Players.players. So, we must loop through and verify that the value\n      // for each item is not null. This allows registration of the Player component\n      // after all players have been disposed or before any were created.\n      if (players && playerNames.length > 0 && playerNames.map(function (pname) {\n        return players[pname];\n      }).every(Boolean)) {\n        throw new Error('Can not register Player component after player has been created.');\n      }\n    }\n\n    Component.components_[name] = ComponentToRegister;\n\n    return ComponentToRegister;\n  };\n\n  /**\n   * Get a `Component` based on the name it was registered with.\n   *\n   * @param {string} name\n   *        The Name of the component to get.\n   *\n   * @return {Component}\n   *         The `Component` that got registered under the given name.\n   *\n   * @deprecated In `videojs` 6 this will not return `Component`s that were not\n   *             registered using {@link Component.registerComponent}. Currently we\n   *             check the global `videojs` object for a `Component` name and\n   *             return that if it exists.\n   */\n\n\n  Component.getComponent = function getComponent(name) {\n    if (!name) {\n      return;\n    }\n\n    name = toTitleCase(name);\n\n    if (Component.components_ && Component.components_[name]) {\n      return Component.components_[name];\n    }\n  };\n\n  return Component;\n}();\n\n/**\n * Whether or not this component supports `requestAnimationFrame`.\n *\n * This is exposed primarily for testing purposes.\n *\n * @private\n * @type {Boolean}\n */\n\n\nComponent.prototype.supportsRaf_ = typeof window.requestAnimationFrame === 'function' && typeof window.cancelAnimationFrame === 'function';\n\nComponent.registerComponent('Component', Component);\n\n/**\n * @file time-ranges.js\n * @module time-ranges\n */\n\n/**\n * Returns the time for the specified index at the start or end\n * of a TimeRange object.\n *\n * @function time-ranges:indexFunction\n *\n * @param {number} [index=0]\n *        The range number to return the time for.\n *\n * @return {number}\n *         The time that offset at the specified index.\n *\n * @depricated index must be set to a value, in the future this will throw an error.\n */\n\n/**\n * An object that contains ranges of time for various reasons.\n *\n * @typedef {Object} TimeRange\n *\n * @property {number} length\n *           The number of time ranges represented by this Object\n *\n * @property {time-ranges:indexFunction} start\n *           Returns the time offset at which a specified time range begins.\n *\n * @property {time-ranges:indexFunction} end\n *           Returns the time offset at which a specified time range ends.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges\n */\n\n/**\n * Check if any of the time ranges are over the maximum index.\n *\n * @param {string} fnName\n *        The function name to use for logging\n *\n * @param {number} index\n *        The index to check\n *\n * @param {number} maxIndex\n *        The maximum possible index\n *\n * @throws {Error} if the timeRanges provided are over the maxIndex\n */\nfunction rangeCheck(fnName, index, maxIndex) {\n  if (typeof index !== 'number' || index < 0 || index > maxIndex) {\n    throw new Error('Failed to execute \\'' + fnName + '\\' on \\'TimeRanges\\': The index provided (' + index + ') is non-numeric or out of bounds (0-' + maxIndex + ').');\n  }\n}\n\n/**\n * Get the time for the specified index at the start or end\n * of a TimeRange object.\n *\n * @param {string} fnName\n *        The function name to use for logging\n *\n * @param {string} valueIndex\n *        The proprety that should be used to get the time. should be 'start' or 'end'\n *\n * @param {Array} ranges\n *        An array of time ranges\n *\n * @param {Array} [rangeIndex=0]\n *        The index to start the search at\n *\n * @return {number}\n *         The time that offset at the specified index.\n *\n *\n * @depricated rangeIndex must be set to a value, in the future this will throw an error.\n * @throws {Error} if rangeIndex is more than the length of ranges\n */\nfunction getRange(fnName, valueIndex, ranges, rangeIndex) {\n  rangeCheck(fnName, rangeIndex, ranges.length - 1);\n  return ranges[rangeIndex][valueIndex];\n}\n\n/**\n * Create a time range object given ranges of time.\n *\n * @param {Array} [ranges]\n *        An array of time ranges.\n */\nfunction createTimeRangesObj(ranges) {\n  if (ranges === undefined || ranges.length === 0) {\n    return {\n      length: 0,\n      start: function start() {\n        throw new Error('This TimeRanges object is empty');\n      },\n      end: function end() {\n        throw new Error('This TimeRanges object is empty');\n      }\n    };\n  }\n  return {\n    length: ranges.length,\n    start: getRange.bind(null, 'start', 0, ranges),\n    end: getRange.bind(null, 'end', 1, ranges)\n  };\n}\n\n/**\n * Should create a fake `TimeRange` object which mimics an HTML5 time range instance.\n *\n * @param {number|Array} start\n *        The start of a single range or an array of ranges\n *\n * @param {number} end\n *        The end of a single range.\n *\n * @private\n */\nfunction createTimeRanges(start, end) {\n  if (Array.isArray(start)) {\n    return createTimeRangesObj(start);\n  } else if (start === undefined || end === undefined) {\n    return createTimeRangesObj();\n  }\n  return createTimeRangesObj([[start, end]]);\n}\n\n/**\n * @file buffer.js\n * @module buffer\n */\n/**\n * Compute the percentage of the media that has been buffered.\n *\n * @param {TimeRange} buffered\n *        The current `TimeRange` object representing buffered time ranges\n *\n * @param {number} duration\n *        Total duration of the media\n *\n * @return {number}\n *         Percent buffered of the total duration in decimal form.\n */\nfunction bufferedPercent(buffered, duration) {\n  var bufferedDuration = 0;\n  var start = void 0;\n  var end = void 0;\n\n  if (!duration) {\n    return 0;\n  }\n\n  if (!buffered || !buffered.length) {\n    buffered = createTimeRanges(0, 0);\n  }\n\n  for (var i = 0; i < buffered.length; i++) {\n    start = buffered.start(i);\n    end = buffered.end(i);\n\n    // buffered end can be bigger than duration by a very small fraction\n    if (end > duration) {\n      end = duration;\n    }\n\n    bufferedDuration += end - start;\n  }\n\n  return bufferedDuration / duration;\n}\n\n/**\n * @file fullscreen-api.js\n * @module fullscreen-api\n * @private\n */\n/**\n * Store the browser-specific methods for the fullscreen API.\n *\n * @type {Object}\n * @see [Specification]{@link https://fullscreen.spec.whatwg.org}\n * @see [Map Approach From Screenfull.js]{@link https://github.com/sindresorhus/screenfull.js}\n */\nvar FullscreenApi = {};\n\n// browser API methods\nvar apiMap = [['requestFullscreen', 'exitFullscreen', 'fullscreenElement', 'fullscreenEnabled', 'fullscreenchange', 'fullscreenerror'],\n// WebKit\n['webkitRequestFullscreen', 'webkitExitFullscreen', 'webkitFullscreenElement', 'webkitFullscreenEnabled', 'webkitfullscreenchange', 'webkitfullscreenerror'],\n// Old WebKit (Safari 5.1)\n['webkitRequestFullScreen', 'webkitCancelFullScreen', 'webkitCurrentFullScreenElement', 'webkitCancelFullScreen', 'webkitfullscreenchange', 'webkitfullscreenerror'],\n// Mozilla\n['mozRequestFullScreen', 'mozCancelFullScreen', 'mozFullScreenElement', 'mozFullScreenEnabled', 'mozfullscreenchange', 'mozfullscreenerror'],\n// Microsoft\n['msRequestFullscreen', 'msExitFullscreen', 'msFullscreenElement', 'msFullscreenEnabled', 'MSFullscreenChange', 'MSFullscreenError']];\n\nvar specApi = apiMap[0];\nvar browserApi = void 0;\n\n// determine the supported set of functions\nfor (var i = 0; i < apiMap.length; i++) {\n  // check for exitFullscreen function\n  if (apiMap[i][1] in document) {\n    browserApi = apiMap[i];\n    break;\n  }\n}\n\n// map the browser API names to the spec API names\nif (browserApi) {\n  for (var _i = 0; _i < browserApi.length; _i++) {\n    FullscreenApi[specApi[_i]] = browserApi[_i];\n  }\n}\n\n/**\n * @file media-error.js\n */\n/**\n * A Custom `MediaError` class which mimics the standard HTML5 `MediaError` class.\n *\n * @param {number|string|Object|MediaError} value\n *        This can be of multiple types:\n *        - number: should be a standard error code\n *        - string: an error message (the code will be 0)\n *        - Object: arbitrary properties\n *        - `MediaError` (native): used to populate a video.js `MediaError` object\n *        - `MediaError` (video.js): will return itself if it's already a\n *          video.js `MediaError` object.\n *\n * @see [MediaError Spec]{@link https://dev.w3.org/html5/spec-author-view/video.html#mediaerror}\n * @see [Encrypted MediaError Spec]{@link https://www.w3.org/TR/2013/WD-encrypted-media-20130510/#error-codes}\n *\n * @class MediaError\n */\nfunction MediaError(value) {\n\n  // Allow redundant calls to this constructor to avoid having `instanceof`\n  // checks peppered around the code.\n  if (value instanceof MediaError) {\n    return value;\n  }\n\n  if (typeof value === 'number') {\n    this.code = value;\n  } else if (typeof value === 'string') {\n    // default code is zero, so this is a custom error\n    this.message = value;\n  } else if (isObject(value)) {\n\n    // We assign the `code` property manually because native `MediaError` objects\n    // do not expose it as an own/enumerable property of the object.\n    if (typeof value.code === 'number') {\n      this.code = value.code;\n    }\n\n    assign(this, value);\n  }\n\n  if (!this.message) {\n    this.message = MediaError.defaultMessages[this.code] || '';\n  }\n}\n\n/**\n * The error code that refers two one of the defined `MediaError` types\n *\n * @type {Number}\n */\nMediaError.prototype.code = 0;\n\n/**\n * An optional message that to show with the error. Message is not part of the HTML5\n * video spec but allows for more informative custom errors.\n *\n * @type {String}\n */\nMediaError.prototype.message = '';\n\n/**\n * An optional status code that can be set by plugins to allow even more detail about\n * the error. For example a plugin might provide a specific HTTP status code and an\n * error message for that code. Then when the plugin gets that error this class will\n * know how to display an error message for it. This allows a custom message to show\n * up on the `Player` error overlay.\n *\n * @type {Array}\n */\nMediaError.prototype.status = null;\n\n/**\n * Errors indexed by the W3C standard. The order **CANNOT CHANGE**! See the\n * specification listed under {@link MediaError} for more information.\n *\n * @enum {array}\n * @readonly\n * @property {string} 0 - MEDIA_ERR_CUSTOM\n * @property {string} 1 - MEDIA_ERR_CUSTOM\n * @property {string} 2 - MEDIA_ERR_ABORTED\n * @property {string} 3 - MEDIA_ERR_NETWORK\n * @property {string} 4 - MEDIA_ERR_SRC_NOT_SUPPORTED\n * @property {string} 5 - MEDIA_ERR_ENCRYPTED\n */\nMediaError.errorTypes = ['MEDIA_ERR_CUSTOM', 'MEDIA_ERR_ABORTED', 'MEDIA_ERR_NETWORK', 'MEDIA_ERR_DECODE', 'MEDIA_ERR_SRC_NOT_SUPPORTED', 'MEDIA_ERR_ENCRYPTED'];\n\n/**\n * The default `MediaError` messages based on the {@link MediaError.errorTypes}.\n *\n * @type {Array}\n * @constant\n */\nMediaError.defaultMessages = {\n  1: 'You aborted the media playback',\n  2: 'A network error caused the media download to fail part-way.',\n  3: 'The media playback was aborted due to a corruption problem or because the media used features your browser did not support.',\n  4: 'The media could not be loaded, either because the server or network failed or because the format is not supported.',\n  5: 'The media is encrypted and we do not have the keys to decrypt it.'\n};\n\n// Add types as properties on MediaError\n// e.g. MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED = 4;\nfor (var errNum = 0; errNum < MediaError.errorTypes.length; errNum++) {\n  MediaError[MediaError.errorTypes[errNum]] = errNum;\n  // values should be accessible on both the class and instance\n  MediaError.prototype[MediaError.errorTypes[errNum]] = errNum;\n}\n\n/**\n * Returns whether an object is `Promise`-like (i.e. has a `then` method).\n *\n * @param  {Object}  value\n *         An object that may or may not be `Promise`-like.\n *\n * @return {Boolean}\n *         Whether or not the object is `Promise`-like.\n */\nfunction isPromise(value) {\n  return value !== undefined && value !== null && typeof value.then === 'function';\n}\n\n/**\n * Silence a Promise-like object.\n *\n * This is useful for avoiding non-harmful, but potentially confusing \"uncaught\n * play promise\" rejection error messages.\n *\n * @param  {Object} value\n *         An object that may or may not be `Promise`-like.\n */\nfunction silencePromise(value) {\n  if (isPromise(value)) {\n    value.then(null, function (e) {});\n  }\n}\n\n/**\n * @file text-track-list-converter.js Utilities for capturing text track state and\n * re-creating tracks based on a capture.\n *\n * @module text-track-list-converter\n */\n\n/**\n * Examine a single {@link TextTrack} and return a JSON-compatible javascript object that\n * represents the {@link TextTrack}'s state.\n *\n * @param {TextTrack} track\n *        The text track to query.\n *\n * @return {Object}\n *         A serializable javascript representation of the TextTrack.\n * @private\n */\nvar trackToJson_ = function trackToJson_(track) {\n  var ret = ['kind', 'label', 'language', 'id', 'inBandMetadataTrackDispatchType', 'mode', 'src'].reduce(function (acc, prop, i) {\n\n    if (track[prop]) {\n      acc[prop] = track[prop];\n    }\n\n    return acc;\n  }, {\n    cues: track.cues && Array.prototype.map.call(track.cues, function (cue) {\n      return {\n        startTime: cue.startTime,\n        endTime: cue.endTime,\n        text: cue.text,\n        id: cue.id\n      };\n    })\n  });\n\n  return ret;\n};\n\n/**\n * Examine a {@link Tech} and return a JSON-compatible javascript array that represents the\n * state of all {@link TextTrack}s currently configured. The return array is compatible with\n * {@link text-track-list-converter:jsonToTextTracks}.\n *\n * @param {Tech} tech\n *        The tech object to query\n *\n * @return {Array}\n *         A serializable javascript representation of the {@link Tech}s\n *         {@link TextTrackList}.\n */\nvar textTracksToJson = function textTracksToJson(tech) {\n\n  var trackEls = tech.$$('track');\n\n  var trackObjs = Array.prototype.map.call(trackEls, function (t) {\n    return t.track;\n  });\n  var tracks = Array.prototype.map.call(trackEls, function (trackEl) {\n    var json = trackToJson_(trackEl.track);\n\n    if (trackEl.src) {\n      json.src = trackEl.src;\n    }\n    return json;\n  });\n\n  return tracks.concat(Array.prototype.filter.call(tech.textTracks(), function (track) {\n    return trackObjs.indexOf(track) === -1;\n  }).map(trackToJson_));\n};\n\n/**\n * Create a set of remote {@link TextTrack}s on a {@link Tech} based on an array of javascript\n * object {@link TextTrack} representations.\n *\n * @param {Array} json\n *        An array of `TextTrack` representation objects, like those that would be\n *        produced by `textTracksToJson`.\n *\n * @param {Tech} tech\n *        The `Tech` to create the `TextTrack`s on.\n */\nvar jsonToTextTracks = function jsonToTextTracks(json, tech) {\n  json.forEach(function (track) {\n    var addedTrack = tech.addRemoteTextTrack(track).track;\n\n    if (!track.src && track.cues) {\n      track.cues.forEach(function (cue) {\n        return addedTrack.addCue(cue);\n      });\n    }\n  });\n\n  return tech.textTracks();\n};\n\nvar textTrackConverter = { textTracksToJson: textTracksToJson, jsonToTextTracks: jsonToTextTracks, trackToJson_: trackToJson_ };\n\n/**\n * @file modal-dialog.js\n */\nvar MODAL_CLASS_NAME = 'vjs-modal-dialog';\nvar ESC = 27;\n\n/**\n * The `ModalDialog` displays over the video and its controls, which blocks\n * interaction with the player until it is closed.\n *\n * Modal dialogs include a \"Close\" button and will close when that button\n * is activated - or when ESC is pressed anywhere.\n *\n * @extends Component\n */\n\nvar ModalDialog = function (_Component) {\n  inherits(ModalDialog, _Component);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Mixed} [options.content=undefined]\n   *        Provide customized content for this modal.\n   *\n   * @param {string} [options.description]\n   *        A text description for the modal, primarily for accessibility.\n   *\n   * @param {boolean} [options.fillAlways=false]\n   *        Normally, modals are automatically filled only the first time\n   *        they open. This tells the modal to refresh its content\n   *        every time it opens.\n   *\n   * @param {string} [options.label]\n   *        A text label for the modal, primarily for accessibility.\n   *\n   * @param {boolean} [options.temporary=true]\n   *        If `true`, the modal can only be opened once; it will be\n   *        disposed as soon as it's closed.\n   *\n   * @param {boolean} [options.uncloseable=false]\n   *        If `true`, the user will not be able to close the modal\n   *        through the UI in the normal ways. Programmatic closing is\n   *        still possible.\n   */\n  function ModalDialog(player, options) {\n    classCallCheck(this, ModalDialog);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.opened_ = _this.hasBeenOpened_ = _this.hasBeenFilled_ = false;\n\n    _this.closeable(!_this.options_.uncloseable);\n    _this.content(_this.options_.content);\n\n    // Make sure the contentEl is defined AFTER any children are initialized\n    // because we only want the contents of the modal in the contentEl\n    // (not the UI elements like the close button).\n    _this.contentEl_ = createEl('div', {\n      className: MODAL_CLASS_NAME + '-content'\n    }, {\n      role: 'document'\n    });\n\n    _this.descEl_ = createEl('p', {\n      className: MODAL_CLASS_NAME + '-description vjs-control-text',\n      id: _this.el().getAttribute('aria-describedby')\n    });\n\n    textContent(_this.descEl_, _this.description());\n    _this.el_.appendChild(_this.descEl_);\n    _this.el_.appendChild(_this.contentEl_);\n    return _this;\n  }\n\n  /**\n   * Create the `ModalDialog`'s DOM element\n   *\n   * @return {Element}\n   *         The DOM element that gets created.\n   */\n\n\n  ModalDialog.prototype.createEl = function createEl$$1() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: this.buildCSSClass(),\n      tabIndex: -1\n    }, {\n      'aria-describedby': this.id() + '_description',\n      'aria-hidden': 'true',\n      'aria-label': this.label(),\n      'role': 'dialog'\n    });\n  };\n\n  ModalDialog.prototype.dispose = function dispose() {\n    this.contentEl_ = null;\n    this.descEl_ = null;\n    this.previouslyActiveEl_ = null;\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  ModalDialog.prototype.buildCSSClass = function buildCSSClass() {\n    return MODAL_CLASS_NAME + ' vjs-hidden ' + _Component.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * Handles `keydown` events on the document, looking for ESC, which closes\n   * the modal.\n   *\n   * @param {EventTarget~Event} e\n   *        The keypress that triggered this event.\n   *\n   * @listens keydown\n   */\n\n\n  ModalDialog.prototype.handleKeyPress = function handleKeyPress(e) {\n    if (e.which === ESC && this.closeable()) {\n      this.close();\n    }\n  };\n\n  /**\n   * Returns the label string for this modal. Primarily used for accessibility.\n   *\n   * @return {string}\n   *         the localized or raw label of this modal.\n   */\n\n\n  ModalDialog.prototype.label = function label() {\n    return this.localize(this.options_.label || 'Modal Window');\n  };\n\n  /**\n   * Returns the description string for this modal. Primarily used for\n   * accessibility.\n   *\n   * @return {string}\n   *         The localized or raw description of this modal.\n   */\n\n\n  ModalDialog.prototype.description = function description() {\n    var desc = this.options_.description || this.localize('This is a modal window.');\n\n    // Append a universal closeability message if the modal is closeable.\n    if (this.closeable()) {\n      desc += ' ' + this.localize('This modal can be closed by pressing the Escape key or activating the close button.');\n    }\n\n    return desc;\n  };\n\n  /**\n   * Opens the modal.\n   *\n   * @fires ModalDialog#beforemodalopen\n   * @fires ModalDialog#modalopen\n   */\n\n\n  ModalDialog.prototype.open = function open() {\n    if (!this.opened_) {\n      var player = this.player();\n\n      /**\n        * Fired just before a `ModalDialog` is opened.\n        *\n        * @event ModalDialog#beforemodalopen\n        * @type {EventTarget~Event}\n        */\n      this.trigger('beforemodalopen');\n      this.opened_ = true;\n\n      // Fill content if the modal has never opened before and\n      // never been filled.\n      if (this.options_.fillAlways || !this.hasBeenOpened_ && !this.hasBeenFilled_) {\n        this.fill();\n      }\n\n      // If the player was playing, pause it and take note of its previously\n      // playing state.\n      this.wasPlaying_ = !player.paused();\n\n      if (this.options_.pauseOnOpen && this.wasPlaying_) {\n        player.pause();\n      }\n\n      if (this.closeable()) {\n        this.on(this.el_.ownerDocument, 'keydown', bind(this, this.handleKeyPress));\n      }\n\n      // Hide controls and note if they were enabled.\n      this.hadControls_ = player.controls();\n      player.controls(false);\n\n      this.show();\n      this.conditionalFocus_();\n      this.el().setAttribute('aria-hidden', 'false');\n\n      /**\n        * Fired just after a `ModalDialog` is opened.\n        *\n        * @event ModalDialog#modalopen\n        * @type {EventTarget~Event}\n        */\n      this.trigger('modalopen');\n      this.hasBeenOpened_ = true;\n    }\n  };\n\n  /**\n   * If the `ModalDialog` is currently open or closed.\n   *\n   * @param  {boolean} [value]\n   *         If given, it will open (`true`) or close (`false`) the modal.\n   *\n   * @return {boolean}\n   *         the current open state of the modaldialog\n   */\n\n\n  ModalDialog.prototype.opened = function opened(value) {\n    if (typeof value === 'boolean') {\n      this[value ? 'open' : 'close']();\n    }\n    return this.opened_;\n  };\n\n  /**\n   * Closes the modal, does nothing if the `ModalDialog` is\n   * not open.\n   *\n   * @fires ModalDialog#beforemodalclose\n   * @fires ModalDialog#modalclose\n   */\n\n\n  ModalDialog.prototype.close = function close() {\n    if (!this.opened_) {\n      return;\n    }\n    var player = this.player();\n\n    /**\n      * Fired just before a `ModalDialog` is closed.\n      *\n      * @event ModalDialog#beforemodalclose\n      * @type {EventTarget~Event}\n      */\n    this.trigger('beforemodalclose');\n    this.opened_ = false;\n\n    if (this.wasPlaying_ && this.options_.pauseOnOpen) {\n      player.play();\n    }\n\n    if (this.closeable()) {\n      this.off(this.el_.ownerDocument, 'keydown', bind(this, this.handleKeyPress));\n    }\n\n    if (this.hadControls_) {\n      player.controls(true);\n    }\n\n    this.hide();\n    this.el().setAttribute('aria-hidden', 'true');\n\n    /**\n      * Fired just after a `ModalDialog` is closed.\n      *\n      * @event ModalDialog#modalclose\n      * @type {EventTarget~Event}\n      */\n    this.trigger('modalclose');\n    this.conditionalBlur_();\n\n    if (this.options_.temporary) {\n      this.dispose();\n    }\n  };\n\n  /**\n   * Check to see if the `ModalDialog` is closeable via the UI.\n   *\n   * @param  {boolean} [value]\n   *         If given as a boolean, it will set the `closeable` option.\n   *\n   * @return {boolean}\n   *         Returns the final value of the closable option.\n   */\n\n\n  ModalDialog.prototype.closeable = function closeable(value) {\n    if (typeof value === 'boolean') {\n      var closeable = this.closeable_ = !!value;\n      var close = this.getChild('closeButton');\n\n      // If this is being made closeable and has no close button, add one.\n      if (closeable && !close) {\n\n        // The close button should be a child of the modal - not its\n        // content element, so temporarily change the content element.\n        var temp = this.contentEl_;\n\n        this.contentEl_ = this.el_;\n        close = this.addChild('closeButton', { controlText: 'Close Modal Dialog' });\n        this.contentEl_ = temp;\n        this.on(close, 'close', this.close);\n      }\n\n      // If this is being made uncloseable and has a close button, remove it.\n      if (!closeable && close) {\n        this.off(close, 'close', this.close);\n        this.removeChild(close);\n        close.dispose();\n      }\n    }\n    return this.closeable_;\n  };\n\n  /**\n   * Fill the modal's content element with the modal's \"content\" option.\n   * The content element will be emptied before this change takes place.\n   */\n\n\n  ModalDialog.prototype.fill = function fill() {\n    this.fillWith(this.content());\n  };\n\n  /**\n   * Fill the modal's content element with arbitrary content.\n   * The content element will be emptied before this change takes place.\n   *\n   * @fires ModalDialog#beforemodalfill\n   * @fires ModalDialog#modalfill\n   *\n   * @param {Mixed} [content]\n   *        The same rules apply to this as apply to the `content` option.\n   */\n\n\n  ModalDialog.prototype.fillWith = function fillWith(content) {\n    var contentEl = this.contentEl();\n    var parentEl = contentEl.parentNode;\n    var nextSiblingEl = contentEl.nextSibling;\n\n    /**\n     * Fired just before a `ModalDialog` is filled with content.\n     *\n     * @event ModalDialog#beforemodalfill\n     * @type {EventTarget~Event}\n     */\n    this.trigger('beforemodalfill');\n    this.hasBeenFilled_ = true;\n\n    // Detach the content element from the DOM before performing\n    // manipulation to avoid modifying the live DOM multiple times.\n    parentEl.removeChild(contentEl);\n    this.empty();\n    insertContent(contentEl, content);\n    /**\n     * Fired just after a `ModalDialog` is filled with content.\n     *\n     * @event ModalDialog#modalfill\n     * @type {EventTarget~Event}\n     */\n    this.trigger('modalfill');\n\n    // Re-inject the re-filled content element.\n    if (nextSiblingEl) {\n      parentEl.insertBefore(contentEl, nextSiblingEl);\n    } else {\n      parentEl.appendChild(contentEl);\n    }\n\n    // make sure that the close button is last in the dialog DOM\n    var closeButton = this.getChild('closeButton');\n\n    if (closeButton) {\n      parentEl.appendChild(closeButton.el_);\n    }\n  };\n\n  /**\n   * Empties the content element. This happens anytime the modal is filled.\n   *\n   * @fires ModalDialog#beforemodalempty\n   * @fires ModalDialog#modalempty\n   */\n\n\n  ModalDialog.prototype.empty = function empty() {\n    /**\n     * Fired just before a `ModalDialog` is emptied.\n     *\n     * @event ModalDialog#beforemodalempty\n     * @type {EventTarget~Event}\n     */\n    this.trigger('beforemodalempty');\n    emptyEl(this.contentEl());\n\n    /**\n     * Fired just after a `ModalDialog` is emptied.\n     *\n     * @event ModalDialog#modalempty\n     * @type {EventTarget~Event}\n     */\n    this.trigger('modalempty');\n  };\n\n  /**\n   * Gets or sets the modal content, which gets normalized before being\n   * rendered into the DOM.\n   *\n   * This does not update the DOM or fill the modal, but it is called during\n   * that process.\n   *\n   * @param  {Mixed} [value]\n   *         If defined, sets the internal content value to be used on the\n   *         next call(s) to `fill`. This value is normalized before being\n   *         inserted. To \"clear\" the internal content value, pass `null`.\n   *\n   * @return {Mixed}\n   *         The current content of the modal dialog\n   */\n\n\n  ModalDialog.prototype.content = function content(value) {\n    if (typeof value !== 'undefined') {\n      this.content_ = value;\n    }\n    return this.content_;\n  };\n\n  /**\n   * conditionally focus the modal dialog if focus was previously on the player.\n   *\n   * @private\n   */\n\n\n  ModalDialog.prototype.conditionalFocus_ = function conditionalFocus_() {\n    var activeEl = document.activeElement;\n    var playerEl = this.player_.el_;\n\n    this.previouslyActiveEl_ = null;\n\n    if (playerEl.contains(activeEl) || playerEl === activeEl) {\n      this.previouslyActiveEl_ = activeEl;\n\n      this.focus();\n\n      this.on(document, 'keydown', this.handleKeyDown);\n    }\n  };\n\n  /**\n   * conditionally blur the element and refocus the last focused element\n   *\n   * @private\n   */\n\n\n  ModalDialog.prototype.conditionalBlur_ = function conditionalBlur_() {\n    if (this.previouslyActiveEl_) {\n      this.previouslyActiveEl_.focus();\n      this.previouslyActiveEl_ = null;\n    }\n\n    this.off(document, 'keydown', this.handleKeyDown);\n  };\n\n  /**\n   * Keydown handler. Attached when modal is focused.\n   *\n   * @listens keydown\n   */\n\n\n  ModalDialog.prototype.handleKeyDown = function handleKeyDown(event) {\n    // exit early if it isn't a tab key\n    if (event.which !== 9) {\n      return;\n    }\n\n    var focusableEls = this.focusableEls_();\n    var activeEl = this.el_.querySelector(':focus');\n    var focusIndex = void 0;\n\n    for (var i = 0; i < focusableEls.length; i++) {\n      if (activeEl === focusableEls[i]) {\n        focusIndex = i;\n        break;\n      }\n    }\n\n    if (document.activeElement === this.el_) {\n      focusIndex = 0;\n    }\n\n    if (event.shiftKey && focusIndex === 0) {\n      focusableEls[focusableEls.length - 1].focus();\n      event.preventDefault();\n    } else if (!event.shiftKey && focusIndex === focusableEls.length - 1) {\n      focusableEls[0].focus();\n      event.preventDefault();\n    }\n  };\n\n  /**\n   * get all focusable elements\n   *\n   * @private\n   */\n\n\n  ModalDialog.prototype.focusableEls_ = function focusableEls_() {\n    var allChildren = this.el_.querySelectorAll('*');\n\n    return Array.prototype.filter.call(allChildren, function (child) {\n      return (child instanceof window.HTMLAnchorElement || child instanceof window.HTMLAreaElement) && child.hasAttribute('href') || (child instanceof window.HTMLInputElement || child instanceof window.HTMLSelectElement || child instanceof window.HTMLTextAreaElement || child instanceof window.HTMLButtonElement) && !child.hasAttribute('disabled') || child instanceof window.HTMLIFrameElement || child instanceof window.HTMLObjectElement || child instanceof window.HTMLEmbedElement || child.hasAttribute('tabindex') && child.getAttribute('tabindex') !== -1 || child.hasAttribute('contenteditable');\n    });\n  };\n\n  return ModalDialog;\n}(Component);\n\n/**\n * Default options for `ModalDialog` default options.\n *\n * @type {Object}\n * @private\n */\n\n\nModalDialog.prototype.options_ = {\n  pauseOnOpen: true,\n  temporary: true\n};\n\nComponent.registerComponent('ModalDialog', ModalDialog);\n\n/**\n * @file track-list.js\n */\n/**\n * Common functionaliy between {@link TextTrackList}, {@link AudioTrackList}, and\n * {@link VideoTrackList}\n *\n * @extends EventTarget\n */\n\nvar TrackList = function (_EventTarget) {\n  inherits(TrackList, _EventTarget);\n\n  /**\n   * Create an instance of this class\n   *\n   * @param {Track[]} tracks\n   *        A list of tracks to initialize the list with.\n   *\n   * @param {Object} [list]\n   *        The child object with inheritance done manually for ie8.\n   *\n   * @abstract\n   */\n  function TrackList() {\n    var tracks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    var _ret;\n\n    var list = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    classCallCheck(this, TrackList);\n\n    var _this = possibleConstructorReturn(this, _EventTarget.call(this));\n\n    if (!list) {\n      list = _this; // eslint-disable-line\n      if (IS_IE8) {\n        list = document.createElement('custom');\n        for (var prop in TrackList.prototype) {\n          if (prop !== 'constructor') {\n            list[prop] = TrackList.prototype[prop];\n          }\n        }\n      }\n    }\n\n    list.tracks_ = [];\n\n    /**\n     * @memberof TrackList\n     * @member {number} length\n     *         The current number of `Track`s in the this Trackist.\n     * @instance\n     */\n    Object.defineProperty(list, 'length', {\n      get: function get$$1() {\n        return this.tracks_.length;\n      }\n    });\n\n    for (var i = 0; i < tracks.length; i++) {\n      list.addTrack(tracks[i]);\n    }\n\n    // must return the object, as for ie8 it will not be this\n    // but a reference to a document object\n    return _ret = list, possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * Add a {@link Track} to the `TrackList`\n   *\n   * @param {Track} track\n   *        The audio, video, or text track to add to the list.\n   *\n   * @fires TrackList#addtrack\n   */\n\n\n  TrackList.prototype.addTrack = function addTrack(track) {\n    var index = this.tracks_.length;\n\n    if (!('' + index in this)) {\n      Object.defineProperty(this, index, {\n        get: function get$$1() {\n          return this.tracks_[index];\n        }\n      });\n    }\n\n    // Do not add duplicate tracks\n    if (this.tracks_.indexOf(track) === -1) {\n      this.tracks_.push(track);\n      /**\n       * Triggered when a track is added to a track list.\n       *\n       * @event TrackList#addtrack\n       * @type {EventTarget~Event}\n       * @property {Track} track\n       *           A reference to track that was added.\n       */\n      this.trigger({\n        track: track,\n        type: 'addtrack'\n      });\n    }\n  };\n\n  /**\n   * Remove a {@link Track} from the `TrackList`\n   *\n   * @param {Track} rtrack\n   *        The audio, video, or text track to remove from the list.\n   *\n   * @fires TrackList#removetrack\n   */\n\n\n  TrackList.prototype.removeTrack = function removeTrack(rtrack) {\n    var track = void 0;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n      if (this[i] === rtrack) {\n        track = this[i];\n        if (track.off) {\n          track.off();\n        }\n\n        this.tracks_.splice(i, 1);\n\n        break;\n      }\n    }\n\n    if (!track) {\n      return;\n    }\n\n    /**\n     * Triggered when a track is removed from track list.\n     *\n     * @event TrackList#removetrack\n     * @type {EventTarget~Event}\n     * @property {Track} track\n     *           A reference to track that was removed.\n     */\n    this.trigger({\n      track: track,\n      type: 'removetrack'\n    });\n  };\n\n  /**\n   * Get a Track from the TrackList by a tracks id\n   *\n   * @param {String} id - the id of the track to get\n   * @method getTrackById\n   * @return {Track}\n   * @private\n   */\n\n\n  TrackList.prototype.getTrackById = function getTrackById(id) {\n    var result = null;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n      var track = this[i];\n\n      if (track.id === id) {\n        result = track;\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  return TrackList;\n}(EventTarget);\n\n/**\n * Triggered when a different track is selected/enabled.\n *\n * @event TrackList#change\n * @type {EventTarget~Event}\n */\n\n/**\n * Events that can be called with on + eventName. See {@link EventHandler}.\n *\n * @property {Object} TrackList#allowedEvents_\n * @private\n */\n\n\nTrackList.prototype.allowedEvents_ = {\n  change: 'change',\n  addtrack: 'addtrack',\n  removetrack: 'removetrack'\n};\n\n// emulate attribute EventHandler support to allow for feature detection\nfor (var event in TrackList.prototype.allowedEvents_) {\n  TrackList.prototype['on' + event] = null;\n}\n\n/**\n * @file audio-track-list.js\n */\n/**\n * Anywhere we call this function we diverge from the spec\n * as we only support one enabled audiotrack at a time\n *\n * @param {AudioTrackList} list\n *        list to work on\n *\n * @param {AudioTrack} track\n *        The track to skip\n *\n * @private\n */\nvar disableOthers = function disableOthers(list, track) {\n  for (var i = 0; i < list.length; i++) {\n    if (!Object.keys(list[i]).length || track.id === list[i].id) {\n      continue;\n    }\n    // another audio track is enabled, disable it\n    list[i].enabled = false;\n  }\n};\n\n/**\n * The current list of {@link AudioTrack} for a media file.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotracklist}\n * @extends TrackList\n */\n\nvar AudioTrackList = function (_TrackList) {\n  inherits(AudioTrackList, _TrackList);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {AudioTrack[]} [tracks=[]]\n   *        A list of `AudioTrack` to instantiate the list with.\n   */\n  function AudioTrackList() {\n    var _this, _ret;\n\n    var tracks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    classCallCheck(this, AudioTrackList);\n\n    var list = void 0;\n\n    // make sure only 1 track is enabled\n    // sorted from last index to first index\n    for (var i = tracks.length - 1; i >= 0; i--) {\n      if (tracks[i].enabled) {\n        disableOthers(tracks, tracks[i]);\n        break;\n      }\n    }\n\n    // IE8 forces us to implement inheritance ourselves\n    // as it does not support Object.defineProperty properly\n    if (IS_IE8) {\n      list = document.createElement('custom');\n      for (var prop in TrackList.prototype) {\n        if (prop !== 'constructor') {\n          list[prop] = TrackList.prototype[prop];\n        }\n      }\n      for (var _prop in AudioTrackList.prototype) {\n        if (_prop !== 'constructor') {\n          list[_prop] = AudioTrackList.prototype[_prop];\n        }\n      }\n    }\n\n    list = (_this = possibleConstructorReturn(this, _TrackList.call(this, tracks, list)), _this);\n    list.changing_ = false;\n\n    return _ret = list, possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * Add an {@link AudioTrack} to the `AudioTrackList`.\n   *\n   * @param {AudioTrack} track\n   *        The AudioTrack to add to the list\n   *\n   * @fires TrackList#addtrack\n   */\n\n\n  AudioTrackList.prototype.addTrack = function addTrack(track) {\n    var _this2 = this;\n\n    if (track.enabled) {\n      disableOthers(this, track);\n    }\n\n    _TrackList.prototype.addTrack.call(this, track);\n    // native tracks don't have this\n    if (!track.addEventListener) {\n      return;\n    }\n\n    /**\n     * @listens AudioTrack#enabledchange\n     * @fires TrackList#change\n     */\n    track.addEventListener('enabledchange', function () {\n      // when we are disabling other tracks (since we don't support\n      // more than one track at a time) we will set changing_\n      // to true so that we don't trigger additional change events\n      if (_this2.changing_) {\n        return;\n      }\n      _this2.changing_ = true;\n      disableOthers(_this2, track);\n      _this2.changing_ = false;\n      _this2.trigger('change');\n    });\n  };\n\n  return AudioTrackList;\n}(TrackList);\n\n/**\n * @file video-track-list.js\n */\n/**\n * Un-select all other {@link VideoTrack}s that are selected.\n *\n * @param {VideoTrackList} list\n *        list to work on\n *\n * @param {VideoTrack} track\n *        The track to skip\n *\n * @private\n */\nvar disableOthers$1 = function disableOthers(list, track) {\n  for (var i = 0; i < list.length; i++) {\n    if (!Object.keys(list[i]).length || track.id === list[i].id) {\n      continue;\n    }\n    // another video track is enabled, disable it\n    list[i].selected = false;\n  }\n};\n\n/**\n * The current list of {@link VideoTrack} for a video.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#videotracklist}\n * @extends TrackList\n */\n\nvar VideoTrackList = function (_TrackList) {\n  inherits(VideoTrackList, _TrackList);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {VideoTrack[]} [tracks=[]]\n   *        A list of `VideoTrack` to instantiate the list with.\n   */\n  function VideoTrackList() {\n    var _this, _ret;\n\n    var tracks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    classCallCheck(this, VideoTrackList);\n\n    var list = void 0;\n\n    // make sure only 1 track is enabled\n    // sorted from last index to first index\n    for (var i = tracks.length - 1; i >= 0; i--) {\n      if (tracks[i].selected) {\n        disableOthers$1(tracks, tracks[i]);\n        break;\n      }\n    }\n\n    // IE8 forces us to implement inheritance ourselves\n    // as it does not support Object.defineProperty properly\n    if (IS_IE8) {\n      list = document.createElement('custom');\n      for (var prop in TrackList.prototype) {\n        if (prop !== 'constructor') {\n          list[prop] = TrackList.prototype[prop];\n        }\n      }\n      for (var _prop in VideoTrackList.prototype) {\n        if (_prop !== 'constructor') {\n          list[_prop] = VideoTrackList.prototype[_prop];\n        }\n      }\n    }\n\n    list = (_this = possibleConstructorReturn(this, _TrackList.call(this, tracks, list)), _this);\n    list.changing_ = false;\n\n    /**\n     * @member {number} VideoTrackList#selectedIndex\n     *         The current index of the selected {@link VideoTrack`}.\n     */\n    Object.defineProperty(list, 'selectedIndex', {\n      get: function get$$1() {\n        for (var _i = 0; _i < this.length; _i++) {\n          if (this[_i].selected) {\n            return _i;\n          }\n        }\n        return -1;\n      },\n      set: function set$$1() {}\n    });\n\n    return _ret = list, possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * Add a {@link VideoTrack} to the `VideoTrackList`.\n   *\n   * @param {VideoTrack} track\n   *        The VideoTrack to add to the list\n   *\n   * @fires TrackList#addtrack\n   */\n\n\n  VideoTrackList.prototype.addTrack = function addTrack(track) {\n    var _this2 = this;\n\n    if (track.selected) {\n      disableOthers$1(this, track);\n    }\n\n    _TrackList.prototype.addTrack.call(this, track);\n    // native tracks don't have this\n    if (!track.addEventListener) {\n      return;\n    }\n\n    /**\n     * @listens VideoTrack#selectedchange\n     * @fires TrackList#change\n     */\n    track.addEventListener('selectedchange', function () {\n      if (_this2.changing_) {\n        return;\n      }\n      _this2.changing_ = true;\n      disableOthers$1(_this2, track);\n      _this2.changing_ = false;\n      _this2.trigger('change');\n    });\n  };\n\n  return VideoTrackList;\n}(TrackList);\n\n/**\n * @file text-track-list.js\n */\n/**\n * The current list of {@link TextTrack} for a media file.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttracklist}\n * @extends TrackList\n */\n\nvar TextTrackList = function (_TrackList) {\n  inherits(TextTrackList, _TrackList);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {TextTrack[]} [tracks=[]]\n   *        A list of `TextTrack` to instantiate the list with.\n   */\n  function TextTrackList() {\n    var _this, _ret;\n\n    var tracks = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    classCallCheck(this, TextTrackList);\n\n    var list = void 0;\n\n    // IE8 forces us to implement inheritance ourselves\n    // as it does not support Object.defineProperty properly\n    if (IS_IE8) {\n      list = document.createElement('custom');\n      for (var prop in TrackList.prototype) {\n        if (prop !== 'constructor') {\n          list[prop] = TrackList.prototype[prop];\n        }\n      }\n      for (var _prop in TextTrackList.prototype) {\n        if (_prop !== 'constructor') {\n          list[_prop] = TextTrackList.prototype[_prop];\n        }\n      }\n    }\n\n    list = (_this = possibleConstructorReturn(this, _TrackList.call(this, tracks, list)), _this);\n    return _ret = list, possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * Add a {@link TextTrack} to the `TextTrackList`\n   *\n   * @param {TextTrack} track\n   *        The text track to add to the list.\n   *\n   * @fires TrackList#addtrack\n   */\n\n\n  TextTrackList.prototype.addTrack = function addTrack(track) {\n    _TrackList.prototype.addTrack.call(this, track);\n\n    /**\n     * @listens TextTrack#modechange\n     * @fires TrackList#change\n     */\n    track.addEventListener('modechange', bind(this, function () {\n      this.trigger('change');\n    }));\n\n    var nonLanguageTextTrackKind = ['metadata', 'chapters'];\n\n    if (nonLanguageTextTrackKind.indexOf(track.kind) === -1) {\n      track.addEventListener('modechange', bind(this, function () {\n        this.trigger('selectedlanguagechange');\n      }));\n    }\n  };\n\n  return TextTrackList;\n}(TrackList);\n\n/**\n * @file html-track-element-list.js\n */\n\n/**\n * The current list of {@link HtmlTrackElement}s.\n */\n\nvar HtmlTrackElementList = function () {\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {HtmlTrackElement[]} [tracks=[]]\n   *        A list of `HtmlTrackElement` to instantiate the list with.\n   */\n  function HtmlTrackElementList() {\n    var trackElements = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    classCallCheck(this, HtmlTrackElementList);\n\n    var list = this; // eslint-disable-line\n\n    if (IS_IE8) {\n      list = document.createElement('custom');\n\n      for (var prop in HtmlTrackElementList.prototype) {\n        if (prop !== 'constructor') {\n          list[prop] = HtmlTrackElementList.prototype[prop];\n        }\n      }\n    }\n\n    list.trackElements_ = [];\n\n    /**\n     * @memberof HtmlTrackElementList\n     * @member {number} length\n     *         The current number of `Track`s in the this Trackist.\n     * @instance\n     */\n    Object.defineProperty(list, 'length', {\n      get: function get$$1() {\n        return this.trackElements_.length;\n      }\n    });\n\n    for (var i = 0, length = trackElements.length; i < length; i++) {\n      list.addTrackElement_(trackElements[i]);\n    }\n\n    if (IS_IE8) {\n      return list;\n    }\n  }\n\n  /**\n   * Add an {@link HtmlTrackElement} to the `HtmlTrackElementList`\n   *\n   * @param {HtmlTrackElement} trackElement\n   *        The track element to add to the list.\n   *\n   * @private\n   */\n\n\n  HtmlTrackElementList.prototype.addTrackElement_ = function addTrackElement_(trackElement) {\n    var index = this.trackElements_.length;\n\n    if (!('' + index in this)) {\n      Object.defineProperty(this, index, {\n        get: function get$$1() {\n          return this.trackElements_[index];\n        }\n      });\n    }\n\n    // Do not add duplicate elements\n    if (this.trackElements_.indexOf(trackElement) === -1) {\n      this.trackElements_.push(trackElement);\n    }\n  };\n\n  /**\n   * Get an {@link HtmlTrackElement} from the `HtmlTrackElementList` given an\n   * {@link TextTrack}.\n   *\n   * @param {TextTrack} track\n   *        The track associated with a track element.\n   *\n   * @return {HtmlTrackElement|undefined}\n   *         The track element that was found or undefined.\n   *\n   * @private\n   */\n\n\n  HtmlTrackElementList.prototype.getTrackElementByTrack_ = function getTrackElementByTrack_(track) {\n    var trackElement_ = void 0;\n\n    for (var i = 0, length = this.trackElements_.length; i < length; i++) {\n      if (track === this.trackElements_[i].track) {\n        trackElement_ = this.trackElements_[i];\n\n        break;\n      }\n    }\n\n    return trackElement_;\n  };\n\n  /**\n   * Remove a {@link HtmlTrackElement} from the `HtmlTrackElementList`\n   *\n   * @param {HtmlTrackElement} trackElement\n   *        The track element to remove from the list.\n   *\n   * @private\n   */\n\n\n  HtmlTrackElementList.prototype.removeTrackElement_ = function removeTrackElement_(trackElement) {\n    for (var i = 0, length = this.trackElements_.length; i < length; i++) {\n      if (trackElement === this.trackElements_[i]) {\n        this.trackElements_.splice(i, 1);\n\n        break;\n      }\n    }\n  };\n\n  return HtmlTrackElementList;\n}();\n\n/**\n * @file text-track-cue-list.js\n */\n/**\n * @typedef {Object} TextTrackCueList~TextTrackCue\n *\n * @property {string} id\n *           The unique id for this text track cue\n *\n * @property {number} startTime\n *           The start time for this text track cue\n *\n * @property {number} endTime\n *           The end time for this text track cue\n *\n * @property {boolean} pauseOnExit\n *           Pause when the end time is reached if true.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcue}\n */\n\n/**\n * A List of TextTrackCues.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcuelist}\n */\n\nvar TextTrackCueList = function () {\n\n  /**\n   * Create an instance of this class..\n   *\n   * @param {Array} cues\n   *        A list of cues to be initialized with\n   */\n  function TextTrackCueList(cues) {\n    classCallCheck(this, TextTrackCueList);\n\n    var list = this; // eslint-disable-line\n\n    if (IS_IE8) {\n      list = document.createElement('custom');\n\n      for (var prop in TextTrackCueList.prototype) {\n        if (prop !== 'constructor') {\n          list[prop] = TextTrackCueList.prototype[prop];\n        }\n      }\n    }\n\n    TextTrackCueList.prototype.setCues_.call(list, cues);\n\n    /**\n     * @memberof TextTrackCueList\n     * @member {number} length\n     *         The current number of `TextTrackCue`s in the TextTrackCueList.\n     * @instance\n     */\n    Object.defineProperty(list, 'length', {\n      get: function get$$1() {\n        return this.length_;\n      }\n    });\n\n    if (IS_IE8) {\n      return list;\n    }\n  }\n\n  /**\n   * A setter for cues in this list. Creates getters\n   * an an index for the cues.\n   *\n   * @param {Array} cues\n   *        An array of cues to set\n   *\n   * @private\n   */\n\n\n  TextTrackCueList.prototype.setCues_ = function setCues_(cues) {\n    var oldLength = this.length || 0;\n    var i = 0;\n    var l = cues.length;\n\n    this.cues_ = cues;\n    this.length_ = cues.length;\n\n    var defineProp = function defineProp(index) {\n      if (!('' + index in this)) {\n        Object.defineProperty(this, '' + index, {\n          get: function get$$1() {\n            return this.cues_[index];\n          }\n        });\n      }\n    };\n\n    if (oldLength < l) {\n      i = oldLength;\n\n      for (; i < l; i++) {\n        defineProp.call(this, i);\n      }\n    }\n  };\n\n  /**\n   * Get a `TextTrackCue` that is currently in the `TextTrackCueList` by id.\n   *\n   * @param {string} id\n   *        The id of the cue that should be searched for.\n   *\n   * @return {TextTrackCueList~TextTrackCue|null}\n   *         A single cue or null if none was found.\n   */\n\n\n  TextTrackCueList.prototype.getCueById = function getCueById(id) {\n    var result = null;\n\n    for (var i = 0, l = this.length; i < l; i++) {\n      var cue = this[i];\n\n      if (cue.id === id) {\n        result = cue;\n        break;\n      }\n    }\n\n    return result;\n  };\n\n  return TextTrackCueList;\n}();\n\n/**\n * @file track-kinds.js\n */\n\n/**\n * All possible `VideoTrackKind`s\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-videotrack-kind\n * @typedef VideoTrack~Kind\n * @enum\n */\nvar VideoTrackKind = {\n  alternative: 'alternative',\n  captions: 'captions',\n  main: 'main',\n  sign: 'sign',\n  subtitles: 'subtitles',\n  commentary: 'commentary'\n};\n\n/**\n * All possible `AudioTrackKind`s\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-audiotrack-kind\n * @typedef AudioTrack~Kind\n * @enum\n */\nvar AudioTrackKind = {\n  'alternative': 'alternative',\n  'descriptions': 'descriptions',\n  'main': 'main',\n  'main-desc': 'main-desc',\n  'translation': 'translation',\n  'commentary': 'commentary'\n};\n\n/**\n * All possible `TextTrackKind`s\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-texttrack-kind\n * @typedef TextTrack~Kind\n * @enum\n */\nvar TextTrackKind = {\n  subtitles: 'subtitles',\n  captions: 'captions',\n  descriptions: 'descriptions',\n  chapters: 'chapters',\n  metadata: 'metadata'\n};\n\n/**\n * All possible `TextTrackMode`s\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackmode\n * @typedef TextTrack~Mode\n * @enum\n */\nvar TextTrackMode = {\n  disabled: 'disabled',\n  hidden: 'hidden',\n  showing: 'showing'\n};\n\n/**\n * @file track.js\n */\n/**\n * A Track class that contains all of the common functionality for {@link AudioTrack},\n * {@link VideoTrack}, and {@link TextTrack}.\n *\n * > Note: This class should not be used directly\n *\n * @see {@link https://html.spec.whatwg.org/multipage/embedded-content.html}\n * @extends EventTarget\n * @abstract\n */\n\nvar Track = function (_EventTarget) {\n  inherits(Track, _EventTarget);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} [options={}]\n   *        Object of option names and values\n   *\n   * @param {string} [options.kind='']\n   *        A valid kind for the track type you are creating.\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this AudioTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @abstract\n   */\n  function Track() {\n    var _ret;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, Track);\n\n    var _this = possibleConstructorReturn(this, _EventTarget.call(this));\n\n    var track = _this; // eslint-disable-line\n\n    if (IS_IE8) {\n      track = document.createElement('custom');\n      for (var prop in Track.prototype) {\n        if (prop !== 'constructor') {\n          track[prop] = Track.prototype[prop];\n        }\n      }\n    }\n\n    var trackProps = {\n      id: options.id || 'vjs_track_' + newGUID(),\n      kind: options.kind || '',\n      label: options.label || '',\n      language: options.language || ''\n    };\n\n    /**\n     * @memberof Track\n     * @member {string} id\n     *         The id of this track. Cannot be changed after creation.\n     * @instance\n     *\n     * @readonly\n     */\n\n    /**\n     * @memberof Track\n     * @member {string} kind\n     *         The kind of track that this is. Cannot be changed after creation.\n     * @instance\n     *\n     * @readonly\n     */\n\n    /**\n     * @memberof Track\n     * @member {string} label\n     *         The label of this track. Cannot be changed after creation.\n     * @instance\n     *\n     * @readonly\n     */\n\n    /**\n     * @memberof Track\n     * @member {string} language\n     *         The two letter language code for this track. Cannot be changed after\n     *         creation.\n     * @instance\n     *\n     * @readonly\n     */\n\n    var _loop = function _loop(key) {\n      Object.defineProperty(track, key, {\n        get: function get$$1() {\n          return trackProps[key];\n        },\n        set: function set$$1() {}\n      });\n    };\n\n    for (var key in trackProps) {\n      _loop(key);\n    }\n\n    return _ret = track, possibleConstructorReturn(_this, _ret);\n  }\n\n  return Track;\n}(EventTarget);\n\n/**\n * @file url.js\n * @module url\n */\n/**\n * @typedef {Object} url:URLObject\n *\n * @property {string} protocol\n *           The protocol of the url that was parsed.\n *\n * @property {string} hostname\n *           The hostname of the url that was parsed.\n *\n * @property {string} port\n *           The port of the url that was parsed.\n *\n * @property {string} pathname\n *           The pathname of the url that was parsed.\n *\n * @property {string} search\n *           The search query of the url that was parsed.\n *\n * @property {string} hash\n *           The hash of the url that was parsed.\n *\n * @property {string} host\n *           The host of the url that was parsed.\n */\n\n/**\n * Resolve and parse the elements of a URL.\n *\n * @param  {String} url\n *         The url to parse\n *\n * @return {url:URLObject}\n *         An object of url details\n */\nvar parseUrl = function parseUrl(url) {\n  var props = ['protocol', 'hostname', 'port', 'pathname', 'search', 'hash', 'host'];\n\n  // add the url to an anchor and let the browser parse the URL\n  var a = document.createElement('a');\n\n  a.href = url;\n\n  // IE8 (and 9?) Fix\n  // ie8 doesn't parse the URL correctly until the anchor is actually\n  // added to the body, and an innerHTML is needed to trigger the parsing\n  var addToBody = a.host === '' && a.protocol !== 'file:';\n  var div = void 0;\n\n  if (addToBody) {\n    div = document.createElement('div');\n    div.innerHTML = '<a href=\"' + url + '\"></a>';\n    a = div.firstChild;\n    // prevent the div from affecting layout\n    div.setAttribute('style', 'display:none; position:absolute;');\n    document.body.appendChild(div);\n  }\n\n  // Copy the specific URL properties to a new object\n  // This is also needed for IE8 because the anchor loses its\n  // properties when it's removed from the dom\n  var details = {};\n\n  for (var i = 0; i < props.length; i++) {\n    details[props[i]] = a[props[i]];\n  }\n\n  // IE9 adds the port to the host property unlike everyone else. If\n  // a port identifier is added for standard ports, strip it.\n  if (details.protocol === 'http:') {\n    details.host = details.host.replace(/:80$/, '');\n  }\n\n  if (details.protocol === 'https:') {\n    details.host = details.host.replace(/:443$/, '');\n  }\n\n  if (!details.protocol) {\n    details.protocol = window.location.protocol;\n  }\n\n  if (addToBody) {\n    document.body.removeChild(div);\n  }\n\n  return details;\n};\n\n/**\n * Get absolute version of relative URL. Used to tell flash correct URL.\n *\n *\n * @param  {string} url\n *         URL to make absolute\n *\n * @return {string}\n *         Absolute URL\n *\n * @see http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue\n */\nvar getAbsoluteURL = function getAbsoluteURL(url) {\n  // Check if absolute URL\n  if (!url.match(/^https?:\\/\\//)) {\n    // Convert to absolute URL. Flash hosted off-site needs an absolute URL.\n    var div = document.createElement('div');\n\n    div.innerHTML = '<a href=\"' + url + '\">x</a>';\n    url = div.firstChild.href;\n  }\n\n  return url;\n};\n\n/**\n * Returns the extension of the passed file name. It will return an empty string\n * if passed an invalid path.\n *\n * @param {string} path\n *        The fileName path like '/path/to/file.mp4'\n *\n * @returns {string}\n *          The extension in lower case or an empty string if no\n *          extension could be found.\n */\nvar getFileExtension = function getFileExtension(path) {\n  if (typeof path === 'string') {\n    var splitPathRe = /^(\\/?)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?)(\\.([^\\.\\/\\?]+)))(?:[\\/]*|[\\?].*)$/i;\n    var pathParts = splitPathRe.exec(path);\n\n    if (pathParts) {\n      return pathParts.pop().toLowerCase();\n    }\n  }\n\n  return '';\n};\n\n/**\n * Returns whether the url passed is a cross domain request or not.\n *\n * @param {string} url\n *        The url to check.\n *\n * @return {boolean}\n *         Whether it is a cross domain request or not.\n */\nvar isCrossOrigin = function isCrossOrigin(url) {\n  var winLoc = window.location;\n  var urlInfo = parseUrl(url);\n\n  // IE8 protocol relative urls will return ':' for protocol\n  var srcProtocol = urlInfo.protocol === ':' ? winLoc.protocol : urlInfo.protocol;\n\n  // Check if url is for another domain/origin\n  // IE8 doesn't know location.origin, so we won't rely on it here\n  var crossOrigin = srcProtocol + urlInfo.host !== winLoc.protocol + winLoc.host;\n\n  return crossOrigin;\n};\n\nvar Url = (Object.freeze || Object)({\n\tparseUrl: parseUrl,\n\tgetAbsoluteURL: getAbsoluteURL,\n\tgetFileExtension: getFileExtension,\n\tisCrossOrigin: isCrossOrigin\n});\n\n/**\n * @file text-track.js\n */\n/**\n * Takes a webvtt file contents and parses it into cues\n *\n * @param {string} srcContent\n *        webVTT file contents\n *\n * @param {TextTrack} track\n *        TextTrack to add cues to. Cues come from the srcContent.\n *\n * @private\n */\nvar parseCues = function parseCues(srcContent, track) {\n  var parser = new window.WebVTT.Parser(window, window.vttjs, window.WebVTT.StringDecoder());\n  var errors = [];\n\n  parser.oncue = function (cue) {\n    track.addCue(cue);\n  };\n\n  parser.onparsingerror = function (error) {\n    errors.push(error);\n  };\n\n  parser.onflush = function () {\n    track.trigger({\n      type: 'loadeddata',\n      target: track\n    });\n  };\n\n  parser.parse(srcContent);\n  if (errors.length > 0) {\n    if (window.console && window.console.groupCollapsed) {\n      window.console.groupCollapsed('Text Track parsing errors for ' + track.src);\n    }\n    errors.forEach(function (error) {\n      return log$1.error(error);\n    });\n    if (window.console && window.console.groupEnd) {\n      window.console.groupEnd();\n    }\n  }\n\n  parser.flush();\n};\n\n/**\n * Load a `TextTrack` from a specifed url.\n *\n * @param {string} src\n *        Url to load track from.\n *\n * @param {TextTrack} track\n *        Track to add cues to. Comes from the content at the end of `url`.\n *\n * @private\n */\nvar loadTrack = function loadTrack(src, track) {\n  var opts = {\n    uri: src\n  };\n  var crossOrigin = isCrossOrigin(src);\n\n  if (crossOrigin) {\n    opts.cors = crossOrigin;\n  }\n\n  xhr(opts, bind(this, function (err, response, responseBody) {\n    if (err) {\n      return log$1.error(err, response);\n    }\n\n    track.loaded_ = true;\n\n    // Make sure that vttjs has loaded, otherwise, wait till it finished loading\n    // NOTE: this is only used for the alt/video.novtt.js build\n    if (typeof window.WebVTT !== 'function') {\n      if (track.tech_) {\n        var loadHandler = function loadHandler() {\n          return parseCues(responseBody, track);\n        };\n\n        track.tech_.on('vttjsloaded', loadHandler);\n        track.tech_.on('vttjserror', function () {\n          log$1.error('vttjs failed to load, stopping trying to process ' + track.src);\n          track.tech_.off('vttjsloaded', loadHandler);\n        });\n      }\n    } else {\n      parseCues(responseBody, track);\n    }\n  }));\n};\n\n/**\n * A representation of a single `TextTrack`.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrack}\n * @extends Track\n */\n\nvar TextTrack = function (_Track) {\n  inherits(TextTrack, _Track);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} options={}\n   *        Object of option names and values\n   *\n   * @param {Tech} options.tech\n   *        A reference to the tech that owns this TextTrack.\n   *\n   * @param {TextTrack~Kind} [options.kind='subtitles']\n   *        A valid text track kind.\n   *\n   * @param {TextTrack~Mode} [options.mode='disabled']\n   *        A valid text track mode.\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this TextTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {string} [options.srclang='']\n   *        A valid two character language code. An alternative, but deprioritized\n   *        vesion of `options.language`\n   *\n   * @param {string} [options.src]\n   *        A url to TextTrack cues.\n   *\n   * @param {boolean} [options.default]\n   *        If this track should default to on or off.\n   */\n  function TextTrack() {\n    var _this, _ret;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, TextTrack);\n\n    if (!options.tech) {\n      throw new Error('A tech was not provided.');\n    }\n\n    var settings = mergeOptions(options, {\n      kind: TextTrackKind[options.kind] || 'subtitles',\n      language: options.language || options.srclang || ''\n    });\n    var mode = TextTrackMode[settings.mode] || 'disabled';\n    var default_ = settings['default'];\n\n    if (settings.kind === 'metadata' || settings.kind === 'chapters') {\n      mode = 'hidden';\n    }\n    // on IE8 this will be a document element\n    // for every other browser this will be a normal object\n    var tt = (_this = possibleConstructorReturn(this, _Track.call(this, settings)), _this);\n\n    tt.tech_ = settings.tech;\n\n    if (IS_IE8) {\n      for (var prop in TextTrack.prototype) {\n        if (prop !== 'constructor') {\n          tt[prop] = TextTrack.prototype[prop];\n        }\n      }\n    }\n\n    tt.cues_ = [];\n    tt.activeCues_ = [];\n\n    var cues = new TextTrackCueList(tt.cues_);\n    var activeCues = new TextTrackCueList(tt.activeCues_);\n    var changed = false;\n    var timeupdateHandler = bind(tt, function () {\n\n      // Accessing this.activeCues for the side-effects of updating itself\n      // due to it's nature as a getter function. Do not remove or cues will\n      // stop updating!\n      // Use the setter to prevent deletion from uglify (pure_getters rule)\n      this.activeCues = this.activeCues;\n      if (changed) {\n        this.trigger('cuechange');\n        changed = false;\n      }\n    });\n\n    if (mode !== 'disabled') {\n      tt.tech_.ready(function () {\n        tt.tech_.on('timeupdate', timeupdateHandler);\n      }, true);\n    }\n\n    /**\n     * @memberof TextTrack\n     * @member {boolean} default\n     *         If this track was set to be on or off by default. Cannot be changed after\n     *         creation.\n     * @instance\n     *\n     * @readonly\n     */\n    Object.defineProperty(tt, 'default', {\n      get: function get$$1() {\n        return default_;\n      },\n      set: function set$$1() {}\n    });\n\n    /**\n     * @memberof TextTrack\n     * @member {string} mode\n     *         Set the mode of this TextTrack to a valid {@link TextTrack~Mode}. Will\n     *         not be set if setting to an invalid mode.\n     * @instance\n     *\n     * @fires TextTrack#modechange\n     */\n    Object.defineProperty(tt, 'mode', {\n      get: function get$$1() {\n        return mode;\n      },\n      set: function set$$1(newMode) {\n        var _this2 = this;\n\n        if (!TextTrackMode[newMode]) {\n          return;\n        }\n        mode = newMode;\n        if (mode === 'showing') {\n\n          this.tech_.ready(function () {\n            _this2.tech_.on('timeupdate', timeupdateHandler);\n          }, true);\n        }\n        /**\n         * An event that fires when mode changes on this track. This allows\n         * the TextTrackList that holds this track to act accordingly.\n         *\n         * > Note: This is not part of the spec!\n         *\n         * @event TextTrack#modechange\n         * @type {EventTarget~Event}\n         */\n        this.trigger('modechange');\n      }\n    });\n\n    /**\n     * @memberof TextTrack\n     * @member {TextTrackCueList} cues\n     *         The text track cue list for this TextTrack.\n     * @instance\n     */\n    Object.defineProperty(tt, 'cues', {\n      get: function get$$1() {\n        if (!this.loaded_) {\n          return null;\n        }\n\n        return cues;\n      },\n      set: function set$$1() {}\n    });\n\n    /**\n     * @memberof TextTrack\n     * @member {TextTrackCueList} activeCues\n     *         The list text track cues that are currently active for this TextTrack.\n     * @instance\n     */\n    Object.defineProperty(tt, 'activeCues', {\n      get: function get$$1() {\n        if (!this.loaded_) {\n          return null;\n        }\n\n        // nothing to do\n        if (this.cues.length === 0) {\n          return activeCues;\n        }\n\n        var ct = this.tech_.currentTime();\n        var active = [];\n\n        for (var i = 0, l = this.cues.length; i < l; i++) {\n          var cue = this.cues[i];\n\n          if (cue.startTime <= ct && cue.endTime >= ct) {\n            active.push(cue);\n          } else if (cue.startTime === cue.endTime && cue.startTime <= ct && cue.startTime + 0.5 >= ct) {\n            active.push(cue);\n          }\n        }\n\n        changed = false;\n\n        if (active.length !== this.activeCues_.length) {\n          changed = true;\n        } else {\n          for (var _i = 0; _i < active.length; _i++) {\n            if (this.activeCues_.indexOf(active[_i]) === -1) {\n              changed = true;\n            }\n          }\n        }\n\n        this.activeCues_ = active;\n        activeCues.setCues_(this.activeCues_);\n\n        return activeCues;\n      },\n\n\n      // /!\\ Keep this setter empty (see the timeupdate handler above)\n      set: function set$$1() {}\n    });\n\n    if (settings.src) {\n      tt.src = settings.src;\n      loadTrack(settings.src, tt);\n    } else {\n      tt.loaded_ = true;\n    }\n\n    return _ret = tt, possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * Add a cue to the internal list of cues.\n   *\n   * @param {TextTrack~Cue} cue\n   *        The cue to add to our internal list\n   */\n\n\n  TextTrack.prototype.addCue = function addCue(originalCue) {\n    var cue = originalCue;\n\n    if (window.vttjs && !(originalCue instanceof window.vttjs.VTTCue)) {\n      cue = new window.vttjs.VTTCue(originalCue.startTime, originalCue.endTime, originalCue.text);\n\n      for (var prop in originalCue) {\n        if (!(prop in cue)) {\n          cue[prop] = originalCue[prop];\n        }\n      }\n\n      // make sure that `id` is copied over\n      cue.id = originalCue.id;\n      cue.originalCue_ = originalCue;\n    }\n\n    var tracks = this.tech_.textTracks();\n\n    for (var i = 0; i < tracks.length; i++) {\n      if (tracks[i] !== this) {\n        tracks[i].removeCue(cue);\n      }\n    }\n\n    this.cues_.push(cue);\n    this.cues.setCues_(this.cues_);\n  };\n\n  /**\n   * Remove a cue from our internal list\n   *\n   * @param {TextTrack~Cue} removeCue\n   *        The cue to remove from our internal list\n   */\n\n\n  TextTrack.prototype.removeCue = function removeCue(_removeCue) {\n    var i = this.cues_.length;\n\n    while (i--) {\n      var cue = this.cues_[i];\n\n      if (cue === _removeCue || cue.originalCue_ && cue.originalCue_ === _removeCue) {\n        this.cues_.splice(i, 1);\n        this.cues.setCues_(this.cues_);\n        break;\n      }\n    }\n  };\n\n  return TextTrack;\n}(Track);\n\n/**\n * cuechange - One or more cues in the track have become active or stopped being active.\n */\n\n\nTextTrack.prototype.allowedEvents_ = {\n  cuechange: 'cuechange'\n};\n\n/**\n * A representation of a single `AudioTrack`. If it is part of an {@link AudioTrackList}\n * only one `AudioTrack` in the list will be enabled at a time.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotrack}\n * @extends Track\n */\n\nvar AudioTrack = function (_Track) {\n  inherits(AudioTrack, _Track);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} [options={}]\n   *        Object of option names and values\n   *\n   * @param {AudioTrack~Kind} [options.kind='']\n   *        A valid audio track kind\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this AudioTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {boolean} [options.enabled]\n   *        If this track is the one that is currently playing. If this track is part of\n   *        an {@link AudioTrackList}, only one {@link AudioTrack} will be enabled.\n   */\n  function AudioTrack() {\n    var _this, _ret;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, AudioTrack);\n\n    var settings = mergeOptions(options, {\n      kind: AudioTrackKind[options.kind] || ''\n    });\n    // on IE8 this will be a document element\n    // for every other browser this will be a normal object\n    var track = (_this = possibleConstructorReturn(this, _Track.call(this, settings)), _this);\n    var enabled = false;\n\n    if (IS_IE8) {\n      for (var prop in AudioTrack.prototype) {\n        if (prop !== 'constructor') {\n          track[prop] = AudioTrack.prototype[prop];\n        }\n      }\n    }\n    /**\n     * @memberof AudioTrack\n     * @member {boolean} enabled\n     *         If this `AudioTrack` is enabled or not. When setting this will\n     *         fire {@link AudioTrack#enabledchange} if the state of enabled is changed.\n     * @instance\n     *\n     * @fires VideoTrack#selectedchange\n     */\n    Object.defineProperty(track, 'enabled', {\n      get: function get$$1() {\n        return enabled;\n      },\n      set: function set$$1(newEnabled) {\n        // an invalid or unchanged value\n        if (typeof newEnabled !== 'boolean' || newEnabled === enabled) {\n          return;\n        }\n        enabled = newEnabled;\n\n        /**\n         * An event that fires when enabled changes on this track. This allows\n         * the AudioTrackList that holds this track to act accordingly.\n         *\n         * > Note: This is not part of the spec! Native tracks will do\n         *         this internally without an event.\n         *\n         * @event AudioTrack#enabledchange\n         * @type {EventTarget~Event}\n         */\n        this.trigger('enabledchange');\n      }\n    });\n\n    // if the user sets this track to selected then\n    // set selected to that true value otherwise\n    // we keep it false\n    if (settings.enabled) {\n      track.enabled = settings.enabled;\n    }\n    track.loaded_ = true;\n\n    return _ret = track, possibleConstructorReturn(_this, _ret);\n  }\n\n  return AudioTrack;\n}(Track);\n\n/**\n * A representation of a single `VideoTrack`.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#videotrack}\n * @extends Track\n */\n\nvar VideoTrack = function (_Track) {\n  inherits(VideoTrack, _Track);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} [options={}]\n   *        Object of option names and values\n   *\n   * @param {string} [options.kind='']\n   *        A valid {@link VideoTrack~Kind}\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this AudioTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {boolean} [options.selected]\n   *        If this track is the one that is currently playing.\n   */\n  function VideoTrack() {\n    var _this, _ret;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, VideoTrack);\n\n    var settings = mergeOptions(options, {\n      kind: VideoTrackKind[options.kind] || ''\n    });\n\n    // on IE8 this will be a document element\n    // for every other browser this will be a normal object\n    var track = (_this = possibleConstructorReturn(this, _Track.call(this, settings)), _this);\n    var selected = false;\n\n    if (IS_IE8) {\n      for (var prop in VideoTrack.prototype) {\n        if (prop !== 'constructor') {\n          track[prop] = VideoTrack.prototype[prop];\n        }\n      }\n    }\n\n    /**\n     * @memberof VideoTrack\n     * @member {boolean} selected\n     *         If this `VideoTrack` is selected or not. When setting this will\n     *         fire {@link VideoTrack#selectedchange} if the state of selected changed.\n     * @instance\n     *\n     * @fires VideoTrack#selectedchange\n     */\n    Object.defineProperty(track, 'selected', {\n      get: function get$$1() {\n        return selected;\n      },\n      set: function set$$1(newSelected) {\n        // an invalid or unchanged value\n        if (typeof newSelected !== 'boolean' || newSelected === selected) {\n          return;\n        }\n        selected = newSelected;\n\n        /**\n         * An event that fires when selected changes on this track. This allows\n         * the VideoTrackList that holds this track to act accordingly.\n         *\n         * > Note: This is not part of the spec! Native tracks will do\n         *         this internally without an event.\n         *\n         * @event VideoTrack#selectedchange\n         * @type {EventTarget~Event}\n         */\n        this.trigger('selectedchange');\n      }\n    });\n\n    // if the user sets this track to selected then\n    // set selected to that true value otherwise\n    // we keep it false\n    if (settings.selected) {\n      track.selected = settings.selected;\n    }\n\n    return _ret = track, possibleConstructorReturn(_this, _ret);\n  }\n\n  return VideoTrack;\n}(Track);\n\n/**\n * @file html-track-element.js\n */\n\n/**\n * @memberof HTMLTrackElement\n * @typedef {HTMLTrackElement~ReadyState}\n * @enum {number}\n */\nvar NONE = 0;\nvar LOADING = 1;\nvar LOADED = 2;\nvar ERROR = 3;\n\n/**\n * A single track represented in the DOM.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#htmltrackelement}\n * @extends EventTarget\n */\n\nvar HTMLTrackElement = function (_EventTarget) {\n  inherits(HTMLTrackElement, _EventTarget);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} options={}\n   *        Object of option names and values\n   *\n   * @param {Tech} options.tech\n   *        A reference to the tech that owns this HTMLTrackElement.\n   *\n   * @param {TextTrack~Kind} [options.kind='subtitles']\n   *        A valid text track kind.\n   *\n   * @param {TextTrack~Mode} [options.mode='disabled']\n   *        A valid text track mode.\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this TextTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {string} [options.srclang='']\n   *        A valid two character language code. An alternative, but deprioritized\n   *        vesion of `options.language`\n   *\n   * @param {string} [options.src]\n   *        A url to TextTrack cues.\n   *\n   * @param {boolean} [options.default]\n   *        If this track should default to on or off.\n   */\n  function HTMLTrackElement() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    classCallCheck(this, HTMLTrackElement);\n\n    var _this = possibleConstructorReturn(this, _EventTarget.call(this));\n\n    var readyState = void 0;\n    var trackElement = _this; // eslint-disable-line\n\n    if (IS_IE8) {\n      trackElement = document.createElement('custom');\n\n      for (var prop in HTMLTrackElement.prototype) {\n        if (prop !== 'constructor') {\n          trackElement[prop] = HTMLTrackElement.prototype[prop];\n        }\n      }\n    }\n\n    var track = new TextTrack(options);\n\n    trackElement.kind = track.kind;\n    trackElement.src = track.src;\n    trackElement.srclang = track.language;\n    trackElement.label = track.label;\n    trackElement['default'] = track['default'];\n\n    /**\n     * @memberof HTMLTrackElement\n     * @member {HTMLTrackElement~ReadyState} readyState\n     *         The current ready state of the track element.\n     * @instance\n     */\n    Object.defineProperty(trackElement, 'readyState', {\n      get: function get$$1() {\n        return readyState;\n      }\n    });\n\n    /**\n     * @memberof HTMLTrackElement\n     * @member {TextTrack} track\n     *         The underlying TextTrack object.\n     * @instance\n     *\n     */\n    Object.defineProperty(trackElement, 'track', {\n      get: function get$$1() {\n        return track;\n      }\n    });\n\n    readyState = NONE;\n\n    /**\n     * @listens TextTrack#loadeddata\n     * @fires HTMLTrackElement#load\n     */\n    track.addEventListener('loadeddata', function () {\n      readyState = LOADED;\n\n      trackElement.trigger({\n        type: 'load',\n        target: trackElement\n      });\n    });\n\n    if (IS_IE8) {\n      var _ret;\n\n      return _ret = trackElement, possibleConstructorReturn(_this, _ret);\n    }\n    return _this;\n  }\n\n  return HTMLTrackElement;\n}(EventTarget);\n\nHTMLTrackElement.prototype.allowedEvents_ = {\n  load: 'load'\n};\n\nHTMLTrackElement.NONE = NONE;\nHTMLTrackElement.LOADING = LOADING;\nHTMLTrackElement.LOADED = LOADED;\nHTMLTrackElement.ERROR = ERROR;\n\n/*\n * This file contains all track properties that are used in\n * player.js, tech.js, html5.js and possibly other techs in the future.\n */\n\nvar NORMAL = {\n  audio: {\n    ListClass: AudioTrackList,\n    TrackClass: AudioTrack,\n    capitalName: 'Audio'\n  },\n  video: {\n    ListClass: VideoTrackList,\n    TrackClass: VideoTrack,\n    capitalName: 'Video'\n  },\n  text: {\n    ListClass: TextTrackList,\n    TrackClass: TextTrack,\n    capitalName: 'Text'\n  }\n};\n\nObject.keys(NORMAL).forEach(function (type) {\n  NORMAL[type].getterName = type + 'Tracks';\n  NORMAL[type].privateName = type + 'Tracks_';\n});\n\nvar REMOTE = {\n  remoteText: {\n    ListClass: TextTrackList,\n    TrackClass: TextTrack,\n    capitalName: 'RemoteText',\n    getterName: 'remoteTextTracks',\n    privateName: 'remoteTextTracks_'\n  },\n  remoteTextEl: {\n    ListClass: HtmlTrackElementList,\n    TrackClass: HTMLTrackElement,\n    capitalName: 'RemoteTextTrackEls',\n    getterName: 'remoteTextTrackEls',\n    privateName: 'remoteTextTrackEls_'\n  }\n};\n\nvar ALL = mergeOptions(NORMAL, REMOTE);\n\nREMOTE.names = Object.keys(REMOTE);\nNORMAL.names = Object.keys(NORMAL);\nALL.names = [].concat(REMOTE.names).concat(NORMAL.names);\n\n/**\n * @file tech.js\n */\n\n/**\n * An Object containing a structure like: `{src: 'url', type: 'mimetype'}` or string\n * that just contains the src url alone.\n * * `var SourceObject = {src: 'http://ex.com/video.mp4', type: 'video/mp4'};`\n   * `var SourceString = 'http://example.com/some-video.mp4';`\n *\n * @typedef {Object|string} Tech~SourceObject\n *\n * @property {string} src\n *           The url to the source\n *\n * @property {string} type\n *           The mime type of the source\n */\n\n/**\n * A function used by {@link Tech} to create a new {@link TextTrack}.\n *\n * @private\n *\n * @param {Tech} self\n *        An instance of the Tech class.\n *\n * @param {string} kind\n *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)\n *\n * @param {string} [label]\n *        Label to identify the text track\n *\n * @param {string} [language]\n *        Two letter language abbreviation\n *\n * @param {Object} [options={}]\n *        An object with additional text track options\n *\n * @return {TextTrack}\n *          The text track that was created.\n */\nfunction createTrackHelper(self, kind, label, language) {\n  var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};\n\n  var tracks = self.textTracks();\n\n  options.kind = kind;\n\n  if (label) {\n    options.label = label;\n  }\n  if (language) {\n    options.language = language;\n  }\n  options.tech = self;\n\n  var track = new ALL.text.TrackClass(options);\n\n  tracks.addTrack(track);\n\n  return track;\n}\n\n/**\n * This is the base class for media playback technology controllers, such as\n * {@link Flash} and {@link HTML5}\n *\n * @extends Component\n */\n\nvar Tech = function (_Component) {\n  inherits(Tech, _Component);\n\n  /**\n   * Create an instance of this Tech.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} ready\n   *        Callback function to call when the `HTML5` Tech is ready.\n   */\n  function Tech() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var ready = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n    classCallCheck(this, Tech);\n\n    // we don't want the tech to report user activity automatically.\n    // This is done manually in addControlsListeners\n    options.reportTouchActivity = false;\n\n    // keep track of whether the current source has played at all to\n    // implement a very limited played()\n    var _this = possibleConstructorReturn(this, _Component.call(this, null, options, ready));\n\n    _this.hasStarted_ = false;\n    _this.on('playing', function () {\n      this.hasStarted_ = true;\n    });\n    _this.on('loadstart', function () {\n      this.hasStarted_ = false;\n    });\n\n    ALL.names.forEach(function (name) {\n      var props = ALL[name];\n\n      if (options && options[props.getterName]) {\n        _this[props.privateName] = options[props.getterName];\n      }\n    });\n\n    // Manually track progress in cases where the browser/flash player doesn't report it.\n    if (!_this.featuresProgressEvents) {\n      _this.manualProgressOn();\n    }\n\n    // Manually track timeupdates in cases where the browser/flash player doesn't report it.\n    if (!_this.featuresTimeupdateEvents) {\n      _this.manualTimeUpdatesOn();\n    }\n\n    ['Text', 'Audio', 'Video'].forEach(function (track) {\n      if (options['native' + track + 'Tracks'] === false) {\n        _this['featuresNative' + track + 'Tracks'] = false;\n      }\n    });\n\n    if (options.nativeCaptions === false || options.nativeTextTracks === false) {\n      _this.featuresNativeTextTracks = false;\n    } else if (options.nativeCaptions === true || options.nativeTextTracks === true) {\n      _this.featuresNativeTextTracks = true;\n    }\n\n    if (!_this.featuresNativeTextTracks) {\n      _this.emulateTextTracks();\n    }\n\n    _this.autoRemoteTextTracks_ = new ALL.text.ListClass();\n\n    _this.initTrackListeners();\n\n    // Turn on component tap events only if not using native controls\n    if (!options.nativeControlsForTouch) {\n      _this.emitTapEvents();\n    }\n\n    if (_this.constructor) {\n      _this.name_ = _this.constructor.name || 'Unknown Tech';\n    }\n    return _this;\n  }\n\n  /**\n   * A special function to trigger source set in a way that will allow player\n   * to re-trigger if the player or tech are not ready yet.\n   *\n   * @fires Tech#sourceset\n   * @param {string} src The source string at the time of the source changing.\n   */\n\n\n  Tech.prototype.triggerSourceset = function triggerSourceset(src) {\n    var _this2 = this;\n\n    if (!this.isReady_) {\n      // on initial ready we have to trigger source set\n      // 1ms after ready so that player can watch for it.\n      this.one('ready', function () {\n        return _this2.setTimeout(function () {\n          return _this2.triggerSourceset(src);\n        }, 1);\n      });\n    }\n\n    /**\n     * Fired when the source is set on the tech causing the media element\n     * to reload.\n     *\n     * @see {@link Player#event:sourceset}\n     * @event Tech#sourceset\n     * @type {EventTarget~Event}\n     */\n    this.trigger({\n      src: src,\n      type: 'sourceset'\n    });\n  };\n\n  /* Fallbacks for unsupported event types\n  ================================================================================ */\n\n  /**\n   * Polyfill the `progress` event for browsers that don't support it natively.\n   *\n   * @see {@link Tech#trackProgress}\n   */\n\n\n  Tech.prototype.manualProgressOn = function manualProgressOn() {\n    this.on('durationchange', this.onDurationChange);\n\n    this.manualProgress = true;\n\n    // Trigger progress watching when a source begins loading\n    this.one('ready', this.trackProgress);\n  };\n\n  /**\n   * Turn off the polyfill for `progress` events that was created in\n   * {@link Tech#manualProgressOn}\n   */\n\n\n  Tech.prototype.manualProgressOff = function manualProgressOff() {\n    this.manualProgress = false;\n    this.stopTrackingProgress();\n\n    this.off('durationchange', this.onDurationChange);\n  };\n\n  /**\n   * This is used to trigger a `progress` event when the buffered percent changes. It\n   * sets an interval function that will be called every 500 milliseconds to check if the\n   * buffer end percent has changed.\n   *\n   * > This function is called by {@link Tech#manualProgressOn}\n   *\n   * @param {EventTarget~Event} event\n   *        The `ready` event that caused this to run.\n   *\n   * @listens Tech#ready\n   * @fires Tech#progress\n   */\n\n\n  Tech.prototype.trackProgress = function trackProgress(event) {\n    this.stopTrackingProgress();\n    this.progressInterval = this.setInterval(bind(this, function () {\n      // Don't trigger unless buffered amount is greater than last time\n\n      var numBufferedPercent = this.bufferedPercent();\n\n      if (this.bufferedPercent_ !== numBufferedPercent) {\n        /**\n         * See {@link Player#progress}\n         *\n         * @event Tech#progress\n         * @type {EventTarget~Event}\n         */\n        this.trigger('progress');\n      }\n\n      this.bufferedPercent_ = numBufferedPercent;\n\n      if (numBufferedPercent === 1) {\n        this.stopTrackingProgress();\n      }\n    }), 500);\n  };\n\n  /**\n   * Update our internal duration on a `durationchange` event by calling\n   * {@link Tech#duration}.\n   *\n   * @param {EventTarget~Event} event\n   *        The `durationchange` event that caused this to run.\n   *\n   * @listens Tech#durationchange\n   */\n\n\n  Tech.prototype.onDurationChange = function onDurationChange(event) {\n    this.duration_ = this.duration();\n  };\n\n  /**\n   * Get and create a `TimeRange` object for buffering.\n   *\n   * @return {TimeRange}\n   *         The time range object that was created.\n   */\n\n\n  Tech.prototype.buffered = function buffered() {\n    return createTimeRanges(0, 0);\n  };\n\n  /**\n   * Get the percentage of the current video that is currently buffered.\n   *\n   * @return {number}\n   *         A number from 0 to 1 that represents the decimal percentage of the\n   *         video that is buffered.\n   *\n   */\n\n\n  Tech.prototype.bufferedPercent = function bufferedPercent$$1() {\n    return bufferedPercent(this.buffered(), this.duration_);\n  };\n\n  /**\n   * Turn off the polyfill for `progress` events that was created in\n   * {@link Tech#manualProgressOn}\n   * Stop manually tracking progress events by clearing the interval that was set in\n   * {@link Tech#trackProgress}.\n   */\n\n\n  Tech.prototype.stopTrackingProgress = function stopTrackingProgress() {\n    this.clearInterval(this.progressInterval);\n  };\n\n  /**\n   * Polyfill the `timeupdate` event for browsers that don't support it.\n   *\n   * @see {@link Tech#trackCurrentTime}\n   */\n\n\n  Tech.prototype.manualTimeUpdatesOn = function manualTimeUpdatesOn() {\n    this.manualTimeUpdates = true;\n\n    this.on('play', this.trackCurrentTime);\n    this.on('pause', this.stopTrackingCurrentTime);\n  };\n\n  /**\n   * Turn off the polyfill for `timeupdate` events that was created in\n   * {@link Tech#manualTimeUpdatesOn}\n   */\n\n\n  Tech.prototype.manualTimeUpdatesOff = function manualTimeUpdatesOff() {\n    this.manualTimeUpdates = false;\n    this.stopTrackingCurrentTime();\n    this.off('play', this.trackCurrentTime);\n    this.off('pause', this.stopTrackingCurrentTime);\n  };\n\n  /**\n   * Sets up an interval function to track current time and trigger `timeupdate` every\n   * 250 milliseconds.\n   *\n   * @listens Tech#play\n   * @triggers Tech#timeupdate\n   */\n\n\n  Tech.prototype.trackCurrentTime = function trackCurrentTime() {\n    if (this.currentTimeInterval) {\n      this.stopTrackingCurrentTime();\n    }\n    this.currentTimeInterval = this.setInterval(function () {\n      /**\n       * Triggered at an interval of 250ms to indicated that time is passing in the video.\n       *\n       * @event Tech#timeupdate\n       * @type {EventTarget~Event}\n       */\n      this.trigger({ type: 'timeupdate', target: this, manuallyTriggered: true });\n\n      // 42 = 24 fps // 250 is what Webkit uses // FF uses 15\n    }, 250);\n  };\n\n  /**\n   * Stop the interval function created in {@link Tech#trackCurrentTime} so that the\n   * `timeupdate` event is no longer triggered.\n   *\n   * @listens {Tech#pause}\n   */\n\n\n  Tech.prototype.stopTrackingCurrentTime = function stopTrackingCurrentTime() {\n    this.clearInterval(this.currentTimeInterval);\n\n    // #1002 - if the video ends right before the next timeupdate would happen,\n    // the progress bar won't make it all the way to the end\n    this.trigger({ type: 'timeupdate', target: this, manuallyTriggered: true });\n  };\n\n  /**\n   * Turn off all event polyfills, clear the `Tech`s {@link AudioTrackList},\n   * {@link VideoTrackList}, and {@link TextTrackList}, and dispose of this Tech.\n   *\n   * @fires Component#dispose\n   */\n\n\n  Tech.prototype.dispose = function dispose() {\n\n    // clear out all tracks because we can't reuse them between techs\n    this.clearTracks(NORMAL.names);\n\n    // Turn off any manual progress or timeupdate tracking\n    if (this.manualProgress) {\n      this.manualProgressOff();\n    }\n\n    if (this.manualTimeUpdates) {\n      this.manualTimeUpdatesOff();\n    }\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  /**\n   * Clear out a single `TrackList` or an array of `TrackLists` given their names.\n   *\n   * > Note: Techs without source handlers should call this between sources for `video`\n   *         & `audio` tracks. You don't want to use them between tracks!\n   *\n   * @param {string[]|string} types\n   *        TrackList names to clear, valid names are `video`, `audio`, and\n   *        `text`.\n   */\n\n\n  Tech.prototype.clearTracks = function clearTracks(types) {\n    var _this3 = this;\n\n    types = [].concat(types);\n    // clear out all tracks because we can't reuse them between techs\n    types.forEach(function (type) {\n      var list = _this3[type + 'Tracks']() || [];\n      var i = list.length;\n\n      while (i--) {\n        var track = list[i];\n\n        if (type === 'text') {\n          _this3.removeRemoteTextTrack(track);\n        }\n        list.removeTrack(track);\n      }\n    });\n  };\n\n  /**\n   * Remove any TextTracks added via addRemoteTextTrack that are\n   * flagged for automatic garbage collection\n   */\n\n\n  Tech.prototype.cleanupAutoTextTracks = function cleanupAutoTextTracks() {\n    var list = this.autoRemoteTextTracks_ || [];\n    var i = list.length;\n\n    while (i--) {\n      var track = list[i];\n\n      this.removeRemoteTextTrack(track);\n    }\n  };\n\n  /**\n   * Reset the tech, which will removes all sources and reset the internal readyState.\n   *\n   * @abstract\n   */\n\n\n  Tech.prototype.reset = function reset() {};\n\n  /**\n   * Get or set an error on the Tech.\n   *\n   * @param {MediaError} [err]\n   *        Error to set on the Tech\n   *\n   * @return {MediaError|null}\n   *         The current error object on the tech, or null if there isn't one.\n   */\n\n\n  Tech.prototype.error = function error(err) {\n    if (err !== undefined) {\n      this.error_ = new MediaError(err);\n      this.trigger('error');\n    }\n    return this.error_;\n  };\n\n  /**\n   * Returns the `TimeRange`s that have been played through for the current source.\n   *\n   * > NOTE: This implementation is incomplete. It does not track the played `TimeRange`.\n   *         It only checks wether the source has played at all or not.\n   *\n   * @return {TimeRange}\n   *         - A single time range if this video has played\n   *         - An empty set of ranges if not.\n   */\n\n\n  Tech.prototype.played = function played() {\n    if (this.hasStarted_) {\n      return createTimeRanges(0, 0);\n    }\n    return createTimeRanges();\n  };\n\n  /**\n   * Causes a manual time update to occur if {@link Tech#manualTimeUpdatesOn} was\n   * previously called.\n   *\n   * @fires Tech#timeupdate\n   */\n\n\n  Tech.prototype.setCurrentTime = function setCurrentTime() {\n    // improve the accuracy of manual timeupdates\n    if (this.manualTimeUpdates) {\n      /**\n       * A manual `timeupdate` event.\n       *\n       * @event Tech#timeupdate\n       * @type {EventTarget~Event}\n       */\n      this.trigger({ type: 'timeupdate', target: this, manuallyTriggered: true });\n    }\n  };\n\n  /**\n   * Turn on listeners for {@link VideoTrackList}, {@link {AudioTrackList}, and\n   * {@link TextTrackList} events.\n   *\n   * This adds {@link EventTarget~EventListeners} for `addtrack`, and  `removetrack`.\n   *\n   * @fires Tech#audiotrackchange\n   * @fires Tech#videotrackchange\n   * @fires Tech#texttrackchange\n   */\n\n\n  Tech.prototype.initTrackListeners = function initTrackListeners() {\n    var _this4 = this;\n\n    /**\n     * Triggered when tracks are added or removed on the Tech {@link AudioTrackList}\n     *\n     * @event Tech#audiotrackchange\n     * @type {EventTarget~Event}\n     */\n\n    /**\n     * Triggered when tracks are added or removed on the Tech {@link VideoTrackList}\n     *\n     * @event Tech#videotrackchange\n     * @type {EventTarget~Event}\n     */\n\n    /**\n     * Triggered when tracks are added or removed on the Tech {@link TextTrackList}\n     *\n     * @event Tech#texttrackchange\n     * @type {EventTarget~Event}\n     */\n    NORMAL.names.forEach(function (name) {\n      var props = NORMAL[name];\n      var trackListChanges = function trackListChanges() {\n        _this4.trigger(name + 'trackchange');\n      };\n\n      var tracks = _this4[props.getterName]();\n\n      tracks.addEventListener('removetrack', trackListChanges);\n      tracks.addEventListener('addtrack', trackListChanges);\n\n      _this4.on('dispose', function () {\n        tracks.removeEventListener('removetrack', trackListChanges);\n        tracks.removeEventListener('addtrack', trackListChanges);\n      });\n    });\n  };\n\n  /**\n   * Emulate TextTracks using vtt.js if necessary\n   *\n   * @fires Tech#vttjsloaded\n   * @fires Tech#vttjserror\n   */\n\n\n  Tech.prototype.addWebVttScript_ = function addWebVttScript_() {\n    var _this5 = this;\n\n    if (window.WebVTT) {\n      return;\n    }\n\n    // Initially, Tech.el_ is a child of a dummy-div wait until the Component system\n    // signals that the Tech is ready at which point Tech.el_ is part of the DOM\n    // before inserting the WebVTT script\n    if (document.body.contains(this.el())) {\n\n      // load via require if available and vtt.js script location was not passed in\n      // as an option. novtt builds will turn the above require call into an empty object\n      // which will cause this if check to always fail.\n      if (!this.options_['vtt.js'] && isPlain(vtt) && Object.keys(vtt).length > 0) {\n        this.trigger('vttjsloaded');\n        return;\n      }\n\n      // load vtt.js via the script location option or the cdn of no location was\n      // passed in\n      var script = document.createElement('script');\n\n      script.src = this.options_['vtt.js'] || 'https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js';\n      script.onload = function () {\n        /**\n         * Fired when vtt.js is loaded.\n         *\n         * @event Tech#vttjsloaded\n         * @type {EventTarget~Event}\n         */\n        _this5.trigger('vttjsloaded');\n      };\n      script.onerror = function () {\n        /**\n         * Fired when vtt.js was not loaded due to an error\n         *\n         * @event Tech#vttjsloaded\n         * @type {EventTarget~Event}\n         */\n        _this5.trigger('vttjserror');\n      };\n      this.on('dispose', function () {\n        script.onload = null;\n        script.onerror = null;\n      });\n      // but have not loaded yet and we set it to true before the inject so that\n      // we don't overwrite the injected window.WebVTT if it loads right away\n      window.WebVTT = true;\n      this.el().parentNode.appendChild(script);\n    } else {\n      this.ready(this.addWebVttScript_);\n    }\n  };\n\n  /**\n   * Emulate texttracks\n   *\n   */\n\n\n  Tech.prototype.emulateTextTracks = function emulateTextTracks() {\n    var _this6 = this;\n\n    var tracks = this.textTracks();\n    var remoteTracks = this.remoteTextTracks();\n    var handleAddTrack = function handleAddTrack(e) {\n      return tracks.addTrack(e.track);\n    };\n    var handleRemoveTrack = function handleRemoveTrack(e) {\n      return tracks.removeTrack(e.track);\n    };\n\n    remoteTracks.on('addtrack', handleAddTrack);\n    remoteTracks.on('removetrack', handleRemoveTrack);\n\n    this.addWebVttScript_();\n\n    var updateDisplay = function updateDisplay() {\n      return _this6.trigger('texttrackchange');\n    };\n\n    var textTracksChanges = function textTracksChanges() {\n      updateDisplay();\n\n      for (var i = 0; i < tracks.length; i++) {\n        var track = tracks[i];\n\n        track.removeEventListener('cuechange', updateDisplay);\n        if (track.mode === 'showing') {\n          track.addEventListener('cuechange', updateDisplay);\n        }\n      }\n    };\n\n    textTracksChanges();\n    tracks.addEventListener('change', textTracksChanges);\n    tracks.addEventListener('addtrack', textTracksChanges);\n    tracks.addEventListener('removetrack', textTracksChanges);\n\n    this.on('dispose', function () {\n      remoteTracks.off('addtrack', handleAddTrack);\n      remoteTracks.off('removetrack', handleRemoveTrack);\n      tracks.removeEventListener('change', textTracksChanges);\n      tracks.removeEventListener('addtrack', textTracksChanges);\n      tracks.removeEventListener('removetrack', textTracksChanges);\n\n      for (var i = 0; i < tracks.length; i++) {\n        var track = tracks[i];\n\n        track.removeEventListener('cuechange', updateDisplay);\n      }\n    });\n  };\n\n  /**\n   * Create and returns a remote {@link TextTrack} object.\n   *\n   * @param {string} kind\n   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)\n   *\n   * @param {string} [label]\n   *        Label to identify the text track\n   *\n   * @param {string} [language]\n   *        Two letter language abbreviation\n   *\n   * @return {TextTrack}\n   *         The TextTrack that gets created.\n   */\n\n\n  Tech.prototype.addTextTrack = function addTextTrack(kind, label, language) {\n    if (!kind) {\n      throw new Error('TextTrack kind is required but was not provided');\n    }\n\n    return createTrackHelper(this, kind, label, language);\n  };\n\n  /**\n   * Create an emulated TextTrack for use by addRemoteTextTrack\n   *\n   * This is intended to be overridden by classes that inherit from\n   * Tech in order to create native or custom TextTracks.\n   *\n   * @param {Object} options\n   *        The object should contain the options to initialize the TextTrack with.\n   *\n   * @param {string} [options.kind]\n   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata).\n   *\n   * @param {string} [options.label].\n   *        Label to identify the text track\n   *\n   * @param {string} [options.language]\n   *        Two letter language abbreviation.\n   *\n   * @return {HTMLTrackElement}\n   *         The track element that gets created.\n   */\n\n\n  Tech.prototype.createRemoteTextTrack = function createRemoteTextTrack(options) {\n    var track = mergeOptions(options, {\n      tech: this\n    });\n\n    return new REMOTE.remoteTextEl.TrackClass(track);\n  };\n\n  /**\n   * Creates a remote text track object and returns an html track element.\n   *\n   * > Note: This can be an emulated {@link HTMLTrackElement} or a native one.\n   *\n   * @param {Object} options\n   *        See {@link Tech#createRemoteTextTrack} for more detailed properties.\n   *\n   * @param {boolean} [manualCleanup=true]\n   *        - When false: the TextTrack will be automatically removed from the video\n   *          element whenever the source changes\n   *        - When True: The TextTrack will have to be cleaned up manually\n   *\n   * @return {HTMLTrackElement}\n   *         An Html Track Element.\n   *\n   * @deprecated The default functionality for this function will be equivalent\n   *             to \"manualCleanup=false\" in the future. The manualCleanup parameter will\n   *             also be removed.\n   */\n\n\n  Tech.prototype.addRemoteTextTrack = function addRemoteTextTrack() {\n    var _this7 = this;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var manualCleanup = arguments[1];\n\n    var htmlTrackElement = this.createRemoteTextTrack(options);\n\n    if (manualCleanup !== true && manualCleanup !== false) {\n      // deprecation warning\n      log$1.warn('Calling addRemoteTextTrack without explicitly setting the \"manualCleanup\" parameter to `true` is deprecated and default to `false` in future version of video.js');\n      manualCleanup = true;\n    }\n\n    // store HTMLTrackElement and TextTrack to remote list\n    this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);\n    this.remoteTextTracks().addTrack(htmlTrackElement.track);\n\n    if (manualCleanup !== true) {\n      // create the TextTrackList if it doesn't exist\n      this.ready(function () {\n        return _this7.autoRemoteTextTracks_.addTrack(htmlTrackElement.track);\n      });\n    }\n\n    return htmlTrackElement;\n  };\n\n  /**\n   * Remove a remote text track from the remote `TextTrackList`.\n   *\n   * @param {TextTrack} track\n   *        `TextTrack` to remove from the `TextTrackList`\n   */\n\n\n  Tech.prototype.removeRemoteTextTrack = function removeRemoteTextTrack(track) {\n    var trackElement = this.remoteTextTrackEls().getTrackElementByTrack_(track);\n\n    // remove HTMLTrackElement and TextTrack from remote list\n    this.remoteTextTrackEls().removeTrackElement_(trackElement);\n    this.remoteTextTracks().removeTrack(track);\n    this.autoRemoteTextTracks_.removeTrack(track);\n  };\n\n  /**\n   * Gets available media playback quality metrics as specified by the W3C's Media\n   * Playback Quality API.\n   *\n   * @see [Spec]{@link https://wicg.github.io/media-playback-quality}\n   *\n   * @return {Object}\n   *         An object with supported media playback quality metrics\n   *\n   * @abstract\n   */\n\n\n  Tech.prototype.getVideoPlaybackQuality = function getVideoPlaybackQuality() {\n    return {};\n  };\n\n  /**\n   * A method to set a poster from a `Tech`.\n   *\n   * @abstract\n   */\n\n\n  Tech.prototype.setPoster = function setPoster() {};\n\n  /**\n   * A method to check for the presence of the 'playsinine' <video> attribute.\n   *\n   * @abstract\n   */\n\n\n  Tech.prototype.playsinline = function playsinline() {};\n\n  /**\n   * A method to set or unset the 'playsinine' <video> attribute.\n   *\n   * @abstract\n   */\n\n\n  Tech.prototype.setPlaysinline = function setPlaysinline() {};\n\n  /*\n   * Check if the tech can support the given mime-type.\n   *\n   * The base tech does not support any type, but source handlers might\n   * overwrite this.\n   *\n   * @param  {string} type\n   *         The mimetype to check for support\n   *\n   * @return {string}\n   *         'probably', 'maybe', or empty string\n   *\n   * @see [Spec]{@link https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/canPlayType}\n   *\n   * @abstract\n   */\n\n\n  Tech.prototype.canPlayType = function canPlayType() {\n    return '';\n  };\n\n  /**\n   * Check if the type is supported by this tech.\n   *\n   * The base tech does not support any type, but source handlers might\n   * overwrite this.\n   *\n   * @param {string} type\n   *        The media type to check\n   * @return {string} Returns the native video element's response\n   */\n\n\n  Tech.canPlayType = function canPlayType() {\n    return '';\n  };\n\n  /**\n   * Check if the tech can support the given source\n   * @param {Object} srcObj\n   *        The source object\n   * @param {Object} options\n   *        The options passed to the tech\n   * @return {string} 'probably', 'maybe', or '' (empty string)\n   */\n\n\n  Tech.canPlaySource = function canPlaySource(srcObj, options) {\n    return Tech.canPlayType(srcObj.type);\n  };\n\n  /*\n   * Return whether the argument is a Tech or not.\n   * Can be passed either a Class like `Html5` or a instance like `player.tech_`\n   *\n   * @param {Object} component\n   *        The item to check\n   *\n   * @return {boolean}\n   *         Whether it is a tech or not\n   *         - True if it is a tech\n   *         - False if it is not\n   */\n\n\n  Tech.isTech = function isTech(component) {\n    return component.prototype instanceof Tech || component instanceof Tech || component === Tech;\n  };\n\n  /**\n   * Registers a `Tech` into a shared list for videojs.\n   *\n   * @param {string} name\n   *        Name of the `Tech` to register.\n   *\n   * @param {Object} tech\n   *        The `Tech` class to register.\n   */\n\n\n  Tech.registerTech = function registerTech(name, tech) {\n    if (!Tech.techs_) {\n      Tech.techs_ = {};\n    }\n\n    if (!Tech.isTech(tech)) {\n      throw new Error('Tech ' + name + ' must be a Tech');\n    }\n\n    if (!Tech.canPlayType) {\n      throw new Error('Techs must have a static canPlayType method on them');\n    }\n    if (!Tech.canPlaySource) {\n      throw new Error('Techs must have a static canPlaySource method on them');\n    }\n\n    name = toTitleCase(name);\n\n    Tech.techs_[name] = tech;\n    if (name !== 'Tech') {\n      // camel case the techName for use in techOrder\n      Tech.defaultTechOrder_.push(name);\n    }\n    return tech;\n  };\n\n  /**\n   * Get a `Tech` from the shared list by name.\n   *\n   * @param {string} name\n   *        `camelCase` or `TitleCase` name of the Tech to get\n   *\n   * @return {Tech|undefined}\n   *         The `Tech` or undefined if there was no tech with the name requsted.\n   */\n\n\n  Tech.getTech = function getTech(name) {\n    if (!name) {\n      return;\n    }\n\n    name = toTitleCase(name);\n\n    if (Tech.techs_ && Tech.techs_[name]) {\n      return Tech.techs_[name];\n    }\n\n    if (window && window.videojs && window.videojs[name]) {\n      log$1.warn('The ' + name + ' tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)');\n      return window.videojs[name];\n    }\n  };\n\n  return Tech;\n}(Component);\n\n/**\n * Get the {@link VideoTrackList}\n *\n * @returns {VideoTrackList}\n * @method Tech.prototype.videoTracks\n */\n\n/**\n * Get the {@link AudioTrackList}\n *\n * @returns {AudioTrackList}\n * @method Tech.prototype.audioTracks\n */\n\n/**\n * Get the {@link TextTrackList}\n *\n * @returns {TextTrackList}\n * @method Tech.prototype.textTracks\n */\n\n/**\n * Get the remote element {@link TextTrackList}\n *\n * @returns {TextTrackList}\n * @method Tech.prototype.remoteTextTracks\n */\n\n/**\n * Get the remote element {@link HtmlTrackElementList}\n *\n * @returns {HtmlTrackElementList}\n * @method Tech.prototype.remoteTextTrackEls\n */\n\nALL.names.forEach(function (name) {\n  var props = ALL[name];\n\n  Tech.prototype[props.getterName] = function () {\n    this[props.privateName] = this[props.privateName] || new props.ListClass();\n    return this[props.privateName];\n  };\n});\n\n/**\n * List of associated text tracks\n *\n * @type {TextTrackList}\n * @private\n * @property Tech#textTracks_\n */\n\n/**\n * List of associated audio tracks.\n *\n * @type {AudioTrackList}\n * @private\n * @property Tech#audioTracks_\n */\n\n/**\n * List of associated video tracks.\n *\n * @type {VideoTrackList}\n * @private\n * @property Tech#videoTracks_\n */\n\n/**\n * Boolean indicating wether the `Tech` supports volume control.\n *\n * @type {boolean}\n * @default\n */\nTech.prototype.featuresVolumeControl = true;\n\n/**\n * Boolean indicating whether the `Tech` supports muting volume.\n *\n * @type {bolean}\n * @default\n */\nTech.prototype.featuresMuteControl = true;\n\n/**\n * Boolean indicating whether the `Tech` supports fullscreen resize control.\n * Resizing plugins using request fullscreen reloads the plugin\n *\n * @type {boolean}\n * @default\n */\nTech.prototype.featuresFullscreenResize = false;\n\n/**\n * Boolean indicating wether the `Tech` supports changing the speed at which the video\n * plays. Examples:\n *   - Set player to play 2x (twice) as fast\n *   - Set player to play 0.5x (half) as fast\n *\n * @type {boolean}\n * @default\n */\nTech.prototype.featuresPlaybackRate = false;\n\n/**\n * Boolean indicating wether the `Tech` supports the `progress` event. This is currently\n * not triggered by video-js-swf. This will be used to determine if\n * {@link Tech#manualProgressOn} should be called.\n *\n * @type {boolean}\n * @default\n */\nTech.prototype.featuresProgressEvents = false;\n\n/**\n * Boolean indicating wether the `Tech` supports the `sourceset` event.\n *\n * A tech should set this to `true` and then use {@link Tech#triggerSourceset}\n * to trigger a {@link Tech#event:sourceset} at the earliest time after getting\n * a new source.\n *\n * @type {boolean}\n * @default\n */\nTech.prototype.featuresSourceset = false;\n\n/**\n * Boolean indicating wether the `Tech` supports the `timeupdate` event. This is currently\n * not triggered by video-js-swf. This will be used to determine if\n * {@link Tech#manualTimeUpdates} should be called.\n *\n * @type {boolean}\n * @default\n */\nTech.prototype.featuresTimeupdateEvents = false;\n\n/**\n * Boolean indicating wether the `Tech` supports the native `TextTrack`s.\n * This will help us integrate with native `TextTrack`s if the browser supports them.\n *\n * @type {boolean}\n * @default\n */\nTech.prototype.featuresNativeTextTracks = false;\n\n/**\n * A functional mixin for techs that want to use the Source Handler pattern.\n * Source handlers are scripts for handling specific formats.\n * The source handler pattern is used for adaptive formats (HLS, DASH) that\n * manually load video data and feed it into a Source Buffer (Media Source Extensions)\n * Example: `Tech.withSourceHandlers.call(MyTech);`\n *\n * @param {Tech} _Tech\n *        The tech to add source handler functions to.\n *\n * @mixes Tech~SourceHandlerAdditions\n */\nTech.withSourceHandlers = function (_Tech) {\n\n  /**\n   * Register a source handler\n   *\n   * @param {Function} handler\n   *        The source handler class\n   *\n   * @param {number} [index]\n   *        Register it at the following index\n   */\n  _Tech.registerSourceHandler = function (handler, index) {\n    var handlers = _Tech.sourceHandlers;\n\n    if (!handlers) {\n      handlers = _Tech.sourceHandlers = [];\n    }\n\n    if (index === undefined) {\n      // add to the end of the list\n      index = handlers.length;\n    }\n\n    handlers.splice(index, 0, handler);\n  };\n\n  /**\n   * Check if the tech can support the given type. Also checks the\n   * Techs sourceHandlers.\n   *\n   * @param {string} type\n   *         The mimetype to check.\n   *\n   * @return {string}\n   *         'probably', 'maybe', or '' (empty string)\n   */\n  _Tech.canPlayType = function (type) {\n    var handlers = _Tech.sourceHandlers || [];\n    var can = void 0;\n\n    for (var i = 0; i < handlers.length; i++) {\n      can = handlers[i].canPlayType(type);\n\n      if (can) {\n        return can;\n      }\n    }\n\n    return '';\n  };\n\n  /**\n   * Returns the first source handler that supports the source.\n   *\n   * TODO: Answer question: should 'probably' be prioritized over 'maybe'\n   *\n   * @param {Tech~SourceObject} source\n   *        The source object\n   *\n   * @param {Object} options\n   *        The options passed to the tech\n   *\n   * @return {SourceHandler|null}\n   *          The first source handler that supports the source or null if\n   *          no SourceHandler supports the source\n   */\n  _Tech.selectSourceHandler = function (source, options) {\n    var handlers = _Tech.sourceHandlers || [];\n    var can = void 0;\n\n    for (var i = 0; i < handlers.length; i++) {\n      can = handlers[i].canHandleSource(source, options);\n\n      if (can) {\n        return handlers[i];\n      }\n    }\n\n    return null;\n  };\n\n  /**\n   * Check if the tech can support the given source.\n   *\n   * @param {Tech~SourceObject} srcObj\n   *        The source object\n   *\n   * @param {Object} options\n   *        The options passed to the tech\n   *\n   * @return {string}\n   *         'probably', 'maybe', or '' (empty string)\n   */\n  _Tech.canPlaySource = function (srcObj, options) {\n    var sh = _Tech.selectSourceHandler(srcObj, options);\n\n    if (sh) {\n      return sh.canHandleSource(srcObj, options);\n    }\n\n    return '';\n  };\n\n  /**\n   * When using a source handler, prefer its implementation of\n   * any function normally provided by the tech.\n   */\n  var deferrable = ['seekable', 'seeking', 'duration'];\n\n  /**\n   * A wrapper around {@link Tech#seekable} that will call a `SourceHandler`s seekable\n   * function if it exists, with a fallback to the Techs seekable function.\n   *\n   * @method _Tech.seekable\n   */\n\n  /**\n   * A wrapper around {@link Tech#duration} that will call a `SourceHandler`s duration\n   * function if it exists, otherwise it will fallback to the techs duration function.\n   *\n   * @method _Tech.duration\n   */\n\n  deferrable.forEach(function (fnName) {\n    var originalFn = this[fnName];\n\n    if (typeof originalFn !== 'function') {\n      return;\n    }\n\n    this[fnName] = function () {\n      if (this.sourceHandler_ && this.sourceHandler_[fnName]) {\n        return this.sourceHandler_[fnName].apply(this.sourceHandler_, arguments);\n      }\n      return originalFn.apply(this, arguments);\n    };\n  }, _Tech.prototype);\n\n  /**\n   * Create a function for setting the source using a source object\n   * and source handlers.\n   * Should never be called unless a source handler was found.\n   *\n   * @param {Tech~SourceObject} source\n   *        A source object with src and type keys\n   */\n  _Tech.prototype.setSource = function (source) {\n    var sh = _Tech.selectSourceHandler(source, this.options_);\n\n    if (!sh) {\n      // Fall back to a native source hander when unsupported sources are\n      // deliberately set\n      if (_Tech.nativeSourceHandler) {\n        sh = _Tech.nativeSourceHandler;\n      } else {\n        log$1.error('No source hander found for the current source.');\n      }\n    }\n\n    // Dispose any existing source handler\n    this.disposeSourceHandler();\n    this.off('dispose', this.disposeSourceHandler);\n\n    if (sh !== _Tech.nativeSourceHandler) {\n      this.currentSource_ = source;\n    }\n\n    this.sourceHandler_ = sh.handleSource(source, this, this.options_);\n    this.on('dispose', this.disposeSourceHandler);\n  };\n\n  /**\n   * Clean up any existing SourceHandlers and listeners when the Tech is disposed.\n   *\n   * @listens Tech#dispose\n   */\n  _Tech.prototype.disposeSourceHandler = function () {\n    // if we have a source and get another one\n    // then we are loading something new\n    // than clear all of our current tracks\n    if (this.currentSource_) {\n      this.clearTracks(['audio', 'video']);\n      this.currentSource_ = null;\n    }\n\n    // always clean up auto-text tracks\n    this.cleanupAutoTextTracks();\n\n    if (this.sourceHandler_) {\n\n      if (this.sourceHandler_.dispose) {\n        this.sourceHandler_.dispose();\n      }\n\n      this.sourceHandler_ = null;\n    }\n  };\n};\n\n// The base Tech class needs to be registered as a Component. It is the only\n// Tech that can be registered as a Component.\nComponent.registerComponent('Tech', Tech);\nTech.registerTech('Tech', Tech);\n\n/**\n * A list of techs that should be added to techOrder on Players\n *\n * @private\n */\nTech.defaultTechOrder_ = [];\n\nvar middlewares = {};\nvar middlewareInstances = {};\n\nvar TERMINATOR = {};\n\nfunction use(type, middleware) {\n  middlewares[type] = middlewares[type] || [];\n  middlewares[type].push(middleware);\n}\n\n\n\nfunction setSource(player, src, next) {\n  player.setTimeout(function () {\n    return setSourceHelper(src, middlewares[src.type], next, player);\n  }, 1);\n}\n\nfunction setTech(middleware, tech) {\n  middleware.forEach(function (mw) {\n    return mw.setTech && mw.setTech(tech);\n  });\n}\n\n/**\n * Calls a getter on the tech first, through each middleware\n * from right to left to the player.\n */\nfunction get$1(middleware, tech, method) {\n  return middleware.reduceRight(middlewareIterator(method), tech[method]());\n}\n\n/**\n * Takes the argument given to the player and calls the setter method on each\n * middlware from left to right to the tech.\n */\nfunction set$1(middleware, tech, method, arg) {\n  return tech[method](middleware.reduce(middlewareIterator(method), arg));\n}\n\n/**\n * Takes the argument given to the player and calls the `call` version of the method\n * on each middleware from left to right.\n * Then, call the passed in method on the tech and return the result unchanged\n * back to the player, through middleware, this time from right to left.\n */\nfunction mediate(middleware, tech, method) {\n  var arg = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  var callMethod = 'call' + toTitleCase(method);\n  var middlewareValue = middleware.reduce(middlewareIterator(callMethod), arg);\n  var terminated = middlewareValue === TERMINATOR;\n  var returnValue = terminated ? null : tech[method](middlewareValue);\n\n  executeRight(middleware, method, returnValue, terminated);\n\n  return returnValue;\n}\n\nvar allowedGetters = {\n  buffered: 1,\n  currentTime: 1,\n  duration: 1,\n  seekable: 1,\n  played: 1,\n  paused: 1\n};\n\nvar allowedSetters = {\n  setCurrentTime: 1\n};\n\nvar allowedMediators = {\n  play: 1,\n  pause: 1\n};\n\nfunction middlewareIterator(method) {\n  return function (value, mw) {\n    // if the previous middleware terminated, pass along the termination\n    if (value === TERMINATOR) {\n      return TERMINATOR;\n    }\n\n    if (mw[method]) {\n      return mw[method](value);\n    }\n\n    return value;\n  };\n}\n\nfunction executeRight(mws, method, value, terminated) {\n  for (var i = mws.length - 1; i >= 0; i--) {\n    var mw = mws[i];\n\n    if (mw[method]) {\n      mw[method](terminated, value);\n    }\n  }\n}\n\nfunction clearCacheForPlayer(player) {\n  middlewareInstances[player.id()] = null;\n}\n\n/**\n * {\n *  [playerId]: [[mwFactory, mwInstance], ...]\n * }\n */\nfunction getOrCreateFactory(player, mwFactory) {\n  var mws = middlewareInstances[player.id()];\n  var mw = null;\n\n  if (mws === undefined || mws === null) {\n    mw = mwFactory(player);\n    middlewareInstances[player.id()] = [[mwFactory, mw]];\n    return mw;\n  }\n\n  for (var i = 0; i < mws.length; i++) {\n    var _mws$i = mws[i],\n        mwf = _mws$i[0],\n        mwi = _mws$i[1];\n\n\n    if (mwf !== mwFactory) {\n      continue;\n    }\n\n    mw = mwi;\n  }\n\n  if (mw === null) {\n    mw = mwFactory(player);\n    mws.push([mwFactory, mw]);\n  }\n\n  return mw;\n}\n\nfunction setSourceHelper() {\n  var src = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var middleware = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var next = arguments[2];\n  var player = arguments[3];\n  var acc = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : [];\n  var lastRun = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n  var mwFactory = middleware[0],\n      mwrest = middleware.slice(1);\n\n  // if mwFactory is a string, then we're at a fork in the road\n\n  if (typeof mwFactory === 'string') {\n    setSourceHelper(src, middlewares[mwFactory], next, player, acc, lastRun);\n\n    // if we have an mwFactory, call it with the player to get the mw,\n    // then call the mw's setSource method\n  } else if (mwFactory) {\n    var mw = getOrCreateFactory(player, mwFactory);\n\n    // if setSource isn't present, implicitly select this middleware\n    if (!mw.setSource) {\n      acc.push(mw);\n      return setSourceHelper(src, mwrest, next, player, acc, lastRun);\n    }\n\n    mw.setSource(assign({}, src), function (err, _src) {\n\n      // something happened, try the next middleware on the current level\n      // make sure to use the old src\n      if (err) {\n        return setSourceHelper(src, mwrest, next, player, acc, lastRun);\n      }\n\n      // we've succeeded, now we need to go deeper\n      acc.push(mw);\n\n      // if it's the same type, continue down the current chain\n      // otherwise, we want to go down the new chain\n      setSourceHelper(_src, src.type === _src.type ? mwrest : middlewares[_src.type], next, player, acc, lastRun);\n    });\n  } else if (mwrest.length) {\n    setSourceHelper(src, mwrest, next, player, acc, lastRun);\n  } else if (lastRun) {\n    next(src, acc);\n  } else {\n    setSourceHelper(src, middlewares['*'], next, player, acc, true);\n  }\n}\n\n/**\n * Mimetypes\n *\n * @see http://hul.harvard.edu/ois/////systems/wax/wax-public-help/mimetypes.htm\n * @typedef Mimetypes~Kind\n * @enum\n */\nvar MimetypesKind = {\n  opus: 'video/ogg',\n  ogv: 'video/ogg',\n  mp4: 'video/mp4',\n  mov: 'video/mp4',\n  m4v: 'video/mp4',\n  mkv: 'video/x-matroska',\n  mp3: 'audio/mpeg',\n  aac: 'audio/aac',\n  oga: 'audio/ogg',\n  m3u8: 'application/x-mpegURL'\n};\n\n/**\n * Get the mimetype of a given src url if possible\n *\n * @param {string} src\n *        The url to the src\n *\n * @return {string}\n *         return the mimetype if it was known or empty string otherwise\n */\nvar getMimetype = function getMimetype() {\n  var src = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n  var ext = getFileExtension(src);\n  var mimetype = MimetypesKind[ext.toLowerCase()];\n\n  return mimetype || '';\n};\n\n/**\n * Find the mime type of a given source string if possible. Uses the player\n * source cache.\n *\n * @param {Player} player\n *        The player object\n *\n * @param {string} src\n *        The source string\n *\n * @return {string}\n *         The type that was found\n */\nvar findMimetype = function findMimetype(player, src) {\n  if (!src) {\n    return '';\n  }\n\n  // 1. check for the type in the `source` cache\n  if (player.cache_.source.src === src && player.cache_.source.type) {\n    return player.cache_.source.type;\n  }\n\n  // 2. see if we have this source in our `currentSources` cache\n  var matchingSources = player.cache_.sources.filter(function (s) {\n    return s.src === src;\n  });\n\n  if (matchingSources.length) {\n    return matchingSources[0].type;\n  }\n\n  // 3. look for the src url in source elements and use the type there\n  var sources = player.$$('source');\n\n  for (var i = 0; i < sources.length; i++) {\n    var s = sources[i];\n\n    if (s.type && s.src && s.src === src) {\n      return s.type;\n    }\n  }\n\n  // 4. finally fallback to our list of mime types based on src url extension\n  return getMimetype(src);\n};\n\n/**\n * @module filter-source\n */\n/**\n * Filter out single bad source objects or multiple source objects in an\n * array. Also flattens nested source object arrays into a 1 dimensional\n * array of source objects.\n *\n * @param {Tech~SourceObject|Tech~SourceObject[]} src\n *        The src object to filter\n *\n * @return {Tech~SourceObject[]}\n *         An array of sourceobjects containing only valid sources\n *\n * @private\n */\nvar filterSource = function filterSource(src) {\n  // traverse array\n  if (Array.isArray(src)) {\n    var newsrc = [];\n\n    src.forEach(function (srcobj) {\n      srcobj = filterSource(srcobj);\n\n      if (Array.isArray(srcobj)) {\n        newsrc = newsrc.concat(srcobj);\n      } else if (isObject(srcobj)) {\n        newsrc.push(srcobj);\n      }\n    });\n\n    src = newsrc;\n  } else if (typeof src === 'string' && src.trim()) {\n    // convert string into object\n    src = [fixSource({ src: src })];\n  } else if (isObject(src) && typeof src.src === 'string' && src.src && src.src.trim()) {\n    // src is already valid\n    src = [fixSource(src)];\n  } else {\n    // invalid source, turn it into an empty array\n    src = [];\n  }\n\n  return src;\n};\n\n/**\n * Checks src mimetype, adding it when possible\n *\n * @param {Tech~SourceObject} src\n *        The src object to check\n * @return {Tech~SourceObject}\n *        src Object with known type\n */\nfunction fixSource(src) {\n  var mimetype = getMimetype(src.src);\n\n  if (!src.type && mimetype) {\n    src.type = mimetype;\n  }\n\n  return src;\n}\n\n/**\n * @file loader.js\n */\n/**\n * The `MediaLoader` is the `Component` that decides which playback technology to load\n * when a player is initialized.\n *\n * @extends Component\n */\n\nvar MediaLoader = function (_Component) {\n  inherits(MediaLoader, _Component);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should attach to.\n   *\n   * @param {Object} [options]\n   *        The key/value stroe of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function that is run when this component is ready.\n   */\n  function MediaLoader(player, options, ready) {\n    classCallCheck(this, MediaLoader);\n\n    // MediaLoader has no element\n    var options_ = mergeOptions({ createEl: false }, options);\n\n    // If there are no sources when the player is initialized,\n    // load the first supported playback technology.\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options_, ready));\n\n    if (!options.playerOptions.sources || options.playerOptions.sources.length === 0) {\n      for (var i = 0, j = options.playerOptions.techOrder; i < j.length; i++) {\n        var techName = toTitleCase(j[i]);\n        var tech = Tech.getTech(techName);\n\n        // Support old behavior of techs being registered as components.\n        // Remove once that deprecated behavior is removed.\n        if (!techName) {\n          tech = Component.getComponent(techName);\n        }\n\n        // Check if the browser supports this technology\n        if (tech && tech.isSupported()) {\n          player.loadTech_(techName);\n          break;\n        }\n      }\n    } else {\n      // Loop through playback technologies (HTML5, Flash) and check for support.\n      // Then load the best source.\n      // A few assumptions here:\n      //   All playback technologies respect preload false.\n      player.src(options.playerOptions.sources);\n    }\n    return _this;\n  }\n\n  return MediaLoader;\n}(Component);\n\nComponent.registerComponent('MediaLoader', MediaLoader);\n\n/**\n * @file button.js\n */\n/**\n * Clickable Component which is clickable or keyboard actionable,\n * but is not a native HTML button.\n *\n * @extends Component\n */\n\nvar ClickableComponent = function (_Component) {\n  inherits(ClickableComponent, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param  {Player} player\n   *         The `Player` that this class should be attached to.\n   *\n   * @param  {Object} [options]\n   *         The key/value store of player options.\n   */\n  function ClickableComponent(player, options) {\n    classCallCheck(this, ClickableComponent);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.emitTapEvents();\n\n    _this.enable();\n    return _this;\n  }\n\n  /**\n   * Create the `Component`s DOM element.\n   *\n   * @param {string} [tag=div]\n   *        The element's node type.\n   *\n   * @param {Object} [props={}]\n   *        An object of properties that should be set on the element.\n   *\n   * @param {Object} [attributes={}]\n   *        An object of attributes that should be set on the element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  ClickableComponent.prototype.createEl = function createEl$$1() {\n    var tag = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'div';\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    props = assign({\n      innerHTML: '<span aria-hidden=\"true\" class=\"vjs-icon-placeholder\"></span>',\n      className: this.buildCSSClass(),\n      tabIndex: 0\n    }, props);\n\n    if (tag === 'button') {\n      log$1.error('Creating a ClickableComponent with an HTML element of ' + tag + ' is not supported; use a Button instead.');\n    }\n\n    // Add ARIA attributes for clickable element which is not a native HTML button\n    attributes = assign({\n      role: 'button'\n    }, attributes);\n\n    this.tabIndex_ = props.tabIndex;\n\n    var el = _Component.prototype.createEl.call(this, tag, props, attributes);\n\n    this.createControlTextEl(el);\n\n    return el;\n  };\n\n  ClickableComponent.prototype.dispose = function dispose() {\n    // remove controlTextEl_ on dipose\n    this.controlTextEl_ = null;\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  /**\n   * Create a control text element on this `Component`\n   *\n   * @param {Element} [el]\n   *        Parent element for the control text.\n   *\n   * @return {Element}\n   *         The control text element that gets created.\n   */\n\n\n  ClickableComponent.prototype.createControlTextEl = function createControlTextEl(el) {\n    this.controlTextEl_ = createEl('span', {\n      className: 'vjs-control-text'\n    }, {\n      // let the screen reader user know that the text of the element may change\n      'aria-live': 'polite'\n    });\n\n    if (el) {\n      el.appendChild(this.controlTextEl_);\n    }\n\n    this.controlText(this.controlText_, el);\n\n    return this.controlTextEl_;\n  };\n\n  /**\n   * Get or set the localize text to use for the controls on the `Component`.\n   *\n   * @param {string} [text]\n   *        Control text for element.\n   *\n   * @param {Element} [el=this.el()]\n   *        Element to set the title on.\n   *\n   * @return {string}\n   *         - The control text when getting\n   */\n\n\n  ClickableComponent.prototype.controlText = function controlText(text) {\n    var el = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.el();\n\n    if (text === undefined) {\n      return this.controlText_ || 'Need Text';\n    }\n\n    var localizedText = this.localize(text);\n\n    this.controlText_ = text;\n    textContent(this.controlTextEl_, localizedText);\n    if (!this.nonIconControl) {\n      // Set title attribute if only an icon is shown\n      el.setAttribute('title', localizedText);\n    }\n  };\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  ClickableComponent.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-control vjs-button ' + _Component.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * Enable this `Component`s element.\n   */\n\n\n  ClickableComponent.prototype.enable = function enable() {\n    if (!this.enabled_) {\n      this.enabled_ = true;\n      this.removeClass('vjs-disabled');\n      this.el_.setAttribute('aria-disabled', 'false');\n      if (typeof this.tabIndex_ !== 'undefined') {\n        this.el_.setAttribute('tabIndex', this.tabIndex_);\n      }\n      this.on(['tap', 'click'], this.handleClick);\n      this.on('focus', this.handleFocus);\n      this.on('blur', this.handleBlur);\n    }\n  };\n\n  /**\n   * Disable this `Component`s element.\n   */\n\n\n  ClickableComponent.prototype.disable = function disable() {\n    this.enabled_ = false;\n    this.addClass('vjs-disabled');\n    this.el_.setAttribute('aria-disabled', 'true');\n    if (typeof this.tabIndex_ !== 'undefined') {\n      this.el_.removeAttribute('tabIndex');\n    }\n    this.off(['tap', 'click'], this.handleClick);\n    this.off('focus', this.handleFocus);\n    this.off('blur', this.handleBlur);\n  };\n\n  /**\n   * This gets called when a `ClickableComponent` gets:\n   * - Clicked (via the `click` event, listening starts in the constructor)\n   * - Tapped (via the `tap` event, listening starts in the constructor)\n   * - The following things happen in order:\n   *   1. {@link ClickableComponent#handleFocus} is called via a `focus` event on the\n   *      `ClickableComponent`.\n   *   2. {@link ClickableComponent#handleFocus} adds a listener for `keydown` on using\n   *      {@link ClickableComponent#handleKeyPress}.\n   *   3. `ClickableComponent` has not had a `blur` event (`blur` means that focus was lost). The user presses\n   *      the space or enter key.\n   *   4. {@link ClickableComponent#handleKeyPress} calls this function with the `keydown`\n   *      event as a parameter.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   * @abstract\n   */\n\n\n  ClickableComponent.prototype.handleClick = function handleClick(event) {};\n\n  /**\n   * This gets called when a `ClickableComponent` gains focus via a `focus` event.\n   * Turns on listening for `keydown` events. When they happen it\n   * calls `this.handleKeyPress`.\n   *\n   * @param {EventTarget~Event} event\n   *        The `focus` event that caused this function to be called.\n   *\n   * @listens focus\n   */\n\n\n  ClickableComponent.prototype.handleFocus = function handleFocus(event) {\n    on(document, 'keydown', bind(this, this.handleKeyPress));\n  };\n\n  /**\n   * Called when this ClickableComponent has focus and a key gets pressed down. By\n   * default it will call `this.handleClick` when the key is space or enter.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n\n\n  ClickableComponent.prototype.handleKeyPress = function handleKeyPress(event) {\n\n    // Support Space (32) or Enter (13) key operation to fire a click event\n    if (event.which === 32 || event.which === 13) {\n      event.preventDefault();\n      this.trigger('click');\n    } else if (_Component.prototype.handleKeyPress) {\n\n      // Pass keypress handling up for unsupported keys\n      _Component.prototype.handleKeyPress.call(this, event);\n    }\n  };\n\n  /**\n   * Called when a `ClickableComponent` loses focus. Turns off the listener for\n   * `keydown` events. Which Stops `this.handleKeyPress` from getting called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `blur` event that caused this function to be called.\n   *\n   * @listens blur\n   */\n\n\n  ClickableComponent.prototype.handleBlur = function handleBlur(event) {\n    off(document, 'keydown', bind(this, this.handleKeyPress));\n  };\n\n  return ClickableComponent;\n}(Component);\n\nComponent.registerComponent('ClickableComponent', ClickableComponent);\n\n/**\n * @file poster-image.js\n */\n/**\n * A `ClickableComponent` that handles showing the poster image for the player.\n *\n * @extends ClickableComponent\n */\n\nvar PosterImage = function (_ClickableComponent) {\n  inherits(PosterImage, _ClickableComponent);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should attach to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function PosterImage(player, options) {\n    classCallCheck(this, PosterImage);\n\n    var _this = possibleConstructorReturn(this, _ClickableComponent.call(this, player, options));\n\n    _this.update();\n    player.on('posterchange', bind(_this, _this.update));\n    return _this;\n  }\n\n  /**\n   * Clean up and dispose of the `PosterImage`.\n   */\n\n\n  PosterImage.prototype.dispose = function dispose() {\n    this.player().off('posterchange', this.update);\n    _ClickableComponent.prototype.dispose.call(this);\n  };\n\n  /**\n   * Create the `PosterImage`s DOM element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  PosterImage.prototype.createEl = function createEl$$1() {\n    var el = createEl('div', {\n      className: 'vjs-poster',\n\n      // Don't want poster to be tabbable.\n      tabIndex: -1\n    });\n\n    // To ensure the poster image resizes while maintaining its original aspect\n    // ratio, use a div with `background-size` when available. For browsers that\n    // do not support `background-size` (e.g. IE8), fall back on using a regular\n    // img element.\n    if (!BACKGROUND_SIZE_SUPPORTED) {\n      this.fallbackImg_ = createEl('img');\n      el.appendChild(this.fallbackImg_);\n    }\n\n    return el;\n  };\n\n  /**\n   * An {@link EventTarget~EventListener} for {@link Player#posterchange} events.\n   *\n   * @listens Player#posterchange\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `Player#posterchange` event that triggered this function.\n   */\n\n\n  PosterImage.prototype.update = function update(event) {\n    var url = this.player().poster();\n\n    this.setSrc(url);\n\n    // If there's no poster source we should display:none on this component\n    // so it's not still clickable or right-clickable\n    if (url) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  };\n\n  /**\n   * Set the source of the `PosterImage` depending on the display method.\n   *\n   * @param {string} url\n   *        The URL to the source for the `PosterImage`.\n   */\n\n\n  PosterImage.prototype.setSrc = function setSrc(url) {\n    if (this.fallbackImg_) {\n      this.fallbackImg_.src = url;\n    } else {\n      var backgroundImage = '';\n\n      // Any falsey values should stay as an empty string, otherwise\n      // this will throw an extra error\n      if (url) {\n        backgroundImage = 'url(\"' + url + '\")';\n      }\n\n      this.el_.style.backgroundImage = backgroundImage;\n    }\n  };\n\n  /**\n   * An {@link EventTarget~EventListener} for clicks on the `PosterImage`. See\n   * {@link ClickableComponent#handleClick} for instances where this will be triggered.\n   *\n   * @listens tap\n   * @listens click\n   * @listens keydown\n   *\n   * @param {EventTarget~Event} event\n   +        The `click`, `tap` or `keydown` event that caused this function to be called.\n   */\n\n\n  PosterImage.prototype.handleClick = function handleClick(event) {\n    // We don't want a click to trigger playback when controls are disabled\n    if (!this.player_.controls()) {\n      return;\n    }\n\n    if (this.player_.paused()) {\n      silencePromise(this.player_.play());\n    } else {\n      this.player_.pause();\n    }\n  };\n\n  return PosterImage;\n}(ClickableComponent);\n\nComponent.registerComponent('PosterImage', PosterImage);\n\n/**\n * @file text-track-display.js\n */\nvar darkGray = '#222';\nvar lightGray = '#ccc';\nvar fontMap = {\n  monospace: 'monospace',\n  sansSerif: 'sans-serif',\n  serif: 'serif',\n  monospaceSansSerif: '\"Andale Mono\", \"Lucida Console\", monospace',\n  monospaceSerif: '\"Courier New\", monospace',\n  proportionalSansSerif: 'sans-serif',\n  proportionalSerif: 'serif',\n  casual: '\"Comic Sans MS\", Impact, fantasy',\n  script: '\"Monotype Corsiva\", cursive',\n  smallcaps: '\"Andale Mono\", \"Lucida Console\", monospace, sans-serif'\n};\n\n/**\n * Construct an rgba color from a given hex color code.\n *\n * @param {number} color\n *        Hex number for color, like #f0e or #f604e2.\n *\n * @param {number} opacity\n *        Value for opacity, 0.0 - 1.0.\n *\n * @return {string}\n *         The rgba color that was created, like 'rgba(255, 0, 0, 0.3)'.\n */\nfunction constructColor(color, opacity) {\n  var hex = void 0;\n\n  if (color.length === 4) {\n    // color looks like \"#f0e\"\n    hex = color[1] + color[1] + color[2] + color[2] + color[3] + color[3];\n  } else if (color.length === 7) {\n    // color looks like \"#f604e2\"\n    hex = color.slice(1);\n  } else {\n    throw new Error('Invalid color code provided, ' + color + '; must be formatted as e.g. #f0e or #f604e2.');\n  }\n  return 'rgba(' + parseInt(hex.slice(0, 2), 16) + ',' + parseInt(hex.slice(2, 4), 16) + ',' + parseInt(hex.slice(4, 6), 16) + ',' + opacity + ')';\n}\n\n/**\n * Try to update the style of a DOM element. Some style changes will throw an error,\n * particularly in IE8. Those should be noops.\n *\n * @param {Element} el\n *        The DOM element to be styled.\n *\n * @param {string} style\n *        The CSS property on the element that should be styled.\n *\n * @param {string} rule\n *        The style rule that should be applied to the property.\n *\n * @private\n */\nfunction tryUpdateStyle(el, style, rule) {\n  try {\n    el.style[style] = rule;\n  } catch (e) {\n\n    // Satisfies linter.\n    return;\n  }\n}\n\n/**\n * The component for displaying text track cues.\n *\n * @extends Component\n */\n\nvar TextTrackDisplay = function (_Component) {\n  inherits(TextTrackDisplay, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when `TextTrackDisplay` is ready.\n   */\n  function TextTrackDisplay(player, options, ready) {\n    classCallCheck(this, TextTrackDisplay);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options, ready));\n\n    player.on('loadstart', bind(_this, _this.toggleDisplay));\n    player.on('texttrackchange', bind(_this, _this.updateDisplay));\n    player.on('loadstart', bind(_this, _this.preselectTrack));\n\n    // This used to be called during player init, but was causing an error\n    // if a track should show by default and the display hadn't loaded yet.\n    // Should probably be moved to an external track loader when we support\n    // tracks that don't need a display.\n    player.ready(bind(_this, function () {\n      if (player.tech_ && player.tech_.featuresNativeTextTracks) {\n        this.hide();\n        return;\n      }\n\n      player.on('fullscreenchange', bind(this, this.updateDisplay));\n\n      var tracks = this.options_.playerOptions.tracks || [];\n\n      for (var i = 0; i < tracks.length; i++) {\n        this.player_.addRemoteTextTrack(tracks[i], true);\n      }\n\n      this.preselectTrack();\n    }));\n    return _this;\n  }\n\n  /**\n  * Preselect a track following this precedence:\n  * - matches the previously selected {@link TextTrack}'s language and kind\n  * - matches the previously selected {@link TextTrack}'s language only\n  * - is the first default captions track\n  * - is the first default descriptions track\n  *\n  * @listens Player#loadstart\n  */\n\n\n  TextTrackDisplay.prototype.preselectTrack = function preselectTrack() {\n    var modes = { captions: 1, subtitles: 1 };\n    var trackList = this.player_.textTracks();\n    var userPref = this.player_.cache_.selectedLanguage;\n    var firstDesc = void 0;\n    var firstCaptions = void 0;\n    var preferredTrack = void 0;\n\n    for (var i = 0; i < trackList.length; i++) {\n      var track = trackList[i];\n\n      if (userPref && userPref.enabled && userPref.language === track.language) {\n        // Always choose the track that matches both language and kind\n        if (track.kind === userPref.kind) {\n          preferredTrack = track;\n          // or choose the first track that matches language\n        } else if (!preferredTrack) {\n          preferredTrack = track;\n        }\n\n        // clear everything if offTextTrackMenuItem was clicked\n      } else if (userPref && !userPref.enabled) {\n        preferredTrack = null;\n        firstDesc = null;\n        firstCaptions = null;\n      } else if (track['default']) {\n        if (track.kind === 'descriptions' && !firstDesc) {\n          firstDesc = track;\n        } else if (track.kind in modes && !firstCaptions) {\n          firstCaptions = track;\n        }\n      }\n    }\n\n    // The preferredTrack matches the user preference and takes\n    // precendence over all the other tracks.\n    // So, display the preferredTrack before the first default track\n    // and the subtitles/captions track before the descriptions track\n    if (preferredTrack) {\n      preferredTrack.mode = 'showing';\n    } else if (firstCaptions) {\n      firstCaptions.mode = 'showing';\n    } else if (firstDesc) {\n      firstDesc.mode = 'showing';\n    }\n  };\n\n  /**\n   * Turn display of {@link TextTrack}'s from the current state into the other state.\n   * There are only two states:\n   * - 'shown'\n   * - 'hidden'\n   *\n   * @listens Player#loadstart\n   */\n\n\n  TextTrackDisplay.prototype.toggleDisplay = function toggleDisplay() {\n    if (this.player_.tech_ && this.player_.tech_.featuresNativeTextTracks) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n\n  /**\n   * Create the {@link Component}'s DOM element.\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  TextTrackDisplay.prototype.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-text-track-display'\n    }, {\n      'aria-live': 'off',\n      'aria-atomic': 'true'\n    });\n  };\n\n  /**\n   * Clear all displayed {@link TextTrack}s.\n   */\n\n\n  TextTrackDisplay.prototype.clearDisplay = function clearDisplay() {\n    if (typeof window.WebVTT === 'function') {\n      window.WebVTT.processCues(window, [], this.el_);\n    }\n  };\n\n  /**\n   * Update the displayed TextTrack when a either a {@link Player#texttrackchange} or\n   * a {@link Player#fullscreenchange} is fired.\n   *\n   * @listens Player#texttrackchange\n   * @listens Player#fullscreenchange\n   */\n\n\n  TextTrackDisplay.prototype.updateDisplay = function updateDisplay() {\n    var tracks = this.player_.textTracks();\n\n    this.clearDisplay();\n\n    // Track display prioritization model: if multiple tracks are 'showing',\n    //  display the first 'subtitles' or 'captions' track which is 'showing',\n    //  otherwise display the first 'descriptions' track which is 'showing'\n\n    var descriptionsTrack = null;\n    var captionsSubtitlesTrack = null;\n    var i = tracks.length;\n\n    while (i--) {\n      var track = tracks[i];\n\n      if (track.mode === 'showing') {\n        if (track.kind === 'descriptions') {\n          descriptionsTrack = track;\n        } else {\n          captionsSubtitlesTrack = track;\n        }\n      }\n    }\n\n    if (captionsSubtitlesTrack) {\n      if (this.getAttribute('aria-live') !== 'off') {\n        this.setAttribute('aria-live', 'off');\n      }\n      this.updateForTrack(captionsSubtitlesTrack);\n    } else if (descriptionsTrack) {\n      if (this.getAttribute('aria-live') !== 'assertive') {\n        this.setAttribute('aria-live', 'assertive');\n      }\n      this.updateForTrack(descriptionsTrack);\n    }\n  };\n\n  /**\n   * Add an {@link Texttrack} to to the {@link Tech}s {@link TextTrackList}.\n   *\n   * @param {TextTrack} track\n   *        Text track object to be added to the list.\n   */\n\n\n  TextTrackDisplay.prototype.updateForTrack = function updateForTrack(track) {\n    if (typeof window.WebVTT !== 'function' || !track.activeCues) {\n      return;\n    }\n\n    var cues = [];\n\n    for (var _i = 0; _i < track.activeCues.length; _i++) {\n      cues.push(track.activeCues[_i]);\n    }\n\n    window.WebVTT.processCues(window, cues, this.el_);\n\n    if (!this.player_.textTrackSettings) {\n      return;\n    }\n\n    var overrides = this.player_.textTrackSettings.getValues();\n\n    var i = cues.length;\n\n    while (i--) {\n      var cue = cues[i];\n\n      if (!cue) {\n        continue;\n      }\n\n      var cueDiv = cue.displayState;\n\n      if (overrides.color) {\n        cueDiv.firstChild.style.color = overrides.color;\n      }\n      if (overrides.textOpacity) {\n        tryUpdateStyle(cueDiv.firstChild, 'color', constructColor(overrides.color || '#fff', overrides.textOpacity));\n      }\n      if (overrides.backgroundColor) {\n        cueDiv.firstChild.style.backgroundColor = overrides.backgroundColor;\n      }\n      if (overrides.backgroundOpacity) {\n        tryUpdateStyle(cueDiv.firstChild, 'backgroundColor', constructColor(overrides.backgroundColor || '#000', overrides.backgroundOpacity));\n      }\n      if (overrides.windowColor) {\n        if (overrides.windowOpacity) {\n          tryUpdateStyle(cueDiv, 'backgroundColor', constructColor(overrides.windowColor, overrides.windowOpacity));\n        } else {\n          cueDiv.style.backgroundColor = overrides.windowColor;\n        }\n      }\n      if (overrides.edgeStyle) {\n        if (overrides.edgeStyle === 'dropshadow') {\n          cueDiv.firstChild.style.textShadow = '2px 2px 3px ' + darkGray + ', 2px 2px 4px ' + darkGray + ', 2px 2px 5px ' + darkGray;\n        } else if (overrides.edgeStyle === 'raised') {\n          cueDiv.firstChild.style.textShadow = '1px 1px ' + darkGray + ', 2px 2px ' + darkGray + ', 3px 3px ' + darkGray;\n        } else if (overrides.edgeStyle === 'depressed') {\n          cueDiv.firstChild.style.textShadow = '1px 1px ' + lightGray + ', 0 1px ' + lightGray + ', -1px -1px ' + darkGray + ', 0 -1px ' + darkGray;\n        } else if (overrides.edgeStyle === 'uniform') {\n          cueDiv.firstChild.style.textShadow = '0 0 4px ' + darkGray + ', 0 0 4px ' + darkGray + ', 0 0 4px ' + darkGray + ', 0 0 4px ' + darkGray;\n        }\n      }\n      if (overrides.fontPercent && overrides.fontPercent !== 1) {\n        var fontSize = window.parseFloat(cueDiv.style.fontSize);\n\n        cueDiv.style.fontSize = fontSize * overrides.fontPercent + 'px';\n        cueDiv.style.height = 'auto';\n        cueDiv.style.top = 'auto';\n        cueDiv.style.bottom = '2px';\n      }\n      if (overrides.fontFamily && overrides.fontFamily !== 'default') {\n        if (overrides.fontFamily === 'small-caps') {\n          cueDiv.firstChild.style.fontVariant = 'small-caps';\n        } else {\n          cueDiv.firstChild.style.fontFamily = fontMap[overrides.fontFamily];\n        }\n      }\n    }\n  };\n\n  return TextTrackDisplay;\n}(Component);\n\nComponent.registerComponent('TextTrackDisplay', TextTrackDisplay);\n\n/**\n * @file loading-spinner.js\n */\n/**\n * A loading spinner for use during waiting/loading events.\n *\n * @extends Component\n */\n\nvar LoadingSpinner = function (_Component) {\n  inherits(LoadingSpinner, _Component);\n\n  function LoadingSpinner() {\n    classCallCheck(this, LoadingSpinner);\n    return possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  /**\n   * Create the `LoadingSpinner`s DOM element.\n   *\n   * @return {Element}\n   *         The dom element that gets created.\n   */\n  LoadingSpinner.prototype.createEl = function createEl$$1() {\n    var isAudio = this.player_.isAudio();\n    var playerType = this.localize(isAudio ? 'Audio Player' : 'Video Player');\n    var controlText = createEl('span', {\n      className: 'vjs-control-text',\n      innerHTML: this.localize('{1} is loading.', [playerType])\n    });\n\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-loading-spinner',\n      dir: 'ltr'\n    });\n\n    el.appendChild(controlText);\n\n    return el;\n  };\n\n  return LoadingSpinner;\n}(Component);\n\nComponent.registerComponent('LoadingSpinner', LoadingSpinner);\n\n/**\n * @file button.js\n */\n/**\n * Base class for all buttons.\n *\n * @extends ClickableComponent\n */\n\nvar Button = function (_ClickableComponent) {\n  inherits(Button, _ClickableComponent);\n\n  function Button() {\n    classCallCheck(this, Button);\n    return possibleConstructorReturn(this, _ClickableComponent.apply(this, arguments));\n  }\n\n  /**\n   * Create the `Button`s DOM element.\n   *\n   * @param {string} [tag=\"button\"]\n   *        The element's node type. This argument is IGNORED: no matter what\n   *        is passed, it will always create a `button` element.\n   *\n   * @param {Object} [props={}]\n   *        An object of properties that should be set on the element.\n   *\n   * @param {Object} [attributes={}]\n   *        An object of attributes that should be set on the element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n  Button.prototype.createEl = function createEl(tag) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    tag = 'button';\n\n    props = assign({\n      innerHTML: '<span aria-hidden=\"true\" class=\"vjs-icon-placeholder\"></span>',\n      className: this.buildCSSClass()\n    }, props);\n\n    // Add attributes for button element\n    attributes = assign({\n\n      // Necessary since the default button type is \"submit\"\n      type: 'button'\n    }, attributes);\n\n    var el = Component.prototype.createEl.call(this, tag, props, attributes);\n\n    this.createControlTextEl(el);\n\n    return el;\n  };\n\n  /**\n   * Add a child `Component` inside of this `Button`.\n   *\n   * @param {string|Component} child\n   *        The name or instance of a child to add.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of options that will get passed to children of\n   *        the child.\n   *\n   * @return {Component}\n   *         The `Component` that gets added as a child. When using a string the\n   *         `Component` will get created by this process.\n   *\n   * @deprecated since version 5\n   */\n\n\n  Button.prototype.addChild = function addChild(child) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var className = this.constructor.name;\n\n    log$1.warn('Adding an actionable (user controllable) child to a Button (' + className + ') is not supported; use a ClickableComponent instead.');\n\n    // Avoid the error message generated by ClickableComponent's addChild method\n    return Component.prototype.addChild.call(this, child, options);\n  };\n\n  /**\n   * Enable the `Button` element so that it can be activated or clicked. Use this with\n   * {@link Button#disable}.\n   */\n\n\n  Button.prototype.enable = function enable() {\n    _ClickableComponent.prototype.enable.call(this);\n    this.el_.removeAttribute('disabled');\n  };\n\n  /**\n   * Disable the `Button` element so that it cannot be activated or clicked. Use this with\n   * {@link Button#enable}.\n   */\n\n\n  Button.prototype.disable = function disable() {\n    _ClickableComponent.prototype.disable.call(this);\n    this.el_.setAttribute('disabled', 'disabled');\n  };\n\n  /**\n   * This gets called when a `Button` has focus and `keydown` is triggered via a key\n   * press.\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to get called.\n   *\n   * @listens keydown\n   */\n\n\n  Button.prototype.handleKeyPress = function handleKeyPress(event) {\n\n    // Ignore Space (32) or Enter (13) key operation, which is handled by the browser for a button.\n    if (event.which === 32 || event.which === 13) {\n      return;\n    }\n\n    // Pass keypress handling up for unsupported keys\n    _ClickableComponent.prototype.handleKeyPress.call(this, event);\n  };\n\n  return Button;\n}(ClickableComponent);\n\nComponent.registerComponent('Button', Button);\n\n/**\n * @file big-play-button.js\n */\n/**\n * The initial play button that shows before the video has played. The hiding of the\n * `BigPlayButton` get done via CSS and `Player` states.\n *\n * @extends Button\n */\n\nvar BigPlayButton = function (_Button) {\n  inherits(BigPlayButton, _Button);\n\n  function BigPlayButton(player, options) {\n    classCallCheck(this, BigPlayButton);\n\n    var _this = possibleConstructorReturn(this, _Button.call(this, player, options));\n\n    _this.mouseused_ = false;\n\n    _this.on('mousedown', _this.handleMouseDown);\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object. Always returns 'vjs-big-play-button'.\n   */\n\n\n  BigPlayButton.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-big-play-button';\n  };\n\n  /**\n   * This gets called when a `BigPlayButton` \"clicked\". See {@link ClickableComponent}\n   * for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  BigPlayButton.prototype.handleClick = function handleClick(event) {\n    var playPromise = this.player_.play();\n\n    // exit early if clicked via the mouse\n    if (this.mouseused_ && event.clientX && event.clientY) {\n      silencePromise(playPromise);\n      return;\n    }\n\n    var cb = this.player_.getChild('controlBar');\n    var playToggle = cb && cb.getChild('playToggle');\n\n    if (!playToggle) {\n      this.player_.focus();\n      return;\n    }\n\n    var playFocus = function playFocus() {\n      return playToggle.focus();\n    };\n\n    if (isPromise(playPromise)) {\n      playPromise.then(playFocus, function () {});\n    } else {\n      this.setTimeout(playFocus, 1);\n    }\n  };\n\n  BigPlayButton.prototype.handleKeyPress = function handleKeyPress(event) {\n    this.mouseused_ = false;\n\n    _Button.prototype.handleKeyPress.call(this, event);\n  };\n\n  BigPlayButton.prototype.handleMouseDown = function handleMouseDown(event) {\n    this.mouseused_ = true;\n  };\n\n  return BigPlayButton;\n}(Button);\n\n/**\n * The text that should display over the `BigPlayButton`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n */\n\n\nBigPlayButton.prototype.controlText_ = 'Play Video';\n\nComponent.registerComponent('BigPlayButton', BigPlayButton);\n\n/**\n * @file close-button.js\n */\n/**\n * The `CloseButton` is a `{@link Button}` that fires a `close` event when\n * it gets clicked.\n *\n * @extends Button\n */\n\nvar CloseButton = function (_Button) {\n  inherits(CloseButton, _Button);\n\n  /**\n   * Creates an instance of the this class.\n   *\n   * @param  {Player} player\n   *         The `Player` that this class should be attached to.\n   *\n   * @param  {Object} [options]\n   *         The key/value store of player options.\n   */\n  function CloseButton(player, options) {\n    classCallCheck(this, CloseButton);\n\n    var _this = possibleConstructorReturn(this, _Button.call(this, player, options));\n\n    _this.controlText(options && options.controlText || _this.localize('Close'));\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  CloseButton.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-close-button ' + _Button.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * This gets called when a `CloseButton` gets clicked. See\n   * {@link ClickableComponent#handleClick} for more information on when this will be\n   * triggered\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   * @fires CloseButton#close\n   */\n\n\n  CloseButton.prototype.handleClick = function handleClick(event) {\n\n    /**\n     * Triggered when the a `CloseButton` is clicked.\n     *\n     * @event CloseButton#close\n     * @type {EventTarget~Event}\n     *\n     * @property {boolean} [bubbles=false]\n     *           set to false so that the close event does not\n     *           bubble up to parents if there is no listener\n     */\n    this.trigger({ type: 'close', bubbles: false });\n  };\n\n  return CloseButton;\n}(Button);\n\nComponent.registerComponent('CloseButton', CloseButton);\n\n/**\n * @file play-toggle.js\n */\n/**\n * Button to toggle between play and pause.\n *\n * @extends Button\n */\n\nvar PlayToggle = function (_Button) {\n  inherits(PlayToggle, _Button);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function PlayToggle(player, options) {\n    classCallCheck(this, PlayToggle);\n\n    var _this = possibleConstructorReturn(this, _Button.call(this, player, options));\n\n    _this.on(player, 'play', _this.handlePlay);\n    _this.on(player, 'pause', _this.handlePause);\n    _this.on(player, 'ended', _this.handleEnded);\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  PlayToggle.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-play-control ' + _Button.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * This gets called when an `PlayToggle` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  PlayToggle.prototype.handleClick = function handleClick(event) {\n    if (this.player_.paused()) {\n      this.player_.play();\n    } else {\n      this.player_.pause();\n    }\n  };\n\n  /**\n   * This gets called once after the video has ended and the user seeks so that\n   * we can change the replay button back to a play button.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#seeked\n   */\n\n\n  PlayToggle.prototype.handleSeeked = function handleSeeked(event) {\n    this.removeClass('vjs-ended');\n\n    if (this.player_.paused()) {\n      this.handlePause(event);\n    } else {\n      this.handlePlay(event);\n    }\n  };\n\n  /**\n   * Add the vjs-playing class to the element so it can change appearance.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#play\n   */\n\n\n  PlayToggle.prototype.handlePlay = function handlePlay(event) {\n    this.removeClass('vjs-ended');\n    this.removeClass('vjs-paused');\n    this.addClass('vjs-playing');\n    // change the button text to \"Pause\"\n    this.controlText('Pause');\n  };\n\n  /**\n   * Add the vjs-paused class to the element so it can change appearance.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#pause\n   */\n\n\n  PlayToggle.prototype.handlePause = function handlePause(event) {\n    this.removeClass('vjs-playing');\n    this.addClass('vjs-paused');\n    // change the button text to \"Play\"\n    this.controlText('Play');\n  };\n\n  /**\n   * Add the vjs-ended class to the element so it can change appearance\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#ended\n   */\n\n\n  PlayToggle.prototype.handleEnded = function handleEnded(event) {\n    this.removeClass('vjs-playing');\n    this.addClass('vjs-ended');\n    // change the button text to \"Replay\"\n    this.controlText('Replay');\n\n    // on the next seek remove the replay button\n    this.one(this.player_, 'seeked', this.handleSeeked);\n  };\n\n  return PlayToggle;\n}(Button);\n\n/**\n * The text that should display over the `PlayToggle`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nPlayToggle.prototype.controlText_ = 'Play';\n\nComponent.registerComponent('PlayToggle', PlayToggle);\n\n/**\n * @file format-time.js\n * @module format-time\n */\n\n/**\n* Format seconds as a time string, H:MM:SS or M:SS. Supplying a guide (in seconds)\n* will force a number of leading zeros to cover the length of the guide.\n*\n* @param {number} seconds\n*        Number of seconds to be turned into a string\n*\n* @param {number} guide\n*        Number (in seconds) to model the string after\n*\n* @return {string}\n*         Time formatted as H:MM:SS or M:SS\n*/\nvar defaultImplementation = function defaultImplementation(seconds, guide) {\n  seconds = seconds < 0 ? 0 : seconds;\n  var s = Math.floor(seconds % 60);\n  var m = Math.floor(seconds / 60 % 60);\n  var h = Math.floor(seconds / 3600);\n  var gm = Math.floor(guide / 60 % 60);\n  var gh = Math.floor(guide / 3600);\n\n  // handle invalid times\n  if (isNaN(seconds) || seconds === Infinity) {\n    // '-' is false for all relational operators (e.g. <, >=) so this setting\n    // will add the minimum number of fields specified by the guide\n    h = m = s = '-';\n  }\n\n  // Check if we need to show hours\n  h = h > 0 || gh > 0 ? h + ':' : '';\n\n  // If hours are showing, we may need to add a leading zero.\n  // Always show at least one digit of minutes.\n  m = ((h || gm >= 10) && m < 10 ? '0' + m : m) + ':';\n\n  // Check if leading zero is need for seconds\n  s = s < 10 ? '0' + s : s;\n\n  return h + m + s;\n};\n\nvar implementation = defaultImplementation;\n\n/**\n * Replaces the default formatTime implementation with a custom implementation.\n *\n * @param {Function} customImplementation\n *        A function which will be used in place of the default formatTime implementation.\n *        Will receive the current time in seconds and the guide (in seconds) as arguments.\n */\nfunction setFormatTime(customImplementation) {\n  implementation = customImplementation;\n}\n\n/**\n * Resets formatTime to the default implementation.\n */\nfunction resetFormatTime() {\n  implementation = defaultImplementation;\n}\n\nvar formatTime = function (seconds) {\n  var guide = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : seconds;\n\n  return implementation(seconds, guide);\n};\n\n/**\n * @file time-display.js\n */\n/**\n * Displays the time left in the video\n *\n * @extends Component\n */\n\nvar TimeDisplay = function (_Component) {\n  inherits(TimeDisplay, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function TimeDisplay(player, options) {\n    classCallCheck(this, TimeDisplay);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.throttledUpdateContent = throttle(bind(_this, _this.updateContent), 25);\n    _this.on(player, 'timeupdate', _this.throttledUpdateContent);\n    return _this;\n  }\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  TimeDisplay.prototype.createEl = function createEl$$1(plainName) {\n    var className = this.buildCSSClass();\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      className: className + ' vjs-time-control vjs-control',\n      innerHTML: '<span class=\"vjs-control-text\">' + this.localize(this.labelText_) + '\\xA0</span>'\n    });\n\n    this.contentEl_ = createEl('span', {\n      className: className + '-display'\n    }, {\n      // tell screen readers not to automatically read the time as it changes\n      'aria-live': 'off'\n    });\n\n    this.updateTextNode_();\n    el.appendChild(this.contentEl_);\n    return el;\n  };\n\n  TimeDisplay.prototype.dispose = function dispose() {\n    this.contentEl_ = null;\n    this.textNode_ = null;\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  /**\n   * Updates the \"remaining time\" text node with new content using the\n   * contents of the `formattedTime_` property.\n   *\n   * @private\n   */\n\n\n  TimeDisplay.prototype.updateTextNode_ = function updateTextNode_() {\n    if (!this.contentEl_) {\n      return;\n    }\n\n    while (this.contentEl_.firstChild) {\n      this.contentEl_.removeChild(this.contentEl_.firstChild);\n    }\n\n    this.textNode_ = document.createTextNode(this.formattedTime_ || this.formatTime_(0));\n    this.contentEl_.appendChild(this.textNode_);\n  };\n\n  /**\n   * Generates a formatted time for this component to use in display.\n   *\n   * @param  {number} time\n   *         A numeric time, in seconds.\n   *\n   * @return {string}\n   *         A formatted time\n   *\n   * @private\n   */\n\n\n  TimeDisplay.prototype.formatTime_ = function formatTime_(time) {\n    return formatTime(time);\n  };\n\n  /**\n   * Updates the time display text node if it has what was passed in changed\n   * the formatted time.\n   *\n   * @param {number} time\n   *        The time to update to\n   *\n   * @private\n   */\n\n\n  TimeDisplay.prototype.updateFormattedTime_ = function updateFormattedTime_(time) {\n    var formattedTime = this.formatTime_(time);\n\n    if (formattedTime === this.formattedTime_) {\n      return;\n    }\n\n    this.formattedTime_ = formattedTime;\n    this.requestAnimationFrame(this.updateTextNode_);\n  };\n\n  /**\n   * To be filled out in the child class, should update the displayed time\n   * in accordance with the fact that the current time has changed.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `timeupdate`  event that caused this to run.\n   *\n   * @listens Player#timeupdate\n   */\n\n\n  TimeDisplay.prototype.updateContent = function updateContent(event) {};\n\n  return TimeDisplay;\n}(Component);\n\n/**\n * The text that is added to the `TimeDisplay` for screen reader users.\n *\n * @type {string}\n * @private\n */\n\n\nTimeDisplay.prototype.labelText_ = 'Time';\n\n/**\n * The text that should display over the `TimeDisplay`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n *\n * @deprecated in v7; controlText_ is not used in non-active display Components\n */\nTimeDisplay.prototype.controlText_ = 'Time';\n\nComponent.registerComponent('TimeDisplay', TimeDisplay);\n\n/**\n * @file current-time-display.js\n */\n/**\n * Displays the current time\n *\n * @extends Component\n */\n\nvar CurrentTimeDisplay = function (_TimeDisplay) {\n  inherits(CurrentTimeDisplay, _TimeDisplay);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function CurrentTimeDisplay(player, options) {\n    classCallCheck(this, CurrentTimeDisplay);\n\n    var _this = possibleConstructorReturn(this, _TimeDisplay.call(this, player, options));\n\n    _this.on(player, 'ended', _this.handleEnded);\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  CurrentTimeDisplay.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-current-time';\n  };\n\n  /**\n   * Update current time display\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `timeupdate` event that caused this function to run.\n   *\n   * @listens Player#timeupdate\n   */\n\n\n  CurrentTimeDisplay.prototype.updateContent = function updateContent(event) {\n    // Allows for smooth scrubbing, when player can't keep up.\n    var time = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();\n\n    this.updateFormattedTime_(time);\n  };\n\n  /**\n   * When the player fires ended there should be no time left. Sadly\n   * this is not always the case, lets make it seem like that is the case\n   * for users.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `ended` event that caused this to run.\n   *\n   * @listens Player#ended\n   */\n\n\n  CurrentTimeDisplay.prototype.handleEnded = function handleEnded(event) {\n    if (!this.player_.duration()) {\n      return;\n    }\n    this.updateFormattedTime_(this.player_.duration());\n  };\n\n  return CurrentTimeDisplay;\n}(TimeDisplay);\n\n/**\n * The text that is added to the `CurrentTimeDisplay` for screen reader users.\n *\n * @type {string}\n * @private\n */\n\n\nCurrentTimeDisplay.prototype.labelText_ = 'Current Time';\n\n/**\n * The text that should display over the `CurrentTimeDisplay`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n *\n * @deprecated in v7; controlText_ is not used in non-active display Components\n */\nCurrentTimeDisplay.prototype.controlText_ = 'Current Time';\n\nComponent.registerComponent('CurrentTimeDisplay', CurrentTimeDisplay);\n\n/**\n * @file duration-display.js\n */\n/**\n * Displays the duration\n *\n * @extends Component\n */\n\nvar DurationDisplay = function (_TimeDisplay) {\n  inherits(DurationDisplay, _TimeDisplay);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function DurationDisplay(player, options) {\n    classCallCheck(this, DurationDisplay);\n\n    // we do not want to/need to throttle duration changes,\n    // as they should always display the changed duration as\n    // it has changed\n    var _this = possibleConstructorReturn(this, _TimeDisplay.call(this, player, options));\n\n    _this.on(player, 'durationchange', _this.updateContent);\n\n    // Also listen for timeupdate (in the parent) and loadedmetadata because removing those\n    // listeners could have broken dependent applications/libraries. These\n    // can likely be removed for 7.0.\n    _this.on(player, 'loadedmetadata', _this.throttledUpdateContent);\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  DurationDisplay.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-duration';\n  };\n\n  /**\n   * Update duration time display.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `durationchange`, `timeupdate`, or `loadedmetadata` event that caused\n   *        this function to be called.\n   *\n   * @listens Player#durationchange\n   * @listens Player#timeupdate\n   * @listens Player#loadedmetadata\n   */\n\n\n  DurationDisplay.prototype.updateContent = function updateContent(event) {\n    var duration = this.player_.duration();\n\n    if (duration && this.duration_ !== duration) {\n      this.duration_ = duration;\n      this.updateFormattedTime_(duration);\n    }\n  };\n\n  return DurationDisplay;\n}(TimeDisplay);\n\n/**\n * The text that is added to the `DurationDisplay` for screen reader users.\n *\n * @type {string}\n * @private\n */\n\n\nDurationDisplay.prototype.labelText_ = 'Duration';\n\n/**\n * The text that should display over the `DurationDisplay`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n *\n * @deprecated in v7; controlText_ is not used in non-active display Components\n */\nDurationDisplay.prototype.controlText_ = 'Duration';\n\nComponent.registerComponent('DurationDisplay', DurationDisplay);\n\n/**\n * @file time-divider.js\n */\n/**\n * The separator between the current time and duration.\n * Can be hidden if it's not needed in the design.\n *\n * @extends Component\n */\n\nvar TimeDivider = function (_Component) {\n  inherits(TimeDivider, _Component);\n\n  function TimeDivider() {\n    classCallCheck(this, TimeDivider);\n    return possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  /**\n   * Create the component's DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  TimeDivider.prototype.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-time-control vjs-time-divider',\n      innerHTML: '<div><span>/</span></div>'\n    });\n  };\n\n  return TimeDivider;\n}(Component);\n\nComponent.registerComponent('TimeDivider', TimeDivider);\n\n/**\n * @file remaining-time-display.js\n */\n/**\n * Displays the time left in the video\n *\n * @extends Component\n */\n\nvar RemainingTimeDisplay = function (_TimeDisplay) {\n  inherits(RemainingTimeDisplay, _TimeDisplay);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function RemainingTimeDisplay(player, options) {\n    classCallCheck(this, RemainingTimeDisplay);\n\n    var _this = possibleConstructorReturn(this, _TimeDisplay.call(this, player, options));\n\n    _this.on(player, 'durationchange', _this.throttledUpdateContent);\n    _this.on(player, 'ended', _this.handleEnded);\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  RemainingTimeDisplay.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-remaining-time';\n  };\n\n  /**\n   * The remaining time display prefixes numbers with a \"minus\" character.\n   *\n   * @param  {number} time\n   *         A numeric time, in seconds.\n   *\n   * @return {string}\n   *         A formatted time\n   *\n   * @private\n   */\n\n\n  RemainingTimeDisplay.prototype.formatTime_ = function formatTime_(time) {\n    // TODO: The \"-\" should be decorative, and not announced by a screen reader\n    return '-' + _TimeDisplay.prototype.formatTime_.call(this, time);\n  };\n\n  /**\n   * Update remaining time display.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `timeupdate` or `durationchange` event that caused this to run.\n   *\n   * @listens Player#timeupdate\n   * @listens Player#durationchange\n   */\n\n\n  RemainingTimeDisplay.prototype.updateContent = function updateContent(event) {\n    if (!this.player_.duration()) {\n      return;\n    }\n\n    // @deprecated We should only use remainingTimeDisplay\n    // as of video.js 7\n    if (this.player_.remainingTimeDisplay) {\n      this.updateFormattedTime_(this.player_.remainingTimeDisplay());\n    } else {\n      this.updateFormattedTime_(this.player_.remainingTime());\n    }\n  };\n\n  /**\n   * When the player fires ended there should be no time left. Sadly\n   * this is not always the case, lets make it seem like that is the case\n   * for users.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `ended` event that caused this to run.\n   *\n   * @listens Player#ended\n   */\n\n\n  RemainingTimeDisplay.prototype.handleEnded = function handleEnded(event) {\n    if (!this.player_.duration()) {\n      return;\n    }\n    this.updateFormattedTime_(0);\n  };\n\n  return RemainingTimeDisplay;\n}(TimeDisplay);\n\n/**\n * The text that is added to the `RemainingTimeDisplay` for screen reader users.\n *\n * @type {string}\n * @private\n */\n\n\nRemainingTimeDisplay.prototype.labelText_ = 'Remaining Time';\n\n/**\n * The text that should display over the `RemainingTimeDisplay`s controls. Added to for localization.\n *\n * @type {string}\n * @private\n *\n * @deprecated in v7; controlText_ is not used in non-active display Components\n */\nRemainingTimeDisplay.prototype.controlText_ = 'Remaining Time';\n\nComponent.registerComponent('RemainingTimeDisplay', RemainingTimeDisplay);\n\n/**\n * @file live-display.js\n */\n// TODO - Future make it click to snap to live\n\n/**\n * Displays the live indicator when duration is Infinity.\n *\n * @extends Component\n */\n\nvar LiveDisplay = function (_Component) {\n  inherits(LiveDisplay, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function LiveDisplay(player, options) {\n    classCallCheck(this, LiveDisplay);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.updateShowing();\n    _this.on(_this.player(), 'durationchange', _this.updateShowing);\n    return _this;\n  }\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  LiveDisplay.prototype.createEl = function createEl$$1() {\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-live-control vjs-control'\n    });\n\n    this.contentEl_ = createEl('div', {\n      className: 'vjs-live-display',\n      innerHTML: '<span class=\"vjs-control-text\">' + this.localize('Stream Type') + '\\xA0</span>' + this.localize('LIVE')\n    }, {\n      'aria-live': 'off'\n    });\n\n    el.appendChild(this.contentEl_);\n    return el;\n  };\n\n  LiveDisplay.prototype.dispose = function dispose() {\n    this.contentEl_ = null;\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  /**\n   * Check the duration to see if the LiveDisplay should be showing or not. Then show/hide\n   * it accordingly\n   *\n   * @param {EventTarget~Event} [event]\n   *        The {@link Player#durationchange} event that caused this function to run.\n   *\n   * @listens Player#durationchange\n   */\n\n\n  LiveDisplay.prototype.updateShowing = function updateShowing(event) {\n    if (this.player().duration() === Infinity) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  };\n\n  return LiveDisplay;\n}(Component);\n\nComponent.registerComponent('LiveDisplay', LiveDisplay);\n\n/**\n * @file slider.js\n */\n/**\n * The base functionality for a slider. Can be vertical or horizontal.\n * For instance the volume bar or the seek bar on a video is a slider.\n *\n * @extends Component\n */\n\nvar Slider = function (_Component) {\n  inherits(Slider, _Component);\n\n  /**\n   * Create an instance of this class\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function Slider(player, options) {\n    classCallCheck(this, Slider);\n\n    // Set property names to bar to match with the child Slider class is looking for\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.bar = _this.getChild(_this.options_.barName);\n\n    // Set a horizontal or vertical class on the slider depending on the slider type\n    _this.vertical(!!_this.options_.vertical);\n\n    _this.enable();\n    return _this;\n  }\n\n  /**\n   * Are controls are currently enabled for this slider or not.\n   *\n   * @return {boolean}\n   *         true if controls are enabled, false otherwise\n   */\n\n\n  Slider.prototype.enabled = function enabled() {\n    return this.enabled_;\n  };\n\n  /**\n   * Enable controls for this slider if they are disabled\n   */\n\n\n  Slider.prototype.enable = function enable() {\n    if (this.enabled()) {\n      return;\n    }\n\n    this.on('mousedown', this.handleMouseDown);\n    this.on('touchstart', this.handleMouseDown);\n    this.on('focus', this.handleFocus);\n    this.on('blur', this.handleBlur);\n    this.on('click', this.handleClick);\n\n    this.on(this.player_, 'controlsvisible', this.update);\n\n    if (this.playerEvent) {\n      this.on(this.player_, this.playerEvent, this.update);\n    }\n\n    this.removeClass('disabled');\n    this.setAttribute('tabindex', 0);\n\n    this.enabled_ = true;\n  };\n\n  /**\n   * Disable controls for this slider if they are enabled\n   */\n\n\n  Slider.prototype.disable = function disable() {\n    if (!this.enabled()) {\n      return;\n    }\n    var doc = this.bar.el_.ownerDocument;\n\n    this.off('mousedown', this.handleMouseDown);\n    this.off('touchstart', this.handleMouseDown);\n    this.off('focus', this.handleFocus);\n    this.off('blur', this.handleBlur);\n    this.off('click', this.handleClick);\n    this.off(this.player_, 'controlsvisible', this.update);\n    this.off(doc, 'mousemove', this.handleMouseMove);\n    this.off(doc, 'mouseup', this.handleMouseUp);\n    this.off(doc, 'touchmove', this.handleMouseMove);\n    this.off(doc, 'touchend', this.handleMouseUp);\n    this.removeAttribute('tabindex');\n\n    this.addClass('disabled');\n\n    if (this.playerEvent) {\n      this.off(this.player_, this.playerEvent, this.update);\n    }\n    this.enabled_ = false;\n  };\n\n  /**\n   * Create the `Button`s DOM element.\n   *\n   * @param {string} type\n   *        Type of element to create.\n   *\n   * @param {Object} [props={}]\n   *        List of properties in Object form.\n   *\n   * @param {Object} [attributes={}]\n   *        list of attributes in Object form.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  Slider.prototype.createEl = function createEl$$1(type) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var attributes = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    // Add the slider element class to all sub classes\n    props.className = props.className + ' vjs-slider';\n    props = assign({\n      tabIndex: 0\n    }, props);\n\n    attributes = assign({\n      'role': 'slider',\n      'aria-valuenow': 0,\n      'aria-valuemin': 0,\n      'aria-valuemax': 100,\n      'tabIndex': 0\n    }, attributes);\n\n    return _Component.prototype.createEl.call(this, type, props, attributes);\n  };\n\n  /**\n   * Handle `mousedown` or `touchstart` events on the `Slider`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousedown\n   * @listens touchstart\n   * @fires Slider#slideractive\n   */\n\n\n  Slider.prototype.handleMouseDown = function handleMouseDown(event) {\n    var doc = this.bar.el_.ownerDocument;\n\n    if (event.type === 'mousedown') {\n      event.preventDefault();\n    }\n    // Do not call preventDefault() on touchstart in Chrome\n    // to avoid console warnings. Use a 'touch-action: none' style\n    // instead to prevent unintented scrolling.\n    // https://developers.google.com/web/updates/2017/01/scrolling-intervention\n    if (event.type === 'touchstart' && !IS_CHROME) {\n      event.preventDefault();\n    }\n    blockTextSelection();\n\n    this.addClass('vjs-sliding');\n    /**\n     * Triggered when the slider is in an active state\n     *\n     * @event Slider#slideractive\n     * @type {EventTarget~Event}\n     */\n    this.trigger('slideractive');\n\n    this.on(doc, 'mousemove', this.handleMouseMove);\n    this.on(doc, 'mouseup', this.handleMouseUp);\n    this.on(doc, 'touchmove', this.handleMouseMove);\n    this.on(doc, 'touchend', this.handleMouseUp);\n\n    this.handleMouseMove(event);\n  };\n\n  /**\n   * Handle the `mousemove`, `touchmove`, and `mousedown` events on this `Slider`.\n   * The `mousemove` and `touchmove` events will only only trigger this function during\n   * `mousedown` and `touchstart`. This is due to {@link Slider#handleMouseDown} and\n   * {@link Slider#handleMouseUp}.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown`, `mousemove`, `touchstart`, or `touchmove` event that triggered\n   *        this function\n   *\n   * @listens mousemove\n   * @listens touchmove\n   */\n\n\n  Slider.prototype.handleMouseMove = function handleMouseMove(event) {};\n\n  /**\n   * Handle `mouseup` or `touchend` events on the `Slider`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mouseup` or `touchend` event that triggered this function.\n   *\n   * @listens touchend\n   * @listens mouseup\n   * @fires Slider#sliderinactive\n   */\n\n\n  Slider.prototype.handleMouseUp = function handleMouseUp() {\n    var doc = this.bar.el_.ownerDocument;\n\n    unblockTextSelection();\n\n    this.removeClass('vjs-sliding');\n    /**\n     * Triggered when the slider is no longer in an active state.\n     *\n     * @event Slider#sliderinactive\n     * @type {EventTarget~Event}\n     */\n    this.trigger('sliderinactive');\n\n    this.off(doc, 'mousemove', this.handleMouseMove);\n    this.off(doc, 'mouseup', this.handleMouseUp);\n    this.off(doc, 'touchmove', this.handleMouseMove);\n    this.off(doc, 'touchend', this.handleMouseUp);\n\n    this.update();\n  };\n\n  /**\n   * Update the progress bar of the `Slider`.\n   *\n   * @returns {number}\n   *          The percentage of progress the progress bar represents as a\n   *          number from 0 to 1.\n   */\n\n\n  Slider.prototype.update = function update() {\n\n    // In VolumeBar init we have a setTimeout for update that pops and update\n    // to the end of the execution stack. The player is destroyed before then\n    // update will cause an error\n    if (!this.el_) {\n      return;\n    }\n\n    // If scrubbing, we could use a cached value to make the handle keep up\n    // with the user's mouse. On HTML5 browsers scrubbing is really smooth, but\n    // some flash players are slow, so we might want to utilize this later.\n    // var progress =  (this.player_.scrubbing()) ? this.player_.getCache().currentTime / this.player_.duration() : this.player_.currentTime() / this.player_.duration();\n    var progress = this.getPercent();\n    var bar = this.bar;\n\n    // If there's no bar...\n    if (!bar) {\n      return;\n    }\n\n    // Protect against no duration and other division issues\n    if (typeof progress !== 'number' || progress !== progress || progress < 0 || progress === Infinity) {\n      progress = 0;\n    }\n\n    // Convert to a percentage for setting\n    var percentage = (progress * 100).toFixed(2) + '%';\n    var style = bar.el().style;\n\n    // Set the new bar width or height\n    if (this.vertical()) {\n      style.height = percentage;\n    } else {\n      style.width = percentage;\n    }\n\n    return progress;\n  };\n\n  /**\n   * Calculate distance for slider\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to run.\n   *\n   * @return {number}\n   *         The current position of the Slider.\n   *         - postition.x for vertical `Slider`s\n   *         - postition.y for horizontal `Slider`s\n   */\n\n\n  Slider.prototype.calculateDistance = function calculateDistance(event) {\n    var position = getPointerPosition(this.el_, event);\n\n    if (this.vertical()) {\n      return position.y;\n    }\n    return position.x;\n  };\n\n  /**\n   * Handle a `focus` event on this `Slider`.\n   *\n   * @param {EventTarget~Event} event\n   *        The `focus` event that caused this function to run.\n   *\n   * @listens focus\n   */\n\n\n  Slider.prototype.handleFocus = function handleFocus() {\n    this.on(this.bar.el_.ownerDocument, 'keydown', this.handleKeyPress);\n  };\n\n  /**\n   * Handle a `keydown` event on the `Slider`. Watches for left, rigth, up, and down\n   * arrow keys. This function will only be called when the slider has focus. See\n   * {@link Slider#handleFocus} and {@link Slider#handleBlur}.\n   *\n   * @param {EventTarget~Event} event\n   *        the `keydown` event that caused this function to run.\n   *\n   * @listens keydown\n   */\n\n\n  Slider.prototype.handleKeyPress = function handleKeyPress(event) {\n    // Left and Down Arrows\n    if (event.which === 37 || event.which === 40) {\n      event.preventDefault();\n      this.stepBack();\n\n      // Up and Right Arrows\n    } else if (event.which === 38 || event.which === 39) {\n      event.preventDefault();\n      this.stepForward();\n    }\n  };\n\n  /**\n   * Handle a `blur` event on this `Slider`.\n   *\n   * @param {EventTarget~Event} event\n   *        The `blur` event that caused this function to run.\n   *\n   * @listens blur\n   */\n\n  Slider.prototype.handleBlur = function handleBlur() {\n    this.off(this.bar.el_.ownerDocument, 'keydown', this.handleKeyPress);\n  };\n\n  /**\n   * Listener for click events on slider, used to prevent clicks\n   *   from bubbling up to parent elements like button menus.\n   *\n   * @param {Object} event\n   *        Event that caused this object to run\n   */\n\n\n  Slider.prototype.handleClick = function handleClick(event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n  };\n\n  /**\n   * Get/set if slider is horizontal for vertical\n   *\n   * @param {boolean} [bool]\n   *        - true if slider is vertical,\n   *        - false is horizontal\n   *\n   * @return {boolean}\n   *         - true if slider is vertical, and getting\n   *         - false if the slider is horizontal, and getting\n   */\n\n\n  Slider.prototype.vertical = function vertical(bool) {\n    if (bool === undefined) {\n      return this.vertical_ || false;\n    }\n\n    this.vertical_ = !!bool;\n\n    if (this.vertical_) {\n      this.addClass('vjs-slider-vertical');\n    } else {\n      this.addClass('vjs-slider-horizontal');\n    }\n  };\n\n  return Slider;\n}(Component);\n\nComponent.registerComponent('Slider', Slider);\n\n/**\n * @file load-progress-bar.js\n */\n/**\n * Shows loading progress\n *\n * @extends Component\n */\n\nvar LoadProgressBar = function (_Component) {\n  inherits(LoadProgressBar, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function LoadProgressBar(player, options) {\n    classCallCheck(this, LoadProgressBar);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.partEls_ = [];\n    _this.on(player, 'progress', _this.update);\n    return _this;\n  }\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  LoadProgressBar.prototype.createEl = function createEl$$1() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-load-progress',\n      innerHTML: '<span class=\"vjs-control-text\"><span>' + this.localize('Loaded') + '</span>: 0%</span>'\n    });\n  };\n\n  LoadProgressBar.prototype.dispose = function dispose() {\n    this.partEls_ = null;\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  /**\n   * Update progress bar\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `progress` event that caused this function to run.\n   *\n   * @listens Player#progress\n   */\n\n\n  LoadProgressBar.prototype.update = function update(event) {\n    var buffered = this.player_.buffered();\n    var duration = this.player_.duration();\n    var bufferedEnd = this.player_.bufferedEnd();\n    var children = this.partEls_;\n\n    // get the percent width of a time compared to the total end\n    var percentify = function percentify(time, end) {\n      // no NaN\n      var percent = time / end || 0;\n\n      return (percent >= 1 ? 1 : percent) * 100 + '%';\n    };\n\n    // update the width of the progress bar\n    this.el_.style.width = percentify(bufferedEnd, duration);\n\n    // add child elements to represent the individual buffered time ranges\n    for (var i = 0; i < buffered.length; i++) {\n      var start = buffered.start(i);\n      var end = buffered.end(i);\n      var part = children[i];\n\n      if (!part) {\n        part = this.el_.appendChild(createEl());\n        children[i] = part;\n      }\n\n      // set the percent based on the width of the progress bar (bufferedEnd)\n      part.style.left = percentify(start, bufferedEnd);\n      part.style.width = percentify(end - start, bufferedEnd);\n    }\n\n    // remove unused buffered range elements\n    for (var _i = children.length; _i > buffered.length; _i--) {\n      this.el_.removeChild(children[_i - 1]);\n    }\n    children.length = buffered.length;\n  };\n\n  return LoadProgressBar;\n}(Component);\n\nComponent.registerComponent('LoadProgressBar', LoadProgressBar);\n\n/**\n * @file time-tooltip.js\n */\n/**\n * Time tooltips display a time above the progress bar.\n *\n * @extends Component\n */\n\nvar TimeTooltip = function (_Component) {\n  inherits(TimeTooltip, _Component);\n\n  function TimeTooltip() {\n    classCallCheck(this, TimeTooltip);\n    return possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  /**\n   * Create the time tooltip DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  TimeTooltip.prototype.createEl = function createEl$$1() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-time-tooltip'\n    });\n  };\n\n  /**\n   * Updates the position of the time tooltip relative to the `SeekBar`.\n   *\n   * @param {Object} seekBarRect\n   *        The `ClientRect` for the {@link SeekBar} element.\n   *\n   * @param {number} seekBarPoint\n   *        A number from 0 to 1, representing a horizontal reference point\n   *        from the left edge of the {@link SeekBar}\n   */\n\n\n  TimeTooltip.prototype.update = function update(seekBarRect, seekBarPoint, content) {\n    var tooltipRect = getBoundingClientRect(this.el_);\n    var playerRect = getBoundingClientRect(this.player_.el());\n    var seekBarPointPx = seekBarRect.width * seekBarPoint;\n\n    // do nothing if either rect isn't available\n    // for example, if the player isn't in the DOM for testing\n    if (!playerRect || !tooltipRect) {\n      return;\n    }\n\n    // This is the space left of the `seekBarPoint` available within the bounds\n    // of the player. We calculate any gap between the left edge of the player\n    // and the left edge of the `SeekBar` and add the number of pixels in the\n    // `SeekBar` before hitting the `seekBarPoint`\n    var spaceLeftOfPoint = seekBarRect.left - playerRect.left + seekBarPointPx;\n\n    // This is the space right of the `seekBarPoint` available within the bounds\n    // of the player. We calculate the number of pixels from the `seekBarPoint`\n    // to the right edge of the `SeekBar` and add to that any gap between the\n    // right edge of the `SeekBar` and the player.\n    var spaceRightOfPoint = seekBarRect.width - seekBarPointPx + (playerRect.right - seekBarRect.right);\n\n    // This is the number of pixels by which the tooltip will need to be pulled\n    // further to the right to center it over the `seekBarPoint`.\n    var pullTooltipBy = tooltipRect.width / 2;\n\n    // Adjust the `pullTooltipBy` distance to the left or right depending on\n    // the results of the space calculations above.\n    if (spaceLeftOfPoint < pullTooltipBy) {\n      pullTooltipBy += pullTooltipBy - spaceLeftOfPoint;\n    } else if (spaceRightOfPoint < pullTooltipBy) {\n      pullTooltipBy = spaceRightOfPoint;\n    }\n\n    // Due to the imprecision of decimal/ratio based calculations and varying\n    // rounding behaviors, there are cases where the spacing adjustment is off\n    // by a pixel or two. This adds insurance to these calculations.\n    if (pullTooltipBy < 0) {\n      pullTooltipBy = 0;\n    } else if (pullTooltipBy > tooltipRect.width) {\n      pullTooltipBy = tooltipRect.width;\n    }\n\n    this.el_.style.right = '-' + pullTooltipBy + 'px';\n    textContent(this.el_, content);\n  };\n\n  return TimeTooltip;\n}(Component);\n\nComponent.registerComponent('TimeTooltip', TimeTooltip);\n\n/**\n * @file play-progress-bar.js\n */\n/**\n * Used by {@link SeekBar} to display media playback progress as part of the\n * {@link ProgressControl}.\n *\n * @extends Component\n */\n\nvar PlayProgressBar = function (_Component) {\n  inherits(PlayProgressBar, _Component);\n\n  function PlayProgressBar() {\n    classCallCheck(this, PlayProgressBar);\n    return possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  /**\n   * Create the the DOM element for this class.\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  PlayProgressBar.prototype.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-play-progress vjs-slider-bar',\n      innerHTML: '<span class=\"vjs-control-text\"><span>' + this.localize('Progress') + '</span>: 0%</span>'\n    });\n  };\n\n  /**\n   * Enqueues updates to its own DOM as well as the DOM of its\n   * {@link TimeTooltip} child.\n   *\n   * @param {Object} seekBarRect\n   *        The `ClientRect` for the {@link SeekBar} element.\n   *\n   * @param {number} seekBarPoint\n   *        A number from 0 to 1, representing a horizontal reference point\n   *        from the left edge of the {@link SeekBar}\n   */\n\n\n  PlayProgressBar.prototype.update = function update(seekBarRect, seekBarPoint) {\n    var _this2 = this;\n\n    // If there is an existing rAF ID, cancel it so we don't over-queue.\n    if (this.rafId_) {\n      this.cancelAnimationFrame(this.rafId_);\n    }\n\n    this.rafId_ = this.requestAnimationFrame(function () {\n      var time = _this2.player_.scrubbing() ? _this2.player_.getCache().currentTime : _this2.player_.currentTime();\n\n      var content = formatTime(time, _this2.player_.duration());\n      var timeTooltip = _this2.getChild('timeTooltip');\n\n      if (timeTooltip) {\n        timeTooltip.update(seekBarRect, seekBarPoint, content);\n      }\n    });\n  };\n\n  return PlayProgressBar;\n}(Component);\n\n/**\n * Default options for {@link PlayProgressBar}.\n *\n * @type {Object}\n * @private\n */\n\n\nPlayProgressBar.prototype.options_ = {\n  children: []\n};\n\n// Time tooltips should not be added to a player on mobile devices or IE8\nif ((!IE_VERSION || IE_VERSION > 8) && !IS_IOS && !IS_ANDROID) {\n  PlayProgressBar.prototype.options_.children.push('timeTooltip');\n}\n\nComponent.registerComponent('PlayProgressBar', PlayProgressBar);\n\n/**\n * @file mouse-time-display.js\n */\n/**\n * The {@link MouseTimeDisplay} component tracks mouse movement over the\n * {@link ProgressControl}. It displays an indicator and a {@link TimeTooltip}\n * indicating the time which is represented by a given point in the\n * {@link ProgressControl}.\n *\n * @extends Component\n */\n\nvar MouseTimeDisplay = function (_Component) {\n  inherits(MouseTimeDisplay, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The {@link Player} that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function MouseTimeDisplay(player, options) {\n    classCallCheck(this, MouseTimeDisplay);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.update = throttle(bind(_this, _this.update), 25);\n    return _this;\n  }\n\n  /**\n   * Create the DOM element for this class.\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  MouseTimeDisplay.prototype.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-mouse-display'\n    });\n  };\n\n  /**\n   * Enqueues updates to its own DOM as well as the DOM of its\n   * {@link TimeTooltip} child.\n   *\n   * @param {Object} seekBarRect\n   *        The `ClientRect` for the {@link SeekBar} element.\n   *\n   * @param {number} seekBarPoint\n   *        A number from 0 to 1, representing a horizontal reference point\n   *        from the left edge of the {@link SeekBar}\n   */\n\n\n  MouseTimeDisplay.prototype.update = function update(seekBarRect, seekBarPoint) {\n    var _this2 = this;\n\n    // If there is an existing rAF ID, cancel it so we don't over-queue.\n    if (this.rafId_) {\n      this.cancelAnimationFrame(this.rafId_);\n    }\n\n    this.rafId_ = this.requestAnimationFrame(function () {\n      var duration = _this2.player_.duration();\n      var content = formatTime(seekBarPoint * duration, duration);\n\n      _this2.el_.style.left = seekBarRect.width * seekBarPoint + 'px';\n      _this2.getChild('timeTooltip').update(seekBarRect, seekBarPoint, content);\n    });\n  };\n\n  return MouseTimeDisplay;\n}(Component);\n\n/**\n * Default options for `MouseTimeDisplay`\n *\n * @type {Object}\n * @private\n */\n\n\nMouseTimeDisplay.prototype.options_ = {\n  children: ['timeTooltip']\n};\n\nComponent.registerComponent('MouseTimeDisplay', MouseTimeDisplay);\n\n/**\n * @file seek-bar.js\n */\n// The number of seconds the `step*` functions move the timeline.\nvar STEP_SECONDS = 5;\n\n// The interval at which the bar should update as it progresses.\nvar UPDATE_REFRESH_INTERVAL = 30;\n\n/**\n * Seek bar and container for the progress bars. Uses {@link PlayProgressBar}\n * as its `bar`.\n *\n * @extends Slider\n */\n\nvar SeekBar = function (_Slider) {\n  inherits(SeekBar, _Slider);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function SeekBar(player, options) {\n    classCallCheck(this, SeekBar);\n\n    var _this = possibleConstructorReturn(this, _Slider.call(this, player, options));\n\n    _this.setEventHandlers_();\n    return _this;\n  }\n\n  /**\n   * Sets the event handlers\n   *\n   * @private\n   */\n\n\n  SeekBar.prototype.setEventHandlers_ = function setEventHandlers_() {\n    var _this2 = this;\n\n    this.update = throttle(bind(this, this.update), UPDATE_REFRESH_INTERVAL);\n\n    this.on(this.player_, 'timeupdate', this.update);\n    this.on(this.player_, 'ended', this.handleEnded);\n\n    // when playing, let's ensure we smoothly update the play progress bar\n    // via an interval\n    this.updateInterval = null;\n\n    this.on(this.player_, ['playing'], function () {\n      _this2.clearInterval(_this2.updateInterval);\n\n      _this2.updateInterval = _this2.setInterval(function () {\n        _this2.requestAnimationFrame(function () {\n          _this2.update();\n        });\n      }, UPDATE_REFRESH_INTERVAL);\n    });\n\n    this.on(this.player_, ['ended', 'pause', 'waiting'], function () {\n      _this2.clearInterval(_this2.updateInterval);\n    });\n\n    this.on(this.player_, ['timeupdate', 'ended'], this.update);\n  };\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  SeekBar.prototype.createEl = function createEl$$1() {\n    return _Slider.prototype.createEl.call(this, 'div', {\n      className: 'vjs-progress-holder'\n    }, {\n      'aria-label': this.localize('Progress Bar')\n    });\n  };\n\n  /**\n   * This function updates the play progress bar and accessiblity\n   * attributes to whatever is passed in.\n   *\n   * @param {number} currentTime\n   *        The currentTime value that should be used for accessiblity\n   *\n   * @param {number} percent\n   *        The percentage as a decimal that the bar should be filled from 0-1.\n   *\n   * @private\n   */\n\n\n  SeekBar.prototype.update_ = function update_(currentTime, percent) {\n    var duration = this.player_.duration();\n\n    // machine readable value of progress bar (percentage complete)\n    this.el_.setAttribute('aria-valuenow', (percent * 100).toFixed(2));\n\n    // human readable value of progress bar (time complete)\n    this.el_.setAttribute('aria-valuetext', this.localize('progress bar timing: currentTime={1} duration={2}', [formatTime(currentTime, duration), formatTime(duration, duration)], '{1} of {2}'));\n\n    // Update the `PlayProgressBar`.\n    this.bar.update(getBoundingClientRect(this.el_), percent);\n  };\n\n  /**\n   * Update the seek bar's UI.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `timeupdate` or `ended` event that caused this to run.\n   *\n   * @listens Player#timeupdate\n   *\n   * @returns {number}\n   *          The current percent at a number from 0-1\n   */\n\n\n  SeekBar.prototype.update = function update(event) {\n    var percent = _Slider.prototype.update.call(this);\n\n    this.update_(this.getCurrentTime_(), percent);\n    return percent;\n  };\n\n  /**\n   * Get the value of current time but allows for smooth scrubbing,\n   * when player can't keep up.\n   *\n   * @return {number}\n   *         The current time value to display\n   *\n   * @private\n   */\n\n\n  SeekBar.prototype.getCurrentTime_ = function getCurrentTime_() {\n    return this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();\n  };\n\n  /**\n   * We want the seek bar to be full on ended\n   * no matter what the actual internal values are. so we force it.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `timeupdate` or `ended` event that caused this to run.\n   *\n   * @listens Player#ended\n   */\n\n\n  SeekBar.prototype.handleEnded = function handleEnded(event) {\n    this.update_(this.player_.duration(), 1);\n  };\n\n  /**\n   * Get the percentage of media played so far.\n   *\n   * @return {number}\n   *         The percentage of media played so far (0 to 1).\n   */\n\n\n  SeekBar.prototype.getPercent = function getPercent() {\n    var percent = this.getCurrentTime_() / this.player_.duration();\n\n    return percent >= 1 ? 1 : percent;\n  };\n\n  /**\n   * Handle mouse down on seek bar\n   *\n   * @param {EventTarget~Event} event\n   *        The `mousedown` event that caused this to run.\n   *\n   * @listens mousedown\n   */\n\n\n  SeekBar.prototype.handleMouseDown = function handleMouseDown(event) {\n    if (!isSingleLeftClick(event)) {\n      return;\n    }\n\n    // Stop event propagation to prevent double fire in progress-control.js\n    event.stopPropagation();\n    this.player_.scrubbing(true);\n\n    this.videoWasPlaying = !this.player_.paused();\n    this.player_.pause();\n\n    _Slider.prototype.handleMouseDown.call(this, event);\n  };\n\n  /**\n   * Handle mouse move on seek bar\n   *\n   * @param {EventTarget~Event} event\n   *        The `mousemove` event that caused this to run.\n   *\n   * @listens mousemove\n   */\n\n\n  SeekBar.prototype.handleMouseMove = function handleMouseMove(event) {\n    if (!isSingleLeftClick(event)) {\n      return;\n    }\n\n    var newTime = this.calculateDistance(event) * this.player_.duration();\n\n    // Don't let video end while scrubbing.\n    if (newTime === this.player_.duration()) {\n      newTime = newTime - 0.1;\n    }\n\n    // Set new time (tell player to seek to new time)\n    this.player_.currentTime(newTime);\n  };\n\n  SeekBar.prototype.enable = function enable() {\n    _Slider.prototype.enable.call(this);\n    var mouseTimeDisplay = this.getChild('mouseTimeDisplay');\n\n    if (!mouseTimeDisplay) {\n      return;\n    }\n\n    mouseTimeDisplay.show();\n  };\n\n  SeekBar.prototype.disable = function disable() {\n    _Slider.prototype.disable.call(this);\n    var mouseTimeDisplay = this.getChild('mouseTimeDisplay');\n\n    if (!mouseTimeDisplay) {\n      return;\n    }\n\n    mouseTimeDisplay.hide();\n  };\n\n  /**\n   * Handle mouse up on seek bar\n   *\n   * @param {EventTarget~Event} event\n   *        The `mouseup` event that caused this to run.\n   *\n   * @listens mouseup\n   */\n\n\n  SeekBar.prototype.handleMouseUp = function handleMouseUp(event) {\n    _Slider.prototype.handleMouseUp.call(this, event);\n\n    // Stop event propagation to prevent double fire in progress-control.js\n    if (event) {\n      event.stopPropagation();\n    }\n    this.player_.scrubbing(false);\n\n    /**\n     * Trigger timeupdate because we're done seeking and the time has changed.\n     * This is particularly useful for if the player is paused to time the time displays.\n     *\n     * @event Tech#timeupdate\n     * @type {EventTarget~Event}\n     */\n    this.player_.trigger({ type: 'timeupdate', target: this, manuallyTriggered: true });\n    if (this.videoWasPlaying) {\n      silencePromise(this.player_.play());\n    }\n  };\n\n  /**\n   * Move more quickly fast forward for keyboard-only users\n   */\n\n\n  SeekBar.prototype.stepForward = function stepForward() {\n    this.player_.currentTime(this.player_.currentTime() + STEP_SECONDS);\n  };\n\n  /**\n   * Move more quickly rewind for keyboard-only users\n   */\n\n\n  SeekBar.prototype.stepBack = function stepBack() {\n    this.player_.currentTime(this.player_.currentTime() - STEP_SECONDS);\n  };\n\n  /**\n   * Toggles the playback state of the player\n   * This gets called when enter or space is used on the seekbar\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called\n   *\n   */\n\n\n  SeekBar.prototype.handleAction = function handleAction(event) {\n    if (this.player_.paused()) {\n      this.player_.play();\n    } else {\n      this.player_.pause();\n    }\n  };\n\n  /**\n   * Called when this SeekBar has focus and a key gets pressed down. By\n   * default it will call `this.handleAction` when the key is space or enter.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n\n\n  SeekBar.prototype.handleKeyPress = function handleKeyPress(event) {\n\n    // Support Space (32) or Enter (13) key operation to fire a click event\n    if (event.which === 32 || event.which === 13) {\n      event.preventDefault();\n      this.handleAction(event);\n    } else if (_Slider.prototype.handleKeyPress) {\n\n      // Pass keypress handling up for unsupported keys\n      _Slider.prototype.handleKeyPress.call(this, event);\n    }\n  };\n\n  return SeekBar;\n}(Slider);\n\n/**\n * Default options for the `SeekBar`\n *\n * @type {Object}\n * @private\n */\n\n\nSeekBar.prototype.options_ = {\n  children: ['loadProgressBar', 'playProgressBar'],\n  barName: 'playProgressBar'\n};\n\n// MouseTimeDisplay tooltips should not be added to a player on mobile devices or IE8\nif ((!IE_VERSION || IE_VERSION > 8) && !IS_IOS && !IS_ANDROID) {\n  SeekBar.prototype.options_.children.splice(1, 0, 'mouseTimeDisplay');\n}\n\n/**\n * Call the update event for this Slider when this event happens on the player.\n *\n * @type {string}\n */\nSeekBar.prototype.playerEvent = 'timeupdate';\n\nComponent.registerComponent('SeekBar', SeekBar);\n\n/**\n * @file progress-control.js\n */\n/**\n * The Progress Control component contains the seek bar, load progress,\n * and play progress.\n *\n * @extends Component\n */\n\nvar ProgressControl = function (_Component) {\n  inherits(ProgressControl, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function ProgressControl(player, options) {\n    classCallCheck(this, ProgressControl);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.handleMouseMove = throttle(bind(_this, _this.handleMouseMove), 25);\n    _this.throttledHandleMouseSeek = throttle(bind(_this, _this.handleMouseSeek), 25);\n\n    _this.enable();\n    return _this;\n  }\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  ProgressControl.prototype.createEl = function createEl$$1() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-progress-control vjs-control'\n    });\n  };\n\n  /**\n   * When the mouse moves over the `ProgressControl`, the pointer position\n   * gets passed down to the `MouseTimeDisplay` component.\n   *\n   * @param {EventTarget~Event} event\n   *        The `mousemove` event that caused this function to run.\n   *\n   * @listen mousemove\n   */\n\n\n  ProgressControl.prototype.handleMouseMove = function handleMouseMove(event) {\n    var seekBar = this.getChild('seekBar');\n\n    if (seekBar) {\n      var mouseTimeDisplay = seekBar.getChild('mouseTimeDisplay');\n      var seekBarEl = seekBar.el();\n      var seekBarRect = getBoundingClientRect(seekBarEl);\n      var seekBarPoint = getPointerPosition(seekBarEl, event).x;\n\n      // The default skin has a gap on either side of the `SeekBar`. This means\n      // that it's possible to trigger this behavior outside the boundaries of\n      // the `SeekBar`. This ensures we stay within it at all times.\n      if (seekBarPoint > 1) {\n        seekBarPoint = 1;\n      } else if (seekBarPoint < 0) {\n        seekBarPoint = 0;\n      }\n\n      if (mouseTimeDisplay) {\n        mouseTimeDisplay.update(seekBarRect, seekBarPoint);\n      }\n    }\n  };\n\n  /**\n   * A throttled version of the {@link ProgressControl#handleMouseSeek} listener.\n   *\n   * @method ProgressControl#throttledHandleMouseSeek\n   * @param {EventTarget~Event} event\n   *        The `mousemove` event that caused this function to run.\n   *\n   * @listen mousemove\n   * @listen touchmove\n   */\n\n  /**\n   * Handle `mousemove` or `touchmove` events on the `ProgressControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousemove\n   * @listens touchmove\n   */\n\n\n  ProgressControl.prototype.handleMouseSeek = function handleMouseSeek(event) {\n    var seekBar = this.getChild('seekBar');\n\n    if (seekBar) {\n      seekBar.handleMouseMove(event);\n    }\n  };\n\n  /**\n   * Are controls are currently enabled for this progress control.\n   *\n   * @return {boolean}\n   *         true if controls are enabled, false otherwise\n   */\n\n\n  ProgressControl.prototype.enabled = function enabled() {\n    return this.enabled_;\n  };\n\n  /**\n   * Disable all controls on the progress control and its children\n   */\n\n\n  ProgressControl.prototype.disable = function disable() {\n    this.children().forEach(function (child) {\n      return child.disable && child.disable();\n    });\n\n    if (!this.enabled()) {\n      return;\n    }\n\n    this.off(['mousedown', 'touchstart'], this.handleMouseDown);\n    this.off(this.el_, 'mousemove', this.handleMouseMove);\n    this.handleMouseUp();\n\n    this.addClass('disabled');\n\n    this.enabled_ = false;\n  };\n\n  /**\n   * Enable all controls on the progress control and its children\n   */\n\n\n  ProgressControl.prototype.enable = function enable() {\n    this.children().forEach(function (child) {\n      return child.enable && child.enable();\n    });\n\n    if (this.enabled()) {\n      return;\n    }\n\n    this.on(['mousedown', 'touchstart'], this.handleMouseDown);\n    this.on(this.el_, 'mousemove', this.handleMouseMove);\n    this.removeClass('disabled');\n\n    this.enabled_ = true;\n  };\n\n  /**\n   * Handle `mousedown` or `touchstart` events on the `ProgressControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousedown\n   * @listens touchstart\n   */\n\n\n  ProgressControl.prototype.handleMouseDown = function handleMouseDown(event) {\n    var doc = this.el_.ownerDocument;\n    var seekBar = this.getChild('seekBar');\n\n    if (seekBar) {\n      seekBar.handleMouseDown(event);\n    }\n\n    this.on(doc, 'mousemove', this.throttledHandleMouseSeek);\n    this.on(doc, 'touchmove', this.throttledHandleMouseSeek);\n    this.on(doc, 'mouseup', this.handleMouseUp);\n    this.on(doc, 'touchend', this.handleMouseUp);\n  };\n\n  /**\n   * Handle `mouseup` or `touchend` events on the `ProgressControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mouseup` or `touchend` event that triggered this function.\n   *\n   * @listens touchend\n   * @listens mouseup\n   */\n\n\n  ProgressControl.prototype.handleMouseUp = function handleMouseUp(event) {\n    var doc = this.el_.ownerDocument;\n    var seekBar = this.getChild('seekBar');\n\n    if (seekBar) {\n      seekBar.handleMouseUp(event);\n    }\n\n    this.off(doc, 'mousemove', this.throttledHandleMouseSeek);\n    this.off(doc, 'touchmove', this.throttledHandleMouseSeek);\n    this.off(doc, 'mouseup', this.handleMouseUp);\n    this.off(doc, 'touchend', this.handleMouseUp);\n  };\n\n  return ProgressControl;\n}(Component);\n\n/**\n * Default options for `ProgressControl`\n *\n * @type {Object}\n * @private\n */\n\n\nProgressControl.prototype.options_ = {\n  children: ['seekBar']\n};\n\nComponent.registerComponent('ProgressControl', ProgressControl);\n\n/**\n * @file fullscreen-toggle.js\n */\n/**\n * Toggle fullscreen video\n *\n * @extends Button\n */\n\nvar FullscreenToggle = function (_Button) {\n  inherits(FullscreenToggle, _Button);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function FullscreenToggle(player, options) {\n    classCallCheck(this, FullscreenToggle);\n\n    var _this = possibleConstructorReturn(this, _Button.call(this, player, options));\n\n    _this.on(player, 'fullscreenchange', _this.handleFullscreenChange);\n\n    if (document[FullscreenApi.fullscreenEnabled] === false) {\n      _this.disable();\n    }\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  FullscreenToggle.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-fullscreen-control ' + _Button.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * Handles fullscreenchange on the player and change control text accordingly.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The {@link Player#fullscreenchange} event that caused this function to be\n   *        called.\n   *\n   * @listens Player#fullscreenchange\n   */\n\n\n  FullscreenToggle.prototype.handleFullscreenChange = function handleFullscreenChange(event) {\n    if (this.player_.isFullscreen()) {\n      this.controlText('Non-Fullscreen');\n    } else {\n      this.controlText('Fullscreen');\n    }\n  };\n\n  /**\n   * This gets called when an `FullscreenToggle` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  FullscreenToggle.prototype.handleClick = function handleClick(event) {\n    if (!this.player_.isFullscreen()) {\n      this.player_.requestFullscreen();\n    } else {\n      this.player_.exitFullscreen();\n    }\n  };\n\n  return FullscreenToggle;\n}(Button);\n\n/**\n * The text that should display over the `FullscreenToggle`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nFullscreenToggle.prototype.controlText_ = 'Fullscreen';\n\nComponent.registerComponent('FullscreenToggle', FullscreenToggle);\n\n/**\n * Check if volume control is supported and if it isn't hide the\n * `Component` that was passed  using the `vjs-hidden` class.\n *\n * @param {Component} self\n *        The component that should be hidden if volume is unsupported\n *\n * @param {Player} player\n *        A reference to the player\n *\n * @private\n */\nvar checkVolumeSupport = function checkVolumeSupport(self, player) {\n  // hide volume controls when they're not supported by the current tech\n  if (player.tech_ && !player.tech_.featuresVolumeControl) {\n    self.addClass('vjs-hidden');\n  }\n\n  self.on(player, 'loadstart', function () {\n    if (!player.tech_.featuresVolumeControl) {\n      self.addClass('vjs-hidden');\n    } else {\n      self.removeClass('vjs-hidden');\n    }\n  });\n};\n\n/**\n * @file volume-level.js\n */\n/**\n * Shows volume level\n *\n * @extends Component\n */\n\nvar VolumeLevel = function (_Component) {\n  inherits(VolumeLevel, _Component);\n\n  function VolumeLevel() {\n    classCallCheck(this, VolumeLevel);\n    return possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  VolumeLevel.prototype.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-volume-level',\n      innerHTML: '<span class=\"vjs-control-text\"></span>'\n    });\n  };\n\n  return VolumeLevel;\n}(Component);\n\nComponent.registerComponent('VolumeLevel', VolumeLevel);\n\n/**\n * @file volume-bar.js\n */\n// Required children\n/**\n * The bar that contains the volume level and can be clicked on to adjust the level\n *\n * @extends Slider\n */\n\nvar VolumeBar = function (_Slider) {\n  inherits(VolumeBar, _Slider);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function VolumeBar(player, options) {\n    classCallCheck(this, VolumeBar);\n\n    var _this = possibleConstructorReturn(this, _Slider.call(this, player, options));\n\n    _this.on('slideractive', _this.updateLastVolume_);\n    _this.on(player, 'volumechange', _this.updateARIAAttributes);\n    player.ready(function () {\n      return _this.updateARIAAttributes();\n    });\n    return _this;\n  }\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  VolumeBar.prototype.createEl = function createEl$$1() {\n    return _Slider.prototype.createEl.call(this, 'div', {\n      className: 'vjs-volume-bar vjs-slider-bar'\n    }, {\n      'aria-label': this.localize('Volume Level'),\n      'aria-live': 'polite'\n    });\n  };\n\n  /**\n   * Handle mouse down on volume bar\n   *\n   * @param {EventTarget~Event} event\n   *        The `mousedown` event that caused this to run.\n   *\n   * @listens mousedown\n   */\n\n\n  VolumeBar.prototype.handleMouseDown = function handleMouseDown(event) {\n    if (!isSingleLeftClick(event)) {\n      return;\n    }\n\n    _Slider.prototype.handleMouseDown.call(this, event);\n  };\n\n  /**\n   * Handle movement events on the {@link VolumeMenuButton}.\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to run.\n   *\n   * @listens mousemove\n   */\n\n\n  VolumeBar.prototype.handleMouseMove = function handleMouseMove(event) {\n    if (!isSingleLeftClick(event)) {\n      return;\n    }\n\n    this.checkMuted();\n    this.player_.volume(this.calculateDistance(event));\n  };\n\n  /**\n   * If the player is muted unmute it.\n   */\n\n\n  VolumeBar.prototype.checkMuted = function checkMuted() {\n    if (this.player_.muted()) {\n      this.player_.muted(false);\n    }\n  };\n\n  /**\n   * Get percent of volume level\n   *\n   * @return {number}\n   *         Volume level percent as a decimal number.\n   */\n\n\n  VolumeBar.prototype.getPercent = function getPercent() {\n    if (this.player_.muted()) {\n      return 0;\n    }\n    return this.player_.volume();\n  };\n\n  /**\n   * Increase volume level for keyboard users\n   */\n\n\n  VolumeBar.prototype.stepForward = function stepForward() {\n    this.checkMuted();\n    this.player_.volume(this.player_.volume() + 0.1);\n  };\n\n  /**\n   * Decrease volume level for keyboard users\n   */\n\n\n  VolumeBar.prototype.stepBack = function stepBack() {\n    this.checkMuted();\n    this.player_.volume(this.player_.volume() - 0.1);\n  };\n\n  /**\n   * Update ARIA accessibility attributes\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `volumechange` event that caused this function to run.\n   *\n   * @listens Player#volumechange\n   */\n\n\n  VolumeBar.prototype.updateARIAAttributes = function updateARIAAttributes(event) {\n    var ariaValue = this.player_.muted() ? 0 : this.volumeAsPercentage_();\n\n    this.el_.setAttribute('aria-valuenow', ariaValue);\n    this.el_.setAttribute('aria-valuetext', ariaValue + '%');\n  };\n\n  /**\n   * Returns the current value of the player volume as a percentage\n   *\n   * @private\n   */\n\n\n  VolumeBar.prototype.volumeAsPercentage_ = function volumeAsPercentage_() {\n    return Math.round(this.player_.volume() * 100);\n  };\n\n  /**\n   * When user starts dragging the VolumeBar, store the volume and listen for\n   * the end of the drag. When the drag ends, if the volume was set to zero,\n   * set lastVolume to the stored volume.\n   *\n   * @listens slideractive\n   * @private\n   */\n\n\n  VolumeBar.prototype.updateLastVolume_ = function updateLastVolume_() {\n    var _this2 = this;\n\n    var volumeBeforeDrag = this.player_.volume();\n\n    this.one('sliderinactive', function () {\n      if (_this2.player_.volume() === 0) {\n        _this2.player_.lastVolume_(volumeBeforeDrag);\n      }\n    });\n  };\n\n  return VolumeBar;\n}(Slider);\n\n/**\n * Default options for the `VolumeBar`\n *\n * @type {Object}\n * @private\n */\n\n\nVolumeBar.prototype.options_ = {\n  children: ['volumeLevel'],\n  barName: 'volumeLevel'\n};\n\n/**\n * Call the update event for this Slider when this event happens on the player.\n *\n * @type {string}\n */\nVolumeBar.prototype.playerEvent = 'volumechange';\n\nComponent.registerComponent('VolumeBar', VolumeBar);\n\n/**\n * @file volume-control.js\n */\n// Required children\n/**\n * The component for controlling the volume level\n *\n * @extends Component\n */\n\nvar VolumeControl = function (_Component) {\n  inherits(VolumeControl, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n  function VolumeControl(player) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, VolumeControl);\n\n    options.vertical = options.vertical || false;\n\n    // Pass the vertical option down to the VolumeBar if\n    // the VolumeBar is turned on.\n    if (typeof options.volumeBar === 'undefined' || isPlain(options.volumeBar)) {\n      options.volumeBar = options.volumeBar || {};\n      options.volumeBar.vertical = options.vertical;\n    }\n\n    // hide this control if volume support is missing\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    checkVolumeSupport(_this, player);\n\n    _this.throttledHandleMouseMove = throttle(bind(_this, _this.handleMouseMove), 25);\n\n    _this.on('mousedown', _this.handleMouseDown);\n    _this.on('touchstart', _this.handleMouseDown);\n\n    // while the slider is active (the mouse has been pressed down and\n    // is dragging) or in focus we do not want to hide the VolumeBar\n    _this.on(_this.volumeBar, ['focus', 'slideractive'], function () {\n      _this.volumeBar.addClass('vjs-slider-active');\n      _this.addClass('vjs-slider-active');\n      _this.trigger('slideractive');\n    });\n\n    _this.on(_this.volumeBar, ['blur', 'sliderinactive'], function () {\n      _this.volumeBar.removeClass('vjs-slider-active');\n      _this.removeClass('vjs-slider-active');\n      _this.trigger('sliderinactive');\n    });\n    return _this;\n  }\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  VolumeControl.prototype.createEl = function createEl() {\n    var orientationClass = 'vjs-volume-horizontal';\n\n    if (this.options_.vertical) {\n      orientationClass = 'vjs-volume-vertical';\n    }\n\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-volume-control vjs-control ' + orientationClass\n    });\n  };\n\n  /**\n   * Handle `mousedown` or `touchstart` events on the `VolumeControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousedown\n   * @listens touchstart\n   */\n\n\n  VolumeControl.prototype.handleMouseDown = function handleMouseDown(event) {\n    var doc = this.el_.ownerDocument;\n\n    this.on(doc, 'mousemove', this.throttledHandleMouseMove);\n    this.on(doc, 'touchmove', this.throttledHandleMouseMove);\n    this.on(doc, 'mouseup', this.handleMouseUp);\n    this.on(doc, 'touchend', this.handleMouseUp);\n  };\n\n  /**\n   * Handle `mouseup` or `touchend` events on the `VolumeControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mouseup` or `touchend` event that triggered this function.\n   *\n   * @listens touchend\n   * @listens mouseup\n   */\n\n\n  VolumeControl.prototype.handleMouseUp = function handleMouseUp(event) {\n    var doc = this.el_.ownerDocument;\n\n    this.off(doc, 'mousemove', this.throttledHandleMouseMove);\n    this.off(doc, 'touchmove', this.throttledHandleMouseMove);\n    this.off(doc, 'mouseup', this.handleMouseUp);\n    this.off(doc, 'touchend', this.handleMouseUp);\n  };\n\n  /**\n   * Handle `mousedown` or `touchstart` events on the `VolumeControl`.\n   *\n   * @param {EventTarget~Event} event\n   *        `mousedown` or `touchstart` event that triggered this function\n   *\n   * @listens mousedown\n   * @listens touchstart\n   */\n\n\n  VolumeControl.prototype.handleMouseMove = function handleMouseMove(event) {\n    this.volumeBar.handleMouseMove(event);\n  };\n\n  return VolumeControl;\n}(Component);\n\n/**\n * Default options for the `VolumeControl`\n *\n * @type {Object}\n * @private\n */\n\n\nVolumeControl.prototype.options_ = {\n  children: ['volumeBar']\n};\n\nComponent.registerComponent('VolumeControl', VolumeControl);\n\n/**\n * Check if muting volume is supported and if it isn't hide the mute toggle\n * button.\n *\n * @param {Component} self\n *        A reference to the mute toggle button\n *\n * @param {Player} player\n *        A reference to the player\n *\n * @private\n */\nvar checkMuteSupport = function checkMuteSupport(self, player) {\n  // hide mute toggle button if it's not supported by the current tech\n  if (player.tech_ && !player.tech_.featuresMuteControl) {\n    self.addClass('vjs-hidden');\n  }\n\n  self.on(player, 'loadstart', function () {\n    if (!player.tech_.featuresMuteControl) {\n      self.addClass('vjs-hidden');\n    } else {\n      self.removeClass('vjs-hidden');\n    }\n  });\n};\n\n/**\n * @file mute-toggle.js\n */\n/**\n * A button component for muting the audio.\n *\n * @extends Button\n */\n\nvar MuteToggle = function (_Button) {\n  inherits(MuteToggle, _Button);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function MuteToggle(player, options) {\n    classCallCheck(this, MuteToggle);\n\n    // hide this control if volume support is missing\n    var _this = possibleConstructorReturn(this, _Button.call(this, player, options));\n\n    checkMuteSupport(_this, player);\n\n    _this.on(player, ['loadstart', 'volumechange'], _this.update);\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  MuteToggle.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-mute-control ' + _Button.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * This gets called when an `MuteToggle` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  MuteToggle.prototype.handleClick = function handleClick(event) {\n    var vol = this.player_.volume();\n    var lastVolume = this.player_.lastVolume_();\n\n    if (vol === 0) {\n      var volumeToSet = lastVolume < 0.1 ? 0.1 : lastVolume;\n\n      this.player_.volume(volumeToSet);\n      this.player_.muted(false);\n    } else {\n      this.player_.muted(this.player_.muted() ? false : true);\n    }\n  };\n\n  /**\n   * Update the `MuteToggle` button based on the state of `volume` and `muted`\n   * on the player.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The {@link Player#loadstart} event if this function was called\n   *        through an event.\n   *\n   * @listens Player#loadstart\n   * @listens Player#volumechange\n   */\n\n\n  MuteToggle.prototype.update = function update(event) {\n    this.updateIcon_();\n    this.updateControlText_();\n  };\n\n  /**\n   * Update the appearance of the `MuteToggle` icon.\n   *\n   * Possible states (given `level` variable below):\n   * - 0: crossed out\n   * - 1: zero bars of volume\n   * - 2: one bar of volume\n   * - 3: two bars of volume\n   *\n   * @private\n   */\n\n\n  MuteToggle.prototype.updateIcon_ = function updateIcon_() {\n    var vol = this.player_.volume();\n    var level = 3;\n\n    // in iOS when a player is loaded with muted attribute\n    // and volume is changed with a native mute button\n    // we want to make sure muted state is updated\n    if (IS_IOS) {\n      this.player_.muted(this.player_.tech_.el_.muted);\n    }\n\n    if (vol === 0 || this.player_.muted()) {\n      level = 0;\n    } else if (vol < 0.33) {\n      level = 1;\n    } else if (vol < 0.67) {\n      level = 2;\n    }\n\n    // TODO improve muted icon classes\n    for (var i = 0; i < 4; i++) {\n      removeClass(this.el_, 'vjs-vol-' + i);\n    }\n    addClass(this.el_, 'vjs-vol-' + level);\n  };\n\n  /**\n   * If `muted` has changed on the player, update the control text\n   * (`title` attribute on `vjs-mute-control` element and content of\n   * `vjs-control-text` element).\n   *\n   * @private\n   */\n\n\n  MuteToggle.prototype.updateControlText_ = function updateControlText_() {\n    var soundOff = this.player_.muted() || this.player_.volume() === 0;\n    var text = soundOff ? 'Unmute' : 'Mute';\n\n    if (this.controlText() !== text) {\n      this.controlText(text);\n    }\n  };\n\n  return MuteToggle;\n}(Button);\n\n/**\n * The text that should display over the `MuteToggle`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nMuteToggle.prototype.controlText_ = 'Mute';\n\nComponent.registerComponent('MuteToggle', MuteToggle);\n\n/**\n * @file volume-control.js\n */\n// Required children\n/**\n * A Component to contain the MuteToggle and VolumeControl so that\n * they can work together.\n *\n * @extends Component\n */\n\nvar VolumePanel = function (_Component) {\n  inherits(VolumePanel, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n  function VolumePanel(player) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, VolumePanel);\n\n    if (typeof options.inline !== 'undefined') {\n      options.inline = options.inline;\n    } else {\n      options.inline = true;\n    }\n\n    // pass the inline option down to the VolumeControl as vertical if\n    // the VolumeControl is on.\n    if (typeof options.volumeControl === 'undefined' || isPlain(options.volumeControl)) {\n      options.volumeControl = options.volumeControl || {};\n      options.volumeControl.vertical = !options.inline;\n    }\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.on(player, ['loadstart'], _this.volumePanelState_);\n\n    // while the slider is active (the mouse has been pressed down and\n    // is dragging) we do not want to hide the VolumeBar\n    _this.on(_this.volumeControl, ['slideractive'], _this.sliderActive_);\n\n    _this.on(_this.volumeControl, ['sliderinactive'], _this.sliderInactive_);\n    return _this;\n  }\n\n  /**\n   * Add vjs-slider-active class to the VolumePanel\n   *\n   * @listens VolumeControl#slideractive\n   * @private\n   */\n\n\n  VolumePanel.prototype.sliderActive_ = function sliderActive_() {\n    this.addClass('vjs-slider-active');\n  };\n\n  /**\n   * Removes vjs-slider-active class to the VolumePanel\n   *\n   * @listens VolumeControl#sliderinactive\n   * @private\n   */\n\n\n  VolumePanel.prototype.sliderInactive_ = function sliderInactive_() {\n    this.removeClass('vjs-slider-active');\n  };\n\n  /**\n   * Adds vjs-hidden or vjs-mute-toggle-only to the VolumePanel\n   * depending on MuteToggle and VolumeControl state\n   *\n   * @listens Player#loadstart\n   * @private\n   */\n\n\n  VolumePanel.prototype.volumePanelState_ = function volumePanelState_() {\n    // hide volume panel if neither volume control or mute toggle\n    // are displayed\n    if (this.volumeControl.hasClass('vjs-hidden') && this.muteToggle.hasClass('vjs-hidden')) {\n      this.addClass('vjs-hidden');\n    }\n\n    // if only mute toggle is visible we don't want\n    // volume panel expanding when hovered or active\n    if (this.volumeControl.hasClass('vjs-hidden') && !this.muteToggle.hasClass('vjs-hidden')) {\n      this.addClass('vjs-mute-toggle-only');\n    }\n  };\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  VolumePanel.prototype.createEl = function createEl() {\n    var orientationClass = 'vjs-volume-panel-horizontal';\n\n    if (!this.options_.inline) {\n      orientationClass = 'vjs-volume-panel-vertical';\n    }\n\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-volume-panel vjs-control ' + orientationClass\n    });\n  };\n\n  return VolumePanel;\n}(Component);\n\n/**\n * Default options for the `VolumeControl`\n *\n * @type {Object}\n * @private\n */\n\n\nVolumePanel.prototype.options_ = {\n  children: ['muteToggle', 'volumeControl']\n};\n\nComponent.registerComponent('VolumePanel', VolumePanel);\n\n/**\n * @file menu.js\n */\n/**\n * The Menu component is used to build popup menus, including subtitle and\n * captions selection menus.\n *\n * @extends Component\n */\n\nvar Menu = function (_Component) {\n  inherits(Menu, _Component);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Player} player\n   *        the player that this component should attach to\n   *\n   * @param {Object} [options]\n   *        Object of option names and values\n   *\n   */\n  function Menu(player, options) {\n    classCallCheck(this, Menu);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    if (options) {\n      _this.menuButton_ = options.menuButton;\n    }\n\n    _this.focusedChild_ = -1;\n\n    _this.on('keydown', _this.handleKeyPress);\n    return _this;\n  }\n\n  /**\n   * Add a {@link MenuItem} to the menu.\n   *\n   * @param {Object|string} component\n   *        The name or instance of the `MenuItem` to add.\n   *\n   */\n\n\n  Menu.prototype.addItem = function addItem(component) {\n    this.addChild(component);\n    component.on('click', bind(this, function (event) {\n      // Unpress the associated MenuButton, and move focus back to it\n      if (this.menuButton_) {\n        this.menuButton_.unpressButton();\n\n        // don't focus menu button if item is a caption settings item\n        // because focus will move elsewhere and it logs an error on IE8\n        if (component.name() !== 'CaptionSettingsMenuItem') {\n          this.menuButton_.focus();\n        }\n      }\n    }));\n  };\n\n  /**\n   * Create the `Menu`s DOM element.\n   *\n   * @return {Element}\n   *         the element that was created\n   */\n\n\n  Menu.prototype.createEl = function createEl$$1() {\n    var contentElType = this.options_.contentElType || 'ul';\n\n    this.contentEl_ = createEl(contentElType, {\n      className: 'vjs-menu-content'\n    });\n\n    this.contentEl_.setAttribute('role', 'menu');\n\n    var el = _Component.prototype.createEl.call(this, 'div', {\n      append: this.contentEl_,\n      className: 'vjs-menu'\n    });\n\n    el.appendChild(this.contentEl_);\n\n    // Prevent clicks from bubbling up. Needed for Menu Buttons,\n    // where a click on the parent is significant\n    on(el, 'click', function (event) {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n    });\n\n    return el;\n  };\n\n  Menu.prototype.dispose = function dispose() {\n    this.contentEl_ = null;\n\n    _Component.prototype.dispose.call(this);\n  };\n\n  /**\n   * Handle a `keydown` event on this menu. This listener is added in the constructor.\n   *\n   * @param {EventTarget~Event} event\n   *        A `keydown` event that happened on the menu.\n   *\n   * @listens keydown\n   */\n\n\n  Menu.prototype.handleKeyPress = function handleKeyPress(event) {\n    // Left and Down Arrows\n    if (event.which === 37 || event.which === 40) {\n      event.preventDefault();\n      this.stepForward();\n\n      // Up and Right Arrows\n    } else if (event.which === 38 || event.which === 39) {\n      event.preventDefault();\n      this.stepBack();\n    }\n  };\n\n  /**\n   * Move to next (lower) menu item for keyboard users.\n   */\n\n\n  Menu.prototype.stepForward = function stepForward() {\n    var stepChild = 0;\n\n    if (this.focusedChild_ !== undefined) {\n      stepChild = this.focusedChild_ + 1;\n    }\n    this.focus(stepChild);\n  };\n\n  /**\n   * Move to previous (higher) menu item for keyboard users.\n   */\n\n\n  Menu.prototype.stepBack = function stepBack() {\n    var stepChild = 0;\n\n    if (this.focusedChild_ !== undefined) {\n      stepChild = this.focusedChild_ - 1;\n    }\n    this.focus(stepChild);\n  };\n\n  /**\n   * Set focus on a {@link MenuItem} in the `Menu`.\n   *\n   * @param {Object|string} [item=0]\n   *        Index of child item set focus on.\n   */\n\n\n  Menu.prototype.focus = function focus() {\n    var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    var children = this.children().slice();\n    var haveTitle = children.length && children[0].className && /vjs-menu-title/.test(children[0].className);\n\n    if (haveTitle) {\n      children.shift();\n    }\n\n    if (children.length > 0) {\n      if (item < 0) {\n        item = 0;\n      } else if (item >= children.length) {\n        item = children.length - 1;\n      }\n\n      this.focusedChild_ = item;\n\n      children[item].el_.focus();\n    }\n  };\n\n  return Menu;\n}(Component);\n\nComponent.registerComponent('Menu', Menu);\n\n/**\n * @file menu-button.js\n */\n/**\n * A `MenuButton` class for any popup {@link Menu}.\n *\n * @extends Component\n */\n\nvar MenuButton = function (_Component) {\n  inherits(MenuButton, _Component);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n  function MenuButton(player) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, MenuButton);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options));\n\n    _this.menuButton_ = new Button(player, options);\n\n    _this.menuButton_.controlText(_this.controlText_);\n    _this.menuButton_.el_.setAttribute('aria-haspopup', 'true');\n\n    // Add buildCSSClass values to the button, not the wrapper\n    var buttonClass = Button.prototype.buildCSSClass();\n\n    _this.menuButton_.el_.className = _this.buildCSSClass() + ' ' + buttonClass;\n    _this.menuButton_.removeClass('vjs-control');\n\n    _this.addChild(_this.menuButton_);\n\n    _this.update();\n\n    _this.enabled_ = true;\n\n    _this.on(_this.menuButton_, 'tap', _this.handleClick);\n    _this.on(_this.menuButton_, 'click', _this.handleClick);\n    _this.on(_this.menuButton_, 'focus', _this.handleFocus);\n    _this.on(_this.menuButton_, 'blur', _this.handleBlur);\n\n    _this.on('keydown', _this.handleSubmenuKeyPress);\n    return _this;\n  }\n\n  /**\n   * Update the menu based on the current state of its items.\n   */\n\n\n  MenuButton.prototype.update = function update() {\n    var menu = this.createMenu();\n\n    if (this.menu) {\n      this.menu.dispose();\n      this.removeChild(this.menu);\n    }\n\n    this.menu = menu;\n    this.addChild(menu);\n\n    /**\n     * Track the state of the menu button\n     *\n     * @type {Boolean}\n     * @private\n     */\n    this.buttonPressed_ = false;\n    this.menuButton_.el_.setAttribute('aria-expanded', 'false');\n\n    if (this.items && this.items.length <= this.hideThreshold_) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n\n  /**\n   * Create the menu and add all items to it.\n   *\n   * @return {Menu}\n   *         The constructed menu\n   */\n\n\n  MenuButton.prototype.createMenu = function createMenu() {\n    var menu = new Menu(this.player_, { menuButton: this });\n\n    /**\n     * Hide the menu if the number of items is less than or equal to this threshold. This defaults\n     * to 0 and whenever we add items which can be hidden to the menu we'll increment it. We list\n     * it here because every time we run `createMenu` we need to reset the value.\n     *\n     * @protected\n     * @type {Number}\n     */\n    this.hideThreshold_ = 0;\n\n    // Add a title list item to the top\n    if (this.options_.title) {\n      var title = createEl('li', {\n        className: 'vjs-menu-title',\n        innerHTML: toTitleCase(this.options_.title),\n        tabIndex: -1\n      });\n\n      this.hideThreshold_ += 1;\n\n      menu.children_.unshift(title);\n      prependTo(title, menu.contentEl());\n    }\n\n    this.items = this.createItems();\n\n    if (this.items) {\n      // Add menu items to the menu\n      for (var i = 0; i < this.items.length; i++) {\n        menu.addItem(this.items[i]);\n      }\n    }\n\n    return menu;\n  };\n\n  /**\n   * Create the list of menu items. Specific to each subclass.\n   *\n   * @abstract\n   */\n\n\n  MenuButton.prototype.createItems = function createItems() {};\n\n  /**\n   * Create the `MenuButtons`s DOM element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  MenuButton.prototype.createEl = function createEl$$1() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: this.buildWrapperCSSClass()\n    }, {});\n  };\n\n  /**\n   * Allow sub components to stack CSS class names for the wrapper element\n   *\n   * @return {string}\n   *         The constructed wrapper DOM `className`\n   */\n\n\n  MenuButton.prototype.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    var menuButtonClass = 'vjs-menu-button';\n\n    // If the inline option is passed, we want to use different styles altogether.\n    if (this.options_.inline === true) {\n      menuButtonClass += '-inline';\n    } else {\n      menuButtonClass += '-popup';\n    }\n\n    // TODO: Fix the CSS so that this isn't necessary\n    var buttonClass = Button.prototype.buildCSSClass();\n\n    return 'vjs-menu-button ' + menuButtonClass + ' ' + buttonClass + ' ' + _Component.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  MenuButton.prototype.buildCSSClass = function buildCSSClass() {\n    var menuButtonClass = 'vjs-menu-button';\n\n    // If the inline option is passed, we want to use different styles altogether.\n    if (this.options_.inline === true) {\n      menuButtonClass += '-inline';\n    } else {\n      menuButtonClass += '-popup';\n    }\n\n    return 'vjs-menu-button ' + menuButtonClass + ' ' + _Component.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * Get or set the localized control text that will be used for accessibility.\n   *\n   * > NOTE: This will come from the internal `menuButton_` element.\n   *\n   * @param {string} [text]\n   *        Control text for element.\n   *\n   * @param {Element} [el=this.menuButton_.el()]\n   *        Element to set the title on.\n   *\n   * @return {string}\n   *         - The control text when getting\n   */\n\n\n  MenuButton.prototype.controlText = function controlText(text) {\n    var el = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.menuButton_.el();\n\n    return this.menuButton_.controlText(text, el);\n  };\n\n  /**\n   * Handle a click on a `MenuButton`.\n   * See {@link ClickableComponent#handleClick} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  MenuButton.prototype.handleClick = function handleClick(event) {\n    // When you click the button it adds focus, which will show the menu.\n    // So we'll remove focus when the mouse leaves the button. Focus is needed\n    // for tab navigation.\n\n    this.one(this.menu.contentEl(), 'mouseleave', bind(this, function (e) {\n      this.unpressButton();\n      this.el_.blur();\n    }));\n    if (this.buttonPressed_) {\n      this.unpressButton();\n    } else {\n      this.pressButton();\n    }\n  };\n\n  /**\n   * Set the focus to the actual button, not to this element\n   */\n\n\n  MenuButton.prototype.focus = function focus() {\n    this.menuButton_.focus();\n  };\n\n  /**\n   * Remove the focus from the actual button, not this element\n   */\n\n\n  MenuButton.prototype.blur = function blur() {\n    this.menuButton_.blur();\n  };\n\n  /**\n   * This gets called when a `MenuButton` gains focus via a `focus` event.\n   * Turns on listening for `keydown` events. When they happen it\n   * calls `this.handleKeyPress`.\n   *\n   * @param {EventTarget~Event} event\n   *        The `focus` event that caused this function to be called.\n   *\n   * @listens focus\n   */\n\n\n  MenuButton.prototype.handleFocus = function handleFocus() {\n    on(document, 'keydown', bind(this, this.handleKeyPress));\n  };\n\n  /**\n   * Called when a `MenuButton` loses focus. Turns off the listener for\n   * `keydown` events. Which Stops `this.handleKeyPress` from getting called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `blur` event that caused this function to be called.\n   *\n   * @listens blur\n   */\n\n\n  MenuButton.prototype.handleBlur = function handleBlur() {\n    off(document, 'keydown', bind(this, this.handleKeyPress));\n  };\n\n  /**\n   * Handle tab, escape, down arrow, and up arrow keys for `MenuButton`. See\n   * {@link ClickableComponent#handleKeyPress} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n\n\n  MenuButton.prototype.handleKeyPress = function handleKeyPress(event) {\n\n    // Escape (27) key or Tab (9) key unpress the 'button'\n    if (event.which === 27 || event.which === 9) {\n      if (this.buttonPressed_) {\n        this.unpressButton();\n      }\n      // Don't preventDefault for Tab key - we still want to lose focus\n      if (event.which !== 9) {\n        event.preventDefault();\n        // Set focus back to the menu button's button\n        this.menuButton_.el_.focus();\n      }\n      // Up (38) key or Down (40) key press the 'button'\n    } else if (event.which === 38 || event.which === 40) {\n      if (!this.buttonPressed_) {\n        this.pressButton();\n        event.preventDefault();\n      }\n    }\n  };\n\n  /**\n   * Handle a `keydown` event on a sub-menu. The listener for this is added in\n   * the constructor.\n   *\n   * @param {EventTarget~Event} event\n   *        Key press event\n   *\n   * @listens keydown\n   */\n\n\n  MenuButton.prototype.handleSubmenuKeyPress = function handleSubmenuKeyPress(event) {\n\n    // Escape (27) key or Tab (9) key unpress the 'button'\n    if (event.which === 27 || event.which === 9) {\n      if (this.buttonPressed_) {\n        this.unpressButton();\n      }\n      // Don't preventDefault for Tab key - we still want to lose focus\n      if (event.which !== 9) {\n        event.preventDefault();\n        // Set focus back to the menu button's button\n        this.menuButton_.el_.focus();\n      }\n    }\n  };\n\n  /**\n   * Put the current `MenuButton` into a pressed state.\n   */\n\n\n  MenuButton.prototype.pressButton = function pressButton() {\n    if (this.enabled_) {\n      this.buttonPressed_ = true;\n      this.menu.lockShowing();\n      this.menuButton_.el_.setAttribute('aria-expanded', 'true');\n\n      // set the focus into the submenu, except on iOS where it is resulting in\n      // undesired scrolling behavior when the player is in an iframe\n      if (IS_IOS && isInFrame()) {\n        // Return early so that the menu isn't focused\n        return;\n      }\n\n      this.menu.focus();\n    }\n  };\n\n  /**\n   * Take the current `MenuButton` out of a pressed state.\n   */\n\n\n  MenuButton.prototype.unpressButton = function unpressButton() {\n    if (this.enabled_) {\n      this.buttonPressed_ = false;\n      this.menu.unlockShowing();\n      this.menuButton_.el_.setAttribute('aria-expanded', 'false');\n    }\n  };\n\n  /**\n   * Disable the `MenuButton`. Don't allow it to be clicked.\n   */\n\n\n  MenuButton.prototype.disable = function disable() {\n    this.unpressButton();\n\n    this.enabled_ = false;\n    this.addClass('vjs-disabled');\n\n    this.menuButton_.disable();\n  };\n\n  /**\n   * Enable the `MenuButton`. Allow it to be clicked.\n   */\n\n\n  MenuButton.prototype.enable = function enable() {\n    this.enabled_ = true;\n    this.removeClass('vjs-disabled');\n\n    this.menuButton_.enable();\n  };\n\n  return MenuButton;\n}(Component);\n\nComponent.registerComponent('MenuButton', MenuButton);\n\n/**\n * @file track-button.js\n */\n/**\n * The base class for buttons that toggle specific  track types (e.g. subtitles).\n *\n * @extends MenuButton\n */\n\nvar TrackButton = function (_MenuButton) {\n  inherits(TrackButton, _MenuButton);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function TrackButton(player, options) {\n    classCallCheck(this, TrackButton);\n\n    var tracks = options.tracks;\n\n    var _this = possibleConstructorReturn(this, _MenuButton.call(this, player, options));\n\n    if (_this.items.length <= 1) {\n      _this.hide();\n    }\n\n    if (!tracks) {\n      return possibleConstructorReturn(_this);\n    }\n\n    var updateHandler = bind(_this, _this.update);\n\n    tracks.addEventListener('removetrack', updateHandler);\n    tracks.addEventListener('addtrack', updateHandler);\n    _this.player_.on('ready', updateHandler);\n\n    _this.player_.on('dispose', function () {\n      tracks.removeEventListener('removetrack', updateHandler);\n      tracks.removeEventListener('addtrack', updateHandler);\n    });\n    return _this;\n  }\n\n  return TrackButton;\n}(MenuButton);\n\nComponent.registerComponent('TrackButton', TrackButton);\n\n/**\n * @file menu-item.js\n */\n/**\n * The component for a menu item. `<li>`\n *\n * @extends ClickableComponent\n */\n\nvar MenuItem = function (_ClickableComponent) {\n  inherits(MenuItem, _ClickableComponent);\n\n  /**\n   * Creates an instance of the this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   *\n   */\n  function MenuItem(player, options) {\n    classCallCheck(this, MenuItem);\n\n    var _this = possibleConstructorReturn(this, _ClickableComponent.call(this, player, options));\n\n    _this.selectable = options.selectable;\n    _this.isSelected_ = options.selected || false;\n    _this.multiSelectable = options.multiSelectable;\n\n    _this.selected(_this.isSelected_);\n\n    if (_this.selectable) {\n      if (_this.multiSelectable) {\n        _this.el_.setAttribute('role', 'menuitemcheckbox');\n      } else {\n        _this.el_.setAttribute('role', 'menuitemradio');\n      }\n    } else {\n      _this.el_.setAttribute('role', 'menuitem');\n    }\n    return _this;\n  }\n\n  /**\n   * Create the `MenuItem's DOM element\n   *\n   * @param {string} [type=li]\n   *        Element's node type, not actually used, always set to `li`.\n   *\n   * @param {Object} [props={}]\n   *        An object of properties that should be set on the element\n   *\n   * @param {Object} [attrs={}]\n   *        An object of attributes that should be set on the element\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  MenuItem.prototype.createEl = function createEl(type, props, attrs) {\n    // The control is textual, not just an icon\n    this.nonIconControl = true;\n\n    return _ClickableComponent.prototype.createEl.call(this, 'li', assign({\n      className: 'vjs-menu-item',\n      innerHTML: '<span class=\"vjs-menu-item-text\">' + this.localize(this.options_.label) + '</span>',\n      tabIndex: -1\n    }, props), attrs);\n  };\n\n  /**\n   * Any click on a `MenuItem` puts it into the selected state.\n   * See {@link ClickableComponent#handleClick} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  MenuItem.prototype.handleClick = function handleClick(event) {\n    this.selected(true);\n  };\n\n  /**\n   * Set the state for this menu item as selected or not.\n   *\n   * @param {boolean} selected\n   *        if the menu item is selected or not\n   */\n\n\n  MenuItem.prototype.selected = function selected(_selected) {\n    if (this.selectable) {\n      if (_selected) {\n        this.addClass('vjs-selected');\n        this.el_.setAttribute('aria-checked', 'true');\n        // aria-checked isn't fully supported by browsers/screen readers,\n        // so indicate selected state to screen reader in the control text.\n        this.controlText(', selected');\n        this.isSelected_ = true;\n      } else {\n        this.removeClass('vjs-selected');\n        this.el_.setAttribute('aria-checked', 'false');\n        // Indicate un-selected state to screen reader\n        this.controlText('');\n        this.isSelected_ = false;\n      }\n    }\n  };\n\n  return MenuItem;\n}(ClickableComponent);\n\nComponent.registerComponent('MenuItem', MenuItem);\n\n/**\n * @file text-track-menu-item.js\n */\n/**\n * The specific menu item type for selecting a language within a text track kind\n *\n * @extends MenuItem\n */\n\nvar TextTrackMenuItem = function (_MenuItem) {\n  inherits(TextTrackMenuItem, _MenuItem);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function TextTrackMenuItem(player, options) {\n    classCallCheck(this, TextTrackMenuItem);\n\n    var track = options.track;\n    var tracks = player.textTracks();\n\n    // Modify options for parent MenuItem class's init.\n    options.label = track.label || track.language || 'Unknown';\n    options.selected = track.mode === 'showing';\n\n    var _this = possibleConstructorReturn(this, _MenuItem.call(this, player, options));\n\n    _this.track = track;\n    var changeHandler = function changeHandler() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this.handleTracksChange.apply(_this, args);\n    };\n    var selectedLanguageChangeHandler = function selectedLanguageChangeHandler() {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      _this.handleSelectedLanguageChange.apply(_this, args);\n    };\n\n    player.on(['loadstart', 'texttrackchange'], changeHandler);\n    tracks.addEventListener('change', changeHandler);\n    tracks.addEventListener('selectedlanguagechange', selectedLanguageChangeHandler);\n    _this.on('dispose', function () {\n      player.off(['loadstart', 'texttrackchange'], changeHandler);\n      tracks.removeEventListener('change', changeHandler);\n      tracks.removeEventListener('selectedlanguagechange', selectedLanguageChangeHandler);\n    });\n\n    // iOS7 doesn't dispatch change events to TextTrackLists when an\n    // associated track's mode changes. Without something like\n    // Object.observe() (also not present on iOS7), it's not\n    // possible to detect changes to the mode attribute and polyfill\n    // the change event. As a poor substitute, we manually dispatch\n    // change events whenever the controls modify the mode.\n    if (tracks.onchange === undefined) {\n      var event = void 0;\n\n      _this.on(['tap', 'click'], function () {\n        if (_typeof(window.Event) !== 'object') {\n          // Android 2.3 throws an Illegal Constructor error for window.Event\n          try {\n            event = new window.Event('change');\n          } catch (err) {\n            // continue regardless of error\n          }\n        }\n\n        if (!event) {\n          event = document.createEvent('Event');\n          event.initEvent('change', true, true);\n        }\n\n        tracks.dispatchEvent(event);\n      });\n    }\n\n    // set the default state based on current tracks\n    _this.handleTracksChange();\n    return _this;\n  }\n\n  /**\n   * This gets called when an `TextTrackMenuItem` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  TextTrackMenuItem.prototype.handleClick = function handleClick(event) {\n    var kind = this.track.kind;\n    var kinds = this.track.kinds;\n    var tracks = this.player_.textTracks();\n\n    if (!kinds) {\n      kinds = [kind];\n    }\n\n    _MenuItem.prototype.handleClick.call(this, event);\n\n    if (!tracks) {\n      return;\n    }\n\n    for (var i = 0; i < tracks.length; i++) {\n      var track = tracks[i];\n\n      if (track === this.track && kinds.indexOf(track.kind) > -1) {\n        if (track.mode !== 'showing') {\n          track.mode = 'showing';\n        }\n      } else if (track.mode !== 'disabled') {\n        track.mode = 'disabled';\n      }\n    }\n  };\n\n  /**\n   * Handle text track list change\n   *\n   * @param {EventTarget~Event} event\n   *        The `change` event that caused this function to be called.\n   *\n   * @listens TextTrackList#change\n   */\n\n\n  TextTrackMenuItem.prototype.handleTracksChange = function handleTracksChange(event) {\n    var shouldBeSelected = this.track.mode === 'showing';\n\n    // Prevent redundant selected() calls because they may cause\n    // screen readers to read the appended control text unnecessarily\n    if (shouldBeSelected !== this.isSelected_) {\n      this.selected(shouldBeSelected);\n    }\n  };\n\n  TextTrackMenuItem.prototype.handleSelectedLanguageChange = function handleSelectedLanguageChange(event) {\n    if (this.track.mode === 'showing') {\n      var selectedLanguage = this.player_.cache_.selectedLanguage;\n\n      // Don't replace the kind of track across the same language\n      if (selectedLanguage && selectedLanguage.enabled && selectedLanguage.language === this.track.language && selectedLanguage.kind !== this.track.kind) {\n        return;\n      }\n\n      this.player_.cache_.selectedLanguage = {\n        enabled: true,\n        language: this.track.language,\n        kind: this.track.kind\n      };\n    }\n  };\n\n  TextTrackMenuItem.prototype.dispose = function dispose() {\n    // remove reference to track object on dispose\n    this.track = null;\n\n    _MenuItem.prototype.dispose.call(this);\n  };\n\n  return TextTrackMenuItem;\n}(MenuItem);\n\nComponent.registerComponent('TextTrackMenuItem', TextTrackMenuItem);\n\n/**\n * @file off-text-track-menu-item.js\n */\n/**\n * A special menu item for turning of a specific type of text track\n *\n * @extends TextTrackMenuItem\n */\n\nvar OffTextTrackMenuItem = function (_TextTrackMenuItem) {\n  inherits(OffTextTrackMenuItem, _TextTrackMenuItem);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function OffTextTrackMenuItem(player, options) {\n    classCallCheck(this, OffTextTrackMenuItem);\n\n    // Create pseudo track info\n    // Requires options['kind']\n    options.track = {\n      player: player,\n      kind: options.kind,\n      kinds: options.kinds,\n      'default': false,\n      mode: 'disabled'\n    };\n\n    if (!options.kinds) {\n      options.kinds = [options.kind];\n    }\n\n    if (options.label) {\n      options.track.label = options.label;\n    } else {\n      options.track.label = options.kinds.join(' and ') + ' off';\n    }\n\n    // MenuItem is selectable\n    options.selectable = true;\n    // MenuItem is NOT multiSelectable (i.e. only one can be marked \"selected\" at a time)\n    options.multiSelectable = false;\n\n    return possibleConstructorReturn(this, _TextTrackMenuItem.call(this, player, options));\n  }\n\n  /**\n   * Handle text track change\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to run\n   */\n\n\n  OffTextTrackMenuItem.prototype.handleTracksChange = function handleTracksChange(event) {\n    var tracks = this.player().textTracks();\n    var shouldBeSelected = true;\n\n    for (var i = 0, l = tracks.length; i < l; i++) {\n      var track = tracks[i];\n\n      if (this.options_.kinds.indexOf(track.kind) > -1 && track.mode === 'showing') {\n        shouldBeSelected = false;\n        break;\n      }\n    }\n\n    // Prevent redundant selected() calls because they may cause\n    // screen readers to read the appended control text unnecessarily\n    if (shouldBeSelected !== this.isSelected_) {\n      this.selected(shouldBeSelected);\n    }\n  };\n\n  OffTextTrackMenuItem.prototype.handleSelectedLanguageChange = function handleSelectedLanguageChange(event) {\n    var tracks = this.player().textTracks();\n    var allHidden = true;\n\n    for (var i = 0, l = tracks.length; i < l; i++) {\n      var track = tracks[i];\n\n      if (['captions', 'descriptions', 'subtitles'].indexOf(track.kind) > -1 && track.mode === 'showing') {\n        allHidden = false;\n        break;\n      }\n    }\n\n    if (allHidden) {\n      this.player_.cache_.selectedLanguage = {\n        enabled: false\n      };\n    }\n  };\n\n  return OffTextTrackMenuItem;\n}(TextTrackMenuItem);\n\nComponent.registerComponent('OffTextTrackMenuItem', OffTextTrackMenuItem);\n\n/**\n * @file text-track-button.js\n */\n/**\n * The base class for buttons that toggle specific text track types (e.g. subtitles)\n *\n * @extends MenuButton\n */\n\nvar TextTrackButton = function (_TrackButton) {\n  inherits(TextTrackButton, _TrackButton);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n  function TextTrackButton(player) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, TextTrackButton);\n\n    options.tracks = player.textTracks();\n\n    return possibleConstructorReturn(this, _TrackButton.call(this, player, options));\n  }\n\n  /**\n   * Create a menu item for each text track\n   *\n   * @param {TextTrackMenuItem[]} [items=[]]\n   *        Existing array of items to use during creation\n   *\n   * @return {TextTrackMenuItem[]}\n   *         Array of menu items that were created\n   */\n\n\n  TextTrackButton.prototype.createItems = function createItems() {\n    var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var TrackMenuItem = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : TextTrackMenuItem;\n\n\n    // Label is an overide for the [track] off label\n    // USed to localise captions/subtitles\n    var label = void 0;\n\n    if (this.label_) {\n      label = this.label_ + ' off';\n    }\n    // Add an OFF menu item to turn all tracks off\n    items.push(new OffTextTrackMenuItem(this.player_, {\n      kinds: this.kinds_,\n      kind: this.kind_,\n      label: label\n    }));\n\n    this.hideThreshold_ += 1;\n\n    var tracks = this.player_.textTracks();\n\n    if (!Array.isArray(this.kinds_)) {\n      this.kinds_ = [this.kind_];\n    }\n\n    for (var i = 0; i < tracks.length; i++) {\n      var track = tracks[i];\n\n      // only add tracks that are of an appropriate kind and have a label\n      if (this.kinds_.indexOf(track.kind) > -1) {\n\n        var item = new TrackMenuItem(this.player_, {\n          track: track,\n          // MenuItem is selectable\n          selectable: true,\n          // MenuItem is NOT multiSelectable (i.e. only one can be marked \"selected\" at a time)\n          multiSelectable: false\n        });\n\n        item.addClass('vjs-' + track.kind + '-menu-item');\n        items.push(item);\n      }\n    }\n\n    return items;\n  };\n\n  return TextTrackButton;\n}(TrackButton);\n\nComponent.registerComponent('TextTrackButton', TextTrackButton);\n\n/**\n * @file chapters-track-menu-item.js\n */\n/**\n * The chapter track menu item\n *\n * @extends MenuItem\n */\n\nvar ChaptersTrackMenuItem = function (_MenuItem) {\n  inherits(ChaptersTrackMenuItem, _MenuItem);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function ChaptersTrackMenuItem(player, options) {\n    classCallCheck(this, ChaptersTrackMenuItem);\n\n    var track = options.track;\n    var cue = options.cue;\n    var currentTime = player.currentTime();\n\n    // Modify options for parent MenuItem class's init.\n    options.selectable = true;\n    options.multiSelectable = false;\n    options.label = cue.text;\n    options.selected = cue.startTime <= currentTime && currentTime < cue.endTime;\n\n    var _this = possibleConstructorReturn(this, _MenuItem.call(this, player, options));\n\n    _this.track = track;\n    _this.cue = cue;\n    track.addEventListener('cuechange', bind(_this, _this.update));\n    return _this;\n  }\n\n  /**\n   * This gets called when an `ChaptersTrackMenuItem` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  ChaptersTrackMenuItem.prototype.handleClick = function handleClick(event) {\n    _MenuItem.prototype.handleClick.call(this);\n    this.player_.currentTime(this.cue.startTime);\n    this.update(this.cue.startTime);\n  };\n\n  /**\n   * Update chapter menu item\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `cuechange` event that caused this function to run.\n   *\n   * @listens TextTrack#cuechange\n   */\n\n\n  ChaptersTrackMenuItem.prototype.update = function update(event) {\n    var cue = this.cue;\n    var currentTime = this.player_.currentTime();\n\n    // vjs.log(currentTime, cue.startTime);\n    this.selected(cue.startTime <= currentTime && currentTime < cue.endTime);\n  };\n\n  return ChaptersTrackMenuItem;\n}(MenuItem);\n\nComponent.registerComponent('ChaptersTrackMenuItem', ChaptersTrackMenuItem);\n\n/**\n * @file chapters-button.js\n */\n/**\n * The button component for toggling and selecting chapters\n * Chapters act much differently than other text tracks\n * Cues are navigation vs. other tracks of alternative languages\n *\n * @extends TextTrackButton\n */\n\nvar ChaptersButton = function (_TextTrackButton) {\n  inherits(ChaptersButton, _TextTrackButton);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when this function is ready.\n   */\n  function ChaptersButton(player, options, ready) {\n    classCallCheck(this, ChaptersButton);\n    return possibleConstructorReturn(this, _TextTrackButton.call(this, player, options, ready));\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  ChaptersButton.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-chapters-button ' + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  ChaptersButton.prototype.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return 'vjs-chapters-button ' + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  };\n\n  /**\n   * Update the menu based on the current state of its items.\n   *\n   * @param {EventTarget~Event} [event]\n   *        An event that triggered this function to run.\n   *\n   * @listens TextTrackList#addtrack\n   * @listens TextTrackList#removetrack\n   * @listens TextTrackList#change\n   */\n\n\n  ChaptersButton.prototype.update = function update(event) {\n    if (!this.track_ || event && (event.type === 'addtrack' || event.type === 'removetrack')) {\n      this.setTrack(this.findChaptersTrack());\n    }\n    _TextTrackButton.prototype.update.call(this);\n  };\n\n  /**\n   * Set the currently selected track for the chapters button.\n   *\n   * @param {TextTrack} track\n   *        The new track to select. Nothing will change if this is the currently selected\n   *        track.\n   */\n\n\n  ChaptersButton.prototype.setTrack = function setTrack(track) {\n    if (this.track_ === track) {\n      return;\n    }\n\n    if (!this.updateHandler_) {\n      this.updateHandler_ = this.update.bind(this);\n    }\n\n    // here this.track_ refers to the old track instance\n    if (this.track_) {\n      var remoteTextTrackEl = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);\n\n      if (remoteTextTrackEl) {\n        remoteTextTrackEl.removeEventListener('load', this.updateHandler_);\n      }\n\n      this.track_ = null;\n    }\n\n    this.track_ = track;\n\n    // here this.track_ refers to the new track instance\n    if (this.track_) {\n      this.track_.mode = 'hidden';\n\n      var _remoteTextTrackEl = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);\n\n      if (_remoteTextTrackEl) {\n        _remoteTextTrackEl.addEventListener('load', this.updateHandler_);\n      }\n    }\n  };\n\n  /**\n   * Find the track object that is currently in use by this ChaptersButton\n   *\n   * @return {TextTrack|undefined}\n   *         The current track or undefined if none was found.\n   */\n\n\n  ChaptersButton.prototype.findChaptersTrack = function findChaptersTrack() {\n    var tracks = this.player_.textTracks() || [];\n\n    for (var i = tracks.length - 1; i >= 0; i--) {\n      // We will always choose the last track as our chaptersTrack\n      var track = tracks[i];\n\n      if (track.kind === this.kind_) {\n        return track;\n      }\n    }\n  };\n\n  /**\n   * Get the caption for the ChaptersButton based on the track label. This will also\n   * use the current tracks localized kind as a fallback if a label does not exist.\n   *\n   * @return {string}\n   *         The tracks current label or the localized track kind.\n   */\n\n\n  ChaptersButton.prototype.getMenuCaption = function getMenuCaption() {\n    if (this.track_ && this.track_.label) {\n      return this.track_.label;\n    }\n    return this.localize(toTitleCase(this.kind_));\n  };\n\n  /**\n   * Create menu from chapter track\n   *\n   * @return {Menu}\n   *         New menu for the chapter buttons\n   */\n\n\n  ChaptersButton.prototype.createMenu = function createMenu() {\n    this.options_.title = this.getMenuCaption();\n    return _TextTrackButton.prototype.createMenu.call(this);\n  };\n\n  /**\n   * Create a menu item for each text track\n   *\n   * @return {TextTrackMenuItem[]}\n   *         Array of menu items\n   */\n\n\n  ChaptersButton.prototype.createItems = function createItems() {\n    var items = [];\n\n    if (!this.track_) {\n      return items;\n    }\n\n    var cues = this.track_.cues;\n\n    if (!cues) {\n      return items;\n    }\n\n    for (var i = 0, l = cues.length; i < l; i++) {\n      var cue = cues[i];\n      var mi = new ChaptersTrackMenuItem(this.player_, { track: this.track_, cue: cue });\n\n      items.push(mi);\n    }\n\n    return items;\n  };\n\n  return ChaptersButton;\n}(TextTrackButton);\n\n/**\n * `kind` of TextTrack to look for to associate it with this menu.\n *\n * @type {string}\n * @private\n */\n\n\nChaptersButton.prototype.kind_ = 'chapters';\n\n/**\n * The text that should display over the `ChaptersButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\nChaptersButton.prototype.controlText_ = 'Chapters';\n\nComponent.registerComponent('ChaptersButton', ChaptersButton);\n\n/**\n * @file descriptions-button.js\n */\n/**\n * The button component for toggling and selecting descriptions\n *\n * @extends TextTrackButton\n */\n\nvar DescriptionsButton = function (_TextTrackButton) {\n  inherits(DescriptionsButton, _TextTrackButton);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when this component is ready.\n   */\n  function DescriptionsButton(player, options, ready) {\n    classCallCheck(this, DescriptionsButton);\n\n    var _this = possibleConstructorReturn(this, _TextTrackButton.call(this, player, options, ready));\n\n    var tracks = player.textTracks();\n    var changeHandler = bind(_this, _this.handleTracksChange);\n\n    tracks.addEventListener('change', changeHandler);\n    _this.on('dispose', function () {\n      tracks.removeEventListener('change', changeHandler);\n    });\n    return _this;\n  }\n\n  /**\n   * Handle text track change\n   *\n   * @param {EventTarget~Event} event\n   *        The event that caused this function to run\n   *\n   * @listens TextTrackList#change\n   */\n\n\n  DescriptionsButton.prototype.handleTracksChange = function handleTracksChange(event) {\n    var tracks = this.player().textTracks();\n    var disabled = false;\n\n    // Check whether a track of a different kind is showing\n    for (var i = 0, l = tracks.length; i < l; i++) {\n      var track = tracks[i];\n\n      if (track.kind !== this.kind_ && track.mode === 'showing') {\n        disabled = true;\n        break;\n      }\n    }\n\n    // If another track is showing, disable this menu button\n    if (disabled) {\n      this.disable();\n    } else {\n      this.enable();\n    }\n  };\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  DescriptionsButton.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-descriptions-button ' + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  DescriptionsButton.prototype.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return 'vjs-descriptions-button ' + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  };\n\n  return DescriptionsButton;\n}(TextTrackButton);\n\n/**\n * `kind` of TextTrack to look for to associate it with this menu.\n *\n * @type {string}\n * @private\n */\n\n\nDescriptionsButton.prototype.kind_ = 'descriptions';\n\n/**\n * The text that should display over the `DescriptionsButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\nDescriptionsButton.prototype.controlText_ = 'Descriptions';\n\nComponent.registerComponent('DescriptionsButton', DescriptionsButton);\n\n/**\n * @file subtitles-button.js\n */\n/**\n * The button component for toggling and selecting subtitles\n *\n * @extends TextTrackButton\n */\n\nvar SubtitlesButton = function (_TextTrackButton) {\n  inherits(SubtitlesButton, _TextTrackButton);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when this component is ready.\n   */\n  function SubtitlesButton(player, options, ready) {\n    classCallCheck(this, SubtitlesButton);\n    return possibleConstructorReturn(this, _TextTrackButton.call(this, player, options, ready));\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  SubtitlesButton.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-subtitles-button ' + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  SubtitlesButton.prototype.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return 'vjs-subtitles-button ' + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  };\n\n  return SubtitlesButton;\n}(TextTrackButton);\n\n/**\n * `kind` of TextTrack to look for to associate it with this menu.\n *\n * @type {string}\n * @private\n */\n\n\nSubtitlesButton.prototype.kind_ = 'subtitles';\n\n/**\n * The text that should display over the `SubtitlesButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\nSubtitlesButton.prototype.controlText_ = 'Subtitles';\n\nComponent.registerComponent('SubtitlesButton', SubtitlesButton);\n\n/**\n * @file caption-settings-menu-item.js\n */\n/**\n * The menu item for caption track settings menu\n *\n * @extends TextTrackMenuItem\n */\n\nvar CaptionSettingsMenuItem = function (_TextTrackMenuItem) {\n  inherits(CaptionSettingsMenuItem, _TextTrackMenuItem);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function CaptionSettingsMenuItem(player, options) {\n    classCallCheck(this, CaptionSettingsMenuItem);\n\n    options.track = {\n      player: player,\n      kind: options.kind,\n      label: options.kind + ' settings',\n      selectable: false,\n      'default': false,\n      mode: 'disabled'\n    };\n\n    // CaptionSettingsMenuItem has no concept of 'selected'\n    options.selectable = false;\n\n    options.name = 'CaptionSettingsMenuItem';\n\n    var _this = possibleConstructorReturn(this, _TextTrackMenuItem.call(this, player, options));\n\n    _this.addClass('vjs-texttrack-settings');\n    _this.controlText(', opens ' + options.kind + ' settings dialog');\n    return _this;\n  }\n\n  /**\n   * This gets called when an `CaptionSettingsMenuItem` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  CaptionSettingsMenuItem.prototype.handleClick = function handleClick(event) {\n    this.player().getChild('textTrackSettings').open();\n  };\n\n  return CaptionSettingsMenuItem;\n}(TextTrackMenuItem);\n\nComponent.registerComponent('CaptionSettingsMenuItem', CaptionSettingsMenuItem);\n\n/**\n * @file captions-button.js\n */\n/**\n * The button component for toggling and selecting captions\n *\n * @extends TextTrackButton\n */\n\nvar CaptionsButton = function (_TextTrackButton) {\n  inherits(CaptionsButton, _TextTrackButton);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        The function to call when this component is ready.\n   */\n  function CaptionsButton(player, options, ready) {\n    classCallCheck(this, CaptionsButton);\n    return possibleConstructorReturn(this, _TextTrackButton.call(this, player, options, ready));\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  CaptionsButton.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-captions-button ' + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  CaptionsButton.prototype.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return 'vjs-captions-button ' + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  };\n\n  /**\n   * Create caption menu items\n   *\n   * @return {CaptionSettingsMenuItem[]}\n   *         The array of current menu items.\n   */\n\n\n  CaptionsButton.prototype.createItems = function createItems() {\n    var items = [];\n\n    if (!(this.player().tech_ && this.player().tech_.featuresNativeTextTracks) && this.player().getChild('textTrackSettings')) {\n      items.push(new CaptionSettingsMenuItem(this.player_, { kind: this.kind_ }));\n\n      this.hideThreshold_ += 1;\n    }\n\n    return _TextTrackButton.prototype.createItems.call(this, items);\n  };\n\n  return CaptionsButton;\n}(TextTrackButton);\n\n/**\n * `kind` of TextTrack to look for to associate it with this menu.\n *\n * @type {string}\n * @private\n */\n\n\nCaptionsButton.prototype.kind_ = 'captions';\n\n/**\n * The text that should display over the `CaptionsButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\nCaptionsButton.prototype.controlText_ = 'Captions';\n\nComponent.registerComponent('CaptionsButton', CaptionsButton);\n\n/**\n * @file subs-caps-menu-item.js\n */\n/**\n * SubsCapsMenuItem has an [cc] icon to distinguish captions from subtitles\n * in the SubsCapsMenu.\n *\n * @extends TextTrackMenuItem\n */\n\nvar SubsCapsMenuItem = function (_TextTrackMenuItem) {\n  inherits(SubsCapsMenuItem, _TextTrackMenuItem);\n\n  function SubsCapsMenuItem() {\n    classCallCheck(this, SubsCapsMenuItem);\n    return possibleConstructorReturn(this, _TextTrackMenuItem.apply(this, arguments));\n  }\n\n  SubsCapsMenuItem.prototype.createEl = function createEl(type, props, attrs) {\n    var innerHTML = '<span class=\"vjs-menu-item-text\">' + this.localize(this.options_.label);\n\n    if (this.options_.track.kind === 'captions') {\n      innerHTML += '\\n        <span aria-hidden=\"true\" class=\"vjs-icon-placeholder\"></span>\\n        <span class=\"vjs-control-text\"> ' + this.localize('Captions') + '</span>\\n      ';\n    }\n\n    innerHTML += '</span>';\n\n    var el = _TextTrackMenuItem.prototype.createEl.call(this, type, assign({\n      innerHTML: innerHTML\n    }, props), attrs);\n\n    return el;\n  };\n\n  return SubsCapsMenuItem;\n}(TextTrackMenuItem);\n\nComponent.registerComponent('SubsCapsMenuItem', SubsCapsMenuItem);\n\n/**\n * @file sub-caps-button.js\n */\n/**\n * The button component for toggling and selecting captions and/or subtitles\n *\n * @extends TextTrackButton\n */\n\nvar SubsCapsButton = function (_TextTrackButton) {\n  inherits(SubsCapsButton, _TextTrackButton);\n\n  function SubsCapsButton(player) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, SubsCapsButton);\n\n    // Although North America uses \"captions\" in most cases for\n    // \"captions and subtitles\" other locales use \"subtitles\"\n    var _this = possibleConstructorReturn(this, _TextTrackButton.call(this, player, options));\n\n    _this.label_ = 'subtitles';\n    if (['en', 'en-us', 'en-ca', 'fr-ca'].indexOf(_this.player_.language_) > -1) {\n      _this.label_ = 'captions';\n    }\n    _this.menuButton_.controlText(toTitleCase(_this.label_));\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  SubsCapsButton.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-subs-caps-button ' + _TextTrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  SubsCapsButton.prototype.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return 'vjs-subs-caps-button ' + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n  };\n\n  /**\n   * Create caption/subtitles menu items\n   *\n   * @return {CaptionSettingsMenuItem[]}\n   *         The array of current menu items.\n   */\n\n\n  SubsCapsButton.prototype.createItems = function createItems() {\n    var items = [];\n\n    if (!(this.player().tech_ && this.player().tech_.featuresNativeTextTracks) && this.player().getChild('textTrackSettings')) {\n      items.push(new CaptionSettingsMenuItem(this.player_, { kind: this.label_ }));\n\n      this.hideThreshold_ += 1;\n    }\n\n    items = _TextTrackButton.prototype.createItems.call(this, items, SubsCapsMenuItem);\n    return items;\n  };\n\n  return SubsCapsButton;\n}(TextTrackButton);\n\n/**\n * `kind`s of TextTrack to look for to associate it with this menu.\n *\n * @type {array}\n * @private\n */\n\n\nSubsCapsButton.prototype.kinds_ = ['captions', 'subtitles'];\n\n/**\n * The text that should display over the `SubsCapsButton`s controls.\n *\n *\n * @type {string}\n * @private\n */\nSubsCapsButton.prototype.controlText_ = 'Subtitles';\n\nComponent.registerComponent('SubsCapsButton', SubsCapsButton);\n\n/**\n * @file audio-track-menu-item.js\n */\n/**\n * An {@link AudioTrack} {@link MenuItem}\n *\n * @extends MenuItem\n */\n\nvar AudioTrackMenuItem = function (_MenuItem) {\n  inherits(AudioTrackMenuItem, _MenuItem);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function AudioTrackMenuItem(player, options) {\n    classCallCheck(this, AudioTrackMenuItem);\n\n    var track = options.track;\n    var tracks = player.audioTracks();\n\n    // Modify options for parent MenuItem class's init.\n    options.label = track.label || track.language || 'Unknown';\n    options.selected = track.enabled;\n\n    var _this = possibleConstructorReturn(this, _MenuItem.call(this, player, options));\n\n    _this.track = track;\n\n    _this.addClass('vjs-' + track.kind + '-menu-item');\n\n    var changeHandler = function changeHandler() {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      _this.handleTracksChange.apply(_this, args);\n    };\n\n    tracks.addEventListener('change', changeHandler);\n    _this.on('dispose', function () {\n      tracks.removeEventListener('change', changeHandler);\n    });\n    return _this;\n  }\n\n  AudioTrackMenuItem.prototype.createEl = function createEl(type, props, attrs) {\n    var innerHTML = '<span class=\"vjs-menu-item-text\">' + this.localize(this.options_.label);\n\n    if (this.options_.track.kind === 'main-desc') {\n      innerHTML += '\\n        <span aria-hidden=\"true\" class=\"vjs-icon-placeholder\"></span>\\n        <span class=\"vjs-control-text\"> ' + this.localize('Descriptions') + '</span>\\n      ';\n    }\n\n    innerHTML += '</span>';\n\n    var el = _MenuItem.prototype.createEl.call(this, type, assign({\n      innerHTML: innerHTML\n    }, props), attrs);\n\n    return el;\n  };\n\n  /**\n   * This gets called when an `AudioTrackMenuItem is \"clicked\". See {@link ClickableComponent}\n   * for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  AudioTrackMenuItem.prototype.handleClick = function handleClick(event) {\n    var tracks = this.player_.audioTracks();\n\n    _MenuItem.prototype.handleClick.call(this, event);\n\n    for (var i = 0; i < tracks.length; i++) {\n      var track = tracks[i];\n\n      track.enabled = track === this.track;\n    }\n  };\n\n  /**\n   * Handle any {@link AudioTrack} change.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The {@link AudioTrackList#change} event that caused this to run.\n   *\n   * @listens AudioTrackList#change\n   */\n\n\n  AudioTrackMenuItem.prototype.handleTracksChange = function handleTracksChange(event) {\n    this.selected(this.track.enabled);\n  };\n\n  return AudioTrackMenuItem;\n}(MenuItem);\n\nComponent.registerComponent('AudioTrackMenuItem', AudioTrackMenuItem);\n\n/**\n * @file audio-track-button.js\n */\n/**\n * The base class for buttons that toggle specific {@link AudioTrack} types.\n *\n * @extends TrackButton\n */\n\nvar AudioTrackButton = function (_TrackButton) {\n  inherits(AudioTrackButton, _TrackButton);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n  function AudioTrackButton(player) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    classCallCheck(this, AudioTrackButton);\n\n    options.tracks = player.audioTracks();\n\n    return possibleConstructorReturn(this, _TrackButton.call(this, player, options));\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  AudioTrackButton.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-audio-button ' + _TrackButton.prototype.buildCSSClass.call(this);\n  };\n\n  AudioTrackButton.prototype.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return 'vjs-audio-button ' + _TrackButton.prototype.buildWrapperCSSClass.call(this);\n  };\n\n  /**\n   * Create a menu item for each audio track\n   *\n   * @param {AudioTrackMenuItem[]} [items=[]]\n   *        An array of existing menu items to use.\n   *\n   * @return {AudioTrackMenuItem[]}\n   *         An array of menu items\n   */\n\n\n  AudioTrackButton.prototype.createItems = function createItems() {\n    var items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n    // if there's only one audio track, there no point in showing it\n    this.hideThreshold_ = 1;\n\n    var tracks = this.player_.audioTracks();\n\n    for (var i = 0; i < tracks.length; i++) {\n      var track = tracks[i];\n\n      items.push(new AudioTrackMenuItem(this.player_, {\n        track: track,\n        // MenuItem is selectable\n        selectable: true,\n        // MenuItem is NOT multiSelectable (i.e. only one can be marked \"selected\" at a time)\n        multiSelectable: false\n      }));\n    }\n\n    return items;\n  };\n\n  return AudioTrackButton;\n}(TrackButton);\n\n/**\n * The text that should display over the `AudioTrackButton`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nAudioTrackButton.prototype.controlText_ = 'Audio Track';\nComponent.registerComponent('AudioTrackButton', AudioTrackButton);\n\n/**\n * @file playback-rate-menu-item.js\n */\n/**\n * The specific menu item type for selecting a playback rate.\n *\n * @extends MenuItem\n */\n\nvar PlaybackRateMenuItem = function (_MenuItem) {\n  inherits(PlaybackRateMenuItem, _MenuItem);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function PlaybackRateMenuItem(player, options) {\n    classCallCheck(this, PlaybackRateMenuItem);\n\n    var label = options.rate;\n    var rate = parseFloat(label, 10);\n\n    // Modify options for parent MenuItem class's init.\n    options.label = label;\n    options.selected = rate === 1;\n    options.selectable = true;\n    options.multiSelectable = false;\n\n    var _this = possibleConstructorReturn(this, _MenuItem.call(this, player, options));\n\n    _this.label = label;\n    _this.rate = rate;\n\n    _this.on(player, 'ratechange', _this.update);\n    return _this;\n  }\n\n  /**\n   * This gets called when an `PlaybackRateMenuItem` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  PlaybackRateMenuItem.prototype.handleClick = function handleClick(event) {\n    _MenuItem.prototype.handleClick.call(this);\n    this.player().playbackRate(this.rate);\n  };\n\n  /**\n   * Update the PlaybackRateMenuItem when the playbackrate changes.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `ratechange` event that caused this function to run.\n   *\n   * @listens Player#ratechange\n   */\n\n\n  PlaybackRateMenuItem.prototype.update = function update(event) {\n    this.selected(this.player().playbackRate() === this.rate);\n  };\n\n  return PlaybackRateMenuItem;\n}(MenuItem);\n\n/**\n * The text that should display over the `PlaybackRateMenuItem`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nPlaybackRateMenuItem.prototype.contentElType = 'button';\n\nComponent.registerComponent('PlaybackRateMenuItem', PlaybackRateMenuItem);\n\n/**\n * @file playback-rate-menu-button.js\n */\n/**\n * The component for controlling the playback rate.\n *\n * @extends MenuButton\n */\n\nvar PlaybackRateMenuButton = function (_MenuButton) {\n  inherits(PlaybackRateMenuButton, _MenuButton);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   */\n  function PlaybackRateMenuButton(player, options) {\n    classCallCheck(this, PlaybackRateMenuButton);\n\n    var _this = possibleConstructorReturn(this, _MenuButton.call(this, player, options));\n\n    _this.updateVisibility();\n    _this.updateLabel();\n\n    _this.on(player, 'loadstart', _this.updateVisibility);\n    _this.on(player, 'ratechange', _this.updateLabel);\n    return _this;\n  }\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  PlaybackRateMenuButton.prototype.createEl = function createEl$$1() {\n    var el = _MenuButton.prototype.createEl.call(this);\n\n    this.labelEl_ = createEl('div', {\n      className: 'vjs-playback-rate-value',\n      innerHTML: '1x'\n    });\n\n    el.appendChild(this.labelEl_);\n\n    return el;\n  };\n\n  PlaybackRateMenuButton.prototype.dispose = function dispose() {\n    this.labelEl_ = null;\n\n    _MenuButton.prototype.dispose.call(this);\n  };\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  PlaybackRateMenuButton.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-playback-rate ' + _MenuButton.prototype.buildCSSClass.call(this);\n  };\n\n  PlaybackRateMenuButton.prototype.buildWrapperCSSClass = function buildWrapperCSSClass() {\n    return 'vjs-playback-rate ' + _MenuButton.prototype.buildWrapperCSSClass.call(this);\n  };\n\n  /**\n   * Create the playback rate menu\n   *\n   * @return {Menu}\n   *         Menu object populated with {@link PlaybackRateMenuItem}s\n   */\n\n\n  PlaybackRateMenuButton.prototype.createMenu = function createMenu() {\n    var menu = new Menu(this.player());\n    var rates = this.playbackRates();\n\n    if (rates) {\n      for (var i = rates.length - 1; i >= 0; i--) {\n        menu.addChild(new PlaybackRateMenuItem(this.player(), { rate: rates[i] + 'x' }));\n      }\n    }\n\n    return menu;\n  };\n\n  /**\n   * Updates ARIA accessibility attributes\n   */\n\n\n  PlaybackRateMenuButton.prototype.updateARIAAttributes = function updateARIAAttributes() {\n    // Current playback rate\n    this.el().setAttribute('aria-valuenow', this.player().playbackRate());\n  };\n\n  /**\n   * This gets called when an `PlaybackRateMenuButton` is \"clicked\". See\n   * {@link ClickableComponent} for more detailed information on what a click can be.\n   *\n   * @param {EventTarget~Event} [event]\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  PlaybackRateMenuButton.prototype.handleClick = function handleClick(event) {\n    // select next rate option\n    var currentRate = this.player().playbackRate();\n    var rates = this.playbackRates();\n\n    // this will select first one if the last one currently selected\n    var newRate = rates[0];\n\n    for (var i = 0; i < rates.length; i++) {\n      if (rates[i] > currentRate) {\n        newRate = rates[i];\n        break;\n      }\n    }\n    this.player().playbackRate(newRate);\n  };\n\n  /**\n   * Get possible playback rates\n   *\n   * @return {Array}\n   *         All possible playback rates\n   */\n\n\n  PlaybackRateMenuButton.prototype.playbackRates = function playbackRates() {\n    return this.options_.playbackRates || this.options_.playerOptions && this.options_.playerOptions.playbackRates;\n  };\n\n  /**\n   * Get whether playback rates is supported by the tech\n   * and an array of playback rates exists\n   *\n   * @return {boolean}\n   *         Whether changing playback rate is supported\n   */\n\n\n  PlaybackRateMenuButton.prototype.playbackRateSupported = function playbackRateSupported() {\n    return this.player().tech_ && this.player().tech_.featuresPlaybackRate && this.playbackRates() && this.playbackRates().length > 0;\n  };\n\n  /**\n   * Hide playback rate controls when they're no playback rate options to select\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#loadstart\n   */\n\n\n  PlaybackRateMenuButton.prototype.updateVisibility = function updateVisibility(event) {\n    if (this.playbackRateSupported()) {\n      this.removeClass('vjs-hidden');\n    } else {\n      this.addClass('vjs-hidden');\n    }\n  };\n\n  /**\n   * Update button label when rate changed\n   *\n   * @param {EventTarget~Event} [event]\n   *        The event that caused this function to run.\n   *\n   * @listens Player#ratechange\n   */\n\n\n  PlaybackRateMenuButton.prototype.updateLabel = function updateLabel(event) {\n    if (this.playbackRateSupported()) {\n      this.labelEl_.innerHTML = this.player().playbackRate() + 'x';\n    }\n  };\n\n  return PlaybackRateMenuButton;\n}(MenuButton);\n\n/**\n * The text that should display over the `FullscreenToggle`s controls. Added for localization.\n *\n * @type {string}\n * @private\n */\n\n\nPlaybackRateMenuButton.prototype.controlText_ = 'Playback Rate';\n\nComponent.registerComponent('PlaybackRateMenuButton', PlaybackRateMenuButton);\n\n/**\n * @file spacer.js\n */\n/**\n * Just an empty spacer element that can be used as an append point for plugins, etc.\n * Also can be used to create space between elements when necessary.\n *\n * @extends Component\n */\n\nvar Spacer = function (_Component) {\n  inherits(Spacer, _Component);\n\n  function Spacer() {\n    classCallCheck(this, Spacer);\n    return possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n  Spacer.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-spacer ' + _Component.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  Spacer.prototype.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: this.buildCSSClass()\n    });\n  };\n\n  return Spacer;\n}(Component);\n\nComponent.registerComponent('Spacer', Spacer);\n\n/**\n * @file custom-control-spacer.js\n */\n/**\n * Spacer specifically meant to be used as an insertion point for new plugins, etc.\n *\n * @extends Spacer\n */\n\nvar CustomControlSpacer = function (_Spacer) {\n  inherits(CustomControlSpacer, _Spacer);\n\n  function CustomControlSpacer() {\n    classCallCheck(this, CustomControlSpacer);\n    return possibleConstructorReturn(this, _Spacer.apply(this, arguments));\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n  CustomControlSpacer.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-custom-control-spacer ' + _Spacer.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n\n\n  CustomControlSpacer.prototype.createEl = function createEl() {\n    var el = _Spacer.prototype.createEl.call(this, {\n      className: this.buildCSSClass()\n    });\n\n    // No-flex/table-cell mode requires there be some content\n    // in the cell to fill the remaining space of the table.\n    el.innerHTML = '\\xA0';\n    return el;\n  };\n\n  return CustomControlSpacer;\n}(Spacer);\n\nComponent.registerComponent('CustomControlSpacer', CustomControlSpacer);\n\n/**\n * @file control-bar.js\n */\n// Required children\n/**\n * Container of main controls.\n *\n * @extends Component\n */\n\nvar ControlBar = function (_Component) {\n  inherits(ControlBar, _Component);\n\n  function ControlBar() {\n    classCallCheck(this, ControlBar);\n    return possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  /**\n   * Create the `Component`'s DOM element\n   *\n   * @return {Element}\n   *         The element that was created.\n   */\n  ControlBar.prototype.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'div', {\n      className: 'vjs-control-bar',\n      dir: 'ltr'\n    });\n  };\n\n  return ControlBar;\n}(Component);\n\n/**\n * Default options for `ControlBar`\n *\n * @type {Object}\n * @private\n */\n\n\nControlBar.prototype.options_ = {\n  children: ['playToggle', 'volumePanel', 'currentTimeDisplay', 'timeDivider', 'durationDisplay', 'progressControl', 'liveDisplay', 'remainingTimeDisplay', 'customControlSpacer', 'playbackRateMenuButton', 'chaptersButton', 'descriptionsButton', 'subsCapsButton', 'audioTrackButton', 'fullscreenToggle']\n};\n\nComponent.registerComponent('ControlBar', ControlBar);\n\n/**\n * @file error-display.js\n */\n/**\n * A display that indicates an error has occurred. This means that the video\n * is unplayable.\n *\n * @extends ModalDialog\n */\n\nvar ErrorDisplay = function (_ModalDialog) {\n  inherits(ErrorDisplay, _ModalDialog);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param  {Player} player\n   *         The `Player` that this class should be attached to.\n   *\n   * @param  {Object} [options]\n   *         The key/value store of player options.\n   */\n  function ErrorDisplay(player, options) {\n    classCallCheck(this, ErrorDisplay);\n\n    var _this = possibleConstructorReturn(this, _ModalDialog.call(this, player, options));\n\n    _this.on(player, 'error', _this.open);\n    return _this;\n  }\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   *\n   * @deprecated Since version 5.\n   */\n\n\n  ErrorDisplay.prototype.buildCSSClass = function buildCSSClass() {\n    return 'vjs-error-display ' + _ModalDialog.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * Gets the localized error message based on the `Player`s error.\n   *\n   * @return {string}\n   *         The `Player`s error message localized or an empty string.\n   */\n\n\n  ErrorDisplay.prototype.content = function content() {\n    var error = this.player().error();\n\n    return error ? this.localize(error.message) : '';\n  };\n\n  return ErrorDisplay;\n}(ModalDialog);\n\n/**\n * The default options for an `ErrorDisplay`.\n *\n * @private\n */\n\n\nErrorDisplay.prototype.options_ = mergeOptions(ModalDialog.prototype.options_, {\n  pauseOnOpen: false,\n  fillAlways: true,\n  temporary: false,\n  uncloseable: true\n});\n\nComponent.registerComponent('ErrorDisplay', ErrorDisplay);\n\n/**\n * @file text-track-settings.js\n */\nvar LOCAL_STORAGE_KEY = 'vjs-text-track-settings';\n\nvar COLOR_BLACK = ['#000', 'Black'];\nvar COLOR_BLUE = ['#00F', 'Blue'];\nvar COLOR_CYAN = ['#0FF', 'Cyan'];\nvar COLOR_GREEN = ['#0F0', 'Green'];\nvar COLOR_MAGENTA = ['#F0F', 'Magenta'];\nvar COLOR_RED = ['#F00', 'Red'];\nvar COLOR_WHITE = ['#FFF', 'White'];\nvar COLOR_YELLOW = ['#FF0', 'Yellow'];\n\nvar OPACITY_OPAQUE = ['1', 'Opaque'];\nvar OPACITY_SEMI = ['0.5', 'Semi-Transparent'];\nvar OPACITY_TRANS = ['0', 'Transparent'];\n\n// Configuration for the various <select> elements in the DOM of this component.\n//\n// Possible keys include:\n//\n// `default`:\n//   The default option index. Only needs to be provided if not zero.\n// `parser`:\n//   A function which is used to parse the value from the selected option in\n//   a customized way.\n// `selector`:\n//   The selector used to find the associated <select> element.\nvar selectConfigs = {\n  backgroundColor: {\n    selector: '.vjs-bg-color > select',\n    id: 'captions-background-color-%s',\n    label: 'Color',\n    options: [COLOR_BLACK, COLOR_WHITE, COLOR_RED, COLOR_GREEN, COLOR_BLUE, COLOR_YELLOW, COLOR_MAGENTA, COLOR_CYAN]\n  },\n\n  backgroundOpacity: {\n    selector: '.vjs-bg-opacity > select',\n    id: 'captions-background-opacity-%s',\n    label: 'Transparency',\n    options: [OPACITY_OPAQUE, OPACITY_SEMI, OPACITY_TRANS]\n  },\n\n  color: {\n    selector: '.vjs-fg-color > select',\n    id: 'captions-foreground-color-%s',\n    label: 'Color',\n    options: [COLOR_WHITE, COLOR_BLACK, COLOR_RED, COLOR_GREEN, COLOR_BLUE, COLOR_YELLOW, COLOR_MAGENTA, COLOR_CYAN]\n  },\n\n  edgeStyle: {\n    selector: '.vjs-edge-style > select',\n    id: '%s',\n    label: 'Text Edge Style',\n    options: [['none', 'None'], ['raised', 'Raised'], ['depressed', 'Depressed'], ['uniform', 'Uniform'], ['dropshadow', 'Dropshadow']]\n  },\n\n  fontFamily: {\n    selector: '.vjs-font-family > select',\n    id: 'captions-font-family-%s',\n    label: 'Font Family',\n    options: [['proportionalSansSerif', 'Proportional Sans-Serif'], ['monospaceSansSerif', 'Monospace Sans-Serif'], ['proportionalSerif', 'Proportional Serif'], ['monospaceSerif', 'Monospace Serif'], ['casual', 'Casual'], ['script', 'Script'], ['small-caps', 'Small Caps']]\n  },\n\n  fontPercent: {\n    selector: '.vjs-font-percent > select',\n    id: 'captions-font-size-%s',\n    label: 'Font Size',\n    options: [['0.50', '50%'], ['0.75', '75%'], ['1.00', '100%'], ['1.25', '125%'], ['1.50', '150%'], ['1.75', '175%'], ['2.00', '200%'], ['3.00', '300%'], ['4.00', '400%']],\n    'default': 2,\n    parser: function parser(v) {\n      return v === '1.00' ? null : Number(v);\n    }\n  },\n\n  textOpacity: {\n    selector: '.vjs-text-opacity > select',\n    id: 'captions-foreground-opacity-%s',\n    label: 'Transparency',\n    options: [OPACITY_OPAQUE, OPACITY_SEMI]\n  },\n\n  // Options for this object are defined below.\n  windowColor: {\n    selector: '.vjs-window-color > select',\n    id: 'captions-window-color-%s',\n    label: 'Color'\n  },\n\n  // Options for this object are defined below.\n  windowOpacity: {\n    selector: '.vjs-window-opacity > select',\n    id: 'captions-window-opacity-%s',\n    label: 'Transparency',\n    options: [OPACITY_TRANS, OPACITY_SEMI, OPACITY_OPAQUE]\n  }\n};\n\nselectConfigs.windowColor.options = selectConfigs.backgroundColor.options;\n\n/**\n * Get the actual value of an option.\n *\n * @param  {string} value\n *         The value to get\n *\n * @param  {Function} [parser]\n *         Optional function to adjust the value.\n *\n * @return {Mixed}\n *         - Will be `undefined` if no value exists\n *         - Will be `undefined` if the given value is \"none\".\n *         - Will be the actual value otherwise.\n *\n * @private\n */\nfunction parseOptionValue(value, parser) {\n  if (parser) {\n    value = parser(value);\n  }\n\n  if (value && value !== 'none') {\n    return value;\n  }\n}\n\n/**\n * Gets the value of the selected <option> element within a <select> element.\n *\n * @param  {Element} el\n *         the element to look in\n *\n * @param  {Function} [parser]\n *         Optional function to adjust the value.\n *\n * @return {Mixed}\n *         - Will be `undefined` if no value exists\n *         - Will be `undefined` if the given value is \"none\".\n *         - Will be the actual value otherwise.\n *\n * @private\n */\nfunction getSelectedOptionValue(el, parser) {\n  var value = el.options[el.options.selectedIndex].value;\n\n  return parseOptionValue(value, parser);\n}\n\n/**\n * Sets the selected <option> element within a <select> element based on a\n * given value.\n *\n * @param {Element} el\n *        The element to look in.\n *\n * @param {string} value\n *        the property to look on.\n *\n * @param {Function} [parser]\n *        Optional function to adjust the value before comparing.\n *\n * @private\n */\nfunction setSelectedOption(el, value, parser) {\n  if (!value) {\n    return;\n  }\n\n  for (var i = 0; i < el.options.length; i++) {\n    if (parseOptionValue(el.options[i].value, parser) === value) {\n      el.selectedIndex = i;\n      break;\n    }\n  }\n}\n\n/**\n * Manipulate Text Tracks settings.\n *\n * @extends ModalDialog\n */\n\nvar TextTrackSettings = function (_ModalDialog) {\n  inherits(TextTrackSettings, _ModalDialog);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *         The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *         The key/value store of player options.\n   */\n  function TextTrackSettings(player, options) {\n    classCallCheck(this, TextTrackSettings);\n\n    options.temporary = false;\n\n    var _this = possibleConstructorReturn(this, _ModalDialog.call(this, player, options));\n\n    _this.updateDisplay = bind(_this, _this.updateDisplay);\n\n    // fill the modal and pretend we have opened it\n    _this.fill();\n    _this.hasBeenOpened_ = _this.hasBeenFilled_ = true;\n\n    _this.endDialog = createEl('p', {\n      className: 'vjs-control-text',\n      textContent: _this.localize('End of dialog window.')\n    });\n    _this.el().appendChild(_this.endDialog);\n\n    _this.setDefaults();\n\n    // Grab `persistTextTrackSettings` from the player options if not passed in child options\n    if (options.persistTextTrackSettings === undefined) {\n      _this.options_.persistTextTrackSettings = _this.options_.playerOptions.persistTextTrackSettings;\n    }\n\n    _this.on(_this.$('.vjs-done-button'), 'click', function () {\n      _this.saveSettings();\n      _this.close();\n    });\n\n    _this.on(_this.$('.vjs-default-button'), 'click', function () {\n      _this.setDefaults();\n      _this.updateDisplay();\n    });\n\n    each(selectConfigs, function (config) {\n      _this.on(_this.$(config.selector), 'change', _this.updateDisplay);\n    });\n\n    if (_this.options_.persistTextTrackSettings) {\n      _this.restoreSettings();\n    }\n    return _this;\n  }\n\n  TextTrackSettings.prototype.dispose = function dispose() {\n    this.endDialog = null;\n\n    _ModalDialog.prototype.dispose.call(this);\n  };\n\n  /**\n   * Create a <select> element with configured options.\n   *\n   * @param {string} key\n   *        Configuration key to use during creation.\n   *\n   * @return {string}\n   *         An HTML string.\n   *\n   * @private\n   */\n\n\n  TextTrackSettings.prototype.createElSelect_ = function createElSelect_(key) {\n    var _this2 = this;\n\n    var legendId = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'label';\n\n    var config = selectConfigs[key];\n    var id = config.id.replace('%s', this.id_);\n    var selectLabelledbyIds = [legendId, id].join(' ').trim();\n\n    return ['<' + type + ' id=\"' + id + '\" class=\"' + (type === 'label' ? 'vjs-label' : '') + '\">', this.localize(config.label), '</' + type + '>', '<select aria-labelledby=\"' + selectLabelledbyIds + '\">'].concat(config.options.map(function (o) {\n      var optionId = id + '-' + o[1].replace(/\\W+/g, '');\n\n      return ['<option id=\"' + optionId + '\" value=\"' + o[0] + '\" ', 'aria-labelledby=\"' + selectLabelledbyIds + ' ' + optionId + '\">', _this2.localize(o[1]), '</option>'].join('');\n    })).concat('</select>').join('');\n  };\n\n  /**\n   * Create foreground color element for the component\n   *\n   * @return {string}\n   *         An HTML string.\n   *\n   * @private\n   */\n\n\n  TextTrackSettings.prototype.createElFgColor_ = function createElFgColor_() {\n    var legendId = 'captions-text-legend-' + this.id_;\n\n    return ['<fieldset class=\"vjs-fg-color vjs-track-setting\">', '<legend id=\"' + legendId + '\">', this.localize('Text'), '</legend>', this.createElSelect_('color', legendId), '<span class=\"vjs-text-opacity vjs-opacity\">', this.createElSelect_('textOpacity', legendId), '</span>', '</fieldset>'].join('');\n  };\n\n  /**\n   * Create background color element for the component\n   *\n   * @return {string}\n   *         An HTML string.\n   *\n   * @private\n   */\n\n\n  TextTrackSettings.prototype.createElBgColor_ = function createElBgColor_() {\n    var legendId = 'captions-background-' + this.id_;\n\n    return ['<fieldset class=\"vjs-bg-color vjs-track-setting\">', '<legend id=\"' + legendId + '\">', this.localize('Background'), '</legend>', this.createElSelect_('backgroundColor', legendId), '<span class=\"vjs-bg-opacity vjs-opacity\">', this.createElSelect_('backgroundOpacity', legendId), '</span>', '</fieldset>'].join('');\n  };\n\n  /**\n   * Create window color element for the component\n   *\n   * @return {string}\n   *         An HTML string.\n   *\n   * @private\n   */\n\n\n  TextTrackSettings.prototype.createElWinColor_ = function createElWinColor_() {\n    var legendId = 'captions-window-' + this.id_;\n\n    return ['<fieldset class=\"vjs-window-color vjs-track-setting\">', '<legend id=\"' + legendId + '\">', this.localize('Window'), '</legend>', this.createElSelect_('windowColor', legendId), '<span class=\"vjs-window-opacity vjs-opacity\">', this.createElSelect_('windowOpacity', legendId), '</span>', '</fieldset>'].join('');\n  };\n\n  /**\n   * Create color elements for the component\n   *\n   * @return {Element}\n   *         The element that was created\n   *\n   * @private\n   */\n\n\n  TextTrackSettings.prototype.createElColors_ = function createElColors_() {\n    return createEl('div', {\n      className: 'vjs-track-settings-colors',\n      innerHTML: [this.createElFgColor_(), this.createElBgColor_(), this.createElWinColor_()].join('')\n    });\n  };\n\n  /**\n   * Create font elements for the component\n   *\n   * @return {Element}\n   *         The element that was created.\n   *\n   * @private\n   */\n\n\n  TextTrackSettings.prototype.createElFont_ = function createElFont_() {\n    return createEl('div', {\n      className: 'vjs-track-settings-font',\n      innerHTML: ['<fieldset class=\"vjs-font-percent vjs-track-setting\">', this.createElSelect_('fontPercent', '', 'legend'), '</fieldset>', '<fieldset class=\"vjs-edge-style vjs-track-setting\">', this.createElSelect_('edgeStyle', '', 'legend'), '</fieldset>', '<fieldset class=\"vjs-font-family vjs-track-setting\">', this.createElSelect_('fontFamily', '', 'legend'), '</fieldset>'].join('')\n    });\n  };\n\n  /**\n   * Create controls for the component\n   *\n   * @return {Element}\n   *         The element that was created.\n   *\n   * @private\n   */\n\n\n  TextTrackSettings.prototype.createElControls_ = function createElControls_() {\n    var defaultsDescription = this.localize('restore all settings to the default values');\n\n    return createEl('div', {\n      className: 'vjs-track-settings-controls',\n      innerHTML: ['<button class=\"vjs-default-button\" title=\"' + defaultsDescription + '\">', this.localize('Reset'), '<span class=\"vjs-control-text\"> ' + defaultsDescription + '</span>', '</button>', '<button class=\"vjs-done-button\">' + this.localize('Done') + '</button>'].join('')\n    });\n  };\n\n  TextTrackSettings.prototype.content = function content() {\n    return [this.createElColors_(), this.createElFont_(), this.createElControls_()];\n  };\n\n  TextTrackSettings.prototype.label = function label() {\n    return this.localize('Caption Settings Dialog');\n  };\n\n  TextTrackSettings.prototype.description = function description() {\n    return this.localize('Beginning of dialog window. Escape will cancel and close the window.');\n  };\n\n  TextTrackSettings.prototype.buildCSSClass = function buildCSSClass() {\n    return _ModalDialog.prototype.buildCSSClass.call(this) + ' vjs-text-track-settings';\n  };\n\n  /**\n   * Gets an object of text track settings (or null).\n   *\n   * @return {Object}\n   *         An object with config values parsed from the DOM or localStorage.\n   */\n\n\n  TextTrackSettings.prototype.getValues = function getValues() {\n    var _this3 = this;\n\n    return reduce(selectConfigs, function (accum, config, key) {\n      var value = getSelectedOptionValue(_this3.$(config.selector), config.parser);\n\n      if (value !== undefined) {\n        accum[key] = value;\n      }\n\n      return accum;\n    }, {});\n  };\n\n  /**\n   * Sets text track settings from an object of values.\n   *\n   * @param {Object} values\n   *        An object with config values parsed from the DOM or localStorage.\n   */\n\n\n  TextTrackSettings.prototype.setValues = function setValues(values) {\n    var _this4 = this;\n\n    each(selectConfigs, function (config, key) {\n      setSelectedOption(_this4.$(config.selector), values[key], config.parser);\n    });\n  };\n\n  /**\n   * Sets all `<select>` elements to their default values.\n   */\n\n\n  TextTrackSettings.prototype.setDefaults = function setDefaults() {\n    var _this5 = this;\n\n    each(selectConfigs, function (config) {\n      var index = config.hasOwnProperty('default') ? config['default'] : 0;\n\n      _this5.$(config.selector).selectedIndex = index;\n    });\n  };\n\n  /**\n   * Restore texttrack settings from localStorage\n   */\n\n\n  TextTrackSettings.prototype.restoreSettings = function restoreSettings() {\n    var values = void 0;\n\n    try {\n      values = JSON.parse(window.localStorage.getItem(LOCAL_STORAGE_KEY));\n    } catch (err) {\n      log$1.warn(err);\n    }\n\n    if (values) {\n      this.setValues(values);\n    }\n  };\n\n  /**\n   * Save text track settings to localStorage\n   */\n\n\n  TextTrackSettings.prototype.saveSettings = function saveSettings() {\n    if (!this.options_.persistTextTrackSettings) {\n      return;\n    }\n\n    var values = this.getValues();\n\n    try {\n      if (Object.keys(values).length) {\n        window.localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(values));\n      } else {\n        window.localStorage.removeItem(LOCAL_STORAGE_KEY);\n      }\n    } catch (err) {\n      log$1.warn(err);\n    }\n  };\n\n  /**\n   * Update display of text track settings\n   */\n\n\n  TextTrackSettings.prototype.updateDisplay = function updateDisplay() {\n    var ttDisplay = this.player_.getChild('textTrackDisplay');\n\n    if (ttDisplay) {\n      ttDisplay.updateDisplay();\n    }\n  };\n\n  /**\n   * conditionally blur the element and refocus the captions button\n   *\n   * @private\n   */\n\n\n  TextTrackSettings.prototype.conditionalBlur_ = function conditionalBlur_() {\n    this.previouslyActiveEl_ = null;\n    this.off(document, 'keydown', this.handleKeyDown);\n\n    var cb = this.player_.controlBar;\n    var subsCapsBtn = cb && cb.subsCapsButton;\n    var ccBtn = cb && cb.captionsButton;\n\n    if (subsCapsBtn) {\n      subsCapsBtn.focus();\n    } else if (ccBtn) {\n      ccBtn.focus();\n    }\n  };\n\n  return TextTrackSettings;\n}(ModalDialog);\n\nComponent.registerComponent('TextTrackSettings', TextTrackSettings);\n\n/**\n * @file resize-manager.js\n */\n/**\n * A Resize Manager. It is in charge of triggering `playerresize` on the player in the right conditions.\n *\n * It'll either create an iframe and use a debounced resize handler on it or use the new {@link https://wicg.github.io/ResizeObserver/|ResizeObserver}.\n *\n * If the ResizeObserver is available natively, it will be used. A polyfill can be passed in as an option.\n * If a `playerresize` event is not needed, the ResizeManager component can be removed from the player, see the example below.\n * @example <caption>How to disable the resize manager</caption>\n * const player = videojs('#vid', {\n *   resizeManager: false\n * });\n *\n * @see {@link https://wicg.github.io/ResizeObserver/|ResizeObserver specification}\n *\n * @extends Component\n */\n\nvar ResizeManager = function (_Component) {\n  inherits(ResizeManager, _Component);\n\n  /**\n   * Create the ResizeManager.\n   *\n   * @param {Object} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options]\n   *        The key/value store of ResizeManager options.\n   *\n   * @param {Object} [options.ResizeObserver]\n   *        A polyfill for ResizeObserver can be passed in here.\n   *        If this is set to null it will ignore the native ResizeObserver and fall back to the iframe fallback.\n   */\n  function ResizeManager(player, options) {\n    classCallCheck(this, ResizeManager);\n\n    var RESIZE_OBSERVER_AVAILABLE = options.ResizeObserver || window.ResizeObserver;\n\n    // if `null` was passed, we want to disable the ResizeObserver\n    if (options.ResizeObserver === null) {\n      RESIZE_OBSERVER_AVAILABLE = false;\n    }\n\n    // Only create an element when ResizeObserver isn't available\n    var options_ = mergeOptions({ createEl: !RESIZE_OBSERVER_AVAILABLE }, options);\n\n    var _this = possibleConstructorReturn(this, _Component.call(this, player, options_));\n\n    _this.ResizeObserver = options.ResizeObserver || window.ResizeObserver;\n    _this.loadListener_ = null;\n    _this.resizeObserver_ = null;\n    _this.debouncedHandler_ = debounce(function () {\n      _this.resizeHandler();\n    }, 100, false, player);\n\n    if (RESIZE_OBSERVER_AVAILABLE) {\n      _this.resizeObserver_ = new _this.ResizeObserver(_this.debouncedHandler_);\n      _this.resizeObserver_.observe(player.el());\n    } else {\n      _this.loadListener_ = function () {\n        if (_this.el_.contentWindow) {\n          on(_this.el_.contentWindow, 'resize', _this.debouncedHandler_);\n        }\n        _this.off('load', _this.loadListener_);\n      };\n\n      _this.on('load', _this.loadListener_);\n    }\n    return _this;\n  }\n\n  ResizeManager.prototype.createEl = function createEl() {\n    return _Component.prototype.createEl.call(this, 'iframe', {\n      className: 'vjs-resize-manager'\n    });\n  };\n\n  /**\n   * Called when a resize is triggered on the iframe or a resize is observed via the ResizeObserver\n   *\n   * @fires Player#playerresize\n   */\n\n\n  ResizeManager.prototype.resizeHandler = function resizeHandler() {\n    /**\n     * Called when the player size has changed\n     *\n     * @event Player#playerresize\n     * @type {EventTarget~Event}\n     */\n    this.player_.trigger('playerresize');\n  };\n\n  ResizeManager.prototype.dispose = function dispose() {\n    if (this.resizeObserver_) {\n      if (this.player_.el()) {\n        this.resizeObserver_.unobserve(this.player_.el());\n      }\n      this.resizeObserver_.disconnect();\n    }\n\n    if (this.el_ && this.el_.contentWindow) {\n      off(this.el_.contentWindow, 'resize', this.debouncedHandler_);\n    }\n\n    if (this.loadListener_) {\n      this.off('load', this.loadListener_);\n    }\n\n    this.ResizeObserver = null;\n    this.resizeObserver = null;\n    this.debouncedHandler_ = null;\n    this.loadListener_ = null;\n  };\n\n  return ResizeManager;\n}(Component);\n\nComponent.registerComponent('ResizeManager', ResizeManager);\n\n/**\n * This function is used to fire a sourceset when there is something\n * similar to `mediaEl.load()` being called. It will try to find the source via\n * the `src` attribute and then the `<source>` elements. It will then fire `sourceset`\n * with the source that was found or empty string if we cannot know. If it cannot\n * find a source then `sourceset` will not be fired.\n *\n * @param {Html5} tech\n *        The tech object that sourceset was setup on\n *\n * @return {boolean}\n *         returns false if the sourceset was not fired and true otherwise.\n */\nvar sourcesetLoad = function sourcesetLoad(tech) {\n  var el = tech.el();\n\n  // if `el.src` is set, that source will be loaded.\n  if (el.hasAttribute('src')) {\n    tech.triggerSourceset(el.src);\n    return true;\n  }\n\n  /**\n   * Since there isn't a src property on the media element, source elements will be used for\n   * implementing the source selection algorithm. This happens asynchronously and\n   * for most cases were there is more than one source we cannot tell what source will\n   * be loaded, without re-implementing the source selection algorithm. At this time we are not\n   * going to do that. There are three special cases that we do handle here though:\n   *\n   * 1. If there are no sources, do not fire `sourceset`.\n   * 2. If there is only one `<source>` with a `src` property/attribute that is our `src`\n   * 3. If there is more than one `<source>` but all of them have the same `src` url.\n   *    That will be our src.\n   */\n  var sources = tech.$$('source');\n  var srcUrls = [];\n  var src = '';\n\n  // if there are no sources, do not fire sourceset\n  if (!sources.length) {\n    return false;\n  }\n\n  // only count valid/non-duplicate source elements\n  for (var i = 0; i < sources.length; i++) {\n    var url = sources[i].src;\n\n    if (url && srcUrls.indexOf(url) === -1) {\n      srcUrls.push(url);\n    }\n  }\n\n  // there were no valid sources\n  if (!srcUrls.length) {\n    return false;\n  }\n\n  // there is only one valid source element url\n  // use that\n  if (srcUrls.length === 1) {\n    src = srcUrls[0];\n  }\n\n  tech.triggerSourceset(src);\n  return true;\n};\n\n/**\n * our implementation of an `innerHTML` descriptor for browsers\n * that do not have one.\n */\nvar innerHTMLDescriptorPolyfill = {};\n\nif (!IS_IE8) {\n  innerHTMLDescriptorPolyfill = Object.defineProperty({}, 'innerHTML', {\n    get: function get() {\n      return this.cloneNode(true).innerHTML;\n    },\n    set: function set(v) {\n      // make a dummy node to use innerHTML on\n      var dummy = document.createElement(this.nodeName.toLowerCase());\n\n      // set innerHTML to the value provided\n      dummy.innerHTML = v;\n\n      // make a document fragment to hold the nodes from dummy\n      var docFrag = document.createDocumentFragment();\n\n      // copy all of the nodes created by the innerHTML on dummy\n      // to the document fragment\n      while (dummy.childNodes.length) {\n        docFrag.appendChild(dummy.childNodes[0]);\n      }\n\n      // remove content\n      this.innerText = '';\n\n      // now we add all of that html in one by appending the\n      // document fragment. This is how innerHTML does it.\n      window.Element.prototype.appendChild.call(this, docFrag);\n\n      // then return the result that innerHTML's setter would\n      return this.innerHTML;\n    }\n  });\n}\n/**\n * Get a property descriptor given a list of priorities and the\n * property to get.\n */\nvar getDescriptor = function getDescriptor(priority, prop) {\n  var descriptor = {};\n\n  for (var i = 0; i < priority.length; i++) {\n    descriptor = Object.getOwnPropertyDescriptor(priority[i], prop);\n\n    if (descriptor && descriptor.set && descriptor.get) {\n      break;\n    }\n  }\n\n  descriptor.enumerable = true;\n  descriptor.configurable = true;\n\n  return descriptor;\n};\n\nvar getInnerHTMLDescriptor = function getInnerHTMLDescriptor(tech) {\n  return getDescriptor([tech.el(), window.HTMLMediaElement.prototype, window.Element.prototype, innerHTMLDescriptorPolyfill], 'innerHTML');\n};\n\n/**\n * Patches browser internal functions so that we can tell syncronously\n * if a `<source>` was appended to the media element. For some reason this\n * causes a `sourceset` if the the media element is ready and has no source.\n * This happens when:\n * - The page has just loaded and the media element does not have a source.\n * - The media element was emptied of all sources, then `load()` was called.\n *\n * It does this by patching the following functions/properties when they are supported:\n *\n * - `append()` - can be used to add a `<source>` element to the media element\n * - `appendChild()` - can be used to add a `<source>` element to the media element\n * - `insertAdjacentHTML()` -  can be used to add a `<source>` element to the media element\n * - `innerHTML` -  can be used to add a `<source>` element to the media element\n *\n * @param {Html5} tech\n *        The tech object that sourceset is being setup on.\n */\nvar firstSourceWatch = function firstSourceWatch(tech) {\n  var el = tech.el();\n\n  // make sure firstSourceWatch isn't setup twice.\n  if (el.resetSourceWatch_) {\n    return;\n  }\n\n  var old = {};\n  var innerDescriptor = getInnerHTMLDescriptor(tech);\n  var appendWrapper = function appendWrapper(appendFn) {\n    return function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var retval = appendFn.apply(el, args);\n\n      sourcesetLoad(tech);\n\n      return retval;\n    };\n  };\n\n  ['append', 'appendChild', 'insertAdjacentHTML'].forEach(function (k) {\n    if (!el[k]) {\n      return;\n    }\n\n    // store the old function\n    old[k] = el[k];\n\n    // call the old function with a sourceset if a source\n    // was loaded\n    el[k] = appendWrapper(old[k]);\n  });\n\n  Object.defineProperty(el, 'innerHTML', mergeOptions(innerDescriptor, {\n    set: appendWrapper(innerDescriptor.set)\n  }));\n\n  el.resetSourceWatch_ = function () {\n    el.resetSourceWatch_ = null;\n    Object.keys(old).forEach(function (k) {\n      el[k] = old[k];\n    });\n\n    Object.defineProperty(el, 'innerHTML', innerDescriptor);\n  };\n\n  // on the first sourceset, we need to revert our changes\n  tech.one('sourceset', el.resetSourceWatch_);\n};\n\n/**\n * our implementation of a `src` descriptor for browsers\n * that do not have one.\n */\n\nvar srcDescriptorPolyfill = {};\n\nif (!IS_IE8) {\n  srcDescriptorPolyfill = Object.defineProperty({}, 'src', {\n    get: function get() {\n      if (this.hasAttribute('src')) {\n        return getAbsoluteURL(window.Element.prototype.getAttribute.call(this, 'src'));\n      }\n\n      return '';\n    },\n    set: function set(v) {\n      window.Element.prototype.setAttribute.call(this, 'src', v);\n\n      return v;\n    }\n  });\n}\n\nvar getSrcDescriptor = function getSrcDescriptor(tech) {\n  return getDescriptor([tech.el(), window.HTMLMediaElement.prototype, srcDescriptorPolyfill], 'src');\n};\n\n/**\n * setup `sourceset` handling on the `Html5` tech. This function\n * patches the following element properties/functions:\n *\n * - `src` - to determine when `src` is set\n * - `setAttribute()` - to determine when `src` is set\n * - `load()` - this re-triggers the source selection algorithm, and can\n *              cause a sourceset.\n *\n * If there is no source when we are adding `sourceset` support or during a `load()`\n * we also patch the functions listed in `firstSourceWatch`.\n *\n * @param {Html5} tech\n *        The tech to patch\n */\nvar setupSourceset = function setupSourceset(tech) {\n  if (!tech.featuresSourceset) {\n    return;\n  }\n\n  var el = tech.el();\n\n  // make sure sourceset isn't setup twice.\n  if (el.resetSourceset_) {\n    return;\n  }\n\n  var srcDescriptor = getSrcDescriptor(tech);\n  var oldSetAttribute = el.setAttribute;\n  var oldLoad = el.load;\n\n  Object.defineProperty(el, 'src', mergeOptions(srcDescriptor, {\n    set: function set(v) {\n      var retval = srcDescriptor.set.call(el, v);\n\n      // we use the getter here to get the actual value set on src\n      tech.triggerSourceset(el.src);\n\n      return retval;\n    }\n  }));\n\n  el.setAttribute = function (n, v) {\n    var retval = oldSetAttribute.call(el, n, v);\n\n    if (/src/i.test(n)) {\n      tech.triggerSourceset(el.src);\n    }\n\n    return retval;\n  };\n\n  el.load = function () {\n    var retval = oldLoad.call(el);\n\n    // if load was called, but there was no source to fire\n    // sourceset on. We have to watch for a source append\n    // as that can trigger a `sourceset` when the media element\n    // has no source\n    if (!sourcesetLoad(tech)) {\n      tech.triggerSourceset('');\n      firstSourceWatch(tech);\n    }\n\n    return retval;\n  };\n\n  if (el.currentSrc) {\n    tech.triggerSourceset(el.currentSrc);\n  } else if (!sourcesetLoad(tech)) {\n    firstSourceWatch(tech);\n  }\n\n  el.resetSourceset_ = function () {\n    el.resetSourceset_ = null;\n    el.load = oldLoad;\n    el.setAttribute = oldSetAttribute;\n    Object.defineProperty(el, 'src', srcDescriptor);\n    if (el.resetSourceWatch_) {\n      el.resetSourceWatch_();\n    }\n  };\n};\n\nvar _templateObject$2 = taggedTemplateLiteralLoose(['Text Tracks are being loaded from another origin but the crossorigin attribute isn\\'t used.\\n            This may prevent text tracks from loading.'], ['Text Tracks are being loaded from another origin but the crossorigin attribute isn\\'t used.\\n            This may prevent text tracks from loading.']);\n\n/**\n * @file html5.js\n */\n/**\n * HTML5 Media Controller - Wrapper for HTML5 Media API\n *\n * @mixes Tech~SouceHandlerAdditions\n * @extends Tech\n */\n\nvar Html5 = function (_Tech) {\n  inherits(Html5, _Tech);\n\n  /**\n   * Create an instance of this Tech.\n   *\n   * @param {Object} [options]\n   *        The key/value store of player options.\n   *\n   * @param {Component~ReadyCallback} ready\n   *        Callback function to call when the `HTML5` Tech is ready.\n   */\n  function Html5(options, ready) {\n    classCallCheck(this, Html5);\n\n    var _this = possibleConstructorReturn(this, _Tech.call(this, options, ready));\n\n    var source = options.source;\n    var crossoriginTracks = false;\n\n    // Set the source if one is provided\n    // 1) Check if the source is new (if not, we want to keep the original so playback isn't interrupted)\n    // 2) Check to see if the network state of the tag was failed at init, and if so, reset the source\n    // anyway so the error gets fired.\n    if (source && (_this.el_.currentSrc !== source.src || options.tag && options.tag.initNetworkState_ === 3)) {\n      _this.setSource(source);\n    } else {\n      _this.handleLateInit_(_this.el_);\n    }\n\n    // setup sourceset after late sourceset/init\n    if (options.enableSourceset) {\n      _this.setupSourcesetHandling_();\n    }\n\n    if (_this.el_.hasChildNodes()) {\n\n      var nodes = _this.el_.childNodes;\n      var nodesLength = nodes.length;\n      var removeNodes = [];\n\n      while (nodesLength--) {\n        var node = nodes[nodesLength];\n        var nodeName = node.nodeName.toLowerCase();\n\n        if (nodeName === 'track') {\n          if (!_this.featuresNativeTextTracks) {\n            // Empty video tag tracks so the built-in player doesn't use them also.\n            // This may not be fast enough to stop HTML5 browsers from reading the tags\n            // so we'll need to turn off any default tracks if we're manually doing\n            // captions and subtitles. videoElement.textTracks\n            removeNodes.push(node);\n          } else {\n            // store HTMLTrackElement and TextTrack to remote list\n            _this.remoteTextTrackEls().addTrackElement_(node);\n            _this.remoteTextTracks().addTrack(node.track);\n            _this.textTracks().addTrack(node.track);\n            if (!crossoriginTracks && !_this.el_.hasAttribute('crossorigin') && isCrossOrigin(node.src)) {\n              crossoriginTracks = true;\n            }\n          }\n        }\n      }\n\n      for (var i = 0; i < removeNodes.length; i++) {\n        _this.el_.removeChild(removeNodes[i]);\n      }\n    }\n\n    _this.proxyNativeTracks_();\n    if (_this.featuresNativeTextTracks && crossoriginTracks) {\n      log$1.warn(tsml(_templateObject$2));\n    }\n\n    // prevent iOS Safari from disabling metadata text tracks during native playback\n    _this.restoreMetadataTracksInIOSNativePlayer_();\n\n    // Determine if native controls should be used\n    // Our goal should be to get the custom controls on mobile solid everywhere\n    // so we can remove this all together. Right now this will block custom\n    // controls on touch enabled laptops like the Chrome Pixel\n    if ((TOUCH_ENABLED || IS_IPHONE || IS_NATIVE_ANDROID) && options.nativeControlsForTouch === true) {\n      _this.setControls(true);\n    }\n\n    // on iOS, we want to proxy `webkitbeginfullscreen` and `webkitendfullscreen`\n    // into a `fullscreenchange` event\n    _this.proxyWebkitFullscreen_();\n\n    _this.triggerReady();\n    return _this;\n  }\n\n  /**\n   * Dispose of `HTML5` media element and remove all tracks.\n   */\n\n\n  Html5.prototype.dispose = function dispose() {\n    if (this.el_ && this.el_.resetSourceset_) {\n      this.el_.resetSourceset_();\n    }\n    Html5.disposeMediaElement(this.el_);\n    this.options_ = null;\n\n    // tech will handle clearing of the emulated track list\n    _Tech.prototype.dispose.call(this);\n  };\n\n  /**\n   * Modify the media element so that we can detect when\n   * the source is changed. Fires `sourceset` just after the source has changed\n   */\n\n\n  Html5.prototype.setupSourcesetHandling_ = function setupSourcesetHandling_() {\n    setupSourceset(this);\n  };\n\n  /**\n   * When a captions track is enabled in the iOS Safari native player, all other\n   * tracks are disabled (including metadata tracks), which nulls all of their\n   * associated cue points. This will restore metadata tracks to their pre-fullscreen\n   * state in those cases so that cue points are not needlessly lost.\n   *\n   * @private\n   */\n\n\n  Html5.prototype.restoreMetadataTracksInIOSNativePlayer_ = function restoreMetadataTracksInIOSNativePlayer_() {\n    var textTracks = this.textTracks();\n    var metadataTracksPreFullscreenState = void 0;\n\n    // captures a snapshot of every metadata track's current state\n    var takeMetadataTrackSnapshot = function takeMetadataTrackSnapshot() {\n      metadataTracksPreFullscreenState = [];\n\n      for (var i = 0; i < textTracks.length; i++) {\n        var track = textTracks[i];\n\n        if (track.kind === 'metadata') {\n          metadataTracksPreFullscreenState.push({\n            track: track,\n            storedMode: track.mode\n          });\n        }\n      }\n    };\n\n    // snapshot each metadata track's initial state, and update the snapshot\n    // each time there is a track 'change' event\n    takeMetadataTrackSnapshot();\n    textTracks.addEventListener('change', takeMetadataTrackSnapshot);\n\n    this.on('dispose', function () {\n      return textTracks.removeEventListener('change', takeMetadataTrackSnapshot);\n    });\n\n    var restoreTrackMode = function restoreTrackMode() {\n      for (var i = 0; i < metadataTracksPreFullscreenState.length; i++) {\n        var storedTrack = metadataTracksPreFullscreenState[i];\n\n        if (storedTrack.track.mode === 'disabled' && storedTrack.track.mode !== storedTrack.storedMode) {\n          storedTrack.track.mode = storedTrack.storedMode;\n        }\n      }\n      // we only want this handler to be executed on the first 'change' event\n      textTracks.removeEventListener('change', restoreTrackMode);\n    };\n\n    // when we enter fullscreen playback, stop updating the snapshot and\n    // restore all track modes to their pre-fullscreen state\n    this.on('webkitbeginfullscreen', function () {\n      textTracks.removeEventListener('change', takeMetadataTrackSnapshot);\n\n      // remove the listener before adding it just in case it wasn't previously removed\n      textTracks.removeEventListener('change', restoreTrackMode);\n      textTracks.addEventListener('change', restoreTrackMode);\n    });\n\n    // start updating the snapshot again after leaving fullscreen\n    this.on('webkitendfullscreen', function () {\n      // remove the listener before adding it just in case it wasn't previously removed\n      textTracks.removeEventListener('change', takeMetadataTrackSnapshot);\n      textTracks.addEventListener('change', takeMetadataTrackSnapshot);\n\n      // remove the restoreTrackMode handler in case it wasn't triggered during fullscreen playback\n      textTracks.removeEventListener('change', restoreTrackMode);\n    });\n  };\n\n  /**\n   * Proxy all native track list events to our track lists if the browser we are playing\n   * in supports that type of track list.\n   *\n   * @private\n   */\n\n\n  Html5.prototype.proxyNativeTracks_ = function proxyNativeTracks_() {\n    var _this2 = this;\n\n    NORMAL.names.forEach(function (name) {\n      var props = NORMAL[name];\n      var elTracks = _this2.el()[props.getterName];\n      var techTracks = _this2[props.getterName]();\n\n      if (!_this2['featuresNative' + props.capitalName + 'Tracks'] || !elTracks || !elTracks.addEventListener) {\n        return;\n      }\n      var listeners = {\n        change: function change(e) {\n          techTracks.trigger({\n            type: 'change',\n            target: techTracks,\n            currentTarget: techTracks,\n            srcElement: techTracks\n          });\n        },\n        addtrack: function addtrack(e) {\n          techTracks.addTrack(e.track);\n        },\n        removetrack: function removetrack(e) {\n          techTracks.removeTrack(e.track);\n        }\n      };\n      var removeOldTracks = function removeOldTracks() {\n        var removeTracks = [];\n\n        for (var i = 0; i < techTracks.length; i++) {\n          var found = false;\n\n          for (var j = 0; j < elTracks.length; j++) {\n            if (elTracks[j] === techTracks[i]) {\n              found = true;\n              break;\n            }\n          }\n\n          if (!found) {\n            removeTracks.push(techTracks[i]);\n          }\n        }\n\n        while (removeTracks.length) {\n          techTracks.removeTrack(removeTracks.shift());\n        }\n      };\n\n      Object.keys(listeners).forEach(function (eventName) {\n        var listener = listeners[eventName];\n\n        elTracks.addEventListener(eventName, listener);\n        _this2.on('dispose', function (e) {\n          return elTracks.removeEventListener(eventName, listener);\n        });\n      });\n\n      // Remove (native) tracks that are not used anymore\n      _this2.on('loadstart', removeOldTracks);\n      _this2.on('dispose', function (e) {\n        return _this2.off('loadstart', removeOldTracks);\n      });\n    });\n  };\n\n  /**\n   * Create the `Html5` Tech's DOM element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  Html5.prototype.createEl = function createEl$$1() {\n    var el = this.options_.tag;\n\n    // Check if this browser supports moving the element into the box.\n    // On the iPhone video will break if you move the element,\n    // So we have to create a brand new element.\n    // If we ingested the player div, we do not need to move the media element.\n    if (!el || !(this.options_.playerElIngest || this.movingMediaElementInDOM)) {\n\n      // If the original tag is still there, clone and remove it.\n      if (el) {\n        var clone = el.cloneNode(true);\n\n        if (el.parentNode) {\n          el.parentNode.insertBefore(clone, el);\n        }\n        Html5.disposeMediaElement(el);\n        el = clone;\n      } else {\n        el = document.createElement('video');\n\n        // determine if native controls should be used\n        var tagAttributes = this.options_.tag && getAttributes(this.options_.tag);\n        var attributes = mergeOptions({}, tagAttributes);\n\n        if (!TOUCH_ENABLED || this.options_.nativeControlsForTouch !== true) {\n          delete attributes.controls;\n        }\n\n        setAttributes(el, assign(attributes, {\n          id: this.options_.techId,\n          'class': 'vjs-tech'\n        }));\n      }\n\n      el.playerId = this.options_.playerId;\n    }\n\n    if (typeof this.options_.preload !== 'undefined') {\n      setAttribute(el, 'preload', this.options_.preload);\n    }\n\n    // Update specific tag settings, in case they were overridden\n    // `autoplay` has to be *last* so that `muted` and `playsinline` are present\n    // when iOS/Safari or other browsers attempt to autoplay.\n    var settingsAttrs = ['loop', 'muted', 'playsinline', 'autoplay'];\n\n    for (var i = 0; i < settingsAttrs.length; i++) {\n      var attr = settingsAttrs[i];\n      var value = this.options_[attr];\n\n      if (typeof value !== 'undefined') {\n        if (value) {\n          setAttribute(el, attr, attr);\n        } else {\n          removeAttribute(el, attr);\n        }\n        el[attr] = value;\n      }\n    }\n\n    return el;\n  };\n\n  /**\n   * This will be triggered if the loadstart event has already fired, before videojs was\n   * ready. Two known examples of when this can happen are:\n   * 1. If we're loading the playback object after it has started loading\n   * 2. The media is already playing the (often with autoplay on) then\n   *\n   * This function will fire another loadstart so that videojs can catchup.\n   *\n   * @fires Tech#loadstart\n   *\n   * @return {undefined}\n   *         returns nothing.\n   */\n\n\n  Html5.prototype.handleLateInit_ = function handleLateInit_(el) {\n    if (el.networkState === 0 || el.networkState === 3) {\n      // The video element hasn't started loading the source yet\n      // or didn't find a source\n      return;\n    }\n\n    if (el.readyState === 0) {\n      // NetworkState is set synchronously BUT loadstart is fired at the\n      // end of the current stack, usually before setInterval(fn, 0).\n      // So at this point we know loadstart may have already fired or is\n      // about to fire, and either way the player hasn't seen it yet.\n      // We don't want to fire loadstart prematurely here and cause a\n      // double loadstart so we'll wait and see if it happens between now\n      // and the next loop, and fire it if not.\n      // HOWEVER, we also want to make sure it fires before loadedmetadata\n      // which could also happen between now and the next loop, so we'll\n      // watch for that also.\n      var loadstartFired = false;\n      var setLoadstartFired = function setLoadstartFired() {\n        loadstartFired = true;\n      };\n\n      this.on('loadstart', setLoadstartFired);\n\n      var triggerLoadstart = function triggerLoadstart() {\n        // We did miss the original loadstart. Make sure the player\n        // sees loadstart before loadedmetadata\n        if (!loadstartFired) {\n          this.trigger('loadstart');\n        }\n      };\n\n      this.on('loadedmetadata', triggerLoadstart);\n\n      this.ready(function () {\n        this.off('loadstart', setLoadstartFired);\n        this.off('loadedmetadata', triggerLoadstart);\n\n        if (!loadstartFired) {\n          // We did miss the original native loadstart. Fire it now.\n          this.trigger('loadstart');\n        }\n      });\n\n      return;\n    }\n\n    // From here on we know that loadstart already fired and we missed it.\n    // The other readyState events aren't as much of a problem if we double\n    // them, so not going to go to as much trouble as loadstart to prevent\n    // that unless we find reason to.\n    var eventsToTrigger = ['loadstart'];\n\n    // loadedmetadata: newly equal to HAVE_METADATA (1) or greater\n    eventsToTrigger.push('loadedmetadata');\n\n    // loadeddata: newly increased to HAVE_CURRENT_DATA (2) or greater\n    if (el.readyState >= 2) {\n      eventsToTrigger.push('loadeddata');\n    }\n\n    // canplay: newly increased to HAVE_FUTURE_DATA (3) or greater\n    if (el.readyState >= 3) {\n      eventsToTrigger.push('canplay');\n    }\n\n    // canplaythrough: newly equal to HAVE_ENOUGH_DATA (4)\n    if (el.readyState >= 4) {\n      eventsToTrigger.push('canplaythrough');\n    }\n\n    // We still need to give the player time to add event listeners\n    this.ready(function () {\n      eventsToTrigger.forEach(function (type) {\n        this.trigger(type);\n      }, this);\n    });\n  };\n\n  /**\n   * Set current time for the `HTML5` tech.\n   *\n   * @param {number} seconds\n   *        Set the current time of the media to this.\n   */\n\n\n  Html5.prototype.setCurrentTime = function setCurrentTime(seconds) {\n    try {\n      this.el_.currentTime = seconds;\n    } catch (e) {\n      log$1(e, 'Video is not ready. (Video.js)');\n      // this.warning(VideoJS.warnings.videoNotReady);\n    }\n  };\n\n  /**\n   * Get the current duration of the HTML5 media element.\n   *\n   * @return {number}\n   *         The duration of the media or 0 if there is no duration.\n   */\n\n\n  Html5.prototype.duration = function duration() {\n    var _this3 = this;\n\n    // Android Chrome will report duration as Infinity for VOD HLS until after\n    // playback has started, which triggers the live display erroneously.\n    // Return NaN if playback has not started and trigger a durationupdate once\n    // the duration can be reliably known.\n    if (this.el_.duration === Infinity && IS_ANDROID && IS_CHROME && this.el_.currentTime === 0) {\n      // Wait for the first `timeupdate` with currentTime > 0 - there may be\n      // several with 0\n      var checkProgress = function checkProgress() {\n        if (_this3.el_.currentTime > 0) {\n          // Trigger durationchange for genuinely live video\n          if (_this3.el_.duration === Infinity) {\n            _this3.trigger('durationchange');\n          }\n          _this3.off('timeupdate', checkProgress);\n        }\n      };\n\n      this.on('timeupdate', checkProgress);\n      return NaN;\n    }\n    return this.el_.duration || NaN;\n  };\n\n  /**\n   * Get the current width of the HTML5 media element.\n   *\n   * @return {number}\n   *         The width of the HTML5 media element.\n   */\n\n\n  Html5.prototype.width = function width() {\n    return this.el_.offsetWidth;\n  };\n\n  /**\n   * Get the current height of the HTML5 media element.\n   *\n   * @return {number}\n   *         The heigth of the HTML5 media element.\n   */\n\n\n  Html5.prototype.height = function height() {\n    return this.el_.offsetHeight;\n  };\n\n  /**\n   * Proxy iOS `webkitbeginfullscreen` and `webkitendfullscreen` into\n   * `fullscreenchange` event.\n   *\n   * @private\n   * @fires fullscreenchange\n   * @listens webkitendfullscreen\n   * @listens webkitbeginfullscreen\n   * @listens webkitbeginfullscreen\n   */\n\n\n  Html5.prototype.proxyWebkitFullscreen_ = function proxyWebkitFullscreen_() {\n    var _this4 = this;\n\n    if (!('webkitDisplayingFullscreen' in this.el_)) {\n      return;\n    }\n\n    var endFn = function endFn() {\n      this.trigger('fullscreenchange', { isFullscreen: false });\n    };\n\n    var beginFn = function beginFn() {\n      if ('webkitPresentationMode' in this.el_ && this.el_.webkitPresentationMode !== 'picture-in-picture') {\n        this.one('webkitendfullscreen', endFn);\n\n        this.trigger('fullscreenchange', { isFullscreen: true });\n      }\n    };\n\n    this.on('webkitbeginfullscreen', beginFn);\n    this.on('dispose', function () {\n      _this4.off('webkitbeginfullscreen', beginFn);\n      _this4.off('webkitendfullscreen', endFn);\n    });\n  };\n\n  /**\n   * Check if fullscreen is supported on the current playback device.\n   *\n   * @return {boolean}\n   *         - True if fullscreen is supported.\n   *         - False if fullscreen is not supported.\n   */\n\n\n  Html5.prototype.supportsFullScreen = function supportsFullScreen() {\n    if (typeof this.el_.webkitEnterFullScreen === 'function') {\n      var userAgent = window.navigator && window.navigator.userAgent || '';\n\n      // Seems to be broken in Chromium/Chrome && Safari in Leopard\n      if (/Android/.test(userAgent) || !/Chrome|Mac OS X 10.5/.test(userAgent)) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  /**\n   * Request that the `HTML5` Tech enter fullscreen.\n   */\n\n\n  Html5.prototype.enterFullScreen = function enterFullScreen() {\n    var video = this.el_;\n\n    if (video.paused && video.networkState <= video.HAVE_METADATA) {\n      // attempt to prime the video element for programmatic access\n      // this isn't necessary on the desktop but shouldn't hurt\n      this.el_.play();\n\n      // playing and pausing synchronously during the transition to fullscreen\n      // can get iOS ~6.1 devices into a play/pause loop\n      this.setTimeout(function () {\n        video.pause();\n        video.webkitEnterFullScreen();\n      }, 0);\n    } else {\n      video.webkitEnterFullScreen();\n    }\n  };\n\n  /**\n   * Request that the `HTML5` Tech exit fullscreen.\n   */\n\n\n  Html5.prototype.exitFullScreen = function exitFullScreen() {\n    this.el_.webkitExitFullScreen();\n  };\n\n  /**\n   * A getter/setter for the `Html5` Tech's source object.\n   * > Note: Please use {@link Html5#setSource}\n   *\n   * @param {Tech~SourceObject} [src]\n   *        The source object you want to set on the `HTML5` techs element.\n   *\n   * @return {Tech~SourceObject|undefined}\n   *         - The current source object when a source is not passed in.\n   *         - undefined when setting\n   *\n   * @deprecated Since version 5.\n   */\n\n\n  Html5.prototype.src = function src(_src) {\n    if (_src === undefined) {\n      return this.el_.src;\n    }\n\n    // Setting src through `src` instead of `setSrc` will be deprecated\n    this.setSrc(_src);\n  };\n\n  /**\n   * Reset the tech by removing all sources and then calling\n   * {@link Html5.resetMediaElement}.\n   */\n\n\n  Html5.prototype.reset = function reset() {\n    Html5.resetMediaElement(this.el_);\n  };\n\n  /**\n   * Get the current source on the `HTML5` Tech. Falls back to returning the source from\n   * the HTML5 media element.\n   *\n   * @return {Tech~SourceObject}\n   *         The current source object from the HTML5 tech. With a fallback to the\n   *         elements source.\n   */\n\n\n  Html5.prototype.currentSrc = function currentSrc() {\n    if (this.currentSource_) {\n      return this.currentSource_.src;\n    }\n    return this.el_.currentSrc;\n  };\n\n  /**\n   * Set controls attribute for the HTML5 media Element.\n   *\n   * @param {string} val\n   *        Value to set the controls attribute to\n   */\n\n\n  Html5.prototype.setControls = function setControls(val) {\n    this.el_.controls = !!val;\n  };\n\n  /**\n   * Create and returns a remote {@link TextTrack} object.\n   *\n   * @param {string} kind\n   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata)\n   *\n   * @param {string} [label]\n   *        Label to identify the text track\n   *\n   * @param {string} [language]\n   *        Two letter language abbreviation\n   *\n   * @return {TextTrack}\n   *         The TextTrack that gets created.\n   */\n\n\n  Html5.prototype.addTextTrack = function addTextTrack(kind, label, language) {\n    if (!this.featuresNativeTextTracks) {\n      return _Tech.prototype.addTextTrack.call(this, kind, label, language);\n    }\n\n    return this.el_.addTextTrack(kind, label, language);\n  };\n\n  /**\n   * Creates either native TextTrack or an emulated TextTrack depending\n   * on the value of `featuresNativeTextTracks`\n   *\n   * @param {Object} options\n   *        The object should contain the options to intialize the TextTrack with.\n   *\n   * @param {string} [options.kind]\n   *        `TextTrack` kind (subtitles, captions, descriptions, chapters, or metadata).\n   *\n   * @param {string} [options.label].\n   *        Label to identify the text track\n   *\n   * @param {string} [options.language]\n   *        Two letter language abbreviation.\n   *\n   * @param {boolean} [options.default]\n   *        Default this track to on.\n   *\n   * @param {string} [options.id]\n   *        The internal id to assign this track.\n   *\n   * @param {string} [options.src]\n   *        A source url for the track.\n   *\n   * @return {HTMLTrackElement}\n   *         The track element that gets created.\n   */\n\n\n  Html5.prototype.createRemoteTextTrack = function createRemoteTextTrack(options) {\n    if (!this.featuresNativeTextTracks) {\n      return _Tech.prototype.createRemoteTextTrack.call(this, options);\n    }\n    var htmlTrackElement = document.createElement('track');\n\n    if (options.kind) {\n      htmlTrackElement.kind = options.kind;\n    }\n    if (options.label) {\n      htmlTrackElement.label = options.label;\n    }\n    if (options.language || options.srclang) {\n      htmlTrackElement.srclang = options.language || options.srclang;\n    }\n    if (options['default']) {\n      htmlTrackElement['default'] = options['default'];\n    }\n    if (options.id) {\n      htmlTrackElement.id = options.id;\n    }\n    if (options.src) {\n      htmlTrackElement.src = options.src;\n    }\n\n    return htmlTrackElement;\n  };\n\n  /**\n   * Creates a remote text track object and returns an html track element.\n   *\n   * @param {Object} options The object should contain values for\n   * kind, language, label, and src (location of the WebVTT file)\n   * @param {Boolean} [manualCleanup=true] if set to false, the TextTrack will be\n   * automatically removed from the video element whenever the source changes\n   * @return {HTMLTrackElement} An Html Track Element.\n   * This can be an emulated {@link HTMLTrackElement} or a native one.\n   * @deprecated The default value of the \"manualCleanup\" parameter will default\n   * to \"false\" in upcoming versions of Video.js\n   */\n\n\n  Html5.prototype.addRemoteTextTrack = function addRemoteTextTrack(options, manualCleanup) {\n    var htmlTrackElement = _Tech.prototype.addRemoteTextTrack.call(this, options, manualCleanup);\n\n    if (this.featuresNativeTextTracks) {\n      this.el().appendChild(htmlTrackElement);\n    }\n\n    return htmlTrackElement;\n  };\n\n  /**\n   * Remove remote `TextTrack` from `TextTrackList` object\n   *\n   * @param {TextTrack} track\n   *        `TextTrack` object to remove\n   */\n\n\n  Html5.prototype.removeRemoteTextTrack = function removeRemoteTextTrack(track) {\n    _Tech.prototype.removeRemoteTextTrack.call(this, track);\n\n    if (this.featuresNativeTextTracks) {\n      var tracks = this.$$('track');\n\n      var i = tracks.length;\n\n      while (i--) {\n        if (track === tracks[i] || track === tracks[i].track) {\n          this.el().removeChild(tracks[i]);\n        }\n      }\n    }\n  };\n\n  /**\n   * Gets available media playback quality metrics as specified by the W3C's Media\n   * Playback Quality API.\n   *\n   * @see [Spec]{@link https://wicg.github.io/media-playback-quality}\n   *\n   * @return {Object}\n   *         An object with supported media playback quality metrics\n   */\n\n\n  Html5.prototype.getVideoPlaybackQuality = function getVideoPlaybackQuality() {\n    if (typeof this.el().getVideoPlaybackQuality === 'function') {\n      return this.el().getVideoPlaybackQuality();\n    }\n\n    var videoPlaybackQuality = {};\n\n    if (typeof this.el().webkitDroppedFrameCount !== 'undefined' && typeof this.el().webkitDecodedFrameCount !== 'undefined') {\n      videoPlaybackQuality.droppedVideoFrames = this.el().webkitDroppedFrameCount;\n      videoPlaybackQuality.totalVideoFrames = this.el().webkitDecodedFrameCount;\n    }\n\n    if (window.performance && typeof window.performance.now === 'function') {\n      videoPlaybackQuality.creationTime = window.performance.now();\n    } else if (window.performance && window.performance.timing && typeof window.performance.timing.navigationStart === 'number') {\n      videoPlaybackQuality.creationTime = window.Date.now() - window.performance.timing.navigationStart;\n    }\n\n    return videoPlaybackQuality;\n  };\n\n  return Html5;\n}(Tech);\n\n/* HTML5 Support Testing ---------------------------------------------------- */\n\nif (isReal()) {\n\n  /**\n   * Element for testing browser HTML5 media capabilities\n   *\n   * @type {Element}\n   * @constant\n   * @private\n   */\n  Html5.TEST_VID = document.createElement('video');\n  var track = document.createElement('track');\n\n  track.kind = 'captions';\n  track.srclang = 'en';\n  track.label = 'English';\n  Html5.TEST_VID.appendChild(track);\n}\n\n/**\n * Check if HTML5 media is supported by this browser/device.\n *\n * @return {boolean}\n *         - True if HTML5 media is supported.\n *         - False if HTML5 media is not supported.\n */\nHtml5.isSupported = function () {\n  // IE9 with no Media Player is a LIAR! (#984)\n  try {\n    Html5.TEST_VID.volume = 0.5;\n  } catch (e) {\n    return false;\n  }\n\n  return !!(Html5.TEST_VID && Html5.TEST_VID.canPlayType);\n};\n\n/**\n * Check if the tech can support the given type\n *\n * @param {string} type\n *        The mimetype to check\n * @return {string} 'probably', 'maybe', or '' (empty string)\n */\nHtml5.canPlayType = function (type) {\n  return Html5.TEST_VID.canPlayType(type);\n};\n\n/**\n * Check if the tech can support the given source\n * @param {Object} srcObj\n *        The source object\n * @param {Object} options\n *        The options passed to the tech\n * @return {string} 'probably', 'maybe', or '' (empty string)\n */\nHtml5.canPlaySource = function (srcObj, options) {\n  return Html5.canPlayType(srcObj.type);\n};\n\n/**\n * Check if the volume can be changed in this browser/device.\n * Volume cannot be changed in a lot of mobile devices.\n * Specifically, it can't be changed from 1 on iOS.\n *\n * @return {boolean}\n *         - True if volume can be controlled\n *         - False otherwise\n */\nHtml5.canControlVolume = function () {\n  // IE will error if Windows Media Player not installed #3315\n  try {\n    var volume = Html5.TEST_VID.volume;\n\n    Html5.TEST_VID.volume = volume / 2 + 0.1;\n    return volume !== Html5.TEST_VID.volume;\n  } catch (e) {\n    return false;\n  }\n};\n\n/**\n * Check if the volume can be muted in this browser/device.\n * Some devices, e.g. iOS, don't allow changing volume\n * but permits muting/unmuting.\n *\n * @return {bolean}\n *      - True if volume can be muted\n *      - False otherwise\n */\nHtml5.canMuteVolume = function () {\n  try {\n    var muted = Html5.TEST_VID.muted;\n\n    // in some versions of iOS muted property doesn't always\n    // work, so we want to set both property and attribute\n    Html5.TEST_VID.muted = !muted;\n    if (Html5.TEST_VID.muted) {\n      setAttribute(Html5.TEST_VID, 'muted', 'muted');\n    } else {\n      removeAttribute(Html5.TEST_VID, 'muted', 'muted');\n    }\n    return muted !== Html5.TEST_VID.muted;\n  } catch (e) {\n    return false;\n  }\n};\n\n/**\n * Check if the playback rate can be changed in this browser/device.\n *\n * @return {boolean}\n *         - True if playback rate can be controlled\n *         - False otherwise\n */\nHtml5.canControlPlaybackRate = function () {\n  // Playback rate API is implemented in Android Chrome, but doesn't do anything\n  // https://github.com/videojs/video.js/issues/3180\n  if (IS_ANDROID && IS_CHROME && CHROME_VERSION < 58) {\n    return false;\n  }\n  // IE will error if Windows Media Player not installed #3315\n  try {\n    var playbackRate = Html5.TEST_VID.playbackRate;\n\n    Html5.TEST_VID.playbackRate = playbackRate / 2 + 0.1;\n    return playbackRate !== Html5.TEST_VID.playbackRate;\n  } catch (e) {\n    return false;\n  }\n};\n\n/**\n * Check if we can override a video/audio elements attributes, with\n * Object.defineProperty.\n *\n * @return {boolean}\n *         - True if builtin attributes can be overriden\n *         - False otherwise\n */\nHtml5.canOverrideAttributes = function () {\n  if (IS_IE8) {\n    return false;\n  }\n  // if we cannot overwrite the src/innerHTML property, there is no support\n  // iOS 7 safari for instance cannot do this.\n  try {\n    var noop = function noop() {};\n\n    Object.defineProperty(document.createElement('video'), 'src', { get: noop, set: noop });\n    Object.defineProperty(document.createElement('audio'), 'src', { get: noop, set: noop });\n    Object.defineProperty(document.createElement('video'), 'innerHTML', { get: noop, set: noop });\n    Object.defineProperty(document.createElement('audio'), 'innerHTML', { get: noop, set: noop });\n  } catch (e) {\n    return false;\n  }\n\n  return true;\n};\n\n/**\n * Check to see if native `TextTrack`s are supported by this browser/device.\n *\n * @return {boolean}\n *         - True if native `TextTrack`s are supported.\n *         - False otherwise\n */\nHtml5.supportsNativeTextTracks = function () {\n  return IS_ANY_SAFARI || IS_IOS && IS_CHROME;\n};\n\n/**\n * Check to see if native `VideoTrack`s are supported by this browser/device\n *\n * @return {boolean}\n *        - True if native `VideoTrack`s are supported.\n *        - False otherwise\n */\nHtml5.supportsNativeVideoTracks = function () {\n  return !!(Html5.TEST_VID && Html5.TEST_VID.videoTracks);\n};\n\n/**\n * Check to see if native `AudioTrack`s are supported by this browser/device\n *\n * @return {boolean}\n *        - True if native `AudioTrack`s are supported.\n *        - False otherwise\n */\nHtml5.supportsNativeAudioTracks = function () {\n  return !!(Html5.TEST_VID && Html5.TEST_VID.audioTracks);\n};\n\n/**\n * An array of events available on the Html5 tech.\n *\n * @private\n * @type {Array}\n */\nHtml5.Events = ['loadstart', 'suspend', 'abort', 'error', 'emptied', 'stalled', 'loadedmetadata', 'loadeddata', 'canplay', 'canplaythrough', 'playing', 'waiting', 'seeking', 'seeked', 'ended', 'durationchange', 'timeupdate', 'progress', 'play', 'pause', 'ratechange', 'resize', 'volumechange'];\n\n/**\n * Boolean indicating whether the `Tech` supports volume control.\n *\n * @type {boolean}\n * @default {@link Html5.canControlVolume}\n */\nHtml5.prototype.featuresVolumeControl = Html5.canControlVolume();\n\n/**\n * Boolean indicating whether the `Tech` supports muting volume.\n *\n * @type {bolean}\n * @default {@link Html5.canMuteVolume}\n */\nHtml5.prototype.featuresMuteControl = Html5.canMuteVolume();\n\n/**\n * Boolean indicating whether the `Tech` supports changing the speed at which the media\n * plays. Examples:\n *   - Set player to play 2x (twice) as fast\n *   - Set player to play 0.5x (half) as fast\n *\n * @type {boolean}\n * @default {@link Html5.canControlPlaybackRate}\n */\nHtml5.prototype.featuresPlaybackRate = Html5.canControlPlaybackRate();\n\n/**\n * Boolean indicating wether the `Tech` supports the `sourceset` event.\n *\n * @type {boolean}\n * @default\n */\nHtml5.prototype.featuresSourceset = Html5.canOverrideAttributes();\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports the media element\n * moving in the DOM. iOS breaks if you move the media element, so this is set this to\n * false there. Everywhere else this should be true.\n *\n * @type {boolean}\n * @default\n */\nHtml5.prototype.movingMediaElementInDOM = !IS_IOS;\n\n// TODO: Previous comment: No longer appears to be used. Can probably be removed.\n//       Is this true?\n/**\n * Boolean indicating whether the `HTML5` tech currently supports automatic media resize\n * when going into fullscreen.\n *\n * @type {boolean}\n * @default\n */\nHtml5.prototype.featuresFullscreenResize = true;\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports the progress event.\n * If this is false, manual `progress` events will be triggred instead.\n *\n * @type {boolean}\n * @default\n */\nHtml5.prototype.featuresProgressEvents = true;\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports the timeupdate event.\n * If this is false, manual `timeupdate` events will be triggred instead.\n *\n * @default\n */\nHtml5.prototype.featuresTimeupdateEvents = true;\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports native `TextTrack`s.\n *\n * @type {boolean}\n * @default {@link Html5.supportsNativeTextTracks}\n */\nHtml5.prototype.featuresNativeTextTracks = Html5.supportsNativeTextTracks();\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports native `VideoTrack`s.\n *\n * @type {boolean}\n * @default {@link Html5.supportsNativeVideoTracks}\n */\nHtml5.prototype.featuresNativeVideoTracks = Html5.supportsNativeVideoTracks();\n\n/**\n * Boolean indicating whether the `HTML5` tech currently supports native `AudioTrack`s.\n *\n * @type {boolean}\n * @default {@link Html5.supportsNativeAudioTracks}\n */\nHtml5.prototype.featuresNativeAudioTracks = Html5.supportsNativeAudioTracks();\n\n// HTML5 Feature detection and Device Fixes --------------------------------- //\nvar canPlayType = Html5.TEST_VID && Html5.TEST_VID.constructor.prototype.canPlayType;\nvar mpegurlRE = /^application\\/(?:x-|vnd\\.apple\\.)mpegurl/i;\nvar mp4RE = /^video\\/mp4/i;\n\nHtml5.patchCanPlayType = function () {\n\n  // Android 4.0 and above can play HLS to some extent but it reports being unable to do so\n  // Firefox and Chrome report correctly\n  if (ANDROID_VERSION >= 4.0 && !IS_FIREFOX && !IS_CHROME) {\n    Html5.TEST_VID.constructor.prototype.canPlayType = function (type) {\n      if (type && mpegurlRE.test(type)) {\n        return 'maybe';\n      }\n      return canPlayType.call(this, type);\n    };\n\n    // Override Android 2.2 and less canPlayType method which is broken\n  } else if (IS_OLD_ANDROID) {\n    Html5.TEST_VID.constructor.prototype.canPlayType = function (type) {\n      if (type && mp4RE.test(type)) {\n        return 'maybe';\n      }\n      return canPlayType.call(this, type);\n    };\n  }\n};\n\nHtml5.unpatchCanPlayType = function () {\n  var r = Html5.TEST_VID.constructor.prototype.canPlayType;\n\n  Html5.TEST_VID.constructor.prototype.canPlayType = canPlayType;\n  return r;\n};\n\n// by default, patch the media element\nHtml5.patchCanPlayType();\n\nHtml5.disposeMediaElement = function (el) {\n  if (!el) {\n    return;\n  }\n\n  if (el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n\n  // remove any child track or source nodes to prevent their loading\n  while (el.hasChildNodes()) {\n    el.removeChild(el.firstChild);\n  }\n\n  // remove any src reference. not setting `src=''` because that causes a warning\n  // in firefox\n  el.removeAttribute('src');\n\n  // force the media element to update its loading state by calling load()\n  // however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)\n  if (typeof el.load === 'function') {\n    // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)\n    (function () {\n      try {\n        el.load();\n      } catch (e) {\n        // not supported\n      }\n    })();\n  }\n};\n\nHtml5.resetMediaElement = function (el) {\n  if (!el) {\n    return;\n  }\n\n  var sources = el.querySelectorAll('source');\n  var i = sources.length;\n\n  while (i--) {\n    el.removeChild(sources[i]);\n  }\n\n  // remove any src reference.\n  // not setting `src=''` because that throws an error\n  el.removeAttribute('src');\n\n  if (typeof el.load === 'function') {\n    // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)\n    (function () {\n      try {\n        el.load();\n      } catch (e) {\n        // satisfy linter\n      }\n    })();\n  }\n};\n\n/* Native HTML5 element property wrapping ----------------------------------- */\n// Wrap native boolean attributes with getters that check both property and attribute\n// The list is as followed:\n// muted, defaultMuted, autoplay, controls, loop, playsinline\n[\n/**\n * Get the value of `muted` from the media element. `muted` indicates\n * that the volume for the media should be set to silent. This does not actually change\n * the `volume` attribute.\n *\n * @method Html5#muted\n * @return {boolean}\n *         - True if the value of `volume` should be ignored and the audio set to silent.\n *         - False if the value of `volume` should be used.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}\n */\n'muted',\n\n/**\n * Get the value of `defaultMuted` from the media element. `defaultMuted` indicates\n * whether the media should start muted or not. Only changes the default state of the\n * media. `muted` and `defaultMuted` can have different values. {@link Html5#muted} indicates the\n * current state.\n *\n * @method Html5#defaultMuted\n * @return {boolean}\n *         - The value of `defaultMuted` from the media element.\n *         - True indicates that the media should start muted.\n *         - False indicates that the media should not start muted\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}\n */\n'defaultMuted',\n\n/**\n * Get the value of `autoplay` from the media element. `autoplay` indicates\n * that the media should start to play as soon as the page is ready.\n *\n * @method Html5#autoplay\n * @return {boolean}\n *         - The value of `autoplay` from the media element.\n *         - True indicates that the media should start as soon as the page loads.\n *         - False indicates that the media should not start as soon as the page loads.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}\n */\n'autoplay',\n\n/**\n * Get the value of `controls` from the media element. `controls` indicates\n * whether the native media controls should be shown or hidden.\n *\n * @method Html5#controls\n * @return {boolean}\n *         - The value of `controls` from the media element.\n *         - True indicates that native controls should be showing.\n *         - False indicates that native controls should be hidden.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-controls}\n */\n'controls',\n\n/**\n * Get the value of `loop` from the media element. `loop` indicates\n * that the media should return to the start of the media and continue playing once\n * it reaches the end.\n *\n * @method Html5#loop\n * @return {boolean}\n *         - The value of `loop` from the media element.\n *         - True indicates that playback should seek back to start once\n *           the end of a media is reached.\n *         - False indicates that playback should not loop back to the start when the\n *           end of the media is reached.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}\n */\n'loop',\n\n/**\n * Get the value of `playsinline` from the media element. `playsinline` indicates\n * to the browser that non-fullscreen playback is preferred when fullscreen\n * playback is the native default, such as in iOS Safari.\n *\n * @method Html5#playsinline\n * @return {boolean}\n *         - The value of `playsinline` from the media element.\n *         - True indicates that the media should play inline.\n *         - False indicates that the media should not play inline.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}\n */\n'playsinline'].forEach(function (prop) {\n  Html5.prototype[prop] = function () {\n    return this.el_[prop] || this.el_.hasAttribute(prop);\n  };\n});\n\n// Wrap native boolean attributes with setters that set both property and attribute\n// The list is as followed:\n// setMuted, setDefaultMuted, setAutoplay, setLoop, setPlaysinline\n// setControls is special-cased above\n[\n/**\n * Set the value of `muted` on the media element. `muted` indicates that the current\n * audio level should be silent.\n *\n * @method Html5#setMuted\n * @param {boolean} muted\n *        - True if the audio should be set to silent\n *        - False otherwise\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}\n */\n'muted',\n\n/**\n * Set the value of `defaultMuted` on the media element. `defaultMuted` indicates that the current\n * audio level should be silent, but will only effect the muted level on intial playback..\n *\n * @method Html5.prototype.setDefaultMuted\n * @param {boolean} defaultMuted\n *        - True if the audio should be set to silent\n *        - False otherwise\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}\n */\n'defaultMuted',\n\n/**\n * Set the value of `autoplay` on the media element. `autoplay` indicates\n * that the media should start to play as soon as the page is ready.\n *\n * @method Html5#setAutoplay\n * @param {boolean} autoplay\n *         - True indicates that the media should start as soon as the page loads.\n *         - False indicates that the media should not start as soon as the page loads.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}\n */\n'autoplay',\n\n/**\n * Set the value of `loop` on the media element. `loop` indicates\n * that the media should return to the start of the media and continue playing once\n * it reaches the end.\n *\n * @method Html5#setLoop\n * @param {boolean} loop\n *         - True indicates that playback should seek back to start once\n *           the end of a media is reached.\n *         - False indicates that playback should not loop back to the start when the\n *           end of the media is reached.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}\n */\n'loop',\n\n/**\n * Set the value of `playsinline` from the media element. `playsinline` indicates\n * to the browser that non-fullscreen playback is preferred when fullscreen\n * playback is the native default, such as in iOS Safari.\n *\n * @method Html5#setPlaysinline\n * @param {boolean} playsinline\n *         - True indicates that the media should play inline.\n *         - False indicates that the media should not play inline.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}\n */\n'playsinline'].forEach(function (prop) {\n  Html5.prototype['set' + toTitleCase(prop)] = function (v) {\n    this.el_[prop] = v;\n\n    if (v) {\n      this.el_.setAttribute(prop, prop);\n    } else {\n      this.el_.removeAttribute(prop);\n    }\n  };\n});\n\n// Wrap native properties with a getter\n// The list is as followed\n// paused, currentTime, buffered, volume, poster, preload, error, seeking\n// seekable, ended, playbackRate, defaultPlaybackRate, played, networkState\n// readyState, videoWidth, videoHeight\n[\n/**\n * Get the value of `paused` from the media element. `paused` indicates whether the media element\n * is currently paused or not.\n *\n * @method Html5#paused\n * @return {boolean}\n *         The value of `paused` from the media element.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-paused}\n */\n'paused',\n\n/**\n * Get the value of `currentTime` from the media element. `currentTime` indicates\n * the current second that the media is at in playback.\n *\n * @method Html5#currentTime\n * @return {number}\n *         The value of `currentTime` from the media element.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-currenttime}\n */\n'currentTime',\n\n/**\n * Get the value of `buffered` from the media element. `buffered` is a `TimeRange`\n * object that represents the parts of the media that are already downloaded and\n * available for playback.\n *\n * @method Html5#buffered\n * @return {TimeRange}\n *         The value of `buffered` from the media element.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-buffered}\n */\n'buffered',\n\n/**\n * Get the value of `volume` from the media element. `volume` indicates\n * the current playback volume of audio for a media. `volume` will be a value from 0\n * (silent) to 1 (loudest and default).\n *\n * @method Html5#volume\n * @return {number}\n *         The value of `volume` from the media element. Value will be between 0-1.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}\n */\n'volume',\n\n/**\n * Get the value of `poster` from the media element. `poster` indicates\n * that the url of an image file that can/will be shown when no media data is available.\n *\n * @method Html5#poster\n * @return {string}\n *         The value of `poster` from the media element. Value will be a url to an\n *         image.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-video-poster}\n */\n'poster',\n\n/**\n * Get the value of `preload` from the media element. `preload` indicates\n * what should download before the media is interacted with. It can have the following\n * values:\n * - none: nothing should be downloaded\n * - metadata: poster and the first few frames of the media may be downloaded to get\n *   media dimensions and other metadata\n * - auto: allow the media and metadata for the media to be downloaded before\n *    interaction\n *\n * @method Html5#preload\n * @return {string}\n *         The value of `preload` from the media element. Will be 'none', 'metadata',\n *         or 'auto'.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}\n */\n'preload',\n\n/**\n * Get the value of the `error` from the media element. `error` indicates any\n * MediaError that may have occured during playback. If error returns null there is no\n * current error.\n *\n * @method Html5#error\n * @return {MediaError|null}\n *         The value of `error` from the media element. Will be `MediaError` if there\n *         is a current error and null otherwise.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-error}\n */\n'error',\n\n/**\n * Get the value of `seeking` from the media element. `seeking` indicates whether the\n * media is currently seeking to a new position or not.\n *\n * @method Html5#seeking\n * @return {boolean}\n *         - The value of `seeking` from the media element.\n *         - True indicates that the media is currently seeking to a new position.\n *         - Flase indicates that the media is not seeking to a new position at this time.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seeking}\n */\n'seeking',\n\n/**\n * Get the value of `seekable` from the media element. `seekable` returns a\n * `TimeRange` object indicating ranges of time that can currently be `seeked` to.\n *\n * @method Html5#seekable\n * @return {TimeRange}\n *         The value of `seekable` from the media element. A `TimeRange` object\n *         indicating the current ranges of time that can be seeked to.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seekable}\n */\n'seekable',\n\n/**\n * Get the value of `ended` from the media element. `ended` indicates whether\n * the media has reached the end or not.\n *\n * @method Html5#ended\n * @return {boolean}\n *         - The value of `ended` from the media element.\n *         - True indicates that the media has ended.\n *         - False indicates that the media has not ended.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-ended}\n */\n'ended',\n\n/**\n * Get the value of `playbackRate` from the media element. `playbackRate` indicates\n * the rate at which the media is currently playing back. Examples:\n *   - if playbackRate is set to 2, media will play twice as fast.\n *   - if playbackRate is set to 0.5, media will play half as fast.\n *\n * @method Html5#playbackRate\n * @return {number}\n *         The value of `playbackRate` from the media element. A number indicating\n *         the current playback speed of the media, where 1 is normal speed.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}\n */\n'playbackRate',\n\n/**\n * Get the value of `defaultPlaybackRate` from the media element. `defaultPlaybackRate` indicates\n * the rate at which the media is currently playing back. This value will not indicate the current\n * `playbackRate` after playback has started, use {@link Html5#playbackRate} for that.\n *\n * Examples:\n *   - if defaultPlaybackRate is set to 2, media will play twice as fast.\n *   - if defaultPlaybackRate is set to 0.5, media will play half as fast.\n *\n * @method Html5.prototype.defaultPlaybackRate\n * @return {number}\n *         The value of `defaultPlaybackRate` from the media element. A number indicating\n *         the current playback speed of the media, where 1 is normal speed.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}\n */\n'defaultPlaybackRate',\n\n/**\n * Get the value of `played` from the media element. `played` returns a `TimeRange`\n * object representing points in the media timeline that have been played.\n *\n * @method Html5#played\n * @return {TimeRange}\n *         The value of `played` from the media element. A `TimeRange` object indicating\n *         the ranges of time that have been played.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-played}\n */\n'played',\n\n/**\n * Get the value of `networkState` from the media element. `networkState` indicates\n * the current network state. It returns an enumeration from the following list:\n * - 0: NETWORK_EMPTY\n * - 1: NEWORK_IDLE\n * - 2: NETWORK_LOADING\n * - 3: NETWORK_NO_SOURCE\n *\n * @method Html5#networkState\n * @return {number}\n *         The value of `networkState` from the media element. This will be a number\n *         from the list in the description.\n *\n * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-networkstate}\n */\n'networkState',\n\n/**\n * Get the value of `readyState` from the media element. `readyState` indicates\n * the current state of the media element. It returns an enumeration from the\n * following list:\n * - 0: HAVE_NOTHING\n * - 1: HAVE_METADATA\n * - 2: HAVE_CURRENT_DATA\n * - 3: HAVE_FUTURE_DATA\n * - 4: HAVE_ENOUGH_DATA\n *\n * @method Html5#readyState\n * @return {number}\n *         The value of `readyState` from the media element. This will be a number\n *         from the list in the description.\n *\n * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#ready-states}\n */\n'readyState',\n\n/**\n * Get the value of `videoWidth` from the video element. `videoWidth` indicates\n * the current width of the video in css pixels.\n *\n * @method Html5#videoWidth\n * @return {number}\n *         The value of `videoWidth` from the video element. This will be a number\n *         in css pixels.\n *\n * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}\n */\n'videoWidth',\n\n/**\n * Get the value of `videoHeight` from the video element. `videoHeigth` indicates\n * the current height of the video in css pixels.\n *\n * @method Html5#videoHeight\n * @return {number}\n *         The value of `videoHeight` from the video element. This will be a number\n *         in css pixels.\n *\n * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}\n */\n'videoHeight'].forEach(function (prop) {\n  Html5.prototype[prop] = function () {\n    return this.el_[prop];\n  };\n});\n\n// Wrap native properties with a setter in this format:\n// set + toTitleCase(name)\n// The list is as follows:\n// setVolume, setSrc, setPoster, setPreload, setPlaybackRate, setDefaultPlaybackRate\n[\n/**\n * Set the value of `volume` on the media element. `volume` indicates the current\n * audio level as a percentage in decimal form. This means that 1 is 100%, 0.5 is 50%, and\n * so on.\n *\n * @method Html5#setVolume\n * @param {number} percentAsDecimal\n *        The volume percent as a decimal. Valid range is from 0-1.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}\n */\n'volume',\n\n/**\n * Set the value of `src` on the media element. `src` indicates the current\n * {@link Tech~SourceObject} for the media.\n *\n * @method Html5#setSrc\n * @param {Tech~SourceObject} src\n *        The source object to set as the current source.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-src}\n */\n'src',\n\n/**\n * Set the value of `poster` on the media element. `poster` is the url to\n * an image file that can/will be shown when no media data is available.\n *\n * @method Html5#setPoster\n * @param {string} poster\n *        The url to an image that should be used as the `poster` for the media\n *        element.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-poster}\n */\n'poster',\n\n/**\n * Set the value of `preload` on the media element. `preload` indicates\n * what should download before the media is interacted with. It can have the following\n * values:\n * - none: nothing should be downloaded\n * - metadata: poster and the first few frames of the media may be downloaded to get\n *   media dimensions and other metadata\n * - auto: allow the media and metadata for the media to be downloaded before\n *    interaction\n *\n * @method Html5#setPreload\n * @param {string} preload\n *         The value of `preload` to set on the media element. Must be 'none', 'metadata',\n *         or 'auto'.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}\n */\n'preload',\n\n/**\n * Set the value of `playbackRate` on the media element. `playbackRate` indicates\n * the rate at which the media should play back. Examples:\n *   - if playbackRate is set to 2, media will play twice as fast.\n *   - if playbackRate is set to 0.5, media will play half as fast.\n *\n * @method Html5#setPlaybackRate\n * @return {number}\n *         The value of `playbackRate` from the media element. A number indicating\n *         the current playback speed of the media, where 1 is normal speed.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}\n */\n'playbackRate',\n\n/**\n * Set the value of `defaultPlaybackRate` on the media element. `defaultPlaybackRate` indicates\n * the rate at which the media should play back upon initial startup. Changing this value\n * after a video has started will do nothing. Instead you should used {@link Html5#setPlaybackRate}.\n *\n * Example Values:\n *   - if playbackRate is set to 2, media will play twice as fast.\n *   - if playbackRate is set to 0.5, media will play half as fast.\n *\n * @method Html5.prototype.setDefaultPlaybackRate\n * @return {number}\n *         The value of `defaultPlaybackRate` from the media element. A number indicating\n *         the current playback speed of the media, where 1 is normal speed.\n *\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultplaybackrate}\n */\n'defaultPlaybackRate'].forEach(function (prop) {\n  Html5.prototype['set' + toTitleCase(prop)] = function (v) {\n    this.el_[prop] = v;\n  };\n});\n\n// wrap native functions with a function\n// The list is as follows:\n// pause, load play\n[\n/**\n * A wrapper around the media elements `pause` function. This will call the `HTML5`\n * media elements `pause` function.\n *\n * @method Html5#pause\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-pause}\n */\n'pause',\n\n/**\n * A wrapper around the media elements `load` function. This will call the `HTML5`s\n * media element `load` function.\n *\n * @method Html5#load\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-load}\n */\n'load',\n\n/**\n * A wrapper around the media elements `play` function. This will call the `HTML5`s\n * media element `play` function.\n *\n * @method Html5#play\n * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-play}\n */\n'play'].forEach(function (prop) {\n  Html5.prototype[prop] = function () {\n    return this.el_[prop]();\n  };\n});\n\nTech.withSourceHandlers(Html5);\n\n/**\n * Native source handler for Html5, simply passes the source to the media element.\n *\n * @proprety {Tech~SourceObject} source\n *        The source object\n *\n * @proprety {Html5} tech\n *        The instance of the HTML5 tech.\n */\nHtml5.nativeSourceHandler = {};\n\n/**\n * Check if the media element can play the given mime type.\n *\n * @param {string} type\n *        The mimetype to check\n *\n * @return {string}\n *         'probably', 'maybe', or '' (empty string)\n */\nHtml5.nativeSourceHandler.canPlayType = function (type) {\n  // IE9 on Windows 7 without MediaPlayer throws an error here\n  // https://github.com/videojs/video.js/issues/519\n  try {\n    return Html5.TEST_VID.canPlayType(type);\n  } catch (e) {\n    return '';\n  }\n};\n\n/**\n * Check if the media element can handle a source natively.\n *\n * @param {Tech~SourceObject} source\n *         The source object\n *\n * @param {Object} [options]\n *         Options to be passed to the tech.\n *\n * @return {string}\n *         'probably', 'maybe', or '' (empty string).\n */\nHtml5.nativeSourceHandler.canHandleSource = function (source, options) {\n\n  // If a type was provided we should rely on that\n  if (source.type) {\n    return Html5.nativeSourceHandler.canPlayType(source.type);\n\n    // If no type, fall back to checking 'video/[EXTENSION]'\n  } else if (source.src) {\n    var ext = getFileExtension(source.src);\n\n    return Html5.nativeSourceHandler.canPlayType('video/' + ext);\n  }\n\n  return '';\n};\n\n/**\n * Pass the source to the native media element.\n *\n * @param {Tech~SourceObject} source\n *        The source object\n *\n * @param {Html5} tech\n *        The instance of the Html5 tech\n *\n * @param {Object} [options]\n *        The options to pass to the source\n */\nHtml5.nativeSourceHandler.handleSource = function (source, tech, options) {\n  tech.setSrc(source.src);\n};\n\n/**\n * A noop for the native dispose function, as cleanup is not needed.\n */\nHtml5.nativeSourceHandler.dispose = function () {};\n\n// Register the native source handler\nHtml5.registerSourceHandler(Html5.nativeSourceHandler);\n\nTech.registerTech('Html5', Html5);\n\nvar _templateObject$1 = taggedTemplateLiteralLoose(['\\n        Using the tech directly can be dangerous. I hope you know what you\\'re doing.\\n        See https://github.com/videojs/video.js/issues/2617 for more info.\\n      '], ['\\n        Using the tech directly can be dangerous. I hope you know what you\\'re doing.\\n        See https://github.com/videojs/video.js/issues/2617 for more info.\\n      ']);\n\n/**\n * @file player.js\n */\n// Subclasses Component\n// The following imports are used only to ensure that the corresponding modules\n// are always included in the video.js package. Importing the modules will\n// execute them and they will register themselves with video.js.\n// Import Html5 tech, at least for disposing the original video tag.\n// The following tech events are simply re-triggered\n// on the player when they happen\nvar TECH_EVENTS_RETRIGGER = [\n/**\n * Fired while the user agent is downloading media data.\n *\n * @event Player#progress\n * @type {EventTarget~Event}\n */\n/**\n * Retrigger the `progress` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechProgress_\n * @fires Player#progress\n * @listens Tech#progress\n */\n'progress',\n\n/**\n * Fires when the loading of an audio/video is aborted.\n *\n * @event Player#abort\n * @type {EventTarget~Event}\n */\n/**\n * Retrigger the `abort` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechAbort_\n * @fires Player#abort\n * @listens Tech#abort\n */\n'abort',\n\n/**\n * Fires when the browser is intentionally not getting media data.\n *\n * @event Player#suspend\n * @type {EventTarget~Event}\n */\n/**\n * Retrigger the `suspend` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechSuspend_\n * @fires Player#suspend\n * @listens Tech#suspend\n */\n'suspend',\n\n/**\n * Fires when the current playlist is empty.\n *\n * @event Player#emptied\n * @type {EventTarget~Event}\n */\n/**\n * Retrigger the `emptied` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechEmptied_\n * @fires Player#emptied\n * @listens Tech#emptied\n */\n'emptied',\n/**\n * Fires when the browser is trying to get media data, but data is not available.\n *\n * @event Player#stalled\n * @type {EventTarget~Event}\n */\n/**\n * Retrigger the `stalled` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechStalled_\n * @fires Player#stalled\n * @listens Tech#stalled\n */\n'stalled',\n\n/**\n * Fires when the browser has loaded meta data for the audio/video.\n *\n * @event Player#loadedmetadata\n * @type {EventTarget~Event}\n */\n/**\n * Retrigger the `stalled` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechLoadedmetadata_\n * @fires Player#loadedmetadata\n * @listens Tech#loadedmetadata\n */\n'loadedmetadata',\n\n/**\n * Fires when the browser has loaded the current frame of the audio/video.\n *\n * @event Player#loadeddata\n * @type {event}\n */\n/**\n * Retrigger the `loadeddata` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechLoaddeddata_\n * @fires Player#loadeddata\n * @listens Tech#loadeddata\n */\n'loadeddata',\n\n/**\n * Fires when the current playback position has changed.\n *\n * @event Player#timeupdate\n * @type {event}\n */\n/**\n * Retrigger the `timeupdate` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechTimeUpdate_\n * @fires Player#timeupdate\n * @listens Tech#timeupdate\n */\n'timeupdate',\n\n/**\n * Fires when the video's intrinsic dimensions change\n *\n * @event Player#resize\n * @type {event}\n */\n/**\n * Retrigger the `resize` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechResize_\n * @fires Player#resize\n * @listens Tech#resize\n */\n'resize',\n\n/**\n * Fires when the volume has been changed\n *\n * @event Player#volumechange\n * @type {event}\n */\n/**\n * Retrigger the `volumechange` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechVolumechange_\n * @fires Player#volumechange\n * @listens Tech#volumechange\n */\n'volumechange',\n\n/**\n * Fires when the text track has been changed\n *\n * @event Player#texttrackchange\n * @type {event}\n */\n/**\n * Retrigger the `texttrackchange` event that was triggered by the {@link Tech}.\n *\n * @private\n * @method Player#handleTechTexttrackchange_\n * @fires Player#texttrackchange\n * @listens Tech#texttrackchange\n */\n'texttrackchange'];\n\n// events to queue when playback rate is zero\n// this is a hash for the sole purpose of mapping non-camel-cased event names\n// to camel-cased function names\nvar TECH_EVENTS_QUEUE = {\n  canplay: 'CanPlay',\n  canplaythrough: 'CanPlayThrough',\n  playing: 'Playing',\n  seeked: 'Seeked'\n};\n\n/**\n * An instance of the `Player` class is created when any of the Video.js setup methods\n * are used to initialize a video.\n *\n * After an instance has been created it can be accessed globally in two ways:\n * 1. By calling `videojs('example_video_1');`\n * 2. By using it directly via  `videojs.players.example_video_1;`\n *\n * @extends Component\n */\n\nvar Player = function (_Component) {\n  inherits(Player, _Component);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Element} tag\n   *        The original video DOM element used for configuring options.\n   *\n   * @param {Object} [options]\n   *        Object of option names and values.\n   *\n   * @param {Component~ReadyCallback} [ready]\n   *        Ready callback function.\n   */\n  function Player(tag, options, ready) {\n    classCallCheck(this, Player);\n\n    // Make sure tag ID exists\n    tag.id = tag.id || options.id || 'vjs_video_' + newGUID();\n\n    // Set Options\n    // The options argument overrides options set in the video tag\n    // which overrides globally set options.\n    // This latter part coincides with the load order\n    // (tag must exist before Player)\n    options = assign(Player.getTagSettings(tag), options);\n\n    // Delay the initialization of children because we need to set up\n    // player properties first, and can't use `this` before `super()`\n    options.initChildren = false;\n\n    // Same with creating the element\n    options.createEl = false;\n\n    // don't auto mixin the evented mixin\n    options.evented = false;\n\n    // we don't want the player to report touch activity on itself\n    // see enableTouchActivity in Component\n    options.reportTouchActivity = false;\n\n    // If language is not set, get the closest lang attribute\n    if (!options.language) {\n      if (typeof tag.closest === 'function') {\n        var closest = tag.closest('[lang]');\n\n        if (closest && closest.getAttribute) {\n          options.language = closest.getAttribute('lang');\n        }\n      } else {\n        var element = tag;\n\n        while (element && element.nodeType === 1) {\n          if (getAttributes(element).hasOwnProperty('lang')) {\n            options.language = element.getAttribute('lang');\n            break;\n          }\n          element = element.parentNode;\n        }\n      }\n    }\n\n    // Run base component initializing with new options\n\n    // Tracks when a tech changes the poster\n    var _this = possibleConstructorReturn(this, _Component.call(this, null, options, ready));\n\n    _this.isPosterFromTech_ = false;\n\n    // Holds callback info that gets queued when playback rate is zero\n    // and a seek is happening\n    _this.queuedCallbacks_ = [];\n\n    // Turn off API access because we're loading a new tech that might load asynchronously\n    _this.isReady_ = false;\n\n    // Init state hasStarted_\n    _this.hasStarted_ = false;\n\n    // Init state userActive_\n    _this.userActive_ = false;\n\n    // if the global option object was accidentally blown away by\n    // someone, bail early with an informative error\n    if (!_this.options_ || !_this.options_.techOrder || !_this.options_.techOrder.length) {\n      throw new Error('No techOrder specified. Did you overwrite ' + 'videojs.options instead of just changing the ' + 'properties you want to override?');\n    }\n\n    // Store the original tag used to set options\n    _this.tag = tag;\n\n    // Store the tag attributes used to restore html5 element\n    _this.tagAttributes = tag && getAttributes(tag);\n\n    // Update current language\n    _this.language(_this.options_.language);\n\n    // Update Supported Languages\n    if (options.languages) {\n      // Normalise player option languages to lowercase\n      var languagesToLower = {};\n\n      Object.getOwnPropertyNames(options.languages).forEach(function (name$$1) {\n        languagesToLower[name$$1.toLowerCase()] = options.languages[name$$1];\n      });\n      _this.languages_ = languagesToLower;\n    } else {\n      _this.languages_ = Player.prototype.options_.languages;\n    }\n\n    // Cache for video property values.\n    _this.cache_ = {};\n\n    // Set poster\n    _this.poster_ = options.poster || '';\n\n    // Set controls\n    _this.controls_ = !!options.controls;\n\n    // Set default values for lastVolume\n    _this.cache_.lastVolume = 1;\n\n    // Original tag settings stored in options\n    // now remove immediately so native controls don't flash.\n    // May be turned back on by HTML5 tech if nativeControlsForTouch is true\n    tag.controls = false;\n    tag.removeAttribute('controls');\n\n    // the attribute overrides the option\n    if (tag.hasAttribute('autoplay')) {\n      _this.options_.autoplay = true;\n    } else {\n      // otherwise use the setter to validate and\n      // set the correct value.\n      _this.autoplay(_this.options_.autoplay);\n    }\n\n    /*\n     * Store the internal state of scrubbing\n     *\n     * @private\n     * @return {Boolean} True if the user is scrubbing\n     */\n    _this.scrubbing_ = false;\n\n    _this.el_ = _this.createEl();\n\n    // Set default value for lastPlaybackRate\n    _this.cache_.lastPlaybackRate = _this.defaultPlaybackRate();\n\n    // Make this an evented object and use `el_` as its event bus.\n    evented(_this, { eventBusKey: 'el_' });\n\n    // We also want to pass the original player options to each component and plugin\n    // as well so they don't need to reach back into the player for options later.\n    // We also need to do another copy of this.options_ so we don't end up with\n    // an infinite loop.\n    var playerOptionsCopy = mergeOptions(_this.options_);\n\n    // Load plugins\n    if (options.plugins) {\n      var plugins = options.plugins;\n\n      Object.keys(plugins).forEach(function (name$$1) {\n        if (typeof this[name$$1] === 'function') {\n          this[name$$1](plugins[name$$1]);\n        } else {\n          throw new Error('plugin \"' + name$$1 + '\" does not exist');\n        }\n      }, _this);\n    }\n\n    _this.options_.playerOptions = playerOptionsCopy;\n\n    _this.middleware_ = [];\n\n    _this.initChildren();\n\n    // Set isAudio based on whether or not an audio tag was used\n    _this.isAudio(tag.nodeName.toLowerCase() === 'audio');\n\n    // Update controls className. Can't do this when the controls are initially\n    // set because the element doesn't exist yet.\n    if (_this.controls()) {\n      _this.addClass('vjs-controls-enabled');\n    } else {\n      _this.addClass('vjs-controls-disabled');\n    }\n\n    // Set ARIA label and region role depending on player type\n    _this.el_.setAttribute('role', 'region');\n    if (_this.isAudio()) {\n      _this.el_.setAttribute('aria-label', _this.localize('Audio Player'));\n    } else {\n      _this.el_.setAttribute('aria-label', _this.localize('Video Player'));\n    }\n\n    if (_this.isAudio()) {\n      _this.addClass('vjs-audio');\n    }\n\n    if (_this.flexNotSupported_()) {\n      _this.addClass('vjs-no-flex');\n    }\n\n    // TODO: Make this smarter. Toggle user state between touching/mousing\n    // using events, since devices can have both touch and mouse events.\n    // if (browser.TOUCH_ENABLED) {\n    //   this.addClass('vjs-touch-enabled');\n    // }\n\n    // iOS Safari has broken hover handling\n    if (!IS_IOS) {\n      _this.addClass('vjs-workinghover');\n    }\n\n    // Make player easily findable by ID\n    Player.players[_this.id_] = _this;\n\n    // Add a major version class to aid css in plugins\n    var majorVersion = version.split('.')[0];\n\n    _this.addClass('vjs-v' + majorVersion);\n\n    // When the player is first initialized, trigger activity so components\n    // like the control bar show themselves if needed\n    _this.userActive(true);\n    _this.reportUserActivity();\n\n    _this.one('play', _this.listenForUserActivity_);\n    _this.on('fullscreenchange', _this.handleFullscreenChange_);\n    _this.on('stageclick', _this.handleStageClick_);\n\n    _this.changingSrc_ = false;\n    _this.playWaitingForReady_ = false;\n    _this.playOnLoadstart_ = null;\n    return _this;\n  }\n\n  /**\n   * Destroys the video player and does any necessary cleanup.\n   *\n   * This is especially helpful if you are dynamically adding and removing videos\n   * to/from the DOM.\n   *\n   * @fires Player#dispose\n   */\n\n\n  Player.prototype.dispose = function dispose() {\n    /**\n     * Called when the player is being disposed of.\n     *\n     * @event Player#dispose\n     * @type {EventTarget~Event}\n     */\n    this.trigger('dispose');\n    // prevent dispose from being called twice\n    this.off('dispose');\n\n    if (this.styleEl_ && this.styleEl_.parentNode) {\n      this.styleEl_.parentNode.removeChild(this.styleEl_);\n      this.styleEl_ = null;\n    }\n\n    // Kill reference to this player\n    Player.players[this.id_] = null;\n\n    if (this.tag && this.tag.player) {\n      this.tag.player = null;\n    }\n\n    if (this.el_ && this.el_.player) {\n      this.el_.player = null;\n    }\n\n    if (this.tech_) {\n      this.tech_.dispose();\n      this.isPosterFromTech_ = false;\n      this.poster_ = '';\n    }\n\n    if (this.playerElIngest_) {\n      this.playerElIngest_ = null;\n    }\n\n    if (this.tag) {\n      this.tag = null;\n    }\n\n    clearCacheForPlayer(this);\n\n    // the actual .el_ is removed here\n    _Component.prototype.dispose.call(this);\n  };\n\n  /**\n   * Create the `Player`'s DOM element.\n   *\n   * @return {Element}\n   *         The DOM element that gets created.\n   */\n\n\n  Player.prototype.createEl = function createEl$$1() {\n    var tag = this.tag;\n    var el = void 0;\n    var playerElIngest = this.playerElIngest_ = tag.parentNode && tag.parentNode.hasAttribute && tag.parentNode.hasAttribute('data-vjs-player');\n    var divEmbed = this.tag.tagName.toLowerCase() === 'video-js';\n\n    if (playerElIngest) {\n      el = this.el_ = tag.parentNode;\n    } else if (!divEmbed) {\n      el = this.el_ = _Component.prototype.createEl.call(this, 'div');\n    }\n\n    // Copy over all the attributes from the tag, including ID and class\n    // ID will now reference player box, not the video tag\n    var attrs = getAttributes(tag);\n\n    if (divEmbed) {\n      el = this.el_ = tag;\n      tag = this.tag = document.createElement('video');\n      while (el.children.length) {\n        tag.appendChild(el.firstChild);\n      }\n\n      if (!hasClass(el, 'video-js')) {\n        addClass(el, 'video-js');\n      }\n\n      el.appendChild(tag);\n\n      playerElIngest = this.playerElIngest_ = el;\n\n      // copy over properties from the video-js element\n      // ie8 doesn't support Object.keys nor hasOwnProperty\n      // on dom elements so we have to specify properties individually\n      ['autoplay', 'controls', 'crossOrigin', 'defaultMuted', 'defaultPlaybackRate', 'loop', 'muted', 'playbackRate', 'src', 'volume'].forEach(function (prop) {\n        if (typeof el[prop] !== 'undefined') {\n          tag[prop] = el[prop];\n        }\n      });\n    }\n\n    // set tabindex to -1 to remove the video element from the focus order\n    tag.setAttribute('tabindex', '-1');\n    // Workaround for #4583 (JAWS+IE doesn't announce BPB or play button)\n    // See https://github.com/FreedomScientific/VFO-standards-support/issues/78\n    // Note that we can't detect if JAWS is being used, but this ARIA attribute\n    //  doesn't change behavior of IE11 if JAWS is not being used\n    if (IE_VERSION) {\n      tag.setAttribute('role', 'application');\n    }\n\n    // Remove width/height attrs from tag so CSS can make it 100% width/height\n    tag.removeAttribute('width');\n    tag.removeAttribute('height');\n\n    Object.getOwnPropertyNames(attrs).forEach(function (attr) {\n      // workaround so we don't totally break IE7\n      // http://stackoverflow.com/questions/3653444/css-styles-not-applied-on-dynamic-elements-in-internet-explorer-7\n      if (attr === 'class') {\n        el.className += ' ' + attrs[attr];\n\n        if (divEmbed) {\n          tag.className += ' ' + attrs[attr];\n        }\n      } else {\n        el.setAttribute(attr, attrs[attr]);\n\n        if (divEmbed) {\n          tag.setAttribute(attr, attrs[attr]);\n        }\n      }\n    });\n\n    // Update tag id/class for use as HTML5 playback tech\n    // Might think we should do this after embedding in container so .vjs-tech class\n    // doesn't flash 100% width/height, but class only applies with .video-js parent\n    tag.playerId = tag.id;\n    tag.id += '_html5_api';\n    tag.className = 'vjs-tech';\n\n    // Make player findable on elements\n    tag.player = el.player = this;\n    // Default state of video is paused\n    this.addClass('vjs-paused');\n\n    // Add a style element in the player that we'll use to set the width/height\n    // of the player in a way that's still overrideable by CSS, just like the\n    // video element\n    if (window.VIDEOJS_NO_DYNAMIC_STYLE !== true) {\n      this.styleEl_ = createStyleElement('vjs-styles-dimensions');\n      var defaultsStyleEl = $('.vjs-styles-defaults');\n      var head = $('head');\n\n      head.insertBefore(this.styleEl_, defaultsStyleEl ? defaultsStyleEl.nextSibling : head.firstChild);\n    }\n\n    // Pass in the width/height/aspectRatio options which will update the style el\n    this.width(this.options_.width);\n    this.height(this.options_.height);\n    this.fluid(this.options_.fluid);\n    this.aspectRatio(this.options_.aspectRatio);\n\n    // Hide any links within the video/audio tag, because IE doesn't hide them completely.\n    var links = tag.getElementsByTagName('a');\n\n    for (var i = 0; i < links.length; i++) {\n      var linkEl = links.item(i);\n\n      addClass(linkEl, 'vjs-hidden');\n      linkEl.setAttribute('hidden', 'hidden');\n    }\n\n    // insertElFirst seems to cause the networkState to flicker from 3 to 2, so\n    // keep track of the original for later so we can know if the source originally failed\n    tag.initNetworkState_ = tag.networkState;\n\n    // Wrap video tag in div (el/box) container\n    if (tag.parentNode && !playerElIngest) {\n      tag.parentNode.insertBefore(el, tag);\n    }\n\n    // insert the tag as the first child of the player element\n    // then manually add it to the children array so that this.addChild\n    // will work properly for other components\n    //\n    // Breaks iPhone, fixed in HTML5 setup.\n    prependTo(tag, el);\n    this.children_.unshift(tag);\n\n    // Set lang attr on player to ensure CSS :lang() in consistent with player\n    // if it's been set to something different to the doc\n    this.el_.setAttribute('lang', this.language_);\n\n    this.el_ = el;\n\n    return el;\n  };\n\n  /**\n   * A getter/setter for the `Player`'s width. Returns the player's configured value.\n   * To get the current width use `currentWidth()`.\n   *\n   * @param {number} [value]\n   *        The value to set the `Player`'s width to.\n   *\n   * @return {number}\n   *         The current width of the `Player` when getting.\n   */\n\n\n  Player.prototype.width = function width(value) {\n    return this.dimension('width', value);\n  };\n\n  /**\n   * A getter/setter for the `Player`'s height. Returns the player's configured value.\n   * To get the current height use `currentheight()`.\n   *\n   * @param {number} [value]\n   *        The value to set the `Player`'s heigth to.\n   *\n   * @return {number}\n   *         The current height of the `Player` when getting.\n   */\n\n\n  Player.prototype.height = function height(value) {\n    return this.dimension('height', value);\n  };\n\n  /**\n   * A getter/setter for the `Player`'s width & height.\n   *\n   * @param {string} dimension\n   *        This string can be:\n   *        - 'width'\n   *        - 'height'\n   *\n   * @param {number} [value]\n   *        Value for dimension specified in the first argument.\n   *\n   * @return {number}\n   *         The dimension arguments value when getting (width/height).\n   */\n\n\n  Player.prototype.dimension = function dimension(_dimension, value) {\n    var privDimension = _dimension + '_';\n\n    if (value === undefined) {\n      return this[privDimension] || 0;\n    }\n\n    if (value === '') {\n      // If an empty string is given, reset the dimension to be automatic\n      this[privDimension] = undefined;\n      this.updateStyleEl_();\n      return;\n    }\n\n    var parsedVal = parseFloat(value);\n\n    if (isNaN(parsedVal)) {\n      log$1.error('Improper value \"' + value + '\" supplied for for ' + _dimension);\n      return;\n    }\n\n    this[privDimension] = parsedVal;\n    this.updateStyleEl_();\n  };\n\n  /**\n   * A getter/setter/toggler for the vjs-fluid `className` on the `Player`.\n   *\n   * @param {boolean} [bool]\n   *        - A value of true adds the class.\n   *        - A value of false removes the class.\n   *        - No value will toggle the fluid class.\n   *\n   * @return {boolean|undefined}\n   *         - The value of fluid when getting.\n   *         - `undefined` when setting.\n   */\n\n\n  Player.prototype.fluid = function fluid(bool) {\n    if (bool === undefined) {\n      return !!this.fluid_;\n    }\n\n    this.fluid_ = !!bool;\n\n    if (bool) {\n      this.addClass('vjs-fluid');\n    } else {\n      this.removeClass('vjs-fluid');\n    }\n\n    this.updateStyleEl_();\n  };\n\n  /**\n   * Get/Set the aspect ratio\n   *\n   * @param {string} [ratio]\n   *        Aspect ratio for player\n   *\n   * @return {string|undefined}\n   *         returns the current aspect ratio when getting\n   */\n\n  /**\n   * A getter/setter for the `Player`'s aspect ratio.\n   *\n   * @param {string} [ratio]\n   *        The value to set the `Player's aspect ratio to.\n   *\n   * @return {string|undefined}\n   *         - The current aspect ratio of the `Player` when getting.\n   *         - undefined when setting\n   */\n\n\n  Player.prototype.aspectRatio = function aspectRatio(ratio) {\n    if (ratio === undefined) {\n      return this.aspectRatio_;\n    }\n\n    // Check for width:height format\n    if (!/^\\d+\\:\\d+$/.test(ratio)) {\n      throw new Error('Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.');\n    }\n    this.aspectRatio_ = ratio;\n\n    // We're assuming if you set an aspect ratio you want fluid mode,\n    // because in fixed mode you could calculate width and height yourself.\n    this.fluid(true);\n\n    this.updateStyleEl_();\n  };\n\n  /**\n   * Update styles of the `Player` element (height, width and aspect ratio).\n   *\n   * @private\n   * @listens Tech#loadedmetadata\n   */\n\n\n  Player.prototype.updateStyleEl_ = function updateStyleEl_() {\n    if (window.VIDEOJS_NO_DYNAMIC_STYLE === true) {\n      var _width = typeof this.width_ === 'number' ? this.width_ : this.options_.width;\n      var _height = typeof this.height_ === 'number' ? this.height_ : this.options_.height;\n      var techEl = this.tech_ && this.tech_.el();\n\n      if (techEl) {\n        if (_width >= 0) {\n          techEl.width = _width;\n        }\n        if (_height >= 0) {\n          techEl.height = _height;\n        }\n      }\n\n      return;\n    }\n\n    var width = void 0;\n    var height = void 0;\n    var aspectRatio = void 0;\n    var idClass = void 0;\n\n    // The aspect ratio is either used directly or to calculate width and height.\n    if (this.aspectRatio_ !== undefined && this.aspectRatio_ !== 'auto') {\n      // Use any aspectRatio that's been specifically set\n      aspectRatio = this.aspectRatio_;\n    } else if (this.videoWidth() > 0) {\n      // Otherwise try to get the aspect ratio from the video metadata\n      aspectRatio = this.videoWidth() + ':' + this.videoHeight();\n    } else {\n      // Or use a default. The video element's is 2:1, but 16:9 is more common.\n      aspectRatio = '16:9';\n    }\n\n    // Get the ratio as a decimal we can use to calculate dimensions\n    var ratioParts = aspectRatio.split(':');\n    var ratioMultiplier = ratioParts[1] / ratioParts[0];\n\n    if (this.width_ !== undefined) {\n      // Use any width that's been specifically set\n      width = this.width_;\n    } else if (this.height_ !== undefined) {\n      // Or calulate the width from the aspect ratio if a height has been set\n      width = this.height_ / ratioMultiplier;\n    } else {\n      // Or use the video's metadata, or use the video el's default of 300\n      width = this.videoWidth() || 300;\n    }\n\n    if (this.height_ !== undefined) {\n      // Use any height that's been specifically set\n      height = this.height_;\n    } else {\n      // Otherwise calculate the height from the ratio and the width\n      height = width * ratioMultiplier;\n    }\n\n    // Ensure the CSS class is valid by starting with an alpha character\n    if (/^[^a-zA-Z]/.test(this.id())) {\n      idClass = 'dimensions-' + this.id();\n    } else {\n      idClass = this.id() + '-dimensions';\n    }\n\n    // Ensure the right class is still on the player for the style element\n    this.addClass(idClass);\n\n    setTextContent(this.styleEl_, '\\n      .' + idClass + ' {\\n        width: ' + width + 'px;\\n        height: ' + height + 'px;\\n      }\\n\\n      .' + idClass + '.vjs-fluid {\\n        padding-top: ' + ratioMultiplier * 100 + '%;\\n      }\\n    ');\n  };\n\n  /**\n   * Load/Create an instance of playback {@link Tech} including element\n   * and API methods. Then append the `Tech` element in `Player` as a child.\n   *\n   * @param {string} techName\n   *        name of the playback technology\n   *\n   * @param {string} source\n   *        video source\n   *\n   * @private\n   */\n\n\n  Player.prototype.loadTech_ = function loadTech_(techName, source) {\n    var _this2 = this;\n\n    // Pause and remove current playback technology\n    if (this.tech_) {\n      this.unloadTech_();\n    }\n\n    var titleTechName = toTitleCase(techName);\n    var camelTechName = techName.charAt(0).toLowerCase() + techName.slice(1);\n\n    // get rid of the HTML5 video tag as soon as we are using another tech\n    if (titleTechName !== 'Html5' && this.tag) {\n      Tech.getTech('Html5').disposeMediaElement(this.tag);\n      this.tag.player = null;\n      this.tag = null;\n    }\n\n    this.techName_ = titleTechName;\n\n    // Turn off API access because we're loading a new tech that might load asynchronously\n    this.isReady_ = false;\n\n    // if autoplay is a string we pass false to the tech\n    // because the player is going to handle autoplay on `loadstart`\n    var autoplay = typeof this.autoplay() === 'string' ? false : this.autoplay();\n\n    // Grab tech-specific options from player options and add source and parent element to use.\n    var techOptions = {\n      source: source,\n      autoplay: autoplay,\n      'nativeControlsForTouch': this.options_.nativeControlsForTouch,\n      'playerId': this.id(),\n      'techId': this.id() + '_' + titleTechName + '_api',\n      'playsinline': this.options_.playsinline,\n      'preload': this.options_.preload,\n      'loop': this.options_.loop,\n      'muted': this.options_.muted,\n      'poster': this.poster(),\n      'language': this.language(),\n      'playerElIngest': this.playerElIngest_ || false,\n      'vtt.js': this.options_['vtt.js'],\n      'canOverridePoster': !!this.options_.techCanOverridePoster,\n      'enableSourceset': this.options_.enableSourceset\n    };\n\n    ALL.names.forEach(function (name$$1) {\n      var props = ALL[name$$1];\n\n      techOptions[props.getterName] = _this2[props.privateName];\n    });\n\n    assign(techOptions, this.options_[titleTechName]);\n    assign(techOptions, this.options_[camelTechName]);\n    assign(techOptions, this.options_[techName.toLowerCase()]);\n\n    if (this.tag) {\n      techOptions.tag = this.tag;\n    }\n\n    if (source && source.src === this.cache_.src && this.cache_.currentTime > 0) {\n      techOptions.startTime = this.cache_.currentTime;\n    }\n\n    // Initialize tech instance\n    var TechClass = Tech.getTech(techName);\n\n    if (!TechClass) {\n      throw new Error('No Tech named \\'' + titleTechName + '\\' exists! \\'' + titleTechName + '\\' should be registered using videojs.registerTech()\\'');\n    }\n\n    this.tech_ = new TechClass(techOptions);\n\n    // player.triggerReady is always async, so don't need this to be async\n    this.tech_.ready(bind(this, this.handleTechReady_), true);\n\n    textTrackConverter.jsonToTextTracks(this.textTracksJson_ || [], this.tech_);\n\n    // Listen to all HTML5-defined events and trigger them on the player\n    TECH_EVENTS_RETRIGGER.forEach(function (event) {\n      _this2.on(_this2.tech_, event, _this2['handleTech' + toTitleCase(event) + '_']);\n    });\n\n    Object.keys(TECH_EVENTS_QUEUE).forEach(function (event) {\n      _this2.on(_this2.tech_, event, function (eventObj) {\n        if (_this2.tech_.playbackRate() === 0 && _this2.tech_.seeking()) {\n          _this2.queuedCallbacks_.push({\n            callback: _this2['handleTech' + TECH_EVENTS_QUEUE[event] + '_'].bind(_this2),\n            event: eventObj\n          });\n          return;\n        }\n        _this2['handleTech' + TECH_EVENTS_QUEUE[event] + '_'](eventObj);\n      });\n    });\n\n    this.on(this.tech_, 'loadstart', this.handleTechLoadStart_);\n    this.on(this.tech_, 'sourceset', this.handleTechSourceset_);\n    this.on(this.tech_, 'waiting', this.handleTechWaiting_);\n    this.on(this.tech_, 'ended', this.handleTechEnded_);\n    this.on(this.tech_, 'seeking', this.handleTechSeeking_);\n    this.on(this.tech_, 'play', this.handleTechPlay_);\n    this.on(this.tech_, 'firstplay', this.handleTechFirstPlay_);\n    this.on(this.tech_, 'pause', this.handleTechPause_);\n    this.on(this.tech_, 'durationchange', this.handleTechDurationChange_);\n    this.on(this.tech_, 'fullscreenchange', this.handleTechFullscreenChange_);\n    this.on(this.tech_, 'error', this.handleTechError_);\n    this.on(this.tech_, 'loadedmetadata', this.updateStyleEl_);\n    this.on(this.tech_, 'posterchange', this.handleTechPosterChange_);\n    this.on(this.tech_, 'textdata', this.handleTechTextData_);\n    this.on(this.tech_, 'ratechange', this.handleTechRateChange_);\n\n    this.usingNativeControls(this.techGet_('controls'));\n\n    if (this.controls() && !this.usingNativeControls()) {\n      this.addTechControlsListeners_();\n    }\n\n    // Add the tech element in the DOM if it was not already there\n    // Make sure to not insert the original video element if using Html5\n    if (this.tech_.el().parentNode !== this.el() && (titleTechName !== 'Html5' || !this.tag)) {\n      prependTo(this.tech_.el(), this.el());\n    }\n\n    // Get rid of the original video tag reference after the first tech is loaded\n    if (this.tag) {\n      this.tag.player = null;\n      this.tag = null;\n    }\n  };\n\n  /**\n   * Unload and dispose of the current playback {@link Tech}.\n   *\n   * @private\n   */\n\n\n  Player.prototype.unloadTech_ = function unloadTech_() {\n    var _this3 = this;\n\n    // Save the current text tracks so that we can reuse the same text tracks with the next tech\n    ALL.names.forEach(function (name$$1) {\n      var props = ALL[name$$1];\n\n      _this3[props.privateName] = _this3[props.getterName]();\n    });\n    this.textTracksJson_ = textTrackConverter.textTracksToJson(this.tech_);\n\n    this.isReady_ = false;\n\n    this.tech_.dispose();\n\n    this.tech_ = false;\n\n    if (this.isPosterFromTech_) {\n      this.poster_ = '';\n      this.trigger('posterchange');\n    }\n\n    this.isPosterFromTech_ = false;\n  };\n\n  /**\n   * Return a reference to the current {@link Tech}.\n   * It will print a warning by default about the danger of using the tech directly\n   * but any argument that is passed in will silence the warning.\n   *\n   * @param {*} [safety]\n   *        Anything passed in to silence the warning\n   *\n   * @return {Tech}\n   *         The Tech\n   */\n\n\n  Player.prototype.tech = function tech(safety) {\n    if (safety === undefined) {\n      log$1.warn(tsml(_templateObject$1));\n    }\n\n    return this.tech_;\n  };\n\n  /**\n   * Set up click and touch listeners for the playback element\n   *\n   * - On desktops: a click on the video itself will toggle playback\n   * - On mobile devices: a click on the video toggles controls\n   *   which is done by toggling the user state between active and\n   *   inactive\n   * - A tap can signal that a user has become active or has become inactive\n   *   e.g. a quick tap on an iPhone movie should reveal the controls. Another\n   *   quick tap should hide them again (signaling the user is in an inactive\n   *   viewing state)\n   * - In addition to this, we still want the user to be considered inactive after\n   *   a few seconds of inactivity.\n   *\n   * > Note: the only part of iOS interaction we can't mimic with this setup\n   * is a touch and hold on the video element counting as activity in order to\n   * keep the controls showing, but that shouldn't be an issue. A touch and hold\n   * on any controls will still keep the user active\n   *\n   * @private\n   */\n\n\n  Player.prototype.addTechControlsListeners_ = function addTechControlsListeners_() {\n    // Make sure to remove all the previous listeners in case we are called multiple times.\n    this.removeTechControlsListeners_();\n\n    // Some browsers (Chrome & IE) don't trigger a click on a flash swf, but do\n    // trigger mousedown/up.\n    // http://stackoverflow.com/questions/1444562/javascript-onclick-event-over-flash-object\n    // Any touch events are set to block the mousedown event from happening\n    this.on(this.tech_, 'mousedown', this.handleTechClick_);\n\n    // If the controls were hidden we don't want that to change without a tap event\n    // so we'll check if the controls were already showing before reporting user\n    // activity\n    this.on(this.tech_, 'touchstart', this.handleTechTouchStart_);\n    this.on(this.tech_, 'touchmove', this.handleTechTouchMove_);\n    this.on(this.tech_, 'touchend', this.handleTechTouchEnd_);\n\n    // The tap listener needs to come after the touchend listener because the tap\n    // listener cancels out any reportedUserActivity when setting userActive(false)\n    this.on(this.tech_, 'tap', this.handleTechTap_);\n  };\n\n  /**\n   * Remove the listeners used for click and tap controls. This is needed for\n   * toggling to controls disabled, where a tap/touch should do nothing.\n   *\n   * @private\n   */\n\n\n  Player.prototype.removeTechControlsListeners_ = function removeTechControlsListeners_() {\n    // We don't want to just use `this.off()` because there might be other needed\n    // listeners added by techs that extend this.\n    this.off(this.tech_, 'tap', this.handleTechTap_);\n    this.off(this.tech_, 'touchstart', this.handleTechTouchStart_);\n    this.off(this.tech_, 'touchmove', this.handleTechTouchMove_);\n    this.off(this.tech_, 'touchend', this.handleTechTouchEnd_);\n    this.off(this.tech_, 'mousedown', this.handleTechClick_);\n  };\n\n  /**\n   * Player waits for the tech to be ready\n   *\n   * @private\n   */\n\n\n  Player.prototype.handleTechReady_ = function handleTechReady_() {\n    this.triggerReady();\n\n    // Keep the same volume as before\n    if (this.cache_.volume) {\n      this.techCall_('setVolume', this.cache_.volume);\n    }\n\n    // Look if the tech found a higher resolution poster while loading\n    this.handleTechPosterChange_();\n\n    // Update the duration if available\n    this.handleTechDurationChange_();\n\n    // Chrome and Safari both have issues with autoplay.\n    // In Safari (5.1.1), when we move the video element into the container div, autoplay doesn't work.\n    // In Chrome (15), if you have autoplay + a poster + no controls, the video gets hidden (but audio plays)\n    // This fixes both issues. Need to wait for API, so it updates displays correctly\n    if ((this.src() || this.currentSrc()) && this.tag && this.options_.autoplay && this.paused()) {\n      try {\n        // Chrome Fix. Fixed in Chrome v16.\n        delete this.tag.poster;\n      } catch (e) {\n        log$1('deleting tag.poster throws in some browsers', e);\n      }\n    }\n  };\n\n  /**\n   * Retrigger the `loadstart` event that was triggered by the {@link Tech}. This\n   * function will also trigger {@link Player#firstplay} if it is the first loadstart\n   * for a video.\n   *\n   * @fires Player#loadstart\n   * @fires Player#firstplay\n   * @listens Tech#loadstart\n   * @private\n   */\n\n\n  Player.prototype.handleTechLoadStart_ = function handleTechLoadStart_() {\n    // TODO: Update to use `emptied` event instead. See #1277.\n\n    this.removeClass('vjs-ended');\n    this.removeClass('vjs-seeking');\n\n    // reset the error state\n    this.error(null);\n\n    // If it's already playing we want to trigger a firstplay event now.\n    // The firstplay event relies on both the play and loadstart events\n    // which can happen in any order for a new source\n    if (!this.paused()) {\n      /**\n       * Fired when the user agent begins looking for media data\n       *\n       * @event Player#loadstart\n       * @type {EventTarget~Event}\n       */\n      this.trigger('loadstart');\n      this.trigger('firstplay');\n    } else {\n      // reset the hasStarted state\n      this.hasStarted(false);\n      this.trigger('loadstart');\n    }\n\n    // autoplay happens after loadstart for the browser,\n    // so we mimic that behavior\n    this.manualAutoplay_(this.autoplay());\n  };\n\n  /**\n   * Handle autoplay string values, rather than the typical boolean\n   * values that should be handled by the tech. Note that this is not\n   * part of any specification. Valid values and what they do can be\n   * found on the autoplay getter at Player#autoplay()\n   */\n\n\n  Player.prototype.manualAutoplay_ = function manualAutoplay_(type) {\n    var _this4 = this;\n\n    if (!this.tech_ || typeof type !== 'string') {\n      return;\n    }\n\n    var muted = function muted() {\n      var previouslyMuted = _this4.muted();\n\n      _this4.muted(true);\n\n      var playPromise = _this4.play();\n\n      if (!playPromise || !playPromise.then || !playPromise['catch']) {\n        return;\n      }\n\n      return playPromise['catch'](function (e) {\n        // restore old value of muted on failure\n        _this4.muted(previouslyMuted);\n      });\n    };\n\n    var promise = void 0;\n\n    if (type === 'any') {\n      promise = this.play();\n\n      if (promise && promise.then && promise['catch']) {\n        promise['catch'](function () {\n          return muted();\n        });\n      }\n    } else if (type === 'muted') {\n      promise = muted();\n    } else {\n      promise = this.play();\n    }\n\n    if (!promise || !promise.then || !promise['catch']) {\n      return;\n    }\n\n    return promise.then(function () {\n      _this4.trigger({ type: 'autoplay-success', autoplay: type });\n    })['catch'](function (e) {\n      _this4.trigger({ type: 'autoplay-failure', autoplay: type });\n    });\n  };\n\n  /**\n   * Update the internal source caches so that we return the correct source from\n   * `src()`, `currentSource()`, and `currentSources()`.\n   *\n   * > Note: `currentSources` will not be updated if the source that is passed in exists\n   *         in the current `currentSources` cache.\n   *\n   *\n   * @param {Tech~SourceObject} srcObj\n   *        A string or object source to update our caches to.\n   */\n\n\n  Player.prototype.updateSourceCaches_ = function updateSourceCaches_() {\n    var srcObj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n\n\n    var src = srcObj;\n    var type = '';\n\n    if (typeof src !== 'string') {\n      src = srcObj.src;\n      type = srcObj.type;\n    }\n\n    // if we are a blob url, don't update the source cache\n    // blob urls can arise when playback is done via Media Source Extension (MSE)\n    // such as m3u8 sources with @videojs/http-streaming (VHS)\n    if (/^blob:/.test(src)) {\n      return;\n    }\n\n    // make sure all the caches are set to default values\n    // to prevent null checking\n    this.cache_.source = this.cache_.source || {};\n    this.cache_.sources = this.cache_.sources || [];\n\n    // try to get the type of the src that was passed in\n    if (src && !type) {\n      type = findMimetype(this, src);\n    }\n\n    // update `currentSource` cache always\n    this.cache_.source = mergeOptions({}, srcObj, { src: src, type: type });\n\n    var matchingSources = this.cache_.sources.filter(function (s) {\n      return s.src && s.src === src;\n    });\n    var sourceElSources = [];\n    var sourceEls = this.$$('source');\n    var matchingSourceEls = [];\n\n    for (var i = 0; i < sourceEls.length; i++) {\n      var sourceObj = getAttributes(sourceEls[i]);\n\n      sourceElSources.push(sourceObj);\n\n      if (sourceObj.src && sourceObj.src === src) {\n        matchingSourceEls.push(sourceObj.src);\n      }\n    }\n\n    // if we have matching source els but not matching sources\n    // the current source cache is not up to date\n    if (matchingSourceEls.length && !matchingSources.length) {\n      this.cache_.sources = sourceElSources;\n      // if we don't have matching source or source els set the\n      // sources cache to the `currentSource` cache\n    } else if (!matchingSources.length) {\n      this.cache_.sources = [this.cache_.source];\n    }\n\n    // update the tech `src` cache\n    this.cache_.src = src;\n  };\n\n  /**\n   * *EXPERIMENTAL* Fired when the source is set or changed on the {@link Tech}\n   * causing the media element to reload.\n   *\n   * It will fire for the initial source and each subsequent source.\n   * This event is a custom event from Video.js and is triggered by the {@link Tech}.\n   *\n   * The event object for this event contains a `src` property that will contain the source\n   * that was available when the event was triggered. This is generally only necessary if Video.js\n   * is switching techs while the source was being changed.\n   *\n   * It is also fired when `load` is called on the player (or media element)\n   * because the {@link https://html.spec.whatwg.org/multipage/media.html#dom-media-load|specification for `load`}\n   * says that the resource selection algorithm needs to be aborted and restarted.\n   * In this case, it is very likely that the `src` property will be set to the\n   * empty string `\"\"` to indicate we do not know what the source will be but\n   * that it is changing.\n   *\n   * *This event is currently still experimental and may change in minor releases.*\n   * __To use this, pass `enableSourceset` option to the player.__\n   *\n   * @event Player#sourceset\n   * @type {EventTarget~Event}\n   * @prop {string} src\n   *                The source url available when the `sourceset` was triggered.\n   *                It will be an empty string if we cannot know what the source is\n   *                but know that the source will change.\n   */\n  /**\n   * Retrigger the `sourceset` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#sourceset\n   * @listens Tech#sourceset\n   * @private\n   */\n\n\n  Player.prototype.handleTechSourceset_ = function handleTechSourceset_(event) {\n    var _this5 = this;\n\n    // only update the source cache when the source\n    // was not updated using the player api\n    if (!this.changingSrc_) {\n      // update the source to the intial source right away\n      // in some cases this will be empty string\n      this.updateSourceCaches_(event.src);\n\n      // if the `sourceset` `src` was an empty string\n      // wait for a `loadstart` to update the cache to `currentSrc`.\n      // If a sourceset happens before a `loadstart`, we reset the state\n      // as this function will be called again.\n      if (!event.src) {\n        var updateCache = function updateCache(e) {\n          if (e.type !== 'sourceset') {\n            _this5.updateSourceCaches_(_this5.techGet_('currentSrc'));\n          }\n\n          _this5.tech_.off(['sourceset', 'loadstart'], updateCache);\n        };\n\n        this.tech_.one(['sourceset', 'loadstart'], updateCache);\n      }\n    }\n\n    this.trigger({\n      src: event.src,\n      type: 'sourceset'\n    });\n  };\n\n  /**\n   * Add/remove the vjs-has-started class\n   *\n   * @fires Player#firstplay\n   *\n   * @param {boolean} request\n   *        - true: adds the class\n   *        - false: remove the class\n   *\n   * @return {boolean}\n   *         the boolean value of hasStarted_\n   */\n\n\n  Player.prototype.hasStarted = function hasStarted(request) {\n    if (request === undefined) {\n      // act as getter, if we have no request to change\n      return this.hasStarted_;\n    }\n\n    if (request === this.hasStarted_) {\n      return;\n    }\n\n    this.hasStarted_ = request;\n\n    if (this.hasStarted_) {\n      this.addClass('vjs-has-started');\n      this.trigger('firstplay');\n    } else {\n      this.removeClass('vjs-has-started');\n    }\n  };\n\n  /**\n   * Fired whenever the media begins or resumes playback\n   *\n   * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-play}\n   * @fires Player#play\n   * @listens Tech#play\n   * @private\n   */\n\n\n  Player.prototype.handleTechPlay_ = function handleTechPlay_() {\n    this.removeClass('vjs-ended');\n    this.removeClass('vjs-paused');\n    this.addClass('vjs-playing');\n\n    // hide the poster when the user hits play\n    this.hasStarted(true);\n    /**\n     * Triggered whenever an {@link Tech#play} event happens. Indicates that\n     * playback has started or resumed.\n     *\n     * @event Player#play\n     * @type {EventTarget~Event}\n     */\n    this.trigger('play');\n  };\n\n  /**\n   * Retrigger the `ratechange` event that was triggered by the {@link Tech}.\n   *\n   * If there were any events queued while the playback rate was zero, fire\n   * those events now.\n   *\n   * @private\n   * @method Player#handleTechRateChange_\n   * @fires Player#ratechange\n   * @listens Tech#ratechange\n   */\n\n\n  Player.prototype.handleTechRateChange_ = function handleTechRateChange_() {\n    if (this.tech_.playbackRate() > 0 && this.cache_.lastPlaybackRate === 0) {\n      this.queuedCallbacks_.forEach(function (queued) {\n        return queued.callback(queued.event);\n      });\n      this.queuedCallbacks_ = [];\n    }\n    this.cache_.lastPlaybackRate = this.tech_.playbackRate();\n    /**\n     * Fires when the playing speed of the audio/video is changed\n     *\n     * @event Player#ratechange\n     * @type {event}\n     */\n    this.trigger('ratechange');\n  };\n\n  /**\n   * Retrigger the `waiting` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#waiting\n   * @listens Tech#waiting\n   * @private\n   */\n\n\n  Player.prototype.handleTechWaiting_ = function handleTechWaiting_() {\n    var _this6 = this;\n\n    this.addClass('vjs-waiting');\n    /**\n     * A readyState change on the DOM element has caused playback to stop.\n     *\n     * @event Player#waiting\n     * @type {EventTarget~Event}\n     */\n    this.trigger('waiting');\n    this.one('timeupdate', function () {\n      return _this6.removeClass('vjs-waiting');\n    });\n  };\n\n  /**\n   * Retrigger the `canplay` event that was triggered by the {@link Tech}.\n   * > Note: This is not consistent between browsers. See #1351\n   *\n   * @fires Player#canplay\n   * @listens Tech#canplay\n   * @private\n   */\n\n\n  Player.prototype.handleTechCanPlay_ = function handleTechCanPlay_() {\n    this.removeClass('vjs-waiting');\n    /**\n     * The media has a readyState of HAVE_FUTURE_DATA or greater.\n     *\n     * @event Player#canplay\n     * @type {EventTarget~Event}\n     */\n    this.trigger('canplay');\n  };\n\n  /**\n   * Retrigger the `canplaythrough` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#canplaythrough\n   * @listens Tech#canplaythrough\n   * @private\n   */\n\n\n  Player.prototype.handleTechCanPlayThrough_ = function handleTechCanPlayThrough_() {\n    this.removeClass('vjs-waiting');\n    /**\n     * The media has a readyState of HAVE_ENOUGH_DATA or greater. This means that the\n     * entire media file can be played without buffering.\n     *\n     * @event Player#canplaythrough\n     * @type {EventTarget~Event}\n     */\n    this.trigger('canplaythrough');\n  };\n\n  /**\n   * Retrigger the `playing` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#playing\n   * @listens Tech#playing\n   * @private\n   */\n\n\n  Player.prototype.handleTechPlaying_ = function handleTechPlaying_() {\n    this.removeClass('vjs-waiting');\n    /**\n     * The media is no longer blocked from playback, and has started playing.\n     *\n     * @event Player#playing\n     * @type {EventTarget~Event}\n     */\n    this.trigger('playing');\n  };\n\n  /**\n   * Retrigger the `seeking` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#seeking\n   * @listens Tech#seeking\n   * @private\n   */\n\n\n  Player.prototype.handleTechSeeking_ = function handleTechSeeking_() {\n    this.addClass('vjs-seeking');\n    /**\n     * Fired whenever the player is jumping to a new time\n     *\n     * @event Player#seeking\n     * @type {EventTarget~Event}\n     */\n    this.trigger('seeking');\n  };\n\n  /**\n   * Retrigger the `seeked` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#seeked\n   * @listens Tech#seeked\n   * @private\n   */\n\n\n  Player.prototype.handleTechSeeked_ = function handleTechSeeked_() {\n    this.removeClass('vjs-seeking');\n    /**\n     * Fired when the player has finished jumping to a new time\n     *\n     * @event Player#seeked\n     * @type {EventTarget~Event}\n     */\n    this.trigger('seeked');\n  };\n\n  /**\n   * Retrigger the `firstplay` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#firstplay\n   * @listens Tech#firstplay\n   * @deprecated As of 6.0 firstplay event is deprecated.\n   *             As of 6.0 passing the `starttime` option to the player and the firstplay event are deprecated.\n   * @private\n   */\n\n\n  Player.prototype.handleTechFirstPlay_ = function handleTechFirstPlay_() {\n    // If the first starttime attribute is specified\n    // then we will start at the given offset in seconds\n    if (this.options_.starttime) {\n      log$1.warn('Passing the `starttime` option to the player will be deprecated in 6.0');\n      this.currentTime(this.options_.starttime);\n    }\n\n    this.addClass('vjs-has-started');\n    /**\n     * Fired the first time a video is played. Not part of the HLS spec, and this is\n     * probably not the best implementation yet, so use sparingly. If you don't have a\n     * reason to prevent playback, use `myPlayer.one('play');` instead.\n     *\n     * @event Player#firstplay\n     * @deprecated As of 6.0 firstplay event is deprecated.\n     * @type {EventTarget~Event}\n     */\n    this.trigger('firstplay');\n  };\n\n  /**\n   * Retrigger the `pause` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#pause\n   * @listens Tech#pause\n   * @private\n   */\n\n\n  Player.prototype.handleTechPause_ = function handleTechPause_() {\n    this.removeClass('vjs-playing');\n    this.addClass('vjs-paused');\n    /**\n     * Fired whenever the media has been paused\n     *\n     * @event Player#pause\n     * @type {EventTarget~Event}\n     */\n    this.trigger('pause');\n  };\n\n  /**\n   * Retrigger the `ended` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#ended\n   * @listens Tech#ended\n   * @private\n   */\n\n\n  Player.prototype.handleTechEnded_ = function handleTechEnded_() {\n    this.addClass('vjs-ended');\n    if (this.options_.loop) {\n      this.currentTime(0);\n      this.play();\n    } else if (!this.paused()) {\n      this.pause();\n    }\n\n    /**\n     * Fired when the end of the media resource is reached (currentTime == duration)\n     *\n     * @event Player#ended\n     * @type {EventTarget~Event}\n     */\n    this.trigger('ended');\n  };\n\n  /**\n   * Fired when the duration of the media resource is first known or changed\n   *\n   * @listens Tech#durationchange\n   * @private\n   */\n\n\n  Player.prototype.handleTechDurationChange_ = function handleTechDurationChange_() {\n    this.duration(this.techGet_('duration'));\n  };\n\n  /**\n   * Handle a click on the media element to play/pause\n   *\n   * @param {EventTarget~Event} event\n   *        the event that caused this function to trigger\n   *\n   * @listens Tech#mousedown\n   * @private\n   */\n\n\n  Player.prototype.handleTechClick_ = function handleTechClick_(event) {\n    if (!isSingleLeftClick(event)) {\n      return;\n    }\n\n    // When controls are disabled a click should not toggle playback because\n    // the click is considered a control\n    if (!this.controls_) {\n      return;\n    }\n\n    if (this.paused()) {\n      silencePromise(this.play());\n    } else {\n      this.pause();\n    }\n  };\n\n  /**\n   * Handle a tap on the media element. It will toggle the user\n   * activity state, which hides and shows the controls.\n   *\n   * @listens Tech#tap\n   * @private\n   */\n\n\n  Player.prototype.handleTechTap_ = function handleTechTap_() {\n    this.userActive(!this.userActive());\n  };\n\n  /**\n   * Handle touch to start\n   *\n   * @listens Tech#touchstart\n   * @private\n   */\n\n\n  Player.prototype.handleTechTouchStart_ = function handleTechTouchStart_() {\n    this.userWasActive = this.userActive();\n  };\n\n  /**\n   * Handle touch to move\n   *\n   * @listens Tech#touchmove\n   * @private\n   */\n\n\n  Player.prototype.handleTechTouchMove_ = function handleTechTouchMove_() {\n    if (this.userWasActive) {\n      this.reportUserActivity();\n    }\n  };\n\n  /**\n   * Handle touch to end\n   *\n   * @param {EventTarget~Event} event\n   *        the touchend event that triggered\n   *        this function\n   *\n   * @listens Tech#touchend\n   * @private\n   */\n\n\n  Player.prototype.handleTechTouchEnd_ = function handleTechTouchEnd_(event) {\n    // Stop the mouse events from also happening\n    event.preventDefault();\n  };\n\n  /**\n   * Fired when the player switches in or out of fullscreen mode\n   *\n   * @private\n   * @listens Player#fullscreenchange\n   */\n\n\n  Player.prototype.handleFullscreenChange_ = function handleFullscreenChange_() {\n    if (this.isFullscreen()) {\n      this.addClass('vjs-fullscreen');\n    } else {\n      this.removeClass('vjs-fullscreen');\n    }\n  };\n\n  /**\n   * native click events on the SWF aren't triggered on IE11, Win8.1RT\n   * use stageclick events triggered from inside the SWF instead\n   *\n   * @private\n   * @listens stageclick\n   */\n\n\n  Player.prototype.handleStageClick_ = function handleStageClick_() {\n    this.reportUserActivity();\n  };\n\n  /**\n   * Handle Tech Fullscreen Change\n   *\n   * @param {EventTarget~Event} event\n   *        the fullscreenchange event that triggered this function\n   *\n   * @param {Object} data\n   *        the data that was sent with the event\n   *\n   * @private\n   * @listens Tech#fullscreenchange\n   * @fires Player#fullscreenchange\n   */\n\n\n  Player.prototype.handleTechFullscreenChange_ = function handleTechFullscreenChange_(event, data) {\n    if (data) {\n      this.isFullscreen(data.isFullscreen);\n    }\n    /**\n     * Fired when going in and out of fullscreen.\n     *\n     * @event Player#fullscreenchange\n     * @type {EventTarget~Event}\n     */\n    this.trigger('fullscreenchange');\n  };\n\n  /**\n   * Fires when an error occurred during the loading of an audio/video.\n   *\n   * @private\n   * @listens Tech#error\n   */\n\n\n  Player.prototype.handleTechError_ = function handleTechError_() {\n    var error = this.tech_.error();\n\n    this.error(error);\n  };\n\n  /**\n   * Retrigger the `textdata` event that was triggered by the {@link Tech}.\n   *\n   * @fires Player#textdata\n   * @listens Tech#textdata\n   * @private\n   */\n\n\n  Player.prototype.handleTechTextData_ = function handleTechTextData_() {\n    var data = null;\n\n    if (arguments.length > 1) {\n      data = arguments[1];\n    }\n\n    /**\n     * Fires when we get a textdata event from tech\n     *\n     * @event Player#textdata\n     * @type {EventTarget~Event}\n     */\n    this.trigger('textdata', data);\n  };\n\n  /**\n   * Get object for cached values.\n   *\n   * @return {Object}\n   *         get the current object cache\n   */\n\n\n  Player.prototype.getCache = function getCache() {\n    return this.cache_;\n  };\n\n  /**\n   * Pass values to the playback tech\n   *\n   * @param {string} [method]\n   *        the method to call\n   *\n   * @param {Object} arg\n   *        the argument to pass\n   *\n   * @private\n   */\n\n\n  Player.prototype.techCall_ = function techCall_(method, arg) {\n    // If it's not ready yet, call method when it is\n\n    this.ready(function () {\n      if (method in allowedSetters) {\n        return set$1(this.middleware_, this.tech_, method, arg);\n      } else if (method in allowedMediators) {\n        return mediate(this.middleware_, this.tech_, method, arg);\n      }\n\n      try {\n        if (this.tech_) {\n          this.tech_[method](arg);\n        }\n      } catch (e) {\n        log$1(e);\n        throw e;\n      }\n    }, true);\n  };\n\n  /**\n   * Get calls can't wait for the tech, and sometimes don't need to.\n   *\n   * @param {string} method\n   *        Tech method\n   *\n   * @return {Function|undefined}\n   *         the method or undefined\n   *\n   * @private\n   */\n\n\n  Player.prototype.techGet_ = function techGet_(method) {\n    if (!this.tech_ || !this.tech_.isReady_) {\n      return;\n    }\n\n    if (method in allowedGetters) {\n      return get$1(this.middleware_, this.tech_, method);\n    } else if (method in allowedMediators) {\n      return mediate(this.middleware_, this.tech_, method);\n    }\n\n    // Flash likes to die and reload when you hide or reposition it.\n    // In these cases the object methods go away and we get errors.\n    // When that happens we'll catch the errors and inform tech that it's not ready any more.\n    try {\n      return this.tech_[method]();\n    } catch (e) {\n\n      // When building additional tech libs, an expected method may not be defined yet\n      if (this.tech_[method] === undefined) {\n        log$1('Video.js: ' + method + ' method not defined for ' + this.techName_ + ' playback technology.', e);\n        throw e;\n      }\n\n      // When a method isn't available on the object it throws a TypeError\n      if (e.name === 'TypeError') {\n        log$1('Video.js: ' + method + ' unavailable on ' + this.techName_ + ' playback technology element.', e);\n        this.tech_.isReady_ = false;\n        throw e;\n      }\n\n      // If error unknown, just log and throw\n      log$1(e);\n      throw e;\n    }\n  };\n\n  /**\n   * Attempt to begin playback at the first opportunity.\n   *\n   * @return {Promise|undefined}\n   *         Returns a promise if the browser supports Promises (or one\n   *         was passed in as an option). This promise will be resolved on\n   *         the return value of play. If this is undefined it will fulfill the\n   *         promise chain otherwise the promise chain will be fulfilled when\n   *         the promise from play is fulfilled.\n   */\n\n\n  Player.prototype.play = function play() {\n    var _this7 = this;\n\n    var PromiseClass = this.options_.Promise || window.Promise;\n\n    if (PromiseClass) {\n      return new PromiseClass(function (resolve) {\n        _this7.play_(resolve);\n      });\n    }\n\n    return this.play_();\n  };\n\n  /**\n   * The actual logic for play, takes a callback that will be resolved on the\n   * return value of play. This allows us to resolve to the play promise if there\n   * is one on modern browsers.\n   *\n   * @private\n   * @param {Function} [callback]\n   *        The callback that should be called when the techs play is actually called\n   */\n\n\n  Player.prototype.play_ = function play_() {\n    var _this8 = this;\n\n    var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : silencePromise;\n\n    // If this is called while we have a play queued up on a loadstart, remove\n    // that listener to avoid getting in a potentially bad state.\n    if (this.playOnLoadstart_) {\n      this.off('loadstart', this.playOnLoadstart_);\n    }\n\n    // If the player/tech is not ready, queue up another call to `play()` for\n    // when it is. This will loop back into this method for another attempt at\n    // playback when the tech is ready.\n    if (!this.isReady_) {\n\n      // Bail out if we're already waiting for `ready`!\n      if (this.playWaitingForReady_) {\n        return;\n      }\n\n      this.playWaitingForReady_ = true;\n      this.ready(function () {\n        _this8.playWaitingForReady_ = false;\n        callback(_this8.play());\n      });\n\n      // If the player/tech is ready and we have a source, we can attempt playback.\n    } else if (!this.changingSrc_ && (this.src() || this.currentSrc())) {\n      callback(this.techGet_('play'));\n      return;\n\n      // If the tech is ready, but we do not have a source, we'll need to wait\n      // for both the `ready` and a `loadstart` when the source is finally\n      // resolved by middleware and set on the player.\n      //\n      // This can happen if `play()` is called while changing sources or before\n      // one has been set on the player.\n    } else {\n\n      this.playOnLoadstart_ = function () {\n        _this8.playOnLoadstart_ = null;\n        callback(_this8.play());\n      };\n\n      this.one('loadstart', this.playOnLoadstart_);\n    }\n  };\n\n  /**\n   * Pause the video playback\n   *\n   * @return {Player}\n   *         A reference to the player object this function was called on\n   */\n\n\n  Player.prototype.pause = function pause() {\n    this.techCall_('pause');\n  };\n\n  /**\n   * Check if the player is paused or has yet to play\n   *\n   * @return {boolean}\n   *         - false: if the media is currently playing\n   *         - true: if media is not currently playing\n   */\n\n\n  Player.prototype.paused = function paused() {\n    // The initial state of paused should be true (in Safari it's actually false)\n    return this.techGet_('paused') === false ? false : true;\n  };\n\n  /**\n   * Get a TimeRange object representing the current ranges of time that the user\n   * has played.\n   *\n   * @return {TimeRange}\n   *         A time range object that represents all the increments of time that have\n   *         been played.\n   */\n\n\n  Player.prototype.played = function played() {\n    return this.techGet_('played') || createTimeRanges(0, 0);\n  };\n\n  /**\n   * Returns whether or not the user is \"scrubbing\". Scrubbing is\n   * when the user has clicked the progress bar handle and is\n   * dragging it along the progress bar.\n   *\n   * @param {boolean} [isScrubbing]\n   *        wether the user is or is not scrubbing\n   *\n   * @return {boolean}\n   *         The value of scrubbing when getting\n   */\n\n\n  Player.prototype.scrubbing = function scrubbing(isScrubbing) {\n    if (typeof isScrubbing === 'undefined') {\n      return this.scrubbing_;\n    }\n    this.scrubbing_ = !!isScrubbing;\n\n    if (isScrubbing) {\n      this.addClass('vjs-scrubbing');\n    } else {\n      this.removeClass('vjs-scrubbing');\n    }\n  };\n\n  /**\n   * Get or set the current time (in seconds)\n   *\n   * @param {number|string} [seconds]\n   *        The time to seek to in seconds\n   *\n   * @return {number}\n   *         - the current time in seconds when getting\n   */\n\n\n  Player.prototype.currentTime = function currentTime(seconds) {\n    if (typeof seconds !== 'undefined') {\n      if (seconds < 0) {\n        seconds = 0;\n      }\n      this.techCall_('setCurrentTime', seconds);\n      return;\n    }\n\n    // cache last currentTime and return. default to 0 seconds\n    //\n    // Caching the currentTime is meant to prevent a massive amount of reads on the tech's\n    // currentTime when scrubbing, but may not provide much performance benefit afterall.\n    // Should be tested. Also something has to read the actual current time or the cache will\n    // never get updated.\n    this.cache_.currentTime = this.techGet_('currentTime') || 0;\n    return this.cache_.currentTime;\n  };\n\n  /**\n   * Normally gets the length in time of the video in seconds;\n   * in all but the rarest use cases an argument will NOT be passed to the method\n   *\n   * > **NOTE**: The video must have started loading before the duration can be\n   * known, and in the case of Flash, may not be known until the video starts\n   * playing.\n   *\n   * @fires Player#durationchange\n   *\n   * @param {number} [seconds]\n   *        The duration of the video to set in seconds\n   *\n   * @return {number}\n   *         - The duration of the video in seconds when getting\n   */\n\n\n  Player.prototype.duration = function duration(seconds) {\n    if (seconds === undefined) {\n      // return NaN if the duration is not known\n      return this.cache_.duration !== undefined ? this.cache_.duration : NaN;\n    }\n\n    seconds = parseFloat(seconds);\n\n    // Standardize on Inifity for signaling video is live\n    if (seconds < 0) {\n      seconds = Infinity;\n    }\n\n    if (seconds !== this.cache_.duration) {\n      // Cache the last set value for optimized scrubbing (esp. Flash)\n      this.cache_.duration = seconds;\n\n      if (seconds === Infinity) {\n        this.addClass('vjs-live');\n      } else {\n        this.removeClass('vjs-live');\n      }\n      /**\n       * @event Player#durationchange\n       * @type {EventTarget~Event}\n       */\n      this.trigger('durationchange');\n    }\n  };\n\n  /**\n   * Calculates how much time is left in the video. Not part\n   * of the native video API.\n   *\n   * @return {number}\n   *         The time remaining in seconds\n   */\n\n\n  Player.prototype.remainingTime = function remainingTime() {\n    return this.duration() - this.currentTime();\n  };\n\n  /**\n   * A remaining time function that is intented to be used when\n   * the time is to be displayed directly to the user.\n   *\n   * @return {number}\n   *         The rounded time remaining in seconds\n   */\n\n\n  Player.prototype.remainingTimeDisplay = function remainingTimeDisplay() {\n    return Math.floor(this.duration()) - Math.floor(this.currentTime());\n  };\n\n  //\n  // Kind of like an array of portions of the video that have been downloaded.\n\n  /**\n   * Get a TimeRange object with an array of the times of the video\n   * that have been downloaded. If you just want the percent of the\n   * video that's been downloaded, use bufferedPercent.\n   *\n   * @see [Buffered Spec]{@link http://dev.w3.org/html5/spec/video.html#dom-media-buffered}\n   *\n   * @return {TimeRange}\n   *         A mock TimeRange object (following HTML spec)\n   */\n\n\n  Player.prototype.buffered = function buffered() {\n    var buffered = this.techGet_('buffered');\n\n    if (!buffered || !buffered.length) {\n      buffered = createTimeRanges(0, 0);\n    }\n\n    return buffered;\n  };\n\n  /**\n   * Get the percent (as a decimal) of the video that's been downloaded.\n   * This method is not a part of the native HTML video API.\n   *\n   * @return {number}\n   *         A decimal between 0 and 1 representing the percent\n   *         that is bufferred 0 being 0% and 1 being 100%\n   */\n\n\n  Player.prototype.bufferedPercent = function bufferedPercent$$1() {\n    return bufferedPercent(this.buffered(), this.duration());\n  };\n\n  /**\n   * Get the ending time of the last buffered time range\n   * This is used in the progress bar to encapsulate all time ranges.\n   *\n   * @return {number}\n   *         The end of the last buffered time range\n   */\n\n\n  Player.prototype.bufferedEnd = function bufferedEnd() {\n    var buffered = this.buffered();\n    var duration = this.duration();\n    var end = buffered.end(buffered.length - 1);\n\n    if (end > duration) {\n      end = duration;\n    }\n\n    return end;\n  };\n\n  /**\n   * Get or set the current volume of the media\n   *\n   * @param  {number} [percentAsDecimal]\n   *         The new volume as a decimal percent:\n   *         - 0 is muted/0%/off\n   *         - 1.0 is 100%/full\n   *         - 0.5 is half volume or 50%\n   *\n   * @return {number}\n   *         The current volume as a percent when getting\n   */\n\n\n  Player.prototype.volume = function volume(percentAsDecimal) {\n    var vol = void 0;\n\n    if (percentAsDecimal !== undefined) {\n      // Force value to between 0 and 1\n      vol = Math.max(0, Math.min(1, parseFloat(percentAsDecimal)));\n      this.cache_.volume = vol;\n      this.techCall_('setVolume', vol);\n\n      if (vol > 0) {\n        this.lastVolume_(vol);\n      }\n\n      return;\n    }\n\n    // Default to 1 when returning current volume.\n    vol = parseFloat(this.techGet_('volume'));\n    return isNaN(vol) ? 1 : vol;\n  };\n\n  /**\n   * Get the current muted state, or turn mute on or off\n   *\n   * @param {boolean} [muted]\n   *        - true to mute\n   *        - false to unmute\n   *\n   * @return {boolean}\n   *         - true if mute is on and getting\n   *         - false if mute is off and getting\n   */\n\n\n  Player.prototype.muted = function muted(_muted) {\n    if (_muted !== undefined) {\n      this.techCall_('setMuted', _muted);\n      return;\n    }\n    return this.techGet_('muted') || false;\n  };\n\n  /**\n   * Get the current defaultMuted state, or turn defaultMuted on or off. defaultMuted\n   * indicates the state of muted on intial playback.\n   *\n   * ```js\n   *   var myPlayer = videojs('some-player-id');\n   *\n   *   myPlayer.src(\"http://www.example.com/path/to/video.mp4\");\n   *\n   *   // get, should be false\n   *   console.log(myPlayer.defaultMuted());\n   *   // set to true\n   *   myPlayer.defaultMuted(true);\n   *   // get should be true\n   *   console.log(myPlayer.defaultMuted());\n   * ```\n   *\n   * @param {boolean} [defaultMuted]\n   *        - true to mute\n   *        - false to unmute\n   *\n   * @return {boolean|Player}\n   *         - true if defaultMuted is on and getting\n   *         - false if defaultMuted is off and getting\n   *         - A reference to the current player when setting\n   */\n\n\n  Player.prototype.defaultMuted = function defaultMuted(_defaultMuted) {\n    if (_defaultMuted !== undefined) {\n      return this.techCall_('setDefaultMuted', _defaultMuted);\n    }\n    return this.techGet_('defaultMuted') || false;\n  };\n\n  /**\n   * Get the last volume, or set it\n   *\n   * @param  {number} [percentAsDecimal]\n   *         The new last volume as a decimal percent:\n   *         - 0 is muted/0%/off\n   *         - 1.0 is 100%/full\n   *         - 0.5 is half volume or 50%\n   *\n   * @return {number}\n   *         the current value of lastVolume as a percent when getting\n   *\n   * @private\n   */\n\n\n  Player.prototype.lastVolume_ = function lastVolume_(percentAsDecimal) {\n    if (percentAsDecimal !== undefined && percentAsDecimal !== 0) {\n      this.cache_.lastVolume = percentAsDecimal;\n      return;\n    }\n    return this.cache_.lastVolume;\n  };\n\n  /**\n   * Check if current tech can support native fullscreen\n   * (e.g. with built in controls like iOS, so not our flash swf)\n   *\n   * @return {boolean}\n   *         if native fullscreen is supported\n   */\n\n\n  Player.prototype.supportsFullScreen = function supportsFullScreen() {\n    return this.techGet_('supportsFullScreen') || false;\n  };\n\n  /**\n   * Check if the player is in fullscreen mode or tell the player that it\n   * is or is not in fullscreen mode.\n   *\n   * > NOTE: As of the latest HTML5 spec, isFullscreen is no longer an official\n   * property and instead document.fullscreenElement is used. But isFullscreen is\n   * still a valuable property for internal player workings.\n   *\n   * @param  {boolean} [isFS]\n   *         Set the players current fullscreen state\n   *\n   * @return {boolean}\n   *         - true if fullscreen is on and getting\n   *         - false if fullscreen is off and getting\n   */\n\n\n  Player.prototype.isFullscreen = function isFullscreen(isFS) {\n    if (isFS !== undefined) {\n      this.isFullscreen_ = !!isFS;\n      return;\n    }\n    return !!this.isFullscreen_;\n  };\n\n  /**\n   * Increase the size of the video to full screen\n   * In some browsers, full screen is not supported natively, so it enters\n   * \"full window mode\", where the video fills the browser window.\n   * In browsers and devices that support native full screen, sometimes the\n   * browser's default controls will be shown, and not the Video.js custom skin.\n   * This includes most mobile devices (iOS, Android) and older versions of\n   * Safari.\n   *\n   * @fires Player#fullscreenchange\n   */\n\n\n  Player.prototype.requestFullscreen = function requestFullscreen() {\n    var fsApi = FullscreenApi;\n\n    this.isFullscreen(true);\n\n    if (fsApi.requestFullscreen) {\n      // the browser supports going fullscreen at the element level so we can\n      // take the controls fullscreen as well as the video\n\n      // Trigger fullscreenchange event after change\n      // We have to specifically add this each time, and remove\n      // when canceling fullscreen. Otherwise if there's multiple\n      // players on a page, they would all be reacting to the same fullscreen\n      // events\n      on(document, fsApi.fullscreenchange, bind(this, function documentFullscreenChange(e) {\n        this.isFullscreen(document[fsApi.fullscreenElement]);\n\n        // If cancelling fullscreen, remove event listener.\n        if (this.isFullscreen() === false) {\n          off(document, fsApi.fullscreenchange, documentFullscreenChange);\n        }\n        /**\n         * @event Player#fullscreenchange\n         * @type {EventTarget~Event}\n         */\n        this.trigger('fullscreenchange');\n      }));\n\n      this.el_[fsApi.requestFullscreen]();\n    } else if (this.tech_.supportsFullScreen()) {\n      // we can't take the video.js controls fullscreen but we can go fullscreen\n      // with native controls\n      this.techCall_('enterFullScreen');\n    } else {\n      // fullscreen isn't supported so we'll just stretch the video element to\n      // fill the viewport\n      this.enterFullWindow();\n      /**\n       * @event Player#fullscreenchange\n       * @type {EventTarget~Event}\n       */\n      this.trigger('fullscreenchange');\n    }\n  };\n\n  /**\n   * Return the video to its normal size after having been in full screen mode\n   *\n   * @fires Player#fullscreenchange\n   */\n\n\n  Player.prototype.exitFullscreen = function exitFullscreen() {\n    var fsApi = FullscreenApi;\n\n    this.isFullscreen(false);\n\n    // Check for browser element fullscreen support\n    if (fsApi.requestFullscreen) {\n      document[fsApi.exitFullscreen]();\n    } else if (this.tech_.supportsFullScreen()) {\n      this.techCall_('exitFullScreen');\n    } else {\n      this.exitFullWindow();\n      /**\n       * @event Player#fullscreenchange\n       * @type {EventTarget~Event}\n       */\n      this.trigger('fullscreenchange');\n    }\n  };\n\n  /**\n   * When fullscreen isn't supported we can stretch the\n   * video container to as wide as the browser will let us.\n   *\n   * @fires Player#enterFullWindow\n   */\n\n\n  Player.prototype.enterFullWindow = function enterFullWindow() {\n    this.isFullWindow = true;\n\n    // Storing original doc overflow value to return to when fullscreen is off\n    this.docOrigOverflow = document.documentElement.style.overflow;\n\n    // Add listener for esc key to exit fullscreen\n    on(document, 'keydown', bind(this, this.fullWindowOnEscKey));\n\n    // Hide any scroll bars\n    document.documentElement.style.overflow = 'hidden';\n\n    // Apply fullscreen styles\n    addClass(document.body, 'vjs-full-window');\n\n    /**\n     * @event Player#enterFullWindow\n     * @type {EventTarget~Event}\n     */\n    this.trigger('enterFullWindow');\n  };\n\n  /**\n   * Check for call to either exit full window or\n   * full screen on ESC key\n   *\n   * @param {string} event\n   *        Event to check for key press\n   */\n\n\n  Player.prototype.fullWindowOnEscKey = function fullWindowOnEscKey(event) {\n    if (event.keyCode === 27) {\n      if (this.isFullscreen() === true) {\n        this.exitFullscreen();\n      } else {\n        this.exitFullWindow();\n      }\n    }\n  };\n\n  /**\n   * Exit full window\n   *\n   * @fires Player#exitFullWindow\n   */\n\n\n  Player.prototype.exitFullWindow = function exitFullWindow() {\n    this.isFullWindow = false;\n    off(document, 'keydown', this.fullWindowOnEscKey);\n\n    // Unhide scroll bars.\n    document.documentElement.style.overflow = this.docOrigOverflow;\n\n    // Remove fullscreen styles\n    removeClass(document.body, 'vjs-full-window');\n\n    // Resize the box, controller, and poster to original sizes\n    // this.positionAll();\n    /**\n     * @event Player#exitFullWindow\n     * @type {EventTarget~Event}\n     */\n    this.trigger('exitFullWindow');\n  };\n\n  /**\n   * Check whether the player can play a given mimetype\n   *\n   * @see https://www.w3.org/TR/2011/WD-html5-20110113/video.html#dom-navigator-canplaytype\n   *\n   * @param {string} type\n   *        The mimetype to check\n   *\n   * @return {string}\n   *         'probably', 'maybe', or '' (empty string)\n   */\n\n\n  Player.prototype.canPlayType = function canPlayType(type) {\n    var can = void 0;\n\n    // Loop through each playback technology in the options order\n    for (var i = 0, j = this.options_.techOrder; i < j.length; i++) {\n      var techName = j[i];\n      var tech = Tech.getTech(techName);\n\n      // Support old behavior of techs being registered as components.\n      // Remove once that deprecated behavior is removed.\n      if (!tech) {\n        tech = Component.getComponent(techName);\n      }\n\n      // Check if the current tech is defined before continuing\n      if (!tech) {\n        log$1.error('The \"' + techName + '\" tech is undefined. Skipped browser support check for that tech.');\n        continue;\n      }\n\n      // Check if the browser supports this technology\n      if (tech.isSupported()) {\n        can = tech.canPlayType(type);\n\n        if (can) {\n          return can;\n        }\n      }\n    }\n\n    return '';\n  };\n\n  /**\n   * Select source based on tech-order or source-order\n   * Uses source-order selection if `options.sourceOrder` is truthy. Otherwise,\n   * defaults to tech-order selection\n   *\n   * @param {Array} sources\n   *        The sources for a media asset\n   *\n   * @return {Object|boolean}\n   *         Object of source and tech order or false\n   */\n\n\n  Player.prototype.selectSource = function selectSource(sources) {\n    var _this9 = this;\n\n    // Get only the techs specified in `techOrder` that exist and are supported by the\n    // current platform\n    var techs = this.options_.techOrder.map(function (techName) {\n      return [techName, Tech.getTech(techName)];\n    }).filter(function (_ref) {\n      var techName = _ref[0],\n          tech = _ref[1];\n\n      // Check if the current tech is defined before continuing\n      if (tech) {\n        // Check if the browser supports this technology\n        return tech.isSupported();\n      }\n\n      log$1.error('The \"' + techName + '\" tech is undefined. Skipped browser support check for that tech.');\n      return false;\n    });\n\n    // Iterate over each `innerArray` element once per `outerArray` element and execute\n    // `tester` with both. If `tester` returns a non-falsy value, exit early and return\n    // that value.\n    var findFirstPassingTechSourcePair = function findFirstPassingTechSourcePair(outerArray, innerArray, tester) {\n      var found = void 0;\n\n      outerArray.some(function (outerChoice) {\n        return innerArray.some(function (innerChoice) {\n          found = tester(outerChoice, innerChoice);\n\n          if (found) {\n            return true;\n          }\n        });\n      });\n\n      return found;\n    };\n\n    var foundSourceAndTech = void 0;\n    var flip = function flip(fn) {\n      return function (a, b) {\n        return fn(b, a);\n      };\n    };\n    var finder = function finder(_ref2, source) {\n      var techName = _ref2[0],\n          tech = _ref2[1];\n\n      if (tech.canPlaySource(source, _this9.options_[techName.toLowerCase()])) {\n        return { source: source, tech: techName };\n      }\n    };\n\n    // Depending on the truthiness of `options.sourceOrder`, we swap the order of techs and sources\n    // to select from them based on their priority.\n    if (this.options_.sourceOrder) {\n      // Source-first ordering\n      foundSourceAndTech = findFirstPassingTechSourcePair(sources, techs, flip(finder));\n    } else {\n      // Tech-first ordering\n      foundSourceAndTech = findFirstPassingTechSourcePair(techs, sources, finder);\n    }\n\n    return foundSourceAndTech || false;\n  };\n\n  /**\n   * Get or set the video source.\n   *\n   * @param {Tech~SourceObject|Tech~SourceObject[]|string} [source]\n   *        A SourceObject, an array of SourceObjects, or a string referencing\n   *        a URL to a media source. It is _highly recommended_ that an object\n   *        or array of objects is used here, so that source selection\n   *        algorithms can take the `type` into account.\n   *\n   *        If not provided, this method acts as a getter.\n   *\n   * @return {string|undefined}\n   *         If the `source` argument is missing, returns the current source\n   *         URL. Otherwise, returns nothing/undefined.\n   */\n\n\n  Player.prototype.src = function src(source) {\n    var _this10 = this;\n\n    // getter usage\n    if (typeof source === 'undefined') {\n      return this.cache_.src || '';\n    }\n    // filter out invalid sources and turn our source into\n    // an array of source objects\n    var sources = filterSource(source);\n\n    // if a source was passed in then it is invalid because\n    // it was filtered to a zero length Array. So we have to\n    // show an error\n    if (!sources.length) {\n      this.setTimeout(function () {\n        this.error({ code: 4, message: this.localize(this.options_.notSupportedMessage) });\n      }, 0);\n      return;\n    }\n\n    // intial sources\n    this.changingSrc_ = true;\n\n    this.cache_.sources = sources;\n    this.updateSourceCaches_(sources[0]);\n\n    // middlewareSource is the source after it has been changed by middleware\n    setSource(this, sources[0], function (middlewareSource, mws) {\n      _this10.middleware_ = mws;\n\n      // since sourceSet is async we have to update the cache again after we select a source since\n      // the source that is selected could be out of order from the cache update above this callback.\n      _this10.cache_.sources = sources;\n      _this10.updateSourceCaches_(middlewareSource);\n\n      var err = _this10.src_(middlewareSource);\n\n      if (err) {\n        if (sources.length > 1) {\n          return _this10.src(sources.slice(1));\n        }\n\n        _this10.changingSrc_ = false;\n\n        // We need to wrap this in a timeout to give folks a chance to add error event handlers\n        _this10.setTimeout(function () {\n          this.error({ code: 4, message: this.localize(this.options_.notSupportedMessage) });\n        }, 0);\n\n        // we could not find an appropriate tech, but let's still notify the delegate that this is it\n        // this needs a better comment about why this is needed\n        _this10.triggerReady();\n\n        return;\n      }\n\n      setTech(mws, _this10.tech_);\n    });\n  };\n\n  /**\n   * Set the source object on the tech, returns a boolean that indicates wether\n   * there is a tech that can play the source or not\n   *\n   * @param {Tech~SourceObject} source\n   *        The source object to set on the Tech\n   *\n   * @return {Boolean}\n   *         - True if there is no Tech to playback this source\n   *         - False otherwise\n   *\n   * @private\n   */\n\n\n  Player.prototype.src_ = function src_(source) {\n    var _this11 = this;\n\n    var sourceTech = this.selectSource([source]);\n\n    if (!sourceTech) {\n      return true;\n    }\n\n    if (!titleCaseEquals(sourceTech.tech, this.techName_)) {\n      this.changingSrc_ = true;\n      // load this technology with the chosen source\n      this.loadTech_(sourceTech.tech, sourceTech.source);\n      this.tech_.ready(function () {\n        _this11.changingSrc_ = false;\n      });\n      return false;\n    }\n\n    // wait until the tech is ready to set the source\n    // and set it synchronously if possible (#2326)\n    this.ready(function () {\n\n      // The setSource tech method was added with source handlers\n      // so older techs won't support it\n      // We need to check the direct prototype for the case where subclasses\n      // of the tech do not support source handlers\n      if (this.tech_.constructor.prototype.hasOwnProperty('setSource')) {\n        this.techCall_('setSource', source);\n      } else {\n        this.techCall_('src', source.src);\n      }\n\n      this.changingSrc_ = false;\n    }, true);\n\n    return false;\n  };\n\n  /**\n   * Begin loading the src data.\n   */\n\n\n  Player.prototype.load = function load() {\n    this.techCall_('load');\n  };\n\n  /**\n   * Reset the player. Loads the first tech in the techOrder,\n   * and calls `reset` on the tech`.\n   */\n\n\n  Player.prototype.reset = function reset() {\n    if (this.tech_) {\n      this.tech_.clearTracks('text');\n    }\n    this.loadTech_(this.options_.techOrder[0], null);\n    this.techCall_('reset');\n  };\n\n  /**\n   * Returns all of the current source objects.\n   *\n   * @return {Tech~SourceObject[]}\n   *         The current source objects\n   */\n\n\n  Player.prototype.currentSources = function currentSources() {\n    var source = this.currentSource();\n    var sources = [];\n\n    // assume `{}` or `{ src }`\n    if (Object.keys(source).length !== 0) {\n      sources.push(source);\n    }\n\n    return this.cache_.sources || sources;\n  };\n\n  /**\n   * Returns the current source object.\n   *\n   * @return {Tech~SourceObject}\n   *         The current source object\n   */\n\n\n  Player.prototype.currentSource = function currentSource() {\n    return this.cache_.source || {};\n  };\n\n  /**\n   * Returns the fully qualified URL of the current source value e.g. http://mysite.com/video.mp4\n   * Can be used in conjuction with `currentType` to assist in rebuilding the current source object.\n   *\n   * @return {string}\n   *         The current source\n   */\n\n\n  Player.prototype.currentSrc = function currentSrc() {\n    return this.currentSource() && this.currentSource().src || '';\n  };\n\n  /**\n   * Get the current source type e.g. video/mp4\n   * This can allow you rebuild the current source object so that you could load the same\n   * source and tech later\n   *\n   * @return {string}\n   *         The source MIME type\n   */\n\n\n  Player.prototype.currentType = function currentType() {\n    return this.currentSource() && this.currentSource().type || '';\n  };\n\n  /**\n   * Get or set the preload attribute\n   *\n   * @param {boolean} [value]\n   *        - true means that we should preload\n   *        - false maens that we should not preload\n   *\n   * @return {string}\n   *         The preload attribute value when getting\n   */\n\n\n  Player.prototype.preload = function preload(value) {\n    if (value !== undefined) {\n      this.techCall_('setPreload', value);\n      this.options_.preload = value;\n      return;\n    }\n    return this.techGet_('preload');\n  };\n\n  /**\n   * Get or set the autoplay option. When this is a boolean it will\n   * modify the attribute on the tech. When this is a string the attribute on\n   * the tech will be removed and `Player` will handle autoplay on loadstarts.\n   *\n   * @param {boolean|string} [value]\n   *        - true: autoplay using the browser behavior\n   *        - false: do not autoplay\n   *        - 'play': call play() on every loadstart\n   *        - 'muted': call muted() then play() on every loadstart\n   *        - 'any': call play() on every loadstart. if that fails call muted() then play().\n   *        - *: values other than those listed here will be set `autoplay` to true\n   *\n   * @return {boolean|string}\n   *         The current value of autoplay when getting\n   */\n\n\n  Player.prototype.autoplay = function autoplay(value) {\n    // getter usage\n    if (value === undefined) {\n      return this.options_.autoplay || false;\n    }\n\n    var techAutoplay = void 0;\n\n    // if the value is a valid string set it to that\n    if (typeof value === 'string' && /(any|play|muted)/.test(value)) {\n      this.options_.autoplay = value;\n      this.manualAutoplay_(value);\n      techAutoplay = false;\n\n      // any falsy value sets autoplay to false in the browser,\n      // lets do the same\n    } else if (!value) {\n      this.options_.autoplay = false;\n\n      // any other value (ie truthy) sets autoplay to true\n    } else {\n      this.options_.autoplay = true;\n    }\n\n    techAutoplay = techAutoplay || this.options_.autoplay;\n\n    // if we don't have a tech then we do not queue up\n    // a setAutoplay call on tech ready. We do this because the\n    // autoplay option will be passed in the constructor and we\n    // do not need to set it twice\n    if (this.tech_) {\n      this.techCall_('setAutoplay', techAutoplay);\n    }\n  };\n\n  /**\n   * Set or unset the playsinline attribute.\n   * Playsinline tells the browser that non-fullscreen playback is preferred.\n   *\n   * @param {boolean} [value]\n   *        - true means that we should try to play inline by default\n   *        - false means that we should use the browser's default playback mode,\n   *          which in most cases is inline. iOS Safari is a notable exception\n   *          and plays fullscreen by default.\n   *\n   * @return {string|Player}\n   *         - the current value of playsinline\n   *         - the player when setting\n   *\n   * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}\n   */\n\n\n  Player.prototype.playsinline = function playsinline(value) {\n    if (value !== undefined) {\n      this.techCall_('setPlaysinline', value);\n      this.options_.playsinline = value;\n      return this;\n    }\n    return this.techGet_('playsinline');\n  };\n\n  /**\n   * Get or set the loop attribute on the video element.\n   *\n   * @param {boolean} [value]\n   *        - true means that we should loop the video\n   *        - false means that we should not loop the video\n   *\n   * @return {string}\n   *         The current value of loop when getting\n   */\n\n\n  Player.prototype.loop = function loop(value) {\n    if (value !== undefined) {\n      this.techCall_('setLoop', value);\n      this.options_.loop = value;\n      return;\n    }\n    return this.techGet_('loop');\n  };\n\n  /**\n   * Get or set the poster image source url\n   *\n   * @fires Player#posterchange\n   *\n   * @param {string} [src]\n   *        Poster image source URL\n   *\n   * @return {string}\n   *         The current value of poster when getting\n   */\n\n\n  Player.prototype.poster = function poster(src) {\n    if (src === undefined) {\n      return this.poster_;\n    }\n\n    // The correct way to remove a poster is to set as an empty string\n    // other falsey values will throw errors\n    if (!src) {\n      src = '';\n    }\n\n    if (src === this.poster_) {\n      return;\n    }\n\n    // update the internal poster variable\n    this.poster_ = src;\n\n    // update the tech's poster\n    this.techCall_('setPoster', src);\n\n    this.isPosterFromTech_ = false;\n\n    // alert components that the poster has been set\n    /**\n     * This event fires when the poster image is changed on the player.\n     *\n     * @event Player#posterchange\n     * @type {EventTarget~Event}\n     */\n    this.trigger('posterchange');\n  };\n\n  /**\n   * Some techs (e.g. YouTube) can provide a poster source in an\n   * asynchronous way. We want the poster component to use this\n   * poster source so that it covers up the tech's controls.\n   * (YouTube's play button). However we only want to use this\n   * source if the player user hasn't set a poster through\n   * the normal APIs.\n   *\n   * @fires Player#posterchange\n   * @listens Tech#posterchange\n   * @private\n   */\n\n\n  Player.prototype.handleTechPosterChange_ = function handleTechPosterChange_() {\n    if ((!this.poster_ || this.options_.techCanOverridePoster) && this.tech_ && this.tech_.poster) {\n      var newPoster = this.tech_.poster() || '';\n\n      if (newPoster !== this.poster_) {\n        this.poster_ = newPoster;\n        this.isPosterFromTech_ = true;\n\n        // Let components know the poster has changed\n        this.trigger('posterchange');\n      }\n    }\n  };\n\n  /**\n   * Get or set whether or not the controls are showing.\n   *\n   * @fires Player#controlsenabled\n   *\n   * @param {boolean} [bool]\n   *        - true to turn controls on\n   *        - false to turn controls off\n   *\n   * @return {boolean}\n   *         The current value of controls when getting\n   */\n\n\n  Player.prototype.controls = function controls(bool) {\n    if (bool === undefined) {\n      return !!this.controls_;\n    }\n\n    bool = !!bool;\n\n    // Don't trigger a change event unless it actually changed\n    if (this.controls_ === bool) {\n      return;\n    }\n\n    this.controls_ = bool;\n\n    if (this.usingNativeControls()) {\n      this.techCall_('setControls', bool);\n    }\n\n    if (this.controls_) {\n      this.removeClass('vjs-controls-disabled');\n      this.addClass('vjs-controls-enabled');\n      /**\n       * @event Player#controlsenabled\n       * @type {EventTarget~Event}\n       */\n      this.trigger('controlsenabled');\n      if (!this.usingNativeControls()) {\n        this.addTechControlsListeners_();\n      }\n    } else {\n      this.removeClass('vjs-controls-enabled');\n      this.addClass('vjs-controls-disabled');\n      /**\n       * @event Player#controlsdisabled\n       * @type {EventTarget~Event}\n       */\n      this.trigger('controlsdisabled');\n      if (!this.usingNativeControls()) {\n        this.removeTechControlsListeners_();\n      }\n    }\n  };\n\n  /**\n   * Toggle native controls on/off. Native controls are the controls built into\n   * devices (e.g. default iPhone controls), Flash, or other techs\n   * (e.g. Vimeo Controls)\n   * **This should only be set by the current tech, because only the tech knows\n   * if it can support native controls**\n   *\n   * @fires Player#usingnativecontrols\n   * @fires Player#usingcustomcontrols\n   *\n   * @param {boolean} [bool]\n   *        - true to turn native controls on\n   *        - false to turn native controls off\n   *\n   * @return {boolean}\n   *         The current value of native controls when getting\n   */\n\n\n  Player.prototype.usingNativeControls = function usingNativeControls(bool) {\n    if (bool === undefined) {\n      return !!this.usingNativeControls_;\n    }\n\n    bool = !!bool;\n\n    // Don't trigger a change event unless it actually changed\n    if (this.usingNativeControls_ === bool) {\n      return;\n    }\n\n    this.usingNativeControls_ = bool;\n\n    if (this.usingNativeControls_) {\n      this.addClass('vjs-using-native-controls');\n\n      /**\n       * player is using the native device controls\n       *\n       * @event Player#usingnativecontrols\n       * @type {EventTarget~Event}\n       */\n      this.trigger('usingnativecontrols');\n    } else {\n      this.removeClass('vjs-using-native-controls');\n\n      /**\n       * player is using the custom HTML controls\n       *\n       * @event Player#usingcustomcontrols\n       * @type {EventTarget~Event}\n       */\n      this.trigger('usingcustomcontrols');\n    }\n  };\n\n  /**\n   * Set or get the current MediaError\n   *\n   * @fires Player#error\n   *\n   * @param  {MediaError|string|number} [err]\n   *         A MediaError or a string/number to be turned\n   *         into a MediaError\n   *\n   * @return {MediaError|null}\n   *         The current MediaError when getting (or null)\n   */\n\n\n  Player.prototype.error = function error(err) {\n    if (err === undefined) {\n      return this.error_ || null;\n    }\n\n    // restoring to default\n    if (err === null) {\n      this.error_ = err;\n      this.removeClass('vjs-error');\n      if (this.errorDisplay) {\n        this.errorDisplay.close();\n      }\n      return;\n    }\n\n    this.error_ = new MediaError(err);\n\n    // add the vjs-error classname to the player\n    this.addClass('vjs-error');\n\n    // log the name of the error type and any message\n    // ie8 just logs \"[object object]\" if you just log the error object\n    log$1.error('(CODE:' + this.error_.code + ' ' + MediaError.errorTypes[this.error_.code] + ')', this.error_.message, this.error_);\n\n    /**\n     * @event Player#error\n     * @type {EventTarget~Event}\n     */\n    this.trigger('error');\n\n    return;\n  };\n\n  /**\n   * Report user activity\n   *\n   * @param {Object} event\n   *        Event object\n   */\n\n\n  Player.prototype.reportUserActivity = function reportUserActivity(event) {\n    this.userActivity_ = true;\n  };\n\n  /**\n   * Get/set if user is active\n   *\n   * @fires Player#useractive\n   * @fires Player#userinactive\n   *\n   * @param {boolean} [bool]\n   *        - true if the user is active\n   *        - false if the user is inactive\n   *\n   * @return {boolean}\n   *         The current value of userActive when getting\n   */\n\n\n  Player.prototype.userActive = function userActive(bool) {\n    if (bool === undefined) {\n      return this.userActive_;\n    }\n\n    bool = !!bool;\n\n    if (bool === this.userActive_) {\n      return;\n    }\n\n    this.userActive_ = bool;\n\n    if (this.userActive_) {\n      this.userActivity_ = true;\n      this.removeClass('vjs-user-inactive');\n      this.addClass('vjs-user-active');\n      /**\n       * @event Player#useractive\n       * @type {EventTarget~Event}\n       */\n      this.trigger('useractive');\n      return;\n    }\n\n    // Chrome/Safari/IE have bugs where when you change the cursor it can\n    // trigger a mousemove event. This causes an issue when you're hiding\n    // the cursor when the user is inactive, and a mousemove signals user\n    // activity. Making it impossible to go into inactive mode. Specifically\n    // this happens in fullscreen when we really need to hide the cursor.\n    //\n    // When this gets resolved in ALL browsers it can be removed\n    // https://code.google.com/p/chromium/issues/detail?id=103041\n    if (this.tech_) {\n      this.tech_.one('mousemove', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n      });\n    }\n\n    this.userActivity_ = false;\n    this.removeClass('vjs-user-active');\n    this.addClass('vjs-user-inactive');\n    /**\n     * @event Player#userinactive\n     * @type {EventTarget~Event}\n     */\n    this.trigger('userinactive');\n  };\n\n  /**\n   * Listen for user activity based on timeout value\n   *\n   * @private\n   */\n\n\n  Player.prototype.listenForUserActivity_ = function listenForUserActivity_() {\n    var mouseInProgress = void 0;\n    var lastMoveX = void 0;\n    var lastMoveY = void 0;\n    var handleActivity = bind(this, this.reportUserActivity);\n\n    var handleMouseMove = function handleMouseMove(e) {\n      // #1068 - Prevent mousemove spamming\n      // Chrome Bug: https://code.google.com/p/chromium/issues/detail?id=366970\n      if (e.screenX !== lastMoveX || e.screenY !== lastMoveY) {\n        lastMoveX = e.screenX;\n        lastMoveY = e.screenY;\n        handleActivity();\n      }\n    };\n\n    var handleMouseDown = function handleMouseDown() {\n      handleActivity();\n      // For as long as the they are touching the device or have their mouse down,\n      // we consider them active even if they're not moving their finger or mouse.\n      // So we want to continue to update that they are active\n      this.clearInterval(mouseInProgress);\n      // Setting userActivity=true now and setting the interval to the same time\n      // as the activityCheck interval (250) should ensure we never miss the\n      // next activityCheck\n      mouseInProgress = this.setInterval(handleActivity, 250);\n    };\n\n    var handleMouseUp = function handleMouseUp(event) {\n      handleActivity();\n      // Stop the interval that maintains activity if the mouse/touch is down\n      this.clearInterval(mouseInProgress);\n    };\n\n    // Any mouse movement will be considered user activity\n    this.on('mousedown', handleMouseDown);\n    this.on('mousemove', handleMouseMove);\n    this.on('mouseup', handleMouseUp);\n\n    // Listen for keyboard navigation\n    // Shouldn't need to use inProgress interval because of key repeat\n    this.on('keydown', handleActivity);\n    this.on('keyup', handleActivity);\n\n    // Run an interval every 250 milliseconds instead of stuffing everything into\n    // the mousemove/touchmove function itself, to prevent performance degradation.\n    // `this.reportUserActivity` simply sets this.userActivity_ to true, which\n    // then gets picked up by this loop\n    // http://ejohn.org/blog/learning-from-twitter/\n    var inactivityTimeout = void 0;\n\n    this.setInterval(function () {\n      // Check to see if mouse/touch activity has happened\n      if (!this.userActivity_) {\n        return;\n      }\n\n      // Reset the activity tracker\n      this.userActivity_ = false;\n\n      // If the user state was inactive, set the state to active\n      this.userActive(true);\n\n      // Clear any existing inactivity timeout to start the timer over\n      this.clearTimeout(inactivityTimeout);\n\n      var timeout = this.options_.inactivityTimeout;\n\n      if (timeout <= 0) {\n        return;\n      }\n\n      // In <timeout> milliseconds, if no more activity has occurred the\n      // user will be considered inactive\n      inactivityTimeout = this.setTimeout(function () {\n        // Protect against the case where the inactivityTimeout can trigger just\n        // before the next user activity is picked up by the activity check loop\n        // causing a flicker\n        if (!this.userActivity_) {\n          this.userActive(false);\n        }\n      }, timeout);\n    }, 250);\n  };\n\n  /**\n   * Gets or sets the current playback rate. A playback rate of\n   * 1.0 represents normal speed and 0.5 would indicate half-speed\n   * playback, for instance.\n   *\n   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-playbackrate\n   *\n   * @param {number} [rate]\n   *       New playback rate to set.\n   *\n   * @return {number}\n   *         The current playback rate when getting or 1.0\n   */\n\n\n  Player.prototype.playbackRate = function playbackRate(rate) {\n    if (rate !== undefined) {\n      // NOTE: this.cache_.lastPlaybackRate is set from the tech handler\n      // that is registered above\n      this.techCall_('setPlaybackRate', rate);\n      return;\n    }\n\n    if (this.tech_ && this.tech_.featuresPlaybackRate) {\n      return this.cache_.lastPlaybackRate || this.techGet_('playbackRate');\n    }\n    return 1.0;\n  };\n\n  /**\n   * Gets or sets the current default playback rate. A default playback rate of\n   * 1.0 represents normal speed and 0.5 would indicate half-speed playback, for instance.\n   * defaultPlaybackRate will only represent what the intial playbackRate of a video was, not\n   * not the current playbackRate.\n   *\n   * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-defaultplaybackrate\n   *\n   * @param {number} [rate]\n   *       New default playback rate to set.\n   *\n   * @return {number|Player}\n   *         - The default playback rate when getting or 1.0\n   *         - the player when setting\n   */\n\n\n  Player.prototype.defaultPlaybackRate = function defaultPlaybackRate(rate) {\n    if (rate !== undefined) {\n      return this.techCall_('setDefaultPlaybackRate', rate);\n    }\n\n    if (this.tech_ && this.tech_.featuresPlaybackRate) {\n      return this.techGet_('defaultPlaybackRate');\n    }\n    return 1.0;\n  };\n\n  /**\n   * Gets or sets the audio flag\n   *\n   * @param {boolean} bool\n   *        - true signals that this is an audio player\n   *        - false signals that this is not an audio player\n   *\n   * @return {boolean}\n   *         The current value of isAudio when getting\n   */\n\n\n  Player.prototype.isAudio = function isAudio(bool) {\n    if (bool !== undefined) {\n      this.isAudio_ = !!bool;\n      return;\n    }\n\n    return !!this.isAudio_;\n  };\n\n  /**\n   * A helper method for adding a {@link TextTrack} to our\n   * {@link TextTrackList}.\n   *\n   * In addition to the W3C settings we allow adding additional info through options.\n   *\n   * @see http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack\n   *\n   * @param {string} [kind]\n   *        the kind of TextTrack you are adding\n   *\n   * @param {string} [label]\n   *        the label to give the TextTrack label\n   *\n   * @param {string} [language]\n   *        the language to set on the TextTrack\n   *\n   * @return {TextTrack|undefined}\n   *         the TextTrack that was added or undefined\n   *         if there is no tech\n   */\n\n\n  Player.prototype.addTextTrack = function addTextTrack(kind, label, language) {\n    if (this.tech_) {\n      return this.tech_.addTextTrack(kind, label, language);\n    }\n  };\n\n  /**\n   * Create a remote {@link TextTrack} and an {@link HTMLTrackElement}. It will\n   * automatically removed from the video element whenever the source changes, unless\n   * manualCleanup is set to false.\n   *\n   * @param {Object} options\n   *        Options to pass to {@link HTMLTrackElement} during creation. See\n   *        {@link HTMLTrackElement} for object properties that you should use.\n   *\n   * @param {boolean} [manualCleanup=true] if set to false, the TextTrack will be\n   *\n   * @return {HtmlTrackElement}\n   *         the HTMLTrackElement that was created and added\n   *         to the HtmlTrackElementList and the remote\n   *         TextTrackList\n   *\n   * @deprecated The default value of the \"manualCleanup\" parameter will default\n   *             to \"false\" in upcoming versions of Video.js\n   */\n\n\n  Player.prototype.addRemoteTextTrack = function addRemoteTextTrack(options, manualCleanup) {\n    if (this.tech_) {\n      return this.tech_.addRemoteTextTrack(options, manualCleanup);\n    }\n  };\n\n  /**\n   * Remove a remote {@link TextTrack} from the respective\n   * {@link TextTrackList} and {@link HtmlTrackElementList}.\n   *\n   * @param {Object} track\n   *        Remote {@link TextTrack} to remove\n   *\n   * @return {undefined}\n   *         does not return anything\n   */\n\n\n  Player.prototype.removeRemoteTextTrack = function removeRemoteTextTrack() {\n    var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref3$track = _ref3.track,\n        track = _ref3$track === undefined ? arguments[0] : _ref3$track;\n\n    // destructure the input into an object with a track argument, defaulting to arguments[0]\n    // default the whole argument to an empty object if nothing was passed in\n\n    if (this.tech_) {\n      return this.tech_.removeRemoteTextTrack(track);\n    }\n  };\n\n  /**\n   * Gets available media playback quality metrics as specified by the W3C's Media\n   * Playback Quality API.\n   *\n   * @see [Spec]{@link https://wicg.github.io/media-playback-quality}\n   *\n   * @return {Object|undefined}\n   *         An object with supported media playback quality metrics or undefined if there\n   *         is no tech or the tech does not support it.\n   */\n\n\n  Player.prototype.getVideoPlaybackQuality = function getVideoPlaybackQuality() {\n    return this.techGet_('getVideoPlaybackQuality');\n  };\n\n  /**\n   * Get video width\n   *\n   * @return {number}\n   *         current video width\n   */\n\n\n  Player.prototype.videoWidth = function videoWidth() {\n    return this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth() || 0;\n  };\n\n  /**\n   * Get video height\n   *\n   * @return {number}\n   *         current video height\n   */\n\n\n  Player.prototype.videoHeight = function videoHeight() {\n    return this.tech_ && this.tech_.videoHeight && this.tech_.videoHeight() || 0;\n  };\n\n  /**\n   * The player's language code\n   * NOTE: The language should be set in the player options if you want the\n   * the controls to be built with a specific language. Changing the lanugage\n   * later will not update controls text.\n   *\n   * @param {string} [code]\n   *        the language code to set the player to\n   *\n   * @return {string}\n   *         The current language code when getting\n   */\n\n\n  Player.prototype.language = function language(code) {\n    if (code === undefined) {\n      return this.language_;\n    }\n\n    this.language_ = String(code).toLowerCase();\n  };\n\n  /**\n   * Get the player's language dictionary\n   * Merge every time, because a newly added plugin might call videojs.addLanguage() at any time\n   * Languages specified directly in the player options have precedence\n   *\n   * @return {Array}\n   *         An array of of supported languages\n   */\n\n\n  Player.prototype.languages = function languages() {\n    return mergeOptions(Player.prototype.options_.languages, this.languages_);\n  };\n\n  /**\n   * returns a JavaScript object reperesenting the current track\n   * information. **DOES not return it as JSON**\n   *\n   * @return {Object}\n   *         Object representing the current of track info\n   */\n\n\n  Player.prototype.toJSON = function toJSON() {\n    var options = mergeOptions(this.options_);\n    var tracks = options.tracks;\n\n    options.tracks = [];\n\n    for (var i = 0; i < tracks.length; i++) {\n      var track = tracks[i];\n\n      // deep merge tracks and null out player so no circular references\n      track = mergeOptions(track);\n      track.player = undefined;\n      options.tracks[i] = track;\n    }\n\n    return options;\n  };\n\n  /**\n   * Creates a simple modal dialog (an instance of the {@link ModalDialog}\n   * component) that immediately overlays the player with arbitrary\n   * content and removes itself when closed.\n   *\n   * @param {string|Function|Element|Array|null} content\n   *        Same as {@link ModalDialog#content}'s param of the same name.\n   *        The most straight-forward usage is to provide a string or DOM\n   *        element.\n   *\n   * @param {Object} [options]\n   *        Extra options which will be passed on to the {@link ModalDialog}.\n   *\n   * @return {ModalDialog}\n   *         the {@link ModalDialog} that was created\n   */\n\n\n  Player.prototype.createModal = function createModal(content, options) {\n    var _this12 = this;\n\n    options = options || {};\n    options.content = content || '';\n\n    var modal = new ModalDialog(this, options);\n\n    this.addChild(modal);\n    modal.on('dispose', function () {\n      _this12.removeChild(modal);\n    });\n\n    modal.open();\n    return modal;\n  };\n\n  /**\n   * Gets tag settings\n   *\n   * @param {Element} tag\n   *        The player tag\n   *\n   * @return {Object}\n   *         An object containing all of the settings\n   *         for a player tag\n   */\n\n\n  Player.getTagSettings = function getTagSettings(tag) {\n    var baseOptions = {\n      sources: [],\n      tracks: []\n    };\n\n    var tagOptions = getAttributes(tag);\n    var dataSetup = tagOptions['data-setup'];\n\n    if (hasClass(tag, 'vjs-fluid')) {\n      tagOptions.fluid = true;\n    }\n\n    // Check if data-setup attr exists.\n    if (dataSetup !== null) {\n      // Parse options JSON\n      // If empty string, make it a parsable json object.\n      var _safeParseTuple = safeParseTuple(dataSetup || '{}'),\n          err = _safeParseTuple[0],\n          data = _safeParseTuple[1];\n\n      if (err) {\n        log$1.error(err);\n      }\n      assign(tagOptions, data);\n    }\n\n    assign(baseOptions, tagOptions);\n\n    // Get tag children settings\n    if (tag.hasChildNodes()) {\n      var children = tag.childNodes;\n\n      for (var i = 0, j = children.length; i < j; i++) {\n        var child = children[i];\n        // Change case needed: http://ejohn.org/blog/nodename-case-sensitivity/\n        var childName = child.nodeName.toLowerCase();\n\n        if (childName === 'source') {\n          baseOptions.sources.push(getAttributes(child));\n        } else if (childName === 'track') {\n          baseOptions.tracks.push(getAttributes(child));\n        }\n      }\n    }\n\n    return baseOptions;\n  };\n\n  /**\n   * Determine wether or not flexbox is supported\n   *\n   * @return {boolean}\n   *         - true if flexbox is supported\n   *         - false if flexbox is not supported\n   */\n\n\n  Player.prototype.flexNotSupported_ = function flexNotSupported_() {\n    var elem = document.createElement('i');\n\n    // Note: We don't actually use flexBasis (or flexOrder), but it's one of the more\n    // common flex features that we can rely on when checking for flex support.\n    return !('flexBasis' in elem.style || 'webkitFlexBasis' in elem.style || 'mozFlexBasis' in elem.style || 'msFlexBasis' in elem.style ||\n    // IE10-specific (2012 flex spec)\n    'msFlexOrder' in elem.style);\n  };\n\n  return Player;\n}(Component);\n\n/**\n * Get the {@link VideoTrackList}\n * @link https://html.spec.whatwg.org/multipage/embedded-content.html#videotracklist\n *\n * @return {VideoTrackList}\n *         the current video track list\n *\n * @method Player.prototype.videoTracks\n */\n\n/**\n * Get the {@link AudioTrackList}\n * @link https://html.spec.whatwg.org/multipage/embedded-content.html#audiotracklist\n *\n * @return {AudioTrackList}\n *         the current audio track list\n *\n * @method Player.prototype.audioTracks\n */\n\n/**\n * Get the {@link TextTrackList}\n *\n * @link http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks\n *\n * @return {TextTrackList}\n *         the current text track list\n *\n * @method Player.prototype.textTracks\n */\n\n/**\n * Get the remote {@link TextTrackList}\n *\n * @return {TextTrackList}\n *         The current remote text track list\n *\n * @method Player.prototype.remoteTextTracks\n */\n\n/**\n * Get the remote {@link HtmlTrackElementList} tracks.\n *\n * @return {HtmlTrackElementList}\n *         The current remote text track element list\n *\n * @method Player.prototype.remoteTextTrackEls\n */\n\nALL.names.forEach(function (name$$1) {\n  var props = ALL[name$$1];\n\n  Player.prototype[props.getterName] = function () {\n    if (this.tech_) {\n      return this.tech_[props.getterName]();\n    }\n\n    // if we have not yet loadTech_, we create {video,audio,text}Tracks_\n    // these will be passed to the tech during loading\n    this[props.privateName] = this[props.privateName] || new props.ListClass();\n    return this[props.privateName];\n  };\n});\n\n/**\n * Global player list\n *\n * @type {Object}\n */\nPlayer.players = {};\n\nvar navigator = window.navigator;\n\n/*\n * Player instance options, surfaced using options\n * options = Player.prototype.options_\n * Make changes in options, not here.\n *\n * @type {Object}\n * @private\n */\nPlayer.prototype.options_ = {\n  // Default order of fallback technology\n  techOrder: Tech.defaultTechOrder_,\n\n  html5: {},\n  flash: {},\n\n  // default inactivity timeout\n  inactivityTimeout: 2000,\n\n  // default playback rates\n  playbackRates: [],\n  // Add playback rate selection by adding rates\n  // 'playbackRates': [0.5, 1, 1.5, 2],\n\n  // Included control sets\n  children: ['mediaLoader', 'posterImage', 'textTrackDisplay', 'loadingSpinner', 'bigPlayButton', 'controlBar', 'errorDisplay', 'textTrackSettings'],\n\n  language: navigator && (navigator.languages && navigator.languages[0] || navigator.userLanguage || navigator.language) || 'en',\n\n  // locales and their language translations\n  languages: {},\n\n  // Default message to show when a video cannot be played.\n  notSupportedMessage: 'No compatible source was found for this media.'\n};\n\nif (!IS_IE8) {\n  Player.prototype.options_.children.push('resizeManager');\n}\n\n[\n/**\n * Returns whether or not the player is in the \"ended\" state.\n *\n * @return {Boolean} True if the player is in the ended state, false if not.\n * @method Player#ended\n */\n'ended',\n/**\n * Returns whether or not the player is in the \"seeking\" state.\n *\n * @return {Boolean} True if the player is in the seeking state, false if not.\n * @method Player#seeking\n */\n'seeking',\n/**\n * Returns the TimeRanges of the media that are currently available\n * for seeking to.\n *\n * @return {TimeRanges} the seekable intervals of the media timeline\n * @method Player#seekable\n */\n'seekable',\n/**\n * Returns the current state of network activity for the element, from\n * the codes in the list below.\n * - NETWORK_EMPTY (numeric value 0)\n *   The element has not yet been initialised. All attributes are in\n *   their initial states.\n * - NETWORK_IDLE (numeric value 1)\n *   The element's resource selection algorithm is active and has\n *   selected a resource, but it is not actually using the network at\n *   this time.\n * - NETWORK_LOADING (numeric value 2)\n *   The user agent is actively trying to download data.\n * - NETWORK_NO_SOURCE (numeric value 3)\n *   The element's resource selection algorithm is active, but it has\n *   not yet found a resource to use.\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#network-states\n * @return {number} the current network activity state\n * @method Player#networkState\n */\n'networkState',\n/**\n * Returns a value that expresses the current state of the element\n * with respect to rendering the current playback position, from the\n * codes in the list below.\n * - HAVE_NOTHING (numeric value 0)\n *   No information regarding the media resource is available.\n * - HAVE_METADATA (numeric value 1)\n *   Enough of the resource has been obtained that the duration of the\n *   resource is available.\n * - HAVE_CURRENT_DATA (numeric value 2)\n *   Data for the immediate current playback position is available.\n * - HAVE_FUTURE_DATA (numeric value 3)\n *   Data for the immediate current playback position is available, as\n *   well as enough data for the user agent to advance the current\n *   playback position in the direction of playback.\n * - HAVE_ENOUGH_DATA (numeric value 4)\n *   The user agent estimates that enough data is available for\n *   playback to proceed uninterrupted.\n *\n * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-readystate\n * @return {number} the current playback rendering state\n * @method Player#readyState\n */\n'readyState'].forEach(function (fn) {\n  Player.prototype[fn] = function () {\n    return this.techGet_(fn);\n  };\n});\n\nTECH_EVENTS_RETRIGGER.forEach(function (event) {\n  Player.prototype['handleTech' + toTitleCase(event) + '_'] = function () {\n    return this.trigger(event);\n  };\n});\n\n/**\n * Fired when the player has initial duration and dimension information\n *\n * @event Player#loadedmetadata\n * @type {EventTarget~Event}\n */\n\n/**\n * Fired when the player has downloaded data at the current playback position\n *\n * @event Player#loadeddata\n * @type {EventTarget~Event}\n */\n\n/**\n * Fired when the current playback position has changed *\n * During playback this is fired every 15-250 milliseconds, depending on the\n * playback technology in use.\n *\n * @event Player#timeupdate\n * @type {EventTarget~Event}\n */\n\n/**\n * Fired when the volume changes\n *\n * @event Player#volumechange\n * @type {EventTarget~Event}\n */\n\n/**\n * Reports whether or not a player has a plugin available.\n *\n * This does not report whether or not the plugin has ever been initialized\n * on this player. For that, [usingPlugin]{@link Player#usingPlugin}.\n *\n * @method Player#hasPlugin\n * @param  {string}  name\n *         The name of a plugin.\n *\n * @return {boolean}\n *         Whether or not this player has the requested plugin available.\n */\n\n/**\n * Reports whether or not a player is using a plugin by name.\n *\n * For basic plugins, this only reports whether the plugin has _ever_ been\n * initialized on this player.\n *\n * @method Player#usingPlugin\n * @param  {string} name\n *         The name of a plugin.\n *\n * @return {boolean}\n *         Whether or not this player is using the requested plugin.\n */\n\nComponent.registerComponent('Player', Player);\n\n/**\n * @file plugin.js\n */\n/**\n * The base plugin name.\n *\n * @private\n * @constant\n * @type {string}\n */\nvar BASE_PLUGIN_NAME = 'plugin';\n\n/**\n * The key on which a player's active plugins cache is stored.\n *\n * @private\n * @constant\n * @type     {string}\n */\nvar PLUGIN_CACHE_KEY = 'activePlugins_';\n\n/**\n * Stores registered plugins in a private space.\n *\n * @private\n * @type    {Object}\n */\nvar pluginStorage = {};\n\n/**\n * Reports whether or not a plugin has been registered.\n *\n * @private\n * @param   {string} name\n *          The name of a plugin.\n *\n * @returns {boolean}\n *          Whether or not the plugin has been registered.\n */\nvar pluginExists = function pluginExists(name) {\n  return pluginStorage.hasOwnProperty(name);\n};\n\n/**\n * Get a single registered plugin by name.\n *\n * @private\n * @param   {string} name\n *          The name of a plugin.\n *\n * @returns {Function|undefined}\n *          The plugin (or undefined).\n */\nvar getPlugin = function getPlugin(name) {\n  return pluginExists(name) ? pluginStorage[name] : undefined;\n};\n\n/**\n * Marks a plugin as \"active\" on a player.\n *\n * Also, ensures that the player has an object for tracking active plugins.\n *\n * @private\n * @param   {Player} player\n *          A Video.js player instance.\n *\n * @param   {string} name\n *          The name of a plugin.\n */\nvar markPluginAsActive = function markPluginAsActive(player, name) {\n  player[PLUGIN_CACHE_KEY] = player[PLUGIN_CACHE_KEY] || {};\n  player[PLUGIN_CACHE_KEY][name] = true;\n};\n\n/**\n * Triggers a pair of plugin setup events.\n *\n * @private\n * @param  {Player} player\n *         A Video.js player instance.\n *\n * @param  {Plugin~PluginEventHash} hash\n *         A plugin event hash.\n *\n * @param  {Boolean} [before]\n *         If true, prefixes the event name with \"before\". In other words,\n *         use this to trigger \"beforepluginsetup\" instead of \"pluginsetup\".\n */\nvar triggerSetupEvent = function triggerSetupEvent(player, hash, before) {\n  var eventName = (before ? 'before' : '') + 'pluginsetup';\n\n  player.trigger(eventName, hash);\n  player.trigger(eventName + ':' + hash.name, hash);\n};\n\n/**\n * Takes a basic plugin function and returns a wrapper function which marks\n * on the player that the plugin has been activated.\n *\n * @private\n * @param   {string} name\n *          The name of the plugin.\n *\n * @param   {Function} plugin\n *          The basic plugin.\n *\n * @returns {Function}\n *          A wrapper function for the given plugin.\n */\nvar createBasicPlugin = function createBasicPlugin(name, plugin) {\n  var basicPluginWrapper = function basicPluginWrapper() {\n\n    // We trigger the \"beforepluginsetup\" and \"pluginsetup\" events on the player\n    // regardless, but we want the hash to be consistent with the hash provided\n    // for advanced plugins.\n    //\n    // The only potentially counter-intuitive thing here is the `instance` in\n    // the \"pluginsetup\" event is the value returned by the `plugin` function.\n    triggerSetupEvent(this, { name: name, plugin: plugin, instance: null }, true);\n\n    var instance = plugin.apply(this, arguments);\n\n    markPluginAsActive(this, name);\n    triggerSetupEvent(this, { name: name, plugin: plugin, instance: instance });\n\n    return instance;\n  };\n\n  Object.keys(plugin).forEach(function (prop) {\n    basicPluginWrapper[prop] = plugin[prop];\n  });\n\n  return basicPluginWrapper;\n};\n\n/**\n * Takes a plugin sub-class and returns a factory function for generating\n * instances of it.\n *\n * This factory function will replace itself with an instance of the requested\n * sub-class of Plugin.\n *\n * @private\n * @param   {string} name\n *          The name of the plugin.\n *\n * @param   {Plugin} PluginSubClass\n *          The advanced plugin.\n *\n * @returns {Function}\n */\nvar createPluginFactory = function createPluginFactory(name, PluginSubClass) {\n\n  // Add a `name` property to the plugin prototype so that each plugin can\n  // refer to itself by name.\n  PluginSubClass.prototype.name = name;\n\n  return function () {\n    triggerSetupEvent(this, { name: name, plugin: PluginSubClass, instance: null }, true);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var instance = new (Function.prototype.bind.apply(PluginSubClass, [null].concat([this].concat(args))))();\n\n    // The plugin is replaced by a function that returns the current instance.\n    this[name] = function () {\n      return instance;\n    };\n\n    triggerSetupEvent(this, instance.getEventHash());\n\n    return instance;\n  };\n};\n\n/**\n * Parent class for all advanced plugins.\n *\n * @mixes   module:evented~EventedMixin\n * @mixes   module:stateful~StatefulMixin\n * @fires   Player#beforepluginsetup\n * @fires   Player#beforepluginsetup:$name\n * @fires   Player#pluginsetup\n * @fires   Player#pluginsetup:$name\n * @listens Player#dispose\n * @throws  {Error}\n *          If attempting to instantiate the base {@link Plugin} class\n *          directly instead of via a sub-class.\n */\n\nvar Plugin = function () {\n\n  /**\n   * Creates an instance of this class.\n   *\n   * Sub-classes should call `super` to ensure plugins are properly initialized.\n   *\n   * @param {Player} player\n   *        A Video.js player instance.\n   */\n  function Plugin(player) {\n    classCallCheck(this, Plugin);\n\n    if (this.constructor === Plugin) {\n      throw new Error('Plugin must be sub-classed; not directly instantiated.');\n    }\n\n    this.player = player;\n\n    // Make this object evented, but remove the added `trigger` method so we\n    // use the prototype version instead.\n    evented(this);\n    delete this.trigger;\n\n    stateful(this, this.constructor.defaultState);\n    markPluginAsActive(player, this.name);\n\n    // Auto-bind the dispose method so we can use it as a listener and unbind\n    // it later easily.\n    this.dispose = bind(this, this.dispose);\n\n    // If the player is disposed, dispose the plugin.\n    player.on('dispose', this.dispose);\n  }\n\n  /**\n   * Get the version of the plugin that was set on <pluginName>.VERSION\n   */\n\n\n  Plugin.prototype.version = function version() {\n    return this.constructor.VERSION;\n  };\n\n  /**\n   * Each event triggered by plugins includes a hash of additional data with\n   * conventional properties.\n   *\n   * This returns that object or mutates an existing hash.\n   *\n   * @param   {Object} [hash={}]\n   *          An object to be used as event an event hash.\n   *\n   * @returns {Plugin~PluginEventHash}\n   *          An event hash object with provided properties mixed-in.\n   */\n\n\n  Plugin.prototype.getEventHash = function getEventHash() {\n    var hash = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    hash.name = this.name;\n    hash.plugin = this.constructor;\n    hash.instance = this;\n    return hash;\n  };\n\n  /**\n   * Triggers an event on the plugin object and overrides\n   * {@link module:evented~EventedMixin.trigger|EventedMixin.trigger}.\n   *\n   * @param   {string|Object} event\n   *          An event type or an object with a type property.\n   *\n   * @param   {Object} [hash={}]\n   *          Additional data hash to merge with a\n   *          {@link Plugin~PluginEventHash|PluginEventHash}.\n   *\n   * @returns {boolean}\n   *          Whether or not default was prevented.\n   */\n\n\n  Plugin.prototype.trigger = function trigger$$1(event) {\n    var hash = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    return trigger(this.eventBusEl_, event, this.getEventHash(hash));\n  };\n\n  /**\n   * Handles \"statechanged\" events on the plugin. No-op by default, override by\n   * subclassing.\n   *\n   * @abstract\n   * @param    {Event} e\n   *           An event object provided by a \"statechanged\" event.\n   *\n   * @param    {Object} e.changes\n   *           An object describing changes that occurred with the \"statechanged\"\n   *           event.\n   */\n\n\n  Plugin.prototype.handleStateChanged = function handleStateChanged(e) {};\n\n  /**\n   * Disposes a plugin.\n   *\n   * Subclasses can override this if they want, but for the sake of safety,\n   * it's probably best to subscribe the \"dispose\" event.\n   *\n   * @fires Plugin#dispose\n   */\n\n\n  Plugin.prototype.dispose = function dispose() {\n    var name = this.name,\n        player = this.player;\n\n    /**\n     * Signals that a advanced plugin is about to be disposed.\n     *\n     * @event Plugin#dispose\n     * @type  {EventTarget~Event}\n     */\n\n    this.trigger('dispose');\n    this.off();\n    player.off('dispose', this.dispose);\n\n    // Eliminate any possible sources of leaking memory by clearing up\n    // references between the player and the plugin instance and nulling out\n    // the plugin's state and replacing methods with a function that throws.\n    player[PLUGIN_CACHE_KEY][name] = false;\n    this.player = this.state = null;\n\n    // Finally, replace the plugin name on the player with a new factory\n    // function, so that the plugin is ready to be set up again.\n    player[name] = createPluginFactory(name, pluginStorage[name]);\n  };\n\n  /**\n   * Determines if a plugin is a basic plugin (i.e. not a sub-class of `Plugin`).\n   *\n   * @param   {string|Function} plugin\n   *          If a string, matches the name of a plugin. If a function, will be\n   *          tested directly.\n   *\n   * @returns {boolean}\n   *          Whether or not a plugin is a basic plugin.\n   */\n\n\n  Plugin.isBasic = function isBasic(plugin) {\n    var p = typeof plugin === 'string' ? getPlugin(plugin) : plugin;\n\n    return typeof p === 'function' && !Plugin.prototype.isPrototypeOf(p.prototype);\n  };\n\n  /**\n   * Register a Video.js plugin.\n   *\n   * @param   {string} name\n   *          The name of the plugin to be registered. Must be a string and\n   *          must not match an existing plugin or a method on the `Player`\n   *          prototype.\n   *\n   * @param   {Function} plugin\n   *          A sub-class of `Plugin` or a function for basic plugins.\n   *\n   * @returns {Function}\n   *          For advanced plugins, a factory function for that plugin. For\n   *          basic plugins, a wrapper function that initializes the plugin.\n   */\n\n\n  Plugin.registerPlugin = function registerPlugin(name, plugin) {\n    if (typeof name !== 'string') {\n      throw new Error('Illegal plugin name, \"' + name + '\", must be a string, was ' + (typeof name === 'undefined' ? 'undefined' : _typeof(name)) + '.');\n    }\n\n    if (pluginExists(name)) {\n      log$1.warn('A plugin named \"' + name + '\" already exists. You may want to avoid re-registering plugins!');\n    } else if (Player.prototype.hasOwnProperty(name)) {\n      throw new Error('Illegal plugin name, \"' + name + '\", cannot share a name with an existing player method!');\n    }\n\n    if (typeof plugin !== 'function') {\n      throw new Error('Illegal plugin for \"' + name + '\", must be a function, was ' + (typeof plugin === 'undefined' ? 'undefined' : _typeof(plugin)) + '.');\n    }\n\n    pluginStorage[name] = plugin;\n\n    // Add a player prototype method for all sub-classed plugins (but not for\n    // the base Plugin class).\n    if (name !== BASE_PLUGIN_NAME) {\n      if (Plugin.isBasic(plugin)) {\n        Player.prototype[name] = createBasicPlugin(name, plugin);\n      } else {\n        Player.prototype[name] = createPluginFactory(name, plugin);\n      }\n    }\n\n    return plugin;\n  };\n\n  /**\n   * De-register a Video.js plugin.\n   *\n   * @param {string} name\n   *        The name of the plugin to be deregistered.\n   */\n\n\n  Plugin.deregisterPlugin = function deregisterPlugin(name) {\n    if (name === BASE_PLUGIN_NAME) {\n      throw new Error('Cannot de-register base plugin.');\n    }\n    if (pluginExists(name)) {\n      delete pluginStorage[name];\n      delete Player.prototype[name];\n    }\n  };\n\n  /**\n   * Gets an object containing multiple Video.js plugins.\n   *\n   * @param   {Array} [names]\n   *          If provided, should be an array of plugin names. Defaults to _all_\n   *          plugin names.\n   *\n   * @returns {Object|undefined}\n   *          An object containing plugin(s) associated with their name(s) or\n   *          `undefined` if no matching plugins exist).\n   */\n\n\n  Plugin.getPlugins = function getPlugins() {\n    var names = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Object.keys(pluginStorage);\n\n    var result = void 0;\n\n    names.forEach(function (name) {\n      var plugin = getPlugin(name);\n\n      if (plugin) {\n        result = result || {};\n        result[name] = plugin;\n      }\n    });\n\n    return result;\n  };\n\n  /**\n   * Gets a plugin's version, if available\n   *\n   * @param   {string} name\n   *          The name of a plugin.\n   *\n   * @returns {string}\n   *          The plugin's version or an empty string.\n   */\n\n\n  Plugin.getPluginVersion = function getPluginVersion(name) {\n    var plugin = getPlugin(name);\n\n    return plugin && plugin.VERSION || '';\n  };\n\n  return Plugin;\n}();\n\n/**\n * Gets a plugin by name if it exists.\n *\n * @static\n * @method   getPlugin\n * @memberOf Plugin\n * @param    {string} name\n *           The name of a plugin.\n *\n * @returns  {Function|undefined}\n *           The plugin (or `undefined`).\n */\n\n\nPlugin.getPlugin = getPlugin;\n\n/**\n * The name of the base plugin class as it is registered.\n *\n * @type {string}\n */\nPlugin.BASE_PLUGIN_NAME = BASE_PLUGIN_NAME;\n\nPlugin.registerPlugin(BASE_PLUGIN_NAME, Plugin);\n\n/**\n * Documented in player.js\n *\n * @ignore\n */\nPlayer.prototype.usingPlugin = function (name) {\n  return !!this[PLUGIN_CACHE_KEY] && this[PLUGIN_CACHE_KEY][name] === true;\n};\n\n/**\n * Documented in player.js\n *\n * @ignore\n */\nPlayer.prototype.hasPlugin = function (name) {\n  return !!pluginExists(name);\n};\n\n/**\n * Signals that a plugin is about to be set up on a player.\n *\n * @event    Player#beforepluginsetup\n * @type     {Plugin~PluginEventHash}\n */\n\n/**\n * Signals that a plugin is about to be set up on a player - by name. The name\n * is the name of the plugin.\n *\n * @event    Player#beforepluginsetup:$name\n * @type     {Plugin~PluginEventHash}\n */\n\n/**\n * Signals that a plugin has just been set up on a player.\n *\n * @event    Player#pluginsetup\n * @type     {Plugin~PluginEventHash}\n */\n\n/**\n * Signals that a plugin has just been set up on a player - by name. The name\n * is the name of the plugin.\n *\n * @event    Player#pluginsetup:$name\n * @type     {Plugin~PluginEventHash}\n */\n\n/**\n * @typedef  {Object} Plugin~PluginEventHash\n *\n * @property {string} instance\n *           For basic plugins, the return value of the plugin function. For\n *           advanced plugins, the plugin instance on which the event is fired.\n *\n * @property {string} name\n *           The name of the plugin.\n *\n * @property {string} plugin\n *           For basic plugins, the plugin function. For advanced plugins, the\n *           plugin class/constructor.\n */\n\n/**\n * @file extend.js\n * @module extend\n */\n\n/**\n * A combination of node inherits and babel's inherits (after transpile).\n * Both work the same but node adds `super_` to the subClass\n * and Bable adds the superClass as __proto__. Both seem useful.\n *\n * @param {Object} subClass\n *        The class to inherit to\n *\n * @param {Object} superClass\n *        The class to inherit from\n *\n * @private\n */\nvar _inherits = function _inherits(subClass, superClass) {\n  if (typeof superClass !== 'function' && superClass !== null) {\n    throw new TypeError('Super expression must either be null or a function, not ' + (typeof superClass === 'undefined' ? 'undefined' : _typeof(superClass)));\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n\n  if (superClass) {\n    // node\n    subClass.super_ = superClass;\n  }\n};\n\n/**\n * Function for subclassing using the same inheritance that\n * videojs uses internally\n *\n * @static\n * @const\n *\n * @param {Object} superClass\n *        The class to inherit from\n *\n * @param {Object} [subClassMethods={}]\n *        The class to inherit to\n *\n * @return {Object}\n *         The new object with subClassMethods that inherited superClass.\n */\nvar extendFn = function extendFn(superClass) {\n  var subClassMethods = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var subClass = function subClass() {\n    superClass.apply(this, arguments);\n  };\n\n  var methods = {};\n\n  if ((typeof subClassMethods === 'undefined' ? 'undefined' : _typeof(subClassMethods)) === 'object') {\n    if (subClassMethods.constructor !== Object.prototype.constructor) {\n      subClass = subClassMethods.constructor;\n    }\n    methods = subClassMethods;\n  } else if (typeof subClassMethods === 'function') {\n    subClass = subClassMethods;\n  }\n\n  _inherits(subClass, superClass);\n\n  // Extend subObj's prototype with functions and other properties from props\n  for (var name in methods) {\n    if (methods.hasOwnProperty(name)) {\n      subClass.prototype[name] = methods[name];\n    }\n  }\n\n  return subClass;\n};\n\n/**\n * @file video.js\n * @module videojs\n */\n// Include the built-in techs\n// HTML5 Element Shim for IE8\nif (typeof HTMLVideoElement === 'undefined' && isReal()) {\n  document.createElement('video');\n  document.createElement('audio');\n  document.createElement('track');\n  document.createElement('video-js');\n}\n\n/**\n * Normalize an `id` value by trimming off a leading `#`\n *\n * @param   {string} id\n *          A string, maybe with a leading `#`.\n *\n * @returns {string}\n *          The string, without any leading `#`.\n */\nvar normalizeId = function normalizeId(id) {\n  return id.indexOf('#') === 0 ? id.slice(1) : id;\n};\n\n/**\n * Doubles as the main function for users to create a player instance and also\n * the main library object.\n * The `videojs` function can be used to initialize or retrieve a player.\n  *\n * @param {string|Element} id\n *        Video element or video element ID\n *\n * @param {Object} [options]\n *        Optional options object for config/settings\n *\n * @param {Component~ReadyCallback} [ready]\n *        Optional ready callback\n *\n * @return {Player}\n *         A player instance\n */\nfunction videojs(id, options, ready) {\n  var player = videojs.getPlayer(id);\n\n  if (player) {\n    if (options) {\n      log$1.warn('Player \"' + id + '\" is already initialised. Options will not be applied.');\n    }\n    if (ready) {\n      player.ready(ready);\n    }\n    return player;\n  }\n\n  var el = typeof id === 'string' ? $('#' + normalizeId(id)) : id;\n\n  if (!isEl(el)) {\n    throw new TypeError('The element or ID supplied is not valid. (videojs)');\n  }\n\n  if (!document.body.contains(el)) {\n    log$1.warn('The element supplied is not included in the DOM');\n  }\n\n  options = options || {};\n\n  videojs.hooks('beforesetup').forEach(function (hookFunction) {\n    var opts = hookFunction(el, mergeOptions(options));\n\n    if (!isObject(opts) || Array.isArray(opts)) {\n      log$1.error('please return an object in beforesetup hooks');\n      return;\n    }\n\n    options = mergeOptions(options, opts);\n  });\n\n  // We get the current \"Player\" component here in case an integration has\n  // replaced it with a custom player.\n  var PlayerComponent = Component.getComponent('Player');\n\n  player = new PlayerComponent(el, options, ready);\n\n  videojs.hooks('setup').forEach(function (hookFunction) {\n    return hookFunction(player);\n  });\n\n  return player;\n}\n\n/**\n * An Object that contains lifecycle hooks as keys which point to an array\n * of functions that are run when a lifecycle is triggered\n */\nvideojs.hooks_ = {};\n\n/**\n * Get a list of hooks for a specific lifecycle\n * @function videojs.hooks\n *\n * @param {string} type\n *        the lifecyle to get hooks from\n *\n * @param {Function|Function[]} [fn]\n *        Optionally add a hook (or hooks) to the lifecycle that your are getting.\n *\n * @return {Array}\n *         an array of hooks, or an empty array if there are none.\n */\nvideojs.hooks = function (type, fn) {\n  videojs.hooks_[type] = videojs.hooks_[type] || [];\n  if (fn) {\n    videojs.hooks_[type] = videojs.hooks_[type].concat(fn);\n  }\n  return videojs.hooks_[type];\n};\n\n/**\n * Add a function hook to a specific videojs lifecycle.\n *\n * @param {string} type\n *        the lifecycle to hook the function to.\n *\n * @param {Function|Function[]}\n *        The function or array of functions to attach.\n */\nvideojs.hook = function (type, fn) {\n  videojs.hooks(type, fn);\n};\n\n/**\n * Add a function hook that will only run once to a specific videojs lifecycle.\n *\n * @param {string} type\n *        the lifecycle to hook the function to.\n *\n * @param {Function|Function[]}\n *        The function or array of functions to attach.\n */\nvideojs.hookOnce = function (type, fn) {\n  videojs.hooks(type, [].concat(fn).map(function (original) {\n    var wrapper = function wrapper() {\n      videojs.removeHook(type, wrapper);\n      return original.apply(undefined, arguments);\n    };\n\n    return wrapper;\n  }));\n};\n\n/**\n * Remove a hook from a specific videojs lifecycle.\n *\n * @param {string} type\n *        the lifecycle that the function hooked to\n *\n * @param {Function} fn\n *        The hooked function to remove\n *\n * @return {boolean}\n *         The function that was removed or undef\n */\nvideojs.removeHook = function (type, fn) {\n  var index = videojs.hooks(type).indexOf(fn);\n\n  if (index <= -1) {\n    return false;\n  }\n\n  videojs.hooks_[type] = videojs.hooks_[type].slice();\n  videojs.hooks_[type].splice(index, 1);\n\n  return true;\n};\n\n// Add default styles\nif (window.VIDEOJS_NO_DYNAMIC_STYLE !== true && isReal()) {\n  var style = $('.vjs-styles-defaults');\n\n  if (!style) {\n    style = createStyleElement('vjs-styles-defaults');\n    var head = $('head');\n\n    if (head) {\n      head.insertBefore(style, head.firstChild);\n    }\n    setTextContent(style, '\\n      .video-js {\\n        width: 300px;\\n        height: 150px;\\n      }\\n\\n      .vjs-fluid {\\n        padding-top: 56.25%\\n      }\\n    ');\n  }\n}\n\n// Run Auto-load players\n// You have to wait at least once in case this script is loaded after your\n// video in the DOM (weird behavior only with minified version)\nautoSetupTimeout(1, videojs);\n\n/**\n * Current software version. Follows semver.\n *\n * @type {string}\n */\nvideojs.VERSION = version;\n\n/**\n * The global options object. These are the settings that take effect\n * if no overrides are specified when the player is created.\n *\n * @type {Object}\n */\nvideojs.options = Player.prototype.options_;\n\n/**\n * Get an object with the currently created players, keyed by player ID\n *\n * @return {Object}\n *         The created players\n */\nvideojs.getPlayers = function () {\n  return Player.players;\n};\n\n/**\n * Get a single player based on an ID or DOM element.\n *\n * This is useful if you want to check if an element or ID has an associated\n * Video.js player, but not create one if it doesn't.\n *\n * @param   {string|Element} id\n *          An HTML element - `<video>`, `<audio>`, or `<video-js>` -\n *          or a string matching the `id` of such an element.\n *\n * @returns {Player|undefined}\n *          A player instance or `undefined` if there is no player instance\n *          matching the argument.\n */\nvideojs.getPlayer = function (id) {\n  var players = Player.players;\n  var tag = void 0;\n\n  if (typeof id === 'string') {\n    var nId = normalizeId(id);\n    var player = players[nId];\n\n    if (player) {\n      return player;\n    }\n\n    tag = $('#' + nId);\n  } else {\n    tag = id;\n  }\n\n  if (isEl(tag)) {\n    var _tag = tag,\n        _player = _tag.player,\n        playerId = _tag.playerId;\n\n    // Element may have a `player` property referring to an already created\n    // player instance. If so, return that.\n\n    if (_player || players[playerId]) {\n      return _player || players[playerId];\n    }\n  }\n};\n\n/**\n * Returns an array of all current players.\n *\n * @return {Array}\n *         An array of all players. The array will be in the order that\n *         `Object.keys` provides, which could potentially vary between\n *         JavaScript engines.\n *\n */\nvideojs.getAllPlayers = function () {\n  return (\n\n    // Disposed players leave a key with a `null` value, so we need to make sure\n    // we filter those out.\n    Object.keys(Player.players).map(function (k) {\n      return Player.players[k];\n    }).filter(Boolean)\n  );\n};\n\n/**\n * Expose players object.\n *\n * @memberOf videojs\n * @property {Object} players\n */\nvideojs.players = Player.players;\n\n/**\n * Get a component class object by name\n *\n * @borrows Component.getComponent as videojs.getComponent\n */\nvideojs.getComponent = Component.getComponent;\n\n/**\n * Register a component so it can referred to by name. Used when adding to other\n * components, either through addChild `component.addChild('myComponent')` or through\n * default children options  `{ children: ['myComponent'] }`.\n *\n * > NOTE: You could also just initialize the component before adding.\n * `component.addChild(new MyComponent());`\n *\n * @param {string} name\n *        The class name of the component\n *\n * @param {Component} comp\n *        The component class\n *\n * @return {Component}\n *         The newly registered component\n */\nvideojs.registerComponent = function (name$$1, comp) {\n  if (Tech.isTech(comp)) {\n    log$1.warn('The ' + name$$1 + ' tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)');\n  }\n\n  Component.registerComponent.call(Component, name$$1, comp);\n};\n\n/**\n * Get a Tech class object by name\n *\n * @borrows Tech.getTech as videojs.getTech\n */\nvideojs.getTech = Tech.getTech;\n\n/**\n * Register a Tech so it can referred to by name.\n * This is used in the tech order for the player.\n *\n * @borrows Tech.registerTech as videojs.registerTech\n */\nvideojs.registerTech = Tech.registerTech;\n\n/**\n * Register a middleware to a source type.\n *\n * @param {String} type A string representing a MIME type.\n * @param {function(player):object} middleware A middleware factory that takes a player.\n */\nvideojs.use = use;\n\n/**\n * An object that can be returned by a middleware to signify\n * that the middleware is being terminated.\n *\n * @type {object}\n * @memberOf {videojs}\n * @property {object} middleware.TERMINATOR\n */\n// Object.defineProperty is not available in IE8\nif (!IS_IE8 && Object.defineProperty) {\n  Object.defineProperty(videojs, 'middleware', {\n    value: {},\n    writeable: false,\n    enumerable: true\n  });\n\n  Object.defineProperty(videojs.middleware, 'TERMINATOR', {\n    value: TERMINATOR,\n    writeable: false,\n    enumerable: true\n  });\n} else {\n  videojs.middleware = { TERMINATOR: TERMINATOR };\n}\n\n/**\n * A suite of browser and device tests from {@link browser}.\n *\n * @type {Object}\n * @private\n */\nvideojs.browser = browser;\n\n/**\n * Whether or not the browser supports touch events. Included for backward\n * compatibility with 4.x, but deprecated. Use `videojs.browser.TOUCH_ENABLED`\n * instead going forward.\n *\n * @deprecated since version 5.0\n * @type {boolean}\n */\nvideojs.TOUCH_ENABLED = TOUCH_ENABLED;\n\n/**\n * Subclass an existing class\n * Mimics ES6 subclassing with the `extend` keyword\n *\n * @borrows extend:extendFn as videojs.extend\n */\nvideojs.extend = extendFn;\n\n/**\n * Merge two options objects recursively\n * Performs a deep merge like lodash.merge but **only merges plain objects**\n * (not arrays, elements, anything else)\n * Other values will be copied directly from the second object.\n *\n * @borrows merge-options:mergeOptions as videojs.mergeOptions\n */\nvideojs.mergeOptions = mergeOptions;\n\n/**\n * Change the context (this) of a function\n *\n * > NOTE: as of v5.0 we require an ES5 shim, so you should use the native\n * `function() {}.bind(newContext);` instead of this.\n *\n * @borrows fn:bind as videojs.bind\n */\nvideojs.bind = bind;\n\n/**\n * Register a Video.js plugin.\n *\n * @borrows plugin:registerPlugin as videojs.registerPlugin\n * @method registerPlugin\n *\n * @param  {string} name\n *         The name of the plugin to be registered. Must be a string and\n *         must not match an existing plugin or a method on the `Player`\n *         prototype.\n *\n * @param  {Function} plugin\n *         A sub-class of `Plugin` or a function for basic plugins.\n *\n * @return {Function}\n *         For advanced plugins, a factory function for that plugin. For\n *         basic plugins, a wrapper function that initializes the plugin.\n */\nvideojs.registerPlugin = Plugin.registerPlugin;\n\n/**\n * Deregister a Video.js plugin.\n *\n * @borrows plugin:deregisterPlugin as videojs.deregisterPlugin\n * @method deregisterPlugin\n *\n * @param  {string} name\n *         The name of the plugin to be deregistered. Must be a string and\n *         must match an existing plugin or a method on the `Player`\n *         prototype.\n *\n */\nvideojs.deregisterPlugin = Plugin.deregisterPlugin;\n\n/**\n * Deprecated method to register a plugin with Video.js\n *\n * @deprecated\n *        videojs.plugin() is deprecated; use videojs.registerPlugin() instead\n *\n * @param {string} name\n *        The plugin name\n *\n * @param {Plugin|Function} plugin\n *         The plugin sub-class or function\n */\nvideojs.plugin = function (name$$1, plugin) {\n  log$1.warn('videojs.plugin() is deprecated; use videojs.registerPlugin() instead');\n  return Plugin.registerPlugin(name$$1, plugin);\n};\n\n/**\n * Gets an object containing multiple Video.js plugins.\n *\n * @param  {Array} [names]\n *         If provided, should be an array of plugin names. Defaults to _all_\n *         plugin names.\n *\n * @return {Object|undefined}\n *         An object containing plugin(s) associated with their name(s) or\n *         `undefined` if no matching plugins exist).\n */\nvideojs.getPlugins = Plugin.getPlugins;\n\n/**\n * Gets a plugin by name if it exists.\n *\n * @param  {string} name\n *         The name of a plugin.\n *\n * @return {Function|undefined}\n *         The plugin (or `undefined`).\n */\nvideojs.getPlugin = Plugin.getPlugin;\n\n/**\n * Gets a plugin's version, if available\n *\n * @param  {string} name\n *         The name of a plugin.\n *\n * @return {string}\n *         The plugin's version or an empty string.\n */\nvideojs.getPluginVersion = Plugin.getPluginVersion;\n\n/**\n * Adding languages so that they're available to all players.\n * Example: `videojs.addLanguage('es', { 'Hello': 'Hola' });`\n *\n * @param {string} code\n *        The language code or dictionary property\n *\n * @param {Object} data\n *        The data values to be translated\n *\n * @return {Object}\n *         The resulting language dictionary object\n */\nvideojs.addLanguage = function (code, data) {\n  var _mergeOptions;\n\n  code = ('' + code).toLowerCase();\n\n  videojs.options.languages = mergeOptions(videojs.options.languages, (_mergeOptions = {}, _mergeOptions[code] = data, _mergeOptions));\n\n  return videojs.options.languages[code];\n};\n\n/**\n * Log messages\n *\n * @borrows log:log as videojs.log\n */\nvideojs.log = log$1;\n\n/**\n * Creates an emulated TimeRange object.\n *\n * @borrows time-ranges:createTimeRanges as videojs.createTimeRange\n */\n/**\n * @borrows time-ranges:createTimeRanges as videojs.createTimeRanges\n */\nvideojs.createTimeRange = videojs.createTimeRanges = createTimeRanges;\n\n/**\n * Format seconds as a time string, H:MM:SS or M:SS\n * Supplying a guide (in seconds) will force a number of leading zeros\n * to cover the length of the guide\n *\n * @borrows format-time:formatTime as videojs.formatTime\n */\nvideojs.formatTime = formatTime;\n\n/**\n * Replaces format-time with a custom implementation, to be used in place of the default.\n *\n * @borrows format-time:setFormatTime as videojs.setFormatTime\n *\n * @method setFormatTime\n *\n * @param {Function} customFn\n *        A custom format-time function which will be called with the current time and guide (in seconds) as arguments.\n *        Passed fn should return a string.\n */\nvideojs.setFormatTime = setFormatTime;\n\n/**\n * Resets format-time to the default implementation.\n *\n * @borrows format-time:resetFormatTime as videojs.resetFormatTime\n *\n * @method resetFormatTime\n */\nvideojs.resetFormatTime = resetFormatTime;\n\n/**\n * Resolve and parse the elements of a URL\n *\n * @borrows url:parseUrl as videojs.parseUrl\n *\n */\nvideojs.parseUrl = parseUrl;\n\n/**\n * Returns whether the url passed is a cross domain request or not.\n *\n * @borrows url:isCrossOrigin as videojs.isCrossOrigin\n */\nvideojs.isCrossOrigin = isCrossOrigin;\n\n/**\n * Event target class.\n *\n * @borrows EventTarget as videojs.EventTarget\n */\nvideojs.EventTarget = EventTarget;\n\n/**\n * Add an event listener to element\n * It stores the handler function in a separate cache object\n * and adds a generic handler to the element's event,\n * along with a unique id (guid) to the element.\n *\n * @borrows events:on as videojs.on\n */\nvideojs.on = on;\n\n/**\n * Trigger a listener only once for an event\n *\n * @borrows events:one as videojs.one\n */\nvideojs.one = one;\n\n/**\n * Removes event listeners from an element\n *\n * @borrows events:off as videojs.off\n */\nvideojs.off = off;\n\n/**\n * Trigger an event for an element\n *\n * @borrows events:trigger as videojs.trigger\n */\nvideojs.trigger = trigger;\n\n/**\n * A cross-browser XMLHttpRequest wrapper. Here's a simple example:\n *\n * @param {Object} options\n *        settings for the request.\n *\n * @return {XMLHttpRequest|XDomainRequest}\n *         The request object.\n *\n * @see https://github.com/Raynos/xhr\n */\nvideojs.xhr = xhr;\n\n/**\n * TextTrack class\n *\n * @borrows TextTrack as videojs.TextTrack\n */\nvideojs.TextTrack = TextTrack;\n\n/**\n * export the AudioTrack class so that source handlers can create\n * AudioTracks and then add them to the players AudioTrackList\n *\n * @borrows AudioTrack as videojs.AudioTrack\n */\nvideojs.AudioTrack = AudioTrack;\n\n/**\n * export the VideoTrack class so that source handlers can create\n * VideoTracks and then add them to the players VideoTrackList\n *\n * @borrows VideoTrack as videojs.VideoTrack\n */\nvideojs.VideoTrack = VideoTrack;\n\n/**\n * Determines, via duck typing, whether or not a value is a DOM element.\n *\n * @borrows dom:isEl as videojs.isEl\n * @deprecated Use videojs.dom.isEl() instead\n */\n\n/**\n * Determines, via duck typing, whether or not a value is a text node.\n *\n * @borrows dom:isTextNode as videojs.isTextNode\n * @deprecated Use videojs.dom.isTextNode() instead\n */\n\n/**\n * Creates an element and applies properties.\n *\n * @borrows dom:createEl as videojs.createEl\n * @deprecated Use videojs.dom.createEl() instead\n */\n\n/**\n * Check if an element has a CSS class\n *\n * @borrows dom:hasElClass as videojs.hasClass\n * @deprecated Use videojs.dom.hasClass() instead\n */\n\n/**\n * Add a CSS class name to an element\n *\n * @borrows dom:addElClass as videojs.addClass\n * @deprecated Use videojs.dom.addClass() instead\n */\n\n/**\n * Remove a CSS class name from an element\n *\n * @borrows dom:removeElClass as videojs.removeClass\n * @deprecated Use videojs.dom.removeClass() instead\n */\n\n/**\n * Adds or removes a CSS class name on an element depending on an optional\n * condition or the presence/absence of the class name.\n *\n * @borrows dom:toggleElClass as videojs.toggleClass\n * @deprecated Use videojs.dom.toggleClass() instead\n */\n\n/**\n * Apply attributes to an HTML element.\n *\n * @borrows dom:setElAttributes as videojs.setAttribute\n * @deprecated Use videojs.dom.setAttributes() instead\n */\n\n/**\n * Get an element's attribute values, as defined on the HTML tag\n * Attributes are not the same as properties. They're defined on the tag\n * or with setAttribute (which shouldn't be used with HTML)\n * This will return true or false for boolean attributes.\n *\n * @borrows dom:getElAttributes as videojs.getAttributes\n * @deprecated Use videojs.dom.getAttributes() instead\n */\n\n/**\n * Empties the contents of an element.\n *\n * @borrows dom:emptyEl as videojs.emptyEl\n * @deprecated Use videojs.dom.emptyEl() instead\n */\n\n/**\n * Normalizes and appends content to an element.\n *\n * The content for an element can be passed in multiple types and\n * combinations, whose behavior is as follows:\n *\n * - String\n *   Normalized into a text node.\n *\n * - Element, TextNode\n *   Passed through.\n *\n * - Array\n *   A one-dimensional array of strings, elements, nodes, or functions (which\n *   return single strings, elements, or nodes).\n *\n * - Function\n *   If the sole argument, is expected to produce a string, element,\n *   node, or array.\n *\n * @borrows dom:appendContents as videojs.appendContet\n * @deprecated Use videojs.dom.appendContent() instead\n */\n\n/**\n * Normalizes and inserts content into an element; this is identical to\n * `appendContent()`, except it empties the element first.\n *\n * The content for an element can be passed in multiple types and\n * combinations, whose behavior is as follows:\n *\n * - String\n *   Normalized into a text node.\n *\n * - Element, TextNode\n *   Passed through.\n *\n * - Array\n *   A one-dimensional array of strings, elements, nodes, or functions (which\n *   return single strings, elements, or nodes).\n *\n * - Function\n *   If the sole argument, is expected to produce a string, element,\n *   node, or array.\n *\n * @borrows dom:insertContent as videojs.insertContent\n * @deprecated Use videojs.dom.insertContent() instead\n */\n['isEl', 'isTextNode', 'createEl', 'hasClass', 'addClass', 'removeClass', 'toggleClass', 'setAttributes', 'getAttributes', 'emptyEl', 'appendContent', 'insertContent'].forEach(function (k) {\n  videojs[k] = function () {\n    log$1.warn('videojs.' + k + '() is deprecated; use videojs.dom.' + k + '() instead');\n    return Dom[k].apply(null, arguments);\n  };\n});\n\n/**\n * A safe getComputedStyle with an IE8 fallback.\n *\n * This is because in Firefox, if the player is loaded in an iframe with `display:none`,\n * then `getComputedStyle` returns `null`, so, we do a null-check to make sure\n * that the player doesn't break in these cases.\n * See https://bugzilla.mozilla.org/show_bug.cgi?id=548397 for more details.\n *\n * @borrows computed-style:computedStyle as videojs.computedStyle\n */\nvideojs.computedStyle = computedStyle;\n\n/**\n * Export the Dom utilities for use in external plugins\n * and Tech's\n */\nvideojs.dom = Dom;\n\n/**\n * Export the Url utilities for use in external plugins\n * and Tech's\n */\nvideojs.url = Url;\n\nmodule.exports = videojs;\n","// see https://tools.ietf.org/html/rfc1808\n\n(function (root) {\n  var URL_REGEX = /^((?:[a-zA-Z0-9+\\-.]+:)?)(\\/\\/[^\\/?#]*)?((?:[^\\/?#]*\\/)*[^;?#]*)?(;[^?#]*)?(\\?[^#]*)?(#[^]*)?$/;\n  var FIRST_SEGMENT_REGEX = /^([^\\/?#]*)([^]*)$/;\n  var SLASH_DOT_REGEX = /(?:\\/|^)\\.(?=\\/)/g;\n  var SLASH_DOT_DOT_REGEX = /(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/)[^\\/]*(?=\\/)/g;\n\n  var URLToolkit = {\n    // If opts.alwaysNormalize is true then the path will always be normalized even when it starts with / or //\n    // E.g\n    // With opts.alwaysNormalize = false (default, spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/f/../g\n    // With opts.alwaysNormalize = true (not spec compliant)\n    // http://a.com/b/cd + /e/f/../g => http://a.com/e/g\n    buildAbsoluteURL: function (baseURL, relativeURL, opts) {\n      opts = opts || {};\n      // remove any remaining space and CRLF\n      baseURL = baseURL.trim();\n      relativeURL = relativeURL.trim();\n      if (!relativeURL) {\n        // 2a) If the embedded URL is entirely empty, it inherits the\n        // entire base URL (i.e., is set equal to the base URL)\n        // and we are done.\n        if (!opts.alwaysNormalize) {\n          return baseURL;\n        }\n        var basePartsForNormalise = URLToolkit.parseURL(baseURL);\n        if (!basePartsForNormalise) {\n          throw new Error('Error trying to parse base URL.');\n        }\n        basePartsForNormalise.path = URLToolkit.normalizePath(\n          basePartsForNormalise.path\n        );\n        return URLToolkit.buildURLFromParts(basePartsForNormalise);\n      }\n      var relativeParts = URLToolkit.parseURL(relativeURL);\n      if (!relativeParts) {\n        throw new Error('Error trying to parse relative URL.');\n      }\n      if (relativeParts.scheme) {\n        // 2b) If the embedded URL starts with a scheme name, it is\n        // interpreted as an absolute URL and we are done.\n        if (!opts.alwaysNormalize) {\n          return relativeURL;\n        }\n        relativeParts.path = URLToolkit.normalizePath(relativeParts.path);\n        return URLToolkit.buildURLFromParts(relativeParts);\n      }\n      var baseParts = URLToolkit.parseURL(baseURL);\n      if (!baseParts) {\n        throw new Error('Error trying to parse base URL.');\n      }\n      if (!baseParts.netLoc && baseParts.path && baseParts.path[0] !== '/') {\n        // If netLoc missing and path doesn't start with '/', assume everthing before the first '/' is the netLoc\n        // This causes 'example.com/a' to be handled as '//example.com/a' instead of '/example.com/a'\n        var pathParts = FIRST_SEGMENT_REGEX.exec(baseParts.path);\n        baseParts.netLoc = pathParts[1];\n        baseParts.path = pathParts[2];\n      }\n      if (baseParts.netLoc && !baseParts.path) {\n        baseParts.path = '/';\n      }\n      var builtParts = {\n        // 2c) Otherwise, the embedded URL inherits the scheme of\n        // the base URL.\n        scheme: baseParts.scheme,\n        netLoc: relativeParts.netLoc,\n        path: null,\n        params: relativeParts.params,\n        query: relativeParts.query,\n        fragment: relativeParts.fragment,\n      };\n      if (!relativeParts.netLoc) {\n        // 3) If the embedded URL's <net_loc> is non-empty, we skip to\n        // Step 7.  Otherwise, the embedded URL inherits the <net_loc>\n        // (if any) of the base URL.\n        builtParts.netLoc = baseParts.netLoc;\n        // 4) If the embedded URL path is preceded by a slash \"/\", the\n        // path is not relative and we skip to Step 7.\n        if (relativeParts.path[0] !== '/') {\n          if (!relativeParts.path) {\n            // 5) If the embedded URL path is empty (and not preceded by a\n            // slash), then the embedded URL inherits the base URL path\n            builtParts.path = baseParts.path;\n            // 5a) if the embedded URL's <params> is non-empty, we skip to\n            // step 7; otherwise, it inherits the <params> of the base\n            // URL (if any) and\n            if (!relativeParts.params) {\n              builtParts.params = baseParts.params;\n              // 5b) if the embedded URL's <query> is non-empty, we skip to\n              // step 7; otherwise, it inherits the <query> of the base\n              // URL (if any) and we skip to step 7.\n              if (!relativeParts.query) {\n                builtParts.query = baseParts.query;\n              }\n            }\n          } else {\n            // 6) The last segment of the base URL's path (anything\n            // following the rightmost slash \"/\", or the entire path if no\n            // slash is present) is removed and the embedded URL's path is\n            // appended in its place.\n            var baseURLPath = baseParts.path;\n            var newPath =\n              baseURLPath.substring(0, baseURLPath.lastIndexOf('/') + 1) +\n              relativeParts.path;\n            builtParts.path = URLToolkit.normalizePath(newPath);\n          }\n        }\n      }\n      if (builtParts.path === null) {\n        builtParts.path = opts.alwaysNormalize\n          ? URLToolkit.normalizePath(relativeParts.path)\n          : relativeParts.path;\n      }\n      return URLToolkit.buildURLFromParts(builtParts);\n    },\n    parseURL: function (url) {\n      var parts = URL_REGEX.exec(url);\n      if (!parts) {\n        return null;\n      }\n      return {\n        scheme: parts[1] || '',\n        netLoc: parts[2] || '',\n        path: parts[3] || '',\n        params: parts[4] || '',\n        query: parts[5] || '',\n        fragment: parts[6] || '',\n      };\n    },\n    normalizePath: function (path) {\n      // The following operations are\n      // then applied, in order, to the new path:\n      // 6a) All occurrences of \"./\", where \".\" is a complete path\n      // segment, are removed.\n      // 6b) If the path ends with \".\" as a complete path segment,\n      // that \".\" is removed.\n      path = path.split('').reverse().join('').replace(SLASH_DOT_REGEX, '');\n      // 6c) All occurrences of \"<segment>/../\", where <segment> is a\n      // complete path segment not equal to \"..\", are removed.\n      // Removal of these path segments is performed iteratively,\n      // removing the leftmost matching pattern on each iteration,\n      // until no matching pattern remains.\n      // 6d) If the path ends with \"<segment>/..\", where <segment> is a\n      // complete path segment not equal to \"..\", that\n      // \"<segment>/..\" is removed.\n      while (\n        path.length !== (path = path.replace(SLASH_DOT_DOT_REGEX, '')).length\n      ) {}\n      return path.split('').reverse().join('');\n    },\n    buildURLFromParts: function (parts) {\n      return (\n        parts.scheme +\n        parts.netLoc +\n        parts.path +\n        parts.params +\n        parts.query +\n        parts.fragment\n      );\n    },\n  };\n\n  if (typeof exports === 'object' && typeof module === 'object')\n    module.exports = URLToolkit;\n  else if (typeof define === 'function' && define.amd)\n    define([], function () {\n      return URLToolkit;\n    });\n  else if (typeof exports === 'object') exports['URLToolkit'] = URLToolkit;\n  else root['URLToolkit'] = URLToolkit;\n})(this);\n","/**\n * mux.js\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * Functions that generate fragmented MP4s suitable for use with Media\n * Source Extensions.\n */\n'use strict';\n\nvar UINT32_MAX = Math.pow(2, 32) - 1;\n\nvar box, dinf, esds, ftyp, mdat, mfhd, minf, moof, moov, mvex, mvhd,\n    trak, tkhd, mdia, mdhd, hdlr, sdtp, stbl, stsd, traf, trex,\n    trun, types, MAJOR_BRAND, MINOR_VERSION, AVC1_BRAND, VIDEO_HDLR,\n    AUDIO_HDLR, HDLR_TYPES, VMHD, SMHD, DREF, STCO, STSC, STSZ, STTS;\n\n// pre-calculate constants\n(function() {\n  var i;\n  types = {\n    avc1: [], // codingname\n    avcC: [],\n    btrt: [],\n    dinf: [],\n    dref: [],\n    esds: [],\n    ftyp: [],\n    hdlr: [],\n    mdat: [],\n    mdhd: [],\n    mdia: [],\n    mfhd: [],\n    minf: [],\n    moof: [],\n    moov: [],\n    mp4a: [], // codingname\n    mvex: [],\n    mvhd: [],\n    sdtp: [],\n    smhd: [],\n    stbl: [],\n    stco: [],\n    stsc: [],\n    stsd: [],\n    stsz: [],\n    stts: [],\n    styp: [],\n    tfdt: [],\n    tfhd: [],\n    traf: [],\n    trak: [],\n    trun: [],\n    trex: [],\n    tkhd: [],\n    vmhd: []\n  };\n\n  // In environments where Uint8Array is undefined (e.g., IE8), skip set up so that we\n  // don't throw an error\n  if (typeof Uint8Array === 'undefined') {\n    return;\n  }\n\n  for (i in types) {\n    if (types.hasOwnProperty(i)) {\n      types[i] = [\n        i.charCodeAt(0),\n        i.charCodeAt(1),\n        i.charCodeAt(2),\n        i.charCodeAt(3)\n      ];\n    }\n  }\n\n  MAJOR_BRAND = new Uint8Array([\n    'i'.charCodeAt(0),\n    's'.charCodeAt(0),\n    'o'.charCodeAt(0),\n    'm'.charCodeAt(0)\n  ]);\n  AVC1_BRAND = new Uint8Array([\n    'a'.charCodeAt(0),\n    'v'.charCodeAt(0),\n    'c'.charCodeAt(0),\n    '1'.charCodeAt(0)\n  ]);\n  MINOR_VERSION = new Uint8Array([0, 0, 0, 1]);\n  VIDEO_HDLR = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x76, 0x69, 0x64, 0x65, // handler_type: 'vide'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x56, 0x69, 0x64, 0x65,\n    0x6f, 0x48, 0x61, 0x6e,\n    0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'VideoHandler'\n  ]);\n  AUDIO_HDLR = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // pre_defined\n    0x73, 0x6f, 0x75, 0x6e, // handler_type: 'soun'\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x53, 0x6f, 0x75, 0x6e,\n    0x64, 0x48, 0x61, 0x6e,\n    0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'SoundHandler'\n  ]);\n  HDLR_TYPES = {\n    video: VIDEO_HDLR,\n    audio: AUDIO_HDLR\n  };\n  DREF = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x01, // entry_count\n    0x00, 0x00, 0x00, 0x0c, // entry_size\n    0x75, 0x72, 0x6c, 0x20, // 'url' type\n    0x00, // version 0\n    0x00, 0x00, 0x01 // entry_flags\n  ]);\n  SMHD = new Uint8Array([\n    0x00,             // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00,       // balance, 0 means centered\n    0x00, 0x00        // reserved\n  ]);\n  STCO = new Uint8Array([\n    0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00 // entry_count\n  ]);\n  STSC = STCO;\n  STSZ = new Uint8Array([\n    0x00, // version\n    0x00, 0x00, 0x00, // flags\n    0x00, 0x00, 0x00, 0x00, // sample_size\n    0x00, 0x00, 0x00, 0x00 // sample_count\n  ]);\n  STTS = STCO;\n  VMHD = new Uint8Array([\n    0x00, // version\n    0x00, 0x00, 0x01, // flags\n    0x00, 0x00, // graphicsmode\n    0x00, 0x00,\n    0x00, 0x00,\n    0x00, 0x00 // opcolor\n  ]);\n}());\n\nbox = function(type) {\n  var\n    payload = [],\n    size = 0,\n    i,\n    result,\n    view;\n\n  for (i = 1; i < arguments.length; i++) {\n    payload.push(arguments[i]);\n  }\n\n  i = payload.length;\n\n  // calculate the total size we need to allocate\n  while (i--) {\n    size += payload[i].byteLength;\n  }\n  result = new Uint8Array(size + 8);\n  view = new DataView(result.buffer, result.byteOffset, result.byteLength);\n  view.setUint32(0, result.byteLength);\n  result.set(type, 4);\n\n  // copy the payload into the result\n  for (i = 0, size = 8; i < payload.length; i++) {\n    result.set(payload[i], size);\n    size += payload[i].byteLength;\n  }\n  return result;\n};\n\ndinf = function() {\n  return box(types.dinf, box(types.dref, DREF));\n};\n\nesds = function(track) {\n  return box(types.esds, new Uint8Array([\n    0x00, // version\n    0x00, 0x00, 0x00, // flags\n\n    // ES_Descriptor\n    0x03, // tag, ES_DescrTag\n    0x19, // length\n    0x00, 0x00, // ES_ID\n    0x00, // streamDependenceFlag, URL_flag, reserved, streamPriority\n\n    // DecoderConfigDescriptor\n    0x04, // tag, DecoderConfigDescrTag\n    0x11, // length\n    0x40, // object type\n    0x15,  // streamType\n    0x00, 0x06, 0x00, // bufferSizeDB\n    0x00, 0x00, 0xda, 0xc0, // maxBitrate\n    0x00, 0x00, 0xda, 0xc0, // avgBitrate\n\n    // DecoderSpecificInfo\n    0x05, // tag, DecoderSpecificInfoTag\n    0x02, // length\n    // ISO/IEC 14496-3, AudioSpecificConfig\n    // for samplingFrequencyIndex see ISO/IEC 13818-7:2006, 8.1.3.2.2, Table 35\n    (track.audioobjecttype << 3) | (track.samplingfrequencyindex >>> 1),\n    (track.samplingfrequencyindex << 7) | (track.channelcount << 3),\n    0x06, 0x01, 0x02 // GASpecificConfig\n  ]));\n};\n\nftyp = function() {\n  return box(types.ftyp, MAJOR_BRAND, MINOR_VERSION, MAJOR_BRAND, AVC1_BRAND);\n};\n\nhdlr = function(type) {\n  return box(types.hdlr, HDLR_TYPES[type]);\n};\nmdat = function(data) {\n  return box(types.mdat, data);\n};\nmdhd = function(track) {\n  var result = new Uint8Array([\n    0x00,                   // version 0\n    0x00, 0x00, 0x00,       // flags\n    0x00, 0x00, 0x00, 0x02, // creation_time\n    0x00, 0x00, 0x00, 0x03, // modification_time\n    0x00, 0x01, 0x5f, 0x90, // timescale, 90,000 \"ticks\" per second\n\n    (track.duration >>> 24) & 0xFF,\n    (track.duration >>> 16) & 0xFF,\n    (track.duration >>>  8) & 0xFF,\n    track.duration & 0xFF,  // duration\n    0x55, 0xc4,             // 'und' language (undetermined)\n    0x00, 0x00\n  ]);\n\n  // Use the sample rate from the track metadata, when it is\n  // defined. The sample rate can be parsed out of an ADTS header, for\n  // instance.\n  if (track.samplerate) {\n    result[12] = (track.samplerate >>> 24) & 0xFF;\n    result[13] = (track.samplerate >>> 16) & 0xFF;\n    result[14] = (track.samplerate >>>  8) & 0xFF;\n    result[15] = (track.samplerate)        & 0xFF;\n  }\n\n  return box(types.mdhd, result);\n};\nmdia = function(track) {\n  return box(types.mdia, mdhd(track), hdlr(track.type), minf(track));\n};\nmfhd = function(sequenceNumber) {\n  return box(types.mfhd, new Uint8Array([\n    0x00,\n    0x00, 0x00, 0x00, // flags\n    (sequenceNumber & 0xFF000000) >> 24,\n    (sequenceNumber & 0xFF0000) >> 16,\n    (sequenceNumber & 0xFF00) >> 8,\n    sequenceNumber & 0xFF // sequence_number\n  ]));\n};\nminf = function(track) {\n  return box(types.minf,\n             track.type === 'video' ? box(types.vmhd, VMHD) : box(types.smhd, SMHD),\n             dinf(),\n             stbl(track));\n};\nmoof = function(sequenceNumber, tracks) {\n  var\n    trackFragments = [],\n    i = tracks.length;\n  // build traf boxes for each track fragment\n  while (i--) {\n    trackFragments[i] = traf(tracks[i]);\n  }\n  return box.apply(null, [\n    types.moof,\n    mfhd(sequenceNumber)\n  ].concat(trackFragments));\n};\n/**\n * Returns a movie box.\n * @param tracks {array} the tracks associated with this movie\n * @see ISO/IEC 14496-12:2012(E), section 8.2.1\n */\nmoov = function(tracks) {\n  var\n    i = tracks.length,\n    boxes = [];\n\n  while (i--) {\n    boxes[i] = trak(tracks[i]);\n  }\n\n  return box.apply(null, [types.moov, mvhd(0xffffffff)].concat(boxes).concat(mvex(tracks)));\n};\nmvex = function(tracks) {\n  var\n    i = tracks.length,\n    boxes = [];\n\n  while (i--) {\n    boxes[i] = trex(tracks[i]);\n  }\n  return box.apply(null, [types.mvex].concat(boxes));\n};\nmvhd = function(duration) {\n  var\n    bytes = new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x01, // creation_time\n      0x00, 0x00, 0x00, 0x02, // modification_time\n      0x00, 0x01, 0x5f, 0x90, // timescale, 90,000 \"ticks\" per second\n      (duration & 0xFF000000) >> 24,\n      (duration & 0xFF0000) >> 16,\n      (duration & 0xFF00) >> 8,\n      duration & 0xFF, // duration\n      0x00, 0x01, 0x00, 0x00, // 1.0 rate\n      0x01, 0x00, // 1.0 volume\n      0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x01, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00, // pre_defined\n      0xff, 0xff, 0xff, 0xff // next_track_ID\n    ]);\n  return box(types.mvhd, bytes);\n};\n\nsdtp = function(track) {\n  var\n    samples = track.samples || [],\n    bytes = new Uint8Array(4 + samples.length),\n    flags,\n    i;\n\n  // leave the full box header (4 bytes) all zero\n\n  // write the sample table\n  for (i = 0; i < samples.length; i++) {\n    flags = samples[i].flags;\n\n    bytes[i + 4] = (flags.dependsOn << 4) |\n      (flags.isDependedOn << 2) |\n      (flags.hasRedundancy);\n  }\n\n  return box(types.sdtp,\n             bytes);\n};\n\nstbl = function(track) {\n  return box(types.stbl,\n             stsd(track),\n             box(types.stts, STTS),\n             box(types.stsc, STSC),\n             box(types.stsz, STSZ),\n             box(types.stco, STCO));\n};\n\n(function() {\n  var videoSample, audioSample;\n\n  stsd = function(track) {\n\n    return box(types.stsd, new Uint8Array([\n      0x00, // version 0\n      0x00, 0x00, 0x00, // flags\n      0x00, 0x00, 0x00, 0x01\n    ]), track.type === 'video' ? videoSample(track) : audioSample(track));\n  };\n\n  videoSample = function(track) {\n    var\n      sps = track.sps || [],\n      pps = track.pps || [],\n      sequenceParameterSets = [],\n      pictureParameterSets = [],\n      i;\n\n    // assemble the SPSs\n    for (i = 0; i < sps.length; i++) {\n      sequenceParameterSets.push((sps[i].byteLength & 0xFF00) >>> 8);\n      sequenceParameterSets.push((sps[i].byteLength & 0xFF)); // sequenceParameterSetLength\n      sequenceParameterSets = sequenceParameterSets.concat(Array.prototype.slice.call(sps[i])); // SPS\n    }\n\n    // assemble the PPSs\n    for (i = 0; i < pps.length; i++) {\n      pictureParameterSets.push((pps[i].byteLength & 0xFF00) >>> 8);\n      pictureParameterSets.push((pps[i].byteLength & 0xFF));\n      pictureParameterSets = pictureParameterSets.concat(Array.prototype.slice.call(pps[i]));\n    }\n\n    return box(types.avc1, new Uint8Array([\n      0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // data_reference_index\n      0x00, 0x00, // pre_defined\n      0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00, // pre_defined\n      (track.width & 0xff00) >> 8,\n      track.width & 0xff, // width\n      (track.height & 0xff00) >> 8,\n      track.height & 0xff, // height\n      0x00, 0x48, 0x00, 0x00, // horizresolution\n      0x00, 0x48, 0x00, 0x00, // vertresolution\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // frame_count\n      0x13,\n      0x76, 0x69, 0x64, 0x65,\n      0x6f, 0x6a, 0x73, 0x2d,\n      0x63, 0x6f, 0x6e, 0x74,\n      0x72, 0x69, 0x62, 0x2d,\n      0x68, 0x6c, 0x73, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, // compressorname\n      0x00, 0x18, // depth = 24\n      0x11, 0x11 // pre_defined = -1\n    ]), box(types.avcC, new Uint8Array([\n      0x01, // configurationVersion\n      track.profileIdc, // AVCProfileIndication\n      track.profileCompatibility, // profile_compatibility\n      track.levelIdc, // AVCLevelIndication\n      0xff // lengthSizeMinusOne, hard-coded to 4 bytes\n    ].concat([\n      sps.length // numOfSequenceParameterSets\n    ]).concat(sequenceParameterSets).concat([\n      pps.length // numOfPictureParameterSets\n    ]).concat(pictureParameterSets))), // \"PPS\"\n            box(types.btrt, new Uint8Array([\n              0x00, 0x1c, 0x9c, 0x80, // bufferSizeDB\n              0x00, 0x2d, 0xc6, 0xc0, // maxBitrate\n              0x00, 0x2d, 0xc6, 0xc0\n            ])) // avgBitrate\n              );\n  };\n\n  audioSample = function(track) {\n    return box(types.mp4a, new Uint8Array([\n\n      // SampleEntry, ISO/IEC 14496-12\n      0x00, 0x00, 0x00,\n      0x00, 0x00, 0x00, // reserved\n      0x00, 0x01, // data_reference_index\n\n      // AudioSampleEntry, ISO/IEC 14496-12\n      0x00, 0x00, 0x00, 0x00, // reserved\n      0x00, 0x00, 0x00, 0x00, // reserved\n      (track.channelcount & 0xff00) >> 8,\n      (track.channelcount & 0xff), // channelcount\n\n      (track.samplesize & 0xff00) >> 8,\n      (track.samplesize & 0xff), // samplesize\n      0x00, 0x00, // pre_defined\n      0x00, 0x00, // reserved\n\n      (track.samplerate & 0xff00) >> 8,\n      (track.samplerate & 0xff),\n      0x00, 0x00 // samplerate, 16.16\n\n      // MP4AudioSampleEntry, ISO/IEC 14496-14\n    ]), esds(track));\n  };\n}());\n\ntkhd = function(track) {\n  var result = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x07, // flags\n    0x00, 0x00, 0x00, 0x00, // creation_time\n    0x00, 0x00, 0x00, 0x00, // modification_time\n    (track.id & 0xFF000000) >> 24,\n    (track.id & 0xFF0000) >> 16,\n    (track.id & 0xFF00) >> 8,\n    track.id & 0xFF, // track_ID\n    0x00, 0x00, 0x00, 0x00, // reserved\n    (track.duration & 0xFF000000) >> 24,\n    (track.duration & 0xFF0000) >> 16,\n    (track.duration & 0xFF00) >> 8,\n    track.duration & 0xFF, // duration\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00, // reserved\n    0x00, 0x00, // layer\n    0x00, 0x00, // alternate_group\n    0x01, 0x00, // non-audio track volume\n    0x00, 0x00, // reserved\n    0x00, 0x01, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x01, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x00, 0x00, 0x00, 0x00,\n    0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\n    (track.width & 0xFF00) >> 8,\n    track.width & 0xFF,\n    0x00, 0x00, // width\n    (track.height & 0xFF00) >> 8,\n    track.height & 0xFF,\n    0x00, 0x00 // height\n  ]);\n\n  return box(types.tkhd, result);\n};\n\n/**\n * Generate a track fragment (traf) box. A traf box collects metadata\n * about tracks in a movie fragment (moof) box.\n */\ntraf = function(track) {\n  var trackFragmentHeader, trackFragmentDecodeTime, trackFragmentRun,\n      sampleDependencyTable, dataOffset,\n      upperWordBaseMediaDecodeTime, lowerWordBaseMediaDecodeTime;\n\n  trackFragmentHeader = box(types.tfhd, new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x3a, // flags\n    (track.id & 0xFF000000) >> 24,\n    (track.id & 0xFF0000) >> 16,\n    (track.id & 0xFF00) >> 8,\n    (track.id & 0xFF), // track_ID\n    0x00, 0x00, 0x00, 0x01, // sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x00, 0x00, 0x00  // default_sample_flags\n  ]));\n\n  upperWordBaseMediaDecodeTime = Math.floor(track.baseMediaDecodeTime / (UINT32_MAX + 1));\n  lowerWordBaseMediaDecodeTime = Math.floor(track.baseMediaDecodeTime % (UINT32_MAX + 1));\n\n  trackFragmentDecodeTime = box(types.tfdt, new Uint8Array([\n    0x01, // version 1\n    0x00, 0x00, 0x00, // flags\n    // baseMediaDecodeTime\n    (upperWordBaseMediaDecodeTime >>> 24) & 0xFF,\n    (upperWordBaseMediaDecodeTime >>> 16) & 0xFF,\n    (upperWordBaseMediaDecodeTime >>>  8) & 0xFF,\n    upperWordBaseMediaDecodeTime & 0xFF,\n    (lowerWordBaseMediaDecodeTime >>> 24) & 0xFF,\n    (lowerWordBaseMediaDecodeTime >>> 16) & 0xFF,\n    (lowerWordBaseMediaDecodeTime >>>  8) & 0xFF,\n    lowerWordBaseMediaDecodeTime & 0xFF\n  ]));\n\n  // the data offset specifies the number of bytes from the start of\n  // the containing moof to the first payload byte of the associated\n  // mdat\n  dataOffset = (32 + // tfhd\n                20 + // tfdt\n                8 +  // traf header\n                16 + // mfhd\n                8 +  // moof header\n                8);  // mdat header\n\n  // audio tracks require less metadata\n  if (track.type === 'audio') {\n    trackFragmentRun = trun(track, dataOffset);\n    return box(types.traf,\n               trackFragmentHeader,\n               trackFragmentDecodeTime,\n               trackFragmentRun);\n  }\n\n  // video tracks should contain an independent and disposable samples\n  // box (sdtp)\n  // generate one and adjust offsets to match\n  sampleDependencyTable = sdtp(track);\n  trackFragmentRun = trun(track,\n                          sampleDependencyTable.length + dataOffset);\n  return box(types.traf,\n             trackFragmentHeader,\n             trackFragmentDecodeTime,\n             trackFragmentRun,\n             sampleDependencyTable);\n};\n\n/**\n * Generate a track box.\n * @param track {object} a track definition\n * @return {Uint8Array} the track box\n */\ntrak = function(track) {\n  track.duration = track.duration || 0xffffffff;\n  return box(types.trak,\n             tkhd(track),\n             mdia(track));\n};\n\ntrex = function(track) {\n  var result = new Uint8Array([\n    0x00, // version 0\n    0x00, 0x00, 0x00, // flags\n    (track.id & 0xFF000000) >> 24,\n    (track.id & 0xFF0000) >> 16,\n    (track.id & 0xFF00) >> 8,\n    (track.id & 0xFF), // track_ID\n    0x00, 0x00, 0x00, 0x01, // default_sample_description_index\n    0x00, 0x00, 0x00, 0x00, // default_sample_duration\n    0x00, 0x00, 0x00, 0x00, // default_sample_size\n    0x00, 0x01, 0x00, 0x01 // default_sample_flags\n  ]);\n  // the last two bytes of default_sample_flags is the sample\n  // degradation priority, a hint about the importance of this sample\n  // relative to others. Lower the degradation priority for all sample\n  // types other than video.\n  if (track.type !== 'video') {\n    result[result.length - 1] = 0x00;\n  }\n\n  return box(types.trex, result);\n};\n\n(function() {\n  var audioTrun, videoTrun, trunHeader;\n\n  // This method assumes all samples are uniform. That is, if a\n  // duration is present for the first sample, it will be present for\n  // all subsequent samples.\n  // see ISO/IEC 14496-12:2012, Section 8.8.8.1\n  trunHeader = function(samples, offset) {\n    var durationPresent = 0, sizePresent = 0,\n        flagsPresent = 0, compositionTimeOffset = 0;\n\n    // trun flag constants\n    if (samples.length) {\n      if (samples[0].duration !== undefined) {\n        durationPresent = 0x1;\n      }\n      if (samples[0].size !== undefined) {\n        sizePresent = 0x2;\n      }\n      if (samples[0].flags !== undefined) {\n        flagsPresent = 0x4;\n      }\n      if (samples[0].compositionTimeOffset !== undefined) {\n        compositionTimeOffset = 0x8;\n      }\n    }\n\n    return [\n      0x00, // version 0\n      0x00,\n      durationPresent | sizePresent | flagsPresent | compositionTimeOffset,\n      0x01, // flags\n      (samples.length & 0xFF000000) >>> 24,\n      (samples.length & 0xFF0000) >>> 16,\n      (samples.length & 0xFF00) >>> 8,\n      samples.length & 0xFF, // sample_count\n      (offset & 0xFF000000) >>> 24,\n      (offset & 0xFF0000) >>> 16,\n      (offset & 0xFF00) >>> 8,\n      offset & 0xFF // data_offset\n    ];\n  };\n\n  videoTrun = function(track, offset) {\n    var bytes, samples, sample, i;\n\n    samples = track.samples || [];\n    offset += 8 + 12 + (16 * samples.length);\n\n    bytes = trunHeader(samples, offset);\n\n    for (i = 0; i < samples.length; i++) {\n      sample = samples[i];\n      bytes = bytes.concat([\n        (sample.duration & 0xFF000000) >>> 24,\n        (sample.duration & 0xFF0000) >>> 16,\n        (sample.duration & 0xFF00) >>> 8,\n        sample.duration & 0xFF, // sample_duration\n        (sample.size & 0xFF000000) >>> 24,\n        (sample.size & 0xFF0000) >>> 16,\n        (sample.size & 0xFF00) >>> 8,\n        sample.size & 0xFF, // sample_size\n        (sample.flags.isLeading << 2) | sample.flags.dependsOn,\n        (sample.flags.isDependedOn << 6) |\n          (sample.flags.hasRedundancy << 4) |\n          (sample.flags.paddingValue << 1) |\n          sample.flags.isNonSyncSample,\n        sample.flags.degradationPriority & 0xF0 << 8,\n        sample.flags.degradationPriority & 0x0F, // sample_flags\n        (sample.compositionTimeOffset & 0xFF000000) >>> 24,\n        (sample.compositionTimeOffset & 0xFF0000) >>> 16,\n        (sample.compositionTimeOffset & 0xFF00) >>> 8,\n        sample.compositionTimeOffset & 0xFF // sample_composition_time_offset\n      ]);\n    }\n    return box(types.trun, new Uint8Array(bytes));\n  };\n\n  audioTrun = function(track, offset) {\n    var bytes, samples, sample, i;\n\n    samples = track.samples || [];\n    offset += 8 + 12 + (8 * samples.length);\n\n    bytes = trunHeader(samples, offset);\n\n    for (i = 0; i < samples.length; i++) {\n      sample = samples[i];\n      bytes = bytes.concat([\n        (sample.duration & 0xFF000000) >>> 24,\n        (sample.duration & 0xFF0000) >>> 16,\n        (sample.duration & 0xFF00) >>> 8,\n        sample.duration & 0xFF, // sample_duration\n        (sample.size & 0xFF000000) >>> 24,\n        (sample.size & 0xFF0000) >>> 16,\n        (sample.size & 0xFF00) >>> 8,\n        sample.size & 0xFF]); // sample_size\n    }\n\n    return box(types.trun, new Uint8Array(bytes));\n  };\n\n  trun = function(track, offset) {\n    if (track.type === 'audio') {\n      return audioTrun(track, offset);\n    }\n\n    return videoTrun(track, offset);\n  };\n}());\n\nmodule.exports = {\n  ftyp: ftyp,\n  mdat: mdat,\n  moof: moof,\n  moov: moov,\n  initSegment: function(tracks) {\n    var\n      fileType = ftyp(),\n      movie = moov(tracks),\n      result;\n\n    result = new Uint8Array(fileType.byteLength + movie.byteLength);\n    result.set(fileType);\n    result.set(movie, fileType.byteLength);\n    return result;\n  }\n};\n","/**\n * mux.js\n *\n * Copyright (c) 2016 Brightcove\n * All rights reserved.\n *\n * A stream-based aac to mp4 converter. This utility can be used to\n * deliver mp4s to a SourceBuffer on platforms that support native\n * Media Source Extensions.\n */\n'use strict';\nvar Stream = require('../utils/stream.js');\n\n// Constants\nvar AacStream;\n\n/**\n * Splits an incoming stream of binary data into ADTS and ID3 Frames.\n */\n\nAacStream = function() {\n  var\n    everything = new Uint8Array(),\n    timeStamp = 0;\n\n  AacStream.prototype.init.call(this);\n\n  this.setTimestamp = function(timestamp) {\n    timeStamp = timestamp;\n  };\n\n  this.parseId3TagSize = function(header, byteIndex) {\n    var\n      returnSize = (header[byteIndex + 6] << 21) |\n                   (header[byteIndex + 7] << 14) |\n                   (header[byteIndex + 8] << 7) |\n                   (header[byteIndex + 9]),\n      flags = header[byteIndex + 5],\n      footerPresent = (flags & 16) >> 4;\n\n    if (footerPresent) {\n      return returnSize + 20;\n    }\n    return returnSize + 10;\n  };\n\n  this.parseAdtsSize = function(header, byteIndex) {\n    var\n      lowThree = (header[byteIndex + 5] & 0xE0) >> 5,\n      middle = header[byteIndex + 4] << 3,\n      highTwo = header[byteIndex + 3] & 0x3 << 11;\n\n    return (highTwo | middle) | lowThree;\n  };\n\n  this.push = function(bytes) {\n    var\n      frameSize = 0,\n      byteIndex = 0,\n      bytesLeft,\n      chunk,\n      packet,\n      tempLength;\n\n    // If there are bytes remaining from the last segment, prepend them to the\n    // bytes that were pushed in\n    if (everything.length) {\n      tempLength = everything.length;\n      everything = new Uint8Array(bytes.byteLength + tempLength);\n      everything.set(everything.subarray(0, tempLength));\n      everything.set(bytes, tempLength);\n    } else {\n      everything = bytes;\n    }\n\n    while (everything.length - byteIndex >= 3) {\n      if ((everything[byteIndex] === 'I'.charCodeAt(0)) &&\n          (everything[byteIndex + 1] === 'D'.charCodeAt(0)) &&\n          (everything[byteIndex + 2] === '3'.charCodeAt(0))) {\n\n        // Exit early because we don't have enough to parse\n        // the ID3 tag header\n        if (everything.length - byteIndex < 10) {\n          break;\n        }\n\n        // check framesize\n        frameSize = this.parseId3TagSize(everything, byteIndex);\n\n        // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n        if (frameSize > everything.length) {\n          break;\n        }\n        chunk = {\n          type: 'timed-metadata',\n          data: everything.subarray(byteIndex, byteIndex + frameSize)\n        };\n        this.trigger('data', chunk);\n        byteIndex += frameSize;\n        continue;\n      } else if ((everything[byteIndex] & 0xff === 0xff) &&\n                 ((everything[byteIndex + 1] & 0xf0) === 0xf0)) {\n\n        // Exit early because we don't have enough to parse\n        // the ADTS frame header\n        if (everything.length - byteIndex < 7) {\n          break;\n        }\n\n        frameSize = this.parseAdtsSize(everything, byteIndex);\n\n        // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n        if (frameSize > everything.length) {\n          break;\n        }\n\n        packet = {\n          type: 'audio',\n          data: everything.subarray(byteIndex, byteIndex + frameSize),\n          pts: timeStamp,\n          dts: timeStamp\n        };\n        this.trigger('data', packet);\n        byteIndex += frameSize;\n        continue;\n      }\n      byteIndex++;\n    }\n    bytesLeft = everything.length - byteIndex;\n\n    if (bytesLeft > 0) {\n      everything = everything.subarray(byteIndex);\n    } else {\n      everything = new Uint8Array();\n    }\n  };\n};\n\nAacStream.prototype = new Stream();\n\nmodule.exports = AacStream;\n","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */\n/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */\nvar _objCreate = Object.create || (function() {\n  function F() {}\n  return function(o) {\n    if (arguments.length !== 1) {\n      throw new Error('Object.create shim only accepts one parameter.');\n    }\n    F.prototype = o;\n    return new F();\n  };\n})();\n\n// Creates a new ParserError object from an errorData object. The errorData\n// object should have default code and message properties. The default message\n// property can be overriden by passing in a message parameter.\n// See ParsingError.Errors below for acceptable errors.\nfunction ParsingError(errorData, message) {\n  this.name = \"ParsingError\";\n  this.code = errorData.code;\n  this.message = message || errorData.message;\n}\nParsingError.prototype = _objCreate(Error.prototype);\nParsingError.prototype.constructor = ParsingError;\n\n// ParsingError metadata for acceptable ParsingErrors.\nParsingError.Errors = {\n  BadSignature: {\n    code: 0,\n    message: \"Malformed WebVTT signature.\"\n  },\n  BadTimeStamp: {\n    code: 1,\n    message: \"Malformed time stamp.\"\n  }\n};\n\n// Try to parse input as a time stamp.\nfunction parseTimeStamp(input) {\n\n  function computeSeconds(h, m, s, f) {\n    return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;\n  }\n\n  var m = input.match(/^(\\d+):(\\d{2})(:\\d{2})?\\.(\\d{3})/);\n  if (!m) {\n    return null;\n  }\n\n  if (m[3]) {\n    // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]\n    return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n  } else if (m[1] > 59) {\n    // Timestamp takes the form of [hours]:[minutes].[milliseconds]\n    // First position is hours as it's over 59.\n    return computeSeconds(m[1], m[2], 0,  m[4]);\n  } else {\n    // Timestamp takes the form of [minutes]:[seconds].[milliseconds]\n    return computeSeconds(0, m[1], m[2], m[4]);\n  }\n}\n\n// A settings object holds key/value pairs and will ignore anything but the first\n// assignment to a specific key.\nfunction Settings() {\n  this.values = _objCreate(null);\n}\n\nSettings.prototype = {\n  // Only accept the first assignment to any key.\n  set: function(k, v) {\n    if (!this.get(k) && v !== \"\") {\n      this.values[k] = v;\n    }\n  },\n  // Return the value for a key, or a default value.\n  // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n  // a number of possible default values as properties where 'defaultKey' is\n  // the key of the property that will be chosen; otherwise it's assumed to be\n  // a single value.\n  get: function(k, dflt, defaultKey) {\n    if (defaultKey) {\n      return this.has(k) ? this.values[k] : dflt[defaultKey];\n    }\n    return this.has(k) ? this.values[k] : dflt;\n  },\n  // Check whether we have a value for a key.\n  has: function(k) {\n    return k in this.values;\n  },\n  // Accept a setting if its one of the given alternatives.\n  alt: function(k, v, a) {\n    for (var n = 0; n < a.length; ++n) {\n      if (v === a[n]) {\n        this.set(k, v);\n        break;\n      }\n    }\n  },\n  // Accept a setting if its a valid (signed) integer.\n  integer: function(k, v) {\n    if (/^-?\\d+$/.test(v)) { // integer\n      this.set(k, parseInt(v, 10));\n    }\n  },\n  // Accept a setting if its a valid percentage.\n  percent: function(k, v) {\n    var m;\n    if ((m = v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/))) {\n      v = parseFloat(v);\n      if (v >= 0 && v <= 100) {\n        this.set(k, v);\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\n// Helper function to parse input into groups separated by 'groupDelim', and\n// interprete each group as a key/value pair separated by 'keyValueDelim'.\nfunction parseOptions(input, callback, keyValueDelim, groupDelim) {\n  var groups = groupDelim ? input.split(groupDelim) : [input];\n  for (var i in groups) {\n    if (typeof groups[i] !== \"string\") {\n      continue;\n    }\n    var kv = groups[i].split(keyValueDelim);\n    if (kv.length !== 2) {\n      continue;\n    }\n    var k = kv[0];\n    var v = kv[1];\n    callback(k, v);\n  }\n}\n\nfunction parseCue(input, cue, regionList) {\n  // Remember the original input if we need to throw an error.\n  var oInput = input;\n  // 4.1 WebVTT timestamp\n  function consumeTimeStamp() {\n    var ts = parseTimeStamp(input);\n    if (ts === null) {\n      throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n                            \"Malformed timestamp: \" + oInput);\n    }\n    // Remove time stamp from input.\n    input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n    return ts;\n  }\n\n  // 4.4.2 WebVTT cue settings\n  function consumeCueSettings(input, cue) {\n    var settings = new Settings();\n\n    parseOptions(input, function (k, v) {\n      switch (k) {\n      case \"region\":\n        // Find the last region we parsed with the same region id.\n        for (var i = regionList.length - 1; i >= 0; i--) {\n          if (regionList[i].id === v) {\n            settings.set(k, regionList[i].region);\n            break;\n          }\n        }\n        break;\n      case \"vertical\":\n        settings.alt(k, v, [\"rl\", \"lr\"]);\n        break;\n      case \"line\":\n        var vals = v.split(\",\"),\n            vals0 = vals[0];\n        settings.integer(k, vals0);\n        settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n        settings.alt(k, vals0, [\"auto\"]);\n        if (vals.length === 2) {\n          settings.alt(\"lineAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n        }\n        break;\n      case \"position\":\n        vals = v.split(\",\");\n        settings.percent(k, vals[0]);\n        if (vals.length === 2) {\n          settings.alt(\"positionAlign\", vals[1], [\"start\", \"middle\", \"end\"]);\n        }\n        break;\n      case \"size\":\n        settings.percent(k, v);\n        break;\n      case \"align\":\n        settings.alt(k, v, [\"start\", \"middle\", \"end\", \"left\", \"right\"]);\n        break;\n      }\n    }, /:/, /\\s/);\n\n    // Apply default values for any missing fields.\n    cue.region = settings.get(\"region\", null);\n    cue.vertical = settings.get(\"vertical\", \"\");\n    cue.line = settings.get(\"line\", \"auto\");\n    cue.lineAlign = settings.get(\"lineAlign\", \"start\");\n    cue.snapToLines = settings.get(\"snapToLines\", true);\n    cue.size = settings.get(\"size\", 100);\n    cue.align = settings.get(\"align\", \"middle\");\n    cue.position = settings.get(\"position\", {\n      start: 0,\n      left: 0,\n      middle: 50,\n      end: 100,\n      right: 100\n    }, cue.align);\n    cue.positionAlign = settings.get(\"positionAlign\", {\n      start: \"start\",\n      left: \"start\",\n      middle: \"middle\",\n      end: \"end\",\n      right: \"end\"\n    }, cue.align);\n  }\n\n  function skipWhitespace() {\n    input = input.replace(/^\\s+/, \"\");\n  }\n\n  // 4.1 WebVTT cue timings.\n  skipWhitespace();\n  cue.startTime = consumeTimeStamp();   // (1) collect cue start time\n  skipWhitespace();\n  if (input.substr(0, 3) !== \"-->\") {     // (3) next characters must match \"-->\"\n    throw new ParsingError(ParsingError.Errors.BadTimeStamp,\n                           \"Malformed time stamp (time stamps must be separated by '-->'): \" +\n                           oInput);\n  }\n  input = input.substr(3);\n  skipWhitespace();\n  cue.endTime = consumeTimeStamp();     // (5) collect cue end time\n\n  // 4.1 WebVTT cue settings list.\n  skipWhitespace();\n  consumeCueSettings(input, cue);\n}\n\nvar ESCAPE = {\n  \"&amp;\": \"&\",\n  \"&lt;\": \"<\",\n  \"&gt;\": \">\",\n  \"&lrm;\": \"\\u200e\",\n  \"&rlm;\": \"\\u200f\",\n  \"&nbsp;\": \"\\u00a0\"\n};\n\nvar TAG_NAME = {\n  c: \"span\",\n  i: \"i\",\n  b: \"b\",\n  u: \"u\",\n  ruby: \"ruby\",\n  rt: \"rt\",\n  v: \"span\",\n  lang: \"span\"\n};\n\nvar TAG_ANNOTATION = {\n  v: \"title\",\n  lang: \"lang\"\n};\n\nvar NEEDS_PARENT = {\n  rt: \"ruby\"\n};\n\n// Parse content into a document fragment.\nfunction parseContent(window, input) {\n  function nextToken() {\n    // Check for end-of-string.\n    if (!input) {\n      return null;\n    }\n\n    // Consume 'n' characters from the input.\n    function consume(result) {\n      input = input.substr(result.length);\n      return result;\n    }\n\n    var m = input.match(/^([^<]*)(<[^>]*>?)?/);\n    // If there is some text before the next tag, return it, otherwise return\n    // the tag.\n    return consume(m[1] ? m[1] : m[2]);\n  }\n\n  // Unescape a string 's'.\n  function unescape1(e) {\n    return ESCAPE[e];\n  }\n  function unescape(s) {\n    while ((m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))) {\n      s = s.replace(m[0], unescape1);\n    }\n    return s;\n  }\n\n  function shouldAdd(current, element) {\n    return !NEEDS_PARENT[element.localName] ||\n           NEEDS_PARENT[element.localName] === current.localName;\n  }\n\n  // Create an element for this tag.\n  function createElement(type, annotation) {\n    var tagName = TAG_NAME[type];\n    if (!tagName) {\n      return null;\n    }\n    var element = window.document.createElement(tagName);\n    element.localName = tagName;\n    var name = TAG_ANNOTATION[type];\n    if (name && annotation) {\n      element[name] = annotation.trim();\n    }\n    return element;\n  }\n\n  var rootDiv = window.document.createElement(\"div\"),\n      current = rootDiv,\n      t,\n      tagStack = [];\n\n  while ((t = nextToken()) !== null) {\n    if (t[0] === '<') {\n      if (t[1] === \"/\") {\n        // If the closing tag matches, move back up to the parent node.\n        if (tagStack.length &&\n            tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n          tagStack.pop();\n          current = current.parentNode;\n        }\n        // Otherwise just ignore the end tag.\n        continue;\n      }\n      var ts = parseTimeStamp(t.substr(1, t.length - 2));\n      var node;\n      if (ts) {\n        // Timestamps are lead nodes as well.\n        node = window.document.createProcessingInstruction(\"timestamp\", ts);\n        current.appendChild(node);\n        continue;\n      }\n      var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n      // If we can't parse the tag, skip to the next tag.\n      if (!m) {\n        continue;\n      }\n      // Try to construct an element, and ignore the tag if we couldn't.\n      node = createElement(m[1], m[3]);\n      if (!node) {\n        continue;\n      }\n      // Determine if the tag should be added based on the context of where it\n      // is placed in the cuetext.\n      if (!shouldAdd(current, node)) {\n        continue;\n      }\n      // Set the class list (as a list of classes, separated by space).\n      if (m[2]) {\n        node.className = m[2].substr(1).replace('.', ' ');\n      }\n      // Append the node to the current node, and enter the scope of the new\n      // node.\n      tagStack.push(m[1]);\n      current.appendChild(node);\n      current = node;\n      continue;\n    }\n\n    // Text nodes are leaf nodes.\n    current.appendChild(window.document.createTextNode(unescape(t)));\n  }\n\n  return rootDiv;\n}\n\n// This is a list of all the Unicode characters that have a strong\n// right-to-left category. What this means is that these characters are\n// written right-to-left for sure. It was generated by pulling all the strong\n// right-to-left characters out of the Unicode data table. That table can\n// found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt\nvar strongRTLRanges = [[0x5be, 0x5be], [0x5c0, 0x5c0], [0x5c3, 0x5c3], [0x5c6, 0x5c6],\n [0x5d0, 0x5ea], [0x5f0, 0x5f4], [0x608, 0x608], [0x60b, 0x60b], [0x60d, 0x60d],\n [0x61b, 0x61b], [0x61e, 0x64a], [0x66d, 0x66f], [0x671, 0x6d5], [0x6e5, 0x6e6],\n [0x6ee, 0x6ef], [0x6fa, 0x70d], [0x70f, 0x710], [0x712, 0x72f], [0x74d, 0x7a5],\n [0x7b1, 0x7b1], [0x7c0, 0x7ea], [0x7f4, 0x7f5], [0x7fa, 0x7fa], [0x800, 0x815],\n [0x81a, 0x81a], [0x824, 0x824], [0x828, 0x828], [0x830, 0x83e], [0x840, 0x858],\n [0x85e, 0x85e], [0x8a0, 0x8a0], [0x8a2, 0x8ac], [0x200f, 0x200f],\n [0xfb1d, 0xfb1d], [0xfb1f, 0xfb28], [0xfb2a, 0xfb36], [0xfb38, 0xfb3c],\n [0xfb3e, 0xfb3e], [0xfb40, 0xfb41], [0xfb43, 0xfb44], [0xfb46, 0xfbc1],\n [0xfbd3, 0xfd3d], [0xfd50, 0xfd8f], [0xfd92, 0xfdc7], [0xfdf0, 0xfdfc],\n [0xfe70, 0xfe74], [0xfe76, 0xfefc], [0x10800, 0x10805], [0x10808, 0x10808],\n [0x1080a, 0x10835], [0x10837, 0x10838], [0x1083c, 0x1083c], [0x1083f, 0x10855],\n [0x10857, 0x1085f], [0x10900, 0x1091b], [0x10920, 0x10939], [0x1093f, 0x1093f],\n [0x10980, 0x109b7], [0x109be, 0x109bf], [0x10a00, 0x10a00], [0x10a10, 0x10a13],\n [0x10a15, 0x10a17], [0x10a19, 0x10a33], [0x10a40, 0x10a47], [0x10a50, 0x10a58],\n [0x10a60, 0x10a7f], [0x10b00, 0x10b35], [0x10b40, 0x10b55], [0x10b58, 0x10b72],\n [0x10b78, 0x10b7f], [0x10c00, 0x10c48], [0x1ee00, 0x1ee03], [0x1ee05, 0x1ee1f],\n [0x1ee21, 0x1ee22], [0x1ee24, 0x1ee24], [0x1ee27, 0x1ee27], [0x1ee29, 0x1ee32],\n [0x1ee34, 0x1ee37], [0x1ee39, 0x1ee39], [0x1ee3b, 0x1ee3b], [0x1ee42, 0x1ee42],\n [0x1ee47, 0x1ee47], [0x1ee49, 0x1ee49], [0x1ee4b, 0x1ee4b], [0x1ee4d, 0x1ee4f],\n [0x1ee51, 0x1ee52], [0x1ee54, 0x1ee54], [0x1ee57, 0x1ee57], [0x1ee59, 0x1ee59],\n [0x1ee5b, 0x1ee5b], [0x1ee5d, 0x1ee5d], [0x1ee5f, 0x1ee5f], [0x1ee61, 0x1ee62],\n [0x1ee64, 0x1ee64], [0x1ee67, 0x1ee6a], [0x1ee6c, 0x1ee72], [0x1ee74, 0x1ee77],\n [0x1ee79, 0x1ee7c], [0x1ee7e, 0x1ee7e], [0x1ee80, 0x1ee89], [0x1ee8b, 0x1ee9b],\n [0x1eea1, 0x1eea3], [0x1eea5, 0x1eea9], [0x1eeab, 0x1eebb], [0x10fffd, 0x10fffd]];\n\nfunction isStrongRTLChar(charCode) {\n  for (var i = 0; i < strongRTLRanges.length; i++) {\n    var currentRange = strongRTLRanges[i];\n    if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction determineBidi(cueDiv) {\n  var nodeStack = [],\n      text = \"\",\n      charCode;\n\n  if (!cueDiv || !cueDiv.childNodes) {\n    return \"ltr\";\n  }\n\n  function pushNodes(nodeStack, node) {\n    for (var i = node.childNodes.length - 1; i >= 0; i--) {\n      nodeStack.push(node.childNodes[i]);\n    }\n  }\n\n  function nextTextNode(nodeStack) {\n    if (!nodeStack || !nodeStack.length) {\n      return null;\n    }\n\n    var node = nodeStack.pop(),\n        text = node.textContent || node.innerText;\n    if (text) {\n      // TODO: This should match all unicode type B characters (paragraph\n      // separator characters). See issue #115.\n      var m = text.match(/^.*(\\n|\\r)/);\n      if (m) {\n        nodeStack.length = 0;\n        return m[0];\n      }\n      return text;\n    }\n    if (node.tagName === \"ruby\") {\n      return nextTextNode(nodeStack);\n    }\n    if (node.childNodes) {\n      pushNodes(nodeStack, node);\n      return nextTextNode(nodeStack);\n    }\n  }\n\n  pushNodes(nodeStack, cueDiv);\n  while ((text = nextTextNode(nodeStack))) {\n    for (var i = 0; i < text.length; i++) {\n      charCode = text.charCodeAt(i);\n      if (isStrongRTLChar(charCode)) {\n        return \"rtl\";\n      }\n    }\n  }\n  return \"ltr\";\n}\n\nfunction computeLinePos(cue) {\n  if (typeof cue.line === \"number\" &&\n      (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {\n    return cue.line;\n  }\n  if (!cue.track || !cue.track.textTrackList ||\n      !cue.track.textTrackList.mediaElement) {\n    return -1;\n  }\n  var track = cue.track,\n      trackList = track.textTrackList,\n      count = 0;\n  for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n    if (trackList[i].mode === \"showing\") {\n      count++;\n    }\n  }\n  return ++count * -1;\n}\n\nfunction StyleBox() {\n}\n\n// Apply styles to a div. If there is no div passed then it defaults to the\n// div on 'this'.\nStyleBox.prototype.applyStyles = function(styles, div) {\n  div = div || this.div;\n  for (var prop in styles) {\n    if (styles.hasOwnProperty(prop)) {\n      div.style[prop] = styles[prop];\n    }\n  }\n};\n\nStyleBox.prototype.formatStyle = function(val, unit) {\n  return val === 0 ? 0 : val + unit;\n};\n\n// Constructs the computed display state of the cue (a div). Places the div\n// into the overlay which should be a block level element (usually a div).\nfunction CueStyleBox(window, cue, styleOptions) {\n  var isIE8 = (/MSIE\\s8\\.0/).test(navigator.userAgent);\n  var color = \"rgba(255, 255, 255, 1)\";\n  var backgroundColor = \"rgba(0, 0, 0, 0.8)\";\n\n  if (isIE8) {\n    color = \"rgb(255, 255, 255)\";\n    backgroundColor = \"rgb(0, 0, 0)\";\n  }\n\n  StyleBox.call(this);\n  this.cue = cue;\n\n  // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will\n  // have inline positioning and will function as the cue background box.\n  this.cueDiv = parseContent(window, cue.text);\n  var styles = {\n    color: color,\n    backgroundColor: backgroundColor,\n    position: \"relative\",\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0,\n    display: \"inline\"\n  };\n\n  if (!isIE8) {\n    styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n                                             : cue.vertical === \"lr\" ? \"vertical-lr\"\n                                                                     : \"vertical-rl\";\n    styles.unicodeBidi = \"plaintext\";\n  }\n  this.applyStyles(styles, this.cueDiv);\n\n  // Create an absolutely positioned div that will be used to position the cue\n  // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS\n  // mirrors of them except \"middle\" which is \"center\" in CSS.\n  this.div = window.document.createElement(\"div\");\n  styles = {\n    textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n    font: styleOptions.font,\n    whiteSpace: \"pre-line\",\n    position: \"absolute\"\n  };\n\n  if (!isIE8) {\n    styles.direction = determineBidi(this.cueDiv);\n    styles.writingMode = cue.vertical === \"\" ? \"horizontal-tb\"\n                                             : cue.vertical === \"lr\" ? \"vertical-lr\"\n                                                                     : \"vertical-rl\".\n    stylesunicodeBidi =  \"plaintext\";\n  }\n\n  this.applyStyles(styles);\n\n  this.div.appendChild(this.cueDiv);\n\n  // Calculate the distance from the reference edge of the viewport to the text\n  // position of the cue box. The reference edge will be resolved later when\n  // the box orientation styles are applied.\n  var textPos = 0;\n  switch (cue.positionAlign) {\n  case \"start\":\n    textPos = cue.position;\n    break;\n  case \"middle\":\n    textPos = cue.position - (cue.size / 2);\n    break;\n  case \"end\":\n    textPos = cue.position - cue.size;\n    break;\n  }\n\n  // Horizontal box orientation; textPos is the distance from the left edge of the\n  // area to the left edge of the box and cue.size is the distance extending to\n  // the right from there.\n  if (cue.vertical === \"\") {\n    this.applyStyles({\n      left:  this.formatStyle(textPos, \"%\"),\n      width: this.formatStyle(cue.size, \"%\")\n    });\n  // Vertical box orientation; textPos is the distance from the top edge of the\n  // area to the top edge of the box and cue.size is the height extending\n  // downwards from there.\n  } else {\n    this.applyStyles({\n      top: this.formatStyle(textPos, \"%\"),\n      height: this.formatStyle(cue.size, \"%\")\n    });\n  }\n\n  this.move = function(box) {\n    this.applyStyles({\n      top: this.formatStyle(box.top, \"px\"),\n      bottom: this.formatStyle(box.bottom, \"px\"),\n      left: this.formatStyle(box.left, \"px\"),\n      right: this.formatStyle(box.right, \"px\"),\n      height: this.formatStyle(box.height, \"px\"),\n      width: this.formatStyle(box.width, \"px\")\n    });\n  };\n}\nCueStyleBox.prototype = _objCreate(StyleBox.prototype);\nCueStyleBox.prototype.constructor = CueStyleBox;\n\n// Represents the co-ordinates of an Element in a way that we can easily\n// compute things with such as if it overlaps or intersects with another Element.\n// Can initialize it with either a StyleBox or another BoxPosition.\nfunction BoxPosition(obj) {\n  var isIE8 = (/MSIE\\s8\\.0/).test(navigator.userAgent);\n\n  // Either a BoxPosition was passed in and we need to copy it, or a StyleBox\n  // was passed in and we need to copy the results of 'getBoundingClientRect'\n  // as the object returned is readonly. All co-ordinate values are in reference\n  // to the viewport origin (top left).\n  var lh, height, width, top;\n  if (obj.div) {\n    height = obj.div.offsetHeight;\n    width = obj.div.offsetWidth;\n    top = obj.div.offsetTop;\n\n    var rects = (rects = obj.div.childNodes) && (rects = rects[0]) &&\n                rects.getClientRects && rects.getClientRects();\n    obj = obj.div.getBoundingClientRect();\n    // In certain cases the outter div will be slightly larger then the sum of\n    // the inner div's lines. This could be due to bold text, etc, on some platforms.\n    // In this case we should get the average line height and use that. This will\n    // result in the desired behaviour.\n    lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length)\n               : 0;\n\n  }\n  this.left = obj.left;\n  this.right = obj.right;\n  this.top = obj.top || top;\n  this.height = obj.height || height;\n  this.bottom = obj.bottom || (top + (obj.height || height));\n  this.width = obj.width || width;\n  this.lineHeight = lh !== undefined ? lh : obj.lineHeight;\n\n  if (isIE8 && !this.lineHeight) {\n    this.lineHeight = 13;\n  }\n}\n\n// Move the box along a particular axis. Optionally pass in an amount to move\n// the box. If no amount is passed then the default is the line height of the\n// box.\nBoxPosition.prototype.move = function(axis, toMove) {\n  toMove = toMove !== undefined ? toMove : this.lineHeight;\n  switch (axis) {\n  case \"+x\":\n    this.left += toMove;\n    this.right += toMove;\n    break;\n  case \"-x\":\n    this.left -= toMove;\n    this.right -= toMove;\n    break;\n  case \"+y\":\n    this.top += toMove;\n    this.bottom += toMove;\n    break;\n  case \"-y\":\n    this.top -= toMove;\n    this.bottom -= toMove;\n    break;\n  }\n};\n\n// Check if this box overlaps another box, b2.\nBoxPosition.prototype.overlaps = function(b2) {\n  return this.left < b2.right &&\n         this.right > b2.left &&\n         this.top < b2.bottom &&\n         this.bottom > b2.top;\n};\n\n// Check if this box overlaps any other boxes in boxes.\nBoxPosition.prototype.overlapsAny = function(boxes) {\n  for (var i = 0; i < boxes.length; i++) {\n    if (this.overlaps(boxes[i])) {\n      return true;\n    }\n  }\n  return false;\n};\n\n// Check if this box is within another box.\nBoxPosition.prototype.within = function(container) {\n  return this.top >= container.top &&\n         this.bottom <= container.bottom &&\n         this.left >= container.left &&\n         this.right <= container.right;\n};\n\n// Check if this box is entirely within the container or it is overlapping\n// on the edge opposite of the axis direction passed. For example, if \"+x\" is\n// passed and the box is overlapping on the left edge of the container, then\n// return true.\nBoxPosition.prototype.overlapsOppositeAxis = function(container, axis) {\n  switch (axis) {\n  case \"+x\":\n    return this.left < container.left;\n  case \"-x\":\n    return this.right > container.right;\n  case \"+y\":\n    return this.top < container.top;\n  case \"-y\":\n    return this.bottom > container.bottom;\n  }\n};\n\n// Find the percentage of the area that this box is overlapping with another\n// box.\nBoxPosition.prototype.intersectPercentage = function(b2) {\n  var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),\n      y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),\n      intersectArea = x * y;\n  return intersectArea / (this.height * this.width);\n};\n\n// Convert the positions from this box to CSS compatible positions using\n// the reference container's positions. This has to be done because this\n// box's positions are in reference to the viewport origin, whereas, CSS\n// values are in referecne to their respective edges.\nBoxPosition.prototype.toCSSCompatValues = function(reference) {\n  return {\n    top: this.top - reference.top,\n    bottom: reference.bottom - this.bottom,\n    left: this.left - reference.left,\n    right: reference.right - this.right,\n    height: this.height,\n    width: this.width\n  };\n};\n\n// Get an object that represents the box's position without anything extra.\n// Can pass a StyleBox, HTMLElement, or another BoxPositon.\nBoxPosition.getSimpleBoxPosition = function(obj) {\n  var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n  var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n  var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n\n  obj = obj.div ? obj.div.getBoundingClientRect() :\n                obj.tagName ? obj.getBoundingClientRect() : obj;\n  var ret = {\n    left: obj.left,\n    right: obj.right,\n    top: obj.top || top,\n    height: obj.height || height,\n    bottom: obj.bottom || (top + (obj.height || height)),\n    width: obj.width || width\n  };\n  return ret;\n};\n\n// Move a StyleBox to its specified, or next best, position. The containerBox\n// is the box that contains the StyleBox, such as a div. boxPositions are\n// a list of other boxes that the styleBox can't overlap with.\nfunction moveBoxToLinePosition(window, styleBox, containerBox, boxPositions) {\n\n  // Find the best position for a cue box, b, on the video. The axis parameter\n  // is a list of axis, the order of which, it will move the box along. For example:\n  // Passing [\"+x\", \"-x\"] will move the box first along the x axis in the positive\n  // direction. If it doesn't find a good position for it there it will then move\n  // it along the x axis in the negative direction.\n  function findBestPosition(b, axis) {\n    var bestPosition,\n        specifiedPosition = new BoxPosition(b),\n        percentage = 1; // Highest possible so the first thing we get is better.\n\n    for (var i = 0; i < axis.length; i++) {\n      while (b.overlapsOppositeAxis(containerBox, axis[i]) ||\n             (b.within(containerBox) && b.overlapsAny(boxPositions))) {\n        b.move(axis[i]);\n      }\n      // We found a spot where we aren't overlapping anything. This is our\n      // best position.\n      if (b.within(containerBox)) {\n        return b;\n      }\n      var p = b.intersectPercentage(containerBox);\n      // If we're outside the container box less then we were on our last try\n      // then remember this position as the best position.\n      if (percentage > p) {\n        bestPosition = new BoxPosition(b);\n        percentage = p;\n      }\n      // Reset the box position to the specified position.\n      b = new BoxPosition(specifiedPosition);\n    }\n    return bestPosition || specifiedPosition;\n  }\n\n  var boxPosition = new BoxPosition(styleBox),\n      cue = styleBox.cue,\n      linePos = computeLinePos(cue),\n      axis = [];\n\n  // If we have a line number to align the cue to.\n  if (cue.snapToLines) {\n    var size;\n    switch (cue.vertical) {\n    case \"\":\n      axis = [ \"+y\", \"-y\" ];\n      size = \"height\";\n      break;\n    case \"rl\":\n      axis = [ \"+x\", \"-x\" ];\n      size = \"width\";\n      break;\n    case \"lr\":\n      axis = [ \"-x\", \"+x\" ];\n      size = \"width\";\n      break;\n    }\n\n    var step = boxPosition.lineHeight,\n        position = step * Math.round(linePos),\n        maxPosition = containerBox[size] + step,\n        initialAxis = axis[0];\n\n    // If the specified intial position is greater then the max position then\n    // clamp the box to the amount of steps it would take for the box to\n    // reach the max position.\n    if (Math.abs(position) > maxPosition) {\n      position = position < 0 ? -1 : 1;\n      position *= Math.ceil(maxPosition / step) * step;\n    }\n\n    // If computed line position returns negative then line numbers are\n    // relative to the bottom of the video instead of the top. Therefore, we\n    // need to increase our initial position by the length or width of the\n    // video, depending on the writing direction, and reverse our axis directions.\n    if (linePos < 0) {\n      position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n      axis = axis.reverse();\n    }\n\n    // Move the box to the specified position. This may not be its best\n    // position.\n    boxPosition.move(initialAxis, position);\n\n  } else {\n    // If we have a percentage line value for the cue.\n    var calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;\n\n    switch (cue.lineAlign) {\n    case \"middle\":\n      linePos -= (calculatedPercentage / 2);\n      break;\n    case \"end\":\n      linePos -= calculatedPercentage;\n      break;\n    }\n\n    // Apply initial line position to the cue box.\n    switch (cue.vertical) {\n    case \"\":\n      styleBox.applyStyles({\n        top: styleBox.formatStyle(linePos, \"%\")\n      });\n      break;\n    case \"rl\":\n      styleBox.applyStyles({\n        left: styleBox.formatStyle(linePos, \"%\")\n      });\n      break;\n    case \"lr\":\n      styleBox.applyStyles({\n        right: styleBox.formatStyle(linePos, \"%\")\n      });\n      break;\n    }\n\n    axis = [ \"+y\", \"-x\", \"+x\", \"-y\" ];\n\n    // Get the box position again after we've applied the specified positioning\n    // to it.\n    boxPosition = new BoxPosition(styleBox);\n  }\n\n  var bestPosition = findBestPosition(boxPosition, axis);\n  styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n}\n\nfunction WebVTT() {\n  // Nothing\n}\n\n// Helper to allow strings to be decoded instead of the default binary utf8 data.\nWebVTT.StringDecoder = function() {\n  return {\n    decode: function(data) {\n      if (!data) {\n        return \"\";\n      }\n      if (typeof data !== \"string\") {\n        throw new Error(\"Error - expected string data.\");\n      }\n      return decodeURIComponent(encodeURIComponent(data));\n    }\n  };\n};\n\nWebVTT.convertCueToDOMTree = function(window, cuetext) {\n  if (!window || !cuetext) {\n    return null;\n  }\n  return parseContent(window, cuetext);\n};\n\nvar FONT_SIZE_PERCENT = 0.05;\nvar FONT_STYLE = \"sans-serif\";\nvar CUE_BACKGROUND_PADDING = \"1.5%\";\n\n// Runs the processing model over the cues and regions passed to it.\n// @param overlay A block level element (usually a div) that the computed cues\n//                and regions will be placed into.\nWebVTT.processCues = function(window, cues, overlay) {\n  if (!window || !cues || !overlay) {\n    return null;\n  }\n\n  // Remove all previous children.\n  while (overlay.firstChild) {\n    overlay.removeChild(overlay.firstChild);\n  }\n\n  var paddedOverlay = window.document.createElement(\"div\");\n  paddedOverlay.style.position = \"absolute\";\n  paddedOverlay.style.left = \"0\";\n  paddedOverlay.style.right = \"0\";\n  paddedOverlay.style.top = \"0\";\n  paddedOverlay.style.bottom = \"0\";\n  paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n  overlay.appendChild(paddedOverlay);\n\n  // Determine if we need to compute the display states of the cues. This could\n  // be the case if a cue's state has been changed since the last computation or\n  // if it has not been computed yet.\n  function shouldCompute(cues) {\n    for (var i = 0; i < cues.length; i++) {\n      if (cues[i].hasBeenReset || !cues[i].displayState) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // We don't need to recompute the cues' display states. Just reuse them.\n  if (!shouldCompute(cues)) {\n    for (var i = 0; i < cues.length; i++) {\n      paddedOverlay.appendChild(cues[i].displayState);\n    }\n    return;\n  }\n\n  var boxPositions = [],\n      containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),\n      fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n  var styleOptions = {\n    font: fontSize + \"px \" + FONT_STYLE\n  };\n\n  (function() {\n    var styleBox, cue;\n\n    for (var i = 0; i < cues.length; i++) {\n      cue = cues[i];\n\n      // Compute the intial position and styles of the cue div.\n      styleBox = new CueStyleBox(window, cue, styleOptions);\n      paddedOverlay.appendChild(styleBox.div);\n\n      // Move the cue div to it's correct line position.\n      moveBoxToLinePosition(window, styleBox, containerBox, boxPositions);\n\n      // Remember the computed div so that we don't have to recompute it later\n      // if we don't have too.\n      cue.displayState = styleBox.div;\n\n      boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n    }\n  })();\n};\n\nWebVTT.Parser = function(window, vttjs, decoder) {\n  if (!decoder) {\n    decoder = vttjs;\n    vttjs = {};\n  }\n  if (!vttjs) {\n    vttjs = {};\n  }\n\n  this.window = window;\n  this.vttjs = vttjs;\n  this.state = \"INITIAL\";\n  this.buffer = \"\";\n  this.decoder = decoder || new TextDecoder(\"utf8\");\n  this.regionList = [];\n};\n\nWebVTT.Parser.prototype = {\n  // If the error is a ParsingError then report it to the consumer if\n  // possible. If it's not a ParsingError then throw it like normal.\n  reportOrThrowError: function(e) {\n    if (e instanceof ParsingError) {\n      this.onparsingerror && this.onparsingerror(e);\n    } else {\n      throw e;\n    }\n  },\n  parse: function (data) {\n    var self = this;\n\n    // If there is no data then we won't decode it, but will just try to parse\n    // whatever is in buffer already. This may occur in circumstances, for\n    // example when flush() is called.\n    if (data) {\n      // Try to decode the data that we received.\n      self.buffer += self.decoder.decode(data, {stream: true});\n    }\n\n    function collectNextLine() {\n      var buffer = self.buffer;\n      var pos = 0;\n      while (pos < buffer.length && buffer[pos] !== '\\r' && buffer[pos] !== '\\n') {\n        ++pos;\n      }\n      var line = buffer.substr(0, pos);\n      // Advance the buffer early in case we fail below.\n      if (buffer[pos] === '\\r') {\n        ++pos;\n      }\n      if (buffer[pos] === '\\n') {\n        ++pos;\n      }\n      self.buffer = buffer.substr(pos);\n      return line;\n    }\n\n    // 3.4 WebVTT region and WebVTT region settings syntax\n    function parseRegion(input) {\n      var settings = new Settings();\n\n      parseOptions(input, function (k, v) {\n        switch (k) {\n        case \"id\":\n          settings.set(k, v);\n          break;\n        case \"width\":\n          settings.percent(k, v);\n          break;\n        case \"lines\":\n          settings.integer(k, v);\n          break;\n        case \"regionanchor\":\n        case \"viewportanchor\":\n          var xy = v.split(',');\n          if (xy.length !== 2) {\n            break;\n          }\n          // We have to make sure both x and y parse, so use a temporary\n          // settings object here.\n          var anchor = new Settings();\n          anchor.percent(\"x\", xy[0]);\n          anchor.percent(\"y\", xy[1]);\n          if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n            break;\n          }\n          settings.set(k + \"X\", anchor.get(\"x\"));\n          settings.set(k + \"Y\", anchor.get(\"y\"));\n          break;\n        case \"scroll\":\n          settings.alt(k, v, [\"up\"]);\n          break;\n        }\n      }, /=/, /\\s/);\n\n      // Create the region, using default values for any values that were not\n      // specified.\n      if (settings.has(\"id\")) {\n        var region = new (self.vttjs.VTTRegion || self.window.VTTRegion)();\n        region.width = settings.get(\"width\", 100);\n        region.lines = settings.get(\"lines\", 3);\n        region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n        region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n        region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n        region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n        region.scroll = settings.get(\"scroll\", \"\");\n        // Register the region.\n        self.onregion && self.onregion(region);\n        // Remember the VTTRegion for later in case we parse any VTTCues that\n        // reference it.\n        self.regionList.push({\n          id: settings.get(\"id\"),\n          region: region\n        });\n      }\n    }\n\n    // draft-pantos-http-live-streaming-20\n    // https://tools.ietf.org/html/draft-pantos-http-live-streaming-20#section-3.5\n    // 3.5 WebVTT\n    function parseTimestampMap(input) {\n      var settings = new Settings();\n\n      parseOptions(input, function(k, v) {\n        switch(k) {\n        case \"MPEGT\":\n          settings.integer(k + 'S', v);\n          break;\n        case \"LOCA\":\n          settings.set(k + 'L', parseTimeStamp(v));\n          break;\n        }\n      }, /[^\\d]:/, /,/);\n\n      self.ontimestampmap && self.ontimestampmap({\n        \"MPEGTS\": settings.get(\"MPEGTS\"),\n        \"LOCAL\": settings.get(\"LOCAL\")\n      });\n    }\n\n    // 3.2 WebVTT metadata header syntax\n    function parseHeader(input) {\n      if (input.match(/X-TIMESTAMP-MAP/)) {\n        // This line contains HLS X-TIMESTAMP-MAP metadata\n        parseOptions(input, function(k, v) {\n          switch(k) {\n          case \"X-TIMESTAMP-MAP\":\n            parseTimestampMap(v);\n            break;\n          }\n        }, /=/);\n      } else {\n        parseOptions(input, function (k, v) {\n          switch (k) {\n          case \"Region\":\n            // 3.3 WebVTT region metadata header syntax\n            parseRegion(v);\n            break;\n          }\n        }, /:/);\n      }\n\n    }\n\n    // 5.1 WebVTT file parsing.\n    try {\n      var line;\n      if (self.state === \"INITIAL\") {\n        // We can't start parsing until we have the first line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        line = collectNextLine();\n\n        var m = line.match(/^WEBVTT([ \\t].*)?$/);\n        if (!m || !m[0]) {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n\n        self.state = \"HEADER\";\n      }\n\n      var alreadyCollectedLine = false;\n      while (self.buffer) {\n        // We can't parse a line until we have the full line.\n        if (!/\\r\\n|\\n/.test(self.buffer)) {\n          return this;\n        }\n\n        if (!alreadyCollectedLine) {\n          line = collectNextLine();\n        } else {\n          alreadyCollectedLine = false;\n        }\n\n        switch (self.state) {\n        case \"HEADER\":\n          // 13-18 - Allow a header (metadata) under the WEBVTT line.\n          if (/:/.test(line)) {\n            parseHeader(line);\n          } else if (!line) {\n            // An empty line terminates the header and starts the body (cues).\n            self.state = \"ID\";\n          }\n          continue;\n        case \"NOTE\":\n          // Ignore NOTE blocks.\n          if (!line) {\n            self.state = \"ID\";\n          }\n          continue;\n        case \"ID\":\n          // Check for the start of NOTE blocks.\n          if (/^NOTE($|[ \\t])/.test(line)) {\n            self.state = \"NOTE\";\n            break;\n          }\n          // 19-29 - Allow any number of line terminators, then initialize new cue values.\n          if (!line) {\n            continue;\n          }\n          self.cue = new (self.vttjs.VTTCue || self.window.VTTCue)(0, 0, \"\");\n          self.state = \"CUE\";\n          // 30-39 - Check if self line contains an optional identifier or timing data.\n          if (line.indexOf(\"-->\") === -1) {\n            self.cue.id = line;\n            continue;\n          }\n          // Process line as start of a cue.\n          /*falls through*/\n        case \"CUE\":\n          // 40 - Collect cue timings and settings.\n          try {\n            parseCue(line, self.cue, self.regionList);\n          } catch (e) {\n            self.reportOrThrowError(e);\n            // In case of an error ignore rest of the cue.\n            self.cue = null;\n            self.state = \"BADCUE\";\n            continue;\n          }\n          self.state = \"CUETEXT\";\n          continue;\n        case \"CUETEXT\":\n          var hasSubstring = line.indexOf(\"-->\") !== -1;\n          // 34 - If we have an empty line then report the cue.\n          // 35 - If we have the special substring '-->' then report the cue,\n          // but do not collect the line as we need to process the current\n          // one as a new cue.\n          if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n            // We are done parsing self cue.\n            self.oncue && self.oncue(self.cue);\n            self.cue = null;\n            self.state = \"ID\";\n            continue;\n          }\n          if (self.cue.text) {\n            self.cue.text += \"\\n\";\n          }\n          self.cue.text += line;\n          continue;\n        case \"BADCUE\": // BADCUE\n          // 54-62 - Collect and discard the remaining cue.\n          if (!line) {\n            self.state = \"ID\";\n          }\n          continue;\n        }\n      }\n    } catch (e) {\n      self.reportOrThrowError(e);\n\n      // If we are currently parsing a cue, report what we have.\n      if (self.state === \"CUETEXT\" && self.cue && self.oncue) {\n        self.oncue(self.cue);\n      }\n      self.cue = null;\n      // Enter BADWEBVTT state if header was not parsed correctly otherwise\n      // another exception occurred so enter BADCUE state.\n      self.state = self.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n    }\n    return this;\n  },\n  flush: function () {\n    var self = this;\n    try {\n      // Finish decoding the stream.\n      self.buffer += self.decoder.decode();\n      // Synthesize the end of the current cue or region.\n      if (self.cue || self.state === \"HEADER\") {\n        self.buffer += \"\\n\\n\";\n        self.parse();\n      }\n      // If we've flushed, parsed, and we're still on the INITIAL state then\n      // that means we don't have enough of the stream to parse the first\n      // line.\n      if (self.state === \"INITIAL\") {\n        throw new ParsingError(ParsingError.Errors.BadSignature);\n      }\n    } catch(e) {\n      self.reportOrThrowError(e);\n    }\n    self.onflush && self.onflush();\n    return this;\n  }\n};\n\nmodule.exports = WebVTT;\n","/**\n * mux.js\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * A stream-based mp2t to mp4 converter. This utility can be used to\n * deliver mp4s to a SourceBuffer on platforms that support native\n * Media Source Extensions.\n */\n'use strict';\nvar Stream = require('../utils/stream.js'),\n  CaptionStream = require('./caption-stream'),\n  StreamTypes = require('./stream-types'),\n  TimestampRolloverStream = require('./timestamp-rollover-stream').TimestampRolloverStream;\n\nvar m2tsStreamTypes = require('./stream-types.js');\n\n// object types\nvar TransportPacketStream, TransportParseStream, ElementaryStream;\n\n// constants\nvar\n  MP2T_PACKET_LENGTH = 188, // bytes\n  SYNC_BYTE = 0x47;\n\n/**\n * Splits an incoming stream of binary data into MPEG-2 Transport\n * Stream packets.\n */\nTransportPacketStream = function() {\n  var\n    buffer = new Uint8Array(MP2T_PACKET_LENGTH),\n    bytesInBuffer = 0;\n\n  TransportPacketStream.prototype.init.call(this);\n\n   // Deliver new bytes to the stream.\n\n  this.push = function(bytes) {\n    var\n      startIndex = 0,\n      endIndex = MP2T_PACKET_LENGTH,\n      everything;\n\n    // If there are bytes remaining from the last segment, prepend them to the\n    // bytes that were pushed in\n    if (bytesInBuffer) {\n      everything = new Uint8Array(bytes.byteLength + bytesInBuffer);\n      everything.set(buffer.subarray(0, bytesInBuffer));\n      everything.set(bytes, bytesInBuffer);\n      bytesInBuffer = 0;\n    } else {\n      everything = bytes;\n    }\n\n    // While we have enough data for a packet\n    while (endIndex < everything.byteLength) {\n      // Look for a pair of start and end sync bytes in the data..\n      if (everything[startIndex] === SYNC_BYTE && everything[endIndex] === SYNC_BYTE) {\n        // We found a packet so emit it and jump one whole packet forward in\n        // the stream\n        this.trigger('data', everything.subarray(startIndex, endIndex));\n        startIndex += MP2T_PACKET_LENGTH;\n        endIndex += MP2T_PACKET_LENGTH;\n        continue;\n      }\n      // If we get here, we have somehow become de-synchronized and we need to step\n      // forward one byte at a time until we find a pair of sync bytes that denote\n      // a packet\n      startIndex++;\n      endIndex++;\n    }\n\n    // If there was some data left over at the end of the segment that couldn't\n    // possibly be a whole packet, keep it because it might be the start of a packet\n    // that continues in the next segment\n    if (startIndex < everything.byteLength) {\n      buffer.set(everything.subarray(startIndex), 0);\n      bytesInBuffer = everything.byteLength - startIndex;\n    }\n  };\n\n  this.flush = function() {\n    // If the buffer contains a whole packet when we are being flushed, emit it\n    // and empty the buffer. Otherwise hold onto the data because it may be\n    // important for decoding the next segment\n    if (bytesInBuffer === MP2T_PACKET_LENGTH && buffer[0] === SYNC_BYTE) {\n      this.trigger('data', buffer);\n      bytesInBuffer = 0;\n    }\n    this.trigger('done');\n  };\n};\nTransportPacketStream.prototype = new Stream();\n\n/**\n * Accepts an MP2T TransportPacketStream and emits data events with parsed\n * forms of the individual transport stream packets.\n */\nTransportParseStream = function() {\n  var parsePsi, parsePat, parsePmt, self;\n  TransportParseStream.prototype.init.call(this);\n  self = this;\n\n  this.packetsWaitingForPmt = [];\n  this.programMapTable = undefined;\n\n  parsePsi = function(payload, psi) {\n    var offset = 0;\n\n    // PSI packets may be split into multiple sections and those\n    // sections may be split into multiple packets. If a PSI\n    // section starts in this packet, the payload_unit_start_indicator\n    // will be true and the first byte of the payload will indicate\n    // the offset from the current position to the start of the\n    // section.\n    if (psi.payloadUnitStartIndicator) {\n      offset += payload[offset] + 1;\n    }\n\n    if (psi.type === 'pat') {\n      parsePat(payload.subarray(offset), psi);\n    } else {\n      parsePmt(payload.subarray(offset), psi);\n    }\n  };\n\n  parsePat = function(payload, pat) {\n    pat.section_number = payload[7]; // eslint-disable-line camelcase\n    pat.last_section_number = payload[8]; // eslint-disable-line camelcase\n\n    // skip the PSI header and parse the first PMT entry\n    self.pmtPid = (payload[10] & 0x1F) << 8 | payload[11];\n    pat.pmtPid = self.pmtPid;\n  };\n\n  /**\n   * Parse out the relevant fields of a Program Map Table (PMT).\n   * @param payload {Uint8Array} the PMT-specific portion of an MP2T\n   * packet. The first byte in this array should be the table_id\n   * field.\n   * @param pmt {object} the object that should be decorated with\n   * fields parsed from the PMT.\n   */\n  parsePmt = function(payload, pmt) {\n    var sectionLength, tableEnd, programInfoLength, offset;\n\n    // PMTs can be sent ahead of the time when they should actually\n    // take effect. We don't believe this should ever be the case\n    // for HLS but we'll ignore \"forward\" PMT declarations if we see\n    // them. Future PMT declarations have the current_next_indicator\n    // set to zero.\n    if (!(payload[5] & 0x01)) {\n      return;\n    }\n\n    // overwrite any existing program map table\n    self.programMapTable = {\n      video: null,\n      audio: null,\n      'timed-metadata': {}\n    };\n\n    // the mapping table ends at the end of the current section\n    sectionLength = (payload[1] & 0x0f) << 8 | payload[2];\n    tableEnd = 3 + sectionLength - 4;\n\n    // to determine where the table is, we have to figure out how\n    // long the program info descriptors are\n    programInfoLength = (payload[10] & 0x0f) << 8 | payload[11];\n\n    // advance the offset to the first entry in the mapping table\n    offset = 12 + programInfoLength;\n    while (offset < tableEnd) {\n      var streamType = payload[offset];\n      var pid = (payload[offset + 1] & 0x1F) << 8 | payload[offset + 2];\n\n      // only map a single elementary_pid for audio and video stream types\n      // TODO: should this be done for metadata too? for now maintain behavior of\n      //       multiple metadata streams\n      if (streamType === StreamTypes.H264_STREAM_TYPE &&\n          self.programMapTable.video === null) {\n        self.programMapTable.video = pid;\n      } else if (streamType === StreamTypes.ADTS_STREAM_TYPE &&\n                 self.programMapTable.audio === null) {\n        self.programMapTable.audio = pid;\n      } else if (streamType === StreamTypes.METADATA_STREAM_TYPE) {\n        // map pid to stream type for metadata streams\n        self.programMapTable['timed-metadata'][pid] = streamType;\n      }\n\n      // move to the next table entry\n      // skip past the elementary stream descriptors, if present\n      offset += ((payload[offset + 3] & 0x0F) << 8 | payload[offset + 4]) + 5;\n    }\n\n    // record the map on the packet as well\n    pmt.programMapTable = self.programMapTable;\n  };\n\n  /**\n   * Deliver a new MP2T packet to the stream.\n   */\n  this.push = function(packet) {\n    var\n      result = {},\n      offset = 4;\n\n    result.payloadUnitStartIndicator = !!(packet[1] & 0x40);\n\n    // pid is a 13-bit field starting at the last bit of packet[1]\n    result.pid = packet[1] & 0x1f;\n    result.pid <<= 8;\n    result.pid |= packet[2];\n\n    // if an adaption field is present, its length is specified by the\n    // fifth byte of the TS packet header. The adaptation field is\n    // used to add stuffing to PES packets that don't fill a complete\n    // TS packet, and to specify some forms of timing and control data\n    // that we do not currently use.\n    if (((packet[3] & 0x30) >>> 4) > 0x01) {\n      offset += packet[offset] + 1;\n    }\n\n    // parse the rest of the packet based on the type\n    if (result.pid === 0) {\n      result.type = 'pat';\n      parsePsi(packet.subarray(offset), result);\n      this.trigger('data', result);\n    } else if (result.pid === this.pmtPid) {\n      result.type = 'pmt';\n      parsePsi(packet.subarray(offset), result);\n      this.trigger('data', result);\n\n      // if there are any packets waiting for a PMT to be found, process them now\n      while (this.packetsWaitingForPmt.length) {\n        this.processPes_.apply(this, this.packetsWaitingForPmt.shift());\n      }\n    } else if (this.programMapTable === undefined) {\n      // When we have not seen a PMT yet, defer further processing of\n      // PES packets until one has been parsed\n      this.packetsWaitingForPmt.push([packet, offset, result]);\n    } else {\n      this.processPes_(packet, offset, result);\n    }\n  };\n\n  this.processPes_ = function(packet, offset, result) {\n    // set the appropriate stream type\n    if (result.pid === this.programMapTable.video) {\n      result.streamType = StreamTypes.H264_STREAM_TYPE;\n    } else if (result.pid === this.programMapTable.audio) {\n      result.streamType = StreamTypes.ADTS_STREAM_TYPE;\n    } else {\n      // if not video or audio, it is timed-metadata or unknown\n      // if unknown, streamType will be undefined\n      result.streamType = this.programMapTable['timed-metadata'][result.pid];\n    }\n\n    result.type = 'pes';\n    result.data = packet.subarray(offset);\n\n    this.trigger('data', result);\n  };\n\n};\nTransportParseStream.prototype = new Stream();\nTransportParseStream.STREAM_TYPES  = {\n  h264: 0x1b,\n  adts: 0x0f\n};\n\n/**\n * Reconsistutes program elementary stream (PES) packets from parsed\n * transport stream packets. That is, if you pipe an\n * mp2t.TransportParseStream into a mp2t.ElementaryStream, the output\n * events will be events which capture the bytes for individual PES\n * packets plus relevant metadata that has been extracted from the\n * container.\n */\nElementaryStream = function() {\n  var\n    self = this,\n    // PES packet fragments\n    video = {\n      data: [],\n      size: 0\n    },\n    audio = {\n      data: [],\n      size: 0\n    },\n    timedMetadata = {\n      data: [],\n      size: 0\n    },\n    parsePes = function(payload, pes) {\n      var ptsDtsFlags;\n\n      // get the packet length, this will be 0 for video\n      pes.packetLength = 6 + ((payload[4] << 8) | payload[5]);\n\n      // find out if this packets starts a new keyframe\n      pes.dataAlignmentIndicator = (payload[6] & 0x04) !== 0;\n      // PES packets may be annotated with a PTS value, or a PTS value\n      // and a DTS value. Determine what combination of values is\n      // available to work with.\n      ptsDtsFlags = payload[7];\n\n      // PTS and DTS are normally stored as a 33-bit number.  Javascript\n      // performs all bitwise operations on 32-bit integers but javascript\n      // supports a much greater range (52-bits) of integer using standard\n      // mathematical operations.\n      // We construct a 31-bit value using bitwise operators over the 31\n      // most significant bits and then multiply by 4 (equal to a left-shift\n      // of 2) before we add the final 2 least significant bits of the\n      // timestamp (equal to an OR.)\n      if (ptsDtsFlags & 0xC0) {\n        // the PTS and DTS are not written out directly. For information\n        // on how they are encoded, see\n        // http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\n        pes.pts = (payload[9] & 0x0E) << 27 |\n          (payload[10] & 0xFF) << 20 |\n          (payload[11] & 0xFE) << 12 |\n          (payload[12] & 0xFF) <<  5 |\n          (payload[13] & 0xFE) >>>  3;\n        pes.pts *= 4; // Left shift by 2\n        pes.pts += (payload[13] & 0x06) >>> 1; // OR by the two LSBs\n        pes.dts = pes.pts;\n        if (ptsDtsFlags & 0x40) {\n          pes.dts = (payload[14] & 0x0E) << 27 |\n            (payload[15] & 0xFF) << 20 |\n            (payload[16] & 0xFE) << 12 |\n            (payload[17] & 0xFF) << 5 |\n            (payload[18] & 0xFE) >>> 3;\n          pes.dts *= 4; // Left shift by 2\n          pes.dts += (payload[18] & 0x06) >>> 1; // OR by the two LSBs\n        }\n      }\n      // the data section starts immediately after the PES header.\n      // pes_header_data_length specifies the number of header bytes\n      // that follow the last byte of the field.\n      pes.data = payload.subarray(9 + payload[8]);\n    },\n    flushStream = function(stream, type, forceFlush) {\n      var\n        packetData = new Uint8Array(stream.size),\n        event = {\n          type: type\n        },\n        i = 0,\n        offset = 0,\n        packetFlushable = false,\n        fragment;\n\n      // do nothing if there is not enough buffered data for a complete\n      // PES header\n      if (!stream.data.length || stream.size < 9) {\n        return;\n      }\n      event.trackId = stream.data[0].pid;\n\n      // reassemble the packet\n      for (i = 0; i < stream.data.length; i++) {\n        fragment = stream.data[i];\n\n        packetData.set(fragment.data, offset);\n        offset += fragment.data.byteLength;\n      }\n\n      // parse assembled packet's PES header\n      parsePes(packetData, event);\n\n      // non-video PES packets MUST have a non-zero PES_packet_length\n      // check that there is enough stream data to fill the packet\n      packetFlushable = type === 'video' || event.packetLength <= stream.size;\n\n      // flush pending packets if the conditions are right\n      if (forceFlush || packetFlushable) {\n        stream.size = 0;\n        stream.data.length = 0;\n      }\n\n      // only emit packets that are complete. this is to avoid assembling\n      // incomplete PES packets due to poor segmentation\n      if (packetFlushable) {\n        self.trigger('data', event);\n      }\n    };\n\n  ElementaryStream.prototype.init.call(this);\n\n  this.push = function(data) {\n    ({\n      pat: function() {\n        // we have to wait for the PMT to arrive as well before we\n        // have any meaningful metadata\n      },\n      pes: function() {\n        var stream, streamType;\n\n        switch (data.streamType) {\n        case StreamTypes.H264_STREAM_TYPE:\n        case m2tsStreamTypes.H264_STREAM_TYPE:\n          stream = video;\n          streamType = 'video';\n          break;\n        case StreamTypes.ADTS_STREAM_TYPE:\n          stream = audio;\n          streamType = 'audio';\n          break;\n        case StreamTypes.METADATA_STREAM_TYPE:\n          stream = timedMetadata;\n          streamType = 'timed-metadata';\n          break;\n        default:\n          // ignore unknown stream types\n          return;\n        }\n\n        // if a new packet is starting, we can flush the completed\n        // packet\n        if (data.payloadUnitStartIndicator) {\n          flushStream(stream, streamType, true);\n        }\n\n        // buffer this fragment until we are sure we've received the\n        // complete payload\n        stream.data.push(data);\n        stream.size += data.data.byteLength;\n      },\n      pmt: function() {\n        var\n          event = {\n            type: 'metadata',\n            tracks: []\n          },\n          programMapTable = data.programMapTable;\n\n        // translate audio and video streams to tracks\n        if (programMapTable.video !== null) {\n          event.tracks.push({\n            timelineStartInfo: {\n              baseMediaDecodeTime: 0\n            },\n            id: +programMapTable.video,\n            codec: 'avc',\n            type: 'video'\n          });\n        }\n        if (programMapTable.audio !== null) {\n          event.tracks.push({\n            timelineStartInfo: {\n              baseMediaDecodeTime: 0\n            },\n            id: +programMapTable.audio,\n            codec: 'adts',\n            type: 'audio'\n          });\n        }\n\n        self.trigger('data', event);\n      }\n    })[data.type]();\n  };\n\n  /**\n   * Flush any remaining input. Video PES packets may be of variable\n   * length. Normally, the start of a new video packet can trigger the\n   * finalization of the previous packet. That is not possible if no\n   * more video is forthcoming, however. In that case, some other\n   * mechanism (like the end of the file) has to be employed. When it is\n   * clear that no additional data is forthcoming, calling this method\n   * will flush the buffered packets.\n   */\n  this.flush = function() {\n    // !!THIS ORDER IS IMPORTANT!!\n    // video first then audio\n    flushStream(video, 'video');\n    flushStream(audio, 'audio');\n    flushStream(timedMetadata, 'timed-metadata');\n    this.trigger('done');\n  };\n};\nElementaryStream.prototype = new Stream();\n\nvar m2ts = {\n  PAT_PID: 0x0000,\n  MP2T_PACKET_LENGTH: MP2T_PACKET_LENGTH,\n  TransportPacketStream: TransportPacketStream,\n  TransportParseStream: TransportParseStream,\n  ElementaryStream: ElementaryStream,\n  TimestampRolloverStream: TimestampRolloverStream,\n  CaptionStream: CaptionStream.CaptionStream,\n  Cea608Stream: CaptionStream.Cea608Stream,\n  MetadataStream: require('./metadata-stream')\n};\n\nfor (var type in StreamTypes) {\n  if (StreamTypes.hasOwnProperty(type)) {\n    m2ts[type] = StreamTypes[type];\n  }\n}\n\nmodule.exports = m2ts;\n","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_style-resources-loader@1.4.1@style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./leftBox.vue?vue&type=style&index=1&lang=less&\"","'use strict';\n\nmodule.exports = {\n  H264_STREAM_TYPE: 0x1B,\n  ADTS_STREAM_TYPE: 0x0F,\n  METADATA_STREAM_TYPE: 0x15\n};\n","/**\n * @file vtt-segment-loader.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x3, _x4, _x5) { var _again = true; _function: while (_again) { var object = _x3, property = _x4, receiver = _x5; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x3 = parent; _x4 = property; _x5 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _segmentLoader = require('./segment-loader');\n\nvar _segmentLoader2 = _interopRequireDefault(_segmentLoader);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs = require('videojs-contrib-media-sources/es5/remove-cues-from-track.js');\n\nvar _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2 = _interopRequireDefault(_videojsContribMediaSourcesEs5RemoveCuesFromTrackJs);\n\nvar _binUtils = require('./bin-utils');\n\nvar VTT_LINE_TERMINATORS = new Uint8Array('\\n\\n'.split('').map(function (char) {\n  return char.charCodeAt(0);\n}));\n\nvar uintToString = function uintToString(uintArray) {\n  return String.fromCharCode.apply(null, uintArray);\n};\n\n/**\n * An object that manages segment loading and appending.\n *\n * @class VTTSegmentLoader\n * @param {Object} options required and optional options\n * @extends videojs.EventTarget\n */\n\nvar VTTSegmentLoader = (function (_SegmentLoader) {\n  _inherits(VTTSegmentLoader, _SegmentLoader);\n\n  function VTTSegmentLoader(settings) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    _classCallCheck(this, VTTSegmentLoader);\n\n    _get(Object.getPrototypeOf(VTTSegmentLoader.prototype), 'constructor', this).call(this, settings, options);\n\n    // SegmentLoader requires a MediaSource be specified or it will throw an error;\n    // however, VTTSegmentLoader has no need of a media source, so delete the reference\n    this.mediaSource_ = null;\n\n    this.subtitlesTrack_ = null;\n  }\n\n  /**\n   * Indicates which time ranges are buffered\n   *\n   * @return {TimeRange}\n   *         TimeRange object representing the current buffered ranges\n   */\n\n  _createClass(VTTSegmentLoader, [{\n    key: 'buffered_',\n    value: function buffered_() {\n      if (!this.subtitlesTrack_ || !this.subtitlesTrack_.cues.length) {\n        return _videoJs2['default'].createTimeRanges();\n      }\n\n      var cues = this.subtitlesTrack_.cues;\n      var start = cues[0].startTime;\n      var end = cues[cues.length - 1].startTime;\n\n      return _videoJs2['default'].createTimeRanges([[start, end]]);\n    }\n\n    /**\n     * Gets and sets init segment for the provided map\n     *\n     * @param {Object} map\n     *        The map object representing the init segment to get or set\n     * @param {Boolean=} set\n     *        If true, the init segment for the provided map should be saved\n     * @return {Object}\n     *         map object for desired init segment\n     */\n  }, {\n    key: 'initSegment',\n    value: function initSegment(map) {\n      var set = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\n      if (!map) {\n        return null;\n      }\n\n      var id = (0, _binUtils.initSegmentId)(map);\n      var storedMap = this.initSegments_[id];\n\n      if (set && !storedMap && map.bytes) {\n        // append WebVTT line terminators to the media initialization segment if it exists\n        // to follow the WebVTT spec (https://w3c.github.io/webvtt/#file-structure) that\n        // requires two or more WebVTT line terminators between the WebVTT header and the\n        // rest of the file\n        var combinedByteLength = VTT_LINE_TERMINATORS.byteLength + map.bytes.byteLength;\n        var combinedSegment = new Uint8Array(combinedByteLength);\n\n        combinedSegment.set(map.bytes);\n        combinedSegment.set(VTT_LINE_TERMINATORS, map.bytes.byteLength);\n\n        this.initSegments_[id] = storedMap = {\n          resolvedUri: map.resolvedUri,\n          byterange: map.byterange,\n          bytes: combinedSegment\n        };\n      }\n\n      return storedMap || map;\n    }\n\n    /**\n     * Returns true if all configuration required for loading is present, otherwise false.\n     *\n     * @return {Boolean} True if the all configuration is ready for loading\n     * @private\n     */\n  }, {\n    key: 'couldBeginLoading_',\n    value: function couldBeginLoading_() {\n      return this.playlist_ && this.subtitlesTrack_ && !this.paused();\n    }\n\n    /**\n     * Once all the starting parameters have been specified, begin\n     * operation. This method should only be invoked from the INIT\n     * state.\n     *\n     * @private\n     */\n  }, {\n    key: 'init_',\n    value: function init_() {\n      this.state = 'READY';\n      this.resetEverything();\n      return this.monitorBuffer_();\n    }\n\n    /**\n     * Set a subtitle track on the segment loader to add subtitles to\n     *\n     * @param {TextTrack=} track\n     *        The text track to add loaded subtitles to\n     * @return {TextTrack}\n     *        Returns the subtitles track\n     */\n  }, {\n    key: 'track',\n    value: function track(_track) {\n      if (typeof _track === 'undefined') {\n        return this.subtitlesTrack_;\n      }\n\n      this.subtitlesTrack_ = _track;\n\n      // if we were unpaused but waiting for a sourceUpdater, start\n      // buffering now\n      if (this.state === 'INIT' && this.couldBeginLoading_()) {\n        this.init_();\n      }\n\n      return this.subtitlesTrack_;\n    }\n\n    /**\n     * Remove any data in the source buffer between start and end times\n     * @param {Number} start - the start time of the region to remove from the buffer\n     * @param {Number} end - the end time of the region to remove from the buffer\n     */\n  }, {\n    key: 'remove',\n    value: function remove(start, end) {\n      (0, _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2['default'])(start, end, this.subtitlesTrack_);\n    }\n\n    /**\n     * fill the buffer with segements unless the sourceBuffers are\n     * currently updating\n     *\n     * Note: this function should only ever be called by monitorBuffer_\n     * and never directly\n     *\n     * @private\n     */\n  }, {\n    key: 'fillBuffer_',\n    value: function fillBuffer_() {\n      var _this = this;\n\n      if (!this.syncPoint_) {\n        this.syncPoint_ = this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_());\n      }\n\n      // see if we need to begin loading immediately\n      var segmentInfo = this.checkBuffer_(this.buffered_(), this.playlist_, this.mediaIndex, this.hasPlayed_(), this.currentTime_(), this.syncPoint_);\n\n      segmentInfo = this.skipEmptySegments_(segmentInfo);\n\n      if (!segmentInfo) {\n        return;\n      }\n\n      if (this.syncController_.timestampOffsetForTimeline(segmentInfo.timeline) === null) {\n        // We don't have the timestamp offset that we need to sync subtitles.\n        // Rerun on a timestamp offset or user interaction.\n        var checkTimestampOffset = function checkTimestampOffset() {\n          _this.state = 'READY';\n          if (!_this.paused()) {\n            // if not paused, queue a buffer check as soon as possible\n            _this.monitorBuffer_();\n          }\n        };\n\n        this.syncController_.one('timestampoffset', checkTimestampOffset);\n        this.state = 'WAITING_ON_TIMELINE';\n        return;\n      }\n\n      this.loadSegment_(segmentInfo);\n    }\n\n    /**\n     * Prevents the segment loader from requesting segments we know contain no subtitles\n     * by walking forward until we find the next segment that we don't know whether it is\n     * empty or not.\n     *\n     * @param {Object} segmentInfo\n     *        a segment info object that describes the current segment\n     * @return {Object}\n     *         a segment info object that describes the current segment\n     */\n  }, {\n    key: 'skipEmptySegments_',\n    value: function skipEmptySegments_(segmentInfo) {\n      while (segmentInfo && segmentInfo.segment.empty) {\n        segmentInfo = this.generateSegmentInfo_(segmentInfo.playlist, segmentInfo.mediaIndex + 1, segmentInfo.startOfSegment + segmentInfo.duration, segmentInfo.isSyncRequest);\n      }\n      return segmentInfo;\n    }\n\n    /**\n     * append a decrypted segement to the SourceBuffer through a SourceUpdater\n     *\n     * @private\n     */\n  }, {\n    key: 'handleSegment_',\n    value: function handleSegment_() {\n      var _this2 = this;\n\n      if (!this.pendingSegment_ || !this.subtitlesTrack_) {\n        this.state = 'READY';\n        return;\n      }\n\n      this.state = 'APPENDING';\n\n      var segmentInfo = this.pendingSegment_;\n      var segment = segmentInfo.segment;\n\n      // Make sure that vttjs has loaded, otherwise, wait till it finished loading\n      if (typeof _globalWindow2['default'].WebVTT !== 'function' && this.subtitlesTrack_ && this.subtitlesTrack_.tech_) {\n        var _ret = (function () {\n\n          var loadHandler = function loadHandler() {\n            _this2.handleSegment_();\n          };\n\n          _this2.state = 'WAITING_ON_VTTJS';\n          _this2.subtitlesTrack_.tech_.one('vttjsloaded', loadHandler);\n          _this2.subtitlesTrack_.tech_.one('vttjserror', function () {\n            _this2.subtitlesTrack_.tech_.off('vttjsloaded', loadHandler);\n            _this2.error({\n              message: 'Error loading vtt.js'\n            });\n            _this2.state = 'READY';\n            _this2.pause();\n            _this2.trigger('error');\n          });\n\n          return {\n            v: undefined\n          };\n        })();\n\n        if (typeof _ret === 'object') return _ret.v;\n      }\n\n      segment.requested = true;\n\n      try {\n        this.parseVTTCues_(segmentInfo);\n      } catch (e) {\n        this.error({\n          message: e.message\n        });\n        this.state = 'READY';\n        this.pause();\n        return this.trigger('error');\n      }\n\n      this.updateTimeMapping_(segmentInfo, this.syncController_.timelines[segmentInfo.timeline], this.playlist_);\n\n      if (segmentInfo.isSyncRequest) {\n        this.trigger('syncinfoupdate');\n        this.pendingSegment_ = null;\n        this.state = 'READY';\n        return;\n      }\n\n      segmentInfo.byteLength = segmentInfo.bytes.byteLength;\n\n      this.mediaSecondsLoaded += segment.duration;\n\n      if (segmentInfo.cues.length) {\n        // remove any overlapping cues to prevent doubling\n        this.remove(segmentInfo.cues[0].endTime, segmentInfo.cues[segmentInfo.cues.length - 1].endTime);\n      }\n\n      segmentInfo.cues.forEach(function (cue) {\n        _this2.subtitlesTrack_.addCue(cue);\n      });\n\n      this.handleUpdateEnd_();\n    }\n\n    /**\n     * Uses the WebVTT parser to parse the segment response\n     *\n     * @param {Object} segmentInfo\n     *        a segment info object that describes the current segment\n     * @private\n     */\n  }, {\n    key: 'parseVTTCues_',\n    value: function parseVTTCues_(segmentInfo) {\n      var decoder = undefined;\n      var decodeBytesToString = false;\n\n      if (typeof _globalWindow2['default'].TextDecoder === 'function') {\n        decoder = new _globalWindow2['default'].TextDecoder('utf8');\n      } else {\n        decoder = _globalWindow2['default'].WebVTT.StringDecoder();\n        decodeBytesToString = true;\n      }\n\n      var parser = new _globalWindow2['default'].WebVTT.Parser(_globalWindow2['default'], _globalWindow2['default'].vttjs, decoder);\n\n      segmentInfo.cues = [];\n      segmentInfo.timestampmap = { MPEGTS: 0, LOCAL: 0 };\n\n      parser.oncue = segmentInfo.cues.push.bind(segmentInfo.cues);\n      parser.ontimestampmap = function (map) {\n        return segmentInfo.timestampmap = map;\n      };\n      parser.onparsingerror = function (error) {\n        _videoJs2['default'].log.warn('Error encountered when parsing cues: ' + error.message);\n      };\n\n      if (segmentInfo.segment.map) {\n        var mapData = segmentInfo.segment.map.bytes;\n\n        if (decodeBytesToString) {\n          mapData = uintToString(mapData);\n        }\n\n        parser.parse(mapData);\n      }\n\n      var segmentData = segmentInfo.bytes;\n\n      if (decodeBytesToString) {\n        segmentData = uintToString(segmentData);\n      }\n\n      parser.parse(segmentData);\n      parser.flush();\n    }\n\n    /**\n     * Updates the start and end times of any cues parsed by the WebVTT parser using\n     * the information parsed from the X-TIMESTAMP-MAP header and a TS to media time mapping\n     * from the SyncController\n     *\n     * @param {Object} segmentInfo\n     *        a segment info object that describes the current segment\n     * @param {Object} mappingObj\n     *        object containing a mapping from TS to media time\n     * @param {Object} playlist\n     *        the playlist object containing the segment\n     * @private\n     */\n  }, {\n    key: 'updateTimeMapping_',\n    value: function updateTimeMapping_(segmentInfo, mappingObj, playlist) {\n      var segment = segmentInfo.segment;\n\n      if (!mappingObj) {\n        // If the sync controller does not have a mapping of TS to Media Time for the\n        // timeline, then we don't have enough information to update the cue\n        // start/end times\n        return;\n      }\n\n      if (!segmentInfo.cues.length) {\n        // If there are no cues, we also do not have enough information to figure out\n        // segment timing. Mark that the segment contains no cues so we don't re-request\n        // an empty segment.\n        segment.empty = true;\n        return;\n      }\n\n      var timestampmap = segmentInfo.timestampmap;\n      var diff = timestampmap.MPEGTS / 90000 - timestampmap.LOCAL + mappingObj.mapping;\n\n      segmentInfo.cues.forEach(function (cue) {\n        // First convert cue time to TS time using the timestamp-map provided within the vtt\n        cue.startTime += diff;\n        cue.endTime += diff;\n      });\n\n      if (!playlist.syncInfo) {\n        var firstStart = segmentInfo.cues[0].startTime;\n        var lastStart = segmentInfo.cues[segmentInfo.cues.length - 1].startTime;\n\n        playlist.syncInfo = {\n          mediaSequence: playlist.mediaSequence + segmentInfo.mediaIndex,\n          time: Math.min(firstStart, lastStart - segment.duration)\n        };\n      }\n    }\n  }]);\n\n  return VTTSegmentLoader;\n})(_segmentLoader2['default']);\n\nexports['default'] = VTTSegmentLoader;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * @file stream.js\n */\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\nvar Stream = function () {\n  function Stream() {\n    _classCallCheck(this, Stream);\n\n    this.listeners = {};\n  }\n\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {String} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  _createClass(Stream, [{\n    key: 'on',\n    value: function on(type, listener) {\n      if (!this.listeners[type]) {\n        this.listeners[type] = [];\n      }\n      this.listeners[type].push(listener);\n    }\n\n    /**\n     * Remove a listener for a specified event type.\n     *\n     * @param {String} type the event name\n     * @param {Function} listener  a function previously registered for this\n     * type of event through `on`\n     * @return {Boolean} if we could turn it off or not\n     */\n\n  }, {\n    key: 'off',\n    value: function off(type, listener) {\n      if (!this.listeners[type]) {\n        return false;\n      }\n\n      var index = this.listeners[type].indexOf(listener);\n\n      this.listeners[type].splice(index, 1);\n      return index > -1;\n    }\n\n    /**\n     * Trigger an event of the specified type on this stream. Any additional\n     * arguments to this function are passed as parameters to event listeners.\n     *\n     * @param {String} type the event name\n     */\n\n  }, {\n    key: 'trigger',\n    value: function trigger(type) {\n      var callbacks = this.listeners[type];\n      var i = void 0;\n      var length = void 0;\n      var args = void 0;\n\n      if (!callbacks) {\n        return;\n      }\n      // Slicing the arguments on every invocation of this method\n      // can add a significant amount of overhead. Avoid the\n      // intermediate object creation for the common case of a\n      // single callback argument\n      if (arguments.length === 2) {\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].call(this, arguments[1]);\n        }\n      } else {\n        args = Array.prototype.slice.call(arguments, 1);\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].apply(this, args);\n        }\n      }\n    }\n\n    /**\n     * Destroys the stream and cleans up.\n     */\n\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.listeners = {};\n    }\n    /**\n     * Forwards all `data` events on this stream to the destination stream. The\n     * destination stream should provide a method `push` to receive the data\n     * events as they arrive.\n     *\n     * @param {Stream} destination the stream that will receive all `data` events\n     * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n     */\n\n  }, {\n    key: 'pipe',\n    value: function pipe(destination) {\n      this.on('data', function (data) {\n        destination.push(data);\n      });\n    }\n  }]);\n\n  return Stream;\n}();\n\nexports['default'] = Stream;","/**\n * mux.js\n *\n * Copyright (c) 2016 Brightcove\n * All rights reserved.\n *\n * Parse mpeg2 transport stream packets to extract basic timing information\n */\n'use strict';\n\nvar StreamTypes = require('../m2ts/stream-types.js');\nvar handleRollover = require('../m2ts/timestamp-rollover-stream.js').handleRollover;\nvar probe = {};\nprobe.ts = require('../m2ts/probe.js');\nprobe.aac = require('../aac/probe.js');\n\n\nvar\n  PES_TIMESCALE = 90000,\n  MP2T_PACKET_LENGTH = 188, // bytes\n  SYNC_BYTE = 0x47;\n\nvar isLikelyAacData = function(data) {\n  if ((data[0] === 'I'.charCodeAt(0)) &&\n      (data[1] === 'D'.charCodeAt(0)) &&\n      (data[2] === '3'.charCodeAt(0))) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * walks through segment data looking for pat and pmt packets to parse out\n * program map table information\n */\nvar parsePsi_ = function(bytes, pmt) {\n  var\n    startIndex = 0,\n    endIndex = MP2T_PACKET_LENGTH,\n    packet, type;\n\n  while (endIndex < bytes.byteLength) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pat':\n          if (!pmt.pid) {\n            pmt.pid = probe.ts.parsePat(packet);\n          }\n          break;\n        case 'pmt':\n          if (!pmt.table) {\n            pmt.table = probe.ts.parsePmt(packet);\n          }\n          break;\n        default:\n          break;\n      }\n\n      // Found the pat and pmt, we can stop walking the segment\n      if (pmt.pid && pmt.table) {\n        return;\n      }\n\n      startIndex += MP2T_PACKET_LENGTH;\n      endIndex += MP2T_PACKET_LENGTH;\n      continue;\n    }\n\n    // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n    startIndex++;\n    endIndex++;\n  }\n};\n\n/**\n * walks through the segment data from the start and end to get timing information\n * for the first and last audio pes packets\n */\nvar parseAudioPes_ = function(bytes, pmt, result) {\n  var\n    startIndex = 0,\n    endIndex = MP2T_PACKET_LENGTH,\n    packet, type, pesType, pusi, parsed;\n\n  var endLoop = false;\n\n  // Start walking from start of segment to get first audio packet\n  while (endIndex < bytes.byteLength) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n          if (pesType === 'audio' && pusi) {\n            parsed = probe.ts.parsePesTime(packet);\n            if (parsed) {\n              parsed.type = 'audio';\n              result.audio.push(parsed);\n              endLoop = true;\n            }\n          }\n          break;\n        default:\n          break;\n      }\n\n      if (endLoop) {\n        break;\n      }\n\n      startIndex += MP2T_PACKET_LENGTH;\n      endIndex += MP2T_PACKET_LENGTH;\n      continue;\n    }\n\n    // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n    startIndex++;\n    endIndex++;\n  }\n\n  // Start walking from end of segment to get last audio packet\n  endIndex = bytes.byteLength;\n  startIndex = endIndex - MP2T_PACKET_LENGTH;\n  endLoop = false;\n  while (startIndex >= 0) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n          if (pesType === 'audio' && pusi) {\n            parsed = probe.ts.parsePesTime(packet);\n            if (parsed) {\n              parsed.type = 'audio';\n              result.audio.push(parsed);\n              endLoop = true;\n            }\n          }\n          break;\n        default:\n          break;\n      }\n\n      if (endLoop) {\n        break;\n      }\n\n      startIndex -= MP2T_PACKET_LENGTH;\n      endIndex -= MP2T_PACKET_LENGTH;\n      continue;\n    }\n\n    // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n    startIndex--;\n    endIndex--;\n  }\n};\n\n/**\n * walks through the segment data from the start and end to get timing information\n * for the first and last video pes packets as well as timing information for the first\n * key frame.\n */\nvar parseVideoPes_ = function(bytes, pmt, result) {\n  var\n    startIndex = 0,\n    endIndex = MP2T_PACKET_LENGTH,\n    packet, type, pesType, pusi, parsed, frame, i, pes;\n\n  var endLoop = false;\n\n  var currentFrame = {\n    data: [],\n    size: 0\n  };\n\n  // Start walking from start of segment to get first video packet\n  while (endIndex < bytes.byteLength) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n          if (pesType === 'video') {\n            if (pusi && !endLoop) {\n              parsed = probe.ts.parsePesTime(packet);\n              if (parsed) {\n                parsed.type = 'video';\n                result.video.push(parsed);\n                endLoop = true;\n              }\n            }\n            if (!result.firstKeyFrame) {\n              if (pusi) {\n                if (currentFrame.size !== 0) {\n                  frame = new Uint8Array(currentFrame.size);\n                  i = 0;\n                  while (currentFrame.data.length) {\n                    pes = currentFrame.data.shift();\n                    frame.set(pes, i);\n                    i += pes.byteLength;\n                  }\n                  if (probe.ts.videoPacketContainsKeyFrame(frame)) {\n                    result.firstKeyFrame = probe.ts.parsePesTime(frame);\n                    result.firstKeyFrame.type = 'video';\n                  }\n                  currentFrame.size = 0;\n                }\n              }\n              currentFrame.data.push(packet);\n              currentFrame.size += packet.byteLength;\n            }\n          }\n          break;\n        default:\n          break;\n      }\n\n      if (endLoop && result.firstKeyFrame) {\n        break;\n      }\n\n      startIndex += MP2T_PACKET_LENGTH;\n      endIndex += MP2T_PACKET_LENGTH;\n      continue;\n    }\n\n    // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n    startIndex++;\n    endIndex++;\n  }\n\n  // Start walking from end of segment to get last video packet\n  endIndex = bytes.byteLength;\n  startIndex = endIndex - MP2T_PACKET_LENGTH;\n  endLoop = false;\n  while (startIndex >= 0) {\n    // Look for a pair of start and end sync bytes in the data..\n    if (bytes[startIndex] === SYNC_BYTE && bytes[endIndex] === SYNC_BYTE) {\n      // We found a packet\n      packet = bytes.subarray(startIndex, endIndex);\n      type = probe.ts.parseType(packet, pmt.pid);\n\n      switch (type) {\n        case 'pes':\n          pesType = probe.ts.parsePesType(packet, pmt.table);\n          pusi = probe.ts.parsePayloadUnitStartIndicator(packet);\n          if (pesType === 'video' && pusi) {\n              parsed = probe.ts.parsePesTime(packet);\n              if (parsed) {\n                parsed.type = 'video';\n                result.video.push(parsed);\n                endLoop = true;\n              }\n          }\n          break;\n        default:\n          break;\n      }\n\n      if (endLoop) {\n        break;\n      }\n\n      startIndex -= MP2T_PACKET_LENGTH;\n      endIndex -= MP2T_PACKET_LENGTH;\n      continue;\n    }\n\n    // If we get here, we have somehow become de-synchronized and we need to step\n    // forward one byte at a time until we find a pair of sync bytes that denote\n    // a packet\n    startIndex--;\n    endIndex--;\n  }\n};\n\n/**\n * Adjusts the timestamp information for the segment to account for\n * rollover and convert to seconds based on pes packet timescale (90khz clock)\n */\nvar adjustTimestamp_ = function(segmentInfo, baseTimestamp) {\n  if (segmentInfo.audio && segmentInfo.audio.length) {\n    var audioBaseTimestamp = baseTimestamp;\n    if (typeof audioBaseTimestamp === 'undefined') {\n      audioBaseTimestamp = segmentInfo.audio[0].dts;\n    }\n    segmentInfo.audio.forEach(function(info) {\n      info.dts = handleRollover(info.dts, audioBaseTimestamp);\n      info.pts = handleRollover(info.pts, audioBaseTimestamp);\n      // time in seconds\n      info.dtsTime = info.dts / PES_TIMESCALE;\n      info.ptsTime = info.pts / PES_TIMESCALE;\n    });\n  }\n\n  if (segmentInfo.video && segmentInfo.video.length) {\n    var videoBaseTimestamp = baseTimestamp;\n    if (typeof videoBaseTimestamp === 'undefined') {\n      videoBaseTimestamp = segmentInfo.video[0].dts;\n    }\n    segmentInfo.video.forEach(function(info) {\n      info.dts = handleRollover(info.dts, videoBaseTimestamp);\n      info.pts = handleRollover(info.pts, videoBaseTimestamp);\n      // time in seconds\n      info.dtsTime = info.dts / PES_TIMESCALE;\n      info.ptsTime = info.pts / PES_TIMESCALE;\n    });\n    if (segmentInfo.firstKeyFrame) {\n      var frame = segmentInfo.firstKeyFrame;\n      frame.dts = handleRollover(frame.dts, videoBaseTimestamp);\n      frame.pts = handleRollover(frame.pts, videoBaseTimestamp);\n      // time in seconds\n      frame.dtsTime = frame.dts / PES_TIMESCALE;\n      frame.ptsTime = frame.dts / PES_TIMESCALE;\n    }\n  }\n};\n\n/**\n * inspects the aac data stream for start and end time information\n */\nvar inspectAac_ = function(bytes) {\n  var\n    endLoop = false,\n    audioCount = 0,\n    sampleRate = null,\n    timestamp = null,\n    frameSize = 0,\n    byteIndex = 0,\n    packet;\n\n  while (bytes.length - byteIndex >= 3) {\n    var type = probe.aac.parseType(bytes, byteIndex);\n    switch (type) {\n      case 'timed-metadata':\n        // Exit early because we don't have enough to parse\n        // the ID3 tag header\n        if (bytes.length - byteIndex < 10) {\n          endLoop = true;\n          break;\n        }\n\n        frameSize = probe.aac.parseId3TagSize(bytes, byteIndex);\n\n        // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n        if (frameSize > bytes.length) {\n          endLoop = true;\n          break;\n        }\n        if (timestamp === null) {\n          packet = bytes.subarray(byteIndex, byteIndex + frameSize);\n          timestamp = probe.aac.parseAacTimestamp(packet);\n        }\n        byteIndex += frameSize;\n        break;\n      case 'audio':\n        // Exit early because we don't have enough to parse\n        // the ADTS frame header\n        if (bytes.length - byteIndex < 7) {\n          endLoop = true;\n          break;\n        }\n\n        frameSize = probe.aac.parseAdtsSize(bytes, byteIndex);\n\n        // Exit early if we don't have enough in the buffer\n        // to emit a full packet\n        if (frameSize > bytes.length) {\n          endLoop = true;\n          break;\n        }\n        if (sampleRate === null) {\n          packet = bytes.subarray(byteIndex, byteIndex + frameSize);\n          sampleRate = probe.aac.parseSampleRate(packet);\n        }\n        audioCount++;\n        byteIndex += frameSize;\n        break;\n      default:\n        byteIndex++;\n        break;\n    }\n    if (endLoop) {\n      return null;\n    }\n  }\n  if (sampleRate === null || timestamp === null) {\n    return null;\n  }\n\n  var audioTimescale = PES_TIMESCALE / sampleRate;\n\n  var result = {\n    audio: [\n      {\n        type: 'audio',\n        dts: timestamp,\n        pts: timestamp\n      },\n      {\n        type: 'audio',\n        dts: timestamp + (audioCount * 1024 * audioTimescale),\n        pts: timestamp + (audioCount * 1024 * audioTimescale)\n      }\n    ]\n  };\n\n  return result;\n};\n\n/**\n * inspects the transport stream segment data for start and end time information\n * of the audio and video tracks (when present) as well as the first key frame's\n * start time.\n */\nvar inspectTs_ = function(bytes) {\n  var pmt = {\n    pid: null,\n    table: null\n  };\n\n  var result = {};\n\n  parsePsi_(bytes, pmt);\n\n  for (var pid in pmt.table) {\n    if (pmt.table.hasOwnProperty(pid)) {\n      var type = pmt.table[pid];\n      switch (type) {\n        case StreamTypes.H264_STREAM_TYPE:\n          result.video = [];\n          parseVideoPes_(bytes, pmt, result);\n          if (result.video.length === 0) {\n            delete result.video;\n          }\n          break;\n        case StreamTypes.ADTS_STREAM_TYPE:\n          result.audio = [];\n          parseAudioPes_(bytes, pmt, result);\n          if (result.audio.length === 0) {\n            delete result.audio;\n          }\n          break;\n        default:\n          break;\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * Inspects segment byte data and returns an object with start and end timing information\n *\n * @param {Uint8Array} bytes The segment byte data\n * @param {Number} baseTimestamp Relative reference timestamp used when adjusting frame\n *  timestamps for rollover. This value must be in 90khz clock.\n * @return {Object} Object containing start and end frame timing info of segment.\n */\nvar inspect = function(bytes, baseTimestamp) {\n  var isAacData = isLikelyAacData(bytes);\n\n  var result;\n\n  if (isAacData) {\n    result = inspectAac_(bytes);\n  } else {\n    result = inspectTs_(bytes);\n  }\n\n  if (!result || (!result.audio && !result.video)) {\n    return null;\n  }\n\n  adjustTimestamp_(result, baseTimestamp);\n\n  return result;\n};\n\nmodule.exports = {\n  inspect: inspect\n};\n","/*\n * pkcs7.pad\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\n'use strict';\n\nvar PADDING;\n\n/**\n * Returns a new Uint8Array that is padded with PKCS#7 padding.\n * @param plaintext {Uint8Array} the input bytes before encryption\n * @return {Uint8Array} the padded bytes\n * @see http://tools.ietf.org/html/rfc5652\n */\nmodule.exports = function pad(plaintext) {\n  var padding = PADDING[(plaintext.byteLength % 16) || 0],\n      result = new Uint8Array(plaintext.byteLength + padding.length);\n  result.set(plaintext);\n  result.set(padding, plaintext.byteLength);\n  return result;\n};\n\n// pre-define the padding values\nPADDING = [\n  [16, 16, 16, 16,\n   16, 16, 16, 16,\n   16, 16, 16, 16,\n   16, 16, 16, 16],\n\n  [15, 15, 15, 15,\n   15, 15, 15, 15,\n   15, 15, 15, 15,\n   15, 15, 15],\n\n  [14, 14, 14, 14,\n   14, 14, 14, 14,\n   14, 14, 14, 14,\n   14, 14],\n\n  [13, 13, 13, 13,\n   13, 13, 13, 13,\n   13, 13, 13, 13,\n   13],\n\n  [12, 12, 12, 12,\n   12, 12, 12, 12,\n   12, 12, 12, 12],\n\n  [11, 11, 11, 11,\n   11, 11, 11, 11,\n   11, 11, 11],\n\n  [10, 10, 10, 10,\n   10, 10, 10, 10,\n   10, 10],\n\n  [9, 9, 9, 9,\n   9, 9, 9, 9,\n   9],\n\n  [8, 8, 8, 8,\n   8, 8, 8, 8],\n\n  [7, 7, 7, 7,\n   7, 7, 7],\n\n  [6, 6, 6, 6,\n   6, 6],\n\n  [5, 5, 5, 5,\n   5],\n\n  [4, 4, 4, 4],\n\n  [3, 3, 3],\n\n  [2, 2],\n\n  [1]\n];\n","/**\n * @file source-updater.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar noop = function noop() {};\n\n/**\n * A queue of callbacks to be serialized and applied when a\n * MediaSource and its associated SourceBuffers are not in the\n * updating state. It is used by the segment loader to update the\n * underlying SourceBuffers when new data is loaded, for instance.\n *\n * @class SourceUpdater\n * @param {MediaSource} mediaSource the MediaSource to create the\n * SourceBuffer from\n * @param {String} mimeType the desired MIME type of the underlying\n * SourceBuffer\n */\n\nvar SourceUpdater = (function () {\n  function SourceUpdater(mediaSource, mimeType) {\n    var _this = this;\n\n    _classCallCheck(this, SourceUpdater);\n\n    var createSourceBuffer = function createSourceBuffer() {\n      _this.sourceBuffer_ = mediaSource.addSourceBuffer(mimeType);\n\n      // run completion handlers and process callbacks as updateend\n      // events fire\n      _this.onUpdateendCallback_ = function () {\n        var pendingCallback = _this.pendingCallback_;\n\n        _this.pendingCallback_ = null;\n\n        if (pendingCallback) {\n          pendingCallback();\n        }\n\n        _this.runCallback_();\n      };\n\n      _this.sourceBuffer_.addEventListener('updateend', _this.onUpdateendCallback_);\n\n      _this.runCallback_();\n    };\n\n    this.callbacks_ = [];\n    this.pendingCallback_ = null;\n    this.timestampOffset_ = 0;\n    this.mediaSource = mediaSource;\n    this.processedAppend_ = false;\n\n    if (mediaSource.readyState === 'closed') {\n      mediaSource.addEventListener('sourceopen', createSourceBuffer);\n    } else {\n      createSourceBuffer();\n    }\n  }\n\n  /**\n   * Aborts the current segment and resets the segment parser.\n   *\n   * @param {Function} done function to call when done\n   * @see http://w3c.github.io/media-source/#widl-SourceBuffer-abort-void\n   */\n\n  _createClass(SourceUpdater, [{\n    key: 'abort',\n    value: function abort(done) {\n      var _this2 = this;\n\n      if (this.processedAppend_) {\n        this.queueCallback_(function () {\n          _this2.sourceBuffer_.abort();\n        }, done);\n      }\n    }\n\n    /**\n     * Queue an update to append an ArrayBuffer.\n     *\n     * @param {ArrayBuffer} bytes\n     * @param {Function} done the function to call when done\n     * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-appendBuffer-void-ArrayBuffer-data\n     */\n  }, {\n    key: 'appendBuffer',\n    value: function appendBuffer(bytes, done) {\n      var _this3 = this;\n\n      this.processedAppend_ = true;\n      this.queueCallback_(function () {\n        _this3.sourceBuffer_.appendBuffer(bytes);\n      }, done);\n    }\n\n    /**\n     * Indicates what TimeRanges are buffered in the managed SourceBuffer.\n     *\n     * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-buffered\n     */\n  }, {\n    key: 'buffered',\n    value: function buffered() {\n      if (!this.sourceBuffer_) {\n        return _videoJs2['default'].createTimeRanges();\n      }\n      return this.sourceBuffer_.buffered;\n    }\n\n    /**\n     * Queue an update to remove a time range from the buffer.\n     *\n     * @param {Number} start where to start the removal\n     * @param {Number} end where to end the removal\n     * @see http://www.w3.org/TR/media-source/#widl-SourceBuffer-remove-void-double-start-unrestricted-double-end\n     */\n  }, {\n    key: 'remove',\n    value: function remove(start, end) {\n      var _this4 = this;\n\n      if (this.processedAppend_) {\n        this.queueCallback_(function () {\n          _this4.sourceBuffer_.remove(start, end);\n        }, noop);\n      }\n    }\n\n    /**\n     * Whether the underlying sourceBuffer is updating or not\n     *\n     * @return {Boolean} the updating status of the SourceBuffer\n     */\n  }, {\n    key: 'updating',\n    value: function updating() {\n      return !this.sourceBuffer_ || this.sourceBuffer_.updating || this.pendingCallback_;\n    }\n\n    /**\n     * Set/get the timestampoffset on the SourceBuffer\n     *\n     * @return {Number} the timestamp offset\n     */\n  }, {\n    key: 'timestampOffset',\n    value: function timestampOffset(offset) {\n      var _this5 = this;\n\n      if (typeof offset !== 'undefined') {\n        this.queueCallback_(function () {\n          _this5.sourceBuffer_.timestampOffset = offset;\n        });\n        this.timestampOffset_ = offset;\n      }\n      return this.timestampOffset_;\n    }\n\n    /**\n     * Queue a callback to run\n     */\n  }, {\n    key: 'queueCallback_',\n    value: function queueCallback_(callback, done) {\n      this.callbacks_.push([callback.bind(this), done]);\n      this.runCallback_();\n    }\n\n    /**\n     * Run a queued callback\n     */\n  }, {\n    key: 'runCallback_',\n    value: function runCallback_() {\n      var callbacks = undefined;\n\n      if (!this.updating() && this.callbacks_.length) {\n        callbacks = this.callbacks_.shift();\n        this.pendingCallback_ = callbacks[1];\n        callbacks[0]();\n      }\n    }\n\n    /**\n     * dispose of the source updater and the underlying sourceBuffer\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.sourceBuffer_.removeEventListener('updateend', this.onUpdateendCallback_);\n      if (this.sourceBuffer_ && this.mediaSource.readyState === 'open') {\n        this.sourceBuffer_.abort();\n      }\n    }\n  }]);\n\n  return SourceUpdater;\n})();\n\nexports['default'] = SourceUpdater;\nmodule.exports = exports['default'];","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nvar autoKeyword = \"auto\";\nvar directionSetting = {\n  \"\": true,\n  \"lr\": true,\n  \"rl\": true\n};\nvar alignSetting = {\n  \"start\": true,\n  \"middle\": true,\n  \"end\": true,\n  \"left\": true,\n  \"right\": true\n};\n\nfunction findDirectionSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var dir = directionSetting[value.toLowerCase()];\n  return dir ? value.toLowerCase() : false;\n}\n\nfunction findAlignSetting(value) {\n  if (typeof value !== \"string\") {\n    return false;\n  }\n  var align = alignSetting[value.toLowerCase()];\n  return align ? value.toLowerCase() : false;\n}\n\nfunction extend(obj) {\n  var i = 1;\n  for (; i < arguments.length; i++) {\n    var cobj = arguments[i];\n    for (var p in cobj) {\n      obj[p] = cobj[p];\n    }\n  }\n\n  return obj;\n}\n\nfunction VTTCue(startTime, endTime, text) {\n  var cue = this;\n  var isIE8 = (/MSIE\\s8\\.0/).test(navigator.userAgent);\n  var baseObj = {};\n\n  if (isIE8) {\n    cue = document.createElement('custom');\n  } else {\n    baseObj.enumerable = true;\n  }\n\n  /**\n   * Shim implementation specific properties. These properties are not in\n   * the spec.\n   */\n\n  // Lets us know when the VTTCue's data has changed in such a way that we need\n  // to recompute its display state. This lets us compute its display state\n  // lazily.\n  cue.hasBeenReset = false;\n\n  /**\n   * VTTCue and TextTrackCue properties\n   * http://dev.w3.org/html5/webvtt/#vttcue-interface\n   */\n\n  var _id = \"\";\n  var _pauseOnExit = false;\n  var _startTime = startTime;\n  var _endTime = endTime;\n  var _text = text;\n  var _region = null;\n  var _vertical = \"\";\n  var _snapToLines = true;\n  var _line = \"auto\";\n  var _lineAlign = \"start\";\n  var _position = 50;\n  var _positionAlign = \"middle\";\n  var _size = 50;\n  var _align = \"middle\";\n\n  Object.defineProperty(cue,\n    \"id\", extend({}, baseObj, {\n      get: function() {\n        return _id;\n      },\n      set: function(value) {\n        _id = \"\" + value;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"pauseOnExit\", extend({}, baseObj, {\n      get: function() {\n        return _pauseOnExit;\n      },\n      set: function(value) {\n        _pauseOnExit = !!value;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"startTime\", extend({}, baseObj, {\n      get: function() {\n        return _startTime;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Start time must be set to a number.\");\n        }\n        _startTime = value;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"endTime\", extend({}, baseObj, {\n      get: function() {\n        return _endTime;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"End time must be set to a number.\");\n        }\n        _endTime = value;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"text\", extend({}, baseObj, {\n      get: function() {\n        return _text;\n      },\n      set: function(value) {\n        _text = \"\" + value;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"region\", extend({}, baseObj, {\n      get: function() {\n        return _region;\n      },\n      set: function(value) {\n        _region = value;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"vertical\", extend({}, baseObj, {\n      get: function() {\n        return _vertical;\n      },\n      set: function(value) {\n        var setting = findDirectionSetting(value);\n        // Have to check for false because the setting an be an empty string.\n        if (setting === false) {\n          throw new SyntaxError(\"An invalid or illegal string was specified.\");\n        }\n        _vertical = setting;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"snapToLines\", extend({}, baseObj, {\n      get: function() {\n        return _snapToLines;\n      },\n      set: function(value) {\n        _snapToLines = !!value;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"line\", extend({}, baseObj, {\n      get: function() {\n        return _line;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\" && value !== autoKeyword) {\n          throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n        }\n        _line = value;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"lineAlign\", extend({}, baseObj, {\n      get: function() {\n        return _lineAlign;\n      },\n      set: function(value) {\n        var setting = findAlignSetting(value);\n        if (!setting) {\n          throw new SyntaxError(\"An invalid or illegal string was specified.\");\n        }\n        _lineAlign = setting;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"position\", extend({}, baseObj, {\n      get: function() {\n        return _position;\n      },\n      set: function(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Position must be between 0 and 100.\");\n        }\n        _position = value;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"positionAlign\", extend({}, baseObj, {\n      get: function() {\n        return _positionAlign;\n      },\n      set: function(value) {\n        var setting = findAlignSetting(value);\n        if (!setting) {\n          throw new SyntaxError(\"An invalid or illegal string was specified.\");\n        }\n        _positionAlign = setting;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"size\", extend({}, baseObj, {\n      get: function() {\n        return _size;\n      },\n      set: function(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Size must be between 0 and 100.\");\n        }\n        _size = value;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  Object.defineProperty(cue,\n    \"align\", extend({}, baseObj, {\n      get: function() {\n        return _align;\n      },\n      set: function(value) {\n        var setting = findAlignSetting(value);\n        if (!setting) {\n          throw new SyntaxError(\"An invalid or illegal string was specified.\");\n        }\n        _align = setting;\n        this.hasBeenReset = true;\n      }\n    }));\n\n  /**\n   * Other <track> spec defined properties\n   */\n\n  // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state\n  cue.displayState = undefined;\n\n  if (isIE8) {\n    return cue;\n  }\n}\n\n/**\n * VTTCue methods\n */\n\nVTTCue.prototype.getCueAsHTML = function() {\n  // Assume WebVTT.convertCueToDOMTree is on the global.\n  return WebVTT.convertCueToDOMTree(window, this.text);\n};\n\nmodule.exports = VTTCue;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _binUtils = require('./bin-utils');\n\nvar REQUEST_ERRORS = {\n  FAILURE: 2,\n  TIMEOUT: -101,\n  ABORTED: -102\n};\n\nexports.REQUEST_ERRORS = REQUEST_ERRORS;\n/**\n * Turns segment byterange into a string suitable for use in\n * HTTP Range requests\n *\n * @param {Object} byterange - an object with two values defining the start and end\n *                             of a byte-range\n */\nvar byterangeStr = function byterangeStr(byterange) {\n  var byterangeStart = undefined;\n  var byterangeEnd = undefined;\n\n  // `byterangeEnd` is one less than `offset + length` because the HTTP range\n  // header uses inclusive ranges\n  byterangeEnd = byterange.offset + byterange.length - 1;\n  byterangeStart = byterange.offset;\n  return 'bytes=' + byterangeStart + '-' + byterangeEnd;\n};\n\n/**\n * Defines headers for use in the xhr request for a particular segment.\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n */\nvar segmentXhrHeaders = function segmentXhrHeaders(segment) {\n  var headers = {};\n\n  if (segment.byterange) {\n    headers.Range = byterangeStr(segment.byterange);\n  }\n  return headers;\n};\n\n/**\n * Abort all requests\n *\n * @param {Object} activeXhrs - an object that tracks all XHR requests\n */\nvar abortAll = function abortAll(activeXhrs) {\n  activeXhrs.forEach(function (xhr) {\n    xhr.abort();\n  });\n};\n\n/**\n * Gather important bandwidth stats once a request has completed\n *\n * @param {Object} request - the XHR request from which to gather stats\n */\nvar getRequestStats = function getRequestStats(request) {\n  return {\n    bandwidth: request.bandwidth,\n    bytesReceived: request.bytesReceived || 0,\n    roundTripTime: request.roundTripTime || 0\n  };\n};\n\n/**\n * If possible gather bandwidth stats as a request is in\n * progress\n *\n * @param {Event} progressEvent - an event object from an XHR's progress event\n */\nvar getProgressStats = function getProgressStats(progressEvent) {\n  var request = progressEvent.target;\n  var roundTripTime = Date.now() - request.requestTime;\n  var stats = {\n    bandwidth: Infinity,\n    bytesReceived: 0,\n    roundTripTime: roundTripTime || 0\n  };\n\n  stats.bytesReceived = progressEvent.loaded;\n  // This can result in Infinity if stats.roundTripTime is 0 but that is ok\n  // because we should only use bandwidth stats on progress to determine when\n  // abort a request early due to insufficient bandwidth\n  stats.bandwidth = Math.floor(stats.bytesReceived / stats.roundTripTime * 8 * 1000);\n\n  return stats;\n};\n\n/**\n * Handle all error conditions in one place and return an object\n * with all the information\n *\n * @param {Error|null} error - if non-null signals an error occured with the XHR\n * @param {Object} request -  the XHR request that possibly generated the error\n */\nvar handleErrors = function handleErrors(error, request) {\n  if (request.timedout) {\n    return {\n      status: request.status,\n      message: 'HLS request timed-out at URL: ' + request.uri,\n      code: REQUEST_ERRORS.TIMEOUT,\n      xhr: request\n    };\n  }\n\n  if (request.aborted) {\n    return {\n      status: request.status,\n      message: 'HLS request aborted at URL: ' + request.uri,\n      code: REQUEST_ERRORS.ABORTED,\n      xhr: request\n    };\n  }\n\n  if (error) {\n    return {\n      status: request.status,\n      message: 'HLS request errored at URL: ' + request.uri,\n      code: REQUEST_ERRORS.FAILURE,\n      xhr: request\n    };\n  }\n\n  return null;\n};\n\n/**\n * Handle responses for key data and convert the key data to the correct format\n * for the decryption step later\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} finishProcessingFn - a callback to execute to continue processing\n *                                        this request\n */\nvar handleKeyResponse = function handleKeyResponse(segment, finishProcessingFn) {\n  return function (error, request) {\n    var response = request.response;\n    var errorObj = handleErrors(error, request);\n\n    if (errorObj) {\n      return finishProcessingFn(errorObj, segment);\n    }\n\n    if (response.byteLength !== 16) {\n      return finishProcessingFn({\n        status: request.status,\n        message: 'Invalid HLS key at URL: ' + request.uri,\n        code: REQUEST_ERRORS.FAILURE,\n        xhr: request\n      }, segment);\n    }\n\n    var view = new DataView(response);\n\n    segment.key.bytes = new Uint32Array([view.getUint32(0), view.getUint32(4), view.getUint32(8), view.getUint32(12)]);\n    return finishProcessingFn(null, segment);\n  };\n};\n\n/**\n * Handle init-segment responses\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} finishProcessingFn - a callback to execute to continue processing\n *                                        this request\n */\nvar handleInitSegmentResponse = function handleInitSegmentResponse(segment, finishProcessingFn) {\n  return function (error, request) {\n    var response = request.response;\n    var errorObj = handleErrors(error, request);\n\n    if (errorObj) {\n      return finishProcessingFn(errorObj, segment);\n    }\n\n    // stop processing if received empty content\n    if (response.byteLength === 0) {\n      return finishProcessingFn({\n        status: request.status,\n        message: 'Empty HLS segment content at URL: ' + request.uri,\n        code: REQUEST_ERRORS.FAILURE,\n        xhr: request\n      }, segment);\n    }\n\n    segment.map.bytes = new Uint8Array(request.response);\n    return finishProcessingFn(null, segment);\n  };\n};\n\n/**\n * Response handler for segment-requests being sure to set the correct\n * property depending on whether the segment is encryped or not\n * Also records and keeps track of stats that are used for ABR purposes\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} finishProcessingFn - a callback to execute to continue processing\n *                                        this request\n */\nvar handleSegmentResponse = function handleSegmentResponse(segment, finishProcessingFn) {\n  return function (error, request) {\n    var response = request.response;\n    var errorObj = handleErrors(error, request);\n\n    if (errorObj) {\n      return finishProcessingFn(errorObj, segment);\n    }\n\n    // stop processing if received empty content\n    if (response.byteLength === 0) {\n      return finishProcessingFn({\n        status: request.status,\n        message: 'Empty HLS segment content at URL: ' + request.uri,\n        code: REQUEST_ERRORS.FAILURE,\n        xhr: request\n      }, segment);\n    }\n\n    segment.stats = getRequestStats(request);\n\n    if (segment.key) {\n      segment.encryptedBytes = new Uint8Array(request.response);\n    } else {\n      segment.bytes = new Uint8Array(request.response);\n    }\n\n    return finishProcessingFn(null, segment);\n  };\n};\n\n/**\n * Decrypt the segment via the decryption web worker\n *\n * @param {WebWorker} decrypter - a WebWorker interface to AES-128 decryption routines\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} doneFn - a callback that is executed after decryption has completed\n */\nvar decryptSegment = function decryptSegment(decrypter, segment, doneFn) {\n  var decryptionHandler = function decryptionHandler(event) {\n    if (event.data.source === segment.requestId) {\n      decrypter.removeEventListener('message', decryptionHandler);\n      var decrypted = event.data.decrypted;\n\n      segment.bytes = new Uint8Array(decrypted.bytes, decrypted.byteOffset, decrypted.byteLength);\n      return doneFn(null, segment);\n    }\n  };\n\n  decrypter.addEventListener('message', decryptionHandler);\n\n  // this is an encrypted segment\n  // incrementally decrypt the segment\n  decrypter.postMessage((0, _binUtils.createTransferableMessage)({\n    source: segment.requestId,\n    encrypted: segment.encryptedBytes,\n    key: segment.key.bytes,\n    iv: segment.key.iv\n  }), [segment.encryptedBytes.buffer, segment.key.bytes.buffer]);\n};\n\n/**\n * The purpose of this function is to get the most pertinent error from the\n * array of errors.\n * For instance if a timeout and two aborts occur, then the aborts were\n * likely triggered by the timeout so return that error object.\n */\nvar getMostImportantError = function getMostImportantError(errors) {\n  return errors.reduce(function (prev, err) {\n    return err.code > prev.code ? err : prev;\n  });\n};\n\n/**\n * This function waits for all XHRs to finish (with either success or failure)\n * before continueing processing via it's callback. The function gathers errors\n * from each request into a single errors array so that the error status for\n * each request can be examined later.\n *\n * @param {Object} activeXhrs - an object that tracks all XHR requests\n * @param {WebWorker} decrypter - a WebWorker interface to AES-128 decryption routines\n * @param {Function} doneFn - a callback that is executed after all resources have been\n *                            downloaded and any decryption completed\n */\nvar waitForCompletion = function waitForCompletion(activeXhrs, decrypter, doneFn) {\n  var errors = [];\n  var count = 0;\n\n  return function (error, segment) {\n    if (error) {\n      // If there are errors, we have to abort any outstanding requests\n      abortAll(activeXhrs);\n      errors.push(error);\n    }\n    count += 1;\n\n    if (count === activeXhrs.length) {\n      // Keep track of when *all* of the requests have completed\n      segment.endOfAllRequests = Date.now();\n\n      if (errors.length > 0) {\n        var worstError = getMostImportantError(errors);\n\n        return doneFn(worstError, segment);\n      }\n      if (segment.encryptedBytes) {\n        return decryptSegment(decrypter, segment, doneFn);\n      }\n      // Otherwise, everything is ready just continue\n      return doneFn(null, segment);\n    }\n  };\n};\n\n/**\n * Simple progress event callback handler that gathers some stats before\n * executing a provided callback with the `segment` object\n *\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} progressFn - a callback that is executed each time a progress event\n *                                is received\n * @param {Event} event - the progress event object from XMLHttpRequest\n */\nvar handleProgress = function handleProgress(segment, progressFn) {\n  return function (event) {\n    segment.stats = _videoJs2['default'].mergeOptions(segment.stats, getProgressStats(event));\n\n    // record the time that we receive the first byte of data\n    if (!segment.stats.firstBytesReceivedAt && segment.stats.bytesReceived) {\n      segment.stats.firstBytesReceivedAt = Date.now();\n    }\n\n    return progressFn(event, segment);\n  };\n};\n\n/**\n * Load all resources and does any processing necessary for a media-segment\n *\n * Features:\n *   decrypts the media-segment if it has a key uri and an iv\n *   aborts *all* requests if *any* one request fails\n *\n * The segment object, at minimum, has the following format:\n * {\n *   resolvedUri: String,\n *   [byterange]: {\n *     offset: Number,\n *     length: Number\n *   },\n *   [key]: {\n *     resolvedUri: String\n *     [byterange]: {\n *       offset: Number,\n *       length: Number\n *     },\n *     iv: {\n *       bytes: Uint32Array\n *     }\n *   },\n *   [map]: {\n *     resolvedUri: String,\n *     [byterange]: {\n *       offset: Number,\n *       length: Number\n *     },\n *     [bytes]: Uint8Array\n *   }\n * }\n * ...where [name] denotes optional properties\n *\n * @param {Function} xhr - an instance of the xhr wrapper in xhr.js\n * @param {Object} xhrOptions - the base options to provide to all xhr requests\n * @param {WebWorker} decryptionWorker - a WebWorker interface to AES-128\n *                                       decryption routines\n * @param {Object} segment - a simplified copy of the segmentInfo object\n *                           from SegmentLoader\n * @param {Function} progressFn - a callback that receives progress events from the main\n *                                segment's xhr request\n * @param {Function} doneFn - a callback that is executed only once all requests have\n *                            succeeded or failed\n * @returns {Function} a function that, when invoked, immediately aborts all\n *                     outstanding requests\n */\nvar mediaSegmentRequest = function mediaSegmentRequest(xhr, xhrOptions, decryptionWorker, segment, progressFn, doneFn) {\n  var activeXhrs = [];\n  var finishProcessingFn = waitForCompletion(activeXhrs, decryptionWorker, doneFn);\n\n  // optionally, request the decryption key\n  if (segment.key) {\n    var keyRequestOptions = _videoJs2['default'].mergeOptions(xhrOptions, {\n      uri: segment.key.resolvedUri,\n      responseType: 'arraybuffer'\n    });\n    var keyRequestCallback = handleKeyResponse(segment, finishProcessingFn);\n    var keyXhr = xhr(keyRequestOptions, keyRequestCallback);\n\n    activeXhrs.push(keyXhr);\n  }\n\n  // optionally, request the associated media init segment\n  if (segment.map && !segment.map.bytes) {\n    var initSegmentOptions = _videoJs2['default'].mergeOptions(xhrOptions, {\n      uri: segment.map.resolvedUri,\n      responseType: 'arraybuffer',\n      headers: segmentXhrHeaders(segment.map)\n    });\n    var initSegmentRequestCallback = handleInitSegmentResponse(segment, finishProcessingFn);\n    var initSegmentXhr = xhr(initSegmentOptions, initSegmentRequestCallback);\n\n    activeXhrs.push(initSegmentXhr);\n  }\n\n  var segmentRequestOptions = _videoJs2['default'].mergeOptions(xhrOptions, {\n    uri: segment.resolvedUri,\n    responseType: 'arraybuffer',\n    headers: segmentXhrHeaders(segment)\n  });\n  var segmentRequestCallback = handleSegmentResponse(segment, finishProcessingFn);\n  var segmentXhr = xhr(segmentRequestOptions, segmentRequestCallback);\n\n  segmentXhr.addEventListener('progress', handleProgress(segment, progressFn));\n  activeXhrs.push(segmentXhr);\n\n  return function () {\n    return abortAll(activeXhrs);\n  };\n};\nexports.mediaSegmentRequest = mediaSegmentRequest;","/**\n * mux.js\n *\n * Copyright (c) 2014 Brightcove\n * All rights reserved.\n *\n * A lightweight readable stream implemention that handles event dispatching.\n * Objects that inherit from streams should call init in their constructors.\n */\n'use strict';\n\nvar Stream = function() {\n  this.init = function() {\n    var listeners = {};\n    /**\n     * Add a listener for a specified event type.\n     * @param type {string} the event name\n     * @param listener {function} the callback to be invoked when an event of\n     * the specified type occurs\n     */\n    this.on = function(type, listener) {\n      if (!listeners[type]) {\n        listeners[type] = [];\n      }\n      listeners[type] = listeners[type].concat(listener);\n    };\n    /**\n     * Remove a listener for a specified event type.\n     * @param type {string} the event name\n     * @param listener {function} a function previously registered for this\n     * type of event through `on`\n     */\n    this.off = function(type, listener) {\n      var index;\n      if (!listeners[type]) {\n        return false;\n      }\n      index = listeners[type].indexOf(listener);\n      listeners[type] = listeners[type].slice();\n      listeners[type].splice(index, 1);\n      return index > -1;\n    };\n    /**\n     * Trigger an event of the specified type on this stream. Any additional\n     * arguments to this function are passed as parameters to event listeners.\n     * @param type {string} the event name\n     */\n    this.trigger = function(type) {\n      var callbacks, i, length, args;\n      callbacks = listeners[type];\n      if (!callbacks) {\n        return;\n      }\n      // Slicing the arguments on every invocation of this method\n      // can add a significant amount of overhead. Avoid the\n      // intermediate object creation for the common case of a\n      // single callback argument\n      if (arguments.length === 2) {\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].call(this, arguments[1]);\n        }\n      } else {\n        args = [];\n        i = arguments.length;\n        for (i = 1; i < arguments.length; ++i) {\n          args.push(arguments[i]);\n        }\n        length = callbacks.length;\n        for (i = 0; i < length; ++i) {\n          callbacks[i].apply(this, args);\n        }\n      }\n    };\n    /**\n     * Destroys the stream and cleans up.\n     */\n    this.dispose = function() {\n      listeners = {};\n    };\n  };\n};\n\n/**\n * Forwards all `data` events on this stream to the destination stream. The\n * destination stream should provide a method `push` to receive the data\n * events as they arrive.\n * @param destination {stream} the stream that will receive all `data` events\n * @param autoFlush {boolean} if false, we will not call `flush` on the destination\n *                            when the current stream emits a 'done' event\n * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n */\nStream.prototype.pipe = function(destination) {\n  this.on('data', function(data) {\n    destination.push(data);\n  });\n\n  this.on('done', function(flushSource) {\n    destination.flush(flushSource);\n  });\n\n  return destination;\n};\n\n// Default stream functions that are expected to be overridden to perform\n// actual work. These are provided by the prototype as a sort of no-op\n// implementation so that we don't have to check for their existence in the\n// `pipe` function above.\nStream.prototype.push = function(data) {\n  this.trigger('data', data);\n};\n\nStream.prototype.flush = function(flushSource) {\n  this.trigger('done', flushSource);\n};\n\nmodule.exports = Stream;\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0QTJBMzZEMjA4REExMUU5OUIyNkNDRDVFRjc4QThDMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0QTJBMzZEMzA4REExMUU5OUIyNkNDRDVFRjc4QThDMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRBMkEzNkQwMDhEQTExRTk5QjI2Q0NENUVGNzhBOEMzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRBMkEzNkQxMDhEQTExRTk5QjI2Q0NENUVGNzhBOEMzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FABfVwAABzFJREFUeNrcWA1sG1cd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\"","/**\n * Accepts program elementary stream (PES) data events and parses out\n * ID3 metadata from them, if present.\n * @see http://id3.org/id3v2.3.0\n */\n'use strict';\nvar\n  Stream = require('../utils/stream'),\n  StreamTypes = require('./stream-types'),\n  // return a percent-encoded representation of the specified byte range\n  // @see http://en.wikipedia.org/wiki/Percent-encoding\n  percentEncode = function(bytes, start, end) {\n    var i, result = '';\n    for (i = start; i < end; i++) {\n      result += '%' + ('00' + bytes[i].toString(16)).slice(-2);\n    }\n    return result;\n  },\n  // return the string representation of the specified byte range,\n  // interpreted as UTf-8.\n  parseUtf8 = function(bytes, start, end) {\n    return decodeURIComponent(percentEncode(bytes, start, end));\n  },\n  // return the string representation of the specified byte range,\n  // interpreted as ISO-8859-1.\n  parseIso88591 = function(bytes, start, end) {\n    return unescape(percentEncode(bytes, start, end)); // jshint ignore:line\n  },\n  parseSyncSafeInteger = function(data) {\n    return (data[0] << 21) |\n            (data[1] << 14) |\n            (data[2] << 7) |\n            (data[3]);\n  },\n  tagParsers = {\n    TXXX: function(tag) {\n      var i;\n      if (tag.data[0] !== 3) {\n        // ignore frames with unrecognized character encodings\n        return;\n      }\n\n      for (i = 1; i < tag.data.length; i++) {\n        if (tag.data[i] === 0) {\n          // parse the text fields\n          tag.description = parseUtf8(tag.data, 1, i);\n          // do not include the null terminator in the tag value\n          tag.value = parseUtf8(tag.data, i + 1, tag.data.length).replace(/\\0*$/, '');\n          break;\n        }\n      }\n      tag.data = tag.value;\n    },\n    WXXX: function(tag) {\n      var i;\n      if (tag.data[0] !== 3) {\n        // ignore frames with unrecognized character encodings\n        return;\n      }\n\n      for (i = 1; i < tag.data.length; i++) {\n        if (tag.data[i] === 0) {\n          // parse the description and URL fields\n          tag.description = parseUtf8(tag.data, 1, i);\n          tag.url = parseUtf8(tag.data, i + 1, tag.data.length);\n          break;\n        }\n      }\n    },\n    PRIV: function(tag) {\n      var i;\n\n      for (i = 0; i < tag.data.length; i++) {\n        if (tag.data[i] === 0) {\n          // parse the description and URL fields\n          tag.owner = parseIso88591(tag.data, 0, i);\n          break;\n        }\n      }\n      tag.privateData = tag.data.subarray(i + 1);\n      tag.data = tag.privateData;\n    }\n  },\n  MetadataStream;\n\nMetadataStream = function(options) {\n  var\n    settings = {\n      debug: !!(options && options.debug),\n\n      // the bytes of the program-level descriptor field in MP2T\n      // see ISO/IEC 13818-1:2013 (E), section 2.6 \"Program and\n      // program element descriptors\"\n      descriptor: options && options.descriptor\n    },\n    // the total size in bytes of the ID3 tag being parsed\n    tagSize = 0,\n    // tag data that is not complete enough to be parsed\n    buffer = [],\n    // the total number of bytes currently in the buffer\n    bufferSize = 0,\n    i;\n\n  MetadataStream.prototype.init.call(this);\n\n  // calculate the text track in-band metadata track dispatch type\n  // https://html.spec.whatwg.org/multipage/embedded-content.html#steps-to-expose-a-media-resource-specific-text-track\n  this.dispatchType = StreamTypes.METADATA_STREAM_TYPE.toString(16);\n  if (settings.descriptor) {\n    for (i = 0; i < settings.descriptor.length; i++) {\n      this.dispatchType += ('00' + settings.descriptor[i].toString(16)).slice(-2);\n    }\n  }\n\n  this.push = function(chunk) {\n    var tag, frameStart, frameSize, frame, i, frameHeader;\n    if (chunk.type !== 'timed-metadata') {\n      return;\n    }\n\n    // if data_alignment_indicator is set in the PES header,\n    // we must have the start of a new ID3 tag. Assume anything\n    // remaining in the buffer was malformed and throw it out\n    if (chunk.dataAlignmentIndicator) {\n      bufferSize = 0;\n      buffer.length = 0;\n    }\n\n    // ignore events that don't look like ID3 data\n    if (buffer.length === 0 &&\n        (chunk.data.length < 10 ||\n          chunk.data[0] !== 'I'.charCodeAt(0) ||\n          chunk.data[1] !== 'D'.charCodeAt(0) ||\n          chunk.data[2] !== '3'.charCodeAt(0))) {\n      if (settings.debug) {\n        // eslint-disable-next-line no-console\n        console.log('Skipping unrecognized metadata packet');\n      }\n      return;\n    }\n\n    // add this chunk to the data we've collected so far\n\n    buffer.push(chunk);\n    bufferSize += chunk.data.byteLength;\n\n    // grab the size of the entire frame from the ID3 header\n    if (buffer.length === 1) {\n      // the frame size is transmitted as a 28-bit integer in the\n      // last four bytes of the ID3 header.\n      // The most significant bit of each byte is dropped and the\n      // results concatenated to recover the actual value.\n      tagSize = parseSyncSafeInteger(chunk.data.subarray(6, 10));\n\n      // ID3 reports the tag size excluding the header but it's more\n      // convenient for our comparisons to include it\n      tagSize += 10;\n    }\n\n    // if the entire frame has not arrived, wait for more data\n    if (bufferSize < tagSize) {\n      return;\n    }\n\n    // collect the entire frame so it can be parsed\n    tag = {\n      data: new Uint8Array(tagSize),\n      frames: [],\n      pts: buffer[0].pts,\n      dts: buffer[0].dts\n    };\n    for (i = 0; i < tagSize;) {\n      tag.data.set(buffer[0].data.subarray(0, tagSize - i), i);\n      i += buffer[0].data.byteLength;\n      bufferSize -= buffer[0].data.byteLength;\n      buffer.shift();\n    }\n\n    // find the start of the first frame and the end of the tag\n    frameStart = 10;\n    if (tag.data[5] & 0x40) {\n      // advance the frame start past the extended header\n      frameStart += 4; // header size field\n      frameStart += parseSyncSafeInteger(tag.data.subarray(10, 14));\n\n      // clip any padding off the end\n      tagSize -= parseSyncSafeInteger(tag.data.subarray(16, 20));\n    }\n\n    // parse one or more ID3 frames\n    // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n    do {\n      // determine the number of bytes in this frame\n      frameSize = parseSyncSafeInteger(tag.data.subarray(frameStart + 4, frameStart + 8));\n      if (frameSize < 1) {\n         // eslint-disable-next-line no-console\n        return console.log('Malformed ID3 frame encountered. Skipping metadata parsing.');\n      }\n      frameHeader = String.fromCharCode(tag.data[frameStart],\n                                        tag.data[frameStart + 1],\n                                        tag.data[frameStart + 2],\n                                        tag.data[frameStart + 3]);\n\n\n      frame = {\n        id: frameHeader,\n        data: tag.data.subarray(frameStart + 10, frameStart + frameSize + 10)\n      };\n      frame.key = frame.id;\n      if (tagParsers[frame.id]) {\n        tagParsers[frame.id](frame);\n\n        // handle the special PRIV frame used to indicate the start\n        // time for raw AAC data\n        if (frame.owner === 'com.apple.streaming.transportStreamTimestamp') {\n          var\n            d = frame.data,\n            size = ((d[3] & 0x01)  << 30) |\n                   (d[4]  << 22) |\n                   (d[5] << 14) |\n                   (d[6] << 6) |\n                   (d[7] >>> 2);\n\n          size *= 4;\n          size += d[7] & 0x03;\n          frame.timeStamp = size;\n          // in raw AAC, all subsequent data will be timestamped based\n          // on the value of this frame\n          // we couldn't have known the appropriate pts and dts before\n          // parsing this ID3 tag so set those values now\n          if (tag.pts === undefined && tag.dts === undefined) {\n            tag.pts = frame.timeStamp;\n            tag.dts = frame.timeStamp;\n          }\n          this.trigger('timestamp', frame);\n        }\n      }\n      tag.frames.push(frame);\n\n      frameStart += 10; // advance past the frame header\n      frameStart += frameSize; // advance past the frame body\n    } while (frameStart < tagSize);\n    this.trigger('data', tag);\n  };\n};\nMetadataStream.prototype = new Stream();\n\nmodule.exports = MetadataStream;\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar defaultOptions = {\n  errorInterval: 30,\n  getSource: function getSource(next) {\n    var tech = this.tech({ IWillNotUseThisInPlugins: true });\n    var sourceObj = tech.currentSource_;\n\n    return next(sourceObj);\n  }\n};\n\n/**\n * Main entry point for the plugin\n *\n * @param {Player} player a reference to a videojs Player instance\n * @param {Object} [options] an object with plugin options\n * @private\n */\nvar initPlugin = function initPlugin(player, options) {\n  var lastCalled = 0;\n  var seekTo = 0;\n  var localOptions = _videoJs2['default'].mergeOptions(defaultOptions, options);\n\n  player.ready(function () {\n    player.trigger({ type: 'usage', name: 'hls-error-reload-initialized' });\n  });\n\n  /**\n   * Player modifications to perform that must wait until `loadedmetadata`\n   * has been triggered\n   *\n   * @private\n   */\n  var loadedMetadataHandler = function loadedMetadataHandler() {\n    if (seekTo) {\n      player.currentTime(seekTo);\n    }\n  };\n\n  /**\n   * Set the source on the player element, play, and seek if necessary\n   *\n   * @param {Object} sourceObj An object specifying the source url and mime-type to play\n   * @private\n   */\n  var setSource = function setSource(sourceObj) {\n    if (sourceObj === null || sourceObj === undefined) {\n      return;\n    }\n    seekTo = player.duration() !== Infinity && player.currentTime() || 0;\n\n    player.one('loadedmetadata', loadedMetadataHandler);\n\n    player.src(sourceObj);\n    player.trigger({ type: 'usage', name: 'hls-error-reload' });\n    player.play();\n  };\n\n  /**\n   * Attempt to get a source from either the built-in getSource function\n   * or a custom function provided via the options\n   *\n   * @private\n   */\n  var errorHandler = function errorHandler() {\n    // Do not attempt to reload the source if a source-reload occurred before\n    // 'errorInterval' time has elapsed since the last source-reload\n    if (Date.now() - lastCalled < localOptions.errorInterval * 1000) {\n      player.trigger({ type: 'usage', name: 'hls-error-reload-canceled' });\n      return;\n    }\n\n    if (!localOptions.getSource || typeof localOptions.getSource !== 'function') {\n      _videoJs2['default'].log.error('ERROR: reloadSourceOnError - The option getSource must be a function!');\n      return;\n    }\n    lastCalled = Date.now();\n\n    return localOptions.getSource.call(player, setSource);\n  };\n\n  /**\n   * Unbind any event handlers that were bound by the plugin\n   *\n   * @private\n   */\n  var cleanupEvents = function cleanupEvents() {\n    player.off('loadedmetadata', loadedMetadataHandler);\n    player.off('error', errorHandler);\n    player.off('dispose', cleanupEvents);\n  };\n\n  /**\n   * Cleanup before re-initializing the plugin\n   *\n   * @param {Object} [newOptions] an object with plugin options\n   * @private\n   */\n  var reinitPlugin = function reinitPlugin(newOptions) {\n    cleanupEvents();\n    initPlugin(player, newOptions);\n  };\n\n  player.on('error', errorHandler);\n  player.on('dispose', cleanupEvents);\n\n  // Overwrite the plugin function so that we can correctly cleanup before\n  // initializing the plugin\n  player.reloadSourceOnError = reinitPlugin;\n};\n\n/**\n * Reload the source when an error is detected as long as there\n * wasn't an error previously within the last 30 seconds\n *\n * @param {Object} [options] an object with plugin options\n */\nvar reloadSourceOnError = function reloadSourceOnError(options) {\n  initPlugin(this, options);\n};\n\nexports['default'] = reloadSourceOnError;\nmodule.exports = exports['default'];","/**\n * @file transmuxer-worker.js\n */\n\n/**\n * videojs-contrib-media-sources\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * Handles communication between the browser-world and the mux.js\n * transmuxer running inside of a WebWorker by exposing a simple\n * message-based interface to a Transmuxer object.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _muxJsLibMp4 = require('mux.js/lib/mp4');\n\nvar _muxJsLibMp42 = _interopRequireDefault(_muxJsLibMp4);\n\n/**\n * Re-emits transmuxer events by converting them into messages to the\n * world outside the worker.\n *\n * @param {Object} transmuxer the transmuxer to wire events on\n * @private\n */\nvar wireTransmuxerEvents = function wireTransmuxerEvents(transmuxer) {\n  transmuxer.on('data', function (segment) {\n    // transfer ownership of the underlying ArrayBuffer\n    // instead of doing a copy to save memory\n    // ArrayBuffers are transferable but generic TypedArrays are not\n    // @link https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers#Passing_data_by_transferring_ownership_(transferable_objects)\n    var initArray = segment.initSegment;\n\n    segment.initSegment = {\n      data: initArray.buffer,\n      byteOffset: initArray.byteOffset,\n      byteLength: initArray.byteLength\n    };\n\n    var typedArray = segment.data;\n\n    segment.data = typedArray.buffer;\n    _globalWindow2['default'].postMessage({\n      action: 'data',\n      segment: segment,\n      byteOffset: typedArray.byteOffset,\n      byteLength: typedArray.byteLength\n    }, [segment.data]);\n  });\n\n  if (transmuxer.captionStream) {\n    transmuxer.captionStream.on('data', function (caption) {\n      _globalWindow2['default'].postMessage({\n        action: 'caption',\n        data: caption\n      });\n    });\n  }\n\n  transmuxer.on('done', function (data) {\n    _globalWindow2['default'].postMessage({ action: 'done' });\n  });\n\n  transmuxer.on('gopInfo', function (gopInfo) {\n    _globalWindow2['default'].postMessage({\n      action: 'gopInfo',\n      gopInfo: gopInfo\n    });\n  });\n};\n\n/**\n * All incoming messages route through this hash. If no function exists\n * to handle an incoming message, then we ignore the message.\n *\n * @class MessageHandlers\n * @param {Object} options the options to initialize with\n */\n\nvar MessageHandlers = (function () {\n  function MessageHandlers(options) {\n    _classCallCheck(this, MessageHandlers);\n\n    this.options = options || {};\n    this.init();\n  }\n\n  /**\n   * Our web wroker interface so that things can talk to mux.js\n   * that will be running in a web worker. the scope is passed to this by\n   * webworkify.\n   *\n   * @param {Object} self the scope for the web worker\n   */\n\n  /**\n   * initialize our web worker and wire all the events.\n   */\n\n  _createClass(MessageHandlers, [{\n    key: 'init',\n    value: function init() {\n      if (this.transmuxer) {\n        this.transmuxer.dispose();\n      }\n      this.transmuxer = new _muxJsLibMp42['default'].Transmuxer(this.options);\n      wireTransmuxerEvents(this.transmuxer);\n    }\n\n    /**\n     * Adds data (a ts segment) to the start of the transmuxer pipeline for\n     * processing.\n     *\n     * @param {ArrayBuffer} data data to push into the muxer\n     */\n  }, {\n    key: 'push',\n    value: function push(data) {\n      // Cast array buffer to correct type for transmuxer\n      var segment = new Uint8Array(data.data, data.byteOffset, data.byteLength);\n\n      this.transmuxer.push(segment);\n    }\n\n    /**\n     * Recreate the transmuxer so that the next segment added via `push`\n     * start with a fresh transmuxer.\n     */\n  }, {\n    key: 'reset',\n    value: function reset() {\n      this.init();\n    }\n\n    /**\n     * Set the value that will be used as the `baseMediaDecodeTime` time for the\n     * next segment pushed in. Subsequent segments will have their `baseMediaDecodeTime`\n     * set relative to the first based on the PTS values.\n     *\n     * @param {Object} data used to set the timestamp offset in the muxer\n     */\n  }, {\n    key: 'setTimestampOffset',\n    value: function setTimestampOffset(data) {\n      var timestampOffset = data.timestampOffset || 0;\n\n      this.transmuxer.setBaseMediaDecodeTime(Math.round(timestampOffset * 90000));\n    }\n  }, {\n    key: 'setAudioAppendStart',\n    value: function setAudioAppendStart(data) {\n      this.transmuxer.setAudioAppendStart(Math.ceil(data.appendStart * 90000));\n    }\n\n    /**\n     * Forces the pipeline to finish processing the last segment and emit it's\n     * results.\n     *\n     * @param {Object} data event data, not really used\n     */\n  }, {\n    key: 'flush',\n    value: function flush(data) {\n      this.transmuxer.flush();\n    }\n  }, {\n    key: 'resetCaptions',\n    value: function resetCaptions() {\n      this.transmuxer.resetCaptions();\n    }\n  }, {\n    key: 'alignGopsWith',\n    value: function alignGopsWith(data) {\n      this.transmuxer.alignGopsWith(data.gopsToAlignWith.slice());\n    }\n  }]);\n\n  return MessageHandlers;\n})();\n\nvar TransmuxerWorker = function TransmuxerWorker(self) {\n  self.onmessage = function (event) {\n    if (event.data.action === 'init' && event.data.options) {\n      this.messageHandlers = new MessageHandlers(event.data.options);\n      return;\n    }\n\n    if (!this.messageHandlers) {\n      this.messageHandlers = new MessageHandlers();\n    }\n\n    if (event.data && event.data.action && event.data.action !== 'init') {\n      if (this.messageHandlers[event.data.action]) {\n        this.messageHandlers[event.data.action](event.data);\n      }\n    }\n  };\n};\n\nexports['default'] = function (self) {\n  return new TransmuxerWorker(self);\n};\n\nmodule.exports = exports['default'];","/**\n * mux.js\n *\n * Copyright (c) 2016 Brightcove\n * All rights reserved.\n *\n * Accepts program elementary stream (PES) data events and corrects\n * decode and presentation time stamps to account for a rollover\n * of the 33 bit value.\n */\n\n'use strict';\n\nvar Stream = require('../utils/stream');\n\nvar MAX_TS = 8589934592;\n\nvar RO_THRESH = 4294967296;\n\nvar handleRollover = function(value, reference) {\n  var direction = 1;\n\n  if (value > reference) {\n    // If the current timestamp value is greater than our reference timestamp and we detect a\n    // timestamp rollover, this means the roll over is happening in the opposite direction.\n    // Example scenario: Enter a long stream/video just after a rollover occurred. The reference\n    // point will be set to a small number, e.g. 1. The user then seeks backwards over the\n    // rollover point. In loading this segment, the timestamp values will be very large,\n    // e.g. 2^33 - 1. Since this comes before the data we loaded previously, we want to adjust\n    // the time stamp to be `value - 2^33`.\n    direction = -1;\n  }\n\n  // Note: A seek forwards or back that is greater than the RO_THRESH (2^32, ~13 hours) will\n  // cause an incorrect adjustment.\n  while (Math.abs(reference - value) > RO_THRESH) {\n    value += (direction * MAX_TS);\n  }\n\n  return value;\n};\n\nvar TimestampRolloverStream = function(type) {\n  var lastDTS, referenceDTS;\n\n  TimestampRolloverStream.prototype.init.call(this);\n\n  this.type_ = type;\n\n  this.push = function(data) {\n    if (data.type !== this.type_) {\n      return;\n    }\n\n    if (referenceDTS === undefined) {\n      referenceDTS = data.dts;\n    }\n\n    data.dts = handleRollover(data.dts, referenceDTS);\n    data.pts = handleRollover(data.pts, referenceDTS);\n\n    lastDTS = data.dts;\n\n    this.trigger('data', data);\n  };\n\n  this.flush = function() {\n    referenceDTS = lastDTS;\n    this.trigger('done');\n  };\n\n  this.discontinuity = function() {\n    referenceDTS = void 0;\n    lastDTS = void 0;\n  };\n\n};\n\nTimestampRolloverStream.prototype = new Stream();\n\nmodule.exports = {\n  TimestampRolloverStream: TimestampRolloverStream,\n  handleRollover: handleRollover\n};\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _stream = require('./stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file m3u8/line-stream.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\nvar LineStream = function (_Stream) {\n  _inherits(LineStream, _Stream);\n\n  function LineStream() {\n    _classCallCheck(this, LineStream);\n\n    var _this = _possibleConstructorReturn(this, (LineStream.__proto__ || Object.getPrototypeOf(LineStream)).call(this));\n\n    _this.buffer = '';\n    return _this;\n  }\n\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {String} data the text to process\n   */\n\n\n  _createClass(LineStream, [{\n    key: 'push',\n    value: function push(data) {\n      var nextNewline = void 0;\n\n      this.buffer += data;\n      nextNewline = this.buffer.indexOf('\\n');\n\n      for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n        this.trigger('data', this.buffer.substring(0, nextNewline));\n        this.buffer = this.buffer.substring(nextNewline + 1);\n      }\n    }\n  }]);\n\n  return LineStream;\n}(_stream2['default']);\n\nexports['default'] = LineStream;","/**\n * mux.js\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * Utilities to detect basic properties and metadata about MP4s.\n */\n'use strict';\n\nvar findBox, parseType, timescale, startTime;\n\n// Find the data for a box specified by its path\nfindBox = function(data, path) {\n  var results = [],\n      i, size, type, end, subresults;\n\n  if (!path.length) {\n    // short-circuit the search for empty paths\n    return null;\n  }\n\n  for (i = 0; i < data.byteLength;) {\n    size  = data[i]     << 24;\n    size |= data[i + 1] << 16;\n    size |= data[i + 2] << 8;\n    size |= data[i + 3];\n\n    type = parseType(data.subarray(i + 4, i + 8));\n\n    end = size > 1 ? i + size : data.byteLength;\n\n    if (type === path[0]) {\n      if (path.length === 1) {\n        // this is the end of the path and we've found the box we were\n        // looking for\n        results.push(data.subarray(i + 8, end));\n      } else {\n        // recursively search for the next box along the path\n        subresults = findBox(data.subarray(i + 8, end), path.slice(1));\n        if (subresults.length) {\n          results = results.concat(subresults);\n        }\n      }\n    }\n    i = end;\n  }\n\n  // we've finished searching all of data\n  return results;\n};\n\n/**\n * Returns the string representation of an ASCII encoded four byte buffer.\n * @param buffer {Uint8Array} a four-byte buffer to translate\n * @return {string} the corresponding string\n */\nparseType = function(buffer) {\n  var result = '';\n  result += String.fromCharCode(buffer[0]);\n  result += String.fromCharCode(buffer[1]);\n  result += String.fromCharCode(buffer[2]);\n  result += String.fromCharCode(buffer[3]);\n  return result;\n};\n\n/**\n * Parses an MP4 initialization segment and extracts the timescale\n * values for any declared tracks. Timescale values indicate the\n * number of clock ticks per second to assume for time-based values\n * elsewhere in the MP4.\n *\n * To determine the start time of an MP4, you need two pieces of\n * information: the timescale unit and the earliest base media decode\n * time. Multiple timescales can be specified within an MP4 but the\n * base media decode time is always expressed in the timescale from\n * the media header box for the track:\n * ```\n * moov > trak > mdia > mdhd.timescale\n * ```\n * @param init {Uint8Array} the bytes of the init segment\n * @return {object} a hash of track ids to timescale values or null if\n * the init segment is malformed.\n */\ntimescale = function(init) {\n  var\n    result = {},\n    traks = findBox(init, ['moov', 'trak']);\n\n  // mdhd timescale\n  return traks.reduce(function(result, trak) {\n    var tkhd, version, index, id, mdhd;\n\n    tkhd = findBox(trak, ['tkhd'])[0];\n    if (!tkhd) {\n      return null;\n    }\n    version = tkhd[0];\n    index = version === 0 ? 12 : 20;\n    id = tkhd[index]     << 24 |\n         tkhd[index + 1] << 16 |\n         tkhd[index + 2] <<  8 |\n         tkhd[index + 3];\n\n    mdhd = findBox(trak, ['mdia', 'mdhd'])[0];\n    if (!mdhd) {\n      return null;\n    }\n    version = mdhd[0];\n    index = version === 0 ? 12 : 20;\n    result[id] = mdhd[index]     << 24 |\n                 mdhd[index + 1] << 16 |\n                 mdhd[index + 2] <<  8 |\n                 mdhd[index + 3];\n    return result;\n  }, result);\n};\n\n/**\n * Determine the base media decode start time, in seconds, for an MP4\n * fragment. If multiple fragments are specified, the earliest time is\n * returned.\n *\n * The base media decode time can be parsed from track fragment\n * metadata:\n * ```\n * moof > traf > tfdt.baseMediaDecodeTime\n * ```\n * It requires the timescale value from the mdhd to interpret.\n *\n * @param timescale {object} a hash of track ids to timescale values.\n * @return {number} the earliest base media decode start time for the\n * fragment, in seconds\n */\nstartTime = function(timescale, fragment) {\n  var trafs, baseTimes, result;\n\n  // we need info from two childrend of each track fragment box\n  trafs = findBox(fragment, ['moof', 'traf']);\n\n  // determine the start times for each track\n  baseTimes = [].concat.apply([], trafs.map(function(traf) {\n    return findBox(traf, ['tfhd']).map(function(tfhd) {\n      var id, scale, baseTime;\n\n      // get the track id from the tfhd\n      id = tfhd[4] << 24 |\n           tfhd[5] << 16 |\n           tfhd[6] << 8 |\n           tfhd[7];\n      // assume a 90kHz clock if no timescale was specified\n      scale = timescale[id] || 90e3;\n\n      // get the base media decode time from the tfdt\n      baseTime = findBox(traf, ['tfdt']).map(function(tfdt) {\n        var version, result;\n\n        version = tfdt[0];\n        result = tfdt[4] << 24 |\n                 tfdt[5] << 16 |\n                 tfdt[6] <<  8 |\n                 tfdt[7];\n        if (version ===  1) {\n          result *= Math.pow(2, 32);\n          result += tfdt[8]  << 24 |\n                    tfdt[9]  << 16 |\n                    tfdt[10] <<  8 |\n                    tfdt[11];\n        }\n        return result;\n      })[0];\n      baseTime = baseTime || Infinity;\n\n      // convert base time to seconds\n      return baseTime / scale;\n    });\n  }));\n\n  // return the minimum\n  result = Math.min.apply(null, baseTimes);\n  return isFinite(result) ? result : 0;\n};\n\nmodule.exports = {\n  parseType: parseType,\n  timescale: timescale,\n  startTime: startTime\n};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = {\n  GOAL_BUFFER_LENGTH: 30,\n  MAX_GOAL_BUFFER_LENGTH: 60,\n  GOAL_BUFFER_LENGTH_RATE: 1,\n  // A fudge factor to apply to advertised playlist bitrates to account for\n  // temporary flucations in client bandwidth\n  BANDWIDTH_VARIANCE: 1.2,\n  // How much of the buffer must be filled before we consider upswitching\n  BUFFER_LOW_WATER_LINE: 0,\n  MAX_BUFFER_LOW_WATER_LINE: 30,\n  BUFFER_LOW_WATER_LINE_RATE: 1\n};\nmodule.exports = exports[\"default\"];","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RUUxMkYzMjA4REExMUU5ODlBMERGODkzRDRENzY1MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RUUxMkYzMzA4REExMUU5ODlBMERGODkzRDRENzY1MCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRFRTEyRjMwMDhEQTExRTk4OUEwREY4OTNENEQ3NjUwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRFRTEyRjMxMDhEQTExRTk4OUEwREY4OTNENEQ3NjUwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+2im34gAABLdJREFUeNrsWFtMXEUY/udc9n5jWXYXtltQFgpKakqlTTU1GKMtCdHGCxofjNGH1qe+qE/GmGBq4iW2UROD0cQa4oMxqZeHapsqatRaiISAUMByKQsLu3uWwy7sntuu/5wYTC2t3GHjTjJnZs7c/m/m/7//P4fkcjnI58RAnqcCgAKA/zsAsh6LdA2NVuFSj+NqD2BzF+YSXDiLZQRzJ+YvMX9WHypPbisAvw5c2YELvMkwpMVlsxCnxQwWkxF4lgVKz7KqQiotQWJ+AeYzkohTTuD4txuqb1G2HMBPfUMP4ezT/iKno7zEDRwKfbOUykgwEolRIL9h87EDtZXjWwbg+57LT7Ms8+FtwVLGbbcuex69lZHpGEzGxTDu3Hjw9qrhTQdwvvuPJpZhvt4bKmfsZtOqNh2dicHodPxPrO67d3eNsBYA3EoGn+3q9ala9nRNwM9YUde1bBYUVVvRhgaOhaDHDWIqXRmdS7Xhq0c3DYCqaa94nQ5PsdOuC74gySveMC0rYEPwoTIvxJLzj5zt7G1FPejAro7De+uUDVOhM7/8fishZLChqoKleh9Pplavt4SAx26DsZk4RGZFSEsKZawo9ryK3e8279udXfcbQNV5xm2zsjazESIJkbbXZHzT2hwEkb28LjtkZBWmZ+dKwvHEKUlRG/GwnjhyYI+8qhv4tOMiOiLyFFbvpA6JOiMc9AOWR6sD/oodniK62bpweAmqIlUns5EHDQ9kPCrAQDgCkqy0Y3cv5nsw+zHHMV8iQD55+O76/iUBfPztjwYsXiMMOe6wWFhqpEiV+knPZzKwgA7prrpqEOfTuoNa13iGIeBzOsDvdsLAxBRcvjoNJgOvA0PGgyySBbUdtDkNqfg9nPJCy8EGeRFA21fnqRc6YzYZmgPeEtjpLQa/ywEWo0HfIInCT8QEMPAcTAnihsU1DosJQqVepNk4BIpd2DbrAmZQ+BkxiTYjQBRLPMBv8PWDTzbul3UbkCXpZaPR0Fzq8cCeyp1gNhhQ0FldcLqA02qG6oCPcjcanLxhAOjaHMNCbbAUptDOwrEEUnUOqDaU4u1Qlbs0OALhqHBI0dQTOOV58lb752UMw4wGAwG+8Y5amEtnoG9sUuf4a/mbw3CBWRV1rjSZeB4yinIdc9FDpDdzobsfovG4kgMS4mRZOmq12fmgzwNCagG6hsduyN+blW60V/eVq7o6VZb5ICokeDmTOcah+hy2Wu1QbLNAR3cfZLf5R35nfxLuq69D1lIBD/8QBVDDoaIPj4dBFEXIh9TVPwQ2tNOEIOyiABw8fpf1DAzi9ch5AWAglYSKMj8lHysnyZIQi8XciTWEBluRxnMaApDjeAPyxfHwZFO+fQtL6FwNRuMFqkJt6N2aVFXJG+GR9oHji6gKnaQAvkBvdU7TtPuldBq2+69GFj9dXW43KLL8zvutL/2shxItzx130jgORW9CQKCiE8lmNcgtK94mywrQyX8NIjcPv1mWA5PJBFabLYvtk/j2xY9eb9UWpx159hjWSTM+aCS6H2cFF9f95/F3lVyz+FL169pYJ0vVl+j79z74pPw+ge3vsPyg/dQbPYvDC3+nCwAKAAoAtjT9JcAAIz/vGFVuvJwAAAAASUVORK5CYII=\"","'use strict';\n\nvar Stream = require('../utils/stream.js');\n\n/**\n * The final stage of the transmuxer that emits the flv tags\n * for audio, video, and metadata. Also tranlates in time and\n * outputs caption data and id3 cues.\n */\nvar CoalesceStream = function(options) {\n  // Number of Tracks per output segment\n  // If greater than 1, we combine multiple\n  // tracks into a single segment\n  this.numberOfTracks = 0;\n  this.metadataStream = options.metadataStream;\n\n  this.videoTags = [];\n  this.audioTags = [];\n  this.videoTrack = null;\n  this.audioTrack = null;\n  this.pendingCaptions = [];\n  this.pendingMetadata = [];\n  this.pendingTracks = 0;\n  this.processedTracks = 0;\n\n  CoalesceStream.prototype.init.call(this);\n\n  // Take output from multiple\n  this.push = function(output) {\n    // buffer incoming captions until the associated video segment\n    // finishes\n    if (output.text) {\n      return this.pendingCaptions.push(output);\n    }\n    // buffer incoming id3 tags until the final flush\n    if (output.frames) {\n      return this.pendingMetadata.push(output);\n    }\n\n    if (output.track.type === 'video') {\n      this.videoTrack = output.track;\n      this.videoTags = output.tags;\n      this.pendingTracks++;\n    }\n    if (output.track.type === 'audio') {\n      this.audioTrack = output.track;\n      this.audioTags = output.tags;\n      this.pendingTracks++;\n    }\n  };\n};\n\nCoalesceStream.prototype = new Stream();\nCoalesceStream.prototype.flush = function(flushSource) {\n  var\n    id3,\n    caption,\n    i,\n    timelineStartPts,\n    event = {\n      tags: {},\n      captions: [],\n      captionStreams: {},\n      metadata: []\n    };\n\n  if (this.pendingTracks < this.numberOfTracks) {\n    if (flushSource !== 'VideoSegmentStream' &&\n        flushSource !== 'AudioSegmentStream') {\n      // Return because we haven't received a flush from a data-generating\n      // portion of the segment (meaning that we have only recieved meta-data\n      // or captions.)\n      return;\n    } else if (this.pendingTracks === 0) {\n      // In the case where we receive a flush without any data having been\n      // received we consider it an emitted track for the purposes of coalescing\n      // `done` events.\n      // We do this for the case where there is an audio and video track in the\n      // segment but no audio data. (seen in several playlists with alternate\n      // audio tracks and no audio present in the main TS segments.)\n      this.processedTracks++;\n\n      if (this.processedTracks < this.numberOfTracks) {\n        return;\n      }\n    }\n  }\n\n  this.processedTracks += this.pendingTracks;\n  this.pendingTracks = 0;\n\n  if (this.processedTracks < this.numberOfTracks) {\n    return;\n  }\n\n  if (this.videoTrack) {\n    timelineStartPts = this.videoTrack.timelineStartInfo.pts;\n  } else if (this.audioTrack) {\n    timelineStartPts = this.audioTrack.timelineStartInfo.pts;\n  }\n\n  event.tags.videoTags = this.videoTags;\n  event.tags.audioTags = this.audioTags;\n\n  // Translate caption PTS times into second offsets into the\n  // video timeline for the segment, and add track info\n  for (i = 0; i < this.pendingCaptions.length; i++) {\n    caption = this.pendingCaptions[i];\n    caption.startTime = caption.startPts - timelineStartPts;\n    caption.startTime /= 90e3;\n    caption.endTime = caption.endPts - timelineStartPts;\n    caption.endTime /= 90e3;\n    event.captionStreams[caption.stream] = true;\n    event.captions.push(caption);\n  }\n\n  // Translate ID3 frame PTS times into second offsets into the\n  // video timeline for the segment\n  for (i = 0; i < this.pendingMetadata.length; i++) {\n    id3 = this.pendingMetadata[i];\n    id3.cueTime = id3.pts - timelineStartPts;\n    id3.cueTime /= 90e3;\n    event.metadata.push(id3);\n  }\n  // We add this to every single emitted segment even though we only need\n  // it for the first\n  event.metadata.dispatchType = this.metadataStream.dispatchType;\n\n  // Reset stream state\n  this.videoTrack = null;\n  this.audioTrack = null;\n  this.videoTags = [];\n  this.audioTags = [];\n  this.pendingCaptions.length = 0;\n  this.pendingMetadata.length = 0;\n  this.pendingTracks = 0;\n  this.processedTracks = 0;\n\n  // Emit the final segment\n  this.trigger('data', event);\n\n  this.trigger('done');\n};\n\nmodule.exports = CoalesceStream;\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RUUxMkYzMjA4REExMUU5ODlBMERGODkzRDRENzY1MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RUUxMkYzMzA4REExMUU5ODlBMERGODkzRDRENzY1MCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRFRTEyRjMwMDhEQTExRTk4OUEwREY4OTNENEQ3NjUwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRFRTEyRjMxMDhEQTExRTk4OUEwREY4OTNENEQ3NjUwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+2im34gAABLdJREFUeNrsWFtMXEUY/udc9n5jWXYXtltQFgpKakqlTTU1GKMtCdHGCxofjNGH1qe+qE/GmGBq4iW2UROD0cQa4oMxqZeHapsqatRaiISAUMByKQsLu3uWwy7sntuu/5wYTC2t3GHjTjJnZs7c/m/m/7//P4fkcjnI58RAnqcCgAKA/zsAsh6LdA2NVuFSj+NqD2BzF+YSXDiLZQRzJ+YvMX9WHypPbisAvw5c2YELvMkwpMVlsxCnxQwWkxF4lgVKz7KqQiotQWJ+AeYzkohTTuD4txuqb1G2HMBPfUMP4ezT/iKno7zEDRwKfbOUykgwEolRIL9h87EDtZXjWwbg+57LT7Ms8+FtwVLGbbcuex69lZHpGEzGxTDu3Hjw9qrhTQdwvvuPJpZhvt4bKmfsZtOqNh2dicHodPxPrO67d3eNsBYA3EoGn+3q9ala9nRNwM9YUde1bBYUVVvRhgaOhaDHDWIqXRmdS7Xhq0c3DYCqaa94nQ5PsdOuC74gySveMC0rYEPwoTIvxJLzj5zt7G1FPejAro7De+uUDVOhM7/8fishZLChqoKleh9Pplavt4SAx26DsZk4RGZFSEsKZawo9ryK3e8279udXfcbQNV5xm2zsjazESIJkbbXZHzT2hwEkb28LjtkZBWmZ+dKwvHEKUlRG/GwnjhyYI+8qhv4tOMiOiLyFFbvpA6JOiMc9AOWR6sD/oodniK62bpweAmqIlUns5EHDQ9kPCrAQDgCkqy0Y3cv5nsw+zHHMV8iQD55+O76/iUBfPztjwYsXiMMOe6wWFhqpEiV+knPZzKwgA7prrpqEOfTuoNa13iGIeBzOsDvdsLAxBRcvjoNJgOvA0PGgyySBbUdtDkNqfg9nPJCy8EGeRFA21fnqRc6YzYZmgPeEtjpLQa/ywEWo0HfIInCT8QEMPAcTAnihsU1DosJQqVepNk4BIpd2DbrAmZQ+BkxiTYjQBRLPMBv8PWDTzbul3UbkCXpZaPR0Fzq8cCeyp1gNhhQ0FldcLqA02qG6oCPcjcanLxhAOjaHMNCbbAUptDOwrEEUnUOqDaU4u1Qlbs0OALhqHBI0dQTOOV58lb752UMw4wGAwG+8Y5amEtnoG9sUuf4a/mbw3CBWRV1rjSZeB4yinIdc9FDpDdzobsfovG4kgMS4mRZOmq12fmgzwNCagG6hsduyN+blW60V/eVq7o6VZb5ICokeDmTOcah+hy2Wu1QbLNAR3cfZLf5R35nfxLuq69D1lIBD/8QBVDDoaIPj4dBFEXIh9TVPwQ2tNOEIOyiABw8fpf1DAzi9ch5AWAglYSKMj8lHysnyZIQi8XciTWEBluRxnMaApDjeAPyxfHwZFO+fQtL6FwNRuMFqkJt6N2aVFXJG+GR9oHji6gKnaQAvkBvdU7TtPuldBq2+69GFj9dXW43KLL8zvutL/2shxItzx130jgORW9CQKCiE8lmNcgtK94mywrQyX8NIjcPv1mWA5PJBFabLYvtk/j2xY9eb9UWpx159hjWSTM+aCS6H2cFF9f95/F3lVyz+FL169pYJ0vVl+j79z74pPw+ge3vsPyg/dQbPYvDC3+nCwAKAAoAtjT9JcAAIz/vGFVuvJwAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0M0YxQTc4MjA4REExMUU5QjkxRTg0OERDQTdDQjlBMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0M0YxQTc4MzA4REExMUU5QjkxRTg0OERDQTdDQjlBMiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzRjFBNzgwMDhEQTExRTlCOTFFODQ4RENBN0NCOUEyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzRjFBNzgxMDhEQTExRTlCOTFFODQ4RENBN0NCOUEyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+20u8qgAACjhJREFUeNrMmQl0FdUZ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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RjZFQTIyMjA4REExMUU5ODkxREExREZGM0Y1QkI2QyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RjZFQTIyMzA4REExMUU5ODkxREExREZGM0Y1QkI2QyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRGNkVBMjIwMDhEQTExRTk4OTFEQTFERkYzRjVCQjZDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRGNkVBMjIxMDhEQTExRTk4OTFEQTFERkYzRjVCQjZDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iZpSMQAACGNJREFUeNrsWQtsHNUV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\"","/**\n * @file create-text-tracks-if-necessary.js\n */\n\n/**\n * Create text tracks on video.js if they exist on a segment.\n *\n * @param {Object} sourceBuffer the VSB or FSB\n * @param {Object} mediaSource the HTML or Flash media source\n * @param {Object} segment the segment that may contain the text track\n * @private\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar createTextTracksIfNecessary = function createTextTracksIfNecessary(sourceBuffer, mediaSource, segment) {\n  var player = mediaSource.player_;\n\n  // create an in-band caption track if one is present in the segment\n  if (segment.captions && segment.captions.length) {\n    if (!sourceBuffer.inbandTextTracks_) {\n      sourceBuffer.inbandTextTracks_ = {};\n    }\n\n    for (var trackId in segment.captionStreams) {\n      if (!sourceBuffer.inbandTextTracks_[trackId]) {\n        player.tech_.trigger({ type: 'usage', name: 'hls-608' });\n        var track = player.textTracks().getTrackById(trackId);\n\n        if (track) {\n          // Resuse an existing track with a CC# id because this was\n          // very likely created by videojs-contrib-hls from information\n          // in the m3u8 for us to use\n          sourceBuffer.inbandTextTracks_[trackId] = track;\n        } else {\n          // Otherwise, create a track with the default `CC#` label and\n          // without a language\n          sourceBuffer.inbandTextTracks_[trackId] = player.addRemoteTextTrack({\n            kind: 'captions',\n            id: trackId,\n            label: trackId\n          }, false).track;\n        }\n      }\n    }\n  }\n\n  if (segment.metadata && segment.metadata.length && !sourceBuffer.metadataTrack_) {\n    sourceBuffer.metadataTrack_ = player.addRemoteTextTrack({\n      kind: 'metadata',\n      label: 'Timed Metadata'\n    }, false).track;\n    sourceBuffer.metadataTrack_.inBandMetadataTrackDispatchType = segment.metadata.dispatchType;\n  }\n};\n\nexports['default'] = createTextTracksIfNecessary;\nmodule.exports = exports['default'];","'use strict';\n\nvar Stream = require('../utils/stream.js');\nvar ExpGolomb = require('../utils/exp-golomb.js');\n\nvar H264Stream, NalByteStream;\nvar PROFILES_WITH_OPTIONAL_SPS_DATA;\n\n/**\n * Accepts a NAL unit byte stream and unpacks the embedded NAL units.\n */\nNalByteStream = function() {\n  var\n    syncPoint = 0,\n    i,\n    buffer;\n  NalByteStream.prototype.init.call(this);\n\n  this.push = function(data) {\n    var swapBuffer;\n\n    if (!buffer) {\n      buffer = data.data;\n    } else {\n      swapBuffer = new Uint8Array(buffer.byteLength + data.data.byteLength);\n      swapBuffer.set(buffer);\n      swapBuffer.set(data.data, buffer.byteLength);\n      buffer = swapBuffer;\n    }\n\n    // Rec. ITU-T H.264, Annex B\n    // scan for NAL unit boundaries\n\n    // a match looks like this:\n    // 0 0 1 .. NAL .. 0 0 1\n    // ^ sync point        ^ i\n    // or this:\n    // 0 0 1 .. NAL .. 0 0 0\n    // ^ sync point        ^ i\n\n    // advance the sync point to a NAL start, if necessary\n    for (; syncPoint < buffer.byteLength - 3; syncPoint++) {\n      if (buffer[syncPoint + 2] === 1) {\n        // the sync point is properly aligned\n        i = syncPoint + 5;\n        break;\n      }\n    }\n\n    while (i < buffer.byteLength) {\n      // look at the current byte to determine if we've hit the end of\n      // a NAL unit boundary\n      switch (buffer[i]) {\n      case 0:\n        // skip past non-sync sequences\n        if (buffer[i - 1] !== 0) {\n          i += 2;\n          break;\n        } else if (buffer[i - 2] !== 0) {\n          i++;\n          break;\n        }\n\n        // deliver the NAL unit if it isn't empty\n        if (syncPoint + 3 !== i - 2) {\n          this.trigger('data', buffer.subarray(syncPoint + 3, i - 2));\n        }\n\n        // drop trailing zeroes\n        do {\n          i++;\n        } while (buffer[i] !== 1 && i < buffer.length);\n        syncPoint = i - 2;\n        i += 3;\n        break;\n      case 1:\n        // skip past non-sync sequences\n        if (buffer[i - 1] !== 0 ||\n            buffer[i - 2] !== 0) {\n          i += 3;\n          break;\n        }\n\n        // deliver the NAL unit\n        this.trigger('data', buffer.subarray(syncPoint + 3, i - 2));\n        syncPoint = i - 2;\n        i += 3;\n        break;\n      default:\n        // the current byte isn't a one or zero, so it cannot be part\n        // of a sync sequence\n        i += 3;\n        break;\n      }\n    }\n    // filter out the NAL units that were delivered\n    buffer = buffer.subarray(syncPoint);\n    i -= syncPoint;\n    syncPoint = 0;\n  };\n\n  this.flush = function() {\n    // deliver the last buffered NAL unit\n    if (buffer && buffer.byteLength > 3) {\n      this.trigger('data', buffer.subarray(syncPoint + 3));\n    }\n    // reset the stream state\n    buffer = null;\n    syncPoint = 0;\n    this.trigger('done');\n  };\n};\nNalByteStream.prototype = new Stream();\n\n// values of profile_idc that indicate additional fields are included in the SPS\n// see Recommendation ITU-T H.264 (4/2013),\n// 7.3.2.1.1 Sequence parameter set data syntax\nPROFILES_WITH_OPTIONAL_SPS_DATA = {\n  100: true,\n  110: true,\n  122: true,\n  244: true,\n  44: true,\n  83: true,\n  86: true,\n  118: true,\n  128: true,\n  138: true,\n  139: true,\n  134: true\n};\n\n/**\n * Accepts input from a ElementaryStream and produces H.264 NAL unit data\n * events.\n */\nH264Stream = function() {\n  var\n    nalByteStream = new NalByteStream(),\n    self,\n    trackId,\n    currentPts,\n    currentDts,\n\n    discardEmulationPreventionBytes,\n    readSequenceParameterSet,\n    skipScalingList;\n\n  H264Stream.prototype.init.call(this);\n  self = this;\n\n  this.push = function(packet) {\n    if (packet.type !== 'video') {\n      return;\n    }\n    trackId = packet.trackId;\n    currentPts = packet.pts;\n    currentDts = packet.dts;\n\n    nalByteStream.push(packet);\n  };\n\n  nalByteStream.on('data', function(data) {\n    var\n      event = {\n        trackId: trackId,\n        pts: currentPts,\n        dts: currentDts,\n        data: data\n      };\n\n    switch (data[0] & 0x1f) {\n    case 0x05:\n      event.nalUnitType = 'slice_layer_without_partitioning_rbsp_idr';\n      break;\n    case 0x06:\n      event.nalUnitType = 'sei_rbsp';\n      event.escapedRBSP = discardEmulationPreventionBytes(data.subarray(1));\n      break;\n    case 0x07:\n      event.nalUnitType = 'seq_parameter_set_rbsp';\n      event.escapedRBSP = discardEmulationPreventionBytes(data.subarray(1));\n      event.config = readSequenceParameterSet(event.escapedRBSP);\n      break;\n    case 0x08:\n      event.nalUnitType = 'pic_parameter_set_rbsp';\n      break;\n    case 0x09:\n      event.nalUnitType = 'access_unit_delimiter_rbsp';\n      break;\n\n    default:\n      break;\n    }\n    self.trigger('data', event);\n  });\n  nalByteStream.on('done', function() {\n    self.trigger('done');\n  });\n\n  this.flush = function() {\n    nalByteStream.flush();\n  };\n\n  /**\n   * Advance the ExpGolomb decoder past a scaling list. The scaling\n   * list is optionally transmitted as part of a sequence parameter\n   * set and is not relevant to transmuxing.\n   * @param count {number} the number of entries in this scaling list\n   * @param expGolombDecoder {object} an ExpGolomb pointed to the\n   * start of a scaling list\n   * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1\n   */\n  skipScalingList = function(count, expGolombDecoder) {\n    var\n      lastScale = 8,\n      nextScale = 8,\n      j,\n      deltaScale;\n\n    for (j = 0; j < count; j++) {\n      if (nextScale !== 0) {\n        deltaScale = expGolombDecoder.readExpGolomb();\n        nextScale = (lastScale + deltaScale + 256) % 256;\n      }\n\n      lastScale = (nextScale === 0) ? lastScale : nextScale;\n    }\n  };\n\n  /**\n   * Expunge any \"Emulation Prevention\" bytes from a \"Raw Byte\n   * Sequence Payload\"\n   * @param data {Uint8Array} the bytes of a RBSP from a NAL\n   * unit\n   * @return {Uint8Array} the RBSP without any Emulation\n   * Prevention Bytes\n   */\n  discardEmulationPreventionBytes = function(data) {\n    var\n      length = data.byteLength,\n      emulationPreventionBytesPositions = [],\n      i = 1,\n      newLength, newData;\n\n    // Find all `Emulation Prevention Bytes`\n    while (i < length - 2) {\n      if (data[i] === 0 && data[i + 1] === 0 && data[i + 2] === 0x03) {\n        emulationPreventionBytesPositions.push(i + 2);\n        i += 2;\n      } else {\n        i++;\n      }\n    }\n\n    // If no Emulation Prevention Bytes were found just return the original\n    // array\n    if (emulationPreventionBytesPositions.length === 0) {\n      return data;\n    }\n\n    // Create a new array to hold the NAL unit data\n    newLength = length - emulationPreventionBytesPositions.length;\n    newData = new Uint8Array(newLength);\n    var sourceIndex = 0;\n\n    for (i = 0; i < newLength; sourceIndex++, i++) {\n      if (sourceIndex === emulationPreventionBytesPositions[0]) {\n        // Skip this byte\n        sourceIndex++;\n        // Remove this position index\n        emulationPreventionBytesPositions.shift();\n      }\n      newData[i] = data[sourceIndex];\n    }\n\n    return newData;\n  };\n\n  /**\n   * Read a sequence parameter set and return some interesting video\n   * properties. A sequence parameter set is the H264 metadata that\n   * describes the properties of upcoming video frames.\n   * @param data {Uint8Array} the bytes of a sequence parameter set\n   * @return {object} an object with configuration parsed from the\n   * sequence parameter set, including the dimensions of the\n   * associated video frames.\n   */\n  readSequenceParameterSet = function(data) {\n    var\n      frameCropLeftOffset = 0,\n      frameCropRightOffset = 0,\n      frameCropTopOffset = 0,\n      frameCropBottomOffset = 0,\n      sarScale = 1,\n      expGolombDecoder, profileIdc, levelIdc, profileCompatibility,\n      chromaFormatIdc, picOrderCntType,\n      numRefFramesInPicOrderCntCycle, picWidthInMbsMinus1,\n      picHeightInMapUnitsMinus1,\n      frameMbsOnlyFlag,\n      scalingListCount,\n      sarRatio,\n      aspectRatioIdc,\n      i;\n\n    expGolombDecoder = new ExpGolomb(data);\n    profileIdc = expGolombDecoder.readUnsignedByte(); // profile_idc\n    profileCompatibility = expGolombDecoder.readUnsignedByte(); // constraint_set[0-5]_flag\n    levelIdc = expGolombDecoder.readUnsignedByte(); // level_idc u(8)\n    expGolombDecoder.skipUnsignedExpGolomb(); // seq_parameter_set_id\n\n    // some profiles have more optional data we don't need\n    if (PROFILES_WITH_OPTIONAL_SPS_DATA[profileIdc]) {\n      chromaFormatIdc = expGolombDecoder.readUnsignedExpGolomb();\n      if (chromaFormatIdc === 3) {\n        expGolombDecoder.skipBits(1); // separate_colour_plane_flag\n      }\n      expGolombDecoder.skipUnsignedExpGolomb(); // bit_depth_luma_minus8\n      expGolombDecoder.skipUnsignedExpGolomb(); // bit_depth_chroma_minus8\n      expGolombDecoder.skipBits(1); // qpprime_y_zero_transform_bypass_flag\n      if (expGolombDecoder.readBoolean()) { // seq_scaling_matrix_present_flag\n        scalingListCount = (chromaFormatIdc !== 3) ? 8 : 12;\n        for (i = 0; i < scalingListCount; i++) {\n          if (expGolombDecoder.readBoolean()) { // seq_scaling_list_present_flag[ i ]\n            if (i < 6) {\n              skipScalingList(16, expGolombDecoder);\n            } else {\n              skipScalingList(64, expGolombDecoder);\n            }\n          }\n        }\n      }\n    }\n\n    expGolombDecoder.skipUnsignedExpGolomb(); // log2_max_frame_num_minus4\n    picOrderCntType = expGolombDecoder.readUnsignedExpGolomb();\n\n    if (picOrderCntType === 0) {\n      expGolombDecoder.readUnsignedExpGolomb(); // log2_max_pic_order_cnt_lsb_minus4\n    } else if (picOrderCntType === 1) {\n      expGolombDecoder.skipBits(1); // delta_pic_order_always_zero_flag\n      expGolombDecoder.skipExpGolomb(); // offset_for_non_ref_pic\n      expGolombDecoder.skipExpGolomb(); // offset_for_top_to_bottom_field\n      numRefFramesInPicOrderCntCycle = expGolombDecoder.readUnsignedExpGolomb();\n      for (i = 0; i < numRefFramesInPicOrderCntCycle; i++) {\n        expGolombDecoder.skipExpGolomb(); // offset_for_ref_frame[ i ]\n      }\n    }\n\n    expGolombDecoder.skipUnsignedExpGolomb(); // max_num_ref_frames\n    expGolombDecoder.skipBits(1); // gaps_in_frame_num_value_allowed_flag\n\n    picWidthInMbsMinus1 = expGolombDecoder.readUnsignedExpGolomb();\n    picHeightInMapUnitsMinus1 = expGolombDecoder.readUnsignedExpGolomb();\n\n    frameMbsOnlyFlag = expGolombDecoder.readBits(1);\n    if (frameMbsOnlyFlag === 0) {\n      expGolombDecoder.skipBits(1); // mb_adaptive_frame_field_flag\n    }\n\n    expGolombDecoder.skipBits(1); // direct_8x8_inference_flag\n    if (expGolombDecoder.readBoolean()) { // frame_cropping_flag\n      frameCropLeftOffset = expGolombDecoder.readUnsignedExpGolomb();\n      frameCropRightOffset = expGolombDecoder.readUnsignedExpGolomb();\n      frameCropTopOffset = expGolombDecoder.readUnsignedExpGolomb();\n      frameCropBottomOffset = expGolombDecoder.readUnsignedExpGolomb();\n    }\n    if (expGolombDecoder.readBoolean()) {\n      // vui_parameters_present_flag\n      if (expGolombDecoder.readBoolean()) {\n        // aspect_ratio_info_present_flag\n        aspectRatioIdc = expGolombDecoder.readUnsignedByte();\n        switch (aspectRatioIdc) {\n          case 1: sarRatio = [1, 1]; break;\n          case 2: sarRatio = [12, 11]; break;\n          case 3: sarRatio = [10, 11]; break;\n          case 4: sarRatio = [16, 11]; break;\n          case 5: sarRatio = [40, 33]; break;\n          case 6: sarRatio = [24, 11]; break;\n          case 7: sarRatio = [20, 11]; break;\n          case 8: sarRatio = [32, 11]; break;\n          case 9: sarRatio = [80, 33]; break;\n          case 10: sarRatio = [18, 11]; break;\n          case 11: sarRatio = [15, 11]; break;\n          case 12: sarRatio = [64, 33]; break;\n          case 13: sarRatio = [160, 99]; break;\n          case 14: sarRatio = [4, 3]; break;\n          case 15: sarRatio = [3, 2]; break;\n          case 16: sarRatio = [2, 1]; break;\n          case 255: {\n            sarRatio = [expGolombDecoder.readUnsignedByte() << 8 |\n                        expGolombDecoder.readUnsignedByte(),\n                        expGolombDecoder.readUnsignedByte() << 8 |\n                        expGolombDecoder.readUnsignedByte() ];\n            break;\n          }\n        }\n        if (sarRatio) {\n          sarScale = sarRatio[0] / sarRatio[1];\n        }\n      }\n    }\n    return {\n      profileIdc: profileIdc,\n      levelIdc: levelIdc,\n      profileCompatibility: profileCompatibility,\n      width: Math.ceil((((picWidthInMbsMinus1 + 1) * 16) - frameCropLeftOffset * 2 - frameCropRightOffset * 2) * sarScale),\n      height: ((2 - frameMbsOnlyFlag) * (picHeightInMapUnitsMinus1 + 1) * 16) - (frameCropTopOffset * 2) - (frameCropBottomOffset * 2)\n    };\n  };\n\n};\nH264Stream.prototype = new Stream();\n\nmodule.exports = {\n  H264Stream: H264Stream,\n  NalByteStream: NalByteStream\n};\n","/**\n * ranges\n *\n * Utilities for working with TimeRanges.\n *\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\n// Fudge factor to account for TimeRanges rounding\nvar TIME_FUDGE_FACTOR = 1 / 30;\n// Comparisons between time values such as current time and the end of the buffered range\n// can be misleading because of precision differences or when the current media has poorly\n// aligned audio and video, which can cause values to be slightly off from what you would\n// expect. This value is what we consider to be safe to use in such comparisons to account\n// for these scenarios.\nvar SAFE_TIME_DELTA = TIME_FUDGE_FACTOR * 3;\n\n/**\n * Clamps a value to within a range\n * @param {Number} num - the value to clamp\n * @param {Number} start - the start of the range to clamp within, inclusive\n * @param {Number} end - the end of the range to clamp within, inclusive\n * @return {Number}\n */\nvar clamp = function clamp(num, _ref) {\n  var _ref2 = _slicedToArray(_ref, 2);\n\n  var start = _ref2[0];\n  var end = _ref2[1];\n\n  return Math.min(Math.max(start, num), end);\n};\nvar filterRanges = function filterRanges(timeRanges, predicate) {\n  var results = [];\n  var i = undefined;\n\n  if (timeRanges && timeRanges.length) {\n    // Search for ranges that match the predicate\n    for (i = 0; i < timeRanges.length; i++) {\n      if (predicate(timeRanges.start(i), timeRanges.end(i))) {\n        results.push([timeRanges.start(i), timeRanges.end(i)]);\n      }\n    }\n  }\n\n  return _videoJs2['default'].createTimeRanges(results);\n};\n\n/**\n * Attempts to find the buffered TimeRange that contains the specified\n * time.\n * @param {TimeRanges} buffered - the TimeRanges object to query\n * @param {number} time  - the time to filter on.\n * @returns {TimeRanges} a new TimeRanges object\n */\nvar findRange = function findRange(buffered, time) {\n  return filterRanges(buffered, function (start, end) {\n    return start - TIME_FUDGE_FACTOR <= time && end + TIME_FUDGE_FACTOR >= time;\n  });\n};\n\n/**\n * Returns the TimeRanges that begin later than the specified time.\n * @param {TimeRanges} timeRanges - the TimeRanges object to query\n * @param {number} time - the time to filter on.\n * @returns {TimeRanges} a new TimeRanges object.\n */\nvar findNextRange = function findNextRange(timeRanges, time) {\n  return filterRanges(timeRanges, function (start) {\n    return start - TIME_FUDGE_FACTOR >= time;\n  });\n};\n\n/**\n * Returns gaps within a list of TimeRanges\n * @param {TimeRanges} buffered - the TimeRanges object\n * @return {TimeRanges} a TimeRanges object of gaps\n */\nvar findGaps = function findGaps(buffered) {\n  if (buffered.length < 2) {\n    return _videoJs2['default'].createTimeRanges();\n  }\n\n  var ranges = [];\n\n  for (var i = 1; i < buffered.length; i++) {\n    var start = buffered.end(i - 1);\n    var end = buffered.start(i);\n\n    ranges.push([start, end]);\n  }\n\n  return _videoJs2['default'].createTimeRanges(ranges);\n};\n\n/**\n * Search for a likely end time for the segment that was just appened\n * based on the state of the `buffered` property before and after the\n * append. If we fin only one such uncommon end-point return it.\n * @param {TimeRanges} original - the buffered time ranges before the update\n * @param {TimeRanges} update - the buffered time ranges after the update\n * @returns {Number|null} the end time added between `original` and `update`,\n * or null if one cannot be unambiguously determined.\n */\nvar findSoleUncommonTimeRangesEnd = function findSoleUncommonTimeRangesEnd(original, update) {\n  var i = undefined;\n  var start = undefined;\n  var end = undefined;\n  var result = [];\n  var edges = [];\n\n  // In order to qualify as a possible candidate, the end point must:\n  //  1) Not have already existed in the `original` ranges\n  //  2) Not result from the shrinking of a range that already existed\n  //     in the `original` ranges\n  //  3) Not be contained inside of a range that existed in `original`\n  var overlapsCurrentEnd = function overlapsCurrentEnd(span) {\n    return span[0] <= end && span[1] >= end;\n  };\n\n  if (original) {\n    // Save all the edges in the `original` TimeRanges object\n    for (i = 0; i < original.length; i++) {\n      start = original.start(i);\n      end = original.end(i);\n\n      edges.push([start, end]);\n    }\n  }\n\n  if (update) {\n    // Save any end-points in `update` that are not in the `original`\n    // TimeRanges object\n    for (i = 0; i < update.length; i++) {\n      start = update.start(i);\n      end = update.end(i);\n\n      if (edges.some(overlapsCurrentEnd)) {\n        continue;\n      }\n\n      // at this point it must be a unique non-shrinking end edge\n      result.push(end);\n    }\n  }\n\n  // we err on the side of caution and return null if didn't find\n  // exactly *one* differing end edge in the search above\n  if (result.length !== 1) {\n    return null;\n  }\n\n  return result[0];\n};\n\n/**\n * Calculate the intersection of two TimeRanges\n * @param {TimeRanges} bufferA\n * @param {TimeRanges} bufferB\n * @returns {TimeRanges} The interesection of `bufferA` with `bufferB`\n */\nvar bufferIntersection = function bufferIntersection(bufferA, bufferB) {\n  var start = null;\n  var end = null;\n  var arity = 0;\n  var extents = [];\n  var ranges = [];\n\n  if (!bufferA || !bufferA.length || !bufferB || !bufferB.length) {\n    return _videoJs2['default'].createTimeRange();\n  }\n\n  // Handle the case where we have both buffers and create an\n  // intersection of the two\n  var count = bufferA.length;\n\n  // A) Gather up all start and end times\n  while (count--) {\n    extents.push({ time: bufferA.start(count), type: 'start' });\n    extents.push({ time: bufferA.end(count), type: 'end' });\n  }\n  count = bufferB.length;\n  while (count--) {\n    extents.push({ time: bufferB.start(count), type: 'start' });\n    extents.push({ time: bufferB.end(count), type: 'end' });\n  }\n  // B) Sort them by time\n  extents.sort(function (a, b) {\n    return a.time - b.time;\n  });\n\n  // C) Go along one by one incrementing arity for start and decrementing\n  //    arity for ends\n  for (count = 0; count < extents.length; count++) {\n    if (extents[count].type === 'start') {\n      arity++;\n\n      // D) If arity is ever incremented to 2 we are entering an\n      //    overlapping range\n      if (arity === 2) {\n        start = extents[count].time;\n      }\n    } else if (extents[count].type === 'end') {\n      arity--;\n\n      // E) If arity is ever decremented to 1 we leaving an\n      //    overlapping range\n      if (arity === 1) {\n        end = extents[count].time;\n      }\n    }\n\n    // F) Record overlapping ranges\n    if (start !== null && end !== null) {\n      ranges.push([start, end]);\n      start = null;\n      end = null;\n    }\n  }\n\n  return _videoJs2['default'].createTimeRanges(ranges);\n};\n\n/**\n * Calculates the percentage of `segmentRange` that overlaps the\n * `buffered` time ranges.\n * @param {TimeRanges} segmentRange - the time range that the segment\n * covers adjusted according to currentTime\n * @param {TimeRanges} referenceRange - the original time range that the\n * segment covers\n * @param {Number} currentTime - time in seconds where the current playback\n * is at\n * @param {TimeRanges} buffered - the currently buffered time ranges\n * @returns {Number} percent of the segment currently buffered\n */\nvar calculateBufferedPercent = function calculateBufferedPercent(adjustedRange, referenceRange, currentTime, buffered) {\n  var referenceDuration = referenceRange.end(0) - referenceRange.start(0);\n  var adjustedDuration = adjustedRange.end(0) - adjustedRange.start(0);\n  var bufferMissingFromAdjusted = referenceDuration - adjustedDuration;\n  var adjustedIntersection = bufferIntersection(adjustedRange, buffered);\n  var referenceIntersection = bufferIntersection(referenceRange, buffered);\n  var adjustedOverlap = 0;\n  var referenceOverlap = 0;\n\n  var count = adjustedIntersection.length;\n\n  while (count--) {\n    adjustedOverlap += adjustedIntersection.end(count) - adjustedIntersection.start(count);\n\n    // If the current overlap segment starts at currentTime, then increase the\n    // overlap duration so that it actually starts at the beginning of referenceRange\n    // by including the difference between the two Range's durations\n    // This is a work around for the way Flash has no buffer before currentTime\n    if (adjustedIntersection.start(count) === currentTime) {\n      adjustedOverlap += bufferMissingFromAdjusted;\n    }\n  }\n\n  count = referenceIntersection.length;\n\n  while (count--) {\n    referenceOverlap += referenceIntersection.end(count) - referenceIntersection.start(count);\n  }\n\n  // Use whichever value is larger for the percentage-buffered since that value\n  // is likely more accurate because the only way\n  return Math.max(adjustedOverlap, referenceOverlap) / referenceDuration * 100;\n};\n\n/**\n * Return the amount of a range specified by the startOfSegment and segmentDuration\n * overlaps the current buffered content.\n *\n * @param {Number} startOfSegment - the time where the segment begins\n * @param {Number} segmentDuration - the duration of the segment in seconds\n * @param {Number} currentTime - time in seconds where the current playback\n * is at\n * @param {TimeRanges} buffered - the state of the buffer\n * @returns {Number} percentage of the segment's time range that is\n * already in `buffered`\n */\nvar getSegmentBufferedPercent = function getSegmentBufferedPercent(startOfSegment, segmentDuration, currentTime, buffered) {\n  var endOfSegment = startOfSegment + segmentDuration;\n\n  // The entire time range of the segment\n  var originalSegmentRange = _videoJs2['default'].createTimeRanges([[startOfSegment, endOfSegment]]);\n\n  // The adjusted segment time range that is setup such that it starts\n  // no earlier than currentTime\n  // Flash has no notion of a back-buffer so adjustedSegmentRange adjusts\n  // for that and the function will still return 100% if a only half of a\n  // segment is actually in the buffer as long as the currentTime is also\n  // half-way through the segment\n  var adjustedSegmentRange = _videoJs2['default'].createTimeRanges([[clamp(startOfSegment, [currentTime, endOfSegment]), endOfSegment]]);\n\n  // This condition happens when the currentTime is beyond the segment's\n  // end time\n  if (adjustedSegmentRange.start(0) === adjustedSegmentRange.end(0)) {\n    return 0;\n  }\n\n  var percent = calculateBufferedPercent(adjustedSegmentRange, originalSegmentRange, currentTime, buffered);\n\n  // If the segment is reported as having a zero duration, return 0%\n  // since it is likely that we will need to fetch the segment\n  if (isNaN(percent) || percent === Infinity || percent === -Infinity) {\n    return 0;\n  }\n\n  return percent;\n};\n\n/**\n * Gets a human readable string for a TimeRange\n *\n * @param {TimeRange} range\n * @returns {String} a human readable string\n */\nvar printableRange = function printableRange(range) {\n  var strArr = [];\n\n  if (!range || !range.length) {\n    return '';\n  }\n\n  for (var i = 0; i < range.length; i++) {\n    strArr.push(range.start(i) + ' => ' + range.end(i));\n  }\n\n  return strArr.join(', ');\n};\n\n/**\n * Calculates the amount of time left in seconds until the player hits the end of the\n * buffer and causes a rebuffer\n *\n * @param {TimeRange} buffered\n *        The state of the buffer\n * @param {Numnber} currentTime\n *        The current time of the player\n * @param {Number} playbackRate\n *        The current playback rate of the player. Defaults to 1.\n * @return {Number}\n *         Time until the player has to start rebuffering in seconds.\n * @function timeUntilRebuffer\n */\nvar timeUntilRebuffer = function timeUntilRebuffer(buffered, currentTime) {\n  var playbackRate = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n\n  var bufferedEnd = buffered.length ? buffered.end(buffered.length - 1) : 0;\n\n  return (bufferedEnd - currentTime) / playbackRate;\n};\n\nexports['default'] = {\n  findRange: findRange,\n  findNextRange: findNextRange,\n  findGaps: findGaps,\n  findSoleUncommonTimeRangesEnd: findSoleUncommonTimeRangesEnd,\n  getSegmentBufferedPercent: getSegmentBufferedPercent,\n  TIME_FUDGE_FACTOR: TIME_FUDGE_FACTOR,\n  SAFE_TIME_DELTA: SAFE_TIME_DELTA,\n  printableRange: printableRange,\n  timeUntilRebuffer: timeUntilRebuffer\n};\nmodule.exports = exports['default'];","/*\n * pkcs7.unpad\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\n'use strict';\n\n/**\n * Returns the subarray of a Uint8Array without PKCS#7 padding.\n * @param padded {Uint8Array} unencrypted bytes that have been padded\n * @return {Uint8Array} the unpadded bytes\n * @see http://tools.ietf.org/html/rfc5652\n */\nmodule.exports = function unpad(padded) {\n  return padded.subarray(0, padded.byteLength - padded[padded.byteLength - 1]);\n};\n","'use strict';\n\nvar TagList = function() {\n  var self = this;\n\n  this.list = [];\n\n  this.push = function(tag) {\n    this.list.push({\n      bytes: tag.bytes,\n      dts: tag.dts,\n      pts: tag.pts,\n      keyFrame: tag.keyFrame,\n      metaDataTag: tag.metaDataTag\n    });\n  };\n\n  Object.defineProperty(this, 'length', {\n    get: function() {\n      return self.list.length;\n    }\n  });\n};\n\nmodule.exports = TagList;\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0QzY3MDc3MjA4REExMUU5QjZEMUE4NUM3MzI2NTkwQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0QzY3MDc3MzA4REExMUU5QjZEMUE4NUM3MzI2NTkwQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRDNjcwNzcwMDhEQTExRTlCNkQxQTg1QzczMjY1OTBBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRDNjcwNzcxMDhEQTExRTlCNkQxQTg1QzczMjY1OTBBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8F5fRAAABmdJREFUeNrMWGtsVFUQ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\"","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _stream = require('./stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file m3u8/parse-stream.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\nvar attributeSeparator = function attributeSeparator() {\n  var key = '[^=]*';\n  var value = '\"[^\"]*\"|[^,]*';\n  var keyvalue = '(?:' + key + ')=(?:' + value + ')';\n\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n\n/**\n * Parse attributes from a line given the seperator\n *\n * @param {String} attributes the attibute line to parse\n */\nvar parseAttributes = function parseAttributes(attributes) {\n  // split the string using attributes as the separator\n  var attrs = attributes.split(attributeSeparator());\n  var result = {};\n  var i = attrs.length;\n  var attr = void 0;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    }\n\n    // split the key and value\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1);\n    // trim whitespace and remove optional quotes around the value\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n  return result;\n};\n\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\nvar ParseStream = function (_Stream) {\n  _inherits(ParseStream, _Stream);\n\n  function ParseStream() {\n    _classCallCheck(this, ParseStream);\n\n    return _possibleConstructorReturn(this, (ParseStream.__proto__ || Object.getPrototypeOf(ParseStream)).call(this));\n  }\n\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {String} line a single line of an M3U8 file to parse\n   */\n\n\n  _createClass(ParseStream, [{\n    key: 'push',\n    value: function push(line) {\n      var match = void 0;\n      var event = void 0;\n\n      // strip whitespace\n      line = line.replace(/^[\\u0000\\s]+|[\\u0000\\s]+$/g, '');\n      if (line.length === 0) {\n        // ignore empty lines\n        return;\n      }\n\n      // URIs\n      if (line[0] !== '#') {\n        this.trigger('data', {\n          type: 'uri',\n          uri: line\n        });\n        return;\n      }\n\n      // Comments\n      if (line.indexOf('#EXT') !== 0) {\n        this.trigger('data', {\n          type: 'comment',\n          text: line.slice(1)\n        });\n        return;\n      }\n\n      // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n      line = line.replace('\\r', '');\n\n      // Tags\n      match = /^#EXTM3U/.exec(line);\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n        return;\n      }\n      match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n        if (match[2]) {\n          event.title = match[2];\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'totalduration'\n        };\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'byterange'\n        };\n        if (match[1]) {\n          event.length = parseInt(match[1], 10);\n        }\n        if (match[2]) {\n          event.offset = parseInt(match[2], 10);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-MAP:?(.*)$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          var attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n          if (attributes.BYTERANGE) {\n            var _attributes$BYTERANGE = attributes.BYTERANGE.split('@'),\n                _attributes$BYTERANGE2 = _slicedToArray(_attributes$BYTERANGE, 2),\n                length = _attributes$BYTERANGE2[0],\n                offset = _attributes$BYTERANGE2[1];\n\n            event.byterange = {};\n            if (length) {\n              event.byterange.length = parseInt(length, 10);\n            }\n            if (offset) {\n              event.byterange.offset = parseInt(offset, 10);\n            }\n          }\n        }\n\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            var split = event.attributes.RESOLUTION.split('x');\n            var resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n            event.attributes.RESOLUTION = resolution;\n          }\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-MEDIA:?(.*)$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-ENDLIST/.exec(line);\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n        return;\n      }\n      match = /^#EXT-X-DISCONTINUITY/.exec(line);\n      if (match) {\n        this.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n        return;\n      }\n      match = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-KEY:?(.*)$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          // parse the IV string into a Uint32Array\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n        this.trigger('data', event);\n        return;\n      }\n      match = /^#EXT-X-CUE-IN:?(.*)?$/.exec(line);\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n        this.trigger('data', event);\n        return;\n      }\n\n      // unknown tag type\n      this.trigger('data', {\n        type: 'tag',\n        data: line.slice(4)\n      });\n    }\n  }]);\n\n  return ParseStream;\n}(_stream2['default']);\n\nexports['default'] = ParseStream;","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0RDA3OEQzMjA4REExMUU5QjY0NjgzQjhCMzBCQkU4NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0RDA3OEQzMzA4REExMUU5QjY0NjgzQjhCMzBCQkU4NCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjREMDc4RDMwMDhEQTExRTlCNjQ2ODNCOEIzMEJCRTg0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjREMDc4RDMxMDhEQTExRTlCNjQ2ODNCOEIzMEJCRTg0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+tUgNhgAABP9JREFUeNrsV2tMXFUQnrvvuw/2vSy0S8uygtYqFMKr2loTkiZqbNRIrGjSX/4xpukP/VmN9ofRRk1qfzQxqbGJ1DTVtBp/tLFKGxIUAUGgCxRou1VggX0/7nOvcy+yZV0swrKyJJ1k7jn3PObMd86cmTOEIAggEkEQsFbqGbupRQltQMBT+NuA7EBpCixnkHuRL2Jfe23FtjCsE6X1zgVAl3ccJxGv49x3LAad1arXgkFLglwuA1Eal0pBLElDIBoXOSyAcAybP26oLOc3HMC1oTETFufMem2Lp9QBaoXinuMZjoPxqVkIxRNX8fe53Q95AhsG4Md+rwG3uMNls+yqKLGvauHbswG45Z8fxOqevTsrQ7kCkK1lMsvzp51m4y630waiGB5N5b+wuKjLZoYSi3Enyjh7pf86kasprfoEvu8eeEVPas7UP7AdFHI5JBlmVQuq0NTkMgJ+HbsFkSR1GJtO7q99mP9fTOhC128aLEZrKspcTpMBQrEECGvYNQOpgQTNQP+EDxieT6IOl7H5g6frH+3MK4DznT0Hi7SaLxur3BCOJ0VTWtuxi37WVAQ0y0mXeyoYhqlAGFiOf/dAU83bOQNo7/hFjsUB5GewtUx0IpI/J2Cfp8T+mMtuhdlwNCfb1apVYDcaQKNUSKfomwuA1zcNFMMex98kch2yhgDiNq77Hda/eX53bWpFAJ9fulaFtbNaUl1j1GlBp9FINovuDwKRODQ+6IZIglrz7i9H6IqhzG6BG+hmR+5MgZ4kwaQjIYUXP46mJsYSmmV/x6GtrXvqvf8K4NTFy5VYdjptFpu7tBi2O6wIQC31p3CcPxSBGEXDH/MhWG9S40nscJVCNEmB01yEm7bgIJMMCz50vePTGEOkYAhNbU82ebMAnDj3Lc4geosdtuq6ygootZpgAifNRWLSbuvUaskFigAmZ+YgH2Q16KSTEGMFeigJhNjmLrZLFtA9OoEgYsNoVtWH9u/lxDnp8EnT9IskSVZvxcF6Ug2X+oaA49MmJ13aPwMhyCeJnsk3F8xoE58hYgSv82yDcqcDesPRHQxLv4xdX2QCoKg2Q5ERtlpM8EPfMCrPQyFRx4AXnnikCmR4H1HXl7IB0FSzXqOCwfGbEAjMQyFS1+B1sOg0MOufaVhsW3oCNjmkYGBkVLr9hUiRcAg8ri2oK23NBkDTsenpGX04GIRCpskUL+oaXe4Eum5MTrQIQkHrD4l4HNQazZUsAAxNnUSX2sKybMEqL8Yqo8kk3tfjy75G2w6/+RXPca0UlSy4e6BQKMFkNoNSpTp66tjR9xb1zkij0IxE/zqmVKqO8DyvTaErXRgmpJ9hxN3tyHqhEemn2pIv8Y9XXKaUhVpaVuZ4GbYT6DYVciUolcpp3NS3UPkzK+YDzx56TSc9pgjwoAgx5VJjHZ/ShBJHKf9edbHIqt/V6Z71CBapDDBLN4VI98xhHaMvXG3/9CNuXZP6jaScUspCovsA7gModABv/PQzgfzCpgWgksnex+JI3gJcvgR/0jesMqtVn/GC8Ko/SXVuKgAf9gza3Ub911t02scZfJKQEXlsUwHQKhQXTGpVc7nRADFMygMUE980APDCyiieb44yHNyJxYHFvDrOcuHNdAKCP0H5SYXcEcHd54UU4H/3pvFCJ/Y1CgmOOzgSjPgG54PM0Hzo/GQkdjpvOYJQ6CnYCvSXAAMARxRxnS/HSLwAAAAASUVORK5CYII=\"","'use strict';\n\nvar FlvTag = require('./flv-tag.js');\n\n// For information on the FLV format, see\n// http://download.macromedia.com/f4v/video_file_format_spec_v10_1.pdf.\n// Technically, this function returns the header and a metadata FLV tag\n// if duration is greater than zero\n// duration in seconds\n// @return {object} the bytes of the FLV header as a Uint8Array\nvar getFlvHeader = function(duration, audio, video) { // :ByteArray {\n  var\n    headBytes = new Uint8Array(3 + 1 + 1 + 4),\n    head = new DataView(headBytes.buffer),\n    metadata,\n    result,\n    metadataLength;\n\n  // default arguments\n  duration = duration || 0;\n  audio = audio === undefined ? true : audio;\n  video = video === undefined ? true : video;\n\n  // signature\n  head.setUint8(0, 0x46); // 'F'\n  head.setUint8(1, 0x4c); // 'L'\n  head.setUint8(2, 0x56); // 'V'\n\n  // version\n  head.setUint8(3, 0x01);\n\n  // flags\n  head.setUint8(4, (audio ? 0x04 : 0x00) | (video ? 0x01 : 0x00));\n\n  // data offset, should be 9 for FLV v1\n  head.setUint32(5, headBytes.byteLength);\n\n  // init the first FLV tag\n  if (duration <= 0) {\n    // no duration available so just write the first field of the first\n    // FLV tag\n    result = new Uint8Array(headBytes.byteLength + 4);\n    result.set(headBytes);\n    result.set([0, 0, 0, 0], headBytes.byteLength);\n    return result;\n  }\n\n  // write out the duration metadata tag\n  metadata = new FlvTag(FlvTag.METADATA_TAG);\n  metadata.pts = metadata.dts = 0;\n  metadata.writeMetaDataDouble('duration', duration);\n  metadataLength = metadata.finalize().length;\n  result = new Uint8Array(headBytes.byteLength + metadataLength);\n  result.set(headBytes);\n  result.set(head.byteLength, metadataLength);\n\n  return result;\n};\n\nmodule.exports = getFlvHeader;\n","/**\n * @file virtual-source-buffer.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _createTextTracksIfNecessary = require('./create-text-tracks-if-necessary');\n\nvar _createTextTracksIfNecessary2 = _interopRequireDefault(_createTextTracksIfNecessary);\n\nvar _removeCuesFromTrack = require('./remove-cues-from-track');\n\nvar _removeCuesFromTrack2 = _interopRequireDefault(_removeCuesFromTrack);\n\nvar _addTextTrackData = require('./add-text-track-data');\n\nvar _webwackify = require('webwackify');\n\nvar _webwackify2 = _interopRequireDefault(_webwackify);\n\nvar _transmuxerWorker = require('./transmuxer-worker');\n\nvar _transmuxerWorker2 = _interopRequireDefault(_transmuxerWorker);\n\nvar _codecUtils = require('./codec-utils');\n\nvar resolveTransmuxWorker = function resolveTransmuxWorker() {\n  var result = undefined;\n\n  try {\n    result = require.resolve('./transmuxer-worker');\n  } catch (e) {\n    // no result\n  }\n\n  return result;\n};\n\n// We create a wrapper around the SourceBuffer so that we can manage the\n// state of the `updating` property manually. We have to do this because\n// Firefox changes `updating` to false long before triggering `updateend`\n// events and that was causing strange problems in videojs-contrib-hls\nvar makeWrappedSourceBuffer = function makeWrappedSourceBuffer(mediaSource, mimeType) {\n  var sourceBuffer = mediaSource.addSourceBuffer(mimeType);\n  var wrapper = Object.create(null);\n\n  wrapper.updating = false;\n  wrapper.realBuffer_ = sourceBuffer;\n\n  var _loop = function (key) {\n    if (typeof sourceBuffer[key] === 'function') {\n      wrapper[key] = function () {\n        return sourceBuffer[key].apply(sourceBuffer, arguments);\n      };\n    } else if (typeof wrapper[key] === 'undefined') {\n      Object.defineProperty(wrapper, key, {\n        get: function get() {\n          return sourceBuffer[key];\n        },\n        set: function set(v) {\n          return sourceBuffer[key] = v;\n        }\n      });\n    }\n  };\n\n  for (var key in sourceBuffer) {\n    _loop(key);\n  }\n\n  return wrapper;\n};\n\n/**\n * Returns a list of gops in the buffer that have a pts value of 3 seconds or more in\n * front of current time.\n *\n * @param {Array} buffer\n *        The current buffer of gop information\n * @param {Player} player\n *        The player instance\n * @param {Double} mapping\n *        Offset to map display time to stream presentation time\n * @return {Array}\n *         List of gops considered safe to append over\n */\nvar gopsSafeToAlignWith = function gopsSafeToAlignWith(buffer, player, mapping) {\n  if (!player || !buffer.length) {\n    return [];\n  }\n\n  // pts value for current time + 3 seconds to give a bit more wiggle room\n  var currentTimePts = Math.ceil((player.currentTime() - mapping + 3) * 90000);\n\n  var i = undefined;\n\n  for (i = 0; i < buffer.length; i++) {\n    if (buffer[i].pts > currentTimePts) {\n      break;\n    }\n  }\n\n  return buffer.slice(i);\n};\n\nexports.gopsSafeToAlignWith = gopsSafeToAlignWith;\n/**\n * Appends gop information (timing and byteLength) received by the transmuxer for the\n * gops appended in the last call to appendBuffer\n *\n * @param {Array} buffer\n *        The current buffer of gop information\n * @param {Array} gops\n *        List of new gop information\n * @param {boolean} replace\n *        If true, replace the buffer with the new gop information. If false, append the\n *        new gop information to the buffer in the right location of time.\n * @return {Array}\n *         Updated list of gop information\n */\nvar updateGopBuffer = function updateGopBuffer(buffer, gops, replace) {\n  if (!gops.length) {\n    return buffer;\n  }\n\n  if (replace) {\n    // If we are in safe append mode, then completely overwrite the gop buffer\n    // with the most recent appeneded data. This will make sure that when appending\n    // future segments, we only try to align with gops that are both ahead of current\n    // time and in the last segment appended.\n    return gops.slice();\n  }\n\n  var start = gops[0].pts;\n\n  var i = 0;\n\n  for (i; i < buffer.length; i++) {\n    if (buffer[i].pts >= start) {\n      break;\n    }\n  }\n\n  return buffer.slice(0, i).concat(gops);\n};\n\nexports.updateGopBuffer = updateGopBuffer;\n/**\n * Removes gop information in buffer that overlaps with provided start and end\n *\n * @param {Array} buffer\n *        The current buffer of gop information\n * @param {Double} start\n *        position to start the remove at\n * @param {Double} end\n *        position to end the remove at\n * @param {Double} mapping\n *        Offset to map display time to stream presentation time\n */\nvar removeGopBuffer = function removeGopBuffer(buffer, start, end, mapping) {\n  var startPts = Math.ceil((start - mapping) * 90000);\n  var endPts = Math.ceil((end - mapping) * 90000);\n  var updatedBuffer = buffer.slice();\n\n  var i = buffer.length;\n\n  while (i--) {\n    if (buffer[i].pts <= endPts) {\n      break;\n    }\n  }\n\n  if (i === -1) {\n    // no removal because end of remove range is before start of buffer\n    return updatedBuffer;\n  }\n\n  var j = i + 1;\n\n  while (j--) {\n    if (buffer[j].pts <= startPts) {\n      break;\n    }\n  }\n\n  // clamp remove range start to 0 index\n  j = Math.max(j, 0);\n\n  updatedBuffer.splice(j, i - j + 1);\n\n  return updatedBuffer;\n};\n\nexports.removeGopBuffer = removeGopBuffer;\n/**\n * VirtualSourceBuffers exist so that we can transmux non native formats\n * into a native format, but keep the same api as a native source buffer.\n * It creates a transmuxer, that works in its own thread (a web worker) and\n * that transmuxer muxes the data into a native format. VirtualSourceBuffer will\n * then send all of that data to the naive sourcebuffer so that it is\n * indestinguishable from a natively supported format.\n *\n * @param {HtmlMediaSource} mediaSource the parent mediaSource\n * @param {Array} codecs array of codecs that we will be dealing with\n * @class VirtualSourceBuffer\n * @extends video.js.EventTarget\n */\n\nvar VirtualSourceBuffer = (function (_videojs$EventTarget) {\n  _inherits(VirtualSourceBuffer, _videojs$EventTarget);\n\n  function VirtualSourceBuffer(mediaSource, codecs) {\n    var _this = this;\n\n    _classCallCheck(this, VirtualSourceBuffer);\n\n    _get(Object.getPrototypeOf(VirtualSourceBuffer.prototype), 'constructor', this).call(this, _videoJs2['default'].EventTarget);\n    this.timestampOffset_ = 0;\n    this.pendingBuffers_ = [];\n    this.bufferUpdating_ = false;\n\n    this.mediaSource_ = mediaSource;\n    this.codecs_ = codecs;\n    this.audioCodec_ = null;\n    this.videoCodec_ = null;\n    this.audioDisabled_ = false;\n    this.appendAudioInitSegment_ = true;\n    this.gopBuffer_ = [];\n    this.timeMapping_ = 0;\n    this.safeAppend_ = _videoJs2['default'].browser.IE_VERSION >= 11;\n\n    var options = {\n      remux: false,\n      alignGopsAtEnd: this.safeAppend_\n    };\n\n    this.codecs_.forEach(function (codec) {\n      if ((0, _codecUtils.isAudioCodec)(codec)) {\n        _this.audioCodec_ = codec;\n      } else if ((0, _codecUtils.isVideoCodec)(codec)) {\n        _this.videoCodec_ = codec;\n      }\n    });\n\n    // append muxed segments to their respective native buffers as\n    // soon as they are available\n    this.transmuxer_ = (0, _webwackify2['default'])(_transmuxerWorker2['default'], resolveTransmuxWorker());\n    this.transmuxer_.postMessage({ action: 'init', options: options });\n\n    this.transmuxer_.onmessage = function (event) {\n      if (event.data.action === 'data') {\n        return _this.data_(event);\n      }\n\n      if (event.data.action === 'done') {\n        return _this.done_(event);\n      }\n\n      if (event.data.action === 'gopInfo') {\n        return _this.appendGopInfo_(event);\n      }\n    };\n\n    // this timestampOffset is a property with the side-effect of resetting\n    // baseMediaDecodeTime in the transmuxer on the setter\n    Object.defineProperty(this, 'timestampOffset', {\n      get: function get() {\n        return this.timestampOffset_;\n      },\n      set: function set(val) {\n        if (typeof val === 'number' && val >= 0) {\n          this.timestampOffset_ = val;\n          this.appendAudioInitSegment_ = true;\n\n          // reset gop buffer on timestampoffset as this signals a change in timeline\n          this.gopBuffer_.length = 0;\n          this.timeMapping_ = 0;\n\n          // We have to tell the transmuxer to set the baseMediaDecodeTime to\n          // the desired timestampOffset for the next segment\n          this.transmuxer_.postMessage({\n            action: 'setTimestampOffset',\n            timestampOffset: val\n          });\n        }\n      }\n    });\n\n    // setting the append window affects both source buffers\n    Object.defineProperty(this, 'appendWindowStart', {\n      get: function get() {\n        return (this.videoBuffer_ || this.audioBuffer_).appendWindowStart;\n      },\n      set: function set(start) {\n        if (this.videoBuffer_) {\n          this.videoBuffer_.appendWindowStart = start;\n        }\n        if (this.audioBuffer_) {\n          this.audioBuffer_.appendWindowStart = start;\n        }\n      }\n    });\n\n    // this buffer is \"updating\" if either of its native buffers are\n    Object.defineProperty(this, 'updating', {\n      get: function get() {\n        return !!(this.bufferUpdating_ || !this.audioDisabled_ && this.audioBuffer_ && this.audioBuffer_.updating || this.videoBuffer_ && this.videoBuffer_.updating);\n      }\n    });\n\n    // the buffered property is the intersection of the buffered\n    // ranges of the native source buffers\n    Object.defineProperty(this, 'buffered', {\n      get: function get() {\n        var start = null;\n        var end = null;\n        var arity = 0;\n        var extents = [];\n        var ranges = [];\n\n        // neither buffer has been created yet\n        if (!this.videoBuffer_ && !this.audioBuffer_) {\n          return _videoJs2['default'].createTimeRange();\n        }\n\n        // only one buffer is configured\n        if (!this.videoBuffer_) {\n          return this.audioBuffer_.buffered;\n        }\n        if (!this.audioBuffer_) {\n          return this.videoBuffer_.buffered;\n        }\n\n        // both buffers are configured\n        if (this.audioDisabled_) {\n          return this.videoBuffer_.buffered;\n        }\n\n        // both buffers are empty\n        if (this.videoBuffer_.buffered.length === 0 && this.audioBuffer_.buffered.length === 0) {\n          return _videoJs2['default'].createTimeRange();\n        }\n\n        // Handle the case where we have both buffers and create an\n        // intersection of the two\n        var videoBuffered = this.videoBuffer_.buffered;\n        var audioBuffered = this.audioBuffer_.buffered;\n        var count = videoBuffered.length;\n\n        // A) Gather up all start and end times\n        while (count--) {\n          extents.push({ time: videoBuffered.start(count), type: 'start' });\n          extents.push({ time: videoBuffered.end(count), type: 'end' });\n        }\n        count = audioBuffered.length;\n        while (count--) {\n          extents.push({ time: audioBuffered.start(count), type: 'start' });\n          extents.push({ time: audioBuffered.end(count), type: 'end' });\n        }\n        // B) Sort them by time\n        extents.sort(function (a, b) {\n          return a.time - b.time;\n        });\n\n        // C) Go along one by one incrementing arity for start and decrementing\n        //    arity for ends\n        for (count = 0; count < extents.length; count++) {\n          if (extents[count].type === 'start') {\n            arity++;\n\n            // D) If arity is ever incremented to 2 we are entering an\n            //    overlapping range\n            if (arity === 2) {\n              start = extents[count].time;\n            }\n          } else if (extents[count].type === 'end') {\n            arity--;\n\n            // E) If arity is ever decremented to 1 we leaving an\n            //    overlapping range\n            if (arity === 1) {\n              end = extents[count].time;\n            }\n          }\n\n          // F) Record overlapping ranges\n          if (start !== null && end !== null) {\n            ranges.push([start, end]);\n            start = null;\n            end = null;\n          }\n        }\n\n        return _videoJs2['default'].createTimeRanges(ranges);\n      }\n    });\n  }\n\n  /**\n   * When we get a data event from the transmuxer\n   * we call this function and handle the data that\n   * was sent to us\n   *\n   * @private\n   * @param {Event} event the data event from the transmuxer\n   */\n\n  _createClass(VirtualSourceBuffer, [{\n    key: 'data_',\n    value: function data_(event) {\n      var segment = event.data.segment;\n\n      // Cast ArrayBuffer to TypedArray\n      segment.data = new Uint8Array(segment.data, event.data.byteOffset, event.data.byteLength);\n\n      segment.initSegment = new Uint8Array(segment.initSegment.data, segment.initSegment.byteOffset, segment.initSegment.byteLength);\n\n      (0, _createTextTracksIfNecessary2['default'])(this, this.mediaSource_, segment);\n\n      // Add the segments to the pendingBuffers array\n      this.pendingBuffers_.push(segment);\n      return;\n    }\n\n    /**\n     * When we get a done event from the transmuxer\n     * we call this function and we process all\n     * of the pending data that we have been saving in the\n     * data_ function\n     *\n     * @private\n     * @param {Event} event the done event from the transmuxer\n     */\n  }, {\n    key: 'done_',\n    value: function done_(event) {\n      // Don't process and append data if the mediaSource is closed\n      if (this.mediaSource_.readyState === 'closed') {\n        this.pendingBuffers_.length = 0;\n        return;\n      }\n\n      // All buffers should have been flushed from the muxer\n      // start processing anything we have received\n      this.processPendingSegments_();\n      return;\n    }\n\n    /**\n     * Create our internal native audio/video source buffers and add\n     * event handlers to them with the following conditions:\n     * 1. they do not already exist on the mediaSource\n     * 2. this VSB has a codec for them\n     *\n     * @private\n     */\n  }, {\n    key: 'createRealSourceBuffers_',\n    value: function createRealSourceBuffers_() {\n      var _this2 = this;\n\n      var types = ['audio', 'video'];\n\n      types.forEach(function (type) {\n        // Don't create a SourceBuffer of this type if we don't have a\n        // codec for it\n        if (!_this2[type + 'Codec_']) {\n          return;\n        }\n\n        // Do nothing if a SourceBuffer of this type already exists\n        if (_this2[type + 'Buffer_']) {\n          return;\n        }\n\n        var buffer = null;\n\n        // If the mediasource already has a SourceBuffer for the codec\n        // use that\n        if (_this2.mediaSource_[type + 'Buffer_']) {\n          buffer = _this2.mediaSource_[type + 'Buffer_'];\n          // In multiple audio track cases, the audio source buffer is disabled\n          // on the main VirtualSourceBuffer by the HTMLMediaSource much earlier\n          // than createRealSourceBuffers_ is called to create the second\n          // VirtualSourceBuffer because that happens as a side-effect of\n          // videojs-contrib-hls starting the audioSegmentLoader. As a result,\n          // the audioBuffer is essentially \"ownerless\" and no one will toggle\n          // the `updating` state back to false once the `updateend` event is received\n          //\n          // Setting `updating` to false manually will work around this\n          // situation and allow work to continue\n          buffer.updating = false;\n        } else {\n          var codecProperty = type + 'Codec_';\n          var mimeType = type + '/mp4;codecs=\"' + _this2[codecProperty] + '\"';\n\n          buffer = makeWrappedSourceBuffer(_this2.mediaSource_.nativeMediaSource_, mimeType);\n\n          _this2.mediaSource_[type + 'Buffer_'] = buffer;\n        }\n\n        _this2[type + 'Buffer_'] = buffer;\n\n        // Wire up the events to the SourceBuffer\n        ['update', 'updatestart', 'updateend'].forEach(function (event) {\n          buffer.addEventListener(event, function () {\n            // if audio is disabled\n            if (type === 'audio' && _this2.audioDisabled_) {\n              return;\n            }\n\n            if (event === 'updateend') {\n              _this2[type + 'Buffer_'].updating = false;\n            }\n\n            var shouldTrigger = types.every(function (t) {\n              // skip checking audio's updating status if audio\n              // is not enabled\n              if (t === 'audio' && _this2.audioDisabled_) {\n                return true;\n              }\n              // if the other type if updating we don't trigger\n              if (type !== t && _this2[t + 'Buffer_'] && _this2[t + 'Buffer_'].updating) {\n                return false;\n              }\n              return true;\n            });\n\n            if (shouldTrigger) {\n              return _this2.trigger(event);\n            }\n          });\n        });\n      });\n    }\n\n    /**\n     * Emulate the native mediasource function, but our function will\n     * send all of the proposed segments to the transmuxer so that we\n     * can transmux them before we append them to our internal\n     * native source buffers in the correct format.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/appendBuffer\n     * @param {Uint8Array} segment the segment to append to the buffer\n     */\n  }, {\n    key: 'appendBuffer',\n    value: function appendBuffer(segment) {\n      // Start the internal \"updating\" state\n      this.bufferUpdating_ = true;\n\n      if (this.audioBuffer_ && this.audioBuffer_.buffered.length) {\n        var audioBuffered = this.audioBuffer_.buffered;\n\n        this.transmuxer_.postMessage({\n          action: 'setAudioAppendStart',\n          appendStart: audioBuffered.end(audioBuffered.length - 1)\n        });\n      }\n\n      if (this.videoBuffer_) {\n        this.transmuxer_.postMessage({\n          action: 'alignGopsWith',\n          gopsToAlignWith: gopsSafeToAlignWith(this.gopBuffer_, this.mediaSource_.player_, this.timeMapping_)\n        });\n      }\n\n      this.transmuxer_.postMessage({\n        action: 'push',\n        // Send the typed-array of data as an ArrayBuffer so that\n        // it can be sent as a \"Transferable\" and avoid the costly\n        // memory copy\n        data: segment.buffer,\n\n        // To recreate the original typed-array, we need information\n        // about what portion of the ArrayBuffer it was a view into\n        byteOffset: segment.byteOffset,\n        byteLength: segment.byteLength\n      }, [segment.buffer]);\n      this.transmuxer_.postMessage({ action: 'flush' });\n    }\n\n    /**\n     * Appends gop information (timing and byteLength) received by the transmuxer for the\n     * gops appended in the last call to appendBuffer\n     *\n     * @param {Event} event\n     *        The gopInfo event from the transmuxer\n     * @param {Array} event.data.gopInfo\n     *        List of gop info to append\n     */\n  }, {\n    key: 'appendGopInfo_',\n    value: function appendGopInfo_(event) {\n      this.gopBuffer_ = updateGopBuffer(this.gopBuffer_, event.data.gopInfo, this.safeAppend_);\n    }\n\n    /**\n     * Emulate the native mediasource function and remove parts\n     * of the buffer from any of our internal buffers that exist\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/remove\n     * @param {Double} start position to start the remove at\n     * @param {Double} end position to end the remove at\n     */\n  }, {\n    key: 'remove',\n    value: function remove(start, end) {\n      if (this.videoBuffer_) {\n        this.videoBuffer_.updating = true;\n        this.videoBuffer_.remove(start, end);\n        this.gopBuffer_ = removeGopBuffer(this.gopBuffer_, start, end, this.timeMapping_);\n      }\n      if (!this.audioDisabled_ && this.audioBuffer_) {\n        this.audioBuffer_.updating = true;\n        this.audioBuffer_.remove(start, end);\n      }\n\n      // Remove Metadata Cues (id3)\n      (0, _removeCuesFromTrack2['default'])(start, end, this.metadataTrack_);\n\n      // Remove Any Captions\n      if (this.inbandTextTracks_) {\n        for (var track in this.inbandTextTracks_) {\n          (0, _removeCuesFromTrack2['default'])(start, end, this.inbandTextTracks_[track]);\n        }\n      }\n    }\n\n    /**\n     * Process any segments that the muxer has output\n     * Concatenate segments together based on type and append them into\n     * their respective sourceBuffers\n     *\n     * @private\n     */\n  }, {\n    key: 'processPendingSegments_',\n    value: function processPendingSegments_() {\n      var sortedSegments = {\n        video: {\n          segments: [],\n          bytes: 0\n        },\n        audio: {\n          segments: [],\n          bytes: 0\n        },\n        captions: [],\n        metadata: []\n      };\n\n      // Sort segments into separate video/audio arrays and\n      // keep track of their total byte lengths\n      sortedSegments = this.pendingBuffers_.reduce(function (segmentObj, segment) {\n        var type = segment.type;\n        var data = segment.data;\n        var initSegment = segment.initSegment;\n\n        segmentObj[type].segments.push(data);\n        segmentObj[type].bytes += data.byteLength;\n\n        segmentObj[type].initSegment = initSegment;\n\n        // Gather any captions into a single array\n        if (segment.captions) {\n          segmentObj.captions = segmentObj.captions.concat(segment.captions);\n        }\n\n        if (segment.info) {\n          segmentObj[type].info = segment.info;\n        }\n\n        // Gather any metadata into a single array\n        if (segment.metadata) {\n          segmentObj.metadata = segmentObj.metadata.concat(segment.metadata);\n        }\n\n        return segmentObj;\n      }, sortedSegments);\n\n      // Create the real source buffers if they don't exist by now since we\n      // finally are sure what tracks are contained in the source\n      if (!this.videoBuffer_ && !this.audioBuffer_) {\n        // Remove any codecs that may have been specified by default but\n        // are no longer applicable now\n        if (sortedSegments.video.bytes === 0) {\n          this.videoCodec_ = null;\n        }\n        if (sortedSegments.audio.bytes === 0) {\n          this.audioCodec_ = null;\n        }\n\n        this.createRealSourceBuffers_();\n      }\n\n      if (sortedSegments.audio.info) {\n        this.mediaSource_.trigger({ type: 'audioinfo', info: sortedSegments.audio.info });\n      }\n      if (sortedSegments.video.info) {\n        this.mediaSource_.trigger({ type: 'videoinfo', info: sortedSegments.video.info });\n      }\n\n      if (this.appendAudioInitSegment_) {\n        if (!this.audioDisabled_ && this.audioBuffer_) {\n          sortedSegments.audio.segments.unshift(sortedSegments.audio.initSegment);\n          sortedSegments.audio.bytes += sortedSegments.audio.initSegment.byteLength;\n        }\n        this.appendAudioInitSegment_ = false;\n      }\n\n      var triggerUpdateend = false;\n\n      // Merge multiple video and audio segments into one and append\n      if (this.videoBuffer_ && sortedSegments.video.bytes) {\n        sortedSegments.video.segments.unshift(sortedSegments.video.initSegment);\n        sortedSegments.video.bytes += sortedSegments.video.initSegment.byteLength;\n        this.concatAndAppendSegments_(sortedSegments.video, this.videoBuffer_);\n        // TODO: are video tracks the only ones with text tracks?\n        (0, _addTextTrackData.addTextTrackData)(this, sortedSegments.captions, sortedSegments.metadata);\n      } else if (this.videoBuffer_ && (this.audioDisabled_ || !this.audioBuffer_)) {\n        // The transmuxer did not return any bytes of video, meaning it was all trimmed\n        // for gop alignment. Since we have a video buffer and audio is disabled, updateend\n        // will never be triggered by this source buffer, which will cause contrib-hls\n        // to be stuck forever waiting for updateend. If audio is not disabled, updateend\n        // will be triggered by the audio buffer, which will be sent upwards since the video\n        // buffer will not be in an updating state.\n        triggerUpdateend = true;\n      }\n\n      if (!this.audioDisabled_ && this.audioBuffer_) {\n        this.concatAndAppendSegments_(sortedSegments.audio, this.audioBuffer_);\n      }\n\n      this.pendingBuffers_.length = 0;\n\n      if (triggerUpdateend) {\n        this.trigger('updateend');\n      }\n\n      // We are no longer in the internal \"updating\" state\n      this.bufferUpdating_ = false;\n    }\n\n    /**\n     * Combine all segments into a single Uint8Array and then append them\n     * to the destination buffer\n     *\n     * @param {Object} segmentObj\n     * @param {SourceBuffer} destinationBuffer native source buffer to append data to\n     * @private\n     */\n  }, {\n    key: 'concatAndAppendSegments_',\n    value: function concatAndAppendSegments_(segmentObj, destinationBuffer) {\n      var offset = 0;\n      var tempBuffer = undefined;\n\n      if (segmentObj.bytes) {\n        tempBuffer = new Uint8Array(segmentObj.bytes);\n\n        // Combine the individual segments into one large typed-array\n        segmentObj.segments.forEach(function (segment) {\n          tempBuffer.set(segment, offset);\n          offset += segment.byteLength;\n        });\n\n        try {\n          destinationBuffer.updating = true;\n          destinationBuffer.appendBuffer(tempBuffer);\n        } catch (error) {\n          if (this.mediaSource_.player_) {\n            this.mediaSource_.player_.error({\n              code: -3,\n              type: 'APPEND_BUFFER_ERR',\n              message: error.message,\n              originalError: error\n            });\n          }\n        }\n      }\n    }\n\n    /**\n     * Emulate the native mediasource function. abort any soureBuffer\n     * actions and throw out any un-appended data.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/SourceBuffer/abort\n     */\n  }, {\n    key: 'abort',\n    value: function abort() {\n      if (this.videoBuffer_) {\n        this.videoBuffer_.abort();\n      }\n      if (!this.audioDisabled_ && this.audioBuffer_) {\n        this.audioBuffer_.abort();\n      }\n      if (this.transmuxer_) {\n        this.transmuxer_.postMessage({ action: 'reset' });\n      }\n      this.pendingBuffers_.length = 0;\n      this.bufferUpdating_ = false;\n    }\n  }]);\n\n  return VirtualSourceBuffer;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = VirtualSourceBuffer;","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_style-resources-loader@1.4.1@style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./rightTBox.vue?vue&type=style&index=0&id=055dfc70&lang=less&scoped=true&\"","/**\n * @file xhr.js\n */\n\n/**\n * A wrapper for videojs.xhr that tracks bandwidth.\n *\n * @param {Object} options options for the XHR\n * @param {Function} callback the callback to call when done\n * @return {Request} the xhr request that is going to be made\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar xhrFactory = function xhrFactory() {\n  var xhr = function XhrFunction(options, callback) {\n    // Add a default timeout for all hls requests\n    options = (0, _videoJs.mergeOptions)({\n      timeout: 45e3\n    }, options);\n\n    // Allow an optional user-specified function to modify the option\n    // object before we construct the xhr request\n    var beforeRequest = XhrFunction.beforeRequest || _videoJs2['default'].Hls.xhr.beforeRequest;\n\n    if (beforeRequest && typeof beforeRequest === 'function') {\n      var newOptions = beforeRequest(options);\n\n      if (newOptions) {\n        options = newOptions;\n      }\n    }\n\n    var request = (0, _videoJs.xhr)(options, function (error, response) {\n      var reqResponse = request.response;\n\n      if (!error && reqResponse) {\n        request.responseTime = Date.now();\n        request.roundTripTime = request.responseTime - request.requestTime;\n        request.bytesReceived = reqResponse.byteLength || reqResponse.length;\n        if (!request.bandwidth) {\n          request.bandwidth = Math.floor(request.bytesReceived / request.roundTripTime * 8 * 1000);\n        }\n      }\n\n      // videojs.xhr now uses a specific code on the error\n      // object to signal that a request has timed out instead\n      // of setting a boolean on the request object\n      if (error && error.code === 'ETIMEDOUT') {\n        request.timedout = true;\n      }\n\n      // videojs.xhr no longer considers status codes outside of 200 and 0\n      // (for file uris) to be errors, but the old XHR did, so emulate that\n      // behavior. Status 206 may be used in response to byterange requests.\n      if (!error && !request.aborted && response.statusCode !== 200 && response.statusCode !== 206 && response.statusCode !== 0) {\n        error = new Error('XHR Failed with a response of: ' + (request && (reqResponse || request.responseText)));\n      }\n\n      callback(error, request);\n    });\n    var originalAbort = request.abort;\n\n    request.abort = function () {\n      request.aborted = true;\n      return originalAbort.apply(request, arguments);\n    };\n    request.uri = options.uri;\n    request.requestTime = Date.now();\n    return request;\n  };\n\n  return xhr;\n};\n\nexports['default'] = xhrFactory;\nmodule.exports = exports['default'];","/**\n * @file aes.js\n *\n * This file contains an adaptation of the AES decryption algorithm\n * from the Standford Javascript Cryptography Library. That work is\n * covered by the following copyright and permissions notice:\n *\n * Copyright 2009-2010 Emily Stark, Mike Hamburg, Dan Boneh.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY THE AUTHORS ``AS IS'' AND ANY EXPRESS OR\n * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR\n * BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\n * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE\n * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN\n * IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation\n * are those of the authors and should not be interpreted as representing\n * official policies, either expressed or implied, of the authors.\n */\n\n/**\n * Expand the S-box tables.\n *\n * @private\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar precompute = function precompute() {\n  var tables = [[[], [], [], [], []], [[], [], [], [], []]];\n  var encTable = tables[0];\n  var decTable = tables[1];\n  var sbox = encTable[4];\n  var sboxInv = decTable[4];\n  var i = undefined;\n  var x = undefined;\n  var xInv = undefined;\n  var d = [];\n  var th = [];\n  var x2 = undefined;\n  var x4 = undefined;\n  var x8 = undefined;\n  var s = undefined;\n  var tEnc = undefined;\n  var tDec = undefined;\n\n  // Compute double and third tables\n  for (i = 0; i < 256; i++) {\n    th[(d[i] = i << 1 ^ (i >> 7) * 283) ^ i] = i;\n  }\n\n  for (x = xInv = 0; !sbox[x]; x ^= x2 || 1, xInv = th[xInv] || 1) {\n    // Compute sbox\n    s = xInv ^ xInv << 1 ^ xInv << 2 ^ xInv << 3 ^ xInv << 4;\n    s = s >> 8 ^ s & 255 ^ 99;\n    sbox[x] = s;\n    sboxInv[s] = x;\n\n    // Compute MixColumns\n    x8 = d[x4 = d[x2 = d[x]]];\n    tDec = x8 * 0x1010101 ^ x4 * 0x10001 ^ x2 * 0x101 ^ x * 0x1010100;\n    tEnc = d[s] * 0x101 ^ s * 0x1010100;\n\n    for (i = 0; i < 4; i++) {\n      encTable[i][x] = tEnc = tEnc << 24 ^ tEnc >>> 8;\n      decTable[i][s] = tDec = tDec << 24 ^ tDec >>> 8;\n    }\n  }\n\n  // Compactify. Considerable speedup on Firefox.\n  for (i = 0; i < 5; i++) {\n    encTable[i] = encTable[i].slice(0);\n    decTable[i] = decTable[i].slice(0);\n  }\n  return tables;\n};\nvar aesTables = null;\n\n/**\n * Schedule out an AES key for both encryption and decryption. This\n * is a low-level class. Use a cipher mode to do bulk encryption.\n *\n * @class AES\n * @param key {Array} The key as an array of 4, 6 or 8 words.\n */\n\nvar AES = (function () {\n  function AES(key) {\n    _classCallCheck(this, AES);\n\n    /**\n     * The expanded S-box and inverse S-box tables. These will be computed\n     * on the client so that we don't have to send them down the wire.\n     *\n     * There are two tables, _tables[0] is for encryption and\n     * _tables[1] is for decryption.\n     *\n     * The first 4 sub-tables are the expanded S-box with MixColumns. The\n     * last (_tables[01][4]) is the S-box itself.\n     *\n     * @private\n     */\n    // if we have yet to precompute the S-box tables\n    // do so now\n    if (!aesTables) {\n      aesTables = precompute();\n    }\n    // then make a copy of that object for use\n    this._tables = [[aesTables[0][0].slice(), aesTables[0][1].slice(), aesTables[0][2].slice(), aesTables[0][3].slice(), aesTables[0][4].slice()], [aesTables[1][0].slice(), aesTables[1][1].slice(), aesTables[1][2].slice(), aesTables[1][3].slice(), aesTables[1][4].slice()]];\n    var i = undefined;\n    var j = undefined;\n    var tmp = undefined;\n    var encKey = undefined;\n    var decKey = undefined;\n    var sbox = this._tables[0][4];\n    var decTable = this._tables[1];\n    var keyLen = key.length;\n    var rcon = 1;\n\n    if (keyLen !== 4 && keyLen !== 6 && keyLen !== 8) {\n      throw new Error('Invalid aes key size');\n    }\n\n    encKey = key.slice(0);\n    decKey = [];\n    this._key = [encKey, decKey];\n\n    // schedule encryption keys\n    for (i = keyLen; i < 4 * keyLen + 28; i++) {\n      tmp = encKey[i - 1];\n\n      // apply sbox\n      if (i % keyLen === 0 || keyLen === 8 && i % keyLen === 4) {\n        tmp = sbox[tmp >>> 24] << 24 ^ sbox[tmp >> 16 & 255] << 16 ^ sbox[tmp >> 8 & 255] << 8 ^ sbox[tmp & 255];\n\n        // shift rows and add rcon\n        if (i % keyLen === 0) {\n          tmp = tmp << 8 ^ tmp >>> 24 ^ rcon << 24;\n          rcon = rcon << 1 ^ (rcon >> 7) * 283;\n        }\n      }\n\n      encKey[i] = encKey[i - keyLen] ^ tmp;\n    }\n\n    // schedule decryption keys\n    for (j = 0; i; j++, i--) {\n      tmp = encKey[j & 3 ? i : i - 4];\n      if (i <= 4 || j < 4) {\n        decKey[j] = tmp;\n      } else {\n        decKey[j] = decTable[0][sbox[tmp >>> 24]] ^ decTable[1][sbox[tmp >> 16 & 255]] ^ decTable[2][sbox[tmp >> 8 & 255]] ^ decTable[3][sbox[tmp & 255]];\n      }\n    }\n  }\n\n  /**\n   * Decrypt 16 bytes, specified as four 32-bit words.\n   *\n   * @param {Number} encrypted0 the first word to decrypt\n   * @param {Number} encrypted1 the second word to decrypt\n   * @param {Number} encrypted2 the third word to decrypt\n   * @param {Number} encrypted3 the fourth word to decrypt\n   * @param {Int32Array} out the array to write the decrypted words\n   * into\n   * @param {Number} offset the offset into the output array to start\n   * writing results\n   * @return {Array} The plaintext.\n   */\n\n  _createClass(AES, [{\n    key: 'decrypt',\n    value: function decrypt(encrypted0, encrypted1, encrypted2, encrypted3, out, offset) {\n      var key = this._key[1];\n      // state variables a,b,c,d are loaded with pre-whitened data\n      var a = encrypted0 ^ key[0];\n      var b = encrypted3 ^ key[1];\n      var c = encrypted2 ^ key[2];\n      var d = encrypted1 ^ key[3];\n      var a2 = undefined;\n      var b2 = undefined;\n      var c2 = undefined;\n\n      // key.length === 2 ?\n      var nInnerRounds = key.length / 4 - 2;\n      var i = undefined;\n      var kIndex = 4;\n      var table = this._tables[1];\n\n      // load up the tables\n      var table0 = table[0];\n      var table1 = table[1];\n      var table2 = table[2];\n      var table3 = table[3];\n      var sbox = table[4];\n\n      // Inner rounds. Cribbed from OpenSSL.\n      for (i = 0; i < nInnerRounds; i++) {\n        a2 = table0[a >>> 24] ^ table1[b >> 16 & 255] ^ table2[c >> 8 & 255] ^ table3[d & 255] ^ key[kIndex];\n        b2 = table0[b >>> 24] ^ table1[c >> 16 & 255] ^ table2[d >> 8 & 255] ^ table3[a & 255] ^ key[kIndex + 1];\n        c2 = table0[c >>> 24] ^ table1[d >> 16 & 255] ^ table2[a >> 8 & 255] ^ table3[b & 255] ^ key[kIndex + 2];\n        d = table0[d >>> 24] ^ table1[a >> 16 & 255] ^ table2[b >> 8 & 255] ^ table3[c & 255] ^ key[kIndex + 3];\n        kIndex += 4;\n        a = a2;b = b2;c = c2;\n      }\n\n      // Last round.\n      for (i = 0; i < 4; i++) {\n        out[(3 & -i) + offset] = sbox[a >>> 24] << 24 ^ sbox[b >> 16 & 255] << 16 ^ sbox[c >> 8 & 255] << 8 ^ sbox[d & 255] ^ key[kIndex++];\n        a2 = a;a = b;b = c;c = d;d = a2;\n      }\n    }\n  }]);\n\n  return AES;\n})();\n\nexports['default'] = AES;\nmodule.exports = exports['default'];","/**\n * @file html-media-source.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _globalDocument = require('global/document');\n\nvar _globalDocument2 = _interopRequireDefault(_globalDocument);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _virtualSourceBuffer = require('./virtual-source-buffer');\n\nvar _virtualSourceBuffer2 = _interopRequireDefault(_virtualSourceBuffer);\n\nvar _addTextTrackData = require('./add-text-track-data');\n\nvar _codecUtils = require('./codec-utils');\n\n/**\n * Our MediaSource implementation in HTML, mimics native\n * MediaSource where/if possible.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource\n * @class HtmlMediaSource\n * @extends videojs.EventTarget\n */\n\nvar HtmlMediaSource = (function (_videojs$EventTarget) {\n  _inherits(HtmlMediaSource, _videojs$EventTarget);\n\n  function HtmlMediaSource() {\n    var _this = this;\n\n    _classCallCheck(this, HtmlMediaSource);\n\n    _get(Object.getPrototypeOf(HtmlMediaSource.prototype), 'constructor', this).call(this);\n    var property = undefined;\n\n    this.nativeMediaSource_ = new _globalWindow2['default'].MediaSource();\n    // delegate to the native MediaSource's methods by default\n    for (property in this.nativeMediaSource_) {\n      if (!(property in HtmlMediaSource.prototype) && typeof this.nativeMediaSource_[property] === 'function') {\n        this[property] = this.nativeMediaSource_[property].bind(this.nativeMediaSource_);\n      }\n    }\n\n    // emulate `duration` and `seekable` until seeking can be\n    // handled uniformly for live streams\n    // see https://github.com/w3c/media-source/issues/5\n    this.duration_ = NaN;\n    Object.defineProperty(this, 'duration', {\n      get: function get() {\n        if (this.duration_ === Infinity) {\n          return this.duration_;\n        }\n        return this.nativeMediaSource_.duration;\n      },\n      set: function set(duration) {\n        this.duration_ = duration;\n        if (duration !== Infinity) {\n          this.nativeMediaSource_.duration = duration;\n          return;\n        }\n      }\n    });\n    Object.defineProperty(this, 'seekable', {\n      get: function get() {\n        if (this.duration_ === Infinity) {\n          return _videoJs2['default'].createTimeRanges([[0, this.nativeMediaSource_.duration]]);\n        }\n        return this.nativeMediaSource_.seekable;\n      }\n    });\n\n    Object.defineProperty(this, 'readyState', {\n      get: function get() {\n        return this.nativeMediaSource_.readyState;\n      }\n    });\n\n    Object.defineProperty(this, 'activeSourceBuffers', {\n      get: function get() {\n        return this.activeSourceBuffers_;\n      }\n    });\n\n    // the list of virtual and native SourceBuffers created by this\n    // MediaSource\n    this.sourceBuffers = [];\n\n    this.activeSourceBuffers_ = [];\n\n    /**\n     * update the list of active source buffers based upon various\n     * imformation from HLS and video.js\n     *\n     * @private\n     */\n    this.updateActiveSourceBuffers_ = function () {\n      // Retain the reference but empty the array\n      _this.activeSourceBuffers_.length = 0;\n\n      // If there is only one source buffer, then it will always be active and audio will\n      // be disabled based on the codec of the source buffer\n      if (_this.sourceBuffers.length === 1) {\n        var sourceBuffer = _this.sourceBuffers[0];\n\n        sourceBuffer.appendAudioInitSegment_ = true;\n        sourceBuffer.audioDisabled_ = !sourceBuffer.audioCodec_;\n        _this.activeSourceBuffers_.push(sourceBuffer);\n        return;\n      }\n\n      // There are 2 source buffers, a combined (possibly video only) source buffer and\n      // and an audio only source buffer.\n      // By default, the audio in the combined virtual source buffer is enabled\n      // and the audio-only source buffer (if it exists) is disabled.\n      var disableCombined = false;\n      var disableAudioOnly = true;\n\n      // TODO: maybe we can store the sourcebuffers on the track objects?\n      // safari may do something like this\n      for (var i = 0; i < _this.player_.audioTracks().length; i++) {\n        var track = _this.player_.audioTracks()[i];\n\n        if (track.enabled && track.kind !== 'main') {\n          // The enabled track is an alternate audio track so disable the audio in\n          // the combined source buffer and enable the audio-only source buffer.\n          disableCombined = true;\n          disableAudioOnly = false;\n          break;\n        }\n      }\n\n      _this.sourceBuffers.forEach(function (sourceBuffer) {\n        /* eslinst-disable */\n        // TODO once codecs are required, we can switch to using the codecs to determine\n        //      what stream is the video stream, rather than relying on videoTracks\n        /* eslinst-enable */\n\n        sourceBuffer.appendAudioInitSegment_ = true;\n\n        if (sourceBuffer.videoCodec_ && sourceBuffer.audioCodec_) {\n          // combined\n          sourceBuffer.audioDisabled_ = disableCombined;\n        } else if (sourceBuffer.videoCodec_ && !sourceBuffer.audioCodec_) {\n          // If the \"combined\" source buffer is video only, then we do not want\n          // disable the audio-only source buffer (this is mostly for demuxed\n          // audio and video hls)\n          sourceBuffer.audioDisabled_ = true;\n          disableAudioOnly = false;\n        } else if (!sourceBuffer.videoCodec_ && sourceBuffer.audioCodec_) {\n          // audio only\n          sourceBuffer.audioDisabled_ = disableAudioOnly;\n          if (disableAudioOnly) {\n            return;\n          }\n        }\n\n        _this.activeSourceBuffers_.push(sourceBuffer);\n      });\n    };\n\n    this.onPlayerMediachange_ = function () {\n      _this.sourceBuffers.forEach(function (sourceBuffer) {\n        sourceBuffer.appendAudioInitSegment_ = true;\n      });\n    };\n\n    this.onHlsReset_ = function () {\n      _this.sourceBuffers.forEach(function (sourceBuffer) {\n        if (sourceBuffer.transmuxer_) {\n          sourceBuffer.transmuxer_.postMessage({ action: 'resetCaptions' });\n        }\n      });\n    };\n\n    this.onHlsSegmentTimeMapping_ = function (event) {\n      _this.sourceBuffers.forEach(function (buffer) {\n        return buffer.timeMapping_ = event.mapping;\n      });\n    };\n\n    // Re-emit MediaSource events on the polyfill\n    ['sourceopen', 'sourceclose', 'sourceended'].forEach(function (eventName) {\n      this.nativeMediaSource_.addEventListener(eventName, this.trigger.bind(this));\n    }, this);\n\n    // capture the associated player when the MediaSource is\n    // successfully attached\n    this.on('sourceopen', function (event) {\n      // Get the player this MediaSource is attached to\n      var video = _globalDocument2['default'].querySelector('[src=\"' + _this.url_ + '\"]');\n\n      if (!video) {\n        return;\n      }\n\n      _this.player_ = (0, _videoJs2['default'])(video.parentNode);\n\n      // hls-reset is fired by videojs.Hls on to the tech after the main SegmentLoader\n      // resets its state and flushes the buffer\n      _this.player_.tech_.on('hls-reset', _this.onHlsReset_);\n      // hls-segment-time-mapping is fired by videojs.Hls on to the tech after the main\n      // SegmentLoader inspects an MTS segment and has an accurate stream to display\n      // time mapping\n      _this.player_.tech_.on('hls-segment-time-mapping', _this.onHlsSegmentTimeMapping_);\n\n      if (_this.player_.audioTracks && _this.player_.audioTracks()) {\n        _this.player_.audioTracks().on('change', _this.updateActiveSourceBuffers_);\n        _this.player_.audioTracks().on('addtrack', _this.updateActiveSourceBuffers_);\n        _this.player_.audioTracks().on('removetrack', _this.updateActiveSourceBuffers_);\n      }\n\n      _this.player_.on('mediachange', _this.onPlayerMediachange_);\n    });\n\n    this.on('sourceended', function (event) {\n      var duration = (0, _addTextTrackData.durationOfVideo)(_this.duration);\n\n      for (var i = 0; i < _this.sourceBuffers.length; i++) {\n        var sourcebuffer = _this.sourceBuffers[i];\n        var cues = sourcebuffer.metadataTrack_ && sourcebuffer.metadataTrack_.cues;\n\n        if (cues && cues.length) {\n          cues[cues.length - 1].endTime = duration;\n        }\n      }\n    });\n\n    // explicitly terminate any WebWorkers that were created\n    // by SourceHandlers\n    this.on('sourceclose', function (event) {\n      this.sourceBuffers.forEach(function (sourceBuffer) {\n        if (sourceBuffer.transmuxer_) {\n          sourceBuffer.transmuxer_.terminate();\n        }\n      });\n\n      this.sourceBuffers.length = 0;\n      if (!this.player_) {\n        return;\n      }\n\n      if (this.player_.audioTracks && this.player_.audioTracks()) {\n        this.player_.audioTracks().off('change', this.updateActiveSourceBuffers_);\n        this.player_.audioTracks().off('addtrack', this.updateActiveSourceBuffers_);\n        this.player_.audioTracks().off('removetrack', this.updateActiveSourceBuffers_);\n      }\n\n      // We can only change this if the player hasn't been disposed of yet\n      // because `off` eventually tries to use the el_ property. If it has\n      // been disposed of, then don't worry about it because there are no\n      // event handlers left to unbind anyway\n      if (this.player_.el_) {\n        this.player_.off('mediachange', this.onPlayerMediachange_);\n        this.player_.tech_.off('hls-reset', this.onHlsReset_);\n        this.player_.tech_.off('hls-segment-time-mapping', this.onHlsSegmentTimeMapping_);\n      }\n    });\n  }\n\n  /**\n   * Add a range that that can now be seeked to.\n   *\n   * @param {Double} start where to start the addition\n   * @param {Double} end where to end the addition\n   * @private\n   */\n\n  _createClass(HtmlMediaSource, [{\n    key: 'addSeekableRange_',\n    value: function addSeekableRange_(start, end) {\n      var error = undefined;\n\n      if (this.duration !== Infinity) {\n        error = new Error('MediaSource.addSeekableRange() can only be invoked ' + 'when the duration is Infinity');\n        error.name = 'InvalidStateError';\n        error.code = 11;\n        throw error;\n      }\n\n      if (end > this.nativeMediaSource_.duration || isNaN(this.nativeMediaSource_.duration)) {\n        this.nativeMediaSource_.duration = end;\n      }\n    }\n\n    /**\n     * Add a source buffer to the media source.\n     *\n     * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/addSourceBuffer\n     * @param {String} type the content-type of the content\n     * @return {Object} the created source buffer\n     */\n  }, {\n    key: 'addSourceBuffer',\n    value: function addSourceBuffer(type) {\n      var buffer = undefined;\n      var parsedType = (0, _codecUtils.parseContentType)(type);\n\n      // Create a VirtualSourceBuffer to transmux MPEG-2 transport\n      // stream segments into fragmented MP4s\n      if (/^(video|audio)\\/mp2t$/i.test(parsedType.type)) {\n        var codecs = [];\n\n        if (parsedType.parameters && parsedType.parameters.codecs) {\n          codecs = parsedType.parameters.codecs.split(',');\n          codecs = (0, _codecUtils.translateLegacyCodecs)(codecs);\n          codecs = codecs.filter(function (codec) {\n            return (0, _codecUtils.isAudioCodec)(codec) || (0, _codecUtils.isVideoCodec)(codec);\n          });\n        }\n\n        if (codecs.length === 0) {\n          codecs = ['avc1.4d400d', 'mp4a.40.2'];\n        }\n\n        buffer = new _virtualSourceBuffer2['default'](this, codecs);\n\n        if (this.sourceBuffers.length !== 0) {\n          // If another VirtualSourceBuffer already exists, then we are creating a\n          // SourceBuffer for an alternate audio track and therefore we know that\n          // the source has both an audio and video track.\n          // That means we should trigger the manual creation of the real\n          // SourceBuffers instead of waiting for the transmuxer to return data\n          this.sourceBuffers[0].createRealSourceBuffers_();\n          buffer.createRealSourceBuffers_();\n\n          // Automatically disable the audio on the first source buffer if\n          // a second source buffer is ever created\n          this.sourceBuffers[0].audioDisabled_ = true;\n        }\n      } else {\n        // delegate to the native implementation\n        buffer = this.nativeMediaSource_.addSourceBuffer(type);\n      }\n\n      this.sourceBuffers.push(buffer);\n      return buffer;\n    }\n  }]);\n\n  return HtmlMediaSource;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = HtmlMediaSource;\nmodule.exports = exports['default'];","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0MjBBRTYyMjA4REExMUU5QjJGQjhCMDgyOTFEN0ZBRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0MjBBRTYyMzA4REExMUU5QjJGQjhCMDgyOTFEN0ZBRSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQyMEFFNjIwMDhEQTExRTlCMkZCOEIwODI5MUQ3RkFFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQyMEFFNjIxMDhEQTExRTlCMkZCOEIwODI5MUQ3RkFFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+EgSKHQAACWlJREFUeNq8WAlwlGcZfv9zr+y92dwHCYRwRQillwVhVNoaGZGZ1ilVpDhUWxWt0lrGjsbpMBVaGbRazYz2GnvgVORUDMg5xADlJiSEJIQAOXaT7L3737/vvyQhGzbHbjHfzDvfv9//vd//ns/3vkuoqgraIAgC0h2nr7ab8ISVQEAV/lyA5MbTaJx7kM4i7cJ3H1aWFgXgHo0huT+LAvVNrchEfB95qx1mk9OZYQSz0QA0RcbfS4oCEY6HvmAE+kORgArqRlzecn/ZFDlBmB1gJJZDNB0F4g9DP1IYxxqu2pEOXLp+S40JojreEERJbezoVOsutxypa2xxjlDg8XQ8oBGZjvsOnW+ySLJ8OMdh/eKswlzQM/S4PAxNQXlBDuS5HIskWTl89FKzfUD4J3DqSzeUUlag9kwDIcryOzl2a0VJlgs038kYKhMhzWIFmXbIc9pm4xnbpF1GN7KvwvA5ma4CdKoMaPlVGQb9iiK3Ky4Uhk/iBiWGZjGMys/SNBRmOsDrD305RuXXGtXrWwH4tJM5pSTeWX9Ok6y5srQw320zgz8chZHZo+vdC7yrasxz0ACg3PgAdM0vwWF3rSABvR+XX69aUHEk1SROKYTQ7V836th8q8kAPf4QRHgBosNI8R4EXpIT1pJRf28rmDqqQSl+Hj43tZTNd9qrSII8jAbadE9C6KMjJ7X1FUjLkKagbyI4n5MkeaEdoTLGixCMxhKTSYmAu+N1aJ+2DSNCGPOjBT3VABQPUt4acJhM4DSbEH710Hij66W/Hz+tfVuLy3lIJgKIazjvxntk+4qHK6VxQ+jd2qMzkekjk15XYcnAg9HdFEnEw6UvFIb7y0pQeE7zRsJBRZ5fgUDnQJfj2TGFd/L7oDj8a/Axi6HNUh1fs6FHC91OaOv2QtPNbrDgN20mIygoWyjGxe8SzLVGFPGJJxcuaBj1IqvZVTuLIMhjOS6nvTQvC4rwUAyZoZjzBEIQjvFws9eXIJRNPA2zfS9AvWsPSKRl9ARW+6BS+gEwahjO05shSM64kzsIxTMRkjVhs2wWIMnbBuVEEW54fdDa6QFfJBpEOT7/9JIHLw3KPRRCv/vbLprn+G3Z7kz7zOI8yLZboa3LC95gWEMeQI9AvssOgiTF43hwUBCDqeIW6DR+BYKiHldGCx8VytkaoFkFAko5dAulCXu1MzGEoAC/cbL5WtzyFEkC3vBQmp0JJjTkiaY2iz8c+uTtfUdma4CYoADPcSsNRtOsgqxMMLAs4v3lOEwODi1suvrvLmXmMu/h/hA0819NUGzkKNIfB6e+GdXQQ0twadK92tpI7/owdNu6ewGRD0py3HD6SmC6KIir8NXbiQrw/JNmqxVyHVY4dK4Bra6MiwA5uiYotteDh58DtyLanZS8nDHRfpiVvQfdpY97wkR1ACu5wSfkTLx0udgEiyqmo1coCPOhb9ytAMc9YNGzcLGlDfr7+8c9kEUUWZD/D1B1JghE7SBHb0BENCfdu2j6dmD0BKiEXksmKHOdhTLbCcwpJ+xs/RbI6sTu0/oLjYhaOvD0cPfdBaM8z7kAQ+ZC09UJFXePzTgGGWYJVFKL0etQ6qyBQ1fug1O35iXsqyxohDxHF6iMDrGWiiugSiKiogqXPaXg80cm7IVgIAClBbmarI67FeC4UFdPjzng94170FR3N1QUtYPKGjEsKBRIQvTQwX9bciEq+If26RkBpmW2QHcQ6zZWBzabBHpaiCvR4TXDwYZChEp/ShfXNUVGWflAEg/wdS1t1x6dyCHteAVs2j4fDHoVnn/qFiJRBD48VgzdXk4DvjsWQ/rNjorbMI30s2faEN0kzC8K3jswFfyBYMq1TzQSBb1B/59kHvgDmuZRQRAm4Mrbc9XDPqDEGBw/a4K681pVMro1K6eHIccS0Loc2HbAAa0dWgGXWhFHIKzabHYFZd2U9CZ+et36dxE6v81Fo5gOY6MQy6jwx/WdmIAUvLDVjSE0dln12nMemFYoQUMrC9V/cUGqPRTDMGC1O7T5xZqNv3jjrotsIIzW4NREM8zLqqJYlYEaHoZXqsTtcPjSvF6w0SHY+HExFnAs0DQx9G7YQ3zMmRKGsqwgxMI01OzMB4Zl8PWdPcSI/cPXSbQ6hc0QRTHtiiz/tGbzq9vHLaeXrV7LIrN225XgGQ581hRl8RnrCoJhKUX35++e+dH1fnPLL7eV7779QWJwGpKAGHjeuubi6myHWPSvM9m73z+Ud4YYtmfktxPKeoIQ8Fc3Pl3C51Mf/36Lek96Yrm+ZLX8adk1z6cLbT88fKJ0zAbo3OwHpYtzVamhcu/Id8hrRMpM91+JtHpi5aCTBCH6osLz33k1/MZruPS1MRNP5F8BgetHWjt8fR0KjxNezzDjs/y9knpTz8eWq5xw9B3r/mfK7JbvWXXsqK2cfCx3Loh8FSFy6+h5lzuHCsdzjc45Lvu/S63mJcZ48qQ/Uu6JZUH55oFZddlzTLaHwiJeTBTFj2H9l0GWPiEXez4YXHvrQlN5icW816pjSvxYvDEkyU2aAvIOaun+3D/Nd2a4CssdFriFlSIKkVQA9Z/6aarAfQEhpGJwbcPx0xYby9bnmgzWEqsZWrC/6NXau8lSwEsVuK7rHyo0YOngxfI6gh4QZCV5CSpwGwiKfo54LOIdSmhFnSEgPEeQvwf5o8gvKgo3KTmg7gCyVrf6gPbhdmxyLvb54So29l3RWOsAmjwybG+hlu/EMmnH8DM4WY51Yy/dFgjDpT4ftAVDmiKdyPvU/10BYjkoq5ZWe7wx7rdNvgAq4IPGfv+u7kisgSIIDU0qh21fibQ+yTENGHb7GvsH+QOb+zhe+w/mr5OGQm8ufuDHmLysJ8rpsoyGZytctv0znbYlmQa9MmB9K051qLA/Ca+M9HhAEPRoeQZRyDvbaXt/iiWDnDQUGhBEfPN845ypNvMeFLwwJIhAE8TgbUii8EfH4teULbdb3iqyZKwl8ea9EYrIk6rAT46eYjJo+pBTr3POxBa0PRgBT4yLDITauA2FkaY24P2xNj/DCCw2OWiAwKQqgMjhwIR0BtHyrZiQGBIQk6QJC8HJyhINwTAMQfMAhqRvUhXAEemKxFSaJAlMauAkGTojsSsThuMYd7MjRMf5tNqtl+PrJzsHwgh969CKGw0MTYqysnXTI/MvT7ieUtVXWgOhcgy7SpT/FIbQz9NV4H8CDABqSdlrXEwCIgAAAABJRU5ErkJggg==\"","/**\n * @file remove-cues-from-track.js\n */\n\n/**\n * Remove cues from a track on video.js.\n *\n * @param {Double} start start of where we should remove the cue\n * @param {Double} end end of where the we should remove the cue\n * @param {Object} track the text track to remove the cues from\n * @private\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar removeCuesFromTrack = function removeCuesFromTrack(start, end, track) {\n  var i = undefined;\n  var cue = undefined;\n\n  if (!track) {\n    return;\n  }\n\n  if (!track.cues) {\n    return;\n  }\n\n  i = track.cues.length;\n\n  while (i--) {\n    cue = track.cues[i];\n\n    // Remove any overlapping cue\n    if (cue.startTime <= end && cue.endTime >= start) {\n      track.removeCue(cue);\n    }\n  }\n};\n\nexports[\"default\"] = removeCuesFromTrack;\nmodule.exports = exports[\"default\"];","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _playlistLoader = require('./playlist-loader');\n\nvar _playlistLoader2 = _interopRequireDefault(_playlistLoader);\n\nvar noop = function noop() {};\n\n/**\n * Convert the properties of an HLS track into an audioTrackKind.\n *\n * @private\n */\nvar audioTrackKind_ = function audioTrackKind_(properties) {\n  var kind = properties['default'] ? 'main' : 'alternative';\n\n  if (properties.characteristics && properties.characteristics.indexOf('public.accessibility.describes-video') >= 0) {\n    kind = 'main-desc';\n  }\n\n  return kind;\n};\n\n/**\n * Pause provided segment loader and playlist loader if active\n *\n * @param {SegmentLoader} segmentLoader\n *        SegmentLoader to pause\n * @param {Object} mediaType\n *        Active media type\n * @function stopLoaders\n */\nvar stopLoaders = function stopLoaders(segmentLoader, mediaType) {\n  segmentLoader.abort();\n  segmentLoader.pause();\n\n  if (mediaType && mediaType.activePlaylistLoader) {\n    mediaType.activePlaylistLoader.pause();\n    mediaType.activePlaylistLoader = null;\n  }\n};\n\nexports.stopLoaders = stopLoaders;\n/**\n * Start loading provided segment loader and playlist loader\n *\n * @param {PlaylistLoader} playlistLoader\n *        PlaylistLoader to start loading\n * @param {Object} mediaType\n *        Active media type\n * @function startLoaders\n */\nvar startLoaders = function startLoaders(playlistLoader, mediaType) {\n  // Segment loader will be started after `loadedmetadata` or `loadedplaylist` from the\n  // playlist loader\n  mediaType.activePlaylistLoader = playlistLoader;\n  playlistLoader.load();\n};\n\nexports.startLoaders = startLoaders;\n/**\n * Returns a function to be called when the media group changes. It performs a\n * non-destructive (preserve the buffer) resync of the SegmentLoader. This is because a\n * change of group is merely a rendition switch of the same content at another encoding,\n * rather than a change of content, such as switching audio from English to Spanish.\n *\n * @param {String} type\n *        MediaGroup type\n * @param {Object} settings\n *        Object containing required information for media groups\n * @return {Function}\n *         Handler for a non-destructive resync of SegmentLoader when the active media\n *         group changes.\n * @function onGroupChanged\n */\nvar onGroupChanged = function onGroupChanged(type, settings) {\n  return function () {\n    var _settings$segmentLoaders = settings.segmentLoaders;\n    var segmentLoader = _settings$segmentLoaders[type];\n    var mainSegmentLoader = _settings$segmentLoaders.main;\n    var mediaType = settings.mediaTypes[type];\n\n    var activeTrack = mediaType.activeTrack();\n    var activeGroup = mediaType.activeGroup(activeTrack);\n    var previousActiveLoader = mediaType.activePlaylistLoader;\n\n    stopLoaders(segmentLoader, mediaType);\n\n    if (!activeGroup) {\n      // there is no group active\n      return;\n    }\n\n    if (!activeGroup.playlistLoader) {\n      if (previousActiveLoader) {\n        // The previous group had a playlist loader but the new active group does not\n        // this means we are switching from demuxed to muxed audio. In this case we want to\n        // do a destructive reset of the main segment loader and not restart the audio\n        // loaders.\n        mainSegmentLoader.resetEverything();\n      }\n      return;\n    }\n\n    // Non-destructive resync\n    segmentLoader.resyncLoader();\n\n    startLoaders(activeGroup.playlistLoader, mediaType);\n  };\n};\n\nexports.onGroupChanged = onGroupChanged;\n/**\n * Returns a function to be called when the media track changes. It performs a\n * destructive reset of the SegmentLoader to ensure we start loading as close to\n * currentTime as possible.\n *\n * @param {String} type\n *        MediaGroup type\n * @param {Object} settings\n *        Object containing required information for media groups\n * @return {Function}\n *         Handler for a destructive reset of SegmentLoader when the active media\n *         track changes.\n * @function onTrackChanged\n */\nvar onTrackChanged = function onTrackChanged(type, settings) {\n  return function () {\n    var _settings$segmentLoaders2 = settings.segmentLoaders;\n    var segmentLoader = _settings$segmentLoaders2[type];\n    var mainSegmentLoader = _settings$segmentLoaders2.main;\n    var mediaType = settings.mediaTypes[type];\n\n    var activeTrack = mediaType.activeTrack();\n    var activeGroup = mediaType.activeGroup(activeTrack);\n    var previousActiveLoader = mediaType.activePlaylistLoader;\n\n    stopLoaders(segmentLoader, mediaType);\n\n    if (!activeGroup) {\n      // there is no group active so we do not want to restart loaders\n      return;\n    }\n\n    if (!activeGroup.playlistLoader) {\n      // when switching from demuxed audio/video to muxed audio/video (noted by no playlist\n      // loader for the audio group), we want to do a destructive reset of the main segment\n      // loader and not restart the audio loaders\n      mainSegmentLoader.resetEverything();\n      return;\n    }\n\n    if (previousActiveLoader === activeGroup.playlistLoader) {\n      // Nothing has actually changed. This can happen because track change events can fire\n      // multiple times for a \"single\" change. One for enabling the new active track, and\n      // one for disabling the track that was active\n      startLoaders(activeGroup.playlistLoader, mediaType);\n      return;\n    }\n\n    if (segmentLoader.track) {\n      // For WebVTT, set the new text track in the segmentloader\n      segmentLoader.track(activeTrack);\n    }\n\n    // destructive reset\n    segmentLoader.resetEverything();\n\n    startLoaders(activeGroup.playlistLoader, mediaType);\n  };\n};\n\nexports.onTrackChanged = onTrackChanged;\nvar onError = {\n  /**\n   * Returns a function to be called when a SegmentLoader or PlaylistLoader encounters\n   * an error.\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @return {Function}\n   *         Error handler. Logs warning (or error if the playlist is blacklisted) to\n   *         console and switches back to default audio track.\n   * @function onError.AUDIO\n   */\n  AUDIO: function AUDIO(type, settings) {\n    return function () {\n      var segmentLoader = settings.segmentLoaders[type];\n      var mediaType = settings.mediaTypes[type];\n      var blacklistCurrentPlaylist = settings.blacklistCurrentPlaylist;\n\n      stopLoaders(segmentLoader, mediaType);\n\n      // switch back to default audio track\n      var activeTrack = mediaType.activeTrack();\n      var activeGroup = mediaType.activeGroup();\n      var id = (activeGroup.filter(function (group) {\n        return group['default'];\n      })[0] || activeGroup[0]).id;\n      var defaultTrack = mediaType.tracks[id];\n\n      if (activeTrack === defaultTrack) {\n        // Default track encountered an error. All we can do now is blacklist the current\n        // rendition and hope another will switch audio groups\n        blacklistCurrentPlaylist({\n          message: 'Problem encountered loading the default audio track.'\n        });\n        return;\n      }\n\n      _videoJs2['default'].log.warn('Problem encountered loading the alternate audio track.' + 'Switching back to default.');\n\n      for (var trackId in mediaType.tracks) {\n        mediaType.tracks[trackId].enabled = mediaType.tracks[trackId] === defaultTrack;\n      }\n\n      mediaType.onTrackChanged();\n    };\n  },\n  /**\n   * Returns a function to be called when a SegmentLoader or PlaylistLoader encounters\n   * an error.\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @return {Function}\n   *         Error handler. Logs warning to console and disables the active subtitle track\n   * @function onError.SUBTITLES\n   */\n  SUBTITLES: function SUBTITLES(type, settings) {\n    return function () {\n      var segmentLoader = settings.segmentLoaders[type];\n      var mediaType = settings.mediaTypes[type];\n\n      _videoJs2['default'].log.warn('Problem encountered loading the subtitle track.' + 'Disabling subtitle track.');\n\n      stopLoaders(segmentLoader, mediaType);\n\n      var track = mediaType.activeTrack();\n\n      if (track) {\n        track.mode = 'disabled';\n      }\n\n      mediaType.onTrackChanged();\n    };\n  }\n};\n\nexports.onError = onError;\nvar setupListeners = {\n  /**\n   * Setup event listeners for audio playlist loader\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {PlaylistLoader|null} playlistLoader\n   *        PlaylistLoader to register listeners on\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function setupListeners.AUDIO\n   */\n  AUDIO: function AUDIO(type, playlistLoader, settings) {\n    if (!playlistLoader) {\n      // no playlist loader means audio will be muxed with the video\n      return;\n    }\n\n    var tech = settings.tech;\n    var requestOptions = settings.requestOptions;\n    var segmentLoader = settings.segmentLoaders[type];\n\n    playlistLoader.on('loadedmetadata', function () {\n      var media = playlistLoader.media();\n\n      segmentLoader.playlist(media, requestOptions);\n\n      // if the video is already playing, or if this isn't a live video and preload\n      // permits, start downloading segments\n      if (!tech.paused() || media.endList && tech.preload() !== 'none') {\n        segmentLoader.load();\n      }\n    });\n\n    playlistLoader.on('loadedplaylist', function () {\n      segmentLoader.playlist(playlistLoader.media(), requestOptions);\n\n      // If the player isn't paused, ensure that the segment loader is running\n      if (!tech.paused()) {\n        segmentLoader.load();\n      }\n    });\n\n    playlistLoader.on('error', onError[type](type, settings));\n  },\n  /**\n   * Setup event listeners for subtitle playlist loader\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {PlaylistLoader|null} playlistLoader\n   *        PlaylistLoader to register listeners on\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function setupListeners.SUBTITLES\n   */\n  SUBTITLES: function SUBTITLES(type, playlistLoader, settings) {\n    var tech = settings.tech;\n    var requestOptions = settings.requestOptions;\n    var segmentLoader = settings.segmentLoaders[type];\n    var mediaType = settings.mediaTypes[type];\n\n    playlistLoader.on('loadedmetadata', function () {\n      var media = playlistLoader.media();\n\n      segmentLoader.playlist(media, requestOptions);\n      segmentLoader.track(mediaType.activeTrack());\n\n      // if the video is already playing, or if this isn't a live video and preload\n      // permits, start downloading segments\n      if (!tech.paused() || media.endList && tech.preload() !== 'none') {\n        segmentLoader.load();\n      }\n    });\n\n    playlistLoader.on('loadedplaylist', function () {\n      segmentLoader.playlist(playlistLoader.media(), requestOptions);\n\n      // If the player isn't paused, ensure that the segment loader is running\n      if (!tech.paused()) {\n        segmentLoader.load();\n      }\n    });\n\n    playlistLoader.on('error', onError[type](type, settings));\n  }\n};\n\nexports.setupListeners = setupListeners;\nvar initialize = {\n  /**\n   * Setup PlaylistLoaders and AudioTracks for the audio groups\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function initialize.AUDIO\n   */\n  'AUDIO': function AUDIO(type, settings) {\n    var mode = settings.mode;\n    var hls = settings.hls;\n    var segmentLoader = settings.segmentLoaders[type];\n    var requestOptions = settings.requestOptions;\n    var mediaGroups = settings.master.mediaGroups;\n    var _settings$mediaTypes$type = settings.mediaTypes[type];\n    var groups = _settings$mediaTypes$type.groups;\n    var tracks = _settings$mediaTypes$type.tracks;\n\n    // force a default if we have none or we are not\n    // in html5 mode (the only mode to support more than one\n    // audio track)\n    if (!mediaGroups[type] || Object.keys(mediaGroups[type]).length === 0 || mode !== 'html5') {\n      mediaGroups[type] = { main: { 'default': { 'default': true } } };\n    }\n\n    for (var groupId in mediaGroups[type]) {\n      if (!groups[groupId]) {\n        groups[groupId] = [];\n      }\n\n      for (var variantLabel in mediaGroups[type][groupId]) {\n        var properties = mediaGroups[type][groupId][variantLabel];\n        var playlistLoader = undefined;\n\n        if (properties.resolvedUri) {\n          playlistLoader = new _playlistLoader2['default'](properties.resolvedUri, hls, requestOptions);\n        } else {\n          // no resolvedUri means the audio is muxed with the video when using this\n          // audio track\n          playlistLoader = null;\n        }\n\n        properties = _videoJs2['default'].mergeOptions({ id: variantLabel, playlistLoader: playlistLoader }, properties);\n\n        setupListeners[type](type, properties.playlistLoader, settings);\n\n        groups[groupId].push(properties);\n\n        if (typeof tracks[variantLabel] === 'undefined') {\n          var track = new _videoJs2['default'].AudioTrack({\n            id: variantLabel,\n            kind: audioTrackKind_(properties),\n            enabled: false,\n            language: properties.language,\n            'default': properties['default'],\n            label: variantLabel\n          });\n\n          tracks[variantLabel] = track;\n        }\n      }\n    }\n\n    // setup single error event handler for the segment loader\n    segmentLoader.on('error', onError[type](type, settings));\n  },\n  /**\n   * Setup PlaylistLoaders and TextTracks for the subtitle groups\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function initialize.SUBTITLES\n   */\n  'SUBTITLES': function SUBTITLES(type, settings) {\n    var tech = settings.tech;\n    var hls = settings.hls;\n    var segmentLoader = settings.segmentLoaders[type];\n    var requestOptions = settings.requestOptions;\n    var mediaGroups = settings.master.mediaGroups;\n    var _settings$mediaTypes$type2 = settings.mediaTypes[type];\n    var groups = _settings$mediaTypes$type2.groups;\n    var tracks = _settings$mediaTypes$type2.tracks;\n\n    for (var groupId in mediaGroups[type]) {\n      if (!groups[groupId]) {\n        groups[groupId] = [];\n      }\n\n      for (var variantLabel in mediaGroups[type][groupId]) {\n        if (mediaGroups[type][groupId][variantLabel].forced) {\n          // Subtitle playlists with the forced attribute are not selectable in Safari.\n          // According to Apple's HLS Authoring Specification:\n          //   If content has forced subtitles and regular subtitles in a given language,\n          //   the regular subtitles track in that language MUST contain both the forced\n          //   subtitles and the regular subtitles for that language.\n          // Because of this requirement and that Safari does not add forced subtitles,\n          // forced subtitles are skipped here to maintain consistent experience across\n          // all platforms\n          continue;\n        }\n\n        var properties = mediaGroups[type][groupId][variantLabel];\n\n        properties = _videoJs2['default'].mergeOptions({\n          id: variantLabel,\n          playlistLoader: new _playlistLoader2['default'](properties.resolvedUri, hls, requestOptions)\n        }, properties);\n\n        setupListeners[type](type, properties.playlistLoader, settings);\n\n        groups[groupId].push(properties);\n\n        if (typeof tracks[variantLabel] === 'undefined') {\n          var track = tech.addRemoteTextTrack({\n            id: variantLabel,\n            kind: 'subtitles',\n            enabled: false,\n            language: properties.language,\n            label: variantLabel\n          }, false).track;\n\n          tracks[variantLabel] = track;\n        }\n      }\n    }\n\n    // setup single error event handler for the segment loader\n    segmentLoader.on('error', onError[type](type, settings));\n  },\n  /**\n   * Setup TextTracks for the closed-caption groups\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @function initialize['CLOSED-CAPTIONS']\n   */\n  'CLOSED-CAPTIONS': function CLOSEDCAPTIONS(type, settings) {\n    var tech = settings.tech;\n    var mediaGroups = settings.master.mediaGroups;\n    var _settings$mediaTypes$type3 = settings.mediaTypes[type];\n    var groups = _settings$mediaTypes$type3.groups;\n    var tracks = _settings$mediaTypes$type3.tracks;\n\n    for (var groupId in mediaGroups[type]) {\n      if (!groups[groupId]) {\n        groups[groupId] = [];\n      }\n\n      for (var variantLabel in mediaGroups[type][groupId]) {\n        var properties = mediaGroups[type][groupId][variantLabel];\n\n        // We only support CEA608 captions for now, so ignore anything that\n        // doesn't use a CCx INSTREAM-ID\n        if (!properties.instreamId.match(/CC\\d/)) {\n          continue;\n        }\n\n        // No PlaylistLoader is required for Closed-Captions because the captions are\n        // embedded within the video stream\n        groups[groupId].push(_videoJs2['default'].mergeOptions({ id: variantLabel }, properties));\n\n        if (typeof tracks[variantLabel] === 'undefined') {\n          var track = tech.addRemoteTextTrack({\n            id: properties.instreamId,\n            kind: 'captions',\n            enabled: false,\n            language: properties.language,\n            label: variantLabel\n          }, false).track;\n\n          tracks[variantLabel] = track;\n        }\n      }\n    }\n  }\n};\n\nexports.initialize = initialize;\n/**\n * Returns a function used to get the active group of the provided type\n *\n * @param {String} type\n *        MediaGroup type\n * @param {Object} settings\n *        Object containing required information for media groups\n * @return {Function}\n *         Function that returns the active media group for the provided type. Takes an\n *         optional parameter {TextTrack} track. If no track is provided, a list of all\n *         variants in the group, otherwise the variant corresponding to the provided\n *         track is returned.\n * @function activeGroup\n */\nvar activeGroup = function activeGroup(type, settings) {\n  return function (track) {\n    var masterPlaylistLoader = settings.masterPlaylistLoader;\n    var groups = settings.mediaTypes[type].groups;\n\n    var media = masterPlaylistLoader.media();\n\n    if (!media) {\n      return null;\n    }\n\n    var variants = null;\n\n    if (media.attributes[type]) {\n      variants = groups[media.attributes[type]];\n    }\n\n    variants = variants || groups.main;\n\n    if (typeof track === 'undefined') {\n      return variants;\n    }\n\n    if (track === null) {\n      // An active track was specified so a corresponding group is expected. track === null\n      // means no track is currently active so there is no corresponding group\n      return null;\n    }\n\n    return variants.filter(function (props) {\n      return props.id === track.id;\n    })[0] || null;\n  };\n};\n\nexports.activeGroup = activeGroup;\nvar activeTrack = {\n  /**\n   * Returns a function used to get the active track of type provided\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @return {Function}\n   *         Function that returns the active media track for the provided type. Returns\n   *         null if no track is active\n   * @function activeTrack.AUDIO\n   */\n  AUDIO: function AUDIO(type, settings) {\n    return function () {\n      var tracks = settings.mediaTypes[type].tracks;\n\n      for (var id in tracks) {\n        if (tracks[id].enabled) {\n          return tracks[id];\n        }\n      }\n\n      return null;\n    };\n  },\n  /**\n   * Returns a function used to get the active track of type provided\n   *\n   * @param {String} type\n   *        MediaGroup type\n   * @param {Object} settings\n   *        Object containing required information for media groups\n   * @return {Function}\n   *         Function that returns the active media track for the provided type. Returns\n   *         null if no track is active\n   * @function activeTrack.SUBTITLES\n   */\n  SUBTITLES: function SUBTITLES(type, settings) {\n    return function () {\n      var tracks = settings.mediaTypes[type].tracks;\n\n      for (var id in tracks) {\n        if (tracks[id].mode === 'showing') {\n          return tracks[id];\n        }\n      }\n\n      return null;\n    };\n  }\n};\n\nexports.activeTrack = activeTrack;\n/**\n * Setup PlaylistLoaders and Tracks for media groups (Audio, Subtitles,\n * Closed-Captions) specified in the master manifest.\n *\n * @param {Object} settings\n *        Object containing required information for setting up the media groups\n * @param {SegmentLoader} settings.segmentLoaders.AUDIO\n *        Audio segment loader\n * @param {SegmentLoader} settings.segmentLoaders.SUBTITLES\n *        Subtitle segment loader\n * @param {SegmentLoader} settings.segmentLoaders.main\n *        Main segment loader\n * @param {Tech} settings.tech\n *        The tech of the player\n * @param {Object} settings.requestOptions\n *        XHR request options used by the segment loaders\n * @param {PlaylistLoader} settings.masterPlaylistLoader\n *        PlaylistLoader for the master source\n * @param {String} mode\n *        Mode of the hls source handler. Can be 'auto', 'html5', or 'flash'\n * @param {HlsHandler} settings.hls\n *        HLS SourceHandler\n * @param {Object} settings.master\n *        The parsed master manifest\n * @param {Object} settings.mediaTypes\n *        Object to store the loaders, tracks, and utility methods for each media type\n * @param {Function} settings.blacklistCurrentPlaylist\n *        Blacklists the current rendition and forces a rendition switch.\n * @function setupMediaGroups\n */\nvar setupMediaGroups = function setupMediaGroups(settings) {\n  ['AUDIO', 'SUBTITLES', 'CLOSED-CAPTIONS'].forEach(function (type) {\n    initialize[type](type, settings);\n  });\n\n  var mediaTypes = settings.mediaTypes;\n  var masterPlaylistLoader = settings.masterPlaylistLoader;\n  var tech = settings.tech;\n  var hls = settings.hls;\n\n  // setup active group and track getters and change event handlers\n  ['AUDIO', 'SUBTITLES'].forEach(function (type) {\n    mediaTypes[type].activeGroup = activeGroup(type, settings);\n    mediaTypes[type].activeTrack = activeTrack[type](type, settings);\n    mediaTypes[type].onGroupChanged = onGroupChanged(type, settings);\n    mediaTypes[type].onTrackChanged = onTrackChanged(type, settings);\n  });\n\n  // DO NOT enable the default subtitle or caption track.\n  // DO enable the default audio track\n  var audioGroup = mediaTypes.AUDIO.activeGroup();\n  var groupId = (audioGroup.filter(function (group) {\n    return group['default'];\n  })[0] || audioGroup[0]).id;\n\n  mediaTypes.AUDIO.tracks[groupId].enabled = true;\n  mediaTypes.AUDIO.onTrackChanged();\n\n  masterPlaylistLoader.on('mediachange', function () {\n    ['AUDIO', 'SUBTITLES'].forEach(function (type) {\n      return mediaTypes[type].onGroupChanged();\n    });\n  });\n\n  // custom audio track change event handler for usage event\n  var onAudioTrackChanged = function onAudioTrackChanged() {\n    mediaTypes.AUDIO.onTrackChanged();\n    tech.trigger({ type: 'usage', name: 'hls-audio-change' });\n  };\n\n  tech.audioTracks().addEventListener('change', onAudioTrackChanged);\n  tech.remoteTextTracks().addEventListener('change', mediaTypes.SUBTITLES.onTrackChanged);\n\n  hls.on('dispose', function () {\n    tech.audioTracks().removeEventListener('change', onAudioTrackChanged);\n    tech.remoteTextTracks().removeEventListener('change', mediaTypes.SUBTITLES.onTrackChanged);\n  });\n\n  // clear existing audio tracks and add the ones we just created\n  tech.clearTracks('audio');\n\n  for (var id in mediaTypes.AUDIO.tracks) {\n    tech.audioTracks().addTrack(mediaTypes.AUDIO.tracks[id]);\n  }\n};\n\nexports.setupMediaGroups = setupMediaGroups;\n/**\n * Creates skeleton object used to store the loaders, tracks, and utility methods for each\n * media type\n *\n * @return {Object}\n *         Object to store the loaders, tracks, and utility methods for each media type\n * @function createMediaTypes\n */\nvar createMediaTypes = function createMediaTypes() {\n  var mediaTypes = {};\n\n  ['AUDIO', 'SUBTITLES', 'CLOSED-CAPTIONS'].forEach(function (type) {\n    mediaTypes[type] = {\n      groups: {},\n      tracks: {},\n      activePlaylistLoader: null,\n      activeGroup: noop,\n      activeTrack: noop,\n      onGroupChanged: noop,\n      onTrackChanged: noop\n    };\n  });\n\n  return mediaTypes;\n};\nexports.createMediaTypes = createMediaTypes;","module.exports = {\n  tag: require('./flv-tag'),\n  Transmuxer: require('./transmuxer'),\n  getFlvHeader: require('./flv-header')\n};\n","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_style-resources-loader@1.4.1@style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./rightBBox.vue?vue&type=style&index=0&id=6720ead2&lang=less&scoped=true&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0QUJCN0E1MjA4REExMUU5ODlEMkZCQzczMkIzNzBBMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0QUJCN0E1MzA4REExMUU5ODlEMkZCQzczMkIzNzBBMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRBQkI3QTUwMDhEQTExRTk4OUQyRkJDNzMyQjM3MEEwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRBQkI3QTUxMDhEQTExRTk4OUQyRkJDNzMyQjM3MEEwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+WDKglwAABmVJREFUeNrUWWlMVFcU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\"","/**\n * @file segment-loader.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x4, _x5, _x6) { var _again = true; _function: while (_again) { var object = _x4, property = _x5, receiver = _x6; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x4 = parent; _x5 = property; _x6 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _playlist = require('./playlist');\n\nvar _playlist2 = _interopRequireDefault(_playlist);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _sourceUpdater = require('./source-updater');\n\nvar _sourceUpdater2 = _interopRequireDefault(_sourceUpdater);\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs = require('videojs-contrib-media-sources/es5/remove-cues-from-track.js');\n\nvar _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2 = _interopRequireDefault(_videojsContribMediaSourcesEs5RemoveCuesFromTrackJs);\n\nvar _binUtils = require('./bin-utils');\n\nvar _mediaSegmentRequest = require('./media-segment-request');\n\nvar _ranges = require('./ranges');\n\nvar _playlistSelectors = require('./playlist-selectors');\n\n// in ms\nvar CHECK_BUFFER_DELAY = 500;\n\n/**\n * Determines if we should call endOfStream on the media source based\n * on the state of the buffer or if appened segment was the final\n * segment in the playlist.\n *\n * @param {Object} playlist a media playlist object\n * @param {Object} mediaSource the MediaSource object\n * @param {Number} segmentIndex the index of segment we last appended\n * @returns {Boolean} do we need to call endOfStream on the MediaSource\n */\nvar detectEndOfStream = function detectEndOfStream(playlist, mediaSource, segmentIndex) {\n  if (!playlist || !mediaSource) {\n    return false;\n  }\n\n  var segments = playlist.segments;\n\n  // determine a few boolean values to help make the branch below easier\n  // to read\n  var appendedLastSegment = segmentIndex === segments.length;\n\n  // if we've buffered to the end of the video, we need to call endOfStream\n  // so that MediaSources can trigger the `ended` event when it runs out of\n  // buffered data instead of waiting for me\n  return playlist.endList && mediaSource.readyState === 'open' && appendedLastSegment;\n};\n\nvar finite = function finite(num) {\n  return typeof num === 'number' && isFinite(num);\n};\n\nvar illegalMediaSwitch = function illegalMediaSwitch(loaderType, startingMedia, newSegmentMedia) {\n  // Although these checks should most likely cover non 'main' types, for now it narrows\n  // the scope of our checks.\n  if (loaderType !== 'main' || !startingMedia || !newSegmentMedia) {\n    return null;\n  }\n\n  if (!newSegmentMedia.containsAudio && !newSegmentMedia.containsVideo) {\n    return 'Neither audio nor video found in segment.';\n  }\n\n  if (startingMedia.containsVideo && !newSegmentMedia.containsVideo) {\n    return 'Only audio found in segment when we expected video.' + ' We can\\'t switch to audio only from a stream that had video.' + ' To get rid of this message, please add codec information to the manifest.';\n  }\n\n  if (!startingMedia.containsVideo && newSegmentMedia.containsVideo) {\n    return 'Video found in segment when we expected only audio.' + ' We can\\'t switch to a stream with video from an audio only stream.' + ' To get rid of this message, please add codec information to the manifest.';\n  }\n\n  return null;\n};\n\nexports.illegalMediaSwitch = illegalMediaSwitch;\n/**\n * Calculates a time value that is safe to remove from the back buffer without interupting\n * playback.\n *\n * @param {TimeRange} seekable\n *        The current seekable range\n * @param {Number} currentTime\n *        The current time of the player\n * @param {Number} targetDuration\n *        The target duration of the current playlist\n * @return {Number}\n *         Time that is safe to remove from the back buffer without interupting playback\n */\nvar safeBackBufferTrimTime = function safeBackBufferTrimTime(seekable, currentTime, targetDuration) {\n  var removeToTime = undefined;\n\n  if (seekable.length && seekable.start(0) > 0 && seekable.start(0) < currentTime) {\n    // If we have a seekable range use that as the limit for what can be removed safely\n    removeToTime = seekable.start(0);\n  } else {\n    // otherwise remove anything older than 30 seconds before the current play head\n    removeToTime = currentTime - 30;\n  }\n\n  // Don't allow removing from the buffer within target duration of current time\n  // to avoid the possibility of removing the GOP currently being played which could\n  // cause playback stalls.\n  return Math.min(removeToTime, currentTime - targetDuration);\n};\n\nexports.safeBackBufferTrimTime = safeBackBufferTrimTime;\n/**\n * An object that manages segment loading and appending.\n *\n * @class SegmentLoader\n * @param {Object} options required and optional options\n * @extends videojs.EventTarget\n */\n\nvar SegmentLoader = (function (_videojs$EventTarget) {\n  _inherits(SegmentLoader, _videojs$EventTarget);\n\n  function SegmentLoader(settings) {\n    var _this = this;\n\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    _classCallCheck(this, SegmentLoader);\n\n    _get(Object.getPrototypeOf(SegmentLoader.prototype), 'constructor', this).call(this);\n    // check pre-conditions\n    if (!settings) {\n      throw new TypeError('Initialization settings are required');\n    }\n    if (typeof settings.currentTime !== 'function') {\n      throw new TypeError('No currentTime getter specified');\n    }\n    if (!settings.mediaSource) {\n      throw new TypeError('No MediaSource specified');\n    }\n    // public properties\n    this.state = 'INIT';\n    this.bandwidth = settings.bandwidth;\n    this.throughput = { rate: 0, count: 0 };\n    this.roundTrip = NaN;\n    this.resetStats_();\n    this.mediaIndex = null;\n\n    // private settings\n    this.hasPlayed_ = settings.hasPlayed;\n    this.currentTime_ = settings.currentTime;\n    this.seekable_ = settings.seekable;\n    this.seeking_ = settings.seeking;\n    this.duration_ = settings.duration;\n    this.mediaSource_ = settings.mediaSource;\n    this.hls_ = settings.hls;\n    this.loaderType_ = settings.loaderType;\n    this.startingMedia_ = void 0;\n    this.segmentMetadataTrack_ = settings.segmentMetadataTrack;\n    this.goalBufferLength_ = settings.goalBufferLength;\n\n    // private instance variables\n    this.checkBufferTimeout_ = null;\n    this.error_ = void 0;\n    this.currentTimeline_ = -1;\n    this.pendingSegment_ = null;\n    this.mimeType_ = null;\n    this.sourceUpdater_ = null;\n    this.xhrOptions_ = null;\n\n    // Fragmented mp4 playback\n    this.activeInitSegmentId_ = null;\n    this.initSegments_ = {};\n\n    this.decrypter_ = settings.decrypter;\n\n    // Manages the tracking and generation of sync-points, mappings\n    // between a time in the display time and a segment index within\n    // a playlist\n    this.syncController_ = settings.syncController;\n    this.syncPoint_ = {\n      segmentIndex: 0,\n      time: 0\n    };\n\n    this.syncController_.on('syncinfoupdate', function () {\n      return _this.trigger('syncinfoupdate');\n    });\n\n    this.mediaSource_.addEventListener('sourceopen', function () {\n      return _this.ended_ = false;\n    });\n\n    // ...for determining the fetch location\n    this.fetchAtBuffer_ = false;\n\n    if (options.debug) {\n      this.logger_ = _videoJs2['default'].log.bind(_videoJs2['default'], 'segment-loader', this.loaderType_, '->');\n    }\n  }\n\n  /**\n   * reset all of our media stats\n   *\n   * @private\n   */\n\n  _createClass(SegmentLoader, [{\n    key: 'resetStats_',\n    value: function resetStats_() {\n      this.mediaBytesTransferred = 0;\n      this.mediaRequests = 0;\n      this.mediaRequestsAborted = 0;\n      this.mediaRequestsTimedout = 0;\n      this.mediaRequestsErrored = 0;\n      this.mediaTransferDuration = 0;\n      this.mediaSecondsLoaded = 0;\n    }\n\n    /**\n     * dispose of the SegmentLoader and reset to the default state\n     */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.state = 'DISPOSED';\n      this.pause();\n      this.abort_();\n      if (this.sourceUpdater_) {\n        this.sourceUpdater_.dispose();\n      }\n      this.resetStats_();\n    }\n\n    /**\n     * abort anything that is currently doing on with the SegmentLoader\n     * and reset to a default state\n     */\n  }, {\n    key: 'abort',\n    value: function abort() {\n      if (this.state !== 'WAITING') {\n        if (this.pendingSegment_) {\n          this.pendingSegment_ = null;\n        }\n        return;\n      }\n\n      this.abort_();\n\n      // We aborted the requests we were waiting on, so reset the loader's state to READY\n      // since we are no longer \"waiting\" on any requests. XHR callback is not always run\n      // when the request is aborted. This will prevent the loader from being stuck in the\n      // WAITING state indefinitely.\n      this.state = 'READY';\n\n      // don't wait for buffer check timeouts to begin fetching the\n      // next segment\n      if (!this.paused()) {\n        this.monitorBuffer_();\n      }\n    }\n\n    /**\n     * abort all pending xhr requests and null any pending segements\n     *\n     * @private\n     */\n  }, {\n    key: 'abort_',\n    value: function abort_() {\n      if (this.pendingSegment_) {\n        this.pendingSegment_.abortRequests();\n      }\n\n      // clear out the segment being processed\n      this.pendingSegment_ = null;\n    }\n\n    /**\n     * set an error on the segment loader and null out any pending segements\n     *\n     * @param {Error} error the error to set on the SegmentLoader\n     * @return {Error} the error that was set or that is currently set\n     */\n  }, {\n    key: 'error',\n    value: function error(_error) {\n      if (typeof _error !== 'undefined') {\n        this.error_ = _error;\n      }\n\n      this.pendingSegment_ = null;\n      return this.error_;\n    }\n  }, {\n    key: 'endOfStream',\n    value: function endOfStream() {\n      this.ended_ = true;\n      this.pause();\n      this.trigger('ended');\n    }\n\n    /**\n     * Indicates which time ranges are buffered\n     *\n     * @return {TimeRange}\n     *         TimeRange object representing the current buffered ranges\n     */\n  }, {\n    key: 'buffered_',\n    value: function buffered_() {\n      if (!this.sourceUpdater_) {\n        return _videoJs2['default'].createTimeRanges();\n      }\n\n      return this.sourceUpdater_.buffered();\n    }\n\n    /**\n     * Gets and sets init segment for the provided map\n     *\n     * @param {Object} map\n     *        The map object representing the init segment to get or set\n     * @param {Boolean=} set\n     *        If true, the init segment for the provided map should be saved\n     * @return {Object}\n     *         map object for desired init segment\n     */\n  }, {\n    key: 'initSegment',\n    value: function initSegment(map) {\n      var set = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\n      if (!map) {\n        return null;\n      }\n\n      var id = (0, _binUtils.initSegmentId)(map);\n      var storedMap = this.initSegments_[id];\n\n      if (set && !storedMap && map.bytes) {\n        this.initSegments_[id] = storedMap = {\n          resolvedUri: map.resolvedUri,\n          byterange: map.byterange,\n          bytes: map.bytes\n        };\n      }\n\n      return storedMap || map;\n    }\n\n    /**\n     * Returns true if all configuration required for loading is present, otherwise false.\n     *\n     * @return {Boolean} True if the all configuration is ready for loading\n     * @private\n     */\n  }, {\n    key: 'couldBeginLoading_',\n    value: function couldBeginLoading_() {\n      return this.playlist_ && (\n      // the source updater is created when init_ is called, so either having a\n      // source updater or being in the INIT state with a mimeType is enough\n      // to say we have all the needed configuration to start loading.\n      this.sourceUpdater_ || this.mimeType_ && this.state === 'INIT') && !this.paused();\n    }\n\n    /**\n     * load a playlist and start to fill the buffer\n     */\n  }, {\n    key: 'load',\n    value: function load() {\n      // un-pause\n      this.monitorBuffer_();\n\n      // if we don't have a playlist yet, keep waiting for one to be\n      // specified\n      if (!this.playlist_) {\n        return;\n      }\n\n      // not sure if this is the best place for this\n      this.syncController_.setDateTimeMapping(this.playlist_);\n\n      // if all the configuration is ready, initialize and begin loading\n      if (this.state === 'INIT' && this.couldBeginLoading_()) {\n        return this.init_();\n      }\n\n      // if we're in the middle of processing a segment already, don't\n      // kick off an additional segment request\n      if (!this.couldBeginLoading_() || this.state !== 'READY' && this.state !== 'INIT') {\n        return;\n      }\n\n      this.state = 'READY';\n    }\n\n    /**\n     * Once all the starting parameters have been specified, begin\n     * operation. This method should only be invoked from the INIT\n     * state.\n     *\n     * @private\n     */\n  }, {\n    key: 'init_',\n    value: function init_() {\n      this.state = 'READY';\n      this.sourceUpdater_ = new _sourceUpdater2['default'](this.mediaSource_, this.mimeType_);\n      this.resetEverything();\n      return this.monitorBuffer_();\n    }\n\n    /**\n     * set a playlist on the segment loader\n     *\n     * @param {PlaylistLoader} media the playlist to set on the segment loader\n     */\n  }, {\n    key: 'playlist',\n    value: function playlist(newPlaylist) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      if (!newPlaylist) {\n        return;\n      }\n\n      var oldPlaylist = this.playlist_;\n      var segmentInfo = this.pendingSegment_;\n\n      this.playlist_ = newPlaylist;\n      this.xhrOptions_ = options;\n\n      // when we haven't started playing yet, the start of a live playlist\n      // is always our zero-time so force a sync update each time the playlist\n      // is refreshed from the server\n      if (!this.hasPlayed_()) {\n        newPlaylist.syncInfo = {\n          mediaSequence: newPlaylist.mediaSequence,\n          time: 0\n        };\n      }\n\n      // in VOD, this is always a rendition switch (or we updated our syncInfo above)\n      // in LIVE, we always want to update with new playlists (including refreshes)\n      this.trigger('syncinfoupdate');\n\n      // if we were unpaused but waiting for a playlist, start\n      // buffering now\n      if (this.state === 'INIT' && this.couldBeginLoading_()) {\n        return this.init_();\n      }\n\n      if (!oldPlaylist || oldPlaylist.uri !== newPlaylist.uri) {\n        if (this.mediaIndex !== null) {\n          // we must \"resync\" the segment loader when we switch renditions and\n          // the segment loader is already synced to the previous rendition\n          this.resyncLoader();\n        }\n\n        // the rest of this function depends on `oldPlaylist` being defined\n        return;\n      }\n\n      // we reloaded the same playlist so we are in a live scenario\n      // and we will likely need to adjust the mediaIndex\n      var mediaSequenceDiff = newPlaylist.mediaSequence - oldPlaylist.mediaSequence;\n\n      this.logger_('mediaSequenceDiff', mediaSequenceDiff);\n\n      // update the mediaIndex on the SegmentLoader\n      // this is important because we can abort a request and this value must be\n      // equal to the last appended mediaIndex\n      if (this.mediaIndex !== null) {\n        this.mediaIndex -= mediaSequenceDiff;\n      }\n\n      // update the mediaIndex on the SegmentInfo object\n      // this is important because we will update this.mediaIndex with this value\n      // in `handleUpdateEnd_` after the segment has been successfully appended\n      if (segmentInfo) {\n        segmentInfo.mediaIndex -= mediaSequenceDiff;\n\n        // we need to update the referenced segment so that timing information is\n        // saved for the new playlist's segment, however, if the segment fell off the\n        // playlist, we can leave the old reference and just lose the timing info\n        if (segmentInfo.mediaIndex >= 0) {\n          segmentInfo.segment = newPlaylist.segments[segmentInfo.mediaIndex];\n        }\n      }\n\n      this.syncController_.saveExpiredSegmentInfo(oldPlaylist, newPlaylist);\n    }\n\n    /**\n     * Prevent the loader from fetching additional segments. If there\n     * is a segment request outstanding, it will finish processing\n     * before the loader halts. A segment loader can be unpaused by\n     * calling load().\n     */\n  }, {\n    key: 'pause',\n    value: function pause() {\n      if (this.checkBufferTimeout_) {\n        _globalWindow2['default'].clearTimeout(this.checkBufferTimeout_);\n\n        this.checkBufferTimeout_ = null;\n      }\n    }\n\n    /**\n     * Returns whether the segment loader is fetching additional\n     * segments when given the opportunity. This property can be\n     * modified through calls to pause() and load().\n     */\n  }, {\n    key: 'paused',\n    value: function paused() {\n      return this.checkBufferTimeout_ === null;\n    }\n\n    /**\n     * create/set the following mimetype on the SourceBuffer through a\n     * SourceUpdater\n     *\n     * @param {String} mimeType the mime type string to use\n     */\n  }, {\n    key: 'mimeType',\n    value: function mimeType(_mimeType) {\n      if (this.mimeType_) {\n        return;\n      }\n\n      this.mimeType_ = _mimeType;\n      // if we were unpaused but waiting for a sourceUpdater, start\n      // buffering now\n      if (this.state === 'INIT' && this.couldBeginLoading_()) {\n        this.init_();\n      }\n    }\n\n    /**\n     * Delete all the buffered data and reset the SegmentLoader\n     */\n  }, {\n    key: 'resetEverything',\n    value: function resetEverything() {\n      this.ended_ = false;\n      this.resetLoader();\n      this.remove(0, this.duration_());\n      this.trigger('reseteverything');\n    }\n\n    /**\n     * Force the SegmentLoader to resync and start loading around the currentTime instead\n     * of starting at the end of the buffer\n     *\n     * Useful for fast quality changes\n     */\n  }, {\n    key: 'resetLoader',\n    value: function resetLoader() {\n      this.fetchAtBuffer_ = false;\n      this.resyncLoader();\n    }\n\n    /**\n     * Force the SegmentLoader to restart synchronization and make a conservative guess\n     * before returning to the simple walk-forward method\n     */\n  }, {\n    key: 'resyncLoader',\n    value: function resyncLoader() {\n      this.mediaIndex = null;\n      this.syncPoint_ = null;\n      this.abort();\n    }\n\n    /**\n     * Remove any data in the source buffer between start and end times\n     * @param {Number} start - the start time of the region to remove from the buffer\n     * @param {Number} end - the end time of the region to remove from the buffer\n     */\n  }, {\n    key: 'remove',\n    value: function remove(start, end) {\n      if (this.sourceUpdater_) {\n        this.sourceUpdater_.remove(start, end);\n      }\n      (0, _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2['default'])(start, end, this.segmentMetadataTrack_);\n    }\n\n    /**\n     * (re-)schedule monitorBufferTick_ to run as soon as possible\n     *\n     * @private\n     */\n  }, {\n    key: 'monitorBuffer_',\n    value: function monitorBuffer_() {\n      if (this.checkBufferTimeout_) {\n        _globalWindow2['default'].clearTimeout(this.checkBufferTimeout_);\n      }\n\n      this.checkBufferTimeout_ = _globalWindow2['default'].setTimeout(this.monitorBufferTick_.bind(this), 1);\n    }\n\n    /**\n     * As long as the SegmentLoader is in the READY state, periodically\n     * invoke fillBuffer_().\n     *\n     * @private\n     */\n  }, {\n    key: 'monitorBufferTick_',\n    value: function monitorBufferTick_() {\n      if (this.state === 'READY') {\n        this.fillBuffer_();\n      }\n\n      if (this.checkBufferTimeout_) {\n        _globalWindow2['default'].clearTimeout(this.checkBufferTimeout_);\n      }\n\n      this.checkBufferTimeout_ = _globalWindow2['default'].setTimeout(this.monitorBufferTick_.bind(this), CHECK_BUFFER_DELAY);\n    }\n\n    /**\n     * fill the buffer with segements unless the sourceBuffers are\n     * currently updating\n     *\n     * Note: this function should only ever be called by monitorBuffer_\n     * and never directly\n     *\n     * @private\n     */\n  }, {\n    key: 'fillBuffer_',\n    value: function fillBuffer_() {\n      if (this.sourceUpdater_.updating()) {\n        return;\n      }\n\n      if (!this.syncPoint_) {\n        this.syncPoint_ = this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_());\n      }\n\n      // see if we need to begin loading immediately\n      var segmentInfo = this.checkBuffer_(this.buffered_(), this.playlist_, this.mediaIndex, this.hasPlayed_(), this.currentTime_(), this.syncPoint_);\n\n      if (!segmentInfo) {\n        return;\n      }\n\n      var isEndOfStream = detectEndOfStream(this.playlist_, this.mediaSource_, segmentInfo.mediaIndex);\n\n      if (isEndOfStream) {\n        this.endOfStream();\n        return;\n      }\n\n      if (segmentInfo.mediaIndex === this.playlist_.segments.length - 1 && this.mediaSource_.readyState === 'ended' && !this.seeking_()) {\n        return;\n      }\n\n      // We will need to change timestampOffset of the sourceBuffer if either of\n      // the following conditions are true:\n      // - The segment.timeline !== this.currentTimeline\n      //   (we are crossing a discontinuity somehow)\n      // - The \"timestampOffset\" for the start of this segment is less than\n      //   the currently set timestampOffset\n      if (segmentInfo.timeline !== this.currentTimeline_ || segmentInfo.startOfSegment !== null && segmentInfo.startOfSegment < this.sourceUpdater_.timestampOffset()) {\n        this.syncController_.reset();\n        segmentInfo.timestampOffset = segmentInfo.startOfSegment;\n      }\n\n      this.loadSegment_(segmentInfo);\n    }\n\n    /**\n     * Determines what segment request should be made, given current playback\n     * state.\n     *\n     * @param {TimeRanges} buffered - the state of the buffer\n     * @param {Object} playlist - the playlist object to fetch segments from\n     * @param {Number} mediaIndex - the previous mediaIndex fetched or null\n     * @param {Boolean} hasPlayed - a flag indicating whether we have played or not\n     * @param {Number} currentTime - the playback position in seconds\n     * @param {Object} syncPoint - a segment info object that describes the\n     * @returns {Object} a segment request object that describes the segment to load\n     */\n  }, {\n    key: 'checkBuffer_',\n    value: function checkBuffer_(buffered, playlist, mediaIndex, hasPlayed, currentTime, syncPoint) {\n      var lastBufferedEnd = 0;\n      var startOfSegment = undefined;\n\n      if (buffered.length) {\n        lastBufferedEnd = buffered.end(buffered.length - 1);\n      }\n\n      var bufferedTime = Math.max(0, lastBufferedEnd - currentTime);\n\n      if (!playlist.segments.length) {\n        return null;\n      }\n\n      // if there is plenty of content buffered, and the video has\n      // been played before relax for awhile\n      if (bufferedTime >= this.goalBufferLength_()) {\n        return null;\n      }\n\n      // if the video has not yet played once, and we already have\n      // one segment downloaded do nothing\n      if (!hasPlayed && bufferedTime >= 1) {\n        return null;\n      }\n\n      this.logger_('checkBuffer_', 'mediaIndex:', mediaIndex, 'hasPlayed:', hasPlayed, 'currentTime:', currentTime, 'syncPoint:', syncPoint, 'fetchAtBuffer:', this.fetchAtBuffer_, 'bufferedTime:', bufferedTime);\n\n      // When the syncPoint is null, there is no way of determining a good\n      // conservative segment index to fetch from\n      // The best thing to do here is to get the kind of sync-point data by\n      // making a request\n      if (syncPoint === null) {\n        mediaIndex = this.getSyncSegmentCandidate_(playlist);\n        this.logger_('getSync', 'mediaIndex:', mediaIndex);\n        return this.generateSegmentInfo_(playlist, mediaIndex, null, true);\n      }\n\n      // Under normal playback conditions fetching is a simple walk forward\n      if (mediaIndex !== null) {\n        this.logger_('walkForward', 'mediaIndex:', mediaIndex + 1);\n        var segment = playlist.segments[mediaIndex];\n\n        if (segment && segment.end) {\n          startOfSegment = segment.end;\n        } else {\n          startOfSegment = lastBufferedEnd;\n        }\n        return this.generateSegmentInfo_(playlist, mediaIndex + 1, startOfSegment, false);\n      }\n\n      // There is a sync-point but the lack of a mediaIndex indicates that\n      // we need to make a good conservative guess about which segment to\n      // fetch\n      if (this.fetchAtBuffer_) {\n        // Find the segment containing the end of the buffer\n        var mediaSourceInfo = _playlist2['default'].getMediaInfoForTime(playlist, lastBufferedEnd, syncPoint.segmentIndex, syncPoint.time);\n\n        mediaIndex = mediaSourceInfo.mediaIndex;\n        startOfSegment = mediaSourceInfo.startTime;\n      } else {\n        // Find the segment containing currentTime\n        var mediaSourceInfo = _playlist2['default'].getMediaInfoForTime(playlist, currentTime, syncPoint.segmentIndex, syncPoint.time);\n\n        mediaIndex = mediaSourceInfo.mediaIndex;\n        startOfSegment = mediaSourceInfo.startTime;\n      }\n      this.logger_('getMediaIndexForTime', 'mediaIndex:', mediaIndex, 'startOfSegment:', startOfSegment);\n\n      return this.generateSegmentInfo_(playlist, mediaIndex, startOfSegment, false);\n    }\n\n    /**\n     * The segment loader has no recourse except to fetch a segment in the\n     * current playlist and use the internal timestamps in that segment to\n     * generate a syncPoint. This function returns a good candidate index\n     * for that process.\n     *\n     * @param {Object} playlist - the playlist object to look for a\n     * @returns {Number} An index of a segment from the playlist to load\n     */\n  }, {\n    key: 'getSyncSegmentCandidate_',\n    value: function getSyncSegmentCandidate_(playlist) {\n      var _this2 = this;\n\n      if (this.currentTimeline_ === -1) {\n        return 0;\n      }\n\n      var segmentIndexArray = playlist.segments.map(function (s, i) {\n        return {\n          timeline: s.timeline,\n          segmentIndex: i\n        };\n      }).filter(function (s) {\n        return s.timeline === _this2.currentTimeline_;\n      });\n\n      if (segmentIndexArray.length) {\n        return segmentIndexArray[Math.min(segmentIndexArray.length - 1, 1)].segmentIndex;\n      }\n\n      return Math.max(playlist.segments.length - 1, 0);\n    }\n  }, {\n    key: 'generateSegmentInfo_',\n    value: function generateSegmentInfo_(playlist, mediaIndex, startOfSegment, isSyncRequest) {\n      if (mediaIndex < 0 || mediaIndex >= playlist.segments.length) {\n        return null;\n      }\n\n      var segment = playlist.segments[mediaIndex];\n\n      return {\n        requestId: 'segment-loader-' + Math.random(),\n        // resolve the segment URL relative to the playlist\n        uri: segment.resolvedUri,\n        // the segment's mediaIndex at the time it was requested\n        mediaIndex: mediaIndex,\n        // whether or not to update the SegmentLoader's state with this\n        // segment's mediaIndex\n        isSyncRequest: isSyncRequest,\n        startOfSegment: startOfSegment,\n        // the segment's playlist\n        playlist: playlist,\n        // unencrypted bytes of the segment\n        bytes: null,\n        // when a key is defined for this segment, the encrypted bytes\n        encryptedBytes: null,\n        // The target timestampOffset for this segment when we append it\n        // to the source buffer\n        timestampOffset: null,\n        // The timeline that the segment is in\n        timeline: segment.timeline,\n        // The expected duration of the segment in seconds\n        duration: segment.duration,\n        // retain the segment in case the playlist updates while doing an async process\n        segment: segment\n      };\n    }\n\n    /**\n     * Determines if the network has enough bandwidth to complete the current segment\n     * request in a timely manner. If not, the request will be aborted early and bandwidth\n     * updated to trigger a playlist switch.\n     *\n     * @param {Object} stats\n     *        Object containing stats about the request timing and size\n     * @return {Boolean} True if the request was aborted, false otherwise\n     * @private\n     */\n  }, {\n    key: 'abortRequestEarly_',\n    value: function abortRequestEarly_(stats) {\n      if (this.hls_.tech_.paused() ||\n      // Don't abort if the current playlist is on the lowestEnabledRendition\n      // TODO: Replace using timeout with a boolean indicating whether this playlist is\n      //       the lowestEnabledRendition.\n      !this.xhrOptions_.timeout ||\n      // Don't abort if we have no bandwidth information to estimate segment sizes\n      !this.playlist_.attributes.BANDWIDTH) {\n        return false;\n      }\n\n      // Wait at least 1 second since the first byte of data has been received before\n      // using the calculated bandwidth from the progress event to allow the bitrate\n      // to stabilize\n      if (Date.now() - (stats.firstBytesReceivedAt || Date.now()) < 1000) {\n        return false;\n      }\n\n      var currentTime = this.currentTime_();\n      var measuredBandwidth = stats.bandwidth;\n      var segmentDuration = this.pendingSegment_.duration;\n\n      var requestTimeRemaining = _playlist2['default'].estimateSegmentRequestTime(segmentDuration, measuredBandwidth, this.playlist_, stats.bytesReceived);\n\n      // Subtract 1 from the timeUntilRebuffer so we still consider an early abort\n      // if we are only left with less than 1 second when the request completes.\n      // A negative timeUntilRebuffering indicates we are already rebuffering\n      var timeUntilRebuffer = (0, _ranges.timeUntilRebuffer)(this.buffered_(), currentTime, this.hls_.tech_.playbackRate()) - 1;\n\n      // Only consider aborting early if the estimated time to finish the download\n      // is larger than the estimated time until the player runs out of forward buffer\n      if (requestTimeRemaining <= timeUntilRebuffer) {\n        return false;\n      }\n\n      var switchCandidate = (0, _playlistSelectors.minRebufferMaxBandwidthSelector)({\n        master: this.hls_.playlists.master,\n        currentTime: currentTime,\n        bandwidth: measuredBandwidth,\n        duration: this.duration_(),\n        segmentDuration: segmentDuration,\n        timeUntilRebuffer: timeUntilRebuffer,\n        currentTimeline: this.currentTimeline_,\n        syncController: this.syncController_\n      });\n\n      if (!switchCandidate) {\n        return;\n      }\n\n      var rebufferingImpact = requestTimeRemaining - timeUntilRebuffer;\n\n      var timeSavedBySwitching = rebufferingImpact - switchCandidate.rebufferingImpact;\n\n      var minimumTimeSaving = 0.5;\n\n      // If we are already rebuffering, increase the amount of variance we add to the\n      // potential round trip time of the new request so that we are not too aggressive\n      // with switching to a playlist that might save us a fraction of a second.\n      if (timeUntilRebuffer <= _ranges.TIME_FUDGE_FACTOR) {\n        minimumTimeSaving = 1;\n      }\n\n      if (!switchCandidate.playlist || switchCandidate.playlist.uri === this.playlist_.uri || timeSavedBySwitching < minimumTimeSaving) {\n        return false;\n      }\n\n      // set the bandwidth to that of the desired playlist being sure to scale by\n      // BANDWIDTH_VARIANCE and add one so the playlist selector does not exclude it\n      // don't trigger a bandwidthupdate as the bandwidth is artifial\n      this.bandwidth = switchCandidate.playlist.attributes.BANDWIDTH * _config2['default'].BANDWIDTH_VARIANCE + 1;\n      this.abort();\n      this.trigger('earlyabort');\n      return true;\n    }\n\n    /**\n     * XHR `progress` event handler\n     *\n     * @param {Event}\n     *        The XHR `progress` event\n     * @param {Object} simpleSegment\n     *        A simplified segment object copy\n     * @private\n     */\n  }, {\n    key: 'handleProgress_',\n    value: function handleProgress_(event, simpleSegment) {\n      if (!this.pendingSegment_ || simpleSegment.requestId !== this.pendingSegment_.requestId || this.abortRequestEarly_(simpleSegment.stats)) {\n        return;\n      }\n\n      this.trigger('progress');\n    }\n\n    /**\n     * load a specific segment from a request into the buffer\n     *\n     * @private\n     */\n  }, {\n    key: 'loadSegment_',\n    value: function loadSegment_(segmentInfo) {\n      this.state = 'WAITING';\n      this.pendingSegment_ = segmentInfo;\n      this.trimBackBuffer_(segmentInfo);\n\n      segmentInfo.abortRequests = (0, _mediaSegmentRequest.mediaSegmentRequest)(this.hls_.xhr, this.xhrOptions_, this.decrypter_, this.createSimplifiedSegmentObj_(segmentInfo),\n      // progress callback\n      this.handleProgress_.bind(this), this.segmentRequestFinished_.bind(this));\n    }\n\n    /**\n     * trim the back buffer so that we don't have too much data\n     * in the source buffer\n     *\n     * @private\n     *\n     * @param {Object} segmentInfo - the current segment\n     */\n  }, {\n    key: 'trimBackBuffer_',\n    value: function trimBackBuffer_(segmentInfo) {\n      var removeToTime = safeBackBufferTrimTime(this.seekable_(), this.currentTime_(), this.playlist_.targetDuration || 10);\n\n      // Chrome has a hard limit of 150MB of\n      // buffer and a very conservative \"garbage collector\"\n      // We manually clear out the old buffer to ensure\n      // we don't trigger the QuotaExceeded error\n      // on the source buffer during subsequent appends\n\n      if (removeToTime > 0) {\n        this.remove(0, removeToTime);\n      }\n    }\n\n    /**\n     * created a simplified copy of the segment object with just the\n     * information necessary to perform the XHR and decryption\n     *\n     * @private\n     *\n     * @param {Object} segmentInfo - the current segment\n     * @returns {Object} a simplified segment object copy\n     */\n  }, {\n    key: 'createSimplifiedSegmentObj_',\n    value: function createSimplifiedSegmentObj_(segmentInfo) {\n      var segment = segmentInfo.segment;\n      var simpleSegment = {\n        resolvedUri: segment.resolvedUri,\n        byterange: segment.byterange,\n        requestId: segmentInfo.requestId\n      };\n\n      if (segment.key) {\n        // if the media sequence is greater than 2^32, the IV will be incorrect\n        // assuming 10s segments, that would be about 1300 years\n        var iv = segment.key.iv || new Uint32Array([0, 0, 0, segmentInfo.mediaIndex + segmentInfo.playlist.mediaSequence]);\n\n        simpleSegment.key = {\n          resolvedUri: segment.key.resolvedUri,\n          iv: iv\n        };\n      }\n\n      if (segment.map) {\n        simpleSegment.map = this.initSegment(segment.map);\n      }\n\n      return simpleSegment;\n    }\n\n    /**\n     * Handle the callback from the segmentRequest function and set the\n     * associated SegmentLoader state and errors if necessary\n     *\n     * @private\n     */\n  }, {\n    key: 'segmentRequestFinished_',\n    value: function segmentRequestFinished_(error, simpleSegment) {\n      // every request counts as a media request even if it has been aborted\n      // or canceled due to a timeout\n      this.mediaRequests += 1;\n\n      if (simpleSegment.stats) {\n        this.mediaBytesTransferred += simpleSegment.stats.bytesReceived;\n        this.mediaTransferDuration += simpleSegment.stats.roundTripTime;\n      }\n\n      // The request was aborted and the SegmentLoader has already been reset\n      if (!this.pendingSegment_) {\n        this.mediaRequestsAborted += 1;\n        return;\n      }\n\n      // the request was aborted and the SegmentLoader has already started\n      // another request. this can happen when the timeout for an aborted\n      // request triggers due to a limitation in the XHR library\n      // do not count this as any sort of request or we risk double-counting\n      if (simpleSegment.requestId !== this.pendingSegment_.requestId) {\n        return;\n      }\n\n      // an error occurred from the active pendingSegment_ so reset everything\n      if (error) {\n        this.pendingSegment_ = null;\n        this.state = 'READY';\n\n        // the requests were aborted just record the aborted stat and exit\n        // this is not a true error condition and nothing corrective needs\n        // to be done\n        if (error.code === _mediaSegmentRequest.REQUEST_ERRORS.ABORTED) {\n          this.mediaRequestsAborted += 1;\n          return;\n        }\n\n        this.pause();\n\n        // the error is really just that at least one of the requests timed-out\n        // set the bandwidth to a very low value and trigger an ABR switch to\n        // take emergency action\n        if (error.code === _mediaSegmentRequest.REQUEST_ERRORS.TIMEOUT) {\n          this.mediaRequestsTimedout += 1;\n          this.bandwidth = 1;\n          this.roundTrip = NaN;\n          this.trigger('bandwidthupdate');\n          return;\n        }\n\n        // if control-flow has arrived here, then the error is real\n        // emit an error event to blacklist the current playlist\n        this.mediaRequestsErrored += 1;\n        this.error(error);\n        this.trigger('error');\n        return;\n      }\n\n      // the response was a success so set any bandwidth stats the request\n      // generated for ABR purposes\n      this.bandwidth = simpleSegment.stats.bandwidth;\n      this.roundTrip = simpleSegment.stats.roundTripTime;\n\n      // if this request included an initialization segment, save that data\n      // to the initSegment cache\n      if (simpleSegment.map) {\n        simpleSegment.map = this.initSegment(simpleSegment.map, true);\n      }\n\n      this.processSegmentResponse_(simpleSegment);\n    }\n\n    /**\n     * Move any important data from the simplified segment object\n     * back to the real segment object for future phases\n     *\n     * @private\n     */\n  }, {\n    key: 'processSegmentResponse_',\n    value: function processSegmentResponse_(simpleSegment) {\n      var segmentInfo = this.pendingSegment_;\n\n      segmentInfo.bytes = simpleSegment.bytes;\n      if (simpleSegment.map) {\n        segmentInfo.segment.map.bytes = simpleSegment.map.bytes;\n      }\n\n      segmentInfo.endOfAllRequests = simpleSegment.endOfAllRequests;\n      this.handleSegment_();\n    }\n\n    /**\n     * append a decrypted segement to the SourceBuffer through a SourceUpdater\n     *\n     * @private\n     */\n  }, {\n    key: 'handleSegment_',\n    value: function handleSegment_() {\n      var _this3 = this;\n\n      if (!this.pendingSegment_) {\n        this.state = 'READY';\n        return;\n      }\n\n      var segmentInfo = this.pendingSegment_;\n      var segment = segmentInfo.segment;\n      var timingInfo = this.syncController_.probeSegmentInfo(segmentInfo);\n\n      // When we have our first timing info, determine what media types this loader is\n      // dealing with. Although we're maintaining extra state, it helps to preserve the\n      // separation of segment loader from the actual source buffers.\n      if (typeof this.startingMedia_ === 'undefined' && timingInfo && (\n      // Guard against cases where we're not getting timing info at all until we are\n      // certain that all streams will provide it.\n      timingInfo.containsAudio || timingInfo.containsVideo)) {\n        this.startingMedia_ = {\n          containsAudio: timingInfo.containsAudio,\n          containsVideo: timingInfo.containsVideo\n        };\n      }\n\n      var illegalMediaSwitchError = illegalMediaSwitch(this.loaderType_, this.startingMedia_, timingInfo);\n\n      if (illegalMediaSwitchError) {\n        this.error({\n          message: illegalMediaSwitchError,\n          blacklistDuration: Infinity\n        });\n        this.trigger('error');\n        return;\n      }\n\n      if (segmentInfo.isSyncRequest) {\n        this.trigger('syncinfoupdate');\n        this.pendingSegment_ = null;\n        this.state = 'READY';\n        return;\n      }\n\n      if (segmentInfo.timestampOffset !== null && segmentInfo.timestampOffset !== this.sourceUpdater_.timestampOffset()) {\n        this.sourceUpdater_.timestampOffset(segmentInfo.timestampOffset);\n        // fired when a timestamp offset is set in HLS (can also identify discontinuities)\n        this.trigger('timestampoffset');\n      }\n\n      var timelineMapping = this.syncController_.mappingForTimeline(segmentInfo.timeline);\n\n      if (timelineMapping !== null) {\n        this.trigger({\n          type: 'segmenttimemapping',\n          mapping: timelineMapping\n        });\n      }\n\n      this.state = 'APPENDING';\n\n      // if the media initialization segment is changing, append it\n      // before the content segment\n      if (segment.map) {\n        (function () {\n          var initId = (0, _binUtils.initSegmentId)(segment.map);\n\n          if (!_this3.activeInitSegmentId_ || _this3.activeInitSegmentId_ !== initId) {\n            var initSegment = _this3.initSegment(segment.map);\n\n            _this3.sourceUpdater_.appendBuffer(initSegment.bytes, function () {\n              _this3.activeInitSegmentId_ = initId;\n            });\n          }\n        })();\n      }\n\n      segmentInfo.byteLength = segmentInfo.bytes.byteLength;\n      if (typeof segment.start === 'number' && typeof segment.end === 'number') {\n        this.mediaSecondsLoaded += segment.end - segment.start;\n      } else {\n        this.mediaSecondsLoaded += segment.duration;\n      }\n\n      this.sourceUpdater_.appendBuffer(segmentInfo.bytes, this.handleUpdateEnd_.bind(this));\n    }\n\n    /**\n     * callback to run when appendBuffer is finished. detects if we are\n     * in a good state to do things with the data we got, or if we need\n     * to wait for more\n     *\n     * @private\n     */\n  }, {\n    key: 'handleUpdateEnd_',\n    value: function handleUpdateEnd_() {\n      this.logger_('handleUpdateEnd_', 'segmentInfo:', this.pendingSegment_);\n\n      if (!this.pendingSegment_) {\n        this.state = 'READY';\n        if (!this.paused()) {\n          this.monitorBuffer_();\n        }\n        return;\n      }\n\n      var segmentInfo = this.pendingSegment_;\n      var segment = segmentInfo.segment;\n      var isWalkingForward = this.mediaIndex !== null;\n\n      this.pendingSegment_ = null;\n      this.recordThroughput_(segmentInfo);\n      this.addSegmentMetadataCue_(segmentInfo);\n\n      this.state = 'READY';\n\n      this.mediaIndex = segmentInfo.mediaIndex;\n      this.fetchAtBuffer_ = true;\n      this.currentTimeline_ = segmentInfo.timeline;\n\n      // We must update the syncinfo to recalculate the seekable range before\n      // the following conditional otherwise it may consider this a bad \"guess\"\n      // and attempt to resync when the post-update seekable window and live\n      // point would mean that this was the perfect segment to fetch\n      this.trigger('syncinfoupdate');\n\n      // If we previously appended a segment that ends more than 3 targetDurations before\n      // the currentTime_ that means that our conservative guess was too conservative.\n      // In that case, reset the loader state so that we try to use any information gained\n      // from the previous request to create a new, more accurate, sync-point.\n      if (segment.end && this.currentTime_() - segment.end > segmentInfo.playlist.targetDuration * 3) {\n        this.resetEverything();\n        return;\n      }\n\n      // Don't do a rendition switch unless we have enough time to get a sync segment\n      // and conservatively guess\n      if (isWalkingForward) {\n        this.trigger('bandwidthupdate');\n      }\n      this.trigger('progress');\n\n      // any time an update finishes and the last segment is in the\n      // buffer, end the stream. this ensures the \"ended\" event will\n      // fire if playback reaches that point.\n      var isEndOfStream = detectEndOfStream(segmentInfo.playlist, this.mediaSource_, segmentInfo.mediaIndex + 1);\n\n      if (isEndOfStream) {\n        this.endOfStream();\n      }\n\n      if (!this.paused()) {\n        this.monitorBuffer_();\n      }\n    }\n\n    /**\n     * Records the current throughput of the decrypt, transmux, and append\n     * portion of the semgment pipeline. `throughput.rate` is a the cumulative\n     * moving average of the throughput. `throughput.count` is the number of\n     * data points in the average.\n     *\n     * @private\n     * @param {Object} segmentInfo the object returned by loadSegment\n     */\n  }, {\n    key: 'recordThroughput_',\n    value: function recordThroughput_(segmentInfo) {\n      var rate = this.throughput.rate;\n      // Add one to the time to ensure that we don't accidentally attempt to divide\n      // by zero in the case where the throughput is ridiculously high\n      var segmentProcessingTime = Date.now() - segmentInfo.endOfAllRequests + 1;\n      // Multiply by 8000 to convert from bytes/millisecond to bits/second\n      var segmentProcessingThroughput = Math.floor(segmentInfo.byteLength / segmentProcessingTime * 8 * 1000);\n\n      // This is just a cumulative moving average calculation:\n      //   newAvg = oldAvg + (sample - oldAvg) / (sampleCount + 1)\n      this.throughput.rate += (segmentProcessingThroughput - rate) / ++this.throughput.count;\n    }\n\n    /**\n     * A debugging logger noop that is set to console.log only if debugging\n     * is enabled globally\n     *\n     * @private\n     */\n  }, {\n    key: 'logger_',\n    value: function logger_() {}\n\n    /**\n     * Adds a cue to the segment-metadata track with some metadata information about the\n     * segment\n     *\n     * @private\n     * @param {Object} segmentInfo\n     *        the object returned by loadSegment\n     * @method addSegmentMetadataCue_\n     */\n  }, {\n    key: 'addSegmentMetadataCue_',\n    value: function addSegmentMetadataCue_(segmentInfo) {\n      if (!this.segmentMetadataTrack_) {\n        return;\n      }\n\n      var segment = segmentInfo.segment;\n      var start = segment.start;\n      var end = segment.end;\n\n      // Do not try adding the cue if the start and end times are invalid.\n      if (!finite(start) || !finite(end)) {\n        return;\n      }\n\n      (0, _videojsContribMediaSourcesEs5RemoveCuesFromTrackJs2['default'])(start, end, this.segmentMetadataTrack_);\n\n      var Cue = _globalWindow2['default'].WebKitDataCue || _globalWindow2['default'].VTTCue;\n      var value = {\n        bandwidth: segmentInfo.playlist.attributes.BANDWIDTH,\n        resolution: segmentInfo.playlist.attributes.RESOLUTION,\n        codecs: segmentInfo.playlist.attributes.CODECS,\n        byteLength: segmentInfo.byteLength,\n        uri: segmentInfo.uri,\n        timeline: segmentInfo.timeline,\n        playlist: segmentInfo.playlist.uri,\n        start: start,\n        end: end\n      };\n      var data = JSON.stringify(value);\n      var cue = new Cue(start, end, data);\n\n      // Attach the metadata to the value property of the cue to keep consistency between\n      // the differences of WebKitDataCue in safari and VTTCue in other browsers\n      cue.value = value;\n\n      this.segmentMetadataTrack_.addCue(cue);\n    }\n  }]);\n\n  return SegmentLoader;\n})(_videoJs2['default'].EventTarget);\n\nexports['default'] = SegmentLoader;","/**\n * @file decrypter.js\n *\n * An asynchronous implementation of AES-128 CBC decryption with\n * PKCS#7 padding.\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _aes = require('./aes');\n\nvar _aes2 = _interopRequireDefault(_aes);\n\nvar _asyncStream = require('./async-stream');\n\nvar _asyncStream2 = _interopRequireDefault(_asyncStream);\n\nvar _pkcs7 = require('pkcs7');\n\n/**\n * Convert network-order (big-endian) bytes into their little-endian\n * representation.\n */\nvar ntoh = function ntoh(word) {\n  return word << 24 | (word & 0xff00) << 8 | (word & 0xff0000) >> 8 | word >>> 24;\n};\n\n/**\n * Decrypt bytes using AES-128 with CBC and PKCS#7 padding.\n *\n * @param {Uint8Array} encrypted the encrypted bytes\n * @param {Uint32Array} key the bytes of the decryption key\n * @param {Uint32Array} initVector the initialization vector (IV) to\n * use for the first round of CBC.\n * @return {Uint8Array} the decrypted bytes\n *\n * @see http://en.wikipedia.org/wiki/Advanced_Encryption_Standard\n * @see http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Cipher_Block_Chaining_.28CBC.29\n * @see https://tools.ietf.org/html/rfc2315\n */\nvar decrypt = function decrypt(encrypted, key, initVector) {\n  // word-level access to the encrypted bytes\n  var encrypted32 = new Int32Array(encrypted.buffer, encrypted.byteOffset, encrypted.byteLength >> 2);\n\n  var decipher = new _aes2['default'](Array.prototype.slice.call(key));\n\n  // byte and word-level access for the decrypted output\n  var decrypted = new Uint8Array(encrypted.byteLength);\n  var decrypted32 = new Int32Array(decrypted.buffer);\n\n  // temporary variables for working with the IV, encrypted, and\n  // decrypted data\n  var init0 = undefined;\n  var init1 = undefined;\n  var init2 = undefined;\n  var init3 = undefined;\n  var encrypted0 = undefined;\n  var encrypted1 = undefined;\n  var encrypted2 = undefined;\n  var encrypted3 = undefined;\n\n  // iteration variable\n  var wordIx = undefined;\n\n  // pull out the words of the IV to ensure we don't modify the\n  // passed-in reference and easier access\n  init0 = initVector[0];\n  init1 = initVector[1];\n  init2 = initVector[2];\n  init3 = initVector[3];\n\n  // decrypt four word sequences, applying cipher-block chaining (CBC)\n  // to each decrypted block\n  for (wordIx = 0; wordIx < encrypted32.length; wordIx += 4) {\n    // convert big-endian (network order) words into little-endian\n    // (javascript order)\n    encrypted0 = ntoh(encrypted32[wordIx]);\n    encrypted1 = ntoh(encrypted32[wordIx + 1]);\n    encrypted2 = ntoh(encrypted32[wordIx + 2]);\n    encrypted3 = ntoh(encrypted32[wordIx + 3]);\n\n    // decrypt the block\n    decipher.decrypt(encrypted0, encrypted1, encrypted2, encrypted3, decrypted32, wordIx);\n\n    // XOR with the IV, and restore network byte-order to obtain the\n    // plaintext\n    decrypted32[wordIx] = ntoh(decrypted32[wordIx] ^ init0);\n    decrypted32[wordIx + 1] = ntoh(decrypted32[wordIx + 1] ^ init1);\n    decrypted32[wordIx + 2] = ntoh(decrypted32[wordIx + 2] ^ init2);\n    decrypted32[wordIx + 3] = ntoh(decrypted32[wordIx + 3] ^ init3);\n\n    // setup the IV for the next round\n    init0 = encrypted0;\n    init1 = encrypted1;\n    init2 = encrypted2;\n    init3 = encrypted3;\n  }\n\n  return decrypted;\n};\n\nexports.decrypt = decrypt;\n/**\n * The `Decrypter` class that manages decryption of AES\n * data through `AsyncStream` objects and the `decrypt`\n * function\n *\n * @param {Uint8Array} encrypted the encrypted bytes\n * @param {Uint32Array} key the bytes of the decryption key\n * @param {Uint32Array} initVector the initialization vector (IV) to\n * @param {Function} done the function to run when done\n * @class Decrypter\n */\n\nvar Decrypter = (function () {\n  function Decrypter(encrypted, key, initVector, done) {\n    _classCallCheck(this, Decrypter);\n\n    var step = Decrypter.STEP;\n    var encrypted32 = new Int32Array(encrypted.buffer);\n    var decrypted = new Uint8Array(encrypted.byteLength);\n    var i = 0;\n\n    this.asyncStream_ = new _asyncStream2['default']();\n\n    // split up the encryption job and do the individual chunks asynchronously\n    this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), key, initVector, decrypted));\n    for (i = step; i < encrypted32.length; i += step) {\n      initVector = new Uint32Array([ntoh(encrypted32[i - 4]), ntoh(encrypted32[i - 3]), ntoh(encrypted32[i - 2]), ntoh(encrypted32[i - 1])]);\n      this.asyncStream_.push(this.decryptChunk_(encrypted32.subarray(i, i + step), key, initVector, decrypted));\n    }\n    // invoke the done() callback when everything is finished\n    this.asyncStream_.push(function () {\n      // remove pkcs#7 padding from the decrypted bytes\n      done(null, (0, _pkcs7.unpad)(decrypted));\n    });\n  }\n\n  /**\n   * a getter for step the maximum number of bytes to process at one time\n   *\n   * @return {Number} the value of step 32000\n   */\n\n  _createClass(Decrypter, [{\n    key: 'decryptChunk_',\n\n    /**\n     * @private\n     */\n    value: function decryptChunk_(encrypted, key, initVector, decrypted) {\n      return function () {\n        var bytes = decrypt(encrypted, key, initVector);\n\n        decrypted.set(bytes, encrypted.byteOffset);\n      };\n    }\n  }], [{\n    key: 'STEP',\n    get: function get() {\n      // 4 * 8000;\n      return 32000;\n    }\n  }]);\n\n  return Decrypter;\n})();\n\nexports.Decrypter = Decrypter;\nexports['default'] = {\n  Decrypter: Decrypter,\n  decrypt: decrypt\n};","/**\n * mux.js\n *\n * Copyright (c) 2015 Brightcove\n * All rights reserved.\n *\n * A stream-based mp2t to mp4 converter. This utility can be used to\n * deliver mp4s to a SourceBuffer on platforms that support native\n * Media Source Extensions.\n */\n'use strict';\n\nvar Stream = require('../utils/stream.js');\nvar mp4 = require('./mp4-generator.js');\nvar m2ts = require('../m2ts/m2ts.js');\nvar AdtsStream = require('../codecs/adts.js');\nvar H264Stream = require('../codecs/h264').H264Stream;\nvar AacStream = require('../aac');\nvar coneOfSilence = require('../data/silence');\nvar clock = require('../utils/clock');\n\n// constants\nvar AUDIO_PROPERTIES = [\n  'audioobjecttype',\n  'channelcount',\n  'samplerate',\n  'samplingfrequencyindex',\n  'samplesize'\n];\n\nvar VIDEO_PROPERTIES = [\n  'width',\n  'height',\n  'profileIdc',\n  'levelIdc',\n  'profileCompatibility'\n];\n\nvar ONE_SECOND_IN_TS = 90000; // 90kHz clock\n\n// object types\nvar VideoSegmentStream, AudioSegmentStream, Transmuxer, CoalesceStream;\n\n// Helper functions\nvar\n  createDefaultSample,\n  isLikelyAacData,\n  collectDtsInfo,\n  clearDtsInfo,\n  calculateTrackBaseMediaDecodeTime,\n  arrayEquals,\n  sumFrameByteLengths;\n\n/**\n * Default sample object\n * see ISO/IEC 14496-12:2012, section 8.6.4.3\n */\ncreateDefaultSample = function() {\n  return {\n    size: 0,\n    flags: {\n      isLeading: 0,\n      dependsOn: 1,\n      isDependedOn: 0,\n      hasRedundancy: 0,\n      degradationPriority: 0\n    }\n  };\n};\n\nisLikelyAacData = function(data) {\n  if ((data[0] === 'I'.charCodeAt(0)) &&\n      (data[1] === 'D'.charCodeAt(0)) &&\n      (data[2] === '3'.charCodeAt(0))) {\n    return true;\n  }\n  return false;\n};\n\n/**\n * Compare two arrays (even typed) for same-ness\n */\narrayEquals = function(a, b) {\n  var\n    i;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  // compare the value of each element in the array\n  for (i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * Sum the `byteLength` properties of the data in each AAC frame\n */\nsumFrameByteLengths = function(array) {\n  var\n    i,\n    currentObj,\n    sum = 0;\n\n  // sum the byteLength's all each nal unit in the frame\n  for (i = 0; i < array.length; i++) {\n    currentObj = array[i];\n    sum += currentObj.data.byteLength;\n  }\n\n  return sum;\n};\n\n/**\n * Constructs a single-track, ISO BMFF media segment from AAC data\n * events. The output of this stream can be fed to a SourceBuffer\n * configured with a suitable initialization segment.\n */\nAudioSegmentStream = function(track) {\n  var\n    adtsFrames = [],\n    sequenceNumber = 0,\n    earliestAllowedDts = 0,\n    audioAppendStartTs = 0,\n    videoBaseMediaDecodeTime = Infinity;\n\n  AudioSegmentStream.prototype.init.call(this);\n\n  this.push = function(data) {\n    collectDtsInfo(track, data);\n\n    if (track) {\n      AUDIO_PROPERTIES.forEach(function(prop) {\n        track[prop] = data[prop];\n      });\n    }\n\n    // buffer audio data until end() is called\n    adtsFrames.push(data);\n  };\n\n  this.setEarliestDts = function(earliestDts) {\n    earliestAllowedDts = earliestDts - track.timelineStartInfo.baseMediaDecodeTime;\n  };\n\n  this.setVideoBaseMediaDecodeTime = function(baseMediaDecodeTime) {\n    videoBaseMediaDecodeTime = baseMediaDecodeTime;\n  };\n\n  this.setAudioAppendStart = function(timestamp) {\n    audioAppendStartTs = timestamp;\n  };\n\n  this.flush = function() {\n    var\n      frames,\n      moof,\n      mdat,\n      boxes;\n\n    // return early if no audio data has been observed\n    if (adtsFrames.length === 0) {\n      this.trigger('done', 'AudioSegmentStream');\n      return;\n    }\n\n    frames = this.trimAdtsFramesByEarliestDts_(adtsFrames);\n    track.baseMediaDecodeTime = calculateTrackBaseMediaDecodeTime(track);\n\n    this.prefixWithSilence_(track, frames);\n\n    // we have to build the index from byte locations to\n    // samples (that is, adts frames) in the audio data\n    track.samples = this.generateSampleTable_(frames);\n\n    // concatenate the audio data to constuct the mdat\n    mdat = mp4.mdat(this.concatenateFrameData_(frames));\n\n    adtsFrames = [];\n\n    moof = mp4.moof(sequenceNumber, [track]);\n    boxes = new Uint8Array(moof.byteLength + mdat.byteLength);\n\n    // bump the sequence number for next time\n    sequenceNumber++;\n\n    boxes.set(moof);\n    boxes.set(mdat, moof.byteLength);\n\n    clearDtsInfo(track);\n\n    this.trigger('data', {track: track, boxes: boxes});\n    this.trigger('done', 'AudioSegmentStream');\n  };\n\n  // Possibly pad (prefix) the audio track with silence if appending this track\n  // would lead to the introduction of a gap in the audio buffer\n  this.prefixWithSilence_ = function(track, frames) {\n    var\n      baseMediaDecodeTimeTs,\n      frameDuration = 0,\n      audioGapDuration = 0,\n      audioFillFrameCount = 0,\n      audioFillDuration = 0,\n      silentFrame,\n      i;\n\n    if (!frames.length) {\n      return;\n    }\n\n    baseMediaDecodeTimeTs = clock.audioTsToVideoTs(track.baseMediaDecodeTime, track.samplerate);\n    // determine frame clock duration based on sample rate, round up to avoid overfills\n    frameDuration = Math.ceil(ONE_SECOND_IN_TS / (track.samplerate / 1024));\n\n    if (audioAppendStartTs && videoBaseMediaDecodeTime) {\n      // insert the shortest possible amount (audio gap or audio to video gap)\n      audioGapDuration =\n        baseMediaDecodeTimeTs - Math.max(audioAppendStartTs, videoBaseMediaDecodeTime);\n      // number of full frames in the audio gap\n      audioFillFrameCount = Math.floor(audioGapDuration / frameDuration);\n      audioFillDuration = audioFillFrameCount * frameDuration;\n    }\n\n    // don't attempt to fill gaps smaller than a single frame or larger\n    // than a half second\n    if (audioFillFrameCount < 1 || audioFillDuration > ONE_SECOND_IN_TS / 2) {\n      return;\n    }\n\n    silentFrame = coneOfSilence[track.samplerate];\n\n    if (!silentFrame) {\n      // we don't have a silent frame pregenerated for the sample rate, so use a frame\n      // from the content instead\n      silentFrame = frames[0].data;\n    }\n\n    for (i = 0; i < audioFillFrameCount; i++) {\n      frames.splice(i, 0, {\n        data: silentFrame\n      });\n    }\n\n    track.baseMediaDecodeTime -=\n      Math.floor(clock.videoTsToAudioTs(audioFillDuration, track.samplerate));\n  };\n\n  // If the audio segment extends before the earliest allowed dts\n  // value, remove AAC frames until starts at or after the earliest\n  // allowed DTS so that we don't end up with a negative baseMedia-\n  // DecodeTime for the audio track\n  this.trimAdtsFramesByEarliestDts_ = function(adtsFrames) {\n    if (track.minSegmentDts >= earliestAllowedDts) {\n      return adtsFrames;\n    }\n\n    // We will need to recalculate the earliest segment Dts\n    track.minSegmentDts = Infinity;\n\n    return adtsFrames.filter(function(currentFrame) {\n      // If this is an allowed frame, keep it and record it's Dts\n      if (currentFrame.dts >= earliestAllowedDts) {\n        track.minSegmentDts = Math.min(track.minSegmentDts, currentFrame.dts);\n        track.minSegmentPts = track.minSegmentDts;\n        return true;\n      }\n      // Otherwise, discard it\n      return false;\n    });\n  };\n\n  // generate the track's raw mdat data from an array of frames\n  this.generateSampleTable_ = function(frames) {\n    var\n      i,\n      currentFrame,\n      samples = [];\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n      samples.push({\n        size: currentFrame.data.byteLength,\n        duration: 1024 // For AAC audio, all samples contain 1024 samples\n      });\n    }\n    return samples;\n  };\n\n  // generate the track's sample table from an array of frames\n  this.concatenateFrameData_ = function(frames) {\n    var\n      i,\n      currentFrame,\n      dataOffset = 0,\n      data = new Uint8Array(sumFrameByteLengths(frames));\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n\n      data.set(currentFrame.data, dataOffset);\n      dataOffset += currentFrame.data.byteLength;\n    }\n    return data;\n  };\n};\n\nAudioSegmentStream.prototype = new Stream();\n\n/**\n * Constructs a single-track, ISO BMFF media segment from H264 data\n * events. The output of this stream can be fed to a SourceBuffer\n * configured with a suitable initialization segment.\n * @param track {object} track metadata configuration\n * @param options {object} transmuxer options object\n * @param options.alignGopsAtEnd {boolean} If true, start from the end of the\n *        gopsToAlignWith list when attempting to align gop pts\n */\nVideoSegmentStream = function(track, options) {\n  var\n    sequenceNumber = 0,\n    nalUnits = [],\n    gopsToAlignWith = [],\n    config,\n    pps;\n\n  options = options || {};\n\n  VideoSegmentStream.prototype.init.call(this);\n\n  delete track.minPTS;\n\n  this.gopCache_ = [];\n\n  this.push = function(nalUnit) {\n    collectDtsInfo(track, nalUnit);\n\n    // record the track config\n    if (nalUnit.nalUnitType === 'seq_parameter_set_rbsp' && !config) {\n      config = nalUnit.config;\n      track.sps = [nalUnit.data];\n\n      VIDEO_PROPERTIES.forEach(function(prop) {\n        track[prop] = config[prop];\n      }, this);\n    }\n\n    if (nalUnit.nalUnitType === 'pic_parameter_set_rbsp' &&\n        !pps) {\n      pps = nalUnit.data;\n      track.pps = [nalUnit.data];\n    }\n\n    // buffer video until flush() is called\n    nalUnits.push(nalUnit);\n  };\n\n  this.flush = function() {\n    var\n      frames,\n      gopForFusion,\n      gops,\n      moof,\n      mdat,\n      boxes;\n\n    // Throw away nalUnits at the start of the byte stream until\n    // we find the first AUD\n    while (nalUnits.length) {\n      if (nalUnits[0].nalUnitType === 'access_unit_delimiter_rbsp') {\n        break;\n      }\n      nalUnits.shift();\n    }\n\n    // Return early if no video data has been observed\n    if (nalUnits.length === 0) {\n      this.resetStream_();\n      this.trigger('done', 'VideoSegmentStream');\n      return;\n    }\n\n    // Organize the raw nal-units into arrays that represent\n    // higher-level constructs such as frames and gops\n    // (group-of-pictures)\n    frames = this.groupNalsIntoFrames_(nalUnits);\n    gops = this.groupFramesIntoGops_(frames);\n\n    // If the first frame of this fragment is not a keyframe we have\n    // a problem since MSE (on Chrome) requires a leading keyframe.\n    //\n    // We have two approaches to repairing this situation:\n    // 1) GOP-FUSION:\n    //    This is where we keep track of the GOPS (group-of-pictures)\n    //    from previous fragments and attempt to find one that we can\n    //    prepend to the current fragment in order to create a valid\n    //    fragment.\n    // 2) KEYFRAME-PULLING:\n    //    Here we search for the first keyframe in the fragment and\n    //    throw away all the frames between the start of the fragment\n    //    and that keyframe. We then extend the duration and pull the\n    //    PTS of the keyframe forward so that it covers the time range\n    //    of the frames that were disposed of.\n    //\n    // #1 is far prefereable over #2 which can cause \"stuttering\" but\n    // requires more things to be just right.\n    if (!gops[0][0].keyFrame) {\n      // Search for a gop for fusion from our gopCache\n      gopForFusion = this.getGopForFusion_(nalUnits[0], track);\n\n      if (gopForFusion) {\n        gops.unshift(gopForFusion);\n        // Adjust Gops' metadata to account for the inclusion of the\n        // new gop at the beginning\n        gops.byteLength += gopForFusion.byteLength;\n        gops.nalCount += gopForFusion.nalCount;\n        gops.pts = gopForFusion.pts;\n        gops.dts = gopForFusion.dts;\n        gops.duration += gopForFusion.duration;\n      } else {\n        // If we didn't find a candidate gop fall back to keyrame-pulling\n        gops = this.extendFirstKeyFrame_(gops);\n      }\n    }\n\n    // Trim gops to align with gopsToAlignWith\n    if (gopsToAlignWith.length) {\n      var alignedGops;\n\n      if (options.alignGopsAtEnd) {\n        alignedGops = this.alignGopsAtEnd_(gops);\n      } else {\n        alignedGops = this.alignGopsAtStart_(gops);\n      }\n\n      if (!alignedGops) {\n        // save all the nals in the last GOP into the gop cache\n        this.gopCache_.unshift({\n          gop: gops.pop(),\n          pps: track.pps,\n          sps: track.sps\n        });\n\n        // Keep a maximum of 6 GOPs in the cache\n        this.gopCache_.length = Math.min(6, this.gopCache_.length);\n\n        // Clear nalUnits\n        nalUnits = [];\n\n        // return early no gops can be aligned with desired gopsToAlignWith\n        this.resetStream_();\n        this.trigger('done', 'VideoSegmentStream');\n        return;\n      }\n\n      // Some gops were trimmed. clear dts info so minSegmentDts and pts are correct\n      // when recalculated before sending off to CoalesceStream\n      clearDtsInfo(track);\n\n      gops = alignedGops;\n    }\n\n    collectDtsInfo(track, gops);\n\n    // First, we have to build the index from byte locations to\n    // samples (that is, frames) in the video data\n    track.samples = this.generateSampleTable_(gops);\n\n    // Concatenate the video data and construct the mdat\n    mdat = mp4.mdat(this.concatenateNalData_(gops));\n\n    track.baseMediaDecodeTime = calculateTrackBaseMediaDecodeTime(track);\n\n    this.trigger('processedGopsInfo', gops.map(function(gop) {\n      return {\n        pts: gop.pts,\n        dts: gop.dts,\n        byteLength: gop.byteLength\n      };\n    }));\n\n    // save all the nals in the last GOP into the gop cache\n    this.gopCache_.unshift({\n      gop: gops.pop(),\n      pps: track.pps,\n      sps: track.sps\n    });\n\n    // Keep a maximum of 6 GOPs in the cache\n    this.gopCache_.length = Math.min(6, this.gopCache_.length);\n\n    // Clear nalUnits\n    nalUnits = [];\n\n    this.trigger('baseMediaDecodeTime', track.baseMediaDecodeTime);\n    this.trigger('timelineStartInfo', track.timelineStartInfo);\n\n    moof = mp4.moof(sequenceNumber, [track]);\n\n    // it would be great to allocate this array up front instead of\n    // throwing away hundreds of media segment fragments\n    boxes = new Uint8Array(moof.byteLength + mdat.byteLength);\n\n    // Bump the sequence number for next time\n    sequenceNumber++;\n\n    boxes.set(moof);\n    boxes.set(mdat, moof.byteLength);\n\n    this.trigger('data', {track: track, boxes: boxes});\n\n    this.resetStream_();\n\n    // Continue with the flush process now\n    this.trigger('done', 'VideoSegmentStream');\n  };\n\n  this.resetStream_ = function() {\n    clearDtsInfo(track);\n\n    // reset config and pps because they may differ across segments\n    // for instance, when we are rendition switching\n    config = undefined;\n    pps = undefined;\n  };\n\n  // Search for a candidate Gop for gop-fusion from the gop cache and\n  // return it or return null if no good candidate was found\n  this.getGopForFusion_ = function(nalUnit) {\n    var\n      halfSecond = 45000, // Half-a-second in a 90khz clock\n      allowableOverlap = 10000, // About 3 frames @ 30fps\n      nearestDistance = Infinity,\n      dtsDistance,\n      nearestGopObj,\n      currentGop,\n      currentGopObj,\n      i;\n\n    // Search for the GOP nearest to the beginning of this nal unit\n    for (i = 0; i < this.gopCache_.length; i++) {\n      currentGopObj = this.gopCache_[i];\n      currentGop = currentGopObj.gop;\n\n      // Reject Gops with different SPS or PPS\n      if (!(track.pps && arrayEquals(track.pps[0], currentGopObj.pps[0])) ||\n          !(track.sps && arrayEquals(track.sps[0], currentGopObj.sps[0]))) {\n        continue;\n      }\n\n      // Reject Gops that would require a negative baseMediaDecodeTime\n      if (currentGop.dts < track.timelineStartInfo.dts) {\n        continue;\n      }\n\n      // The distance between the end of the gop and the start of the nalUnit\n      dtsDistance = (nalUnit.dts - currentGop.dts) - currentGop.duration;\n\n      // Only consider GOPS that start before the nal unit and end within\n      // a half-second of the nal unit\n      if (dtsDistance >= -allowableOverlap &&\n          dtsDistance <= halfSecond) {\n\n        // Always use the closest GOP we found if there is more than\n        // one candidate\n        if (!nearestGopObj ||\n            nearestDistance > dtsDistance) {\n          nearestGopObj = currentGopObj;\n          nearestDistance = dtsDistance;\n        }\n      }\n    }\n\n    if (nearestGopObj) {\n      return nearestGopObj.gop;\n    }\n    return null;\n  };\n\n  this.extendFirstKeyFrame_ = function(gops) {\n    var currentGop;\n\n    if (!gops[0][0].keyFrame && gops.length > 1) {\n      // Remove the first GOP\n      currentGop = gops.shift();\n\n      gops.byteLength -=  currentGop.byteLength;\n      gops.nalCount -= currentGop.nalCount;\n\n      // Extend the first frame of what is now the\n      // first gop to cover the time period of the\n      // frames we just removed\n      gops[0][0].dts = currentGop.dts;\n      gops[0][0].pts = currentGop.pts;\n      gops[0][0].duration += currentGop.duration;\n    }\n\n    return gops;\n  };\n\n  // Convert an array of nal units into an array of frames with each frame being\n  // composed of the nal units that make up that frame\n  // Also keep track of cummulative data about the frame from the nal units such\n  // as the frame duration, starting pts, etc.\n  this.groupNalsIntoFrames_ = function(nalUnits) {\n    var\n      i,\n      currentNal,\n      currentFrame = [],\n      frames = [];\n\n    currentFrame.byteLength = 0;\n\n    for (i = 0; i < nalUnits.length; i++) {\n      currentNal = nalUnits[i];\n\n      // Split on 'aud'-type nal units\n      if (currentNal.nalUnitType === 'access_unit_delimiter_rbsp') {\n        // Since the very first nal unit is expected to be an AUD\n        // only push to the frames array when currentFrame is not empty\n        if (currentFrame.length) {\n          currentFrame.duration = currentNal.dts - currentFrame.dts;\n          frames.push(currentFrame);\n        }\n        currentFrame = [currentNal];\n        currentFrame.byteLength = currentNal.data.byteLength;\n        currentFrame.pts = currentNal.pts;\n        currentFrame.dts = currentNal.dts;\n      } else {\n        // Specifically flag key frames for ease of use later\n        if (currentNal.nalUnitType === 'slice_layer_without_partitioning_rbsp_idr') {\n          currentFrame.keyFrame = true;\n        }\n        currentFrame.duration = currentNal.dts - currentFrame.dts;\n        currentFrame.byteLength += currentNal.data.byteLength;\n        currentFrame.push(currentNal);\n      }\n    }\n\n    // For the last frame, use the duration of the previous frame if we\n    // have nothing better to go on\n    if (frames.length &&\n        (!currentFrame.duration ||\n         currentFrame.duration <= 0)) {\n      currentFrame.duration = frames[frames.length - 1].duration;\n    }\n\n    // Push the final frame\n    frames.push(currentFrame);\n    return frames;\n  };\n\n  // Convert an array of frames into an array of Gop with each Gop being composed\n  // of the frames that make up that Gop\n  // Also keep track of cummulative data about the Gop from the frames such as the\n  // Gop duration, starting pts, etc.\n  this.groupFramesIntoGops_ = function(frames) {\n    var\n      i,\n      currentFrame,\n      currentGop = [],\n      gops = [];\n\n    // We must pre-set some of the values on the Gop since we\n    // keep running totals of these values\n    currentGop.byteLength = 0;\n    currentGop.nalCount = 0;\n    currentGop.duration = 0;\n    currentGop.pts = frames[0].pts;\n    currentGop.dts = frames[0].dts;\n\n    // store some metadata about all the Gops\n    gops.byteLength = 0;\n    gops.nalCount = 0;\n    gops.duration = 0;\n    gops.pts = frames[0].pts;\n    gops.dts = frames[0].dts;\n\n    for (i = 0; i < frames.length; i++) {\n      currentFrame = frames[i];\n\n      if (currentFrame.keyFrame) {\n        // Since the very first frame is expected to be an keyframe\n        // only push to the gops array when currentGop is not empty\n        if (currentGop.length) {\n          gops.push(currentGop);\n          gops.byteLength += currentGop.byteLength;\n          gops.nalCount += currentGop.nalCount;\n          gops.duration += currentGop.duration;\n        }\n\n        currentGop = [currentFrame];\n        currentGop.nalCount = currentFrame.length;\n        currentGop.byteLength = currentFrame.byteLength;\n        currentGop.pts = currentFrame.pts;\n        currentGop.dts = currentFrame.dts;\n        currentGop.duration = currentFrame.duration;\n      } else {\n        currentGop.duration += currentFrame.duration;\n        currentGop.nalCount += currentFrame.length;\n        currentGop.byteLength += currentFrame.byteLength;\n        currentGop.push(currentFrame);\n      }\n    }\n\n    if (gops.length && currentGop.duration <= 0) {\n      currentGop.duration = gops[gops.length - 1].duration;\n    }\n    gops.byteLength += currentGop.byteLength;\n    gops.nalCount += currentGop.nalCount;\n    gops.duration += currentGop.duration;\n\n    // push the final Gop\n    gops.push(currentGop);\n    return gops;\n  };\n\n  // generate the track's sample table from an array of gops\n  this.generateSampleTable_ = function(gops, baseDataOffset) {\n    var\n      h, i,\n      sample,\n      currentGop,\n      currentFrame,\n      dataOffset = baseDataOffset || 0,\n      samples = [];\n\n    for (h = 0; h < gops.length; h++) {\n      currentGop = gops[h];\n\n      for (i = 0; i < currentGop.length; i++) {\n        currentFrame = currentGop[i];\n\n        sample = createDefaultSample();\n\n        sample.dataOffset = dataOffset;\n        sample.compositionTimeOffset = currentFrame.pts - currentFrame.dts;\n        sample.duration = currentFrame.duration;\n        sample.size = 4 * currentFrame.length; // Space for nal unit size\n        sample.size += currentFrame.byteLength;\n\n        if (currentFrame.keyFrame) {\n          sample.flags.dependsOn = 2;\n        }\n\n        dataOffset += sample.size;\n\n        samples.push(sample);\n      }\n    }\n    return samples;\n  };\n\n  // generate the track's raw mdat data from an array of gops\n  this.concatenateNalData_ = function(gops) {\n    var\n      h, i, j,\n      currentGop,\n      currentFrame,\n      currentNal,\n      dataOffset = 0,\n      nalsByteLength = gops.byteLength,\n      numberOfNals = gops.nalCount,\n      totalByteLength = nalsByteLength + 4 * numberOfNals,\n      data = new Uint8Array(totalByteLength),\n      view = new DataView(data.buffer);\n\n    // For each Gop..\n    for (h = 0; h < gops.length; h++) {\n      currentGop = gops[h];\n\n      // For each Frame..\n      for (i = 0; i < currentGop.length; i++) {\n        currentFrame = currentGop[i];\n\n        // For each NAL..\n        for (j = 0; j < currentFrame.length; j++) {\n          currentNal = currentFrame[j];\n\n          view.setUint32(dataOffset, currentNal.data.byteLength);\n          dataOffset += 4;\n          data.set(currentNal.data, dataOffset);\n          dataOffset += currentNal.data.byteLength;\n        }\n      }\n    }\n    return data;\n  };\n\n  // trim gop list to the first gop found that has a matching pts with a gop in the list\n  // of gopsToAlignWith starting from the START of the list\n  this.alignGopsAtStart_ = function(gops) {\n    var alignIndex, gopIndex, align, gop, byteLength, nalCount, duration, alignedGops;\n\n    byteLength = gops.byteLength;\n    nalCount = gops.nalCount;\n    duration = gops.duration;\n    alignIndex = gopIndex = 0;\n\n    while (alignIndex < gopsToAlignWith.length && gopIndex < gops.length) {\n      align = gopsToAlignWith[alignIndex];\n      gop = gops[gopIndex];\n\n      if (align.pts === gop.pts) {\n        break;\n      }\n\n      if (gop.pts > align.pts) {\n        // this current gop starts after the current gop we want to align on, so increment\n        // align index\n        alignIndex++;\n        continue;\n      }\n\n      // current gop starts before the current gop we want to align on. so increment gop\n      // index\n      gopIndex++;\n      byteLength -= gop.byteLength;\n      nalCount -= gop.nalCount;\n      duration -= gop.duration;\n    }\n\n    if (gopIndex === 0) {\n      // no gops to trim\n      return gops;\n    }\n\n    if (gopIndex === gops.length) {\n      // all gops trimmed, skip appending all gops\n      return null;\n    }\n\n    alignedGops = gops.slice(gopIndex);\n    alignedGops.byteLength = byteLength;\n    alignedGops.duration = duration;\n    alignedGops.nalCount = nalCount;\n    alignedGops.pts = alignedGops[0].pts;\n    alignedGops.dts = alignedGops[0].dts;\n\n    return alignedGops;\n  };\n\n  // trim gop list to the first gop found that has a matching pts with a gop in the list\n  // of gopsToAlignWith starting from the END of the list\n  this.alignGopsAtEnd_ = function(gops) {\n    var alignIndex, gopIndex, align, gop, alignEndIndex, matchFound;\n\n    alignIndex = gopsToAlignWith.length - 1;\n    gopIndex = gops.length - 1;\n    alignEndIndex = null;\n    matchFound = false;\n\n    while (alignIndex >= 0 && gopIndex >= 0) {\n      align = gopsToAlignWith[alignIndex];\n      gop = gops[gopIndex];\n\n      if (align.pts === gop.pts) {\n        matchFound = true;\n        break;\n      }\n\n      if (align.pts > gop.pts) {\n        alignIndex--;\n        continue;\n      }\n\n      if (alignIndex === gopsToAlignWith.length - 1) {\n        // gop.pts is greater than the last alignment candidate. If no match is found\n        // by the end of this loop, we still want to append gops that come after this\n        // point\n        alignEndIndex = gopIndex;\n      }\n\n      gopIndex--;\n    }\n\n    if (!matchFound && alignEndIndex === null) {\n      return null;\n    }\n\n    var trimIndex;\n\n    if (matchFound) {\n      trimIndex = gopIndex;\n    } else {\n      trimIndex = alignEndIndex;\n    }\n\n    if (trimIndex === 0) {\n      return gops;\n    }\n\n    var alignedGops = gops.slice(trimIndex);\n    var metadata = alignedGops.reduce(function(total, gop) {\n      total.byteLength += gop.byteLength;\n      total.duration += gop.duration;\n      total.nalCount += gop.nalCount;\n      return total;\n    }, { byteLength: 0, duration: 0, nalCount: 0 });\n\n    alignedGops.byteLength = metadata.byteLength;\n    alignedGops.duration = metadata.duration;\n    alignedGops.nalCount = metadata.nalCount;\n    alignedGops.pts = alignedGops[0].pts;\n    alignedGops.dts = alignedGops[0].dts;\n\n    return alignedGops;\n  };\n\n  this.alignGopsWith = function(newGopsToAlignWith) {\n    gopsToAlignWith = newGopsToAlignWith;\n  };\n};\n\nVideoSegmentStream.prototype = new Stream();\n\n/**\n * Store information about the start and end of the track and the\n * duration for each frame/sample we process in order to calculate\n * the baseMediaDecodeTime\n */\ncollectDtsInfo = function(track, data) {\n  if (typeof data.pts === 'number') {\n    if (track.timelineStartInfo.pts === undefined) {\n      track.timelineStartInfo.pts = data.pts;\n    }\n\n    if (track.minSegmentPts === undefined) {\n      track.minSegmentPts = data.pts;\n    } else {\n      track.minSegmentPts = Math.min(track.minSegmentPts, data.pts);\n    }\n\n    if (track.maxSegmentPts === undefined) {\n      track.maxSegmentPts = data.pts;\n    } else {\n      track.maxSegmentPts = Math.max(track.maxSegmentPts, data.pts);\n    }\n  }\n\n  if (typeof data.dts === 'number') {\n    if (track.timelineStartInfo.dts === undefined) {\n      track.timelineStartInfo.dts = data.dts;\n    }\n\n    if (track.minSegmentDts === undefined) {\n      track.minSegmentDts = data.dts;\n    } else {\n      track.minSegmentDts = Math.min(track.minSegmentDts, data.dts);\n    }\n\n    if (track.maxSegmentDts === undefined) {\n      track.maxSegmentDts = data.dts;\n    } else {\n      track.maxSegmentDts = Math.max(track.maxSegmentDts, data.dts);\n    }\n  }\n};\n\n/**\n * Clear values used to calculate the baseMediaDecodeTime between\n * tracks\n */\nclearDtsInfo = function(track) {\n  delete track.minSegmentDts;\n  delete track.maxSegmentDts;\n  delete track.minSegmentPts;\n  delete track.maxSegmentPts;\n};\n\n/**\n * Calculate the track's baseMediaDecodeTime based on the earliest\n * DTS the transmuxer has ever seen and the minimum DTS for the\n * current track\n */\ncalculateTrackBaseMediaDecodeTime = function(track) {\n  var\n    baseMediaDecodeTime,\n    scale,\n    // Calculate the distance, in time, that this segment starts from the start\n    // of the timeline (earliest time seen since the transmuxer initialized)\n    timeSinceStartOfTimeline = track.minSegmentDts - track.timelineStartInfo.dts;\n\n  // track.timelineStartInfo.baseMediaDecodeTime is the location, in time, where\n  // we want the start of the first segment to be placed\n  baseMediaDecodeTime = track.timelineStartInfo.baseMediaDecodeTime;\n\n  // Add to that the distance this segment is from the very first\n  baseMediaDecodeTime += timeSinceStartOfTimeline;\n\n  // baseMediaDecodeTime must not become negative\n  baseMediaDecodeTime = Math.max(0, baseMediaDecodeTime);\n\n  if (track.type === 'audio') {\n    // Audio has a different clock equal to the sampling_rate so we need to\n    // scale the PTS values into the clock rate of the track\n    scale = track.samplerate / ONE_SECOND_IN_TS;\n    baseMediaDecodeTime *= scale;\n    baseMediaDecodeTime = Math.floor(baseMediaDecodeTime);\n  }\n\n  return baseMediaDecodeTime;\n};\n\n/**\n * A Stream that can combine multiple streams (ie. audio & video)\n * into a single output segment for MSE. Also supports audio-only\n * and video-only streams.\n */\nCoalesceStream = function(options, metadataStream) {\n  // Number of Tracks per output segment\n  // If greater than 1, we combine multiple\n  // tracks into a single segment\n  this.numberOfTracks = 0;\n  this.metadataStream = metadataStream;\n\n  if (typeof options.remux !== 'undefined') {\n    this.remuxTracks = !!options.remux;\n  } else {\n    this.remuxTracks = true;\n  }\n\n  this.pendingTracks = [];\n  this.videoTrack = null;\n  this.pendingBoxes = [];\n  this.pendingCaptions = [];\n  this.pendingMetadata = [];\n  this.pendingBytes = 0;\n  this.emittedTracks = 0;\n\n  CoalesceStream.prototype.init.call(this);\n\n  // Take output from multiple\n  this.push = function(output) {\n    // buffer incoming captions until the associated video segment\n    // finishes\n    if (output.text) {\n      return this.pendingCaptions.push(output);\n    }\n    // buffer incoming id3 tags until the final flush\n    if (output.frames) {\n      return this.pendingMetadata.push(output);\n    }\n\n    // Add this track to the list of pending tracks and store\n    // important information required for the construction of\n    // the final segment\n    this.pendingTracks.push(output.track);\n    this.pendingBoxes.push(output.boxes);\n    this.pendingBytes += output.boxes.byteLength;\n\n    if (output.track.type === 'video') {\n      this.videoTrack = output.track;\n    }\n    if (output.track.type === 'audio') {\n      this.audioTrack = output.track;\n    }\n  };\n};\n\nCoalesceStream.prototype = new Stream();\nCoalesceStream.prototype.flush = function(flushSource) {\n  var\n    offset = 0,\n    event = {\n      captions: [],\n      captionStreams: {},\n      metadata: [],\n      info: {}\n    },\n    caption,\n    id3,\n    initSegment,\n    timelineStartPts = 0,\n    i;\n\n  if (this.pendingTracks.length < this.numberOfTracks) {\n    if (flushSource !== 'VideoSegmentStream' &&\n        flushSource !== 'AudioSegmentStream') {\n      // Return because we haven't received a flush from a data-generating\n      // portion of the segment (meaning that we have only recieved meta-data\n      // or captions.)\n      return;\n    } else if (this.remuxTracks) {\n      // Return until we have enough tracks from the pipeline to remux (if we\n      // are remuxing audio and video into a single MP4)\n      return;\n    } else if (this.pendingTracks.length === 0) {\n      // In the case where we receive a flush without any data having been\n      // received we consider it an emitted track for the purposes of coalescing\n      // `done` events.\n      // We do this for the case where there is an audio and video track in the\n      // segment but no audio data. (seen in several playlists with alternate\n      // audio tracks and no audio present in the main TS segments.)\n      this.emittedTracks++;\n\n      if (this.emittedTracks >= this.numberOfTracks) {\n        this.trigger('done');\n        this.emittedTracks = 0;\n      }\n      return;\n    }\n  }\n\n  if (this.videoTrack) {\n    timelineStartPts = this.videoTrack.timelineStartInfo.pts;\n    VIDEO_PROPERTIES.forEach(function(prop) {\n      event.info[prop] = this.videoTrack[prop];\n    }, this);\n  } else if (this.audioTrack) {\n    timelineStartPts = this.audioTrack.timelineStartInfo.pts;\n    AUDIO_PROPERTIES.forEach(function(prop) {\n      event.info[prop] = this.audioTrack[prop];\n    }, this);\n  }\n\n  if (this.pendingTracks.length === 1) {\n    event.type = this.pendingTracks[0].type;\n  } else {\n    event.type = 'combined';\n  }\n\n  this.emittedTracks += this.pendingTracks.length;\n\n  initSegment = mp4.initSegment(this.pendingTracks);\n\n  // Create a new typed array to hold the init segment\n  event.initSegment = new Uint8Array(initSegment.byteLength);\n\n  // Create an init segment containing a moov\n  // and track definitions\n  event.initSegment.set(initSegment);\n\n  // Create a new typed array to hold the moof+mdats\n  event.data = new Uint8Array(this.pendingBytes);\n\n  // Append each moof+mdat (one per track) together\n  for (i = 0; i < this.pendingBoxes.length; i++) {\n    event.data.set(this.pendingBoxes[i], offset);\n    offset += this.pendingBoxes[i].byteLength;\n  }\n\n  // Translate caption PTS times into second offsets into the\n  // video timeline for the segment, and add track info\n  for (i = 0; i < this.pendingCaptions.length; i++) {\n    caption = this.pendingCaptions[i];\n    caption.startTime = (caption.startPts - timelineStartPts);\n    caption.startTime /= 90e3;\n    caption.endTime = (caption.endPts - timelineStartPts);\n    caption.endTime /= 90e3;\n    event.captionStreams[caption.stream] = true;\n    event.captions.push(caption);\n  }\n\n  // Translate ID3 frame PTS times into second offsets into the\n  // video timeline for the segment\n  for (i = 0; i < this.pendingMetadata.length; i++) {\n    id3 = this.pendingMetadata[i];\n    id3.cueTime = (id3.pts - timelineStartPts);\n    id3.cueTime /= 90e3;\n    event.metadata.push(id3);\n  }\n  // We add this to every single emitted segment even though we only need\n  // it for the first\n  event.metadata.dispatchType = this.metadataStream.dispatchType;\n\n  // Reset stream state\n  this.pendingTracks.length = 0;\n  this.videoTrack = null;\n  this.pendingBoxes.length = 0;\n  this.pendingCaptions.length = 0;\n  this.pendingBytes = 0;\n  this.pendingMetadata.length = 0;\n\n  // Emit the built segment\n  this.trigger('data', event);\n\n  // Only emit `done` if all tracks have been flushed and emitted\n  if (this.emittedTracks >= this.numberOfTracks) {\n    this.trigger('done');\n    this.emittedTracks = 0;\n  }\n};\n/**\n * A Stream that expects MP2T binary data as input and produces\n * corresponding media segments, suitable for use with Media Source\n * Extension (MSE) implementations that support the ISO BMFF byte\n * stream format, like Chrome.\n */\nTransmuxer = function(options) {\n  var\n    self = this,\n    hasFlushed = true,\n    videoTrack,\n    audioTrack;\n\n  Transmuxer.prototype.init.call(this);\n\n  options = options || {};\n  this.baseMediaDecodeTime = options.baseMediaDecodeTime || 0;\n  this.transmuxPipeline_ = {};\n\n  this.setupAacPipeline = function() {\n    var pipeline = {};\n    this.transmuxPipeline_ = pipeline;\n\n    pipeline.type = 'aac';\n    pipeline.metadataStream = new m2ts.MetadataStream();\n\n    // set up the parsing pipeline\n    pipeline.aacStream = new AacStream();\n    pipeline.audioTimestampRolloverStream = new m2ts.TimestampRolloverStream('audio');\n    pipeline.timedMetadataTimestampRolloverStream = new m2ts.TimestampRolloverStream('timed-metadata');\n    pipeline.adtsStream = new AdtsStream();\n    pipeline.coalesceStream = new CoalesceStream(options, pipeline.metadataStream);\n    pipeline.headOfPipeline = pipeline.aacStream;\n\n    pipeline.aacStream\n      .pipe(pipeline.audioTimestampRolloverStream)\n      .pipe(pipeline.adtsStream);\n    pipeline.aacStream\n      .pipe(pipeline.timedMetadataTimestampRolloverStream)\n      .pipe(pipeline.metadataStream)\n      .pipe(pipeline.coalesceStream);\n\n    pipeline.metadataStream.on('timestamp', function(frame) {\n      pipeline.aacStream.setTimestamp(frame.timeStamp);\n    });\n\n    pipeline.aacStream.on('data', function(data) {\n      if (data.type === 'timed-metadata' && !pipeline.audioSegmentStream) {\n        audioTrack = audioTrack || {\n          timelineStartInfo: {\n            baseMediaDecodeTime: self.baseMediaDecodeTime\n          },\n          codec: 'adts',\n          type: 'audio'\n        };\n        // hook up the audio segment stream to the first track with aac data\n        pipeline.coalesceStream.numberOfTracks++;\n        pipeline.audioSegmentStream = new AudioSegmentStream(audioTrack);\n        // Set up the final part of the audio pipeline\n        pipeline.adtsStream\n          .pipe(pipeline.audioSegmentStream)\n          .pipe(pipeline.coalesceStream);\n      }\n    });\n\n    // Re-emit any data coming from the coalesce stream to the outside world\n    pipeline.coalesceStream.on('data', this.trigger.bind(this, 'data'));\n    // Let the consumer know we have finished flushing the entire pipeline\n    pipeline.coalesceStream.on('done', this.trigger.bind(this, 'done'));\n  };\n\n  this.setupTsPipeline = function() {\n    var pipeline = {};\n    this.transmuxPipeline_ = pipeline;\n\n    pipeline.type = 'ts';\n    pipeline.metadataStream = new m2ts.MetadataStream();\n\n    // set up the parsing pipeline\n    pipeline.packetStream = new m2ts.TransportPacketStream();\n    pipeline.parseStream = new m2ts.TransportParseStream();\n    pipeline.elementaryStream = new m2ts.ElementaryStream();\n    pipeline.videoTimestampRolloverStream = new m2ts.TimestampRolloverStream('video');\n    pipeline.audioTimestampRolloverStream = new m2ts.TimestampRolloverStream('audio');\n    pipeline.timedMetadataTimestampRolloverStream = new m2ts.TimestampRolloverStream('timed-metadata');\n    pipeline.adtsStream = new AdtsStream();\n    pipeline.h264Stream = new H264Stream();\n    pipeline.captionStream = new m2ts.CaptionStream();\n    pipeline.coalesceStream = new CoalesceStream(options, pipeline.metadataStream);\n    pipeline.headOfPipeline = pipeline.packetStream;\n\n    // disassemble MPEG2-TS packets into elementary streams\n    pipeline.packetStream\n      .pipe(pipeline.parseStream)\n      .pipe(pipeline.elementaryStream);\n\n    // !!THIS ORDER IS IMPORTANT!!\n    // demux the streams\n    pipeline.elementaryStream\n      .pipe(pipeline.videoTimestampRolloverStream)\n      .pipe(pipeline.h264Stream);\n    pipeline.elementaryStream\n      .pipe(pipeline.audioTimestampRolloverStream)\n      .pipe(pipeline.adtsStream);\n\n    pipeline.elementaryStream\n      .pipe(pipeline.timedMetadataTimestampRolloverStream)\n      .pipe(pipeline.metadataStream)\n      .pipe(pipeline.coalesceStream);\n\n    // Hook up CEA-608/708 caption stream\n    pipeline.h264Stream.pipe(pipeline.captionStream)\n      .pipe(pipeline.coalesceStream);\n\n    pipeline.elementaryStream.on('data', function(data) {\n      var i;\n\n      if (data.type === 'metadata') {\n        i = data.tracks.length;\n\n        // scan the tracks listed in the metadata\n        while (i--) {\n          if (!videoTrack && data.tracks[i].type === 'video') {\n            videoTrack = data.tracks[i];\n            videoTrack.timelineStartInfo.baseMediaDecodeTime = self.baseMediaDecodeTime;\n          } else if (!audioTrack && data.tracks[i].type === 'audio') {\n            audioTrack = data.tracks[i];\n            audioTrack.timelineStartInfo.baseMediaDecodeTime = self.baseMediaDecodeTime;\n          }\n        }\n\n        // hook up the video segment stream to the first track with h264 data\n        if (videoTrack && !pipeline.videoSegmentStream) {\n          pipeline.coalesceStream.numberOfTracks++;\n          pipeline.videoSegmentStream = new VideoSegmentStream(videoTrack, options);\n\n          pipeline.videoSegmentStream.on('timelineStartInfo', function(timelineStartInfo) {\n          // When video emits timelineStartInfo data after a flush, we forward that\n          // info to the AudioSegmentStream, if it exists, because video timeline\n          // data takes precedence.\n            if (audioTrack) {\n              audioTrack.timelineStartInfo = timelineStartInfo;\n              // On the first segment we trim AAC frames that exist before the\n              // very earliest DTS we have seen in video because Chrome will\n              // interpret any video track with a baseMediaDecodeTime that is\n              // non-zero as a gap.\n              pipeline.audioSegmentStream.setEarliestDts(timelineStartInfo.dts);\n            }\n          });\n\n          pipeline.videoSegmentStream.on('processedGopsInfo',\n            self.trigger.bind(self, 'gopInfo'));\n\n          pipeline.videoSegmentStream.on('baseMediaDecodeTime', function(baseMediaDecodeTime) {\n            if (audioTrack) {\n              pipeline.audioSegmentStream.setVideoBaseMediaDecodeTime(baseMediaDecodeTime);\n            }\n          });\n\n          // Set up the final part of the video pipeline\n          pipeline.h264Stream\n            .pipe(pipeline.videoSegmentStream)\n            .pipe(pipeline.coalesceStream);\n        }\n\n        if (audioTrack && !pipeline.audioSegmentStream) {\n          // hook up the audio segment stream to the first track with aac data\n          pipeline.coalesceStream.numberOfTracks++;\n          pipeline.audioSegmentStream = new AudioSegmentStream(audioTrack);\n\n          // Set up the final part of the audio pipeline\n          pipeline.adtsStream\n            .pipe(pipeline.audioSegmentStream)\n            .pipe(pipeline.coalesceStream);\n        }\n      }\n    });\n\n    // Re-emit any data coming from the coalesce stream to the outside world\n    pipeline.coalesceStream.on('data', this.trigger.bind(this, 'data'));\n    // Let the consumer know we have finished flushing the entire pipeline\n    pipeline.coalesceStream.on('done', this.trigger.bind(this, 'done'));\n  };\n\n  // hook up the segment streams once track metadata is delivered\n  this.setBaseMediaDecodeTime = function(baseMediaDecodeTime) {\n    var pipeline = this.transmuxPipeline_;\n\n    this.baseMediaDecodeTime = baseMediaDecodeTime;\n    if (audioTrack) {\n      audioTrack.timelineStartInfo.dts = undefined;\n      audioTrack.timelineStartInfo.pts = undefined;\n      clearDtsInfo(audioTrack);\n      audioTrack.timelineStartInfo.baseMediaDecodeTime = baseMediaDecodeTime;\n      if (pipeline.audioTimestampRolloverStream) {\n        pipeline.audioTimestampRolloverStream.discontinuity();\n      }\n    }\n    if (videoTrack) {\n      if (pipeline.videoSegmentStream) {\n        pipeline.videoSegmentStream.gopCache_ = [];\n        pipeline.videoTimestampRolloverStream.discontinuity();\n      }\n      videoTrack.timelineStartInfo.dts = undefined;\n      videoTrack.timelineStartInfo.pts = undefined;\n      clearDtsInfo(videoTrack);\n      pipeline.captionStream.reset();\n      videoTrack.timelineStartInfo.baseMediaDecodeTime = baseMediaDecodeTime;\n    }\n\n    if (pipeline.timedMetadataTimestampRolloverStream) {\n      pipeline.timedMetadataTimestampRolloverStream.discontinuity();\n    }\n  };\n\n  this.setAudioAppendStart = function(timestamp) {\n    if (audioTrack) {\n      this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(timestamp);\n    }\n  };\n\n  this.alignGopsWith = function(gopsToAlignWith) {\n    if (videoTrack && this.transmuxPipeline_.videoSegmentStream) {\n      this.transmuxPipeline_.videoSegmentStream.alignGopsWith(gopsToAlignWith);\n    }\n  };\n\n  // feed incoming data to the front of the parsing pipeline\n  this.push = function(data) {\n    if (hasFlushed) {\n      var isAac = isLikelyAacData(data);\n\n      if (isAac && this.transmuxPipeline_.type !== 'aac') {\n        this.setupAacPipeline();\n      } else if (!isAac && this.transmuxPipeline_.type !== 'ts') {\n        this.setupTsPipeline();\n      }\n      hasFlushed = false;\n    }\n    this.transmuxPipeline_.headOfPipeline.push(data);\n  };\n\n  // flush any buffered data\n  this.flush = function() {\n      hasFlushed = true;\n    // Start at the top of the pipeline and flush all pending work\n    this.transmuxPipeline_.headOfPipeline.flush();\n  };\n\n  // Caption data has to be reset when seeking outside buffered range\n  this.resetCaptions = function() {\n    if (this.transmuxPipeline_.captionStream) {\n      this.transmuxPipeline_.captionStream.reset();\n    }\n  };\n\n};\nTransmuxer.prototype = new Stream();\n\nmodule.exports = {\n  Transmuxer: Transmuxer,\n  VideoSegmentStream: VideoSegmentStream,\n  AudioSegmentStream: AudioSegmentStream,\n  AUDIO_PROPERTIES: AUDIO_PROPERTIES,\n  VIDEO_PROPERTIES: VIDEO_PROPERTIES\n};\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _playlistJs = require('./playlist.js');\n\n/**\n * Returns a function that acts as the Enable/disable playlist function.\n *\n * @param {PlaylistLoader} loader - The master playlist loader\n * @param {String} playlistUri - uri of the playlist\n * @param {Function} changePlaylistFn - A function to be called after a\n * playlist's enabled-state has been changed. Will NOT be called if a\n * playlist's enabled-state is unchanged\n * @param {Boolean=} enable - Value to set the playlist enabled-state to\n * or if undefined returns the current enabled-state for the playlist\n * @return {Function} Function for setting/getting enabled\n */\nvar enableFunction = function enableFunction(loader, playlistUri, changePlaylistFn) {\n  return function (enable) {\n    var playlist = loader.master.playlists[playlistUri];\n    var incompatible = (0, _playlistJs.isIncompatible)(playlist);\n    var currentlyEnabled = (0, _playlistJs.isEnabled)(playlist);\n\n    if (typeof enable === 'undefined') {\n      return currentlyEnabled;\n    }\n\n    if (enable) {\n      delete playlist.disabled;\n    } else {\n      playlist.disabled = true;\n    }\n\n    if (enable !== currentlyEnabled && !incompatible) {\n      // Ensure the outside world knows about our changes\n      changePlaylistFn();\n      if (enable) {\n        loader.trigger('renditionenabled');\n      } else {\n        loader.trigger('renditiondisabled');\n      }\n    }\n    return enable;\n  };\n};\n\n/**\n * The representation object encapsulates the publicly visible information\n * in a media playlist along with a setter/getter-type function (enabled)\n * for changing the enabled-state of a particular playlist entry\n *\n * @class Representation\n */\n\nvar Representation = function Representation(hlsHandler, playlist, id) {\n  _classCallCheck(this, Representation);\n\n  // Get a reference to a bound version of fastQualityChange_\n  var fastChangeFunction = hlsHandler.masterPlaylistController_.fastQualityChange_.bind(hlsHandler.masterPlaylistController_);\n\n  // some playlist attributes are optional\n  if (playlist.attributes.RESOLUTION) {\n    var resolution = playlist.attributes.RESOLUTION;\n\n    this.width = resolution.width;\n    this.height = resolution.height;\n  }\n\n  this.bandwidth = playlist.attributes.BANDWIDTH;\n\n  // The id is simply the ordinality of the media playlist\n  // within the master playlist\n  this.id = id;\n\n  // Partially-apply the enableFunction to create a playlist-\n  // specific variant\n  this.enabled = enableFunction(hlsHandler.playlists, playlist.uri, fastChangeFunction);\n}\n\n/**\n * A mixin function that adds the `representations` api to an instance\n * of the HlsHandler class\n * @param {HlsHandler} hlsHandler - An instance of HlsHandler to add the\n * representation API into\n */\n;\n\nvar renditionSelectionMixin = function renditionSelectionMixin(hlsHandler) {\n  var playlists = hlsHandler.playlists;\n\n  // Add a single API-specific function to the HlsHandler instance\n  hlsHandler.representations = function () {\n    return playlists.master.playlists.filter(function (media) {\n      return !(0, _playlistJs.isIncompatible)(media);\n    }).map(function (e, i) {\n      return new Representation(hlsHandler, e, e.uri);\n    });\n  };\n};\n\nexports['default'] = renditionSelectionMixin;\nmodule.exports = exports['default'];","'use strict';\n\nvar Stream = require('../utils/stream.js');\nvar FlvTag = require('./flv-tag.js');\nvar m2ts = require('../m2ts/m2ts.js');\nvar AdtsStream = require('../codecs/adts.js');\nvar H264Stream = require('../codecs/h264').H264Stream;\nvar CoalesceStream = require('./coalesce-stream.js');\nvar TagList = require('./tag-list.js');\n\nvar\n  Transmuxer,\n  VideoSegmentStream,\n  AudioSegmentStream,\n  collectTimelineInfo,\n  metaDataTag,\n  extraDataTag;\n\n/**\n * Store information about the start and end of the tracka and the\n * duration for each frame/sample we process in order to calculate\n * the baseMediaDecodeTime\n */\ncollectTimelineInfo = function(track, data) {\n  if (typeof data.pts === 'number') {\n    if (track.timelineStartInfo.pts === undefined) {\n      track.timelineStartInfo.pts = data.pts;\n    } else {\n      track.timelineStartInfo.pts =\n        Math.min(track.timelineStartInfo.pts, data.pts);\n    }\n  }\n\n  if (typeof data.dts === 'number') {\n    if (track.timelineStartInfo.dts === undefined) {\n      track.timelineStartInfo.dts = data.dts;\n    } else {\n      track.timelineStartInfo.dts =\n        Math.min(track.timelineStartInfo.dts, data.dts);\n    }\n  }\n};\n\nmetaDataTag = function(track, pts) {\n  var\n    tag = new FlvTag(FlvTag.METADATA_TAG); // :FlvTag\n\n  tag.dts = pts;\n  tag.pts = pts;\n\n  tag.writeMetaDataDouble('videocodecid', 7);\n  tag.writeMetaDataDouble('width', track.width);\n  tag.writeMetaDataDouble('height', track.height);\n\n  return tag;\n};\n\nextraDataTag = function(track, pts) {\n  var\n    i,\n    tag = new FlvTag(FlvTag.VIDEO_TAG, true);\n\n  tag.dts = pts;\n  tag.pts = pts;\n\n  tag.writeByte(0x01);// version\n  tag.writeByte(track.profileIdc);// profile\n  tag.writeByte(track.profileCompatibility);// compatibility\n  tag.writeByte(track.levelIdc);// level\n  tag.writeByte(0xFC | 0x03); // reserved (6 bits), NULA length size - 1 (2 bits)\n  tag.writeByte(0xE0 | 0x01); // reserved (3 bits), num of SPS (5 bits)\n  tag.writeShort(track.sps[0].length); // data of SPS\n  tag.writeBytes(track.sps[0]); // SPS\n\n  tag.writeByte(track.pps.length); // num of PPS (will there ever be more that 1 PPS?)\n  for (i = 0; i < track.pps.length; ++i) {\n    tag.writeShort(track.pps[i].length); // 2 bytes for length of PPS\n    tag.writeBytes(track.pps[i]); // data of PPS\n  }\n\n  return tag;\n};\n\n/**\n * Constructs a single-track, media segment from AAC data\n * events. The output of this stream can be fed to flash.\n */\nAudioSegmentStream = function(track) {\n  var\n    adtsFrames = [],\n    videoKeyFrames = [],\n    oldExtraData;\n\n  AudioSegmentStream.prototype.init.call(this);\n\n  this.push = function(data) {\n    collectTimelineInfo(track, data);\n\n    if (track) {\n      track.audioobjecttype = data.audioobjecttype;\n      track.channelcount = data.channelcount;\n      track.samplerate = data.samplerate;\n      track.samplingfrequencyindex = data.samplingfrequencyindex;\n      track.samplesize = data.samplesize;\n      track.extraData = (track.audioobjecttype << 11) |\n                        (track.samplingfrequencyindex << 7) |\n                        (track.channelcount << 3);\n    }\n\n    data.pts = Math.round(data.pts / 90);\n    data.dts = Math.round(data.dts / 90);\n\n    // buffer audio data until end() is called\n    adtsFrames.push(data);\n  };\n\n  this.flush = function() {\n    var currentFrame, adtsFrame, lastMetaPts, tags = new TagList();\n    // return early if no audio data has been observed\n    if (adtsFrames.length === 0) {\n      this.trigger('done', 'AudioSegmentStream');\n      return;\n    }\n\n    lastMetaPts = -Infinity;\n\n    while (adtsFrames.length) {\n      currentFrame = adtsFrames.shift();\n\n      // write out a metadata frame at every video key frame\n      if (videoKeyFrames.length && currentFrame.pts >= videoKeyFrames[0]) {\n        lastMetaPts = videoKeyFrames.shift();\n        this.writeMetaDataTags(tags, lastMetaPts);\n      }\n\n      // also write out metadata tags every 1 second so that the decoder\n      // is re-initialized quickly after seeking into a different\n      // audio configuration.\n      if (track.extraData !== oldExtraData || currentFrame.pts - lastMetaPts >= 1000) {\n        this.writeMetaDataTags(tags, currentFrame.pts);\n        oldExtraData = track.extraData;\n        lastMetaPts = currentFrame.pts;\n      }\n\n      adtsFrame = new FlvTag(FlvTag.AUDIO_TAG);\n      adtsFrame.pts = currentFrame.pts;\n      adtsFrame.dts = currentFrame.dts;\n\n      adtsFrame.writeBytes(currentFrame.data);\n\n      tags.push(adtsFrame.finalize());\n    }\n\n    videoKeyFrames.length = 0;\n    oldExtraData = null;\n    this.trigger('data', {track: track, tags: tags.list});\n\n    this.trigger('done', 'AudioSegmentStream');\n  };\n\n  this.writeMetaDataTags = function(tags, pts) {\n    var adtsFrame;\n\n    adtsFrame = new FlvTag(FlvTag.METADATA_TAG);\n    // For audio, DTS is always the same as PTS. We want to set the DTS\n    // however so we can compare with video DTS to determine approximate\n    // packet order\n    adtsFrame.pts = pts;\n    adtsFrame.dts = pts;\n\n    // AAC is always 10\n    adtsFrame.writeMetaDataDouble('audiocodecid', 10);\n    adtsFrame.writeMetaDataBoolean('stereo', track.channelcount === 2);\n    adtsFrame.writeMetaDataDouble('audiosamplerate', track.samplerate);\n    // Is AAC always 16 bit?\n    adtsFrame.writeMetaDataDouble('audiosamplesize', 16);\n\n    tags.push(adtsFrame.finalize());\n\n    adtsFrame = new FlvTag(FlvTag.AUDIO_TAG, true);\n    // For audio, DTS is always the same as PTS. We want to set the DTS\n    // however so we can compare with video DTS to determine approximate\n    // packet order\n    adtsFrame.pts = pts;\n    adtsFrame.dts = pts;\n\n    adtsFrame.view.setUint16(adtsFrame.position, track.extraData);\n    adtsFrame.position += 2;\n    adtsFrame.length = Math.max(adtsFrame.length, adtsFrame.position);\n\n    tags.push(adtsFrame.finalize());\n  };\n\n  this.onVideoKeyFrame = function(pts) {\n    videoKeyFrames.push(pts);\n  };\n};\nAudioSegmentStream.prototype = new Stream();\n\n/**\n * Store FlvTags for the h264 stream\n * @param track {object} track metadata configuration\n */\nVideoSegmentStream = function(track) {\n  var\n    nalUnits = [],\n    config,\n    h264Frame;\n  VideoSegmentStream.prototype.init.call(this);\n\n  this.finishFrame = function(tags, frame) {\n    if (!frame) {\n      return;\n    }\n    // Check if keyframe and the length of tags.\n    // This makes sure we write metadata on the first frame of a segment.\n    if (config && track && track.newMetadata &&\n        (frame.keyFrame || tags.length === 0)) {\n      // Push extra data on every IDR frame in case we did a stream change + seek\n      var metaTag = metaDataTag(config, frame.dts).finalize();\n      var extraTag = extraDataTag(track, frame.dts).finalize();\n\n      metaTag.metaDataTag = extraTag.metaDataTag = true;\n\n      tags.push(metaTag);\n      tags.push(extraTag);\n      track.newMetadata = false;\n\n      this.trigger('keyframe', frame.dts);\n    }\n\n    frame.endNalUnit();\n    tags.push(frame.finalize());\n    h264Frame = null;\n  };\n\n  this.push = function(data) {\n    collectTimelineInfo(track, data);\n\n    data.pts = Math.round(data.pts / 90);\n    data.dts = Math.round(data.dts / 90);\n\n    // buffer video until flush() is called\n    nalUnits.push(data);\n  };\n\n  this.flush = function() {\n    var\n      currentNal,\n      tags = new TagList();\n\n    // Throw away nalUnits at the start of the byte stream until we find\n    // the first AUD\n    while (nalUnits.length) {\n      if (nalUnits[0].nalUnitType === 'access_unit_delimiter_rbsp') {\n        break;\n      }\n      nalUnits.shift();\n    }\n\n    // return early if no video data has been observed\n    if (nalUnits.length === 0) {\n      this.trigger('done', 'VideoSegmentStream');\n      return;\n    }\n\n    while (nalUnits.length) {\n      currentNal = nalUnits.shift();\n\n      // record the track config\n      if (currentNal.nalUnitType === 'seq_parameter_set_rbsp') {\n        track.newMetadata = true;\n        config = currentNal.config;\n        track.width = config.width;\n        track.height = config.height;\n        track.sps = [currentNal.data];\n        track.profileIdc = config.profileIdc;\n        track.levelIdc = config.levelIdc;\n        track.profileCompatibility = config.profileCompatibility;\n        h264Frame.endNalUnit();\n      } else if (currentNal.nalUnitType === 'pic_parameter_set_rbsp') {\n        track.newMetadata = true;\n        track.pps = [currentNal.data];\n        h264Frame.endNalUnit();\n      } else if (currentNal.nalUnitType === 'access_unit_delimiter_rbsp') {\n        if (h264Frame) {\n          this.finishFrame(tags, h264Frame);\n        }\n        h264Frame = new FlvTag(FlvTag.VIDEO_TAG);\n        h264Frame.pts = currentNal.pts;\n        h264Frame.dts = currentNal.dts;\n      } else {\n        if (currentNal.nalUnitType === 'slice_layer_without_partitioning_rbsp_idr') {\n          // the current sample is a key frame\n          h264Frame.keyFrame = true;\n        }\n        h264Frame.endNalUnit();\n      }\n      h264Frame.startNalUnit();\n      h264Frame.writeBytes(currentNal.data);\n    }\n    if (h264Frame) {\n      this.finishFrame(tags, h264Frame);\n    }\n\n    this.trigger('data', {track: track, tags: tags.list});\n\n    // Continue with the flush process now\n    this.trigger('done', 'VideoSegmentStream');\n  };\n};\n\nVideoSegmentStream.prototype = new Stream();\n\n/**\n * An object that incrementally transmuxes MPEG2 Trasport Stream\n * chunks into an FLV.\n */\nTransmuxer = function(options) {\n  var\n    self = this,\n\n    packetStream, parseStream, elementaryStream,\n    videoTimestampRolloverStream, audioTimestampRolloverStream,\n    timedMetadataTimestampRolloverStream,\n    adtsStream, h264Stream,\n    videoSegmentStream, audioSegmentStream, captionStream,\n    coalesceStream;\n\n  Transmuxer.prototype.init.call(this);\n\n  options = options || {};\n\n  // expose the metadata stream\n  this.metadataStream = new m2ts.MetadataStream();\n\n  options.metadataStream = this.metadataStream;\n\n  // set up the parsing pipeline\n  packetStream = new m2ts.TransportPacketStream();\n  parseStream = new m2ts.TransportParseStream();\n  elementaryStream = new m2ts.ElementaryStream();\n  videoTimestampRolloverStream = new m2ts.TimestampRolloverStream('video');\n  audioTimestampRolloverStream = new m2ts.TimestampRolloverStream('audio');\n  timedMetadataTimestampRolloverStream = new m2ts.TimestampRolloverStream('timed-metadata');\n\n  adtsStream = new AdtsStream();\n  h264Stream = new H264Stream();\n  coalesceStream = new CoalesceStream(options);\n\n  // disassemble MPEG2-TS packets into elementary streams\n  packetStream\n    .pipe(parseStream)\n    .pipe(elementaryStream);\n\n  // !!THIS ORDER IS IMPORTANT!!\n  // demux the streams\n  elementaryStream\n    .pipe(videoTimestampRolloverStream)\n    .pipe(h264Stream);\n  elementaryStream\n    .pipe(audioTimestampRolloverStream)\n    .pipe(adtsStream);\n\n  elementaryStream\n    .pipe(timedMetadataTimestampRolloverStream)\n    .pipe(this.metadataStream)\n    .pipe(coalesceStream);\n  // if CEA-708 parsing is available, hook up a caption stream\n  captionStream = new m2ts.CaptionStream();\n  h264Stream.pipe(captionStream)\n    .pipe(coalesceStream);\n\n  // hook up the segment streams once track metadata is delivered\n  elementaryStream.on('data', function(data) {\n    var i, videoTrack, audioTrack;\n\n    if (data.type === 'metadata') {\n      i = data.tracks.length;\n\n      // scan the tracks listed in the metadata\n      while (i--) {\n        if (data.tracks[i].type === 'video') {\n          videoTrack = data.tracks[i];\n        } else if (data.tracks[i].type === 'audio') {\n          audioTrack = data.tracks[i];\n        }\n      }\n\n      // hook up the video segment stream to the first track with h264 data\n      if (videoTrack && !videoSegmentStream) {\n        coalesceStream.numberOfTracks++;\n        videoSegmentStream = new VideoSegmentStream(videoTrack);\n\n        // Set up the final part of the video pipeline\n        h264Stream\n          .pipe(videoSegmentStream)\n          .pipe(coalesceStream);\n      }\n\n      if (audioTrack && !audioSegmentStream) {\n        // hook up the audio segment stream to the first track with aac data\n        coalesceStream.numberOfTracks++;\n        audioSegmentStream = new AudioSegmentStream(audioTrack);\n\n        // Set up the final part of the audio pipeline\n        adtsStream\n          .pipe(audioSegmentStream)\n          .pipe(coalesceStream);\n\n        if (videoSegmentStream) {\n          videoSegmentStream.on('keyframe', audioSegmentStream.onVideoKeyFrame);\n        }\n      }\n    }\n  });\n\n  // feed incoming data to the front of the parsing pipeline\n  this.push = function(data) {\n    packetStream.push(data);\n  };\n\n  // flush any buffered data\n  this.flush = function() {\n    // Start at the top of the pipeline and flush all pending work\n    packetStream.flush();\n  };\n\n  // Caption data has to be reset when seeking outside buffered range\n  this.resetCaptions = function() {\n    captionStream.reset();\n  };\n\n  // Re-emit any data coming from the coalesce stream to the outside world\n  coalesceStream.on('data', function(event) {\n    self.trigger('data', event);\n  });\n\n  // Let the consumer know we have finished flushing the entire pipeline\n  coalesceStream.on('done', function() {\n    self.trigger('done');\n  });\n};\nTransmuxer.prototype = new Stream();\n\n// forward compatibility\nmodule.exports = Transmuxer;\n","/**\n * @file playlist.js\n *\n * Playlist related utilities.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _videoJs = require('video.js');\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\n/**\n * walk backward until we find a duration we can use\n * or return a failure\n *\n * @param {Playlist} playlist the playlist to walk through\n * @param {Number} endSequence the mediaSequence to stop walking on\n */\n\nvar backwardDuration = function backwardDuration(playlist, endSequence) {\n  var result = 0;\n  var i = endSequence - playlist.mediaSequence;\n  // if a start time is available for segment immediately following\n  // the interval, use it\n  var segment = playlist.segments[i];\n\n  // Walk backward until we find the latest segment with timeline\n  // information that is earlier than endSequence\n  if (segment) {\n    if (typeof segment.start !== 'undefined') {\n      return { result: segment.start, precise: true };\n    }\n    if (typeof segment.end !== 'undefined') {\n      return {\n        result: segment.end - segment.duration,\n        precise: true\n      };\n    }\n  }\n  while (i--) {\n    segment = playlist.segments[i];\n    if (typeof segment.end !== 'undefined') {\n      return { result: result + segment.end, precise: true };\n    }\n\n    result += segment.duration;\n\n    if (typeof segment.start !== 'undefined') {\n      return { result: result + segment.start, precise: true };\n    }\n  }\n  return { result: result, precise: false };\n};\n\n/**\n * walk forward until we find a duration we can use\n * or return a failure\n *\n * @param {Playlist} playlist the playlist to walk through\n * @param {Number} endSequence the mediaSequence to stop walking on\n */\nvar forwardDuration = function forwardDuration(playlist, endSequence) {\n  var result = 0;\n  var segment = undefined;\n  var i = endSequence - playlist.mediaSequence;\n  // Walk forward until we find the earliest segment with timeline\n  // information\n\n  for (; i < playlist.segments.length; i++) {\n    segment = playlist.segments[i];\n    if (typeof segment.start !== 'undefined') {\n      return {\n        result: segment.start - result,\n        precise: true\n      };\n    }\n\n    result += segment.duration;\n\n    if (typeof segment.end !== 'undefined') {\n      return {\n        result: segment.end - result,\n        precise: true\n      };\n    }\n  }\n  // indicate we didn't find a useful duration estimate\n  return { result: -1, precise: false };\n};\n\n/**\n  * Calculate the media duration from the segments associated with a\n  * playlist. The duration of a subinterval of the available segments\n  * may be calculated by specifying an end index.\n  *\n  * @param {Object} playlist a media playlist object\n  * @param {Number=} endSequence an exclusive upper boundary\n  * for the playlist.  Defaults to playlist length.\n  * @param {Number} expired the amount of time that has dropped\n  * off the front of the playlist in a live scenario\n  * @return {Number} the duration between the first available segment\n  * and end index.\n  */\nvar intervalDuration = function intervalDuration(playlist, endSequence, expired) {\n  var backward = undefined;\n  var forward = undefined;\n\n  if (typeof endSequence === 'undefined') {\n    endSequence = playlist.mediaSequence + playlist.segments.length;\n  }\n\n  if (endSequence < playlist.mediaSequence) {\n    return 0;\n  }\n\n  // do a backward walk to estimate the duration\n  backward = backwardDuration(playlist, endSequence);\n  if (backward.precise) {\n    // if we were able to base our duration estimate on timing\n    // information provided directly from the Media Source, return\n    // it\n    return backward.result;\n  }\n\n  // walk forward to see if a precise duration estimate can be made\n  // that way\n  forward = forwardDuration(playlist, endSequence);\n  if (forward.precise) {\n    // we found a segment that has been buffered and so it's\n    // position is known precisely\n    return forward.result;\n  }\n\n  // return the less-precise, playlist-based duration estimate\n  return backward.result + expired;\n};\n\n/**\n  * Calculates the duration of a playlist. If a start and end index\n  * are specified, the duration will be for the subset of the media\n  * timeline between those two indices. The total duration for live\n  * playlists is always Infinity.\n  *\n  * @param {Object} playlist a media playlist object\n  * @param {Number=} endSequence an exclusive upper\n  * boundary for the playlist. Defaults to the playlist media\n  * sequence number plus its length.\n  * @param {Number=} expired the amount of time that has\n  * dropped off the front of the playlist in a live scenario\n  * @return {Number} the duration between the start index and end\n  * index.\n  */\nvar duration = function duration(playlist, endSequence, expired) {\n  if (!playlist) {\n    return 0;\n  }\n\n  if (typeof expired !== 'number') {\n    expired = 0;\n  }\n\n  // if a slice of the total duration is not requested, use\n  // playlist-level duration indicators when they're present\n  if (typeof endSequence === 'undefined') {\n    // if present, use the duration specified in the playlist\n    if (playlist.totalDuration) {\n      return playlist.totalDuration;\n    }\n\n    // duration should be Infinity for live playlists\n    if (!playlist.endList) {\n      return _globalWindow2['default'].Infinity;\n    }\n  }\n\n  // calculate the total duration based on the segment durations\n  return intervalDuration(playlist, endSequence, expired);\n};\n\nexports.duration = duration;\n/**\n  * Calculate the time between two indexes in the current playlist\n  * neight the start- nor the end-index need to be within the current\n  * playlist in which case, the targetDuration of the playlist is used\n  * to approximate the durations of the segments\n  *\n  * @param {Object} playlist a media playlist object\n  * @param {Number} startIndex\n  * @param {Number} endIndex\n  * @return {Number} the number of seconds between startIndex and endIndex\n  */\nvar sumDurations = function sumDurations(playlist, startIndex, endIndex) {\n  var durations = 0;\n\n  if (startIndex > endIndex) {\n    var _ref = [endIndex, startIndex];\n    startIndex = _ref[0];\n    endIndex = _ref[1];\n  }\n\n  if (startIndex < 0) {\n    for (var i = startIndex; i < Math.min(0, endIndex); i++) {\n      durations += playlist.targetDuration;\n    }\n    startIndex = 0;\n  }\n\n  for (var i = startIndex; i < endIndex; i++) {\n    durations += playlist.segments[i].duration;\n  }\n\n  return durations;\n};\n\nexports.sumDurations = sumDurations;\n/**\n * Determines the media index of the segment corresponding to the safe edge of the live\n * window which is the duration of the last segment plus 2 target durations from the end\n * of the playlist.\n *\n * @param {Object} playlist\n *        a media playlist object\n * @return {Number}\n *         The media index of the segment at the safe live point. 0 if there is no \"safe\"\n *         point.\n * @function safeLiveIndex\n */\nvar safeLiveIndex = function safeLiveIndex(playlist) {\n  if (!playlist.segments.length) {\n    return 0;\n  }\n\n  var i = playlist.segments.length - 1;\n  var distanceFromEnd = playlist.segments[i].duration || playlist.targetDuration;\n  var safeDistance = distanceFromEnd + playlist.targetDuration * 2;\n\n  while (i--) {\n    distanceFromEnd += playlist.segments[i].duration;\n\n    if (distanceFromEnd >= safeDistance) {\n      break;\n    }\n  }\n\n  return Math.max(0, i);\n};\n\nexports.safeLiveIndex = safeLiveIndex;\n/**\n * Calculates the playlist end time\n *\n * @param {Object} playlist a media playlist object\n * @param {Number=} expired the amount of time that has\n *                  dropped off the front of the playlist in a live scenario\n * @param {Boolean|false} useSafeLiveEnd a boolean value indicating whether or not the\n *                        playlist end calculation should consider the safe live end\n *                        (truncate the playlist end by three segments). This is normally\n *                        used for calculating the end of the playlist's seekable range.\n * @returns {Number} the end time of playlist\n * @function playlistEnd\n */\nvar playlistEnd = function playlistEnd(playlist, expired, useSafeLiveEnd) {\n  if (!playlist || !playlist.segments) {\n    return null;\n  }\n  if (playlist.endList) {\n    return duration(playlist);\n  }\n\n  if (expired === null) {\n    return null;\n  }\n\n  expired = expired || 0;\n\n  var endSequence = useSafeLiveEnd ? safeLiveIndex(playlist) : playlist.segments.length;\n\n  return intervalDuration(playlist, playlist.mediaSequence + endSequence, expired);\n};\n\nexports.playlistEnd = playlistEnd;\n/**\n  * Calculates the interval of time that is currently seekable in a\n  * playlist. The returned time ranges are relative to the earliest\n  * moment in the specified playlist that is still available. A full\n  * seekable implementation for live streams would need to offset\n  * these values by the duration of content that has expired from the\n  * stream.\n  *\n  * @param {Object} playlist a media playlist object\n  * dropped off the front of the playlist in a live scenario\n  * @param {Number=} expired the amount of time that has\n  * dropped off the front of the playlist in a live scenario\n  * @return {TimeRanges} the periods of time that are valid targets\n  * for seeking\n  */\nvar seekable = function seekable(playlist, expired) {\n  var useSafeLiveEnd = true;\n  var seekableStart = expired || 0;\n  var seekableEnd = playlistEnd(playlist, expired, useSafeLiveEnd);\n\n  if (seekableEnd === null) {\n    return (0, _videoJs.createTimeRange)();\n  }\n  return (0, _videoJs.createTimeRange)(seekableStart, seekableEnd);\n};\n\nexports.seekable = seekable;\nvar isWholeNumber = function isWholeNumber(num) {\n  return num - Math.floor(num) === 0;\n};\n\nvar roundSignificantDigit = function roundSignificantDigit(increment, num) {\n  // If we have a whole number, just add 1 to it\n  if (isWholeNumber(num)) {\n    return num + increment * 0.1;\n  }\n\n  var numDecimalDigits = num.toString().split('.')[1].length;\n\n  for (var i = 1; i <= numDecimalDigits; i++) {\n    var scale = Math.pow(10, i);\n    var temp = num * scale;\n\n    if (isWholeNumber(temp) || i === numDecimalDigits) {\n      return (temp + increment) / scale;\n    }\n  }\n};\n\nvar ceilLeastSignificantDigit = roundSignificantDigit.bind(null, 1);\nvar floorLeastSignificantDigit = roundSignificantDigit.bind(null, -1);\n\n/**\n * Determine the index and estimated starting time of the segment that\n * contains a specified playback position in a media playlist.\n *\n * @param {Object} playlist the media playlist to query\n * @param {Number} currentTime The number of seconds since the earliest\n * possible position to determine the containing segment for\n * @param {Number} startIndex\n * @param {Number} startTime\n * @return {Object}\n */\nvar getMediaInfoForTime = function getMediaInfoForTime(playlist, currentTime, startIndex, startTime) {\n  var i = undefined;\n  var segment = undefined;\n  var numSegments = playlist.segments.length;\n\n  var time = currentTime - startTime;\n\n  if (time < 0) {\n    // Walk backward from startIndex in the playlist, adding durations\n    // until we find a segment that contains `time` and return it\n    if (startIndex > 0) {\n      for (i = startIndex - 1; i >= 0; i--) {\n        segment = playlist.segments[i];\n        time += floorLeastSignificantDigit(segment.duration);\n        if (time > 0) {\n          return {\n            mediaIndex: i,\n            startTime: startTime - sumDurations(playlist, startIndex, i)\n          };\n        }\n      }\n    }\n    // We were unable to find a good segment within the playlist\n    // so select the first segment\n    return {\n      mediaIndex: 0,\n      startTime: currentTime\n    };\n  }\n\n  // When startIndex is negative, we first walk forward to first segment\n  // adding target durations. If we \"run out of time\" before getting to\n  // the first segment, return the first segment\n  if (startIndex < 0) {\n    for (i = startIndex; i < 0; i++) {\n      time -= playlist.targetDuration;\n      if (time < 0) {\n        return {\n          mediaIndex: 0,\n          startTime: currentTime\n        };\n      }\n    }\n    startIndex = 0;\n  }\n\n  // Walk forward from startIndex in the playlist, subtracting durations\n  // until we find a segment that contains `time` and return it\n  for (i = startIndex; i < numSegments; i++) {\n    segment = playlist.segments[i];\n    time -= ceilLeastSignificantDigit(segment.duration);\n    if (time < 0) {\n      return {\n        mediaIndex: i,\n        startTime: startTime + sumDurations(playlist, startIndex, i)\n      };\n    }\n  }\n\n  // We are out of possible candidates so load the last one...\n  return {\n    mediaIndex: numSegments - 1,\n    startTime: currentTime\n  };\n};\n\nexports.getMediaInfoForTime = getMediaInfoForTime;\n/**\n * Check whether the playlist is blacklisted or not.\n *\n * @param {Object} playlist the media playlist object\n * @return {boolean} whether the playlist is blacklisted or not\n * @function isBlacklisted\n */\nvar isBlacklisted = function isBlacklisted(playlist) {\n  return playlist.excludeUntil && playlist.excludeUntil > Date.now();\n};\n\nexports.isBlacklisted = isBlacklisted;\n/**\n * Check whether the playlist is compatible with current playback configuration or has\n * been blacklisted permanently for being incompatible.\n *\n * @param {Object} playlist the media playlist object\n * @return {boolean} whether the playlist is incompatible or not\n * @function isIncompatible\n */\nvar isIncompatible = function isIncompatible(playlist) {\n  return playlist.excludeUntil && playlist.excludeUntil === Infinity;\n};\n\nexports.isIncompatible = isIncompatible;\n/**\n * Check whether the playlist is enabled or not.\n *\n * @param {Object} playlist the media playlist object\n * @return {boolean} whether the playlist is enabled or not\n * @function isEnabled\n */\nvar isEnabled = function isEnabled(playlist) {\n  var blacklisted = isBlacklisted(playlist);\n\n  return !playlist.disabled && !blacklisted;\n};\n\nexports.isEnabled = isEnabled;\n/**\n * Check whether the playlist has been manually disabled through the representations api.\n *\n * @param {Object} playlist the media playlist object\n * @return {boolean} whether the playlist is disabled manually or not\n * @function isDisabled\n */\nvar isDisabled = function isDisabled(playlist) {\n  return playlist.disabled;\n};\n\nexports.isDisabled = isDisabled;\n/**\n * Returns whether the current playlist is an AES encrypted HLS stream\n *\n * @return {Boolean} true if it's an AES encrypted HLS stream\n */\nvar isAes = function isAes(media) {\n  for (var i = 0; i < media.segments.length; i++) {\n    if (media.segments[i].key) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexports.isAes = isAes;\n/**\n * Returns whether the current playlist contains fMP4\n *\n * @return {Boolean} true if the playlist contains fMP4\n */\nvar isFmp4 = function isFmp4(media) {\n  for (var i = 0; i < media.segments.length; i++) {\n    if (media.segments[i].map) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexports.isFmp4 = isFmp4;\n/**\n * Checks if the playlist has a value for the specified attribute\n *\n * @param {String} attr\n *        Attribute to check for\n * @param {Object} playlist\n *        The media playlist object\n * @return {Boolean}\n *         Whether the playlist contains a value for the attribute or not\n * @function hasAttribute\n */\nvar hasAttribute = function hasAttribute(attr, playlist) {\n  return playlist.attributes && playlist.attributes[attr];\n};\n\nexports.hasAttribute = hasAttribute;\n/**\n * Estimates the time required to complete a segment download from the specified playlist\n *\n * @param {Number} segmentDuration\n *        Duration of requested segment\n * @param {Number} bandwidth\n *        Current measured bandwidth of the player\n * @param {Object} playlist\n *        The media playlist object\n * @param {Number=} bytesReceived\n *        Number of bytes already received for the request. Defaults to 0\n * @return {Number|NaN}\n *         The estimated time to request the segment. NaN if bandwidth information for\n *         the given playlist is unavailable\n * @function estimateSegmentRequestTime\n */\nvar estimateSegmentRequestTime = function estimateSegmentRequestTime(segmentDuration, bandwidth, playlist) {\n  var bytesReceived = arguments.length <= 3 || arguments[3] === undefined ? 0 : arguments[3];\n\n  if (!hasAttribute('BANDWIDTH', playlist)) {\n    return NaN;\n  }\n\n  var size = segmentDuration * playlist.attributes.BANDWIDTH;\n\n  return (size - bytesReceived * 8) / bandwidth;\n};\n\nexports.estimateSegmentRequestTime = estimateSegmentRequestTime;\n/*\n * Returns whether the current playlist is the lowest rendition\n *\n * @return {Boolean} true if on lowest rendition\n */\nvar isLowestEnabledRendition = function isLowestEnabledRendition(master, media) {\n  if (master.playlists.length === 1) {\n    return true;\n  }\n\n  var currentBandwidth = media.attributes.BANDWIDTH || Number.MAX_VALUE;\n\n  return master.playlists.filter(function (playlist) {\n    if (!isEnabled(playlist)) {\n      return false;\n    }\n\n    return (playlist.attributes.BANDWIDTH || 0) < currentBandwidth;\n  }).length === 0;\n};\n\nexports.isLowestEnabledRendition = isLowestEnabledRendition;\n// exports\nexports['default'] = {\n  duration: duration,\n  seekable: seekable,\n  safeLiveIndex: safeLiveIndex,\n  getMediaInfoForTime: getMediaInfoForTime,\n  isEnabled: isEnabled,\n  isDisabled: isDisabled,\n  isBlacklisted: isBlacklisted,\n  isIncompatible: isIncompatible,\n  playlistEnd: playlistEnd,\n  isAes: isAes,\n  isFmp4: isFmp4,\n  hasAttribute: hasAttribute,\n  estimateSegmentRequestTime: estimateSegmentRequestTime,\n  isLowestEnabledRendition: isLowestEnabledRendition\n};","/*\n * pkcs7\n * https://github.com/brightcove/pkcs7\n *\n * Copyright (c) 2014 Brightcove\n * Licensed under the apache2 license.\n */\n\n'use strict';\n\nexports.pad = require('./pad.js');\nexports.unpad = require('./unpad.js');\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0MkYyRDUyMjA4REExMUU5ODIwRDk3MzNDOTVGMzQ3RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0MkYyRDUyMzA4REExMUU5ODIwRDk3MzNDOTVGMzQ3RSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQyRjJENTIwMDhEQTExRTk4MjBEOTczM0M5NUYzNDdFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQyRjJENTIxMDhEQTExRTk4MjBEOTczM0M5NUYzNDdFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+mr/fDgAACT1JREFUeNrMWHlsFNcZ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\"","/**\n * mux.js\n *\n * Copyright (c) 2016 Brightcove\n * All rights reserved.\n *\n * Utilities to detect basic properties and metadata about TS Segments.\n */\n'use strict';\n\nvar StreamTypes = require('./stream-types.js');\n\nvar parsePid = function(packet) {\n  var pid = packet[1] & 0x1f;\n  pid <<= 8;\n  pid |= packet[2];\n  return pid;\n};\n\nvar parsePayloadUnitStartIndicator = function(packet) {\n  return !!(packet[1] & 0x40);\n};\n\nvar parseAdaptionField = function(packet) {\n  var offset = 0;\n  // if an adaption field is present, its length is specified by the\n  // fifth byte of the TS packet header. The adaptation field is\n  // used to add stuffing to PES packets that don't fill a complete\n  // TS packet, and to specify some forms of timing and control data\n  // that we do not currently use.\n  if (((packet[3] & 0x30) >>> 4) > 0x01) {\n    offset += packet[4] + 1;\n  }\n  return offset;\n};\n\nvar parseType = function(packet, pmtPid) {\n  var pid = parsePid(packet);\n  if (pid === 0) {\n    return 'pat';\n  } else if (pid === pmtPid) {\n    return 'pmt';\n  } else if (pmtPid) {\n    return 'pes';\n  }\n  return null;\n};\n\nvar parsePat = function(packet) {\n  var pusi = parsePayloadUnitStartIndicator(packet);\n  var offset = 4 + parseAdaptionField(packet);\n\n  if (pusi) {\n    offset += packet[offset] + 1;\n  }\n\n  return (packet[offset + 10] & 0x1f) << 8 | packet[offset + 11];\n};\n\nvar parsePmt = function(packet) {\n  var programMapTable = {};\n  var pusi = parsePayloadUnitStartIndicator(packet);\n  var payloadOffset = 4 + parseAdaptionField(packet);\n\n  if (pusi) {\n    payloadOffset += packet[payloadOffset] + 1;\n  }\n\n  // PMTs can be sent ahead of the time when they should actually\n  // take effect. We don't believe this should ever be the case\n  // for HLS but we'll ignore \"forward\" PMT declarations if we see\n  // them. Future PMT declarations have the current_next_indicator\n  // set to zero.\n  if (!(packet[payloadOffset + 5] & 0x01)) {\n    return;\n  }\n\n  var sectionLength, tableEnd, programInfoLength;\n  // the mapping table ends at the end of the current section\n  sectionLength = (packet[payloadOffset + 1] & 0x0f) << 8 | packet[payloadOffset + 2];\n  tableEnd = 3 + sectionLength - 4;\n\n  // to determine where the table is, we have to figure out how\n  // long the program info descriptors are\n  programInfoLength = (packet[payloadOffset + 10] & 0x0f) << 8 | packet[payloadOffset + 11];\n\n  // advance the offset to the first entry in the mapping table\n  var offset = 12 + programInfoLength;\n  while (offset < tableEnd) {\n    var i = payloadOffset + offset;\n    // add an entry that maps the elementary_pid to the stream_type\n    programMapTable[(packet[i + 1] & 0x1F) << 8 | packet[i + 2]] = packet[i];\n\n    // move to the next table entry\n    // skip past the elementary stream descriptors, if present\n    offset += ((packet[i + 3] & 0x0F) << 8 | packet[i + 4]) + 5;\n  }\n  return programMapTable;\n};\n\nvar parsePesType = function(packet, programMapTable) {\n  var pid = parsePid(packet);\n  var type = programMapTable[pid];\n  switch (type) {\n    case StreamTypes.H264_STREAM_TYPE:\n      return 'video';\n    case StreamTypes.ADTS_STREAM_TYPE:\n      return 'audio';\n    case StreamTypes.METADATA_STREAM_TYPE:\n      return 'timed-metadata';\n    default:\n      return null;\n  }\n};\n\nvar parsePesTime = function(packet) {\n  var pusi = parsePayloadUnitStartIndicator(packet);\n  if (!pusi) {\n    return null;\n  }\n\n  var offset = 4 + parseAdaptionField(packet);\n\n  if (offset >= packet.byteLength) {\n    // From the H 222.0 MPEG-TS spec\n    // \"For transport stream packets carrying PES packets, stuffing is needed when there\n    //  is insufficient PES packet data to completely fill the transport stream packet\n    //  payload bytes. Stuffing is accomplished by defining an adaptation field longer than\n    //  the sum of the lengths of the data elements in it, so that the payload bytes\n    //  remaining after the adaptation field exactly accommodates the available PES packet\n    //  data.\"\n    //\n    // If the offset is >= the length of the packet, then the packet contains no data\n    // and instead is just adaption field stuffing bytes\n    return null;\n  }\n\n  var pes = null;\n  var ptsDtsFlags;\n\n  // PES packets may be annotated with a PTS value, or a PTS value\n  // and a DTS value. Determine what combination of values is\n  // available to work with.\n  ptsDtsFlags = packet[offset + 7];\n\n  // PTS and DTS are normally stored as a 33-bit number.  Javascript\n  // performs all bitwise operations on 32-bit integers but javascript\n  // supports a much greater range (52-bits) of integer using standard\n  // mathematical operations.\n  // We construct a 31-bit value using bitwise operators over the 31\n  // most significant bits and then multiply by 4 (equal to a left-shift\n  // of 2) before we add the final 2 least significant bits of the\n  // timestamp (equal to an OR.)\n  if (ptsDtsFlags & 0xC0) {\n    pes = {};\n    // the PTS and DTS are not written out directly. For information\n    // on how they are encoded, see\n    // http://dvd.sourceforge.net/dvdinfo/pes-hdr.html\n    pes.pts = (packet[offset + 9] & 0x0E) << 27 |\n      (packet[offset + 10] & 0xFF) << 20 |\n      (packet[offset + 11] & 0xFE) << 12 |\n      (packet[offset + 12] & 0xFF) <<  5 |\n      (packet[offset + 13] & 0xFE) >>>  3;\n    pes.pts *= 4; // Left shift by 2\n    pes.pts += (packet[offset + 13] & 0x06) >>> 1; // OR by the two LSBs\n    pes.dts = pes.pts;\n    if (ptsDtsFlags & 0x40) {\n      pes.dts = (packet[offset + 14] & 0x0E) << 27 |\n        (packet[offset + 15] & 0xFF) << 20 |\n        (packet[offset + 16] & 0xFE) << 12 |\n        (packet[offset + 17] & 0xFF) << 5 |\n        (packet[offset + 18] & 0xFE) >>> 3;\n      pes.dts *= 4; // Left shift by 2\n      pes.dts += (packet[offset + 18] & 0x06) >>> 1; // OR by the two LSBs\n    }\n  }\n  return pes;\n};\n\nvar parseNalUnitType = function(type) {\n  switch (type) {\n    case 0x05:\n      return 'slice_layer_without_partitioning_rbsp_idr';\n    case 0x06:\n      return 'sei_rbsp';\n    case 0x07:\n      return 'seq_parameter_set_rbsp';\n    case 0x08:\n      return 'pic_parameter_set_rbsp';\n    case 0x09:\n      return 'access_unit_delimiter_rbsp';\n    default:\n      return null;\n  }\n};\n\nvar videoPacketContainsKeyFrame = function(packet) {\n  var offset = 4 + parseAdaptionField(packet);\n  var frameBuffer = packet.subarray(offset);\n  var frameI = 0;\n  var frameSyncPoint = 0;\n  var foundKeyFrame = false;\n  var nalType;\n\n  // advance the sync point to a NAL start, if necessary\n  for (; frameSyncPoint < frameBuffer.byteLength - 3; frameSyncPoint++) {\n    if (frameBuffer[frameSyncPoint + 2] === 1) {\n      // the sync point is properly aligned\n      frameI = frameSyncPoint + 5;\n      break;\n    }\n  }\n\n  while (frameI < frameBuffer.byteLength) {\n    // look at the current byte to determine if we've hit the end of\n    // a NAL unit boundary\n    switch (frameBuffer[frameI]) {\n    case 0:\n      // skip past non-sync sequences\n      if (frameBuffer[frameI - 1] !== 0) {\n        frameI += 2;\n        break;\n      } else if (frameBuffer[frameI - 2] !== 0) {\n        frameI++;\n        break;\n      }\n\n      if (frameSyncPoint + 3 !== frameI - 2) {\n        nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n        if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n          foundKeyFrame = true;\n        }\n      }\n\n      // drop trailing zeroes\n      do {\n        frameI++;\n      } while (frameBuffer[frameI] !== 1 && frameI < frameBuffer.length);\n      frameSyncPoint = frameI - 2;\n      frameI += 3;\n      break;\n    case 1:\n      // skip past non-sync sequences\n      if (frameBuffer[frameI - 1] !== 0 ||\n          frameBuffer[frameI - 2] !== 0) {\n        frameI += 3;\n        break;\n      }\n\n      nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n      if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n        foundKeyFrame = true;\n      }\n      frameSyncPoint = frameI - 2;\n      frameI += 3;\n      break;\n    default:\n      // the current byte isn't a one or zero, so it cannot be part\n      // of a sync sequence\n      frameI += 3;\n      break;\n    }\n  }\n  frameBuffer = frameBuffer.subarray(frameSyncPoint);\n  frameI -= frameSyncPoint;\n  frameSyncPoint = 0;\n  // parse the final nal\n  if (frameBuffer && frameBuffer.byteLength > 3) {\n    nalType = parseNalUnitType(frameBuffer[frameSyncPoint + 3] & 0x1f);\n    if (nalType === 'slice_layer_without_partitioning_rbsp_idr') {\n      foundKeyFrame = true;\n    }\n  }\n\n  return foundKeyFrame;\n};\n\n\nmodule.exports = {\n  parseType: parseType,\n  parsePat: parsePat,\n  parsePmt: parsePmt,\n  parsePayloadUnitStartIndicator: parsePayloadUnitStartIndicator,\n  parsePesType: parsePesType,\n  parsePesTime: parsePesTime,\n  videoPacketContainsKeyFrame: videoPacketContainsKeyFrame\n};\n","/**\n * @file videojs-contrib-hls.js\n *\n * The main file for the HLS project.\n * License: https://github.com/videojs/videojs-contrib-hls/blob/master/LICENSE\n */\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x4, _x5, _x6) { var _again = true; _function: while (_again) { var object = _x4, property = _x5, receiver = _x6; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x4 = parent; _x5 = property; _x6 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _globalDocument = require('global/document');\n\nvar _globalDocument2 = _interopRequireDefault(_globalDocument);\n\nvar _playlistLoader = require('./playlist-loader');\n\nvar _playlistLoader2 = _interopRequireDefault(_playlistLoader);\n\nvar _playlist = require('./playlist');\n\nvar _playlist2 = _interopRequireDefault(_playlist);\n\nvar _xhr = require('./xhr');\n\nvar _xhr2 = _interopRequireDefault(_xhr);\n\nvar _aesDecrypter = require('aes-decrypter');\n\nvar _binUtils = require('./bin-utils');\n\nvar _binUtils2 = _interopRequireDefault(_binUtils);\n\nvar _videojsContribMediaSources = require('videojs-contrib-media-sources');\n\nvar _m3u8Parser = require('m3u8-parser');\n\nvar _m3u8Parser2 = _interopRequireDefault(_m3u8Parser);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar _masterPlaylistController = require('./master-playlist-controller');\n\nvar _config = require('./config');\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _renditionMixin = require('./rendition-mixin');\n\nvar _renditionMixin2 = _interopRequireDefault(_renditionMixin);\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _playbackWatcher = require('./playback-watcher');\n\nvar _playbackWatcher2 = _interopRequireDefault(_playbackWatcher);\n\nvar _reloadSourceOnError = require('./reload-source-on-error');\n\nvar _reloadSourceOnError2 = _interopRequireDefault(_reloadSourceOnError);\n\nvar _playlistSelectorsJs = require('./playlist-selectors.js');\n\nvar Hls = {\n  PlaylistLoader: _playlistLoader2['default'],\n  Playlist: _playlist2['default'],\n  Decrypter: _aesDecrypter.Decrypter,\n  AsyncStream: _aesDecrypter.AsyncStream,\n  decrypt: _aesDecrypter.decrypt,\n  utils: _binUtils2['default'],\n\n  STANDARD_PLAYLIST_SELECTOR: _playlistSelectorsJs.lastBandwidthSelector,\n  INITIAL_PLAYLIST_SELECTOR: _playlistSelectorsJs.lowestBitrateCompatibleVariantSelector,\n  comparePlaylistBandwidth: _playlistSelectorsJs.comparePlaylistBandwidth,\n  comparePlaylistResolution: _playlistSelectorsJs.comparePlaylistResolution,\n\n  xhr: (0, _xhr2['default'])()\n};\n\n// 0.5 MB/s\nvar INITIAL_BANDWIDTH = 4194304;\n\n// Define getter/setters for config properites\n['GOAL_BUFFER_LENGTH', 'MAX_GOAL_BUFFER_LENGTH', 'GOAL_BUFFER_LENGTH_RATE', 'BUFFER_LOW_WATER_LINE', 'MAX_BUFFER_LOW_WATER_LINE', 'BUFFER_LOW_WATER_LINE_RATE', 'BANDWIDTH_VARIANCE'].forEach(function (prop) {\n  Object.defineProperty(Hls, prop, {\n    get: function get() {\n      _videoJs2['default'].log.warn('using Hls.' + prop + ' is UNSAFE be sure you know what you are doing');\n      return _config2['default'][prop];\n    },\n    set: function set(value) {\n      _videoJs2['default'].log.warn('using Hls.' + prop + ' is UNSAFE be sure you know what you are doing');\n\n      if (typeof value !== 'number' || value < 0) {\n        _videoJs2['default'].log.warn('value of Hls.' + prop + ' must be greater than or equal to 0');\n        return;\n      }\n\n      _config2['default'][prop] = value;\n    }\n  });\n});\n\n/**\n * Updates the selectedIndex of the QualityLevelList when a mediachange happens in hls.\n *\n * @param {QualityLevelList} qualityLevels The QualityLevelList to update.\n * @param {PlaylistLoader} playlistLoader PlaylistLoader containing the new media info.\n * @function handleHlsMediaChange\n */\nvar handleHlsMediaChange = function handleHlsMediaChange(qualityLevels, playlistLoader) {\n  var newPlaylist = playlistLoader.media();\n  var selectedIndex = -1;\n\n  for (var i = 0; i < qualityLevels.length; i++) {\n    if (qualityLevels[i].id === newPlaylist.uri) {\n      selectedIndex = i;\n      break;\n    }\n  }\n\n  qualityLevels.selectedIndex_ = selectedIndex;\n  qualityLevels.trigger({\n    selectedIndex: selectedIndex,\n    type: 'change'\n  });\n};\n\n/**\n * Adds quality levels to list once playlist metadata is available\n *\n * @param {QualityLevelList} qualityLevels The QualityLevelList to attach events to.\n * @param {Object} hls Hls object to listen to for media events.\n * @function handleHlsLoadedMetadata\n */\nvar handleHlsLoadedMetadata = function handleHlsLoadedMetadata(qualityLevels, hls) {\n  hls.representations().forEach(function (rep) {\n    qualityLevels.addQualityLevel(rep);\n  });\n  handleHlsMediaChange(qualityLevels, hls.playlists);\n};\n\n// HLS is a source handler, not a tech. Make sure attempts to use it\n// as one do not cause exceptions.\nHls.canPlaySource = function () {\n  return _videoJs2['default'].log.warn('HLS is no longer a tech. Please remove it from ' + 'your player\\'s techOrder.');\n};\n\n/**\n * Whether the browser has built-in HLS support.\n */\nHls.supportsNativeHls = (function () {\n  var video = _globalDocument2['default'].createElement('video');\n\n  // native HLS is definitely not supported if HTML5 video isn't\n  if (!_videoJs2['default'].getTech('Html5').isSupported()) {\n    return false;\n  }\n\n  // HLS manifests can go by many mime-types\n  var canPlay = [\n  // Apple santioned\n  'application/vnd.apple.mpegurl',\n  // Apple sanctioned for backwards compatibility\n  'audio/mpegurl',\n  // Very common\n  'audio/x-mpegurl',\n  // Very common\n  'application/x-mpegurl',\n  // Included for completeness\n  'video/x-mpegurl', 'video/mpegurl', 'application/mpegurl'];\n\n  return canPlay.some(function (canItPlay) {\n    return (/maybe|probably/i.test(video.canPlayType(canItPlay))\n    );\n  });\n})();\n\n/**\n * HLS is a source handler, not a tech. Make sure attempts to use it\n * as one do not cause exceptions.\n */\nHls.isSupported = function () {\n  return _videoJs2['default'].log.warn('HLS is no longer a tech. Please remove it from ' + 'your player\\'s techOrder.');\n};\n\nvar Component = _videoJs2['default'].getComponent('Component');\n\n/**\n * The Hls Handler object, where we orchestrate all of the parts\n * of HLS to interact with video.js\n *\n * @class HlsHandler\n * @extends videojs.Component\n * @param {Object} source the soruce object\n * @param {Tech} tech the parent tech object\n * @param {Object} options optional and required options\n */\n\nvar HlsHandler = (function (_Component) {\n  _inherits(HlsHandler, _Component);\n\n  function HlsHandler(source, tech, options) {\n    var _this = this;\n\n    _classCallCheck(this, HlsHandler);\n\n    _get(Object.getPrototypeOf(HlsHandler.prototype), 'constructor', this).call(this, tech, options.hls);\n\n    // tech.player() is deprecated but setup a reference to HLS for\n    // backwards-compatibility\n    if (tech.options_ && tech.options_.playerId) {\n      var _player = (0, _videoJs2['default'])(tech.options_.playerId);\n\n      if (!_player.hasOwnProperty('hls')) {\n        Object.defineProperty(_player, 'hls', {\n          get: function get() {\n            _videoJs2['default'].log.warn('player.hls is deprecated. Use player.tech_.hls instead.');\n            tech.trigger({ type: 'usage', name: 'hls-player-access' });\n            return _this;\n          }\n        });\n      }\n    }\n\n    this.tech_ = tech;\n    this.source_ = source;\n    this.stats = {};\n    this.ignoreNextSeekingEvent_ = false;\n    this.setOptions_();\n\n    // overriding native HLS only works if audio tracks have been emulated\n    // error early if we're misconfigured:\n    if (this.options_.overrideNative && (tech.featuresNativeVideoTracks || tech.featuresNativeAudioTracks)) {\n      throw new Error('Overriding native HLS requires emulated tracks. ' + 'See https://git.io/vMpjB');\n    }\n\n    // listen for fullscreenchange events for this player so that we\n    // can adjust our quality selection quickly\n    this.on(_globalDocument2['default'], ['fullscreenchange', 'webkitfullscreenchange', 'mozfullscreenchange', 'MSFullscreenChange'], function (event) {\n      var fullscreenElement = _globalDocument2['default'].fullscreenElement || _globalDocument2['default'].webkitFullscreenElement || _globalDocument2['default'].mozFullScreenElement || _globalDocument2['default'].msFullscreenElement;\n\n      if (fullscreenElement && fullscreenElement.contains(_this.tech_.el())) {\n        _this.masterPlaylistController_.fastQualityChange_();\n      }\n    });\n\n    this.on(this.tech_, 'seeking', function () {\n      if (this.ignoreNextSeekingEvent_) {\n        this.ignoreNextSeekingEvent_ = false;\n        return;\n      }\n\n      this.setCurrentTime(this.tech_.currentTime());\n    });\n    this.on(this.tech_, 'error', function () {\n      if (this.masterPlaylistController_) {\n        this.masterPlaylistController_.pauseLoading();\n      }\n    });\n\n    this.on(this.tech_, 'play', this.play);\n  }\n\n  /**\n   * The Source Handler object, which informs video.js what additional\n   * MIME types are supported and sets up playback. It is registered\n   * automatically to the appropriate tech based on the capabilities of\n   * the browser it is running in. It is not necessary to use or modify\n   * this object in normal usage.\n   */\n\n  _createClass(HlsHandler, [{\n    key: 'setOptions_',\n    value: function setOptions_() {\n      var _this2 = this;\n\n      // defaults\n      this.options_.withCredentials = this.options_.withCredentials || false;\n\n      if (typeof this.options_.blacklistDuration !== 'number') {\n        this.options_.blacklistDuration = 5 * 60;\n      }\n\n      // start playlist selection at a reasonable bandwidth for\n      // broadband internet (0.5 MB/s) or mobile (0.0625 MB/s)\n      if (typeof this.options_.bandwidth !== 'number') {\n        this.options_.bandwidth = INITIAL_BANDWIDTH;\n      }\n\n      // If the bandwidth number is unchanged from the initial setting\n      // then this takes precedence over the enableLowInitialPlaylist option\n      this.options_.enableLowInitialPlaylist = this.options_.enableLowInitialPlaylist && this.options_.bandwidth === INITIAL_BANDWIDTH;\n\n      // grab options passed to player.src\n      ['withCredentials', 'bandwidth', 'handleManifestRedirects'].forEach(function (option) {\n        if (typeof _this2.source_[option] !== 'undefined') {\n          _this2.options_[option] = _this2.source_[option];\n        }\n      });\n\n      this.bandwidth = this.options_.bandwidth;\n    }\n\n    /**\n     * called when player.src gets called, handle a new source\n     *\n     * @param {Object} src the source object to handle\n     */\n  }, {\n    key: 'src',\n    value: function src(_src) {\n      var _this3 = this;\n\n      // do nothing if the src is falsey\n      if (!_src) {\n        return;\n      }\n      this.setOptions_();\n      // add master playlist controller options\n      this.options_.url = this.source_.src;\n      this.options_.tech = this.tech_;\n      this.options_.externHls = Hls;\n\n      this.masterPlaylistController_ = new _masterPlaylistController.MasterPlaylistController(this.options_);\n      this.playbackWatcher_ = new _playbackWatcher2['default'](_videoJs2['default'].mergeOptions(this.options_, {\n        seekable: function seekable() {\n          return _this3.seekable();\n        }\n      }));\n\n      this.masterPlaylistController_.on('error', function () {\n        var player = _videoJs2['default'].players[_this3.tech_.options_.playerId];\n\n        player.error(_this3.masterPlaylistController_.error);\n      });\n\n      // `this` in selectPlaylist should be the HlsHandler for backwards\n      // compatibility with < v2\n      this.masterPlaylistController_.selectPlaylist = this.selectPlaylist ? this.selectPlaylist.bind(this) : Hls.STANDARD_PLAYLIST_SELECTOR.bind(this);\n\n      this.masterPlaylistController_.selectInitialPlaylist = Hls.INITIAL_PLAYLIST_SELECTOR.bind(this);\n\n      // re-expose some internal objects for backwards compatibility with < v2\n      this.playlists = this.masterPlaylistController_.masterPlaylistLoader_;\n      this.mediaSource = this.masterPlaylistController_.mediaSource;\n\n      // Proxy assignment of some properties to the master playlist\n      // controller. Using a custom property for backwards compatibility\n      // with < v2\n      Object.defineProperties(this, {\n        selectPlaylist: {\n          get: function get() {\n            return this.masterPlaylistController_.selectPlaylist;\n          },\n          set: function set(selectPlaylist) {\n            this.masterPlaylistController_.selectPlaylist = selectPlaylist.bind(this);\n          }\n        },\n        throughput: {\n          get: function get() {\n            return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate;\n          },\n          set: function set(throughput) {\n            this.masterPlaylistController_.mainSegmentLoader_.throughput.rate = throughput;\n            // By setting `count` to 1 the throughput value becomes the starting value\n            // for the cumulative average\n            this.masterPlaylistController_.mainSegmentLoader_.throughput.count = 1;\n          }\n        },\n        bandwidth: {\n          get: function get() {\n            return this.masterPlaylistController_.mainSegmentLoader_.bandwidth;\n          },\n          set: function set(bandwidth) {\n            this.masterPlaylistController_.mainSegmentLoader_.bandwidth = bandwidth;\n            // setting the bandwidth manually resets the throughput counter\n            // `count` is set to zero that current value of `rate` isn't included\n            // in the cumulative average\n            this.masterPlaylistController_.mainSegmentLoader_.throughput = {\n              rate: 0,\n              count: 0\n            };\n          }\n        },\n        /**\n         * `systemBandwidth` is a combination of two serial processes bit-rates. The first\n         * is the network bitrate provided by `bandwidth` and the second is the bitrate of\n         * the entire process after that - decryption, transmuxing, and appending - provided\n         * by `throughput`.\n         *\n         * Since the two process are serial, the overall system bandwidth is given by:\n         *   sysBandwidth = 1 / (1 / bandwidth + 1 / throughput)\n         */\n        systemBandwidth: {\n          get: function get() {\n            var invBandwidth = 1 / (this.bandwidth || 1);\n            var invThroughput = undefined;\n\n            if (this.throughput > 0) {\n              invThroughput = 1 / this.throughput;\n            } else {\n              invThroughput = 0;\n            }\n\n            var systemBitrate = Math.floor(1 / (invBandwidth + invThroughput));\n\n            return systemBitrate;\n          },\n          set: function set() {\n            _videoJs2['default'].log.error('The \"systemBandwidth\" property is read-only');\n          }\n        }\n      });\n\n      Object.defineProperties(this.stats, {\n        bandwidth: {\n          get: function get() {\n            return _this3.bandwidth || 0;\n          },\n          enumerable: true\n        },\n        mediaRequests: {\n          get: function get() {\n            return _this3.masterPlaylistController_.mediaRequests_() || 0;\n          },\n          enumerable: true\n        },\n        mediaRequestsAborted: {\n          get: function get() {\n            return _this3.masterPlaylistController_.mediaRequestsAborted_() || 0;\n          },\n          enumerable: true\n        },\n        mediaRequestsTimedout: {\n          get: function get() {\n            return _this3.masterPlaylistController_.mediaRequestsTimedout_() || 0;\n          },\n          enumerable: true\n        },\n        mediaRequestsErrored: {\n          get: function get() {\n            return _this3.masterPlaylistController_.mediaRequestsErrored_() || 0;\n          },\n          enumerable: true\n        },\n        mediaTransferDuration: {\n          get: function get() {\n            return _this3.masterPlaylistController_.mediaTransferDuration_() || 0;\n          },\n          enumerable: true\n        },\n        mediaBytesTransferred: {\n          get: function get() {\n            return _this3.masterPlaylistController_.mediaBytesTransferred_() || 0;\n          },\n          enumerable: true\n        },\n        mediaSecondsLoaded: {\n          get: function get() {\n            return _this3.masterPlaylistController_.mediaSecondsLoaded_() || 0;\n          },\n          enumerable: true\n        }\n      });\n\n      this.tech_.one('canplay', this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));\n\n      this.masterPlaylistController_.on('selectedinitialmedia', function () {\n        // Add the manual rendition mix-in to HlsHandler\n        (0, _renditionMixin2['default'])(_this3);\n      });\n\n      // the bandwidth of the primary segment loader is our best\n      // estimate of overall bandwidth\n      this.on(this.masterPlaylistController_, 'progress', function () {\n        this.tech_.trigger('progress');\n      });\n\n      // In the live case, we need to ignore the very first `seeking` event since\n      // that will be the result of the seek-to-live behavior\n      this.on(this.masterPlaylistController_, 'firstplay', function () {\n        this.ignoreNextSeekingEvent_ = true;\n      });\n\n      this.tech_.ready(function () {\n        return _this3.setupQualityLevels_();\n      });\n\n      // do nothing if the tech has been disposed already\n      // this can occur if someone sets the src in player.ready(), for instance\n      if (!this.tech_.el()) {\n        return;\n      }\n\n      this.tech_.src(_videoJs2['default'].URL.createObjectURL(this.masterPlaylistController_.mediaSource));\n    }\n\n    /**\n     * Initializes the quality levels and sets listeners to update them.\n     *\n     * @method setupQualityLevels_\n     * @private\n     */\n  }, {\n    key: 'setupQualityLevels_',\n    value: function setupQualityLevels_() {\n      var _this4 = this;\n\n      var player = _videoJs2['default'].players[this.tech_.options_.playerId];\n\n      if (player && player.qualityLevels) {\n        this.qualityLevels_ = player.qualityLevels();\n\n        this.masterPlaylistController_.on('selectedinitialmedia', function () {\n          handleHlsLoadedMetadata(_this4.qualityLevels_, _this4);\n        });\n\n        this.playlists.on('mediachange', function () {\n          handleHlsMediaChange(_this4.qualityLevels_, _this4.playlists);\n        });\n      }\n    }\n\n    /**\n     * Begin playing the video.\n     */\n  }, {\n    key: 'play',\n    value: function play() {\n      this.masterPlaylistController_.play();\n    }\n\n    /**\n     * a wrapper around the function in MasterPlaylistController\n     */\n  }, {\n    key: 'setCurrentTime',\n    value: function setCurrentTime(currentTime) {\n      this.masterPlaylistController_.setCurrentTime(currentTime);\n    }\n\n    /**\n     * a wrapper around the function in MasterPlaylistController\n     */\n  }, {\n    key: 'duration',\n    value: function duration() {\n      return this.masterPlaylistController_.duration();\n    }\n\n    /**\n     * a wrapper around the function in MasterPlaylistController\n     */\n  }, {\n    key: 'seekable',\n    value: function seekable() {\n      return this.masterPlaylistController_.seekable();\n    }\n\n    /**\n    * Abort all outstanding work and cleanup.\n    */\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      if (this.playbackWatcher_) {\n        this.playbackWatcher_.dispose();\n      }\n      if (this.masterPlaylistController_) {\n        this.masterPlaylistController_.dispose();\n      }\n      if (this.qualityLevels_) {\n        this.qualityLevels_.dispose();\n      }\n      _get(Object.getPrototypeOf(HlsHandler.prototype), 'dispose', this).call(this);\n    }\n  }]);\n\n  return HlsHandler;\n})(Component);\n\nvar HlsSourceHandler = function HlsSourceHandler(mode) {\n  return {\n    canHandleSource: function canHandleSource(srcObj) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var localOptions = _videoJs2['default'].mergeOptions(_videoJs2['default'].options, options);\n\n      // this forces video.js to skip this tech/mode if its not the one we have been\n      // overriden to use, by returing that we cannot handle the source.\n      if (localOptions.hls && localOptions.hls.mode && localOptions.hls.mode !== mode) {\n        return false;\n      }\n      return HlsSourceHandler.canPlayType(srcObj.type, localOptions);\n    },\n    handleSource: function handleSource(source, tech) {\n      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\n      var localOptions = _videoJs2['default'].mergeOptions(_videoJs2['default'].options, options, { hls: { mode: mode } });\n\n      if (mode === 'flash') {\n        // We need to trigger this asynchronously to give others the chance\n        // to bind to the event when a source is set at player creation\n        tech.setTimeout(function () {\n          tech.trigger('loadstart');\n        }, 1);\n      }\n\n      tech.hls = new HlsHandler(source, tech, localOptions);\n      tech.hls.xhr = (0, _xhr2['default'])();\n\n      tech.hls.src(source.src);\n      return tech.hls;\n    },\n    canPlayType: function canPlayType(type) {\n      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var localOptions = _videoJs2['default'].mergeOptions(_videoJs2['default'].options, options);\n\n      if (HlsSourceHandler.canPlayType(type, localOptions)) {\n        return 'maybe';\n      }\n      return '';\n    }\n  };\n};\n\nHlsSourceHandler.canPlayType = function (type, options) {\n  // No support for IE 10 or below\n  if (_videoJs2['default'].browser.IE_VERSION && _videoJs2['default'].browser.IE_VERSION <= 10) {\n    return false;\n  }\n\n  var mpegurlRE = /^(audio|video|application)\\/(x-|vnd\\.apple\\.)?mpegurl/i;\n\n  // favor native HLS support if it's available\n  if (!options.hls.overrideNative && Hls.supportsNativeHls) {\n    return false;\n  }\n  return mpegurlRE.test(type);\n};\n\nif (typeof _videoJs2['default'].MediaSource === 'undefined' || typeof _videoJs2['default'].URL === 'undefined') {\n  _videoJs2['default'].MediaSource = _videojsContribMediaSources.MediaSource;\n  _videoJs2['default'].URL = _videojsContribMediaSources.URL;\n}\n\nvar flashTech = _videoJs2['default'].getTech('Flash');\n\n// register source handlers with the appropriate techs\nif (_videojsContribMediaSources.MediaSource.supportsNativeMediaSources()) {\n  _videoJs2['default'].getTech('Html5').registerSourceHandler(HlsSourceHandler('html5'), 0);\n}\nif (_globalWindow2['default'].Uint8Array && flashTech) {\n  flashTech.registerSourceHandler(HlsSourceHandler('flash'));\n}\n\n_videoJs2['default'].HlsHandler = HlsHandler;\n_videoJs2['default'].HlsSourceHandler = HlsSourceHandler;\n_videoJs2['default'].Hls = Hls;\nif (!_videoJs2['default'].use) {\n  _videoJs2['default'].registerComponent('Hls', Hls);\n}\n_videoJs2['default'].m3u8 = _m3u8Parser2['default'];\n_videoJs2['default'].options.hls = _videoJs2['default'].options.hls || {};\n\nif (_videoJs2['default'].registerPlugin) {\n  _videoJs2['default'].registerPlugin('reloadSourceOnError', _reloadSourceOnError2['default']);\n} else {\n  _videoJs2['default'].plugin('reloadSourceOnError', _reloadSourceOnError2['default']);\n}\n\nmodule.exports = {\n  Hls: Hls,\n  HlsHandler: HlsHandler,\n  HlsSourceHandler: HlsSourceHandler\n};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAsCAYAAAANUxr1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGQjBFMjU0QzlEQkMxMUVCODg4OThERjIzRjE5NzBBQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGQjBFMjU0RDlEQkMxMUVCODg4OThERjIzRjE5NzBBQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZCMEUyNTRBOURCQzExRUI4ODg5OERGMjNGMTk3MEFDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkZCMEUyNTRCOURCQzExRUI4ODg5OERGMjNGMTk3MEFDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HcWzjAAABtBJREFUeNq0WGtM01cUP20ptAgqCCjOIMh8MB5OfC0Z+JqaODGCH9ySbcn2ZYvukSw4K4lznxZATRbdh2X75hIT1GSCgDieCsxRRJG2iMoE0VpQqKVAS+Hff7tz2ltSkP77p8BJTij33nPO73/uedx7JQaDAWZI0cgHkHcgb0CORw5jcyPIT5FbkW8iX0MeEFKWn58/6f+gGQDZjnxkaEz60d0+BbQPBEP3oBz6rTKw2SWuBYogZ1h0KJ+SsJhLSY4a/2xTrA3Cgx2XcOq3w1djb02ndMOU/yUiPPQuAekxy7+8+ngBqA1K4B3ivkAmBdi6fBRy1lhg5SLuDwbs/iRAD7+bEaBjFk565qIuHGqehoITAiPy3wfxVvg0ZQhC5c4fENRZX4CkAnoKnprlZ07URUH1LMAQkSzpUNVFA3r6zOWc3gJfa30BKsAYUf1UvwReWmQwV0S6TqFO0u0L1BuAnE7nCQxW1el/I2GUBetcEukk3WTjUrZBJQjI4XBstdpl+WfVEfMCxhsU2UBbBSqVarNPQBKJ5MgFzUJXKs83kY0/teEum9NmGXpnT89QSKUKg1gMxUdgdXwH0zoOYPlC95hhCED9DKD0AVZHkzhghTsHYOXCsb2FhYVVEx7CaolAJUf/ehTmV4EcJb7fBnDhY4DD6wFWIjC5zM30m8Zo7hiW0RARZZdskm1WHdweslqtyzhZWO9XFUvB4RQGczoLYNMKcV9/7wUCKwXgBAqpFGH8vu8lyPmR2HPnzvW5PCSXyw/d6VUIgiH6NkM8GKL0twC+yRBeQzZb0DZiyHEBpO2SSqW72vuDBQUTIgEOJs88eLOT3bJCpEPbhIF2jDwkwz1MxQoqKJSV5HbvTIlkSFaIyDZiSGPtD4IQXby/ikzZFCj5k32FJQAxxLmwsCNIMOcQ/vzliwIH5E92nHfZVngDmley86KXurZMiv3LqgwSTjGDOXBAfcPC82SbMHgASTiOM8QssAsKUQUOlFr0wvNL0TZieOHJMiqMDxMXc4JC5R3gt075qjNlD4TXJEZwhKHD0zqcRqNRnRozLijU9RqgpH3mgEiGZIUoJXocEMMdwkKA+Nu3b9enL7NBiEzYBb82+nf/1NZBMkJENsl2Y2MjXQJ4AmTX6/XGwX5D7fa4UUFh6knHy7Ah6oS3j+bIM8fLhfuY6yqDNtF2DfZUI2GhlKdotra1tZVkb1uxq7ZHCXaBmkQGfqkHKNZNPn5QavcOuz1IMeNvm9zN2gnZa0agpb6N7m+jHkBUJSytSElJSQ05a5WZVzrC/SrrRoPnG2dXn3LWjoClv6uebBMGz5bxDJ2prq6u6BAiXh3JzfuJkWzkoK3a2toiss0w8LLi4mIKKFfGjYyMSJRKRXBWelSK2qAAKyedFzB4u4WT7xuh/X5zkUajoZMipcqQx0PA4ogGequrq4v1nfdrTmUYsWDxcw6GdJJufWdbDdkim8y2feIIm5eXR7lgYw8DPWVlZUW9nXdv/bx9AFKjx+YMTGrMGJBO0k022MPEALPtmPrY4PESlXBlRUXFlfdMpuGTO3dmVXaFwmUM9OHxwLYwPNgBh5OGYe8qK9ysqyttamr6G4efUIv09s4bd3s8PZJFJXIM8irktXhwSti/f//eVevWp1V3h8L1J6Fgsom7JkUoePgw0Qp7Eizw5KFGU15eXolNtBunHlHxp6MQC2aHz8cGBEXWQpHpPkSHpkT6GxYWFpeRkbEx5u3NaXk3oyaeYHyRAjt4/o4BePXfHU1DQ0OLxWJ5jsPPmGfob78nswSv0hhPtMDK0JOwlhgzUHPjxo2KIb1WezR90K93vt44CLSWZBCM1qOH6XR5pnXdeV7UYwMDNcoCjlyso9ZECrFMFEWN6toPrLb4BENzS6y6dlrLQNxjOrqZzmnBCD7HsMyjFBtkgd7JlD5obm6+/knyECRHvXlCoDGaU6vV5bSWyXQyHaRrDMH47HCy3Nxcn1+amZlJ7MDCybHUJObMZrNNitF+cMvS5H/0Shi1u78rUsnDjxmv4W5TwxWtVluJQ4+nAumL2jfJRuxAhegHK29vOb3KAmVBFwbqteedmlu5W0yucydx7lYT0BjOlbBYmSh6CEbU8U50YWGgePbSSoa6SktLL0ped7R+nmqGL9LMIDF2tNIYS+k+tpYXC0bso+fUskD5HsKeh9fgzqXs3r07C+sLYCso9YoZSusx9iHz8iw84SlUMs469DMEIq+qqvKkHDXJ52xu3B+YWW3ZNBlom1qrvGqMja2ZMc3mkugpoBQrZvbY6snEgI8JAR94vDLPyrZokP22B7JVHvpfgAEAavc8P6+/hx4AAAAASUVORK5CYII=\"","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_style-resources-loader@1.4.1@style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=ef0f5eb8&lang=less&scoped=true&\"","/**\n * @file videojs-contrib-media-sources.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _globalWindow = require('global/window');\n\nvar _globalWindow2 = _interopRequireDefault(_globalWindow);\n\nvar _flashMediaSource = require('./flash-media-source');\n\nvar _flashMediaSource2 = _interopRequireDefault(_flashMediaSource);\n\nvar _htmlMediaSource = require('./html-media-source');\n\nvar _htmlMediaSource2 = _interopRequireDefault(_htmlMediaSource);\n\nvar _videoJs = require('video.js');\n\nvar _videoJs2 = _interopRequireDefault(_videoJs);\n\nvar urlCount = 0;\n\n// ------------\n// Media Source\n// ------------\n\nvar defaults = {\n  // how to determine the MediaSource implementation to use. There\n  // are three available modes:\n  // - auto: use native MediaSources where available and Flash\n  //   everywhere else\n  // - html5: always use native MediaSources\n  // - flash: always use the Flash MediaSource polyfill\n  mode: 'auto'\n};\n\n// store references to the media sources so they can be connected\n// to a video element (a swf object)\n// TODO: can we store this somewhere local to this module?\n_videoJs2['default'].mediaSources = {};\n\n/**\n * Provide a method for a swf object to notify JS that a\n * media source is now open.\n *\n * @param {String} msObjectURL string referencing the MSE Object URL\n * @param {String} swfId the swf id\n */\nvar open = function open(msObjectURL, swfId) {\n  var mediaSource = _videoJs2['default'].mediaSources[msObjectURL];\n\n  if (mediaSource) {\n    mediaSource.trigger({ type: 'sourceopen', swfId: swfId });\n  } else {\n    throw new Error('Media Source not found (Video.js)');\n  }\n};\n\n/**\n * Check to see if the native MediaSource object exists and supports\n * an MP4 container with both H.264 video and AAC-LC audio.\n *\n * @return {Boolean} if  native media sources are supported\n */\nvar supportsNativeMediaSources = function supportsNativeMediaSources() {\n  return !!_globalWindow2['default'].MediaSource && !!_globalWindow2['default'].MediaSource.isTypeSupported && _globalWindow2['default'].MediaSource.isTypeSupported('video/mp4;codecs=\"avc1.4d400d,mp4a.40.2\"');\n};\n\n/**\n * An emulation of the MediaSource API so that we can support\n * native and non-native functionality such as flash and\n * video/mp2t videos. returns an instance of HtmlMediaSource or\n * FlashMediaSource depending on what is supported and what options\n * are passed in.\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/MediaSource/MediaSource\n * @param {Object} options options to use during setup.\n */\nvar MediaSource = function MediaSource(options) {\n  var settings = _videoJs2['default'].mergeOptions(defaults, options);\n\n  this.MediaSource = {\n    open: open,\n    supportsNativeMediaSources: supportsNativeMediaSources\n  };\n\n  // determine whether HTML MediaSources should be used\n  if (settings.mode === 'html5' || settings.mode === 'auto' && supportsNativeMediaSources()) {\n    return new _htmlMediaSource2['default']();\n  } else if (_videoJs2['default'].getTech('Flash')) {\n    return new _flashMediaSource2['default']();\n  }\n\n  throw new Error('Cannot use Flash or Html5 to create a MediaSource for this video');\n};\n\nexports.MediaSource = MediaSource;\nMediaSource.open = open;\nMediaSource.supportsNativeMediaSources = supportsNativeMediaSources;\n\n/**\n * A wrapper around the native URL for our MSE object\n * implementation, this object is exposed under videojs.URL\n *\n * @link https://developer.mozilla.org/en-US/docs/Web/API/URL/URL\n */\nvar URL = {\n  /**\n   * A wrapper around the native createObjectURL for our objects.\n   * This function maps a native or emulated mediaSource to a blob\n   * url so that it can be loaded into video.js\n   *\n   * @link https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL\n   * @param {MediaSource} object the object to create a blob url to\n   */\n  createObjectURL: function createObjectURL(object) {\n    var objectUrlPrefix = 'blob:vjs-media-source/';\n    var url = undefined;\n\n    // use the native MediaSource to generate an object URL\n    if (object instanceof _htmlMediaSource2['default']) {\n      url = _globalWindow2['default'].URL.createObjectURL(object.nativeMediaSource_);\n      object.url_ = url;\n      return url;\n    }\n    // if the object isn't an emulated MediaSource, delegate to the\n    // native implementation\n    if (!(object instanceof _flashMediaSource2['default'])) {\n      url = _globalWindow2['default'].URL.createObjectURL(object);\n      object.url_ = url;\n      return url;\n    }\n\n    // build a URL that can be used to map back to the emulated\n    // MediaSource\n    url = objectUrlPrefix + urlCount;\n\n    urlCount++;\n\n    // setup the mapping back to object\n    _videoJs2['default'].mediaSources[url] = object;\n\n    return url;\n  }\n};\n\nexports.URL = URL;\n_videoJs2['default'].MediaSource = MediaSource;\n_videoJs2['default'].URL = URL;","\n/**\n * @file - codecs.js - Handles tasks regarding codec strings such as translating them to\n * codec strings, or translating codec strings into objects that can be examined.\n */\n\n/**\n * Parses a codec string to retrieve the number of codecs specified,\n * the video codec and object type indicator, and the audio profile.\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar parseCodecs = function parseCodecs() {\n  var codecs = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n\n  var result = {\n    codecCount: 0\n  };\n  var parsed = undefined;\n\n  result.codecCount = codecs.split(',').length;\n  result.codecCount = result.codecCount || 2;\n\n  // parse the video codec\n  parsed = /(^|\\s|,)+(avc1)([^ ,]*)/i.exec(codecs);\n  if (parsed) {\n    result.videoCodec = parsed[2];\n    result.videoObjectTypeIndicator = parsed[3];\n  }\n\n  // parse the last field of the audio codec\n  result.audioProfile = /(^|\\s|,)+mp4a.[0-9A-Fa-f]+\\.([0-9A-Fa-f]+)/i.exec(codecs);\n  result.audioProfile = result.audioProfile && result.audioProfile[2];\n\n  return result;\n};\nexports.parseCodecs = parseCodecs;","/**\n * An object that stores the bytes of an FLV tag and methods for\n * querying and manipulating that data.\n * @see http://download.macromedia.com/f4v/video_file_format_spec_v10_1.pdf\n */\n'use strict';\n\nvar FlvTag;\n\n// (type:uint, extraData:Boolean = false) extends ByteArray\nFlvTag = function(type, extraData) {\n  var\n    // Counter if this is a metadata tag, nal start marker if this is a video\n    // tag. unused if this is an audio tag\n    adHoc = 0, // :uint\n\n    // The default size is 16kb but this is not enough to hold iframe\n    // data and the resizing algorithm costs a bit so we create a larger\n    // starting buffer for video tags\n    bufferStartSize = 16384,\n\n    // checks whether the FLV tag has enough capacity to accept the proposed\n    // write and re-allocates the internal buffers if necessary\n    prepareWrite = function(flv, count) {\n      var\n        bytes,\n        minLength = flv.position + count;\n      if (minLength < flv.bytes.byteLength) {\n        // there's enough capacity so do nothing\n        return;\n      }\n\n      // allocate a new buffer and copy over the data that will not be modified\n      bytes = new Uint8Array(minLength * 2);\n      bytes.set(flv.bytes.subarray(0, flv.position), 0);\n      flv.bytes = bytes;\n      flv.view = new DataView(flv.bytes.buffer);\n    },\n\n    // commonly used metadata properties\n    widthBytes = FlvTag.widthBytes || new Uint8Array('width'.length),\n    heightBytes = FlvTag.heightBytes || new Uint8Array('height'.length),\n    videocodecidBytes = FlvTag.videocodecidBytes || new Uint8Array('videocodecid'.length),\n    i;\n\n  if (!FlvTag.widthBytes) {\n    // calculating the bytes of common metadata names ahead of time makes the\n    // corresponding writes faster because we don't have to loop over the\n    // characters\n    // re-test with test/perf.html if you're planning on changing this\n    for (i = 0; i < 'width'.length; i++) {\n      widthBytes[i] = 'width'.charCodeAt(i);\n    }\n    for (i = 0; i < 'height'.length; i++) {\n      heightBytes[i] = 'height'.charCodeAt(i);\n    }\n    for (i = 0; i < 'videocodecid'.length; i++) {\n      videocodecidBytes[i] = 'videocodecid'.charCodeAt(i);\n    }\n\n    FlvTag.widthBytes = widthBytes;\n    FlvTag.heightBytes = heightBytes;\n    FlvTag.videocodecidBytes = videocodecidBytes;\n  }\n\n  this.keyFrame = false; // :Boolean\n\n  switch (type) {\n  case FlvTag.VIDEO_TAG:\n    this.length = 16;\n    // Start the buffer at 256k\n    bufferStartSize *= 6;\n    break;\n  case FlvTag.AUDIO_TAG:\n    this.length = 13;\n    this.keyFrame = true;\n    break;\n  case FlvTag.METADATA_TAG:\n    this.length = 29;\n    this.keyFrame = true;\n    break;\n  default:\n    throw new Error('Unknown FLV tag type');\n  }\n\n  this.bytes = new Uint8Array(bufferStartSize);\n  this.view = new DataView(this.bytes.buffer);\n  this.bytes[0] = type;\n  this.position = this.length;\n  this.keyFrame = extraData; // Defaults to false\n\n  // presentation timestamp\n  this.pts = 0;\n  // decoder timestamp\n  this.dts = 0;\n\n  // ByteArray#writeBytes(bytes:ByteArray, offset:uint = 0, length:uint = 0)\n  this.writeBytes = function(bytes, offset, length) {\n    var\n      start = offset || 0,\n      end;\n    length = length || bytes.byteLength;\n    end = start + length;\n\n    prepareWrite(this, length);\n    this.bytes.set(bytes.subarray(start, end), this.position);\n\n    this.position += length;\n    this.length = Math.max(this.length, this.position);\n  };\n\n  // ByteArray#writeByte(value:int):void\n  this.writeByte = function(byte) {\n    prepareWrite(this, 1);\n    this.bytes[this.position] = byte;\n    this.position++;\n    this.length = Math.max(this.length, this.position);\n  };\n\n  // ByteArray#writeShort(value:int):void\n  this.writeShort = function(short) {\n    prepareWrite(this, 2);\n    this.view.setUint16(this.position, short);\n    this.position += 2;\n    this.length = Math.max(this.length, this.position);\n  };\n\n  // Negative index into array\n  // (pos:uint):int\n  this.negIndex = function(pos) {\n    return this.bytes[this.length - pos];\n  };\n\n  // The functions below ONLY work when this[0] == VIDEO_TAG.\n  // We are not going to check for that because we dont want the overhead\n  // (nal:ByteArray = null):int\n  this.nalUnitSize = function() {\n    if (adHoc === 0) {\n      return 0;\n    }\n\n    return this.length - (adHoc + 4);\n  };\n\n  this.startNalUnit = function() {\n    // remember position and add 4 bytes\n    if (adHoc > 0) {\n      throw new Error('Attempted to create new NAL wihout closing the old one');\n    }\n\n    // reserve 4 bytes for nal unit size\n    adHoc = this.length;\n    this.length += 4;\n    this.position = this.length;\n  };\n\n  // (nal:ByteArray = null):void\n  this.endNalUnit = function(nalContainer) {\n    var\n      nalStart, // :uint\n      nalLength; // :uint\n\n    // Rewind to the marker and write the size\n    if (this.length === adHoc + 4) {\n      // we started a nal unit, but didnt write one, so roll back the 4 byte size value\n      this.length -= 4;\n    } else if (adHoc > 0) {\n      nalStart = adHoc + 4;\n      nalLength = this.length - nalStart;\n\n      this.position = adHoc;\n      this.view.setUint32(this.position, nalLength);\n      this.position = this.length;\n\n      if (nalContainer) {\n        // Add the tag to the NAL unit\n        nalContainer.push(this.bytes.subarray(nalStart, nalStart + nalLength));\n      }\n    }\n\n    adHoc = 0;\n  };\n\n  /**\n   * Write out a 64-bit floating point valued metadata property. This method is\n   * called frequently during a typical parse and needs to be fast.\n   */\n  // (key:String, val:Number):void\n  this.writeMetaDataDouble = function(key, val) {\n    var i;\n    prepareWrite(this, 2 + key.length + 9);\n\n    // write size of property name\n    this.view.setUint16(this.position, key.length);\n    this.position += 2;\n\n    // this next part looks terrible but it improves parser throughput by\n    // 10kB/s in my testing\n\n    // write property name\n    if (key === 'width') {\n      this.bytes.set(widthBytes, this.position);\n      this.position += 5;\n    } else if (key === 'height') {\n      this.bytes.set(heightBytes, this.position);\n      this.position += 6;\n    } else if (key === 'videocodecid') {\n      this.bytes.set(videocodecidBytes, this.position);\n      this.position += 12;\n    } else {\n      for (i = 0; i < key.length; i++) {\n        this.bytes[this.position] = key.charCodeAt(i);\n        this.position++;\n      }\n    }\n\n    // skip null byte\n    this.position++;\n\n    // write property value\n    this.view.setFloat64(this.position, val);\n    this.position += 8;\n\n    // update flv tag length\n    this.length = Math.max(this.length, this.position);\n    ++adHoc;\n  };\n\n  // (key:String, val:Boolean):void\n  this.writeMetaDataBoolean = function(key, val) {\n    var i;\n    prepareWrite(this, 2);\n    this.view.setUint16(this.position, key.length);\n    this.position += 2;\n    for (i = 0; i < key.length; i++) {\n      // if key.charCodeAt(i) >= 255, handle error\n      prepareWrite(this, 1);\n      this.bytes[this.position] = key.charCodeAt(i);\n      this.position++;\n    }\n    prepareWrite(this, 2);\n    this.view.setUint8(this.position, 0x01);\n    this.position++;\n    this.view.setUint8(this.position, val ? 0x01 : 0x00);\n    this.position++;\n    this.length = Math.max(this.length, this.position);\n    ++adHoc;\n  };\n\n  // ():ByteArray\n  this.finalize = function() {\n    var\n      dtsDelta, // :int\n      len; // :int\n\n    switch (this.bytes[0]) {\n      // Video Data\n    case FlvTag.VIDEO_TAG:\n       // We only support AVC, 1 = key frame (for AVC, a seekable\n       // frame), 2 = inter frame (for AVC, a non-seekable frame)\n      this.bytes[11] = ((this.keyFrame || extraData) ? 0x10 : 0x20) | 0x07;\n      this.bytes[12] = extraData ?  0x00 : 0x01;\n\n      dtsDelta = this.pts - this.dts;\n      this.bytes[13] = (dtsDelta & 0x00FF0000) >>> 16;\n      this.bytes[14] = (dtsDelta & 0x0000FF00) >>>  8;\n      this.bytes[15] = (dtsDelta & 0x000000FF) >>>  0;\n      break;\n\n    case FlvTag.AUDIO_TAG:\n      this.bytes[11] = 0xAF; // 44 kHz, 16-bit stereo\n      this.bytes[12] = extraData ? 0x00 : 0x01;\n      break;\n\n    case FlvTag.METADATA_TAG:\n      this.position = 11;\n      this.view.setUint8(this.position, 0x02); // String type\n      this.position++;\n      this.view.setUint16(this.position, 0x0A); // 10 Bytes\n      this.position += 2;\n      // set \"onMetaData\"\n      this.bytes.set([0x6f, 0x6e, 0x4d, 0x65,\n                      0x74, 0x61, 0x44, 0x61,\n                      0x74, 0x61], this.position);\n      this.position += 10;\n      this.bytes[this.position] = 0x08; // Array type\n      this.position++;\n      this.view.setUint32(this.position, adHoc);\n      this.position = this.length;\n      this.bytes.set([0, 0, 9], this.position);\n      this.position += 3; // End Data Tag\n      this.length = this.position;\n      break;\n    }\n\n    len = this.length - 11;\n\n    // write the DataSize field\n    this.bytes[ 1] = (len & 0x00FF0000) >>> 16;\n    this.bytes[ 2] = (len & 0x0000FF00) >>>  8;\n    this.bytes[ 3] = (len & 0x000000FF) >>>  0;\n    // write the Timestamp\n    this.bytes[ 4] = (this.dts & 0x00FF0000) >>> 16;\n    this.bytes[ 5] = (this.dts & 0x0000FF00) >>>  8;\n    this.bytes[ 6] = (this.dts & 0x000000FF) >>>  0;\n    this.bytes[ 7] = (this.dts & 0xFF000000) >>> 24;\n    // write the StreamID\n    this.bytes[ 8] = 0;\n    this.bytes[ 9] = 0;\n    this.bytes[10] = 0;\n\n    // Sometimes we're at the end of the view and have one slot to write a\n    // uint32, so, prepareWrite of count 4, since, view is uint8\n    prepareWrite(this, 4);\n    this.view.setUint32(this.length, this.length);\n    this.length += 4;\n    this.position += 4;\n\n    // trim down the byte buffer to what is actually being used\n    this.bytes = this.bytes.subarray(0, this.length);\n    this.frameTime = FlvTag.frameTime(this.bytes);\n    // if bytes.bytelength isn't equal to this.length, handle error\n    return this;\n  };\n};\n\nFlvTag.AUDIO_TAG = 0x08; // == 8, :uint\nFlvTag.VIDEO_TAG = 0x09; // == 9, :uint\nFlvTag.METADATA_TAG = 0x12; // == 18, :uint\n\n// (tag:ByteArray):Boolean {\nFlvTag.isAudioFrame = function(tag) {\n  return FlvTag.AUDIO_TAG === tag[0];\n};\n\n// (tag:ByteArray):Boolean {\nFlvTag.isVideoFrame = function(tag) {\n  return FlvTag.VIDEO_TAG === tag[0];\n};\n\n// (tag:ByteArray):Boolean {\nFlvTag.isMetaData = function(tag) {\n  return FlvTag.METADATA_TAG === tag[0];\n};\n\n// (tag:ByteArray):Boolean {\nFlvTag.isKeyFrame = function(tag) {\n  if (FlvTag.isVideoFrame(tag)) {\n    return tag[11] === 0x17;\n  }\n\n  if (FlvTag.isAudioFrame(tag)) {\n    return true;\n  }\n\n  if (FlvTag.isMetaData(tag)) {\n    return true;\n  }\n\n  return false;\n};\n\n// (tag:ByteArray):uint {\nFlvTag.frameTime = function(tag) {\n  var pts = tag[ 4] << 16; // :uint\n  pts |= tag[ 5] <<  8;\n  pts |= tag[ 6] <<  0;\n  pts |= tag[ 7] << 24;\n  return pts;\n};\n\nmodule.exports = FlvTag;\n","\"use strict\";\nvar window = require(\"global/window\")\nvar isFunction = require(\"is-function\")\nvar parseHeaders = require(\"parse-headers\")\nvar xtend = require(\"xtend\")\n\nmodule.exports = createXHR\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    if(typeof options.callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n\n    var called = false\n    var callback = function cbOnce(err, response, body){\n        if(!called){\n            called = true\n            options.callback(err, response, body)\n        }\n    }\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            setTimeout(loadFunc, 0)\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else {\n            body = xhr.responseText || getXml(xhr)\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        return callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        return callback(err, response, response.body)\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n    var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n    }\n\n    if (\"json\" in options && options.json !== false) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json === true ? body : options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.onabort = function(){\n        aborted = true;\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            if (aborted) return\n            aborted = true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n    // XMLHttpRequest spec says to pass null as body to indicate no body\n    // See https://github.com/naugtur/xhr/issues/100.\n    xhr.send(body || null)\n\n    return xhr\n\n\n}\n\nfunction getXml(xhr) {\n    if (xhr.responseType === \"document\") {\n        return xhr.responseXML\n    }\n    var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\"\n    if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n        return xhr.responseXML\n    }\n\n    return null\n}\n\nfunction noop() {}\n","/**\n * mux.js\n *\n * Copyright (c) 2016 Brightcove\n * All rights reserved.\n *\n * Utilities to detect basic properties and metadata about Aac data.\n */\n'use strict';\n\nvar ADTS_SAMPLING_FREQUENCIES = [\n  96000,\n  88200,\n  64000,\n  48000,\n  44100,\n  32000,\n  24000,\n  22050,\n  16000,\n  12000,\n  11025,\n  8000,\n  7350\n];\n\nvar parseSyncSafeInteger = function(data) {\n  return (data[0] << 21) |\n          (data[1] << 14) |\n          (data[2] << 7) |\n          (data[3]);\n};\n\n// return a percent-encoded representation of the specified byte range\n// @see http://en.wikipedia.org/wiki/Percent-encoding\nvar percentEncode = function(bytes, start, end) {\n  var i, result = '';\n  for (i = start; i < end; i++) {\n    result += '%' + ('00' + bytes[i].toString(16)).slice(-2);\n  }\n  return result;\n};\n\n// return the string representation of the specified byte range,\n// interpreted as ISO-8859-1.\nvar parseIso88591 = function(bytes, start, end) {\n  return unescape(percentEncode(bytes, start, end)); // jshint ignore:line\n};\n\nvar parseId3TagSize = function(header, byteIndex) {\n  var\n    returnSize = (header[byteIndex + 6] << 21) |\n                 (header[byteIndex + 7] << 14) |\n                 (header[byteIndex + 8] << 7) |\n                 (header[byteIndex + 9]),\n    flags = header[byteIndex + 5],\n    footerPresent = (flags & 16) >> 4;\n\n  if (footerPresent) {\n    return returnSize + 20;\n  }\n  return returnSize + 10;\n};\n\nvar parseAdtsSize = function(header, byteIndex) {\n  var\n    lowThree = (header[byteIndex + 5] & 0xE0) >> 5,\n    middle = header[byteIndex + 4] << 3,\n    highTwo = header[byteIndex + 3] & 0x3 << 11;\n\n  return (highTwo | middle) | lowThree;\n};\n\nvar parseType = function(header, byteIndex) {\n  if ((header[byteIndex] === 'I'.charCodeAt(0)) &&\n      (header[byteIndex + 1] === 'D'.charCodeAt(0)) &&\n      (header[byteIndex + 2] === '3'.charCodeAt(0))) {\n    return 'timed-metadata';\n  } else if ((header[byteIndex] & 0xff === 0xff) &&\n             ((header[byteIndex + 1] & 0xf0) === 0xf0)) {\n    return 'audio';\n  }\n  return null;\n};\n\nvar parseSampleRate = function(packet) {\n  var i = 0;\n\n  while (i + 5 < packet.length) {\n    if (packet[i] !== 0xFF || (packet[i + 1] & 0xF6) !== 0xF0) {\n      // If a valid header was not found,  jump one forward and attempt to\n      // find a valid ADTS header starting at the next byte\n      i++;\n      continue;\n    }\n    return ADTS_SAMPLING_FREQUENCIES[(packet[i + 2] & 0x3c) >>> 2];\n  }\n\n  return null;\n};\n\nvar parseAacTimestamp = function(packet) {\n  var frameStart, frameSize, frame, frameHeader;\n\n  // find the start of the first frame and the end of the tag\n  frameStart = 10;\n  if (packet[5] & 0x40) {\n    // advance the frame start past the extended header\n    frameStart += 4; // header size field\n    frameStart += parseSyncSafeInteger(packet.subarray(10, 14));\n  }\n\n  // parse one or more ID3 frames\n  // http://id3.org/id3v2.3.0#ID3v2_frame_overview\n  do {\n    // determine the number of bytes in this frame\n    frameSize = parseSyncSafeInteger(packet.subarray(frameStart + 4, frameStart + 8));\n    if (frameSize < 1) {\n      return null;\n    }\n    frameHeader = String.fromCharCode(packet[frameStart],\n                                      packet[frameStart + 1],\n                                      packet[frameStart + 2],\n                                      packet[frameStart + 3]);\n\n    if (frameHeader === 'PRIV') {\n      frame = packet.subarray(frameStart + 10, frameStart + frameSize + 10);\n\n      for (var i = 0; i < frame.byteLength; i++) {\n        if (frame[i] === 0) {\n          var owner = parseIso88591(frame, 0, i);\n          if (owner === 'com.apple.streaming.transportStreamTimestamp') {\n            var d = frame.subarray(i + 1);\n            var size = ((d[3] & 0x01)  << 30) |\n                       (d[4]  << 22) |\n                       (d[5] << 14) |\n                       (d[6] << 6) |\n                       (d[7] >>> 2);\n            size *= 4;\n            size += d[7] & 0x03;\n\n            return size;\n          }\n          break;\n        }\n      }\n    }\n\n    frameStart += 10; // advance past the frame header\n    frameStart += frameSize; // advance past the frame body\n  } while (frameStart < packet.byteLength);\n  return null;\n};\n\nmodule.exports = {\n  parseId3TagSize: parseId3TagSize,\n  parseAdtsSize: parseAdtsSize,\n  parseType: parseType,\n  parseSampleRate: parseSampleRate,\n  parseAacTimestamp: parseAacTimestamp\n};\n","/**\n * @file index.js\n *\n * Index module to easily import the primary components of AES-128\n * decryption. Like this:\n *\n * ```js\n * import {Decrypter, decrypt, AsyncStream} from 'aes-decrypter';\n * ```\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _decrypter = require('./decrypter');\n\nvar _asyncStream = require('./async-stream');\n\nvar _asyncStream2 = _interopRequireDefault(_asyncStream);\n\nexports['default'] = {\n  decrypt: _decrypter.decrypt,\n  Decrypter: _decrypter.Decrypter,\n  AsyncStream: _asyncStream2['default']\n};\nmodule.exports = exports['default'];","/**\n * @file async-stream.js\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar _stream = require('./stream');\n\nvar _stream2 = _interopRequireDefault(_stream);\n\n/**\n * A wrapper around the Stream class to use setTiemout\n * and run stream \"jobs\" Asynchronously\n *\n * @class AsyncStream\n * @extends Stream\n */\n\nvar AsyncStream = (function (_Stream) {\n  _inherits(AsyncStream, _Stream);\n\n  function AsyncStream() {\n    _classCallCheck(this, AsyncStream);\n\n    _get(Object.getPrototypeOf(AsyncStream.prototype), 'constructor', this).call(this, _stream2['default']);\n    this.jobs = [];\n    this.delay = 1;\n    this.timeout_ = null;\n  }\n\n  /**\n   * process an async job\n   *\n   * @private\n   */\n\n  _createClass(AsyncStream, [{\n    key: 'processJob_',\n    value: function processJob_() {\n      this.jobs.shift()();\n      if (this.jobs.length) {\n        this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n      } else {\n        this.timeout_ = null;\n      }\n    }\n\n    /**\n     * push a job into the stream\n     *\n     * @param {Function} job the job to push into the stream\n     */\n  }, {\n    key: 'push',\n    value: function push(job) {\n      this.jobs.push(job);\n      if (!this.timeout_) {\n        this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay);\n      }\n    }\n  }]);\n\n  return AsyncStream;\n})(_stream2['default']);\n\nexports['default'] = AsyncStream;\nmodule.exports = exports['default'];","/**\n * Copyright 2013 vtt.js Contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Default exports for Node. Export the extended versions of VTTCue and\n// VTTRegion in Node since we likely want the capability to convert back and\n// forth between JSON. If we don't then it's not that big of a deal since we're\n// off browser.\n\nvar window = require('global/window');\n\nvar vttjs = module.exports = {\n  WebVTT: require(\"./vtt.js\"),\n  VTTCue: require(\"./vttcue.js\"),\n  VTTRegion: require(\"./vttregion.js\")\n};\n\nwindow.vttjs = vttjs;\nwindow.WebVTT = vttjs.WebVTT;\n\nvar cueShim = vttjs.VTTCue;\nvar regionShim = vttjs.VTTRegion;\nvar nativeVTTCue = window.VTTCue;\nvar nativeVTTRegion = window.VTTRegion;\n\nvttjs.shim = function() {\n  window.VTTCue = cueShim;\n  window.VTTRegion = regionShim;\n};\n\nvttjs.restore = function() {\n  window.VTTCue = nativeVTTCue;\n  window.VTTRegion = nativeVTTRegion;\n};\n\nif (!window.VTTCue) {\n  vttjs.shim();\n}\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0QzY3MDc3MjA4REExMUU5QjZEMUE4NUM3MzI2NTkwQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0QzY3MDc3MzA4REExMUU5QjZEMUE4NUM3MzI2NTkwQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRDNjcwNzcwMDhEQTExRTlCNkQxQTg1QzczMjY1OTBBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjRDNjcwNzcxMDhEQTExRTlCNkQxQTg1QzczMjY1OTBBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8F5fRAAABmdJREFUeNrMWGtsVFUQ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\"","/**\n * @file codec-utils.js\n */\n\n/**\n * Check if a codec string refers to an audio codec.\n *\n * @param {String} codec codec string to check\n * @return {Boolean} if this is an audio codec\n * @private\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar isAudioCodec = function isAudioCodec(codec) {\n  return (/mp4a\\.\\d+.\\d+/i.test(codec)\n  );\n};\n\n/**\n * Check if a codec string refers to a video codec.\n *\n * @param {String} codec codec string to check\n * @return {Boolean} if this is a video codec\n * @private\n */\nvar isVideoCodec = function isVideoCodec(codec) {\n  return (/avc1\\.[\\da-f]+/i.test(codec)\n  );\n};\n\n/**\n * Parse a content type header into a type and parameters\n * object\n *\n * @param {String} type the content type header\n * @return {Object} the parsed content-type\n * @private\n */\nvar parseContentType = function parseContentType(type) {\n  var object = { type: '', parameters: {} };\n  var parameters = type.trim().split(';');\n\n  // first parameter should always be content-type\n  object.type = parameters.shift().trim();\n  parameters.forEach(function (parameter) {\n    var pair = parameter.trim().split('=');\n\n    if (pair.length > 1) {\n      var _name = pair[0].replace(/\"/g, '').trim();\n      var value = pair[1].replace(/\"/g, '').trim();\n\n      object.parameters[_name] = value;\n    }\n  });\n\n  return object;\n};\n\n/**\n * Replace the old apple-style `avc1.<dd>.<dd>` codec string with the standard\n * `avc1.<hhhhhh>`\n *\n * @param {Array} codecs an array of codec strings to fix\n * @return {Array} the translated codec array\n * @private\n */\nvar translateLegacyCodecs = function translateLegacyCodecs(codecs) {\n  return codecs.map(function (codec) {\n    return codec.replace(/avc1\\.(\\d+)\\.(\\d+)/i, function (orig, profile, avcLevel) {\n      var profileHex = ('00' + Number(profile).toString(16)).slice(-2);\n      var avcLevelHex = ('00' + Number(avcLevel).toString(16)).slice(-2);\n\n      return 'avc1.' + profileHex + '00' + avcLevelHex;\n    });\n  });\n};\n\nexports['default'] = {\n  isAudioCodec: isAudioCodec,\n  parseContentType: parseContentType,\n  isVideoCodec: isVideoCodec,\n  translateLegacyCodecs: translateLegacyCodecs\n};\nmodule.exports = exports['default'];","export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/_less-loader@5.0.0@less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/_style-resources-loader@1.4.1@style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!./leftBox.vue?vue&type=style&index=0&id=c48cf910&lang=less&scoped=true&\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAkCAYAAADPRbkKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NDgyNEVDMjA4REExMUU5QjhFMjg5MkE1NzBCQzEzNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NDgyNEVDMzA4REExMUU5QjhFMjg5MkE1NzBCQzEzNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ0ODI0RUMwMDhEQTExRTlCOEUyODkyQTU3MEJDMTM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ0ODI0RUMxMDhEQTExRTlCOEUyODkyQTU3MEJDMTM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+huhsOAAACKZJREFUeNq8WQ1wVNUV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\""],"sourceRoot":""}